/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 	};
/******/
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"main": 0
/******/ 	};
/******/
/******/
/******/
/******/ 	// script path function
/******/ 	function jsonpScriptSrc(chunkId) {
/******/ 		return __webpack_require__.p + "rhodonite-" + ({"effekseer":"effekseer","pbr":"pbr","sparkgear":"sparkgear","webgl":"webgl"}[chunkId]||chunkId) + ".ie11.js"
/******/ 	}
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/ 	// This file contains only the entry chunk.
/******/ 	// The chunk loading function for additional chunks
/******/ 	__webpack_require__.e = function requireEnsure(chunkId) {
/******/ 		var promises = [];
/******/
/******/
/******/ 		// JSONP chunk loading for javascript
/******/
/******/ 		var installedChunkData = installedChunks[chunkId];
/******/ 		if(installedChunkData !== 0) { // 0 means "already installed".
/******/
/******/ 			// a Promise means "currently loading".
/******/ 			if(installedChunkData) {
/******/ 				promises.push(installedChunkData[2]);
/******/ 			} else {
/******/ 				// setup Promise in chunk cache
/******/ 				var promise = new Promise(function(resolve, reject) {
/******/ 					installedChunkData = installedChunks[chunkId] = [resolve, reject];
/******/ 				});
/******/ 				promises.push(installedChunkData[2] = promise);
/******/
/******/ 				// start chunk loading
/******/ 				var script = document.createElement('script');
/******/ 				var onScriptComplete;
/******/
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.src = jsonpScriptSrc(chunkId);
/******/
/******/ 				onScriptComplete = function (event) {
/******/ 					// avoid mem leaks in IE.
/******/ 					script.onerror = script.onload = null;
/******/ 					clearTimeout(timeout);
/******/ 					var chunk = installedChunks[chunkId];
/******/ 					if(chunk !== 0) {
/******/ 						if(chunk) {
/******/ 							var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 							var realSrc = event && event.target && event.target.src;
/******/ 							var error = new Error('Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')');
/******/ 							error.type = errorType;
/******/ 							error.request = realSrc;
/******/ 							chunk[1](error);
/******/ 						}
/******/ 						installedChunks[chunkId] = undefined;
/******/ 					}
/******/ 				};
/******/ 				var timeout = setTimeout(function(){
/******/ 					onScriptComplete({ type: 'timeout', target: script });
/******/ 				}, 120000);
/******/ 				script.onerror = script.onload = onScriptComplete;
/******/ 				document.head.appendChild(script);
/******/ 			}
/******/ 		}
/******/ 		return Promise.all(promises);
/******/ 	};
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/dist/";
/******/
/******/ 	// on error function for async loading
/******/ 	__webpack_require__.oe = function(err) { console.error(err); throw err; };
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/foundation/main.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/base64-js/index.js":
/*!*****************************************!*\
  !*** ./node_modules/base64-js/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  for (var i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n\n\n//# sourceURL=webpack:///./node_modules/base64-js/index.js?");

/***/ }),

/***/ "./node_modules/buffer/index.js":
/*!**************************************!*\
  !*** ./node_modules/buffer/index.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n\n\nvar base64 = __webpack_require__(/*! base64-js */ \"./node_modules/base64-js/index.js\")\nvar ieee754 = __webpack_require__(/*! ieee754 */ \"./node_modules/ieee754/index.js\")\nvar isArray = __webpack_require__(/*! isarray */ \"./node_modules/isarray/index.js\")\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack:///./node_modules/buffer/index.js?");

/***/ }),

/***/ "./node_modules/ieee754/index.js":
/*!***************************************!*\
  !*** ./node_modules/ieee754/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n\n//# sourceURL=webpack:///./node_modules/ieee754/index.js?");

/***/ }),

/***/ "./node_modules/isarray/index.js":
/*!***************************************!*\
  !*** ./node_modules/isarray/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n\n//# sourceURL=webpack:///./node_modules/isarray/index.js?");

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n//# sourceURL=webpack:///./node_modules/process/browser.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n//# sourceURL=webpack:///(webpack)/buildin/global.js?");

/***/ }),

/***/ "./src/foundation/components/AnimationComponent.ts":
/*!*********************************************************!*\
  !*** ./src/foundation/components/AnimationComponent.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _definitions_Animation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/Animation */ \"./src/foundation/definitions/Animation.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _math_Quaternion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n/* harmony import */ var _TransformComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./TransformComponent */ \"./src/foundation/components/TransformComponent.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n/* harmony import */ var _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/MutableQuaterion */ \"./src/foundation/math/MutableQuaterion.ts\");\n/* harmony import */ var _MeshComponent__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../math/MathClassUtil */ \"./src/foundation/math/MathClassUtil.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar AnimationComponent = /** @class */ (function (_super) {\n    __extends(AnimationComponent, _super);\n    function AnimationComponent(entityUid, componentSid, entityRepository) {\n        var _this = _super.call(this, entityUid, componentSid, entityRepository) || this;\n        _this.__animationLine = {};\n        _this.__backupDefaultValues = {};\n        _this.__currentProcessStage = _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__[\"ProcessStage\"].Create;\n        return _this;\n    }\n    Object.defineProperty(AnimationComponent, \"componentTID\", {\n        get: function () {\n            return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__[\"WellKnownComponentTIDs\"].AnimationComponentTID;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AnimationComponent.prototype.setAnimation = function (animationAttributeName, animationInputArray, animationOutputArray, interpolation) {\n        var line = {\n            input: animationInputArray,\n            output: animationOutputArray,\n            inTangent: [],\n            outTangent: [],\n            outputAttributeName: animationAttributeName,\n            outputCompositionType: animationOutputArray[0].compositionType,\n            interpolationMethod: interpolation\n        };\n        this.__animationLine[animationAttributeName] = line;\n    };\n    AnimationComponent.lerp = function (start, end, ratio, compositionType) {\n        if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar) {\n            return start * (1 - ratio) + end * ratio;\n        }\n        else {\n            if (start instanceof _math_Quaternion__WEBPACK_IMPORTED_MODULE_5__[\"default\"]) {\n                //return Quaternion.qlerp(start, end, ratio);\n                _math_Quaternion__WEBPACK_IMPORTED_MODULE_5__[\"default\"].qlerpTo(start, end, ratio, AnimationComponent.returnQuaternion);\n                return AnimationComponent.returnQuaternion;\n            }\n            else if (start instanceof _math_Vector3__WEBPACK_IMPORTED_MODULE_8__[\"default\"]) {\n                this.returnVector3.x = start.x * (1 - ratio) + end.x * ratio;\n                this.returnVector3.y = start.y * (1 - ratio) + end.y * ratio;\n                this.returnVector3.z = start.z * (1 - ratio) + end.z * ratio;\n                return this.returnVector3;\n            }\n            else {\n                var returnArray = [];\n                for (var i = 0; i < start.length; i++) {\n                    returnArray[i] = start[i] * (1 - ratio) + end[i] * ratio;\n                }\n                return returnArray;\n            }\n        }\n    };\n    AnimationComponent.cubicSpline = function (start, end, inTangent, outTangent, ratio, deltaInput, compositionType) {\n        if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar) {\n            return (2 * ratio * ratio * ratio - 3 * ratio * ratio + 1) * start +\n                (ratio * ratio * ratio - 2 * ratio * ratio + ratio) * inTangent +\n                (-2 * ratio * ratio * ratio + 3 * ratio * ratio) * end +\n                (ratio * ratio * ratio - ratio * ratio) * outTangent;\n        }\n        else {\n            if (start instanceof _math_Vector3__WEBPACK_IMPORTED_MODULE_8__[\"default\"]) {\n                this.returnVector3.x = (2 * ratio * ratio * ratio - 3 * ratio * ratio + 1) * start.x +\n                    (ratio * ratio * ratio - 2 * ratio * ratio + ratio) * inTangent.x +\n                    (-2 * ratio * ratio * ratio + 3 * ratio * ratio) * end.x +\n                    (ratio * ratio * ratio - ratio * ratio) * outTangent.x;\n                this.returnVector3.y = (2 * ratio * ratio * ratio - 3 * ratio * ratio + 1) * start.y +\n                    (ratio * ratio * ratio - 2 * ratio * ratio + ratio) * inTangent.y +\n                    (-2 * ratio * ratio * ratio + 3 * ratio * ratio) * end.y +\n                    (ratio * ratio * ratio - ratio * ratio) * outTangent.y;\n                this.returnVector3.z = (2 * ratio * ratio * ratio - 3 * ratio * ratio + 1) * start.z +\n                    (ratio * ratio * ratio - 2 * ratio * ratio + ratio) * inTangent.z +\n                    (-2 * ratio * ratio * ratio + 3 * ratio * ratio) * end.z +\n                    (ratio * ratio * ratio - ratio * ratio) * outTangent.z;\n                return this.returnVector3;\n            }\n            else if (start instanceof _math_Quaternion__WEBPACK_IMPORTED_MODULE_5__[\"default\"]) {\n                this.returnQuaternion.x = (2 * ratio * ratio * ratio - 3 * ratio * ratio + 1) * start.x +\n                    (ratio * ratio * ratio - 2 * ratio * ratio + ratio) * inTangent.x +\n                    (-2 * ratio * ratio * ratio + 3 * ratio * ratio) * end.x +\n                    (ratio * ratio * ratio - ratio * ratio) * outTangent.x;\n                this.returnQuaternion.y = (2 * ratio * ratio * ratio - 3 * ratio * ratio + 1) * start.y +\n                    (ratio * ratio * ratio - 2 * ratio * ratio + ratio) * inTangent.y +\n                    (-2 * ratio * ratio * ratio + 3 * ratio * ratio) * end.y +\n                    (ratio * ratio * ratio - ratio * ratio) * outTangent.y;\n                this.returnQuaternion.z = (2 * ratio * ratio * ratio - 3 * ratio * ratio + 1) * start.z +\n                    (ratio * ratio * ratio - 2 * ratio * ratio + ratio) * inTangent.z +\n                    (-2 * ratio * ratio * ratio + 3 * ratio * ratio) * end.z +\n                    (ratio * ratio * ratio - ratio * ratio) * outTangent.z;\n                this.returnQuaternion.w = (2 * ratio * ratio * ratio - 3 * ratio * ratio + 1) * start.w +\n                    (ratio * ratio * ratio - 2 * ratio * ratio + ratio) * inTangent.w +\n                    (-2 * ratio * ratio * ratio + 3 * ratio * ratio) * end.w +\n                    (ratio * ratio * ratio - ratio * ratio) * outTangent.w;\n                return this.returnQuaternion;\n            }\n            else {\n                var returnArray = [];\n                for (var j = 0; j < start.length; j++) {\n                    returnArray[j] = (2 * ratio * ratio * ratio - 3 * ratio * ratio + 1) * start.x +\n                        (ratio * ratio * ratio - 2 * ratio * ratio + ratio) * inTangent[j] +\n                        (-2 * ratio * ratio * ratio + 3 * ratio * ratio) * end.x +\n                        (ratio * ratio * ratio - ratio * ratio) * outTangent[j];\n                }\n                return returnArray;\n            }\n        }\n    };\n    AnimationComponent.interpolate = function (line, input) {\n        var inputArray = line.input;\n        var outputArray = line.output;\n        var compositionType = line.outputCompositionType;\n        var method = (line.interpolationMethod != null) ? line.interpolationMethod : _definitions_Animation__WEBPACK_IMPORTED_MODULE_3__[\"Animation\"].Linear;\n        var isClamped = function (idx) {\n            if (idx < 0) {\n                return true;\n            }\n            if (idx >= inputArray.length) {\n                return true;\n            }\n            return false;\n        };\n        if (method === _definitions_Animation__WEBPACK_IMPORTED_MODULE_3__[\"Animation\"].CubicSpline) {\n            for (var i = 0; i < inputArray.length - 1; i++) {\n                if (inputArray[i] <= input && input < inputArray[i + 1]) {\n                    var i_minus_b = isClamped(i - 1);\n                    var i_plus_b = isClamped(i + 1);\n                    var i_pp_b = isClamped(i + 2);\n                    var m_i = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].init(outputArray[0], 0);\n                    if (!i_minus_b) {\n                        m_i = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].multiplyNumber(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].add(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].divideNumber(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(outputArray[i + 1], outputArray[i]), _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(inputArray[i + 1], inputArray[i])), _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].divideNumber(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(outputArray[i], outputArray[i - 1]), _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(inputArray[i], inputArray[i - 1]))), 1 / 2);\n                    }\n                    var m_iplus = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].init(outputArray[0], 0);\n                    if (!(i_plus_b || i_pp_b)) {\n                        m_iplus = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].multiplyNumber(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].add(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].divideNumber(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(outputArray[i + 2], outputArray[i + 1]), _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(inputArray[i + 2], inputArray[i + 1])), _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].divideNumber(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(outputArray[i + 1], outputArray[i]), _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(inputArray[i + 1], inputArray[i]))), 1 / 2);\n                    }\n                    var ratio = (input - inputArray[i]) / (inputArray[i + 1] - inputArray[i]);\n                    var resultValue = this.cubicSpline(outputArray[i], outputArray[i + 1], m_i, m_iplus, ratio, inputArray[i + 1] - inputArray[i], compositionType);\n                    return resultValue;\n                }\n            }\n        }\n        else {\n            if (input < inputArray[0]) {\n                return outputArray[0]; // out of range!\n            }\n            if (inputArray[inputArray.length - 1] <= input) {\n                return outputArray[outputArray.length - 1]; // out of range!\n            }\n            if (method === _definitions_Animation__WEBPACK_IMPORTED_MODULE_3__[\"Animation\"].Linear) {\n                for (var i = 0; i < inputArray.length; i++) {\n                    if (typeof inputArray[i + 1] === \"undefined\") {\n                        break;\n                    }\n                    if (inputArray[i] <= input && input < inputArray[i + 1]) {\n                        var ratio = (input - inputArray[i]) / (inputArray[i + 1] - inputArray[i]);\n                        var resultValue = this.lerp(outputArray[i], outputArray[i + 1], ratio, compositionType);\n                        return resultValue;\n                    }\n                }\n            }\n            else if (method === _definitions_Animation__WEBPACK_IMPORTED_MODULE_3__[\"Animation\"].Step) {\n                for (var i = 0; i < inputArray.length; i++) {\n                    if (typeof inputArray[i + 1] === \"undefined\") {\n                        break;\n                    }\n                    if (inputArray[i] <= input && input < inputArray[i + 1]) {\n                        return outputArray[i];\n                    }\n                }\n            }\n        }\n        return outputArray[0]; // out of range!\n    };\n    AnimationComponent.prototype.getStartInputValueOfAnimation = function () {\n        var latestInputValue = Number.MAX_VALUE;\n        for (var attributeName in this.__animationLine) {\n            var inputValueArray = this.__animationLine[attributeName].input;\n            var inputLatestValueAtThisAttribute = inputValueArray[0];\n            if (inputLatestValueAtThisAttribute < latestInputValue) {\n                latestInputValue = inputLatestValueAtThisAttribute;\n                if (latestInputValue < AnimationComponent.__startInputValueOfAllComponent) {\n                    AnimationComponent.__startInputValueOfAllComponent = latestInputValue;\n                }\n            }\n        }\n        return latestInputValue;\n    };\n    AnimationComponent.prototype.getEndInputValueOfAnimation = function () {\n        var latestInputValue = -Number.MAX_VALUE;\n        for (var attributeName in this.__animationLine) {\n            var inputValueArray = this.__animationLine[attributeName].input;\n            var inputLatestValueAtThisAttribute = inputValueArray[inputValueArray.length - 1];\n            if (inputLatestValueAtThisAttribute > latestInputValue) {\n                latestInputValue = inputLatestValueAtThisAttribute;\n                if (latestInputValue > AnimationComponent.__endInputValueOfAllComponent) {\n                    AnimationComponent.__endInputValueOfAllComponent = latestInputValue;\n                }\n            }\n        }\n        return latestInputValue;\n    };\n    Object.defineProperty(AnimationComponent, \"startInputValue\", {\n        get: function () {\n            var components = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance().getComponentsWithType(AnimationComponent);\n            components.forEach(function (component) {\n                component.getStartInputValueOfAnimation();\n            });\n            return AnimationComponent.__startInputValueOfAllComponent;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AnimationComponent, \"endInputValue\", {\n        get: function () {\n            var components = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance().getComponentsWithType(AnimationComponent);\n            components.forEach(function (component) {\n                component.getEndInputValueOfAnimation();\n            });\n            return AnimationComponent.__endInputValueOfAllComponent;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AnimationComponent.prototype.$create = function () {\n        this.__transformComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _TransformComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n        this.__meshComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _MeshComponent__WEBPACK_IMPORTED_MODULE_11__[\"default\"]);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__[\"ProcessStage\"].Logic);\n    };\n    AnimationComponent.prototype.$logic = function () {\n        for (var attributeName in this.__animationLine) {\n            if (this.__backupDefaultValues[attributeName] == null) {\n                if (attributeName === 'weights') {\n                    this.__backupDefaultValues[attributeName] = this.__meshComponent[attributeName];\n                }\n                else {\n                    this.__backupDefaultValues[attributeName] = this.__transformComponent[attributeName];\n                }\n            }\n            if (AnimationComponent.isAnimating) {\n                var line = this.__animationLine[attributeName];\n                var value = AnimationComponent.interpolate(line, AnimationComponent.globalTime);\n                if (attributeName === 'weights') {\n                    this.__meshComponent[attributeName] = value;\n                }\n                else {\n                    this.__transformComponent[attributeName] = value;\n                }\n            }\n            else {\n                if (attributeName === 'weights') {\n                    this.__meshComponent[attributeName] = this.__backupDefaultValues[attributeName];\n                }\n                else {\n                    this.__transformComponent[attributeName] = this.__backupDefaultValues[attributeName];\n                }\n            }\n        }\n    };\n    AnimationComponent.globalTime = 0;\n    AnimationComponent.isAnimating = true;\n    AnimationComponent.__startInputValueOfAllComponent = Number.MAX_VALUE;\n    AnimationComponent.__endInputValueOfAllComponent = -Number.MAX_VALUE;\n    AnimationComponent.returnVector3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_9__[\"default\"].zero();\n    AnimationComponent.returnQuaternion = new _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_10__[\"default\"]([0, 0, 0, 1]);\n    return AnimationComponent;\n}(_core_Component__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (AnimationComponent);\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerComponentClass(AnimationComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/AnimationComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/CameraComponent.ts":
/*!******************************************************!*\
  !*** ./src/foundation/components/CameraComponent.ts ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _definitions_CameraType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/CameraType */ \"./src/foundation/definitions/CameraType.ts\");\n/* harmony import */ var _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _math_RowMajarMatrix44__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/RowMajarMatrix44 */ \"./src/foundation/math/RowMajarMatrix44.ts\");\n/* harmony import */ var _math_MutableRowMajarMatrix44__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/MutableRowMajarMatrix44 */ \"./src/foundation/math/MutableRowMajarMatrix44.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../math/MutableVector4 */ \"./src/foundation/math/MutableVector4.ts\");\n/* harmony import */ var _CameraControllerComponent__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./CameraControllerComponent */ \"./src/foundation/components/CameraControllerComponent.ts\");\n/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar CameraComponent = /** @class */ (function (_super) {\n    __extends(CameraComponent, _super);\n    function CameraComponent(entityUid, componentSid, entityRepository) {\n        var _this = _super.call(this, entityUid, componentSid, entityRepository) || this;\n        _this._eye = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].zero();\n        _this._eyeInner = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        _this._direction = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        _this._directionInner = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        _this._up = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        _this._upInner = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        // x: left, y:right, z:top, w: bottom\n        _this._corner = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_12__[\"default\"].dummy();\n        _this._cornerInner = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_12__[\"default\"].dummy();\n        // x: zNear, y: zFar,\n        // if perspective, z: fovy, w: aspect\n        // if ortho, z: xmag, w: ymag\n        _this._parameters = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_12__[\"default\"].dummy();\n        _this._parametersInner = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_12__[\"default\"].dummy();\n        _this.__type = _definitions_CameraType__WEBPACK_IMPORTED_MODULE_4__[\"CameraType\"].Perspective;\n        _this._projectionMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].dummy();\n        _this._viewMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].dummy();\n        _this._tmp_f = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        _this._tmp_s = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        _this._tmp_u = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'eyeInner', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, [0, 0, 0]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'direction', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, [0, 0, -1]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'up', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, [0, 1, 0]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'directionInner', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, [0, 0, -1]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'upInner', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, [0, 1, 0]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'corner', _math_MutableVector4__WEBPACK_IMPORTED_MODULE_12__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, [-1, 1, 1, -1]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'cornerInner', _math_MutableVector4__WEBPACK_IMPORTED_MODULE_12__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, [-1, 1, 1, -1]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'parameters', _math_MutableVector4__WEBPACK_IMPORTED_MODULE_12__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, [0.1, 10000, 90, 1]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'parametersInner', _math_MutableVector4__WEBPACK_IMPORTED_MODULE_12__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, [0.1, 10000, 90, 1]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'projectionMatrix', _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'viewMatrix', _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'tmp_f', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, [0, 0, 0]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'tmp_s', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, [0, 0, 0]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'tmp_u', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, [0, 0, 0]);\n        _this.submitToAllocation(20);\n        _this.__sceneGraphComponent = _this.__entityRepository.getComponentOfEntity(_this.__entityUid, _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_5__[\"default\"]);\n        _this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_11__[\"ProcessStage\"].PreRender);\n        CameraComponent.main = componentSid;\n        return _this;\n    }\n    Object.defineProperty(CameraComponent.prototype, \"type\", {\n        get: function () {\n            return this.__type;\n        },\n        set: function (type) {\n            this.__type = type;\n            if (type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_4__[\"CameraType\"].Orthographic) {\n                this._parameters.z = 1;\n                this._parameters.w = 1;\n                this._parametersInner.z = 1;\n                this._parametersInner.w = 1;\n            }\n            else {\n                this._parameters.z = 90;\n                this._parameters.w = 1;\n                this._parametersInner.z = 90;\n                this._parametersInner.w = 1;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"eye\", {\n        get: function () {\n            return _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].zero();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"eyeInner\", {\n        get: function () {\n            return this._eyeInner;\n        },\n        set: function (vec) {\n            this._eyeInner = vec;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"upInner\", {\n        get: function () {\n            return this._upInner;\n        },\n        set: function (vec) {\n            this._upInner.copyComponents(vec);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"up\", {\n        get: function () {\n            return this._up.clone();\n        },\n        set: function (vec) {\n            this._up.copyComponents(vec);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"direction\", {\n        get: function () {\n            return this._direction.clone();\n        },\n        set: function (vec) {\n            this._direction.copyComponents(vec);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"directionInner\", {\n        get: function () {\n            return this._directionInner;\n        },\n        set: function (vec) {\n            this._directionInner.copyComponents(vec);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"corner\", {\n        get: function () {\n            return this._corner.clone();\n        },\n        set: function (vec) {\n            this._corner.copyComponents(vec);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"left\", {\n        get: function () {\n            return this._corner.x;\n        },\n        set: function (value) {\n            this._corner.x = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"leftInner\", {\n        set: function (value) {\n            this._cornerInner.x = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"right\", {\n        get: function () {\n            return this._corner.y;\n        },\n        set: function (value) {\n            this._corner.y = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"rightInner\", {\n        set: function (value) {\n            this._cornerInner.y = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"top\", {\n        get: function () {\n            return this._corner.z;\n        },\n        set: function (value) {\n            this._corner.z = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"topInner\", {\n        set: function (value) {\n            this._cornerInner.z = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"bottom\", {\n        get: function () {\n            return this._corner.w;\n        },\n        set: function (value) {\n            this._corner.w = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"bottomInner\", {\n        set: function (value) {\n            this._cornerInner.w = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"cornerInner\", {\n        get: function () {\n            return this._corner;\n        },\n        set: function (vec) {\n            this._corner = new _math_MutableVector4__WEBPACK_IMPORTED_MODULE_12__[\"default\"](vec);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"parameters\", {\n        get: function () {\n            return this._parameters.clone();\n        },\n        set: function (vec) {\n            this._parameters.copyComponents(vec);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"parametersInner\", {\n        set: function (vec) {\n            this._parametersInner.copyComponents(vec);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"zNear\", {\n        get: function () {\n            return this._parameters.x;\n        },\n        set: function (val) {\n            this._parameters.x = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"zNearInner\", {\n        get: function () {\n            return this._parametersInner.x;\n        },\n        set: function (val) {\n            this._parametersInner.x = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"zFar\", {\n        get: function () {\n            return this._parameters.y;\n        },\n        set: function (val) {\n            this._parameters.y = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"zFarInner\", {\n        get: function () {\n            return this._parametersInner.y;\n        },\n        set: function (val) {\n            this._parametersInner.y = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"fovy\", {\n        get: function () {\n            return this._parameters.z;\n        },\n        set: function (val) {\n            this._parameters.z = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"fovyInner\", {\n        set: function (val) {\n            this._parametersInner.z = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"aspect\", {\n        get: function () {\n            return this._parameters.w;\n        },\n        set: function (val) {\n            this._parameters.w = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"xmag\", {\n        get: function () {\n            return this._parameters.z;\n        },\n        set: function (val) {\n            this._parameters.z = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent.prototype, \"ymag\", {\n        get: function () {\n            return this._parameters.w;\n        },\n        set: function (val) {\n            this._parameters.w = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraComponent, \"componentTID\", {\n        get: function () {\n            return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__[\"WellKnownComponentTIDs\"].CameraComponentTID;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CameraComponent.prototype.$logic = function () {\n        var cameraControllerComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _CameraControllerComponent__WEBPACK_IMPORTED_MODULE_13__[\"default\"]);\n        if (cameraControllerComponent == null) {\n            this.eyeInner = this.eye;\n            this.directionInner = this.direction;\n            this.upInner = this.up;\n            this.cornerInner = this.corner;\n            this.parametersInner = this.parameters;\n        }\n    };\n    CameraComponent.prototype.calcProjectionMatrix = function () {\n        var zNear = this._parametersInner.x;\n        var zFar = this._parametersInner.y;\n        if (this.type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_4__[\"CameraType\"].Perspective) {\n            var fovy = this._parametersInner.z;\n            var aspect = this._parametersInner.w;\n            var yscale = 1.0 / Math.tan((0.5 * fovy * Math.PI) / 180);\n            var xscale = yscale / aspect;\n            this._projectionMatrix.setComponents(xscale, 0, 0, 0, 0, yscale, 0, 0, 0, 0, -(zFar + zNear) / (zFar - zNear), -(2.0 * zFar * zNear) / (zFar - zNear), 0, 0, -1, 0);\n        }\n        else if (this.type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_4__[\"CameraType\"].Orthographic) {\n            var xmag = this._parametersInner.z;\n            var ymag = this._parametersInner.w;\n            this._projectionMatrix.setComponents(1 / xmag, 0.0, 0.0, 0, 0.0, 1 / ymag, 0.0, 0, 0.0, 0.0, -2 / (zFar - zNear), -(zFar + zNear) / (zFar - zNear), 0.0, 0.0, 0.0, 1.0);\n        }\n        else {\n            var left = this._cornerInner.x;\n            var right = this._cornerInner.y;\n            var top_1 = this._cornerInner.z;\n            var bottom = this._cornerInner.w;\n            this._projectionMatrix.setComponents(2 * zNear / (right - left), 0.0, (right + left) / (right - left), 0.0, 0.0, 2 * zNear / (top_1 - bottom), (top_1 + bottom) / (top_1 - bottom), 0.0, 0.0, 0.0, -(zFar + zNear) / (zFar - zNear), -1 * 2 * zFar * zNear / (zFar - zNear), 0.0, 0.0, -1.0, 0.0);\n        }\n        return this._projectionMatrix;\n    };\n    Object.defineProperty(CameraComponent.prototype, \"projectionMatrix\", {\n        get: function () {\n            return this._projectionMatrix;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CameraComponent.prototype.calcViewMatrix = function () {\n        var eye = this.eyeInner;\n        var f = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].normalize(_math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subtract(this._directionInner, eye));\n        var s = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].normalize(_math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].cross(f, this._upInner));\n        var u = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].cross(s, f);\n        this._viewMatrix.setComponents(s.x, s.y, s.z, -_math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dotProduct(s, eye), u.x, u.y, u.z, -_math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dotProduct(u, eye), -f.x, -f.y, -f.z, _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dotProduct(f, eye), 0, 0, 0, 1);\n        _math_RowMajarMatrix44__WEBPACK_IMPORTED_MODULE_6__[\"default\"].invertTo(this.__sceneGraphComponent.worldMatrixInner, CameraComponent.invertedMatrix44);\n        var invertWorldMatrix = CameraComponent.invertedMatrix44;\n        this._viewMatrix.multiply(invertWorldMatrix);\n        return this._viewMatrix;\n    };\n    Object.defineProperty(CameraComponent.prototype, \"viewMatrix\", {\n        get: function () {\n            return this._viewMatrix;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CameraComponent.prototype.$create = function (_a) {\n        var strategy = _a.strategy;\n        if (this.__sceneGraphComponent != null) {\n            return;\n        }\n        this.__sceneGraphComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_5__[\"default\"]);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_11__[\"ProcessStage\"].Logic);\n    };\n    CameraComponent.prototype.$prerender = function () {\n        this.calcProjectionMatrix();\n        this.calcViewMatrix();\n    };\n    Object.defineProperty(CameraComponent.prototype, \"worldPosition\", {\n        get: function () {\n            this.__sceneGraphComponent.worldMatrixInner.multiplyVector3To(this.eyeInner, CameraComponent.returnVector3);\n            return CameraComponent.returnVector3;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CameraComponent.main = -1;\n    CameraComponent.invertedMatrix44 = new _math_MutableRowMajarMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"]([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n    CameraComponent.returnVector3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_14__[\"default\"].zero();\n    return CameraComponent;\n}(_core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (CameraComponent);\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].registerComponentClass(CameraComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/CameraComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/CameraControllerComponent.ts":
/*!****************************************************************!*\
  !*** ./src/foundation/components/CameraControllerComponent.ts ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/MathUtil */ \"./src/foundation/math/MathUtil.ts\");\n/* harmony import */ var _math_Matrix33__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/Matrix33 */ \"./src/foundation/math/Matrix33.ts\");\n/* harmony import */ var _CameraComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../math/MutableMatrix33 */ \"./src/foundation/math/MutableMatrix33.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\nvar CameraControllerComponent = /** @class */ (function (_super) {\n    __extends(CameraControllerComponent, _super);\n    function CameraControllerComponent(entityUid, componentSid, entityRepository) {\n        var _this = _super.call(this, entityUid, componentSid, entityRepository) || this;\n        _this.__isKeyUp = false;\n        _this.__movedMouseYOnCanvas = -1;\n        _this.__movedMouseXOnCanvas = -1;\n        _this.__clickedMouseYOnCanvas = -1;\n        _this.__clickedMouseXOnCanvas = -1;\n        _this.__mouse_translate_y = 0;\n        _this.__mouse_translate_x = 0;\n        _this.__efficiency = 1;\n        _this.__lengthOfCenterToEye = 1;\n        _this.__foyvBias = 1.0;\n        _this.__scaleOfTraslation = 5.0;\n        _this.__mouseTranslateVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].zero();\n        _this.__newEyeToCenterVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].zero();\n        _this.__newUpVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].zero();\n        _this.__newTangentVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].zero();\n        _this.__verticalAngleThrethold = 0;\n        _this.__verticalAngleOfVectors = 0;\n        _this.__isForceGrab = false;\n        _this.__isSymmetryMode = false;\n        _this.__doResetWhenCameraSettingChanged = false;\n        _this.__rot_bgn_x = 0;\n        _this.__rot_bgn_y = 0;\n        _this.__rot_x = 0;\n        _this.__rot_y = 0;\n        _this.__wheel_y = 1;\n        _this.__eyeVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].zero();\n        _this.__centerVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].zero();\n        _this.__upVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].zero();\n        _this.__shiftCameraTo = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].zero();\n        _this.__lengthCenterToCorner = 0.5;\n        _this.__lengthCameraToObject = 1;\n        _this.__scaleOfLengthCameraToCenter = 1;\n        _this.__zFarAdjustingFactorBasedOnAABB = 2.0;\n        _this.__scaleOfZNearAndZFar = 5000;\n        _this.__doPreventDefault = false;\n        _this.registerEventListeners();\n        return _this;\n    }\n    Object.defineProperty(CameraControllerComponent.prototype, \"zFarAdjustingFactorBasedOnAABB\", {\n        get: function () {\n            return this.__zFarAdjustingFactorBasedOnAABB;\n        },\n        set: function (value) {\n            this.__zFarAdjustingFactorBasedOnAABB = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CameraControllerComponent.prototype.setTarget = function (targetEntity) {\n        this.__targetEntity = targetEntity;\n    };\n    CameraControllerComponent.prototype.getTarget = function () {\n        return this.__targetEntity;\n    };\n    Object.defineProperty(CameraControllerComponent.prototype, \"doPreventDefault\", {\n        get: function () {\n            return this.__doPreventDefault;\n        },\n        set: function (flag) {\n            this.__doPreventDefault = flag;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CameraControllerComponent.prototype.$create = function () {\n        this.__cameraComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _CameraComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"]);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_9__[\"ProcessStage\"].Logic);\n    };\n    CameraControllerComponent.prototype.__mouseUp = function (evt) {\n        this.__isKeyUp = true;\n        this.__movedMouseYOnCanvas = -1;\n        this.__movedMouseXOnCanvas = -1;\n    };\n    CameraControllerComponent.prototype.__mouseDown = function (evt) {\n        //this.__tryToPreventDefault(evt);\n        //    evt.stopPropagation();\n        var rect = evt.target.getBoundingClientRect();\n        var clientX = null;\n        var clientY = null;\n        if (evt.clientX) {\n            clientX = evt.clientX;\n            clientY = evt.clientY;\n        }\n        else {\n            clientX = evt.touches[0].clientX;\n            clientY = evt.touches[0].clientY;\n        }\n        this.__clickedMouseXOnCanvas = clientX - rect.left;\n        this.__clickedMouseYOnCanvas = clientY - rect.top;\n        this.__movedMouseYOnCanvas = -1;\n        this.__movedMouseXOnCanvas = -1;\n        this.__rot_bgn_x = this.__rot_x;\n        this.__rot_bgn_y = this.__rot_y;\n        this.__isKeyUp = false;\n        if (typeof evt.buttons !== \"undefined\") {\n            //      this.updateCamera();\n        }\n        return false;\n    };\n    CameraControllerComponent.prototype.__mouseMove = function (evt) {\n        //this.__tryToPreventDefault(evt);\n        //evt.stopPropagation();\n        if (this.__isKeyUp) {\n            return;\n        }\n        var rect = evt.target.getBoundingClientRect();\n        var clientX = null;\n        var clientY = null;\n        if (evt.clientX) {\n            clientX = evt.clientX;\n            clientY = evt.clientY;\n        }\n        else {\n            clientX = evt.touches[0].clientX;\n            clientY = evt.touches[0].clientY;\n        }\n        this.__movedMouseXOnCanvas = clientX - rect.left;\n        this.__movedMouseYOnCanvas = clientY - rect.top;\n        if (typeof evt.buttons !== \"undefined\") {\n            var data = evt.buttons;\n            var button_l = data & 0x0001 ? true : false;\n            var button_c = data & 0x0004 ? true : false;\n            if (button_c) {\n                this.__mouse_translate_y =\n                    ((this.__movedMouseYOnCanvas - this.__clickedMouseYOnCanvas) / 1000) *\n                        this.__efficiency;\n                this.__mouse_translate_x =\n                    ((this.__movedMouseXOnCanvas - this.__clickedMouseXOnCanvas) / 1000) *\n                        this.__efficiency;\n                var scale = this.__lengthOfCenterToEye *\n                    this.__foyvBias *\n                    this.__scaleOfTraslation;\n                if (evt.shiftKey) {\n                    this.__mouseTranslateVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].add(this.__mouseTranslateVec, _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].normalize(this.__newEyeToCenterVec)\n                        .multiply(-this.__mouse_translate_y)\n                        .multiply(scale));\n                }\n                else {\n                    this.__mouseTranslateVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].add(this.__mouseTranslateVec, _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].normalize(this.__newUpVec)\n                        .multiply(this.__mouse_translate_y)\n                        .multiply(scale));\n                }\n                this.__mouseTranslateVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].add(this.__mouseTranslateVec, _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].normalize(this.__newTangentVec)\n                    .multiply(this.__mouse_translate_x)\n                    .multiply(scale));\n                this.__clickedMouseYOnCanvas = this.__movedMouseYOnCanvas;\n                this.__clickedMouseXOnCanvas = this.__movedMouseXOnCanvas;\n            }\n            //      this.updateCamera();\n            if (!button_l) {\n                return;\n            }\n        }\n        // calc rotation angle\n        var delta_y = (this.__movedMouseYOnCanvas - this.__clickedMouseYOnCanvas) *\n            this.__efficiency;\n        var delta_x = (this.__movedMouseXOnCanvas - this.__clickedMouseXOnCanvas) *\n            this.__efficiency;\n        this.__rot_y = this.__rot_bgn_y - delta_y;\n        this.__rot_x = this.__rot_bgn_x - delta_x;\n        // check if rotation angle is within range\n        if (this.__verticalAngleThrethold - this.__verticalAngleOfVectors <\n            this.__rot_y) {\n            //        this._rot_y -= this._rot_y - (this._verticalAngleThrethold - this._verticalAngleOfVectors);\n        }\n        if (this.__rot_y <\n            -this.__verticalAngleThrethold + this.__verticalAngleOfVectors) {\n            //       this._rot_y += this._rot_y - (this._verticalAngleThrethold - this._verticalAngleOfVectors);\n        }\n        if (this.__maximum_y != null && this.__rot_y > this.__maximum_y) {\n            this.__rot_y = this.__maximum_y;\n        }\n        if (this.__minimum_y != null && this.__rot_y < this.__minimum_y) {\n            this.__rot_y = this.__minimum_y;\n        }\n        //    this.updateCamera();\n    };\n    ;\n    Object.defineProperty(CameraControllerComponent.prototype, \"maximumY\", {\n        set: function (maximum_y) {\n            this.__maximum_y = maximum_y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraControllerComponent.prototype, \"minimumY\", {\n        set: function (minimum_y) {\n            this.__minimum_y = minimum_y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CameraControllerComponent.prototype.__tryToPreventDefault = function (evt) {\n        if (this.__doPreventDefault) {\n            evt.preventDefault();\n        }\n    };\n    CameraControllerComponent.prototype.__mouseWheel = function (evt) {\n        this.__tryToPreventDefault(evt);\n        this.dolly += evt.deltaY / 600;\n    };\n    ;\n    CameraControllerComponent.prototype.__contexMenu = function (evt) {\n        if (evt.preventDefault) {\n            this.__tryToPreventDefault(evt);\n        }\n        else {\n            evt.returnValue = false;\n        }\n    };\n    ;\n    CameraControllerComponent.prototype.__mouseDblClick = function (evt) {\n        if (evt.shiftKey) {\n            this.__mouseTranslateVec = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 0, 0);\n        }\n        else if (evt.ctrlKey) {\n            this.__rot_y = 0;\n            this.__rot_x = 0;\n            this.__rot_bgn_y = 0;\n            this.__rot_bgn_x = 0;\n        }\n    };\n    ;\n    CameraControllerComponent.prototype.resetDolly = function () {\n        this.dolly = 1;\n    };\n    Object.defineProperty(CameraControllerComponent.prototype, \"dolly\", {\n        get: function () {\n            return this.__wheel_y;\n        },\n        set: function (value) {\n            this.__wheel_y = value;\n            this.__wheel_y = Math.min(this.__wheel_y, 3);\n            this.__wheel_y = Math.max(this.__wheel_y, 0.01);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CameraControllerComponent.prototype.registerEventListeners = function (eventTargetDom) {\n        if (eventTargetDom === void 0) { eventTargetDom = document; }\n        if (eventTargetDom) {\n            if (\"ontouchend\" in document) {\n                eventTargetDom.addEventListener(\"touchstart\", this.__mouseDown.bind(this), { passive: !this.__doPreventDefault });\n                eventTargetDom.addEventListener(\"touchend\", this.__mouseUp.bind(this), { passive: !this.__doPreventDefault });\n                eventTargetDom.addEventListener(\"touchmove\", this.__mouseMove.bind(this), { passive: !this.__doPreventDefault });\n            }\n            if (\"onmouseup\" in document) {\n                eventTargetDom.addEventListener(\"mousedown\", this.__mouseDown.bind(this), { passive: !this.__doPreventDefault });\n                eventTargetDom.addEventListener(\"mouseup\", this.__mouseUp.bind(this), { passive: !this.__doPreventDefault });\n                eventTargetDom.addEventListener(\"mousemove\", this.__mouseMove.bind(this), { passive: !this.__doPreventDefault });\n            }\n            if (window.WheelEvent) {\n                eventTargetDom.addEventListener(\"wheel\", this.__mouseWheel.bind(this), { passive: !this.__doPreventDefault });\n            }\n            eventTargetDom.addEventListener(\"contextmenu\", this.__contexMenu.bind(this), { passive: !this.__doPreventDefault });\n            eventTargetDom.addEventListener(\"dblclick\", this.__mouseDblClick.bind(this), { passive: !this.__doPreventDefault });\n        }\n    };\n    CameraControllerComponent.prototype.unregisterEventListeners = function (eventTargetDom) {\n        if (eventTargetDom === void 0) { eventTargetDom = document; }\n        if (eventTargetDom) {\n            if (\"ontouchend\" in document) {\n                eventTargetDom.removeEventListener(\"touchstart\", this.__mouseDown.bind(this));\n                eventTargetDom.removeEventListener(\"touchend\", this.__mouseUp.bind(this));\n                eventTargetDom.removeEventListener(\"touchmove\", this.__mouseMove.bind(this));\n            }\n            if (\"onmouseup\" in document) {\n                eventTargetDom.removeEventListener(\"mousedown\", this.__mouseDown.bind(this));\n                eventTargetDom.removeEventListener(\"mouseup\", this.__mouseUp.bind(this));\n                eventTargetDom.removeEventListener(\"mousemove\", this.__mouseMove.bind(this));\n            }\n            if (window.WheelEvent) {\n                eventTargetDom.removeEventListener(\"wheel\", this.__mouseWheel.bind(this));\n            }\n            eventTargetDom.removeEventListener(\"contextmenu\", this.__contexMenu.bind(this), false);\n            eventTargetDom.removeEventListener(\"dblclick\", this.__mouseDblClick.bind(this));\n        }\n    };\n    CameraControllerComponent.prototype.__getFovyFromCamera = function (camera) {\n        if (camera.fovy) {\n            return camera.fovy;\n        }\n        else {\n            return _math_MathUtil__WEBPACK_IMPORTED_MODULE_5__[\"MathUtil\"].radianToDegree(2 * Math.atan(Math.abs(camera.top - camera.bottom) / (2 * camera.zNear)));\n        }\n    };\n    CameraControllerComponent.prototype.$logic = function () {\n        var data0 = this.__updateTargeting(this.__cameraComponent);\n        var eye = data0.newEyeVec;\n        var center = data0.newCenterVec;\n        var up = data0.newUpVec;\n        var data = this.__convert(this.__cameraComponent, eye, center, up);\n        var cc = this.__cameraComponent;\n        cc.eyeInner = data.newEyeVec;\n        cc.directionInner = data.newCenterVec;\n        cc.upInner = data.newUpVec;\n        cc.zNearInner = data.newZNear;\n        cc.zFarInner = data.newZFar;\n        cc.leftInner = data.newLeft;\n        cc.rightInner = data.newRight;\n        cc.topInner = data.newTop;\n        cc.bottomInner = data.newBottom;\n        cc.fovyInner = data.fovy;\n    };\n    CameraControllerComponent.prototype.__convert = function (camera, eye, center, up) {\n        var newEyeVec = null;\n        var newCenterVec;\n        var newUpVec = null;\n        if (this.__isKeyUp || !this.__isForceGrab) {\n            this.__eyeVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].add(eye, this.__shiftCameraTo);\n            this.__centerVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].add(center, this.__shiftCameraTo);\n            this.__upVec = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](up);\n        }\n        var fovy = this.__getFovyFromCamera(camera);\n        var centerToEyeVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subtract(this.__eyeVec, this.__centerVec);\n        centerToEyeVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].multiply(centerToEyeVec, (this.__wheel_y * 1.0) / Math.tan(_math_MathUtil__WEBPACK_IMPORTED_MODULE_5__[\"MathUtil\"].degreeToRadian(fovy / 2.0)));\n        this.__lengthOfCenterToEye = centerToEyeVec.length();\n        if (this.__isSymmetryMode) {\n            var horizontalAngleOfVectors = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].angleOfVectors(new _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"](centerToEyeVec.x, 0, centerToEyeVec.z), new _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"](0, 0, 1));\n            var horizontalSign = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].cross(new _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"](centerToEyeVec.x, 0, centerToEyeVec.z), new _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"](0, 0, 1)).y;\n            if (horizontalSign >= 0) {\n                horizontalSign = 1;\n            }\n            else {\n                horizontalSign = -1;\n            }\n            horizontalAngleOfVectors *= horizontalSign;\n            var rotateM_Reset = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__[\"default\"].rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_5__[\"MathUtil\"].degreeToRadian(horizontalAngleOfVectors));\n            var rotateM_X = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__[\"default\"].rotateX(_math_MathUtil__WEBPACK_IMPORTED_MODULE_5__[\"MathUtil\"].degreeToRadian(this.__rot_y));\n            var rotateM_Y = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__[\"default\"].rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_5__[\"MathUtil\"].degreeToRadian(this.__rot_x));\n            var rotateM_Revert = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__[\"default\"].rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_5__[\"MathUtil\"].degreeToRadian(-horizontalAngleOfVectors));\n            var rotateM = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__[\"default\"].multiply(rotateM_Revert, _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__[\"default\"].multiply(rotateM_Y, _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__[\"default\"].multiply(rotateM_X, rotateM_Reset)));\n            newUpVec = rotateM.multiplyVector(this.__upVec);\n            this.__newUpVec = newUpVec;\n            newEyeVec = rotateM.multiplyVector(centerToEyeVec).add(this.__centerVec);\n            newCenterVec = this.__centerVec.clone();\n            this.__newEyeToCenterVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subtract(newCenterVec, newEyeVec);\n            this.__newTangentVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].cross(this.__newUpVec, this.__newEyeToCenterVec);\n            newEyeVec.add(this.__mouseTranslateVec);\n            newCenterVec.add(this.__mouseTranslateVec);\n            var horizonResetVec = rotateM_Reset.multiplyVector(centerToEyeVec);\n            this.__verticalAngleOfVectors = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].angleOfVectors(horizonResetVec, new _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"](0, 0, 1));\n            var verticalSign = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].cross(horizonResetVec, new _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"](0, 0, 1)).x;\n            if (verticalSign >= 0) {\n                verticalSign = 1;\n            }\n            else {\n                verticalSign = -1;\n            }\n            //this._verticalAngleOfVectors *= verticalSign;\n        }\n        else {\n            var rotateM_X = _math_Matrix33__WEBPACK_IMPORTED_MODULE_6__[\"default\"].rotateX(_math_MathUtil__WEBPACK_IMPORTED_MODULE_5__[\"MathUtil\"].degreeToRadian(this.__rot_y));\n            var rotateM_Y = _math_Matrix33__WEBPACK_IMPORTED_MODULE_6__[\"default\"].rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_5__[\"MathUtil\"].degreeToRadian(this.__rot_x));\n            var rotateM = _math_Matrix33__WEBPACK_IMPORTED_MODULE_6__[\"default\"].multiply(rotateM_Y, rotateM_X);\n            newUpVec = rotateM.multiplyVector(this.__upVec);\n            this.__newUpVec = newUpVec;\n            newEyeVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].add(rotateM.multiplyVector(centerToEyeVec), this.__centerVec);\n            newCenterVec = this.__centerVec.clone();\n            this.__newEyeToCenterVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subtract(newCenterVec, newEyeVec);\n            this.__newTangentVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].cross(this.__newUpVec, this.__newEyeToCenterVec);\n            newEyeVec.add(this.__mouseTranslateVec);\n            newCenterVec.add(this.__mouseTranslateVec);\n        }\n        var newCenterToEyeLength = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].lengthBtw(newEyeVec, newCenterVec);\n        var newLeft = camera.left;\n        var newRight = camera.right;\n        var newTop = camera.top;\n        var newBottom = camera.bottom;\n        var newZNear = camera.zNear;\n        var newZFar = camera.zFar;\n        var ratio = 1;\n        if (this.__targetEntity) {\n            newZFar =\n                camera.zNear + _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subtract(newCenterVec, newEyeVec).length();\n            newZFar +=\n                this.__getTargetAABB().lengthCenterToCorner *\n                    this.__zFarAdjustingFactorBasedOnAABB;\n        }\n        if (typeof newLeft !== \"undefined\") {\n            if (typeof this.__lengthCenterToCorner !== \"undefined\") {\n                //let aabb = this.__getTargetAABB();\n                ratio = newZFar / camera.zNear;\n                var minRatio = this.__scaleOfZNearAndZFar;\n                ratio /= minRatio;\n                var scale = ratio;\n                newLeft *= scale;\n                newRight *= scale;\n                newTop *= scale;\n                newBottom *= scale;\n                //        newZFar *= scale;\n                newZNear *= scale;\n            }\n        }\n        this.__foyvBias = Math.tan(_math_MathUtil__WEBPACK_IMPORTED_MODULE_5__[\"MathUtil\"].degreeToRadian(fovy / 2.0));\n        return {\n            newEyeVec: newEyeVec,\n            newCenterVec: newCenterVec,\n            newUpVec: newUpVec,\n            newZNear: newZNear,\n            newZFar: newZFar,\n            newLeft: newLeft,\n            newRight: newRight,\n            newTop: newTop,\n            newBottom: newBottom,\n            fovy: fovy\n        };\n    };\n    CameraControllerComponent.prototype.__getTargetAABB = function () {\n        return this.__targetEntity.getSceneGraph().worldAABB;\n    };\n    CameraControllerComponent.prototype.__updateTargeting = function (camera) {\n        var eyeVec = camera.eye;\n        var centerVec = camera.direction;\n        var upVec = camera._up;\n        var fovy = camera.fovy;\n        if (this.__targetEntity == null) {\n            return { newEyeVec: eyeVec, newCenterVec: centerVec, newUpVec: upVec };\n        }\n        var targetAABB = this.__getTargetAABB();\n        var cameraZNearPlaneHeight = camera.top - camera.bottom;\n        this.__lengthCenterToCorner = targetAABB.lengthCenterToCorner;\n        this.__lengthCameraToObject =\n            (targetAABB.lengthCenterToCorner / Math.sin((fovy * Math.PI) / 180 / 2)) *\n                this.__scaleOfLengthCameraToCenter;\n        var newCenterVec = targetAABB.centerPoint;\n        var centerToCameraVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subtract(eyeVec, centerVec);\n        var centerToCameraVecNormalized = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].normalize(centerToCameraVec);\n        var newEyeVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].add(_math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].multiply(centerToCameraVecNormalized, this.__lengthCameraToObject), newCenterVec);\n        var newUpVec = null;\n        if (camera.entity.getSceneGraph()) {\n            var sg = camera.entity.getSceneGraph();\n            var mat = _math_Matrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].invert(sg.worldMatrixInner);\n            mat.multiplyVector3To(newEyeVec, CameraControllerComponent.returnVector3Eye);\n            newEyeVec = CameraControllerComponent.returnVector3Eye;\n            mat.multiplyVector3To(newCenterVec, CameraControllerComponent.returnVector3Center);\n            newCenterVec = CameraControllerComponent.returnVector3Center;\n            mat.multiplyVector3To(upVec, CameraControllerComponent.returnVector3Up);\n            newUpVec = CameraControllerComponent.returnVector3Up;\n        }\n        else {\n            newUpVec = upVec;\n        }\n        return { newEyeVec: newEyeVec, newCenterVec: newCenterVec, newUpVec: newUpVec };\n    };\n    Object.defineProperty(CameraControllerComponent.prototype, \"scaleOfZNearAndZFar\", {\n        get: function () {\n            return this.__scaleOfZNearAndZFar;\n        },\n        set: function (value) {\n            this.__scaleOfZNearAndZFar = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CameraControllerComponent, \"componentTID\", {\n        get: function () {\n            return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_1__[\"WellKnownComponentTIDs\"].CameraControllerComponentTID;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CameraControllerComponent.returnVector3Eye = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].zero();\n    CameraControllerComponent.returnVector3Center = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].zero();\n    CameraControllerComponent.returnVector3Up = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].zero();\n    return CameraControllerComponent;\n}(_core_Component__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (CameraControllerComponent);\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__[\"default\"].registerComponentClass(CameraControllerComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/CameraControllerComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/LightComponent.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/components/LightComponent.ts ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _definitions_LightType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/LightType */ \"./src/foundation/definitions/LightType.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar LightComponent = /** @class */ (function (_super) {\n    __extends(LightComponent, _super);\n    function LightComponent(entityUid, componentSid, entityRepository) {\n        var _this = _super.call(this, entityUid, componentSid, entityRepository) || this;\n        _this.type = _definitions_LightType__WEBPACK_IMPORTED_MODULE_3__[\"LightType\"].Point;\n        _this.intensity = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](1, 1, 1);\n        _this.__initialdirection = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 1, 0);\n        _this.__direction = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 1, 0);\n        _this.spotExponent = 1.0;\n        _this.spotCutoff = 30; // in degree\n        return _this;\n    }\n    Object.defineProperty(LightComponent, \"componentTID\", {\n        get: function () {\n            return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__[\"WellKnownComponentTIDs\"].LightComponentTID;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LightComponent.prototype.$create = function () {\n        this.__sceneGraphComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_5__[\"default\"]);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_6__[\"ProcessStage\"].Logic);\n    };\n    LightComponent.prototype.$logic = function () {\n        this.__direction = this.__sceneGraphComponent.normalMatrixInner.multiplyVector(this.__initialdirection);\n    };\n    Object.defineProperty(LightComponent.prototype, \"direction\", {\n        get: function () {\n            return this.__direction;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return LightComponent;\n}(_core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (LightComponent);\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].registerComponentClass(LightComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/LightComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/MeshComponent.ts":
/*!****************************************************!*\
  !*** ./src/foundation/components/MeshComponent.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _geometry_Primitive__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../geometry/Primitive */ \"./src/foundation/geometry/Primitive.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ \"./src/foundation/definitions/PrimitiveMode.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _math_AABB__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../math/AABB */ \"./src/foundation/math/AABB.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (undefined && undefined.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar MeshComponent = /** @class */ (function (_super) {\n    __extends(MeshComponent, _super);\n    function MeshComponent(entityUid, componentSid, entityRepository) {\n        var _this = _super.call(this, entityUid, componentSid, entityRepository) || this;\n        _this.__primitives = [];\n        _this.__localAABB = new _math_AABB__WEBPACK_IMPORTED_MODULE_12__[\"default\"]();\n        _this.__viewDepth = -Number.MAX_VALUE;\n        _this.weights = [];\n        _this.__morphPrimitives = [];\n        _this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_5__[\"ProcessStage\"].Load);\n        return _this;\n    }\n    Object.defineProperty(MeshComponent, \"componentTID\", {\n        get: function () {\n            return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__[\"WellKnownComponentTIDs\"].MeshComponentTID;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MeshComponent.prototype.addPrimitive = function (primitive) {\n        this.__primitives.push(primitive);\n    };\n    MeshComponent.prototype.getPrimitiveAt = function (i) {\n        if (this.weights.length > 0) {\n            this.__calcMorphPrimitives();\n            return this.__morphPrimitives[i];\n        }\n        else {\n            return this.__primitives[i];\n        }\n    };\n    MeshComponent.prototype.getPrimitiveNumber = function () {\n        return this.__primitives.length;\n    };\n    MeshComponent.prototype.$load = function () {\n        //    this.makeVerticesSepareted();\n        this.__calcTangents();\n        //this.__calcFaceNormals();\n        //  this.__calcBaryCentricCoord();\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_5__[\"ProcessStage\"].Mount);\n    };\n    MeshComponent.prototype.__calcFaceNormals = function () {\n        var e_1, _a;\n        try {\n            for (var _b = __values(this.__primitives), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var primitive = _c.value;\n                var positionIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_4__[\"VertexAttribute\"].Position);\n                var positionAccessor = primitive.attributeAccessors[positionIdx];\n                var indicesAccessor = primitive.indicesAccessor;\n                var incrementNum = 3; // PrimitiveMode.Triangles\n                if (primitive.primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_6__[\"PrimitiveMode\"].TriangleStrip ||\n                    primitive.primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_6__[\"PrimitiveMode\"].TriangleFan) {\n                    incrementNum = 1;\n                }\n                var vertexNum = primitive.getVertexCountAsIndicesBased();\n                var buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_9__[\"BufferUse\"].CPUGeneric);\n                var normalAttributeByteSize = positionAccessor.byteLength;\n                var normalBufferView = buffer.takeBufferView({ byteLengthToNeed: normalAttributeByteSize, byteStride: 0, isAoS: false });\n                var normalAccessor = normalBufferView.takeAccessor({ compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Vec3, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_11__[\"ComponentType\"].Float, count: positionAccessor.elementCount });\n                for (var i = 0; i < vertexNum - 2; i += incrementNum) {\n                    var pos0 = positionAccessor.getVec3(i, { indicesAccessor: indicesAccessor });\n                    var pos1 = positionAccessor.getVec3(i + 1, { indicesAccessor: indicesAccessor });\n                    var pos2 = positionAccessor.getVec3(i + 2, { indicesAccessor: indicesAccessor });\n                    this.__calcFaceNormalFor3Vertices(i, pos0, pos1, pos2, normalAccessor, indicesAccessor);\n                }\n                primitive.setVertexAttribute(normalAccessor, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_4__[\"VertexAttribute\"].FaceNormal);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    MeshComponent.prototype.__calcFaceNormalFor3Vertices = function (i, pos0, pos1, pos2, normalAccessor, indicesAccessor) {\n        // Calc normal\n        var ax = pos1.x - pos0.x;\n        var ay = pos1.y - pos0.y;\n        var az = pos1.z - pos0.z;\n        var bx = pos2.x - pos0.x;\n        var by = pos2.y - pos0.y;\n        var bz = pos2.z - pos0.z;\n        var nx = ay * bz - az * by;\n        var ny = az * bx - ax * bz;\n        var nz = ax * by - ay * bx;\n        var da = Math.sqrt(nx * nx + ny * ny + nz * nz);\n        if (da <= 1e-6) {\n            da = 0.0001;\n        }\n        da = 1.0 / da;\n        nx *= da;\n        ny *= da;\n        nz *= da;\n        var faceNormal = new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](nx, ny, nz);\n        normalAccessor.setVec3(i, faceNormal.x, faceNormal.y, faceNormal.z, { indicesAccessor: indicesAccessor });\n        normalAccessor.setVec3(i + 1, faceNormal.x, faceNormal.y, faceNormal.z, { indicesAccessor: indicesAccessor });\n        normalAccessor.setVec3(i + 2, faceNormal.x, faceNormal.y, faceNormal.z, { indicesAccessor: indicesAccessor });\n    };\n    MeshComponent.prototype.__calcTangents = function () {\n        var e_2, _a;\n        try {\n            for (var _b = __values(this.__primitives), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var primitive = _c.value;\n                var tangentIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_4__[\"VertexAttribute\"].Tangent);\n                if (tangentIdx !== -1) {\n                    continue;\n                }\n                var texcoordIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_4__[\"VertexAttribute\"].Texcoord0);\n                if (texcoordIdx !== -1) {\n                    var positionIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_4__[\"VertexAttribute\"].Position);\n                    var normalIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_4__[\"VertexAttribute\"].Normal);\n                    var positionAccessor = primitive.attributeAccessors[positionIdx];\n                    var texcoordAccessor = primitive.attributeAccessors[texcoordIdx];\n                    var normalAccessor = primitive.attributeAccessors[normalIdx];\n                    var indicesAccessor = primitive.indicesAccessor;\n                    var incrementNum = 3; // PrimitiveMode.Triangles\n                    if (primitive.primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_6__[\"PrimitiveMode\"].TriangleStrip ||\n                        primitive.primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_6__[\"PrimitiveMode\"].TriangleFan) {\n                        incrementNum = 1;\n                    }\n                    var vertexNum = primitive.getVertexCountAsIndicesBased();\n                    var buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_9__[\"BufferUse\"].CPUGeneric);\n                    var tangentAttributeByteSize = positionAccessor.byteLength;\n                    var tangentBufferView = buffer.takeBufferView({ byteLengthToNeed: tangentAttributeByteSize, byteStride: 0, isAoS: false });\n                    var tangentAccessor = tangentBufferView.takeAccessor({ compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Vec3, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_11__[\"ComponentType\"].Float, count: positionAccessor.elementCount });\n                    for (var i = 0; i < vertexNum - 2; i += incrementNum) {\n                        var pos0 = positionAccessor.getVec3(i, { indicesAccessor: indicesAccessor });\n                        var pos1 = positionAccessor.getVec3(i + 1, { indicesAccessor: indicesAccessor });\n                        var pos2 = positionAccessor.getVec3(i + 2, { indicesAccessor: indicesAccessor });\n                        var uv0 = texcoordAccessor.getVec2(i, { indicesAccessor: indicesAccessor });\n                        var uv1 = texcoordAccessor.getVec2(i + 1, { indicesAccessor: indicesAccessor });\n                        var uv2 = texcoordAccessor.getVec2(i + 2, { indicesAccessor: indicesAccessor });\n                        var norm0 = normalAccessor.getVec3(i, { indicesAccessor: indicesAccessor });\n                        var norm1 = normalAccessor.getVec3(i + 1, { indicesAccessor: indicesAccessor });\n                        var norm2 = normalAccessor.getVec3(i + 2, { indicesAccessor: indicesAccessor });\n                        this.__calcTangentFor3Vertices(i, pos0, pos1, pos2, uv0, uv1, uv2, norm0, norm1, norm2, tangentAccessor, indicesAccessor);\n                    }\n                    primitive.setVertexAttribute(tangentAccessor, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_4__[\"VertexAttribute\"].Tangent);\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    MeshComponent.prototype.__calcTangentFor3Vertices = function (i, pos0, pos1, pos2, uv0, uv1, uv2, norm0, norm1, norm2, tangentAccessor, indicesAccessor) {\n        var tan0Vec3 = this.__calcTangentPerVertex(pos0, pos1, pos2, uv0, uv1, uv2, norm0, norm1, norm2);\n        var tan1Vec3 = this.__calcTangentPerVertex(pos1, pos2, pos0, uv1, uv2, uv0, norm0, norm1, norm2);\n        var tan2Vec3 = this.__calcTangentPerVertex(pos2, pos0, pos1, uv2, uv0, uv1, norm0, norm1, norm2);\n        tangentAccessor.setVec3(i, tan0Vec3.x, tan0Vec3.y, tan0Vec3.z, { indicesAccessor: indicesAccessor });\n        tangentAccessor.setVec3(i + 1, tan1Vec3.x, tan1Vec3.y, tan1Vec3.z, { indicesAccessor: indicesAccessor });\n        tangentAccessor.setVec3(i + 2, tan2Vec3.x, tan2Vec3.y, tan2Vec3.z, { indicesAccessor: indicesAccessor });\n    };\n    MeshComponent.prototype.__calcTangentPerVertex = function (pos0Vec3, pos1Vec3, pos2Vec3, uv0Vec2, uv1Vec2, uv2Vec2, norm0Vec3, norm1Vec3, norm2Vec3) {\n        var cp0 = [\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos0Vec3.x, uv0Vec2.x, uv0Vec2.y),\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos0Vec3.y, uv0Vec2.x, uv0Vec2.y),\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos0Vec3.z, uv0Vec2.x, uv0Vec2.y)\n        ];\n        var cp1 = [\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos1Vec3.x, uv1Vec2.x, uv1Vec2.y),\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos1Vec3.y, uv1Vec2.x, uv1Vec2.y),\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos1Vec3.z, uv1Vec2.x, uv1Vec2.y)\n        ];\n        var cp2 = [\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos2Vec3.x, uv2Vec2.x, uv2Vec2.y),\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos2Vec3.y, uv2Vec2.x, uv2Vec2.y),\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos2Vec3.z, uv2Vec2.x, uv2Vec2.y)\n        ];\n        var u = [];\n        var v = [];\n        for (var i = 0; i < 3; i++) {\n            var v1 = _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"].subtract(cp1[i], cp0[i]);\n            var v2 = _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"].subtract(cp2[i], cp1[i]);\n            var abc = _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"].cross(v1, v2);\n            var validate = Math.abs(abc.x) < Number.EPSILON;\n            if (validate) {\n                console.assert(validate, \"Polygons or polygons on UV are degenerate!\");\n                return new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](0, 0, 0);\n            }\n            u[i] = -abc.y / abc.x;\n            v[i] = -abc.z / abc.x;\n        }\n        if (u[0] * u[0] + u[1] * u[1] + u[2] * u[2] < Number.EPSILON) {\n            var tangent = _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"].cross(norm0Vec3, new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos1Vec3));\n            u[0] = tangent.x;\n            u[1] = tangent.y;\n            u[2] = tangent.z;\n        }\n        return _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"].normalize(new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](u[0], u[1], u[2]));\n    };\n    Object.defineProperty(MeshComponent.prototype, \"AABB\", {\n        get: function () {\n            var e_3, _a;\n            if (this.__localAABB.isVanilla()) {\n                try {\n                    for (var _b = __values(this.__primitives), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var primitive = _c.value;\n                        this.__localAABB.mergeAABB(primitive.AABB);\n                    }\n                }\n                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_3) throw e_3.error; }\n                }\n            }\n            return this.__localAABB;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MeshComponent.prototype.calcViewDepth = function (cameraComponent) {\n        var viewMatrix = cameraComponent.viewMatrix;\n        var centerPosition_inLocal = new _math_Vector4__WEBPACK_IMPORTED_MODULE_13__[\"default\"](this.AABB.centerPoint);\n        var centerPosition_inView = viewMatrix.multiplyVector(centerPosition_inLocal);\n        this.__viewDepth = centerPosition_inView.z;\n        return this.__viewDepth;\n    };\n    Object.defineProperty(MeshComponent.prototype, \"viewDepth\", {\n        get: function () {\n            return this.__viewDepth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MeshComponent.prototype.makeVerticesSepareted = function () {\n        var e_4, _a;\n        try {\n            for (var _b = __values(this.__primitives), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var primitive = _c.value;\n                if (primitive.hasIndices()) {\n                    var buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_9__[\"BufferUse\"].CPUGeneric);\n                    var vertexCount = primitive.getVertexCountAsIndicesBased();\n                    var indexAccessor = primitive.indicesAccessor;\n                    for (var i in primitive.attributeAccessors) {\n                        var attributeAccessor = primitive.attributeAccessors[i];\n                        var elementSizeInBytes_1 = attributeAccessor.elementSizeInBytes;\n                        var bufferView_1 = buffer.takeBufferView({ byteLengthToNeed: elementSizeInBytes_1 * vertexCount, byteStride: 0, isAoS: false });\n                        var newAccessor_1 = bufferView_1.takeAccessor({ compositionType: attributeAccessor.compositionType, componentType: attributeAccessor.componentType, count: vertexCount });\n                        for (var j = 0; j < vertexCount; j++) {\n                            var idx = indexAccessor.getScalar(j, {});\n                            newAccessor_1.setElementFromSameCompositionAccessor(j, attributeAccessor, idx);\n                        }\n                        primitive.setVertexAttribute(newAccessor_1, primitive.attributeSemantics[i]);\n                    }\n                    var indicesAccessor = primitive.indicesAccessor;\n                    var elementSizeInBytes = indicesAccessor.elementSizeInBytes;\n                    var bufferView = buffer.takeBufferView({ byteLengthToNeed: elementSizeInBytes * vertexCount, byteStride: 0, isAoS: false });\n                    var newAccessor = bufferView.takeAccessor({ compositionType: indicesAccessor.compositionType, componentType: indicesAccessor.componentType, count: vertexCount });\n                    for (var j = 0; j < vertexCount; j++) {\n                        //const idx = indexAccessor!.getScalar(j, {});\n                        newAccessor.setScalar(j, j, {});\n                    }\n                    primitive.setIndices(newAccessor);\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n    };\n    MeshComponent.prototype.__calcBaryCentricCoord = function () {\n        var e_5, _a;\n        try {\n            for (var _b = __values(this.__primitives), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var primitive = _c.value;\n                var buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_9__[\"BufferUse\"].CPUGeneric);\n                var positionIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_4__[\"VertexAttribute\"].Position);\n                var positionAccessor = primitive.attributeAccessors[positionIdx];\n                var indicesAccessor = primitive.indicesAccessor;\n                var baryCentricCoordAttributeByteSize = positionAccessor.byteLength;\n                var baryCentricCoordBufferView = buffer.takeBufferView({ byteLengthToNeed: baryCentricCoordAttributeByteSize, byteStride: 0, isAoS: false });\n                var baryCentricCoordAccessor = baryCentricCoordBufferView.takeAccessor({ compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Vec3, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_11__[\"ComponentType\"].Float, count: positionAccessor.elementCount });\n                var vertexNum = positionAccessor.elementCount;\n                var num = vertexNum;\n                if (indicesAccessor) {\n                    num = indicesAccessor.elementCount;\n                }\n                for (var ver_i = 0; ver_i < num; ver_i++) {\n                    var idx = ver_i;\n                    if (indicesAccessor) {\n                        idx = indicesAccessor.getScalar(ver_i, {});\n                    }\n                    baryCentricCoordAccessor.setVec3(idx, idx % 3 === 0 ? 1 : 0, // 1 0 0  1 0 0  1 0 0,\n                    idx % 3 === 1 ? 1 : 0, // 0 1 0  0 1 0  0 1 0,\n                    idx % 3 === 2 ? 1 : 0, // 0 0 1  0 0 1  0 0 1\n                    {});\n                }\n                primitive.setVertexAttribute(baryCentricCoordAccessor, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_4__[\"VertexAttribute\"].BaryCentricCoord);\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n    };\n    MeshComponent.prototype.__initMorphPrimitives = function () {\n        if (this.weights.length === 0) {\n            return;\n        }\n        var buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_9__[\"BufferUse\"].CPUGeneric);\n        var _loop_1 = function (i) {\n            var primitive = this_1.__primitives[i];\n            if (this_1.__morphPrimitives[i] == null) {\n                var target = primitive.targets[0];\n                var map_1 = new Map();\n                target.forEach(function (accessor, semantic) {\n                    var bufferView = buffer.takeBufferView({ byteLengthToNeed: accessor.byteLength, byteStride: 0, isAoS: false });\n                    var morphAccessor = bufferView.takeAccessor({ compositionType: accessor.compositionType, componentType: accessor.componentType, count: accessor.elementCount });\n                    map_1.set(semantic, morphAccessor);\n                });\n                var morphPrimitive = new _geometry_Primitive__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n                morphPrimitive.setData(map_1, primitive.primitiveMode, primitive.material, primitive.indicesAccessor);\n                this_1.__morphPrimitives[i] = morphPrimitive;\n            }\n        };\n        var this_1 = this;\n        for (var i = 0; i < this.__primitives.length; i++) {\n            _loop_1(i);\n        }\n    };\n    MeshComponent.prototype.__calcMorphPrimitives = function () {\n        var _this = this;\n        if (this.weights.length === 0) {\n            return;\n        }\n        this.__initMorphPrimitives();\n        var _loop_2 = function (i) {\n            var morphPrimitive = this_2.__morphPrimitives[i];\n            var primitive = this_2.__primitives[i];\n            var target = primitive.targets[0];\n            target.forEach(function (accessor, semantic) {\n                var morphAccessor = morphPrimitive.getAttribute(semantic);\n                var elementCount = morphAccessor.elementCount;\n                for (var j = 0; j < elementCount; j++) {\n                    morphAccessor.setElementFromSameCompositionAccessor(j, primitive.getAttribute(semantic));\n                }\n            });\n            var _loop_3 = function (k) {\n                var target_1 = primitive.targets[k];\n                target_1.forEach(function (accessor, semantic) {\n                    var morphAccessor = morphPrimitive.getAttribute(semantic);\n                    var elementCount = morphAccessor.elementCount;\n                    for (var j = 0; j < elementCount; j++) {\n                        morphAccessor.addElementFromSameCompositionAccessor(j, accessor, _this.weights[k]);\n                    }\n                });\n            };\n            for (var k = 0; k < primitive.targets.length; k++) {\n                _loop_3(k);\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < this.__primitives.length; i++) {\n            _loop_2(i);\n        }\n    };\n    return MeshComponent;\n}(_core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (MeshComponent);\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].registerComponentClass(MeshComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/MeshComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/MeshRendererComponent.ts":
/*!************************************************************!*\
  !*** ./src/foundation/components/MeshRendererComponent.ts ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _MeshComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _CameraComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _system_ModuleManager__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../system/ModuleManager */ \"./src/foundation/system/ModuleManager.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar MeshRendererComponent = /** @class */ (function (_super) {\n    __extends(MeshRendererComponent, _super);\n    function MeshRendererComponent(entityUid, componentSid, entityRepository) {\n        var _this = _super.call(this, entityUid, componentSid, entityRepository) || this;\n        _this.__vertexHandles = [];\n        _this.diffuseCubeMapContribution = 1.0;\n        _this.specularCubeMapContribution = 1.0;\n        _this.rotationOfCubeMap = 0;\n        _this.isVisible = true;\n        _this.__sceneGraphComponent = _this.__entityRepository.getComponentOfEntity(_this.__entityUid, _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\n        var componentRepository = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        var cameraComponents = componentRepository.getComponentsWithType(_CameraComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n        if (cameraComponents) {\n            MeshRendererComponent.__cameraComponent = cameraComponents[0];\n        }\n        return _this;\n    }\n    Object.defineProperty(MeshRendererComponent, \"componentTID\", {\n        get: function () {\n            return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__[\"WellKnownComponentTIDs\"].MeshRendererComponentTID;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MeshRendererComponent, \"firstOpaqueSid\", {\n        get: function () {\n            return MeshRendererComponent.__firstOpaqueSid;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MeshRendererComponent, \"firstTranparentSid\", {\n        get: function () {\n            return MeshRendererComponent.__firstTransparentSid;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MeshRendererComponent.prototype.$create = function (_a) {\n        var processApproach = _a.processApproach;\n        if (this.__meshComponent != null) {\n            return;\n        }\n        this.__meshComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _MeshComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n        var moduleManager = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_14__[\"default\"].getInstance();\n        var moduleName = 'webgl';\n        var webglModule = moduleManager.getModule(moduleName);\n        this.__webglRenderingStrategy = webglModule.getRenderingStrategy(processApproach);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Load);\n    };\n    MeshRendererComponent.prototype.$load = function () {\n        this.__webglRenderingStrategy.$load(this.__meshComponent);\n        if (this.diffuseCubeMap && !this.diffuseCubeMap.startedToLoad) {\n            this.diffuseCubeMap.loadTextureImagesAsync();\n        }\n        if (this.specularCubeMap && !this.specularCubeMap.startedToLoad) {\n            this.specularCubeMap.loadTextureImagesAsync();\n        }\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].PreRender);\n    };\n    MeshRendererComponent.prototype.$prerender = function () {\n        this.__webglRenderingStrategy.$prerender(this.__meshComponent, MeshRendererComponent.__instanceIDBufferUid);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Render);\n    };\n    MeshRendererComponent.prototype.$render = function (_a) {\n        var renderPass = _a.renderPass;\n        if (this.__webglRenderingStrategy.$render == null) {\n            return;\n        }\n        var entity = this.__entityRepository.getEntity(this.__entityUid);\n        this.__webglRenderingStrategy.$render(this.__meshComponent, this.__sceneGraphComponent.worldMatrixInner, this.__sceneGraphComponent.normalMatrixInner, entity, renderPass, this.diffuseCubeMap, this.specularCubeMap);\n        if (this.__meshComponent.weights.length > 0) {\n            this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].PreRender);\n        }\n    };\n    MeshRendererComponent.common_$load = function (_a) {\n        var processApproach = _a.processApproach;\n        var moduleManager = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_14__[\"default\"].getInstance();\n        var moduleName = 'webgl';\n        var webglModule = moduleManager.getModule(moduleName);\n        MeshRendererComponent.__staticWebglModule = webglModule;\n        // Strategy\n        MeshRendererComponent.__webGLStrategy = webglModule.getRenderingStrategy(processApproach);\n        // ResourceRepository\n        MeshRendererComponent.__webglResourceRepository = webglModule.WebGLResourceRepository.getInstance();\n    };\n    MeshRendererComponent.common_$prerender = function () {\n        var gl = MeshRendererComponent.__webglResourceRepository.currentWebGLContextWrapper;\n        if (gl == null) {\n            throw new Error('No WebGLRenderingContext!');\n        }\n        MeshRendererComponent.__webGLStrategy.common_$prerender();\n        if (MeshRendererComponent.__isReady()) {\n            return 0;\n        }\n        MeshRendererComponent.__instanceIDBufferUid = MeshRendererComponent.__setupInstanceIDBuffer();\n        return MeshRendererComponent.__instanceIDBufferUid;\n    };\n    MeshRendererComponent.__isReady = function () {\n        if (MeshRendererComponent.__instanceIDBufferUid !== _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__[\"default\"].InvalidCGAPIResourceUid) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    MeshRendererComponent.__setupInstanceIDBuffer = function () {\n        if (MeshRendererComponent.__instanceIdAccessor == null) {\n            var buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_11__[\"BufferUse\"].CPUGeneric);\n            var count = _core_Config__WEBPACK_IMPORTED_MODULE_10__[\"default\"].maxEntityNumber;\n            var bufferView = buffer.takeBufferView({ byteLengthToNeed: 4 /*byte*/ * count, byteStride: 0, isAoS: false });\n            MeshRendererComponent.__instanceIdAccessor = bufferView.takeAccessor({ compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_12__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_13__[\"ComponentType\"].Float, count: count });\n        }\n        var meshComponents = MeshRendererComponent.__componentRepository.getComponentsWithType(_MeshComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n        if (meshComponents == null) {\n            return _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__[\"default\"].InvalidCGAPIResourceUid;\n        }\n        for (var i = 0; i < meshComponents.length; i++) {\n            MeshRendererComponent.__instanceIdAccessor.setScalar(i, meshComponents[i].entityUID, {});\n        }\n        return MeshRendererComponent.__webglResourceRepository.createVertexBuffer(MeshRendererComponent.__instanceIdAccessor);\n    };\n    MeshRendererComponent.common_$render = function () {\n        MeshRendererComponent.__cameraComponent = MeshRendererComponent.__componentRepository.getComponent(_CameraComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"], _CameraComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].main);\n        var viewMatrix = MeshRendererComponent.__tmp_indentityMatrix;\n        var projectionMatrix = MeshRendererComponent.__tmp_indentityMatrix;\n        if (MeshRendererComponent.__cameraComponent) {\n            viewMatrix = MeshRendererComponent.__cameraComponent.viewMatrix;\n            projectionMatrix = MeshRendererComponent.__cameraComponent.projectionMatrix;\n        }\n        var meshComponents = MeshRendererComponent.__componentRepository.getComponentsWithType(_MeshComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n        var meshComponent = meshComponents[0];\n        var primitiveNum = meshComponent.getPrimitiveNumber();\n        var glw = MeshRendererComponent.__webglResourceRepository.currentWebGLContextWrapper;\n        for (var i = 0; i < primitiveNum; i++) {\n            var primitive = meshComponent.getPrimitiveAt(i);\n            if (!MeshRendererComponent.__webGLStrategy.common_$render(primitive, viewMatrix, projectionMatrix)) {\n                break;\n            }\n            MeshRendererComponent.__webGLStrategy.attachVertexData(i, primitive, glw, MeshRendererComponent.__instanceIDBufferUid);\n            MeshRendererComponent.__webGLStrategy.attatchShaderProgram(primitive.material);\n            MeshRendererComponent.__webGLStrategy.attachGPUData(primitive);\n            var meshComponents_1 = MeshRendererComponent.__componentRepository.getComponentsWithType(_MeshComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n            //      glw.drawElementsInstanced(primitive.primitiveMode.index, primitive.indicesAccessor!.elementCount, primitive.indicesAccessor!.componentType.index, primitive.indicesAccessor!.byteOffsetInBuffer, meshComponents.length);\n            glw.drawElementsInstanced(primitive.primitiveMode.index, primitive.indicesAccessor.elementCount, primitive.indicesAccessor.componentType.index, 0, meshComponents_1.length);\n        }\n    };\n    MeshRendererComponent.sort_$render = function (renderPass) {\n        var meshComponents;\n        if (renderPass != null) {\n            meshComponents = renderPass.meshComponents;\n        }\n        if (MeshRendererComponent.__manualTransparentSids == null) {\n            var sortedMeshComponentSids = MeshRendererComponent.sort_$render_inner(void 0, meshComponents);\n            // const sortedMeshComponentSids = MeshRendererComponent.sort_$render_inner();\n            return sortedMeshComponentSids;\n        }\n        else if (MeshRendererComponent.__manualTransparentSids.length === 0) {\n            return [];\n        }\n        else {\n            var sortedMeshComponentSids = MeshRendererComponent.sort_$render_inner(MeshRendererComponent.__manualTransparentSids, meshComponents);\n            // const sortedMeshComponentSids = MeshRendererComponent.sort_$render_inner(MeshRendererComponent.__manualTransparentSids);\n            return sortedMeshComponentSids;\n        }\n        return [];\n    };\n    MeshRendererComponent.sort_$render_inner = function (transparentMeshComponentSids, meshComponentsOfRenderPass) {\n        if (transparentMeshComponentSids === void 0) { transparentMeshComponentSids = []; }\n        var meshComponents = meshComponentsOfRenderPass;\n        if (meshComponents == null) {\n            meshComponents = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance().getComponentsWithType(_MeshComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n        }\n        var opaqueMeshComponentSids = [];\n        var transparentMeshComponents = [];\n        for (var i = 0; i < meshComponents.length; i++) {\n            var meshRendererComponent = meshComponents[i].entity.getComponent(MeshRendererComponent);\n            if (!meshRendererComponent.isVisible) {\n                continue;\n            }\n            if (meshRendererComponent.currentProcessStage === _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Render) {\n                var meshComponent = meshComponents[i];\n                var isBlendTypeMesh = false;\n                for (var j = 0; j < meshComponent.getPrimitiveNumber(); j++) {\n                    var primitive = meshComponent.getPrimitiveAt(j);\n                    if (primitive.material != null && primitive.material.isBlend()) {\n                        isBlendTypeMesh = true;\n                    }\n                }\n                if (transparentMeshComponentSids.length === 0 && isBlendTypeMesh) {\n                    transparentMeshComponents.push(meshComponent);\n                }\n                else {\n                    opaqueMeshComponentSids.push(meshComponent.componentSID);\n                }\n                var cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance().getComponent(_CameraComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"], _CameraComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].main);\n                if (cameraComponent) {\n                    meshComponent.calcViewDepth(cameraComponent);\n                }\n            }\n        }\n        transparentMeshComponents.sort(function (a, b) {\n            if (a.viewDepth < b.viewDepth)\n                return -1;\n            if (a.viewDepth > b.viewDepth)\n                return 1;\n            return 0;\n        });\n        if (transparentMeshComponentSids.length === 0) {\n            transparentMeshComponentSids = transparentMeshComponents.map(function (meshComponent) {\n                return meshComponent.componentSID;\n            });\n        }\n        MeshRendererComponent.__firstOpaqueSid = opaqueMeshComponentSids[0];\n        MeshRendererComponent.__firstTransparentSid = transparentMeshComponentSids[0];\n        var sortedMeshComponentSids = opaqueMeshComponentSids.concat(transparentMeshComponentSids);\n        sortedMeshComponentSids.push(_core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"].invalidComponentSID);\n        return sortedMeshComponentSids;\n    };\n    Object.defineProperty(MeshRendererComponent, \"manualTransparentSids\", {\n        set: function (sids) {\n            MeshRendererComponent.__manualTransparentSids = sids;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MeshRendererComponent.__shaderProgramHandleOfPrimitiveObjectUids = new Map();\n    MeshRendererComponent.__componentRepository = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n    MeshRendererComponent.__instanceIDBufferUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__[\"default\"].InvalidCGAPIResourceUid;\n    MeshRendererComponent.__tmp_indentityMatrix = _math_Matrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"].identity();\n    MeshRendererComponent.__firstOpaqueSid = _core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"].invalidComponentSID;\n    MeshRendererComponent.__firstTransparentSid = _core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"].invalidComponentSID;\n    return MeshRendererComponent;\n}(_core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (MeshRendererComponent);\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].registerComponentClass(MeshRendererComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/MeshRendererComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/SceneGraphComponent.ts":
/*!**********************************************************!*\
  !*** ./src/foundation/components/SceneGraphComponent.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _math_MutableRowMajarMatrix44__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/MutableRowMajarMatrix44 */ \"./src/foundation/math/MutableRowMajarMatrix44.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../math/MutableMatrix33 */ \"./src/foundation/math/MutableMatrix33.ts\");\n/* harmony import */ var _math_RowMajarMatrix44__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/RowMajarMatrix44 */ \"./src/foundation/math/RowMajarMatrix44.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_AABB__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../math/AABB */ \"./src/foundation/math/AABB.ts\");\n/* harmony import */ var _MeshComponent__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar SceneGraphComponent = /** @class */ (function (_super) {\n    __extends(SceneGraphComponent, _super);\n    function SceneGraphComponent(entityUid, componentSid, entityRepository) {\n        var _this = _super.call(this, entityUid, componentSid, entityRepository) || this;\n        _this.__children = [];\n        _this._worldMatrix = _math_MutableRowMajarMatrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"].dummy();\n        _this._normalMatrix = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_9__[\"default\"].dummy();\n        _this.__isWorldMatrixUpToDate = false;\n        _this.__tmpMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_8__[\"default\"].identity();\n        _this.__worldAABB = new _math_AABB__WEBPACK_IMPORTED_MODULE_12__[\"default\"]();\n        _this.__isWorldAABBDirty = true;\n        // Skeletal\n        _this.isRootJoint = false;\n        _this.jointIndex = -1;\n        _this._jointsOfHierarchies = [];\n        var thisClass = SceneGraphComponent;\n        //    this.__currentProcessStage = ProcessStage.Logic;\n        _this.isAbleToBeParent = false;\n        _this.beAbleToBeParent(true);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_6__[\"BufferUse\"].GPUInstanceData, 'worldMatrix', _math_MutableRowMajarMatrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_6__[\"BufferUse\"].CPUGeneric, 'normalMatrix', _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_9__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, [1, 0, 0, 0, 1, 0, 0, 0, 1]);\n        _this.submitToAllocation();\n        return _this;\n        //this.__updatedProperly = false;\n    }\n    SceneGraphComponent.prototype.isJoint = function () {\n        if (this.jointIndex >= 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Object.defineProperty(SceneGraphComponent, \"componentTID\", {\n        get: function () {\n            return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_4__[\"WellKnownComponentTIDs\"].SceneGraphComponentTID;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SceneGraphComponent.prototype.beAbleToBeParent = function (flag) {\n        this.isAbleToBeParent = flag;\n    };\n    SceneGraphComponent.prototype.setWorldMatrixDirty = function () {\n        this.__isWorldMatrixUpToDate = false;\n        SceneGraphComponent._isAllUpdate = false;\n        this.__isWorldAABBDirty = true;\n    };\n    SceneGraphComponent.prototype.addChild = function (sg) {\n        if (this.__children != null) {\n            sg.__parent = this;\n            this.__children.push(sg);\n        }\n        else {\n            console.error('This is not allowed to have children.');\n        }\n    };\n    Object.defineProperty(SceneGraphComponent.prototype, \"children\", {\n        get: function () {\n            return this.__children;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SceneGraphComponent.prototype, \"parent\", {\n        get: function () {\n            return this.__parent;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SceneGraphComponent.prototype, \"worldMatrixInner\", {\n        get: function () {\n            //    if (!this.__isWorldMatrixUpToDate) {\n            //this._worldMatrix.identity();\n            this._worldMatrix.copyComponents(this.calcWorldMatrixRecursively(false)); //this.isJoint()));\n            this.__isWorldMatrixUpToDate = true;\n            //  }\n            return this._worldMatrix;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SceneGraphComponent.prototype, \"worldMatrix\", {\n        get: function () {\n            return this.worldMatrixInner.clone();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SceneGraphComponent.prototype, \"normalMatrixInner\", {\n        get: function () {\n            _math_RowMajarMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].invertTo(this.worldMatrixInner, SceneGraphComponent.invertedMatrix44);\n            this._normalMatrix.copyComponents(SceneGraphComponent.invertedMatrix44.transpose());\n            return this._normalMatrix;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SceneGraphComponent.prototype, \"normalMatrix\", {\n        get: function () {\n            return this.normalMatrixInner.clone();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SceneGraphComponent.prototype.$create = function () {\n        this.__meshComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _MeshComponent__WEBPACK_IMPORTED_MODULE_13__[\"default\"]);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__[\"ProcessStage\"].Logic);\n    };\n    SceneGraphComponent.prototype.$logic = function () {\n        // if (!this.__isWorldMatrixUpToDate) {\n        //this._worldMatrix.identity();\n        this._worldMatrix.copyComponents(this.calcWorldMatrixRecursively(false)); //this.isJoint()));\n        this.__isWorldMatrixUpToDate = true;\n        //}\n    };\n    SceneGraphComponent.common_$prerender = function () {\n        SceneGraphComponent._isAllUpdate = true;\n    };\n    SceneGraphComponent.prototype.isWorldMatrixUpToDateRecursively = function () {\n        if (this.__isWorldMatrixUpToDate) {\n            if (this.__parent) {\n                var result = this.__parent.isWorldMatrixUpToDateRecursively();\n                return result;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    SceneGraphComponent.prototype.calcWorldMatrixRecursively = function (isJointMode) {\n        var entity = this.__entityRepository.getEntity(this.__entityUid);\n        var transform = entity.getTransform();\n        if (SceneGraphComponent._isAllUpdate) {\n            return this._worldMatrix;\n        }\n        else {\n            var matrix = transform.matrixInner;\n            if (this.__parent == null || (isJointMode && this.__parent != null && !this.__parent.isJoint())) {\n                return matrix;\n            }\n            this.__tmpMatrix.copyComponents(matrix);\n            var matrixFromAncestorToParent = void 0;\n            if (this.isWorldMatrixUpToDateRecursively()) {\n                matrixFromAncestorToParent = this.__parent._worldMatrix;\n            }\n            else {\n                matrixFromAncestorToParent = this.__parent.calcWorldMatrixRecursively(isJointMode);\n            }\n            this.__tmpMatrix.multiplyByLeft(matrixFromAncestorToParent);\n        }\n        return this.__tmpMatrix;\n        // let matrix;\n        // let currentMatrix = transform.matrixInner;\n        // if (this.__parent == null) {\n        //   return currentMatrix;\n        // }\n        // matrix = Matrix44.multiply(this.__parent!.calcWorldMatrixRecursively(), currentMatrix);\n        // return matrix;\n    };\n    /**\n     * Collects children and itself from specified sceneGraphComponent.\n     * @param sceneGraphComponent collects children and itself from the sceneGraphComponent\n     * @param isJointMode collects joints only\n     */\n    SceneGraphComponent.flattenHierarchy = function (sceneGraphComponent, isJointMode) {\n        var results = [];\n        if (!isJointMode || sceneGraphComponent.isJoint()) {\n            results.push(sceneGraphComponent);\n        }\n        if (sceneGraphComponent.isAbleToBeParent) {\n            var children = sceneGraphComponent.children;\n            for (var i = 0; i < children.length; i++) {\n                var hitChildren = this.flattenHierarchy(children[i], isJointMode);\n                Array.prototype.push.apply(results, hitChildren);\n            }\n        }\n        return results;\n    };\n    Object.defineProperty(SceneGraphComponent.prototype, \"worldPosition\", {\n        get: function () {\n            var zeroVector = SceneGraphComponent.__originVector3;\n            this.worldMatrixInner.multiplyVector3To(zeroVector, SceneGraphComponent.returnVector3);\n            return SceneGraphComponent.returnVector3;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SceneGraphComponent.prototype.calcWorldAABB = function () {\n        var that = this;\n        var aabb = (function mergeAABBRecursively(elem) {\n            if (elem.__meshComponent != null) {\n                elem.__worldAABB = _math_AABB__WEBPACK_IMPORTED_MODULE_12__[\"default\"].multiplyMatrix(new _math_Matrix44__WEBPACK_IMPORTED_MODULE_2__[\"default\"](elem.worldMatrixInner), elem.__meshComponent.AABB);\n            }\n            var children = elem.children;\n            for (var i = 0; i < children.length; i++) {\n                var aabb = mergeAABBRecursively(children[i]);\n                if (aabb instanceof _math_AABB__WEBPACK_IMPORTED_MODULE_12__[\"default\"]) {\n                    elem.__worldAABB.mergeAABB(aabb);\n                }\n                else {\n                    console.assert(\"calculation of AABB error!\");\n                }\n            }\n            return elem.__worldAABB;\n            return new _math_AABB__WEBPACK_IMPORTED_MODULE_12__[\"default\"]();\n        })(this);\n        this.__worldAABB.mergeAABB(aabb);\n        return this.__worldAABB;\n    };\n    Object.defineProperty(SceneGraphComponent.prototype, \"worldAABB\", {\n        get: function () {\n            if (this.__isWorldAABBDirty) {\n                this.calcWorldAABB();\n                this.__isWorldAABBDirty = false;\n            }\n            return this.__worldAABB;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SceneGraphComponent._isAllUpdate = false;\n    SceneGraphComponent.__originVector3 = _math_Vector3__WEBPACK_IMPORTED_MODULE_11__[\"default\"].zero();\n    SceneGraphComponent.returnVector3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_14__[\"default\"].zero();\n    SceneGraphComponent.invertedMatrix44 = new _math_MutableRowMajarMatrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"]([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n    return SceneGraphComponent;\n}(_core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (SceneGraphComponent);\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].registerComponentClass(SceneGraphComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/SceneGraphComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/SkeletalComponent.ts":
/*!********************************************************!*\
  !*** ./src/foundation/components/SkeletalComponent.ts ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/MutableQuaterion */ \"./src/foundation/math/MutableQuaterion.ts\");\n/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../math/MathUtil */ \"./src/foundation/math/MathUtil.ts\");\n/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../math/MutableVector4 */ \"./src/foundation/math/MutableVector4.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (undefined && undefined.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\n\n\n\n\n\n\n\n\n\n\n\nvar SkeletalComponent = /** @class */ (function (_super) {\n    __extends(SkeletalComponent, _super);\n    function SkeletalComponent(entityUid, componentSid, entityRepository) {\n        var _this = _super.call(this, entityUid, componentSid, entityRepository) || this;\n        _this._jointIndices = [];\n        _this.__joints = [];\n        _this._inverseBindMatrices = [];\n        _this.isSkinning = true;\n        _this.isOptimizingMode = true;\n        _this.__boneCompressedInfo = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_9__[\"default\"].zero();\n        return _this;\n    }\n    Object.defineProperty(SkeletalComponent, \"componentTID\", {\n        get: function () {\n            return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__[\"WellKnownComponentTIDs\"].SkeletalComponentTID;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SkeletalComponent.prototype, \"joints\", {\n        set: function (joints) {\n            this.__joints = joints;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SkeletalComponent.prototype.$create = function () {\n        this.__sceneGraphComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_5__[\"ProcessStage\"].Load);\n    };\n    SkeletalComponent.prototype.$load = function () {\n        var _this = this;\n        for (var i = 0; i < this.__joints.length; i++) {\n            var inverseBindMatrix = (this._inverseBindMatrices[i] !== void 0) ? this._inverseBindMatrices[i] : _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"].identity();\n            this.__joints[i]._inverseBindMatrix = inverseBindMatrix;\n            this.__joints[i]._bindMatrix = _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"].invert(inverseBindMatrix);\n        }\n        var calcParentJointsMatricesRecursively = function (joint) {\n            var e_1, _a;\n            var parentJoint = joint.parent;\n            var results = [];\n            if (parentJoint) {\n                var result = calcParentJointsMatricesRecursively(parentJoint);\n                if (Array.isArray(result)) {\n                    Array.prototype.push.apply(results, result);\n                }\n                try {\n                    // for glTF2.0\n                    for (var _b = __values(_this._jointIndices), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var gltfJointIndex = _c.value;\n                        if (parentJoint.jointIndex === gltfJointIndex) {\n                            results.push(parentJoint);\n                            return results;\n                        }\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n                return results;\n            }\n            return null;\n        };\n        var jointsHierarchies = null;\n        for (var i = 0; i < this.__joints.length; i++) {\n            jointsHierarchies = calcParentJointsMatricesRecursively(this.__joints[i]);\n            if (jointsHierarchies != null) {\n                jointsHierarchies.push(this.__joints[i]);\n                this.__joints[i]._jointsOfHierarchies = jointsHierarchies;\n            }\n        }\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_5__[\"ProcessStage\"].Logic);\n    };\n    SkeletalComponent.prototype.$logic = function () {\n        var flatMatrices = [];\n        var matrices = [];\n        if (this.isSkinning) {\n            for (var i = 0; i < this.__joints.length; i++) {\n                var joint = this.__joints[i];\n                var globalJointTransform = null;\n                var inverseBindMatrix = joint._inverseBindMatrix;\n                globalJointTransform = new _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"](joint.worldMatrixInner);\n                matrices[i] = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].identity();\n                //matrices[i] = Matrix44.multiply(matrices[i], Matrix44.invert(new Matrix44(this.__sceneGraphComponent!.worldMatrixInner)));\n                matrices[i] = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].multiply(matrices[i], globalJointTransform);\n                matrices[i] = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].multiply(matrices[i], inverseBindMatrix);\n                if (this._bindShapeMatrix) {\n                    matrices[i] = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].multiply(matrices[i], this._bindShapeMatrix); // only for glTF1\n                }\n            }\n        }\n        if (this.isOptimizingMode) {\n            this.__qtArray = new Float32Array(matrices.length * 4);\n            var scales = [];\n            var tXArray = [];\n            var tYArray = [];\n            var tZArray = [];\n            for (var i = 0; i < matrices.length; i++) {\n                var m = matrices[i];\n                var scale = new _math_Vector3__WEBPACK_IMPORTED_MODULE_6__[\"default\"](Math.sqrt(m.m00 * m.m00 + m.m01 * m.m01 + m.m02 * m.m02), Math.sqrt(m.m10 * m.m10 + m.m11 * m.m11 + m.m12 * m.m12), Math.sqrt(m.m20 * m.m20 + m.m21 * m.m21 + m.m22 * m.m22));\n                matrices[i].m00 /= scale.x;\n                matrices[i].m01 /= scale.x;\n                matrices[i].m02 /= scale.x;\n                matrices[i].m10 /= scale.y;\n                matrices[i].m11 /= scale.y;\n                matrices[i].m12 /= scale.y;\n                matrices[i].m20 /= scale.z;\n                matrices[i].m21 /= scale.z;\n                matrices[i].m22 /= scale.z;\n                scales.push(Math.max(scale.x, scale.y, scale.z));\n                var t = matrices[i].getTranslate();\n                tXArray.push(Math.abs(t.x));\n                tYArray.push(Math.abs(t.y));\n                tZArray.push(Math.abs(t.z));\n            }\n            var maxScale = Math.max.apply(null, scales);\n            var maxX = Math.max.apply(null, tXArray);\n            var maxY = Math.max.apply(null, tYArray);\n            var maxZ = Math.max.apply(null, tZArray);\n            this.__boneCompressedInfo.x = maxX * 1.1;\n            this.__boneCompressedInfo.y = maxY * 1.1;\n            this.__boneCompressedInfo.z = maxZ * 1.1;\n            this.__boneCompressedInfo.w = maxScale;\n            // console.log('getScale are ...');\n            for (var i = 0; i < matrices.length; i++) {\n                var s = matrices[i].getScale();\n                // console.log(s.toString());\n                var q = (_math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_7__[\"default\"].fromMatrix(matrices[i]));\n                q.normalize();\n                var vec2QPacked = _math_MathUtil__WEBPACK_IMPORTED_MODULE_8__[\"MathUtil\"].packNormalizedVec4ToVec2(q.x, q.y, q.z, q.w, 4096);\n                var t = matrices[i].getTranslate();\n                this.__qtArray[i * 4 + 0] = vec2QPacked[0];\n                this.__qtArray[i * 4 + 1] = vec2QPacked[1];\n                var vec2TPacked = _math_MathUtil__WEBPACK_IMPORTED_MODULE_8__[\"MathUtil\"].packNormalizedVec4ToVec2(t.x / this.__boneCompressedInfo.x, t.y / this.__boneCompressedInfo.y, t.z / this.__boneCompressedInfo.z, scales[i] / this.__boneCompressedInfo.w, 4096);\n                this.__qtArray[i * 4 + 2] = vec2TPacked[0];\n                this.__qtArray[i * 4 + 3] = vec2TPacked[1];\n            }\n        }\n        else {\n            flatMatrices = [];\n            for (var i = 0; i < matrices.length; i++) {\n                Array.prototype.push.apply(flatMatrices, matrices[i].flattenAsArray());\n            }\n            if (matrices.length < 4) {\n                var identityMatrices = [];\n                for (var i = 0; i < (4 - matrices.length); i++) {\n                    Array.prototype.push.apply(identityMatrices, [1, 0, 0, 0,\n                        0, 1, 0, 0,\n                        0, 0, 1, 0,\n                        0, 0, 0, 1]);\n                }\n                Array.prototype.push.apply(flatMatrices, identityMatrices);\n            }\n            this.__jointMatrices = flatMatrices;\n        }\n    };\n    Object.defineProperty(SkeletalComponent.prototype, \"jointMatrices\", {\n        get: function () {\n            return this.__jointMatrices;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SkeletalComponent.prototype, \"jointCompressedChanks\", {\n        get: function () {\n            return this.__qtArray;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SkeletalComponent.prototype, \"jointCompressedInfo\", {\n        get: function () {\n            return this.__boneCompressedInfo;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return SkeletalComponent;\n}(_core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (SkeletalComponent);\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].registerComponentClass(SkeletalComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/SkeletalComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/TransformComponent.ts":
/*!*********************************************************!*\
  !*** ./src/foundation/components/TransformComponent.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_Quaternion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n/* harmony import */ var _math_Matrix33__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/Matrix33 */ \"./src/foundation/math/Matrix33.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../math/MutableQuaterion */ \"./src/foundation/math/MutableQuaterion.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../math/MutableMatrix33 */ \"./src/foundation/math/MutableMatrix33.ts\");\n/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import AnimationComponent from './AnimationComponent';\nvar TransformComponent = /** @class */ (function (_super) {\n    __extends(TransformComponent, _super);\n    function TransformComponent(entityUid, componentSid, entityComponent) {\n        var _this = _super.call(this, entityUid, componentSid, entityComponent) || this;\n        _this._translate = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dummy();\n        _this._rotate = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dummy();\n        _this._scale = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dummy();\n        _this._quaternion = _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_11__[\"default\"].dummy();\n        _this._matrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].dummy();\n        _this._invMatrix = _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        _this._normalMatrix = _math_Matrix33__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dummy();\n        _this.__toUpdateAllTransform = true;\n        _this._updateCount = 0;\n        _this.__updateCountAtLastLogic = 0;\n        // dependencies\n        _this._dependentAnimationComponentId = 0;\n        var thisClass = TransformComponent;\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'translate', _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, [0, 0, 0]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'rotate', _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, [0, 0, 0]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'scale', _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, [1, 1, 1]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'quaternion', _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_11__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, [0, 0, 0, 1]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'matrix', _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'invMatrix', _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n        _this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'normalMatrix', _math_Matrix33__WEBPACK_IMPORTED_MODULE_2__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, [1, 0, 0, 0, 1, 0, 0, 0, 1]);\n        _this.submitToAllocation();\n        _this._is_translate_updated = true;\n        _this._is_euler_angles_updated = true;\n        _this._is_scale_updated = true;\n        _this._is_quaternion_updated = true;\n        _this._is_trs_matrix_updated = true;\n        _this._is_inverse_trs_matrix_updated = true;\n        _this._is_normal_trs_matrix_updated = true;\n        _this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_12__[\"ProcessStage\"].Logic);\n        return _this;\n    }\n    Object.defineProperty(TransformComponent, \"renderedPropertyCount\", {\n        get: function () {\n            return null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TransformComponent, \"componentTID\", {\n        get: function () {\n            return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__[\"WellKnownComponentTIDs\"].TransformComponentTID;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TransformComponent.prototype.$logic = function () {\n        if (this.__updateCountAtLastLogic !== this._updateCount) {\n            var sceneGraphComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_9__[\"default\"]);\n            sceneGraphComponent.setWorldMatrixDirty();\n            this.__updateCountAtLastLogic = this._updateCount;\n        }\n    };\n    Object.defineProperty(TransformComponent.prototype, \"toUpdateAllTransform\", {\n        get: function () {\n            return this.__toUpdateAllTransform;\n        },\n        set: function (flag) {\n            this.__toUpdateAllTransform = flag;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TransformComponent.prototype._needUpdate = function () {\n        this._updateCount++;\n    };\n    Object.defineProperty(TransformComponent.prototype, \"translate\", {\n        get: function () {\n            return this.translateInner.clone();\n        },\n        set: function (vec) {\n            this._translate.v[0] = vec.v[0];\n            this._translate.v[1] = vec.v[1];\n            this._translate.v[2] = vec.v[2];\n            this._is_translate_updated = true;\n            this._is_trs_matrix_updated = false;\n            this._is_inverse_trs_matrix_updated = false;\n            this._is_normal_trs_matrix_updated = false;\n            this.__updateTransform();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TransformComponent.prototype, \"translateInner\", {\n        get: function () {\n            if (this._is_translate_updated) {\n                return this._translate;\n            }\n            else if (this._is_trs_matrix_updated) {\n                this._translate.v[0] = this._matrix.m03;\n                this._translate.v[1] = this._matrix.m13;\n                this._translate.v[2] = this._matrix.m23;\n                this._is_translate_updated = true;\n            }\n            return this._translate;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TransformComponent.prototype, \"rotate\", {\n        get: function () {\n            return this.rotateInner.clone();\n        },\n        set: function (vec) {\n            this._rotate.v[0] = vec.v[0];\n            this._rotate.v[1] = vec.v[1];\n            this._rotate.v[2] = vec.v[2];\n            this._is_euler_angles_updated = true;\n            this._is_quaternion_updated = false;\n            this._is_trs_matrix_updated = false;\n            this._is_inverse_trs_matrix_updated = false;\n            this._is_normal_trs_matrix_updated = false;\n            this.__updateTransform();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TransformComponent.prototype, \"rotateInner\", {\n        get: function () {\n            if (this._is_euler_angles_updated) {\n                return this._rotate;\n            }\n            else if (this._is_trs_matrix_updated) {\n                this._rotate = this._matrix.toEulerAngles();\n            }\n            else if (this._is_quaternion_updated) {\n                this._rotate = (new _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this._quaternion)).toEulerAngles();\n            }\n            this._is_euler_angles_updated = true;\n            return this._rotate;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TransformComponent.prototype, \"scale\", {\n        get: function () {\n            return this.scaleInner.clone();\n        },\n        set: function (vec) {\n            this._scale.v[0] = vec.v[0];\n            this._scale.v[1] = vec.v[1];\n            this._scale.v[2] = vec.v[2];\n            this._is_scale_updated = true;\n            this._is_trs_matrix_updated = false;\n            this._is_inverse_trs_matrix_updated = false;\n            this._is_normal_trs_matrix_updated = false;\n            this.__updateTransform();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TransformComponent.prototype, \"scaleInner\", {\n        get: function () {\n            if (this._is_scale_updated) {\n                return this._scale;\n            }\n            else if (this._is_trs_matrix_updated) {\n                var m = this._matrix;\n                this._scale.v[0] = Math.sqrt(m.m00 * m.m00 + m.m01 * m.m01 + m.m02 * m.m02);\n                this._scale.v[1] = Math.sqrt(m.m10 * m.m10 + m.m11 * m.m11 + m.m12 * m.m12);\n                this._scale.v[2] = Math.sqrt(m.m20 * m.m20 + m.m21 * m.m21 + m.m22 * m.m22);\n                this._is_scale_updated = true;\n            }\n            return this._scale;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TransformComponent.prototype, \"quaternion\", {\n        get: function () {\n            return this.quaternionInner.clone();\n        },\n        set: function (quat) {\n            this._quaternion.v[0] = quat.v[0];\n            this._quaternion.v[1] = quat.v[1];\n            this._quaternion.v[2] = quat.v[2];\n            this._quaternion.v[3] = quat.v[3];\n            this._is_quaternion_updated = true;\n            this._is_euler_angles_updated = false;\n            this._is_trs_matrix_updated = false;\n            this._is_inverse_trs_matrix_updated = false;\n            this._is_normal_trs_matrix_updated = false;\n            this.__updateTransform();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TransformComponent.prototype, \"quaternionInner\", {\n        get: function () {\n            if (this._is_quaternion_updated) {\n                return this._quaternion;\n            }\n            else if (!this._is_quaternion_updated) {\n                if (this._is_trs_matrix_updated) {\n                    this._is_quaternion_updated = true;\n                    this._quaternion.fromMatrix(this._matrix);\n                    return this._quaternion;\n                }\n                else if (this._is_euler_angles_updated) {\n                    TransformComponent.__tmpMat_quaternionInner.rotateXYZ(this._rotate.x, this._rotate.y, this._rotate.z);\n                    this._is_quaternion_updated = true;\n                    this._quaternion.fromMatrix(TransformComponent.__tmpMat_quaternionInner);\n                    return this._quaternion;\n                }\n            }\n            return this._quaternion;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TransformComponent.prototype, \"matrix\", {\n        get: function () {\n            return this.matrixInner.clone();\n        },\n        set: function (mat) {\n            this._matrix = new _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"](mat, true);\n            this._is_trs_matrix_updated = true;\n            this._is_translate_updated = false;\n            this._is_euler_angles_updated = false;\n            this._is_quaternion_updated = false;\n            this._is_scale_updated = false;\n            this._is_inverse_trs_matrix_updated = false;\n            this._is_normal_trs_matrix_updated = false;\n            this.__updateTransform();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TransformComponent.prototype, \"matrixInner\", {\n        get: function () {\n            if (this._is_trs_matrix_updated) {\n                return this._matrix;\n            }\n            // Clear and set Scale\n            var scale = this.scaleInner;\n            var n00 = scale.v[0];\n            // const n01 = 0;\n            // const n02 = 0;\n            // const n03 = 0;\n            // const n10 = 0;\n            var n11 = scale.v[1];\n            // const n12 = 0;\n            // const n13 = 0;\n            // const n20 = 0;\n            // const n21 = 0;\n            var n22 = scale.v[2];\n            // const n23 = 0;\n            // const n30 = 0;\n            // const n31 = 0;\n            // const n32 = 0;\n            // const n33 = 1;\n            var q = this.quaternionInner;\n            var sx = q.v[0] * q.v[0];\n            var sy = q.v[1] * q.v[1];\n            var sz = q.v[2] * q.v[2];\n            var cx = q.v[1] * q.v[2];\n            var cy = q.v[0] * q.v[2];\n            var cz = q.v[0] * q.v[1];\n            var wx = q.v[3] * q.v[0];\n            var wy = q.v[3] * q.v[1];\n            var wz = q.v[3] * q.v[2];\n            var m00 = 1.0 - 2.0 * (sy + sz);\n            var m01 = 2.0 * (cz - wz);\n            var m02 = 2.0 * (cy + wy);\n            // const m03 = 0.0;\n            var m10 = 2.0 * (cz + wz);\n            var m11 = 1.0 - 2.0 * (sx + sz);\n            var m12 = 2.0 * (cx - wx);\n            // const m13 = 0.0;\n            var m20 = 2.0 * (cy - wy);\n            var m21 = 2.0 * (cx + wx);\n            var m22 = 1.0 - 2.0 * (sx + sy);\n            // const m23 = 0.0;\n            // const m30 = 0.0;\n            // const m31 = 0.0;\n            // const m32 = 0.0;\n            // const m33 = 1.0;\n            var translate = this.translateInner;\n            // TranslateMatrix * RotateMatrix * ScaleMatrix\n            this._matrix.m00 = m00 * n00;\n            this._matrix.m01 = m01 * n11;\n            this._matrix.m02 = m02 * n22;\n            this._matrix.m03 = translate.v[0];\n            this._matrix.m10 = m10 * n00;\n            this._matrix.m11 = m11 * n11;\n            this._matrix.m12 = m12 * n22;\n            this._matrix.m13 = translate.v[1];\n            this._matrix.m20 = m20 * n00;\n            this._matrix.m21 = m21 * n11;\n            this._matrix.m22 = m22 * n22;\n            this._matrix.m23 = translate.v[2];\n            this._matrix.m30 = 0;\n            this._matrix.m31 = 0;\n            this._matrix.m32 = 0;\n            this._matrix.m33 = 1;\n            // const rotateMatrix = new Matrix44(this.quaternion);\n            // const matrix = MutableMatrix44.multiply(rotateMatrix, Matrix44.scale(this.scale));\n            // matrix.m03 = this.translate.x;\n            // matrix.m13 = this.translate.y;\n            // matrix.m23 = this.translate.z;\n            //this._matrix.copyComponents(matrix);\n            this._is_trs_matrix_updated = true;\n            return this._matrix;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TransformComponent.prototype, \"inverseMatrix\", {\n        get: function () {\n            return this.inverseMatrixInner.clone();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TransformComponent.prototype, \"inverseMatrixInner\", {\n        get: function () {\n            if (!this._is_inverse_trs_matrix_updated) {\n                this._invMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].invert(this.matrixInner);\n                this._is_inverse_trs_matrix_updated = true;\n            }\n            return this._invMatrix;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TransformComponent.prototype, \"normalMatrix\", {\n        get: function () {\n            return this.normalMatrixInner.clone();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TransformComponent.prototype, \"normalMatrixInner\", {\n        get: function () {\n            if (!this._is_normal_trs_matrix_updated) {\n                _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"].invertTo(this.matrixInner, TransformComponent.invertedMatrix44);\n                var mat = TransformComponent.invertedMatrix44.transpose();\n                TransformComponent.returnMatrix33.m00 = mat.m00;\n                TransformComponent.returnMatrix33.m01 = mat.m01;\n                TransformComponent.returnMatrix33.m02 = mat.m02;\n                TransformComponent.returnMatrix33.m10 = mat.m10;\n                TransformComponent.returnMatrix33.m11 = mat.m11;\n                TransformComponent.returnMatrix33.m12 = mat.m12;\n                TransformComponent.returnMatrix33.m20 = mat.m20;\n                TransformComponent.returnMatrix33.m21 = mat.m21;\n                TransformComponent.returnMatrix33.m22 = mat.m22;\n                this._normalMatrix = TransformComponent.returnMatrix33;\n                this._is_normal_trs_matrix_updated = true;\n            }\n            return this._normalMatrix;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Set multiple transform information at once. By using this method,\n     * we reduce the cost of automatically updating other transform components inside this class.\n     * This method may be useful for animation processing and so on.\n     *\n     * The transform components of these arguments must not be mutually discrepant.\n     * for example. The transform components of matrix argument (translate, rotate/quaternion, scale)\n     * must be equal to translate, rotate, scale, quaternion arguments.\n     * And both rotate and quaternion arguments must be same rotation.\n     * If there is an argument passed with null or undefined, it is interpreted as unchanged.\n     *\n     * @param {*} translate\n     * @param {*} rotate\n     * @param {*} scale\n     * @param {*} quaternion\n     * @param {*} matrix\n     */\n    TransformComponent.prototype.setTransform = function (translate, rotate, scale, quaternion, matrix) {\n        this._is_trs_matrix_updated = false;\n        this._is_inverse_trs_matrix_updated = false;\n        this._is_normal_trs_matrix_updated = false;\n        // Matrix\n        if (matrix != null) {\n            this._matrix = new _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"](matrix);\n            this._is_trs_matrix_updated = true;\n            this._is_translate_updated = false;\n            this._is_euler_angles_updated = false;\n            this._is_quaternion_updated = false;\n            this._is_scale_updated = false;\n        }\n        // Translate\n        if (translate != null) {\n            this._translate = translate.clone();\n            this._is_translate_updated = true;\n        }\n        // Roatation\n        if (rotate != null && quaternion != null) {\n            this._rotate = rotate.clone();\n            this._quaternion = new _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_11__[\"default\"](quaternion);\n            this._is_euler_angles_updated = true;\n            this._is_quaternion_updated = true;\n        }\n        else if (rotate != null) {\n            this._rotate = rotate.clone();\n            this._is_euler_angles_updated = true;\n            this._is_quaternion_updated = false;\n        }\n        else if (quaternion != null) {\n            this._quaternion = new _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_11__[\"default\"](quaternion);\n            this._is_euler_angles_updated = false;\n            this._is_quaternion_updated = true;\n        }\n        // Scale\n        if (scale != null) {\n            this._scale = scale.clone();\n            this._is_scale_updated = true;\n        }\n        this.__updateTransform();\n    };\n    TransformComponent.prototype.__updateTransform = function () {\n        if (this.__toUpdateAllTransform) {\n            this.__updateRotation();\n            this.__updateTranslate();\n            this.__updateScale();\n        }\n        //this.__updateMatrix();\n        this._needUpdate();\n    };\n    TransformComponent.prototype.__updateRotation = function () {\n        if (this._is_euler_angles_updated && !this._is_quaternion_updated) {\n            TransformComponent.__tmpMat_updateRotation.rotateXYZ(this._rotate.x, this._rotate.y, this._rotate.z);\n            this._quaternion.fromMatrix(TransformComponent.__tmpMat_updateRotation);\n            this._is_quaternion_updated = true;\n        }\n        else if (!this._is_euler_angles_updated && this._is_quaternion_updated) {\n            _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"].fromQuaternionTo(this._quaternion, TransformComponent.updateRotationMatrix44);\n            TransformComponent.updateRotationMatrix44.toEulerAnglesTo(TransformComponent.updateRotationVector3);\n            this._rotate = TransformComponent.updateRotationVector3;\n            this._is_euler_angles_updated = true;\n        }\n        else if (!this._is_euler_angles_updated && !this._is_quaternion_updated && this._is_trs_matrix_updated) {\n            var m = this._matrix;\n            this._quaternion.fromMatrix(m);\n            this._is_quaternion_updated = true;\n            this._rotate = m.toEulerAngles();\n            this._is_euler_angles_updated = true;\n        }\n    };\n    TransformComponent.prototype.__updateTranslate = function () {\n        if (!this._is_translate_updated && this._is_trs_matrix_updated) {\n            var m = this._matrix;\n            this._translate.v[0] = m.m03;\n            this._translate.v[1] = m.m13;\n            this._translate.v[2] = m.m23;\n            this._is_translate_updated = true;\n        }\n    };\n    TransformComponent.prototype.__updateScale = function () {\n        if (!this._is_scale_updated && this._is_trs_matrix_updated) {\n            var m = this._matrix;\n            this._scale.v[0] = Math.sqrt(m.m00 * m.m00 + m.m01 * m.m01 + m.m02 * m.m02);\n            this._scale.v[1] = Math.sqrt(m.m10 * m.m10 + m.m11 * m.m11 + m.m12 * m.m12);\n            this._scale.v[2] = Math.sqrt(m.m20 * m.m20 + m.m21 * m.m21 + m.m22 * m.m22);\n            this._is_scale_updated = true;\n        }\n    };\n    TransformComponent.prototype.__updateMatrix = function () {\n        if (!this._is_trs_matrix_updated && this._is_translate_updated && this._is_quaternion_updated && this._is_scale_updated) {\n            var rotationMatrix = new _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this._quaternion);\n            var scale = this._scale;\n            this._matrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].multiply(rotationMatrix, _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"].scale(scale));\n            var translateVec = this._translate;\n            this._matrix.m03 = translateVec.x;\n            this._matrix.m13 = translateVec.y;\n            this._matrix.m23 = translateVec.z;\n            this._is_trs_matrix_updated = true;\n        }\n    };\n    TransformComponent.prototype.setPropertiesFromJson = function (arg) {\n        var json = arg;\n        if (typeof arg === \"string\") {\n            json = JSON.parse(arg);\n        }\n        for (var key in json) {\n            if (json.hasOwnProperty(key) && key in this) {\n                if (key === \"quaternion\") {\n                    this[key] = new _math_Quaternion__WEBPACK_IMPORTED_MODULE_1__[\"default\"](json[key]);\n                }\n                else if (key === 'matrix') {\n                    this[key] = new _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"](json[key]);\n                }\n                else {\n                    this[key] = new _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](json[key]);\n                }\n            }\n        }\n    };\n    TransformComponent.prototype.setRotationFromNewUpAndFront = function (UpVec, FrontVec) {\n        var yDir = UpVec;\n        var xDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cross(yDir, FrontVec);\n        var zDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cross(xDir, yDir);\n        var rotateMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].identity();\n        rotateMatrix.m00 = xDir.x;\n        rotateMatrix.m10 = xDir.y;\n        rotateMatrix.m20 = xDir.z;\n        rotateMatrix.m01 = yDir.x;\n        rotateMatrix.m11 = yDir.y;\n        rotateMatrix.m21 = yDir.z;\n        rotateMatrix.m02 = zDir.x;\n        rotateMatrix.m12 = zDir.y;\n        rotateMatrix.m22 = zDir.z;\n        this.rotateMatrix44 = rotateMatrix;\n    };\n    TransformComponent.prototype.headToDirection = function (fromVec, toVec) {\n        var fromDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(fromVec);\n        var toDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(toVec);\n        var rotationDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cross(fromDir, toDir);\n        var cosTheta = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dotProduct(fromDir, toDir);\n        var theta = Math.acos(cosTheta);\n        this.quaternion = _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_11__[\"default\"].axisAngle(rotationDir, theta);\n    };\n    Object.defineProperty(TransformComponent.prototype, \"rotateMatrix44\", {\n        get: function () {\n            return new _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this.quaternion);\n        },\n        set: function (rotateMatrix) {\n            this.quaternion = _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_11__[\"default\"].fromMatrix(rotateMatrix);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TransformComponent.__tmpMat_updateRotation = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].identity();\n    TransformComponent.__tmpMat_quaternionInner = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].identity();\n    TransformComponent.returnMatrix33 = new _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_13__[\"default\"]([0, 0, 0, 0, 0, 0, 0, 0, 0]);\n    TransformComponent.invertedMatrix44 = new _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"]([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n    TransformComponent.updateRotationMatrix44 = new _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"]([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n    TransformComponent.updateRotationVector3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_14__[\"default\"].zero();\n    return TransformComponent;\n}(_core_Component__WEBPACK_IMPORTED_MODULE_4__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (TransformComponent);\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].registerComponentClass(TransformComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/TransformComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/WellKnownComponentTIDs.ts":
/*!*************************************************************!*\
  !*** ./src/foundation/components/WellKnownComponentTIDs.ts ***!
  \*************************************************************/
/*! exports provided: WellKnownComponentTIDs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WellKnownComponentTIDs\", function() { return WellKnownComponentTIDs; });\nvar AnimationComponentTID = 1;\nvar TransformComponentTID = 2;\nvar SceneGraphComponentTID = 3;\nvar MeshComponentTID = 4;\nvar MeshRendererComponentTID = 5;\nvar CameraControllerComponentTID = 6;\nvar CameraComponentTID = 7;\nvar LightComponentTID = 8;\nvar SkeletalComponentTID = 9;\nvar SparkGearComponentTID = 10;\nvar EffekseerComponentTID = 11;\nvar maxWellKnownTidNumber = 11;\nvar WellKnownComponentTIDs = Object.freeze({\n    AnimationComponentTID: AnimationComponentTID,\n    TransformComponentTID: TransformComponentTID,\n    SceneGraphComponentTID: SceneGraphComponentTID,\n    MeshComponentTID: MeshComponentTID,\n    MeshRendererComponentTID: MeshRendererComponentTID,\n    CameraControllerComponentTID: CameraControllerComponentTID,\n    CameraComponentTID: CameraComponentTID,\n    LightComponentTID: LightComponentTID,\n    SkeletalComponentTID: SkeletalComponentTID,\n    SparkGearComponentTID: SparkGearComponentTID,\n    EffekseerComponentTID: EffekseerComponentTID,\n    maxWellKnownTidNumber: maxWellKnownTidNumber\n});\n\n\n//# sourceURL=webpack:///./src/foundation/components/WellKnownComponentTIDs.ts?");

/***/ }),

/***/ "./src/foundation/core/Component.ts":
/*!******************************************!*\
  !*** ./src/foundation/core/Component.ts ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _math_RowMajarMatrix44__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/RowMajarMatrix44 */ \"./src/foundation/math/RowMajarMatrix44.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _math_MutableRowMajarMatrix44__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/MutableRowMajarMatrix44 */ \"./src/foundation/math/MutableRowMajarMatrix44.ts\");\nvar __values = (undefined && undefined.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\n\n\n\n\n\n\n\n/**\n * Component is a functional unit that can be added to an Entity instance.\n */\nvar Component = /** @class */ (function () {\n    /**\n     * The constructor of the Component class.\n     * When creating an Component, use the createComponent method of the ComponentRepository class\n     * instead of directly calling this constructor.\n     * @param entityUid Unique ID of the corresponding entity\n     * @param componentSid Scoped ID of the Component\n     * @param entityRepository The instance of the EntityRepository class (Dependency Injection)\n     */\n    function Component(entityUid, componentSid, entityRepository) {\n        var _this = this;\n        this.__currentProcessStage = _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Create;\n        this.__entityUid = entityUid;\n        this._component_sid = componentSid;\n        this.__isAlive = true;\n        var stages = [\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Create,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Load,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Mount,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Logic,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].PreRender,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Render,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Unmount,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Discard\n        ];\n        stages.forEach(function (stage) {\n            if (_this.isExistProcessStageMethod(stage)) {\n                if (Component.__componentsOfProcessStages.get(stage) == null) {\n                    Component.__componentsOfProcessStages.set(stage, new Int32Array(_Config__WEBPACK_IMPORTED_MODULE_4__[\"default\"].maxEntityNumber));\n                    Component.__dirtyOfArrayOfProcessStages.set(stage, false);\n                    Component.__lengthOfArrayOfProcessStages.set(stage, 0);\n                }\n            }\n        });\n        this.__memoryManager = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        this.__entityRepository = entityRepository;\n    }\n    /**\n     * Move to the other stages of process\n     * @param processStage stage of component's process\n     */\n    Component.prototype.moveStageTo = function (processStage) {\n        Component.__dirtyOfArrayOfProcessStages.set(this.__currentProcessStage, true);\n        Component.__dirtyOfArrayOfProcessStages.set(processStage, true);\n        this.__currentProcessStage = processStage;\n    };\n    Object.defineProperty(Component, \"componentTID\", {\n        /**\n         * Get the Type ID of the Component\n         */\n        get: function () {\n            return 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Component.prototype, \"componentSID\", {\n        /**\n         * Get the Scoped ID of the Component\n         */\n        get: function () {\n            return this._component_sid;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Component.prototype, \"entityUID\", {\n        /**\n         * Get the unique ID of the entity corresponding to the component\n         */\n        get: function () {\n            return this.__entityUid;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Component.prototype, \"currentProcessStage\", {\n        get: function () {\n            return this.__currentProcessStage;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Component.isExistProcessStageMethod = function (componentType, processStage, componentRepository) {\n        var component = componentRepository.getComponent(componentType, 0);\n        if (component == null) {\n            return false;\n        }\n        if (component[processStage.getMethodName()] == null) {\n            return false;\n        }\n        return true;\n    };\n    Component.prototype.isExistProcessStageMethod = function (processStage) {\n        if (this[processStage.getMethodName()] == null) {\n            return false;\n        }\n        return true;\n    };\n    /**\n     * Process the components\n     * @param param0 params\n     */\n    Component.process = function (_a) {\n        var componentType = _a.componentType, processStage = _a.processStage, processApproach = _a.processApproach, componentRepository = _a.componentRepository, strategy = _a.strategy, renderPass = _a.renderPass;\n        if (!Component.isExistProcessStageMethod(componentType, processStage, componentRepository)) {\n            return;\n        }\n        var array = this.__componentsOfProcessStages.get(processStage);\n        for (var i = 0; i < array.length; ++i) {\n            if (array[i] === Component.invalidComponentSID) {\n                break;\n            }\n            var componentSid = array[i];\n            var component = componentRepository.getComponent(componentType, componentSid);\n            component[processStage.getMethodName()]({\n                processStage: processStage,\n                processApproach: processApproach,\n                strategy: strategy,\n                renderPass: renderPass\n            });\n        }\n    };\n    Component.updateComponentsOfEachProcessStage = function (componentClass, processStage, componentRepository, renderPass) {\n        if (!Component.isExistProcessStageMethod(componentClass, processStage, componentRepository)) {\n            return;\n        }\n        var dirty = Component.__componentsOfProcessStages.get(processStage);\n        if (dirty) {\n            var method = componentClass['sort_' + processStage.getMethodName()];\n            var components = componentRepository.getComponentsWithType(componentClass);\n            var array = Component.__componentsOfProcessStages.get(processStage);\n            var sids = [];\n            if (method != null) {\n                sids = method(renderPass);\n                for (var i = 0; i < sids.length; i++) {\n                    array[i] = sids[i];\n                }\n            }\n            if (sids.length === 0) {\n                var count = 0;\n                for (var i = 0; i < components.length; ++i) {\n                    var component = components[i];\n                    if (processStage === component.__currentProcessStage) {\n                        array[count++] = component.componentSID;\n                    }\n                }\n                array[count] = Component.invalidComponentSID;\n            }\n        }\n    };\n    Component.getByteLengthSumOfMembers = function (bufferUse, componentClass) {\n        var byteLengthSumOfMembers = this.__byteLengthSumOfMembers.get(componentClass);\n        return byteLengthSumOfMembers.get(bufferUse);\n    };\n    Component.setupBufferView = function () {\n    };\n    Component.prototype.registerDependency = function (component, isMust) {\n    };\n    Component.takeBufferView = function (bufferUse, componentClass, byteLengthSumOfMembers, count) {\n        var buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance().getBuffer(bufferUse);\n        if (!this.__bufferViews.has(componentClass)) {\n            this.__bufferViews.set(componentClass, new Map());\n        }\n        var bufferViews = this.__bufferViews.get(componentClass);\n        if (!bufferViews.has(bufferUse)) {\n            bufferViews.set(bufferUse, buffer.takeBufferView({ byteLengthToNeed: byteLengthSumOfMembers * count, byteStride: 0, isAoS: false }));\n        }\n    };\n    Component.prototype.takeOne = function (memberName, dataClassType, initValues) {\n        if (!this['_' + memberName].isDummy()) {\n            return;\n        }\n        var taken = Component.__accessors.get(this.constructor).get(memberName).takeOne();\n        if (dataClassType === _math_Matrix44__WEBPACK_IMPORTED_MODULE_1__[\"default\"] || dataClassType === _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"]) {\n            this['_' + memberName] = new dataClassType(taken, false, true);\n        }\n        else if (dataClassType === _math_RowMajarMatrix44__WEBPACK_IMPORTED_MODULE_2__[\"default\"] || dataClassType === _math_MutableRowMajarMatrix44__WEBPACK_IMPORTED_MODULE_6__[\"default\"]) {\n            this['_' + memberName] = new dataClassType(taken, true);\n        }\n        else {\n            this['_' + memberName] = new dataClassType(taken);\n        }\n        for (var i = 0; i < this['_' + memberName].v.length; ++i) {\n            this['_' + memberName].v[i] = initValues[i];\n        }\n        return null;\n    };\n    Component.getAccessor = function (memberName, componentClass) {\n        return this.__accessors.get(componentClass).get(memberName);\n    };\n    Component.takeAccessor = function (bufferUse, memberName, componentClass, compositionType, componentType, count) {\n        if (!this.__accessors.has(componentClass)) {\n            this.__accessors.set(componentClass, new Map());\n        }\n        var accessors = this.__accessors.get(componentClass);\n        if (!accessors.has(memberName)) {\n            var bufferViews = this.__bufferViews.get(componentClass);\n            accessors.set(memberName, bufferViews.get(bufferUse).takeAccessor({ compositionType: compositionType, componentType: componentType, count: count }));\n        }\n    };\n    Component.getByteOffsetOfThisComponentTypeInBuffer = function (bufferUse, componentClass) {\n        return this.__bufferViews.get(componentClass).get(bufferUse).byteOffset;\n    };\n    Component.getByteOffsetOfFirstOfThisMemberInBuffer = function (memberName, componentClass) {\n        return this.__accessors.get(componentClass).get(memberName).byteOffsetInBuffer;\n    };\n    Component.getByteOffsetOfFirstOfThisMemberInBufferView = function (memberName, componentClass) {\n        return this.__accessors.get(componentClass).get(memberName).byteOffsetInBufferView;\n    };\n    Component.getCompositionTypeOfMember = function (memberName, componentClass) {\n        var memberInfoArray = this.__memberInfo.get(componentClass);\n        var info = memberInfoArray.find(function (info) {\n            return info.memberName === memberName;\n        });\n        if (info != null) {\n            return info.compositionType;\n        }\n        else {\n            return null;\n        }\n    };\n    Component.getComponentTypeOfMember = function (memberName, componentClass) {\n        var memberInfoArray = this.__memberInfo.get(componentClass);\n        var info = memberInfoArray.find(function (info) {\n            return info.memberName === memberName;\n        });\n        if (info != null) {\n            return info.componentType;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * Register a member field of component class for memory allocation.\n     * @param bufferUse purpose type of buffer use\n     * @param memberName the name of member field\n     * @param dataClassType a class of data\n     * @param componentType a type of number\n     * @param initValues a initial value\n     */\n    Component.prototype.registerMember = function (bufferUse, memberName, dataClassType, componentType, initValues) {\n        if (!Component.__memberInfo.has(this.constructor)) {\n            Component.__memberInfo.set(this.constructor, []);\n        }\n        var memberInfoArray = Component.__memberInfo.get(this.constructor);\n        memberInfoArray.push({ bufferUse: bufferUse, memberName: memberName, dataClassType: dataClassType,\n            compositionType: dataClassType.compositionType, componentType: componentType, initValues: initValues });\n    };\n    /**\n     * Allocate memory of self member fields\n     * @param count a number of entities to need allocate\n     */\n    Component.prototype.submitToAllocation = function (count) {\n        var _this = this;\n        if (count === void 0) { count = _Config__WEBPACK_IMPORTED_MODULE_4__[\"default\"].maxEntityNumber; }\n        var e_1, _a, e_2, _b, e_3, _c;\n        var componentClass = this.constructor;\n        var memberInfoArray = Component.__memberInfo.get(componentClass);\n        if (this._component_sid === 0) {\n            if (!Component.__members.has(componentClass)) {\n                Component.__members.set(componentClass, new Map());\n            }\n            var member_1 = Component.__members.get(componentClass);\n            memberInfoArray.forEach(function (info) {\n                member_1.set(info.bufferUse, []);\n            });\n            memberInfoArray.forEach(function (info) {\n                member_1.get(info.bufferUse).push(info);\n            });\n            var _loop_1 = function (bufferUse) {\n                var infoArray = member_1.get(bufferUse);\n                if (!Component.__byteLengthSumOfMembers.has(componentClass)) {\n                    Component.__byteLengthSumOfMembers.set(componentClass, new Map());\n                }\n                var byteLengthSumOfMembers = Component.__byteLengthSumOfMembers.get(componentClass);\n                if (!byteLengthSumOfMembers.has(bufferUse)) {\n                    byteLengthSumOfMembers.set(bufferUse, 0);\n                }\n                infoArray.forEach(function (info) {\n                    byteLengthSumOfMembers.set(bufferUse, byteLengthSumOfMembers.get(bufferUse) +\n                        info.compositionType.getNumberOfComponents() * info.componentType.getSizeInBytes());\n                });\n                if (infoArray.length > 0) {\n                    Component.takeBufferView(bufferUse, componentClass, byteLengthSumOfMembers.get(bufferUse), count);\n                }\n            };\n            try {\n                // take a BufferView for all entities for each member fields.\n                for (var _d = __values(member_1.keys()), _e = _d.next(); !_e.done; _e = _d.next()) {\n                    var bufferUse = _e.value;\n                    _loop_1(bufferUse);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            try {\n                // take a Accessor for all entities for each member fields (same as BufferView)\n                for (var _f = __values(member_1.keys()), _g = _f.next(); !_g.done; _g = _f.next()) {\n                    var bufferUse = _g.value;\n                    var infoArray = member_1.get(bufferUse);\n                    infoArray.forEach(function (info) {\n                        Component.takeAccessor(info.bufferUse, info.memberName, componentClass, info.compositionType, info.componentType, count);\n                    });\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n        var member = Component.__members.get(componentClass);\n        try {\n            // take a field value allocation for each entity for each member field\n            for (var _h = __values(member.keys()), _j = _h.next(); !_j.done; _j = _h.next()) {\n                var bufferUse = _j.value;\n                var infoArray = member.get(bufferUse);\n                infoArray.forEach(function (info) {\n                    _this.takeOne(info.memberName, info.dataClassType, info.initValues);\n                });\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_j && !_j.done && (_c = _h.return)) _c.call(_h);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    };\n    Object.defineProperty(Component.prototype, \"entity\", {\n        get: function () {\n            return this.__entityRepository.getEntity(this.__entityUid);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Component.invalidComponentSID = -1;\n    Component.__componentsOfProcessStages = new Map();\n    Component.__lengthOfArrayOfProcessStages = new Map();\n    Component.__dirtyOfArrayOfProcessStages = new Map();\n    Component.__bufferViews = new Map();\n    Component.__accessors = new Map();\n    Component.__byteLengthSumOfMembers = new Map();\n    Component.__memberInfo = new Map();\n    Component.__members = new Map();\n    return Component;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component);\n\n\n//# sourceURL=webpack:///./src/foundation/core/Component.ts?");

/***/ }),

/***/ "./src/foundation/core/ComponentRepository.ts":
/*!****************************************************!*\
  !*** ./src/foundation/core/ComponentRepository.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _misc_IsUtil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/IsUtil */ \"./src/foundation/misc/IsUtil.ts\");\n/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Config */ \"./src/foundation/core/Config.ts\");\nvar __values = (undefined && undefined.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\n\n\n\nvar ComponentRepository = /** @class */ (function () {\n    function ComponentRepository() {\n        this.__component_sid_count_map = new Map();\n        this.__components = new Map();\n    }\n    ComponentRepository.registerComponentClass = function (componentClass) {\n        var thisClass = ComponentRepository;\n        thisClass.__componentClasses.set(componentClass.componentTID, componentClass);\n    };\n    ComponentRepository.unregisterComponentClass = function (componentTID) {\n        var thisClass = ComponentRepository;\n        thisClass.__componentClasses.delete(componentTID);\n    };\n    ComponentRepository.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new ComponentRepository();\n        }\n        return this.__instance;\n    };\n    ComponentRepository.getComponentClass = function (componentTid) {\n        return this.__componentClasses.get(componentTid);\n    };\n    ComponentRepository.prototype.createComponent = function (componentTid, entityUid, entityRepository) {\n        var thisClass = ComponentRepository;\n        var componentClass = thisClass.__componentClasses.get(componentTid);\n        if (componentClass != null) {\n            var component_sid_count = this.__component_sid_count_map.get(componentTid);\n            if (!_misc_IsUtil__WEBPACK_IMPORTED_MODULE_1__[\"default\"].exist(component_sid_count)) {\n                this.__component_sid_count_map.set(componentTid, 0);\n                component_sid_count = _Component__WEBPACK_IMPORTED_MODULE_0__[\"default\"].invalidComponentSID;\n            }\n            this.__component_sid_count_map.set(componentTid, ++component_sid_count);\n            var component = new componentClass(entityUid, component_sid_count, entityRepository);\n            if (!this.__components.has(componentTid)) {\n                this.__components.set(componentTid, []);\n            }\n            var array = this.__components.get(componentTid);\n            if (array != null) {\n                array[component.componentSID] = component;\n                return component;\n            }\n        }\n        return null;\n    };\n    ComponentRepository.prototype.getComponent = function (componentClass, componentSid) {\n        return this.getComponentFromComponentTID(componentClass.componentTID, componentSid);\n    };\n    ComponentRepository.prototype.getComponentFromComponentTID = function (componentTid, componentSid) {\n        var map = this.__components.get(componentTid);\n        if (map != null) {\n            var component = map[componentSid];\n            if (component != null) {\n                return map[componentSid];\n            }\n            else {\n                return null;\n            }\n        }\n        return null;\n    };\n    ComponentRepository.getMemoryBeginIndex = function (componentTid) {\n        var memoryBeginIndex = 0;\n        for (var i = 0; i < componentTid; i++) {\n            var componentClass = ComponentRepository.__componentClasses.get(i);\n            if (componentClass != null) {\n                var sizeOfComponent = componentClass.sizeOfThisComponent;\n                var maxEntityNumber = _Config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].maxEntityNumber;\n                memoryBeginIndex += sizeOfComponent * maxEntityNumber;\n            }\n        }\n        return memoryBeginIndex;\n    };\n    ComponentRepository.prototype.getComponentsWithType = function (componentType) {\n        var components = this.__components.get(componentType.componentTID);\n        if (components == null) {\n            return [];\n        }\n        return components;\n    };\n    ComponentRepository.prototype.getComponentTIDs = function () {\n        var e_1, _a;\n        var indices = [];\n        try {\n            for (var _b = __values(this.__components.keys()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var type = _c.value;\n                indices.push(type);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        indices.sort(function (a, b) {\n            if (a < b)\n                return -1;\n            if (a > b)\n                return 1;\n            return 0;\n        });\n        return indices;\n    };\n    ComponentRepository.__componentClasses = new Map();\n    return ComponentRepository;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (ComponentRepository);\n\n\n//# sourceURL=webpack:///./src/foundation/core/ComponentRepository.ts?");

/***/ }),

/***/ "./src/foundation/core/Config.ts":
/*!***************************************!*\
  !*** ./src/foundation/core/Config.ts ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar maxEntityNumber = 5000;\nvar maxLightNumberInShader = 4;\n/* harmony default export */ __webpack_exports__[\"default\"] = ({ maxEntityNumber: maxEntityNumber, maxLightNumberInShader: maxLightNumberInShader });\n\n\n//# sourceURL=webpack:///./src/foundation/core/Config.ts?");

/***/ }),

/***/ "./src/foundation/core/Entity.ts":
/*!***************************************!*\
  !*** ./src/foundation/core/Entity.ts ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _components_TransformComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/TransformComponent */ \"./src/foundation/components/TransformComponent.ts\");\n/* harmony import */ var _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _RnObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RnObject */ \"./src/foundation/core/RnObject.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n/**\n * The Rhodonite Entity Class which are an entities that exists in space.\n * Entity can acquire those functions by having components on themselves.\n */\nvar Entity = /** @class */ (function (_super) {\n    __extends(Entity, _super);\n    /**\n     * The constructor of the Entity class.\n     * When creating an Entity, use the createEntity method of the EntityRepository class\n     * instead of directly calling this constructor.\n     * @param entityUID The unique ID of the entity\n     * @param isAlive Whether this entity alive or not\n     * @param entityComponent The instance of EntityComponent (Dependency Injection)\n     */\n    function Entity(entityUID, isAlive, entityComponent) {\n        var _this = _super.call(this) || this;\n        _this.__entity_uid = entityUID;\n        _this.__isAlive = isAlive;\n        _this.__entityRepository = entityComponent;\n        return _this;\n    }\n    Object.defineProperty(Entity.prototype, \"entityUID\", {\n        /**\n         * Get Unique ID of the entity.\n         */\n        get: function () {\n            return this.__entity_uid;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Get the component of the specified type that the entity has\n     * @param componentType\n     */\n    Entity.prototype.getComponent = function (componentType) {\n        var map = this.__entityRepository._components[this.entityUID];\n        if (map != null) {\n            var component = map.get(componentType.componentTID);\n            if (component != null) {\n                return component;\n            }\n            else {\n                return null;\n            }\n        }\n        return null;\n    };\n    /**\n     * Get the TransformComponent of the entity.\n     * It's a shortcut method of getComponent(TransformComponent).\n     */\n    Entity.prototype.getTransform = function () {\n        if (this.__transformComponent == null) {\n            this.__transformComponent = this.getComponent(_components_TransformComponent__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n        }\n        return this.__transformComponent;\n    };\n    /**\n     * Get the SceneGraphComponent of the entity.\n     * It's a shortcut method of getComponent(SceneGraphComponent).\n     */\n    Entity.prototype.getSceneGraph = function () {\n        if (this.__sceneGraphComponent == null) {\n            this.__sceneGraphComponent = this.getComponent(_components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n        }\n        return this.__sceneGraphComponent;\n    };\n    Entity.invalidEntityUID = -1;\n    return Entity;\n}(_RnObject__WEBPACK_IMPORTED_MODULE_2__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (Entity);\n\n\n//# sourceURL=webpack:///./src/foundation/core/Entity.ts?");

/***/ }),

/***/ "./src/foundation/core/EntityRepository.ts":
/*!*************************************************!*\
  !*** ./src/foundation/core/EntityRepository.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Entity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Entity */ \"./src/foundation/core/Entity.ts\");\n/* harmony import */ var _ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\nvar __values = (undefined && undefined.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\n\n\nvar EntityRepository = /** @class */ (function () {\n    function EntityRepository() {\n        this.__entity_uid_count = _Entity__WEBPACK_IMPORTED_MODULE_0__[\"default\"].invalidEntityUID;\n        this.__entities = [];\n        this._components = [];\n        this.__componentRepository = _ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\n    }\n    EntityRepository.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new EntityRepository();\n        }\n        return this.__instance;\n    };\n    EntityRepository.prototype.createEntity = function (componentClasses) {\n        var entity = new _Entity__WEBPACK_IMPORTED_MODULE_0__[\"default\"](++this.__entity_uid_count, true, this);\n        this.__entities[this.__entity_uid_count] = entity;\n        return this.addComponentsToEntity(componentClasses, entity.entityUID);\n    };\n    EntityRepository.prototype.addComponentsToEntity = function (componentClasses, entityUid) {\n        var e_1, _a;\n        var entity = this.getEntity(entityUid);\n        try {\n            for (var componentClasses_1 = __values(componentClasses), componentClasses_1_1 = componentClasses_1.next(); !componentClasses_1_1.done; componentClasses_1_1 = componentClasses_1.next()) {\n                var componentClass = componentClasses_1_1.value;\n                var component = this.__componentRepository.createComponent(componentClass.componentTID, entityUid, this);\n                var map = this._components[entity.entityUID];\n                if (map == null) {\n                    map = new Map();\n                    this._components[entity.entityUID] = map;\n                }\n                if (component != null) {\n                    map.set(componentClass.componentTID, component);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (componentClasses_1_1 && !componentClasses_1_1.done && (_a = componentClasses_1.return)) _a.call(componentClasses_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return entity;\n    };\n    EntityRepository.prototype.removeComponentsFromEntity = function (componentClasses, entityUid) {\n        var e_2, _a;\n        var entity = this.getEntity(entityUid);\n        try {\n            for (var componentClasses_2 = __values(componentClasses), componentClasses_2_1 = componentClasses_2.next(); !componentClasses_2_1.done; componentClasses_2_1 = componentClasses_2.next()) {\n                var componentClass = componentClasses_2_1.value;\n                var map = this._components[entity.entityUID];\n                if (map == null) {\n                    map = new Map();\n                    this._components[entity.entityUID] = map;\n                }\n                map.delete(componentClass.componentTID);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (componentClasses_2_1 && !componentClasses_2_1.done && (_a = componentClasses_2.return)) _a.call(componentClasses_2);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return entity;\n    };\n    EntityRepository.prototype.getEntity = function (entityUid) {\n        return this.__entities[entityUid];\n    };\n    EntityRepository.prototype.getComponentOfEntity = function (entityUid, componentType) {\n        var entity = this._components[entityUid];\n        var component = null;\n        if (entity != null) {\n            component = entity.get(componentType.componentTID);\n            if (component != null) {\n                return component;\n            }\n            else {\n                return null;\n            }\n        }\n        return component;\n    };\n    EntityRepository.prototype.searchByTags = function (tags) {\n        var e_3, _a;\n        var matchEntites = [];\n        try {\n            for (var _b = __values(this.__entities), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var entity = _c.value;\n                if (entity.matchTagConblied(tags)) {\n                    matchEntites.push(entity);\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return matchEntites;\n    };\n    EntityRepository.prototype.getEntityByUniqueName = function (uniqueName) {\n        var e_4, _a;\n        try {\n            for (var _b = __values(this.__entities), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var entity = _c.value;\n                if (entity.uniqueName === uniqueName) {\n                    return entity;\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        return void 0;\n    };\n    EntityRepository.prototype._getEntities = function () {\n        return this.__entities.concat();\n    };\n    return EntityRepository;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (EntityRepository);\n\n\n//# sourceURL=webpack:///./src/foundation/core/EntityRepository.ts?");

/***/ }),

/***/ "./src/foundation/core/MemoryManager.ts":
/*!**********************************************!*\
  !*** ./src/foundation/core/MemoryManager.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _memory_Buffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../memory/Buffer */ \"./src/foundation/memory/Buffer.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n\n\n/**\n * Usage\n * const mm = MemoryManager.getInstance();\n * this.translate = new Vector3(\n *   mm.assignMem(componentUID, propetyId, entityUID, isRendered)\n * );\n */\nvar MemoryManager = /** @class */ (function () {\n    function MemoryManager() {\n        //__entityMaxCount: number;\n        this.__buffers = {};\n        // BufferForGPUInstanceData\n        {\n            var arrayBuffer = new ArrayBuffer(MemoryManager.bufferWidthLength * MemoryManager.bufferHeightLength /*width*height*/ * 4 /*rgba*/ * 8 /*byte*/);\n            var buffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n                byteLength: arrayBuffer.byteLength,\n                arrayBuffer: arrayBuffer,\n                name: _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__[\"BufferUse\"].GPUInstanceData.toString()\n            });\n            this.__buffers[buffer.name] = buffer;\n        }\n        // BufferForGPUVertexData\n        {\n            var arrayBuffer = new ArrayBuffer(MemoryManager.bufferWidthLength * (MemoryManager.bufferHeightLength + 1) /*width*height*/ * 4 /*rgba*/ * 8 /*byte*/); // 16MB\n            var buffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n                byteLength: arrayBuffer.byteLength,\n                arrayBuffer: arrayBuffer,\n                name: _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__[\"BufferUse\"].GPUVertexData.toString()\n            });\n            this.__buffers[buffer.name] = buffer;\n        }\n        // BufferForUBO\n        {\n            var arrayBuffer = new ArrayBuffer(MemoryManager.bufferWidthLength * (MemoryManager.bufferHeightLength) /*width*height*/ * 4 /*rgba*/ * 8 /*byte*/); //2^14); // 16KB\n            var buffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n                byteLength: arrayBuffer.byteLength,\n                arrayBuffer: arrayBuffer,\n                name: _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__[\"BufferUse\"].UBOGeneric.toString()\n            });\n            this.__buffers[buffer.name] = buffer;\n        }\n        // BufferForCPU\n        {\n            var arrayBuffer = new ArrayBuffer(MemoryManager.bufferWidthLength * MemoryManager.bufferHeightLength /*width*height*/ * 4 /*rgba*/ * 8 /*byte*/);\n            var buffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n                byteLength: arrayBuffer.byteLength,\n                arrayBuffer: arrayBuffer,\n                name: _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__[\"BufferUse\"].CPUGeneric.toString()\n            });\n            this.__buffers[buffer.name] = buffer;\n        }\n    }\n    MemoryManager.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new MemoryManager();\n        }\n        return this.__instance;\n    };\n    MemoryManager.prototype.getBuffer = function (bufferUse) {\n        return this.__buffers[bufferUse.toString()];\n    };\n    Object.defineProperty(MemoryManager, \"bufferWidthLength\", {\n        get: function () {\n            return MemoryManager.__bufferWidthLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MemoryManager, \"bufferHeightLength\", {\n        get: function () {\n            return MemoryManager.__bufferHeightLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MemoryManager.__bufferWidthLength = Math.pow(2, 10);\n    MemoryManager.__bufferHeightLength = Math.pow(2, 10);\n    return MemoryManager;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (MemoryManager);\n\n\n//# sourceURL=webpack:///./src/foundation/core/MemoryManager.ts?");

/***/ }),

/***/ "./src/foundation/core/RnObject.ts":
/*!*****************************************!*\
  !*** ./src/foundation/core/RnObject.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar RnObject = /** @class */ (function () {\n    function RnObject() {\n        this.__objectUid = -1;\n        this.__tags = {}; // Tag string allows alphabet, digit and underscore (_) only\n        this.__conbinedTagString = ''; // Tag string allows alphabet, digit and underscore (_) only\n        this.__objectUid = ++RnObject.currentMaxObjectCount;\n        this.__uniqueName = 'entity_of_uid_' + this.__objectUid;\n        RnObject.__uniqueNames[this.__objectUid] = this.__uniqueName;\n    }\n    Object.defineProperty(RnObject.prototype, \"objectUid\", {\n        get: function () {\n            return this.__objectUid;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Try to set a unique name of the entity.\n     * @param name\n     * @param toAddNameIfConflict If true, force to add name string to the current unique name string. If false, give up to change name.\n     */\n    RnObject.prototype.tryToSetUniqueName = function (name, toAddNameIfConflict) {\n        if (RnObject.__uniqueNames.indexOf(name) !== -1) {\n            // Conflict\n            if (toAddNameIfConflict) {\n                var newName = name + '_(' + this.__uniqueName + ')';\n                if (RnObject.__uniqueNames.indexOf(newName) === -1) {\n                    this.__uniqueName = newName;\n                    RnObject.__uniqueNames[this.__objectUid] = this.__uniqueName;\n                    return true;\n                }\n            }\n            return false;\n        }\n        else {\n            this.__uniqueName = name;\n            RnObject.__uniqueNames[this.__objectUid] = this.__uniqueName;\n            return true;\n        }\n    };\n    RnObject.prototype.validateTagString = function (val) {\n        var reg = new RegExp(/[!\"#$%&'()\\*\\+\\-\\s\\.,\\/:;<=>?@\\[\\\\\\]^`{|}~]/g);\n        if (reg.test(val)) {\n            return false;\n        }\n        return true;\n    };\n    RnObject.prototype.tryToSetTag = function (tagName, tagValue) {\n        if (this.validateTagString(tagName)) {\n            if (this.validateTagString(tagValue)) {\n                if (this.hasTag(tagName)) {\n                    this.removeTag(tagName);\n                }\n                this.__tags[tagName] = tagValue;\n                this.__conbinedTagString += tagName + \":\" + tagValue + ' ';\n                return true;\n            }\n        }\n        return false;\n    };\n    RnObject.prototype.getTagValue = function (tagName) {\n        return this.__tags[tagName];\n    };\n    RnObject.prototype.getTag = function (tagName) {\n        var tag = {};\n        tag[tagName] = this.__tags[tagName];\n        return tag;\n    };\n    RnObject.prototype.hasTag = function (tagName) {\n        if (this.__tags[tagName] != null) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    RnObject.prototype.removeTag = function (tagName) {\n        var strToDelete = tagName + \":\" + this.__tags[tagName] + ' ';\n        this.__conbinedTagString.replace(this.__conbinedTagString, \"\");\n        delete this.__tags[tagName];\n    };\n    RnObject.prototype.matchTag = function (tagName, tagValue) {\n        if (this.__tags[tagName] === tagValue) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    RnObject.prototype.matchTagConbliedAsFree = function (stringArray) {\n        var regExpStr = '^';\n        for (var i = 0; i < stringArray.length; i++) {\n            regExpStr += \"(?=.*\" + stringArray[i] + \")\";\n        }\n        var reg = new RegExp(regExpStr);\n        if (reg.test(this.__conbinedTagString)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    RnObject.prototype.matchTagConblied = function (tags) {\n        var regExpStr = '^';\n        for (var tagName in tags) {\n            regExpStr += \"(?=.*\" + [tagName] + \":\" + tags[tagName] + \")\";\n        }\n        var reg = new RegExp(regExpStr);\n        if (reg.test(this.__conbinedTagString)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Object.defineProperty(RnObject.prototype, \"uniqueName\", {\n        /**\n         * Get the unique name of the entity.\n         */\n        get: function () {\n            return this.__uniqueName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RnObject.currentMaxObjectCount = -1;\n    RnObject.InvalidObjectUID = -1;\n    RnObject.__uniqueNames = [];\n    return RnObject;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (RnObject);\n\n\n//# sourceURL=webpack:///./src/foundation/core/RnObject.ts?");

/***/ }),

/***/ "./src/foundation/definitions/AlphaMode.ts":
/*!*************************************************!*\
  !*** ./src/foundation/definitions/AlphaMode.ts ***!
  \*************************************************/
/*! exports provided: AlphaMode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlphaMode\", function() { return AlphaMode; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar AlphaModeClass = /** @class */ (function (_super) {\n    __extends(AlphaModeClass, _super);\n    function AlphaModeClass(_a) {\n        var index = _a.index, str = _a.str;\n        return _super.call(this, { index: index, str: str }) || this;\n    }\n    return AlphaModeClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar Opaque = new AlphaModeClass({ index: 0, str: 'OPAQUE' });\nvar Mask = new AlphaModeClass({ index: 1, str: 'MASK' });\nvar Blend = new AlphaModeClass({ index: 2, str: 'BLEND' });\nvar typeList = [Opaque, Mask, Blend];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList: typeList, str: str });\n}\nvar AlphaMode = Object.freeze({ Opaque: Opaque, Mask: Mask, Blend: Blend, from: from, fromString: fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/AlphaMode.ts?");

/***/ }),

/***/ "./src/foundation/definitions/Animation.ts":
/*!*************************************************!*\
  !*** ./src/foundation/definitions/Animation.ts ***!
  \*************************************************/
/*! exports provided: Animation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Animation\", function() { return Animation; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar AnimationClass = /** @class */ (function (_super) {\n    __extends(AnimationClass, _super);\n    function AnimationClass(_a) {\n        var index = _a.index, str = _a.str;\n        return _super.call(this, { index: index, str: str }) || this;\n    }\n    return AnimationClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar Linear = new AnimationClass({ index: 0, str: 'Linear' });\nvar Step = new AnimationClass({ index: 1, str: 'Step' });\nvar CubicSpline = new AnimationClass({ index: 2, str: 'CubicSpline' });\nvar typeList = [Linear, Step, CubicSpline];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList: typeList, str: str });\n}\nvar Animation = Object.freeze({ Linear: Linear, Step: Step, CubicSpline: CubicSpline, from: from, fromString: fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/Animation.ts?");

/***/ }),

/***/ "./src/foundation/definitions/BufferUse.ts":
/*!*************************************************!*\
  !*** ./src/foundation/definitions/BufferUse.ts ***!
  \*************************************************/
/*! exports provided: BufferUse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BufferUse\", function() { return BufferUse; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar BufferUseClass = /** @class */ (function (_super) {\n    __extends(BufferUseClass, _super);\n    function BufferUseClass(_a) {\n        var index = _a.index, str = _a.str;\n        return _super.call(this, { index: index, str: str }) || this;\n    }\n    return BufferUseClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar GPUInstanceData = new BufferUseClass({ index: 0, str: 'GPUInstanceData' });\nvar GPUVertexData = new BufferUseClass({ index: 1, str: 'GPUVertexData' });\nvar UBOGeneric = new BufferUseClass({ index: 2, str: 'UBOGeneric' });\nvar CPUGeneric = new BufferUseClass({ index: 3, str: 'CPUGeneric' });\nvar typeList = [GPUInstanceData, GPUVertexData, UBOGeneric, CPUGeneric];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList: typeList, str: str });\n}\nvar BufferUse = Object.freeze({ GPUInstanceData: GPUInstanceData, GPUVertexData: GPUVertexData, UBOGeneric: UBOGeneric, CPUGeneric: CPUGeneric, from: from, fromString: fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/BufferUse.ts?");

/***/ }),

/***/ "./src/foundation/definitions/CameraType.ts":
/*!**************************************************!*\
  !*** ./src/foundation/definitions/CameraType.ts ***!
  \**************************************************/
/*! exports provided: CameraType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CameraType\", function() { return CameraType; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar CameraTypeClass = /** @class */ (function (_super) {\n    __extends(CameraTypeClass, _super);\n    function CameraTypeClass(_a) {\n        var index = _a.index, str = _a.str;\n        return _super.call(this, { index: index, str: str }) || this;\n    }\n    return CameraTypeClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar Perspective = new CameraTypeClass({ index: 0, str: 'Perspective' });\nvar Orthographic = new CameraTypeClass({ index: 1, str: 'Orthographic' });\nvar Frustom = new CameraTypeClass({ index: 2, str: 'Frustom' });\nvar typeList = [Perspective, Orthographic, Frustom];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList: typeList, str: str });\n}\nvar CameraType = Object.freeze({ Perspective: Perspective, Orthographic: Orthographic, Frustom: Frustom, from: from, fromString: fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/CameraType.ts?");

/***/ }),

/***/ "./src/foundation/definitions/ComponentType.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/definitions/ComponentType.ts ***!
  \*****************************************************/
/*! exports provided: ComponentType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ComponentType\", function() { return ComponentType; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar ComponentTypeClass = /** @class */ (function (_super) {\n    __extends(ComponentTypeClass, _super);\n    function ComponentTypeClass(_a) {\n        var index = _a.index, str = _a.str, sizeInBytes = _a.sizeInBytes;\n        var _this = _super.call(this, { index: index, str: str }) || this;\n        _this.__sizeInBytes = sizeInBytes;\n        return _this;\n    }\n    ComponentTypeClass.prototype.getSizeInBytes = function () {\n        return this.__sizeInBytes;\n    };\n    return ComponentTypeClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar Unknown = new ComponentTypeClass({ index: 5119, str: 'UNKNOWN', sizeInBytes: 0 });\nvar Byte = new ComponentTypeClass({ index: 5120, str: 'BYTE', sizeInBytes: 1 });\nvar UnsignedByte = new ComponentTypeClass({ index: 5121, str: 'UNSIGNED_BYTE', sizeInBytes: 1 });\nvar Short = new ComponentTypeClass({ index: 5122, str: 'SHORT', sizeInBytes: 2 });\nvar UnsignedShort = new ComponentTypeClass({ index: 5123, str: 'UNSIGNED_SHORT', sizeInBytes: 2 });\nvar Int = new ComponentTypeClass({ index: 5124, str: 'INT', sizeInBytes: 4 });\nvar UnsingedInt = new ComponentTypeClass({ index: 5125, str: 'UNSIGNED_INT', sizeInBytes: 4 });\nvar Float = new ComponentTypeClass({ index: 5126, str: 'FLOAT', sizeInBytes: 4 });\nvar Double = new ComponentTypeClass({ index: 5127, str: 'DOUBLE', sizeInBytes: 8 });\nvar HalfFloat = new ComponentTypeClass({ index: 0x8D61, str: 'HALF_FLOAT_OES', sizeInBytes: 2 });\nvar typeList = [Unknown, Byte, UnsignedByte, Short, UnsignedShort, Int, UnsingedInt, Float, Double, HalfFloat];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nfunction fromTypedArray(typedArray) {\n    if (typedArray instanceof Int8Array) {\n        return Byte;\n    }\n    else if (typedArray instanceof Uint8Array || typedArray instanceof Uint8ClampedArray) {\n        return UnsignedByte;\n    }\n    else if (typedArray instanceof Int16Array) {\n        return Short;\n    }\n    else if (typedArray instanceof Uint16Array) {\n        return UnsignedShort;\n    }\n    else if (typedArray instanceof Int32Array) {\n        return Int;\n    }\n    else if (typedArray instanceof Uint32Array) {\n        return UnsingedInt;\n    }\n    else if (typedArray instanceof Float32Array) {\n        return Float;\n    }\n    else if (typedArray instanceof Float64Array) {\n        return Double;\n    }\n    return Unknown;\n}\nvar ComponentType = Object.freeze({ Unknown: Unknown, Byte: Byte, UnsignedByte: UnsignedByte, Short: Short, UnsignedShort: UnsignedShort, Int: Int, UnsingedInt: UnsingedInt, Float: Float, Double: Double, HalfFloat: HalfFloat, from: from, fromTypedArray: fromTypedArray });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/ComponentType.ts?");

/***/ }),

/***/ "./src/foundation/definitions/CompositionType.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/definitions/CompositionType.ts ***!
  \*******************************************************/
/*! exports provided: CompositionType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CompositionType\", function() { return CompositionType; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n/* harmony import */ var _ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar CompositionTypeClass = /** @class */ (function (_super) {\n    __extends(CompositionTypeClass, _super);\n    function CompositionTypeClass(_a) {\n        var index = _a.index, str = _a.str, glslStr = _a.glslStr, hlslStr = _a.hlslStr, numberOfComponents = _a.numberOfComponents;\n        var _this = _super.call(this, { index: index, str: str }) || this;\n        _this.__numberOfComponents = 0;\n        _this.__numberOfComponents = numberOfComponents;\n        _this.__glslStr = glslStr;\n        _this.__hlslStr = hlslStr;\n        return _this;\n    }\n    CompositionTypeClass.prototype.getNumberOfComponents = function () {\n        return this.__numberOfComponents;\n    };\n    CompositionTypeClass.prototype.getGlslStr = function (componentType) {\n        if (componentType === _ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Float || componentType === _ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Double) {\n            return this.__glslStr;\n        }\n        else if (componentType === _ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Byte || componentType === _ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Short || componentType === _ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Int) {\n            if (this === CompositionType.Scalar) {\n                return 'int';\n            }\n            else {\n                return 'i' + this.__glslStr;\n            }\n        }\n        return 'unknown';\n    };\n    return CompositionTypeClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar Unknown = new CompositionTypeClass({ index: -1, str: 'UNKNOWN', glslStr: 'unknown', hlslStr: 'unknown', numberOfComponents: 0 });\nvar Scalar = new CompositionTypeClass({ index: 0, str: 'SCALAR', glslStr: 'float', hlslStr: 'float', numberOfComponents: 1 });\nvar Vec2 = new CompositionTypeClass({ index: 1, str: 'VEC2', glslStr: 'vec2', hlslStr: 'float2', numberOfComponents: 2 });\nvar Vec3 = new CompositionTypeClass({ index: 2, str: 'VEC3', glslStr: 'vec3', hlslStr: 'float3', numberOfComponents: 3 });\nvar Vec4 = new CompositionTypeClass({ index: 3, str: 'VEC4', glslStr: 'vec4', hlslStr: 'float4', numberOfComponents: 4 });\nvar Mat2 = new CompositionTypeClass({ index: 4, str: 'MAT2', glslStr: 'mat2', hlslStr: 'float2x2', numberOfComponents: 4 });\nvar Mat3 = new CompositionTypeClass({ index: 5, str: 'MAT3', glslStr: 'mat3', hlslStr: 'float3x3', numberOfComponents: 9 });\nvar Mat4 = new CompositionTypeClass({ index: 6, str: 'MAT4', glslStr: 'mat4', hlslStr: 'float4x4', numberOfComponents: 16 });\nvar Texture2D = new CompositionTypeClass({ index: 7, str: 'TEXTURE_2D', glslStr: 'sampler2D', hlslStr: 'Texture2D', numberOfComponents: 1 });\nvar TextureCube = new CompositionTypeClass({ index: 8, str: 'TEXTURE_CUBE', glslStr: 'samplerCube', hlslStr: 'TextureCube', numberOfComponents: 1 });\nvar typeList = [Unknown, Scalar, Vec2, Vec3, Vec4, Mat2, Mat3, Mat4, Texture2D, TextureCube];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList: typeList, str: str });\n}\nvar CompositionType = Object.freeze({ Unknown: Unknown, Scalar: Scalar, Vec2: Vec2, Vec3: Vec3, Vec4: Vec4, Mat2: Mat2, Mat3: Mat3, Mat4: Mat4, Texture2D: Texture2D, TextureCube: TextureCube, from: from, fromString: fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/CompositionType.ts?");

/***/ }),

/***/ "./src/foundation/definitions/HdriFormat.ts":
/*!**************************************************!*\
  !*** ./src/foundation/definitions/HdriFormat.ts ***!
  \**************************************************/
/*! exports provided: HdriFormat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HdriFormat\", function() { return HdriFormat; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar HdriFormatClass = /** @class */ (function (_super) {\n    __extends(HdriFormatClass, _super);\n    function HdriFormatClass(_a) {\n        var index = _a.index, str = _a.str;\n        return _super.call(this, { index: index, str: str }) || this;\n    }\n    return HdriFormatClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar LDR_SRGB = new HdriFormatClass({ index: 0, str: '.ldr_srgb' });\nvar LDR_LINEAR = new HdriFormatClass({ index: 1, str: '.ldr_linear' });\nvar HDR = new HdriFormatClass({ index: 2, str: '.hdr' });\nvar RGBE_PNG = new HdriFormatClass({ index: 3, str: '.rgbe.png' });\nvar RGB9_E5_PNG = new HdriFormatClass({ index: 4, str: '.rgb9_e5.png' });\nvar OpenEXR = new HdriFormatClass({ index: 5, str: '.exr' });\nvar typeList = [LDR_SRGB, LDR_LINEAR, HDR, RGBE_PNG, RGB9_E5_PNG, OpenEXR];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nvar HdriFormat = Object.freeze({ LDR_SRGB: LDR_SRGB, LDR_LINEAR: LDR_LINEAR, HDR: HDR, RGBE_PNG: RGBE_PNG, RGB9_E5_PNG: RGB9_E5_PNG, OpenEXR: OpenEXR });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/HdriFormat.ts?");

/***/ }),

/***/ "./src/foundation/definitions/LightType.ts":
/*!*************************************************!*\
  !*** ./src/foundation/definitions/LightType.ts ***!
  \*************************************************/
/*! exports provided: LightType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LightType\", function() { return LightType; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar LightTypeClass = /** @class */ (function (_super) {\n    __extends(LightTypeClass, _super);\n    function LightTypeClass(_a) {\n        var index = _a.index, str = _a.str;\n        return _super.call(this, { index: index, str: str }) || this;\n    }\n    return LightTypeClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar Directional = new LightTypeClass({ index: 0, str: 'Directional' });\nvar Point = new LightTypeClass({ index: 1, str: 'Point' });\nvar Spot = new LightTypeClass({ index: 2, str: 'Spot' });\nvar Ambient = new LightTypeClass({ index: 3, str: 'Ambient' });\nvar typeList = [Point, Directional, Spot, Ambient];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList: typeList, str: str });\n}\nvar LightType = Object.freeze({ Point: Point, Directional: Directional, Spot: Spot, Ambient: Ambient, from: from, fromString: fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/LightType.ts?");

/***/ }),

/***/ "./src/foundation/definitions/PixelFormat.ts":
/*!***************************************************!*\
  !*** ./src/foundation/definitions/PixelFormat.ts ***!
  \***************************************************/
/*! exports provided: PixelFormat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PixelFormat\", function() { return PixelFormat; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar PixelFormatClass = /** @class */ (function (_super) {\n    __extends(PixelFormatClass, _super);\n    function PixelFormatClass(_a) {\n        var index = _a.index, str = _a.str;\n        return _super.call(this, { index: index, str: str }) || this;\n    }\n    return PixelFormatClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar DepthComponent = new PixelFormatClass({ index: 0x1902, str: 'DEPTH_COMPONENT' });\nvar Alpha = new PixelFormatClass({ index: 0x1906, str: 'ALPHA' });\nvar RGB = new PixelFormatClass({ index: 0x1907, str: 'RGB' });\nvar RGBA = new PixelFormatClass({ index: 0x1908, str: 'RGBA' });\nvar Luminance = new PixelFormatClass({ index: 0x1909, str: 'LUMINANCE' });\nvar LuminanceAlpha = new PixelFormatClass({ index: 0x190A, str: 'LUMINANCE_ALPHA' });\nvar typeList = [DepthComponent, Alpha, RGB, RGBA, Luminance, LuminanceAlpha];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nvar PixelFormat = Object.freeze({ DepthComponent: DepthComponent, Alpha: Alpha, RGB: RGB, RGBA: RGBA, Luminance: Luminance, LuminanceAlpha: LuminanceAlpha });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/PixelFormat.ts?");

/***/ }),

/***/ "./src/foundation/definitions/PrimitiveMode.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/definitions/PrimitiveMode.ts ***!
  \*****************************************************/
/*! exports provided: PrimitiveMode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PrimitiveMode\", function() { return PrimitiveMode; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar PrimitiveModeClass = /** @class */ (function (_super) {\n    __extends(PrimitiveModeClass, _super);\n    function PrimitiveModeClass(_a) {\n        var index = _a.index, str = _a.str;\n        return _super.call(this, { index: index, str: str }) || this;\n    }\n    return PrimitiveModeClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar Unknown = new PrimitiveModeClass({ index: -1, str: 'UNKNOWN' });\nvar Points = new PrimitiveModeClass({ index: 0, str: 'POINTS' });\nvar Lines = new PrimitiveModeClass({ index: 1, str: 'LINES' });\nvar LineLoop = new PrimitiveModeClass({ index: 2, str: 'LINE_LOOP' });\nvar LineStrip = new PrimitiveModeClass({ index: 3, str: 'LINE_STRIP' });\nvar Triangles = new PrimitiveModeClass({ index: 4, str: 'TRIANGLES' });\nvar TriangleStrip = new PrimitiveModeClass({ index: 5, str: 'TRIANGLE_STRIP' });\nvar TriangleFan = new PrimitiveModeClass({ index: 6, str: 'TRIANGLE_FAN' });\nvar typeList = [Unknown, Points, Lines, LineLoop, LineStrip, Triangles, TriangleStrip, TriangleFan];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nvar PrimitiveMode = Object.freeze({ Unknown: Unknown, Points: Points, Lines: Lines, LineLoop: LineLoop, LineStrip: LineStrip, Triangles: Triangles, TriangleStrip: TriangleStrip, TriangleFan: TriangleFan, from: from });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/PrimitiveMode.ts?");

/***/ }),

/***/ "./src/foundation/definitions/ProcessApproach.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/definitions/ProcessApproach.ts ***!
  \*******************************************************/
/*! exports provided: ProcessApproach */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ProcessApproach\", function() { return ProcessApproach; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar ProcessApproachClass = /** @class */ (function (_super) {\n    __extends(ProcessApproachClass, _super);\n    function ProcessApproachClass(_a) {\n        var index = _a.index, str = _a.str;\n        return _super.call(this, { index: index, str: str }) || this;\n    }\n    return ProcessApproachClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar None = new ProcessApproachClass({ index: 0, str: 'NONE' });\nvar UniformWebGL1 = new ProcessApproachClass({ index: 1, str: 'UNIFORM_WEBGL1' });\nvar DataTextureWebGL1 = new ProcessApproachClass({ index: 2, str: 'DATA_TEXTURE_WEBGL1' });\nvar DataTextureWebGL2 = new ProcessApproachClass({ index: 3, str: 'DATA_TEXTURE_WEBGL2' });\nvar UBOWebGL2 = new ProcessApproachClass({ index: 4, str: 'UBO_WEBGL2' });\nvar TransformFeedbackWebGL2 = new ProcessApproachClass({ index: 5, str: 'TRNASFORM_FEEDBACK_WEBGL2' });\nvar typeList = [None, UniformWebGL1, DataTextureWebGL1, DataTextureWebGL2, UBOWebGL2, TransformFeedbackWebGL2];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nvar ProcessApproach = Object.freeze({ None: None, UniformWebGL1: UniformWebGL1, DataTextureWebGL1: DataTextureWebGL1, DataTextureWebGL2: DataTextureWebGL2, UBOWebGL2: UBOWebGL2, TransformFeedbackWebGL2: TransformFeedbackWebGL2 });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/ProcessApproach.ts?");

/***/ }),

/***/ "./src/foundation/definitions/ProcessStage.ts":
/*!****************************************************!*\
  !*** ./src/foundation/definitions/ProcessStage.ts ***!
  \****************************************************/
/*! exports provided: ProcessStage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ProcessStage\", function() { return ProcessStage; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar ProcessStageClass = /** @class */ (function (_super) {\n    __extends(ProcessStageClass, _super);\n    function ProcessStageClass(_a) {\n        var index = _a.index, str = _a.str, methodName = _a.methodName;\n        var _this = _super.call(this, { index: index, str: str }) || this;\n        _this.__methodName = methodName;\n        return _this;\n    }\n    ProcessStageClass.prototype.getMethodName = function () {\n        return this.__methodName;\n    };\n    return ProcessStageClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar Unknown = new ProcessStageClass({ index: -1, str: 'UNKNOWN', methodName: '$unknown' });\nvar Create = new ProcessStageClass({ index: 0, str: 'CREATE', methodName: '$create' });\nvar Load = new ProcessStageClass({ index: 1, str: 'LOAD', methodName: '$load' });\nvar Mount = new ProcessStageClass({ index: 2, str: 'MOUNT', methodName: '$mount' });\nvar Logic = new ProcessStageClass({ index: 3, str: 'LOGIC', methodName: '$logic' });\nvar PreRender = new ProcessStageClass({ index: 4, str: 'PRE_RENDER', methodName: '$prerender' });\nvar Render = new ProcessStageClass({ index: 5, str: 'RENDER', methodName: '$render' });\nvar Unmount = new ProcessStageClass({ index: 6, str: 'UNMOUNT', methodName: '$unmount' });\nvar Discard = new ProcessStageClass({ index: 7, str: 'DISCARD', methodName: '$discard' });\nvar typeList = [Unknown, Create, Load, Mount, Logic, PreRender, Render, Unmount, Discard];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nvar ProcessStage = Object.freeze({ Unknown: Unknown, Create: Create, Load: Load, Mount: Mount, Logic: Logic, PreRender: PreRender, Render: Render, Unmount: Unmount, Discard: Discard, from: from });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/ProcessStage.ts?");

/***/ }),

/***/ "./src/foundation/definitions/RenderBufferTarget.ts":
/*!**********************************************************!*\
  !*** ./src/foundation/definitions/RenderBufferTarget.ts ***!
  \**********************************************************/
/*! exports provided: RenderBufferTarget */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RenderBufferTarget\", function() { return RenderBufferTarget; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar RenderBufferTargetClass = /** @class */ (function (_super) {\n    __extends(RenderBufferTargetClass, _super);\n    function RenderBufferTargetClass(_a) {\n        var index = _a.index, str = _a.str;\n        return _super.call(this, { index: index, str: str }) || this;\n    }\n    return RenderBufferTargetClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar None = new RenderBufferTargetClass({ index: -2, str: 'NONE' });\nvar Back = new RenderBufferTargetClass({ index: -1, str: 'BACK' });\nvar ColorAttachment0 = new RenderBufferTargetClass({ index: 0, str: 'COLOR_ATTACHMENT0' });\nvar ColorAttachment1 = new RenderBufferTargetClass({ index: 1, str: 'COLOR_ATTACHMENT1' });\nvar ColorAttachment2 = new RenderBufferTargetClass({ index: 2, str: 'COLOR_ATTACHMENT2' });\nvar ColorAttachment3 = new RenderBufferTargetClass({ index: 3, str: 'COLOR_ATTACHMENT3' });\nvar ColorAttachment4 = new RenderBufferTargetClass({ index: 4, str: 'COLOR_ATTACHMENT4' });\nvar ColorAttachment5 = new RenderBufferTargetClass({ index: 5, str: 'COLOR_ATTACHMENT5' });\nvar ColorAttachment6 = new RenderBufferTargetClass({ index: 6, str: 'COLOR_ATTACHMENT6' });\nvar ColorAttachment7 = new RenderBufferTargetClass({ index: 7, str: 'COLOR_ATTACHMENT7' });\nvar ColorAttachment8 = new RenderBufferTargetClass({ index: 8, str: 'COLOR_ATTACHMENT8' });\nvar ColorAttachment9 = new RenderBufferTargetClass({ index: 9, str: 'COLOR_ATTACHMENT9' });\nvar ColorAttachment10 = new RenderBufferTargetClass({ index: 10, str: 'COLOR_ATTACHMENT10' });\nvar ColorAttachment11 = new RenderBufferTargetClass({ index: 11, str: 'COLOR_ATTACHMENT11' });\nvar ColorAttachment12 = new RenderBufferTargetClass({ index: 12, str: 'COLOR_ATTACHMENT12' });\nvar ColorAttachment13 = new RenderBufferTargetClass({ index: 13, str: 'COLOR_ATTACHMENT13' });\nvar ColorAttachment14 = new RenderBufferTargetClass({ index: 14, str: 'COLOR_ATTACHMENT14' });\nvar ColorAttachment15 = new RenderBufferTargetClass({ index: 15, str: 'COLOR_ATTACHMENT15' });\nvar typeList = [None, Back, ColorAttachment0, ColorAttachment1, ColorAttachment2, ColorAttachment3, ColorAttachment4,\n    ColorAttachment5, ColorAttachment6, ColorAttachment7, ColorAttachment8, ColorAttachment9, ColorAttachment10,\n    ColorAttachment11, ColorAttachment12, ColorAttachment13, ColorAttachment14, ColorAttachment15];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nvar RenderBufferTarget = Object.freeze({ None: None, Back: Back, ColorAttachment0: ColorAttachment0, ColorAttachment1: ColorAttachment1, ColorAttachment2: ColorAttachment2, ColorAttachment3: ColorAttachment3, ColorAttachment4: ColorAttachment4,\n    ColorAttachment5: ColorAttachment5, ColorAttachment6: ColorAttachment6, ColorAttachment7: ColorAttachment7, ColorAttachment8: ColorAttachment8, ColorAttachment9: ColorAttachment9, ColorAttachment10: ColorAttachment10,\n    ColorAttachment11: ColorAttachment11, ColorAttachment12: ColorAttachment12, ColorAttachment13: ColorAttachment13, ColorAttachment14: ColorAttachment14, ColorAttachment15: ColorAttachment15, from: from });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/RenderBufferTarget.ts?");

/***/ }),

/***/ "./src/foundation/definitions/ShaderNode.ts":
/*!**************************************************!*\
  !*** ./src/foundation/definitions/ShaderNode.ts ***!
  \**************************************************/
/*! exports provided: ShaderNode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShaderNode\", function() { return ShaderNode; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar ShaderNodeClass = /** @class */ (function (_super) {\n    __extends(ShaderNodeClass, _super);\n    function ShaderNodeClass(_a) {\n        var index = _a.index, str = _a.str;\n        return _super.call(this, { index: index, str: str }) || this;\n    }\n    return ShaderNodeClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar ClassicShading = new ShaderNodeClass({ index: 0, str: 'ClassicShading' });\nvar PBRShading = new ShaderNodeClass({ index: 1, str: 'PBRShading' });\nvar Lerp = new ShaderNodeClass({ index: 2, str: 'Lerp' });\nvar Add = new ShaderNodeClass({ index: 3, str: 'Add' });\nvar typeList = [ClassicShading, PBRShading];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList: typeList, str: str });\n}\nvar ShaderNode = Object.freeze({ ClassicShading: ClassicShading, PBRShading: PBRShading, from: from, fromString: fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/ShaderNode.ts?");

/***/ }),

/***/ "./src/foundation/definitions/ShaderSemantics.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/definitions/ShaderSemantics.ts ***!
  \*******************************************************/
/*! exports provided: ShaderSemanticsClass, ShaderSemantics */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShaderSemanticsClass\", function() { return ShaderSemanticsClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShaderSemantics\", function() { return ShaderSemantics; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar ShaderSemanticsClass = /** @class */ (function (_super) {\n    __extends(ShaderSemanticsClass, _super);\n    function ShaderSemanticsClass(_a) {\n        var index = _a.index, singularStr = _a.singularStr, pluralStr = _a.pluralStr;\n        var _this = _super.call(this, { index: index, str: singularStr }) || this;\n        _this.pluralStr = pluralStr;\n        return _this;\n    }\n    Object.defineProperty(ShaderSemanticsClass.prototype, \"singularStr\", {\n        get: function () {\n            return this.str;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ShaderSemanticsClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\n\nvar WorldMatrix = new ShaderSemanticsClass({ index: 0, singularStr: 'worldMatrix', pluralStr: 'worldMatrices' });\nvar ViewMatrix = new ShaderSemanticsClass({ index: 1, singularStr: 'viewMatrix', pluralStr: 'viewMatrices' });\nvar ProjectionMatrix = new ShaderSemanticsClass({ index: 2, singularStr: 'projectionMatrix', pluralStr: 'projectionMatrices' });\nvar NormalMatrix = new ShaderSemanticsClass({ index: 3, singularStr: 'normalMatrix', pluralStr: 'normalMatrices' });\nvar BoneMatrix = new ShaderSemanticsClass({ index: 4, singularStr: 'boneMatrix', pluralStr: 'boneMatrices' });\nvar BaseColorFactor = new ShaderSemanticsClass({ index: 5, singularStr: 'baseColorFactor', pluralStr: 'baseColorFactors' });\nvar BaseColorTexture = new ShaderSemanticsClass({ index: 6, singularStr: 'baseColorTexture', pluralStr: 'baseColorTextures' });\nvar NormalTexture = new ShaderSemanticsClass({ index: 7, singularStr: 'normalTexture', pluralStr: 'normalTextures' });\nvar MetallicRoughnessTexture = new ShaderSemanticsClass({ index: 8, singularStr: 'metallicRoughnessTexture', pluralStr: 'metallicRoughnessTextures' });\nvar OcclusionTexture = new ShaderSemanticsClass({ index: 9, singularStr: 'occlusionTexture', pluralStr: 'occlusionTextures' });\nvar EmissiveTexture = new ShaderSemanticsClass({ index: 10, singularStr: 'emissiveTexture', pluralStr: 'emissiveTextures' });\nvar LightNumber = new ShaderSemanticsClass({ index: 11, singularStr: 'lightNumber', pluralStr: 'lightNumbers' });\nvar LightPosition = new ShaderSemanticsClass({ index: 12, singularStr: 'lightPosition', pluralStr: 'lightPositions' });\nvar LightDirection = new ShaderSemanticsClass({ index: 13, singularStr: 'lightDirection', pluralStr: 'lightDirections' });\nvar LightIntensity = new ShaderSemanticsClass({ index: 14, singularStr: 'lightIntensity', pluralStr: 'intensityOfLights' });\nvar MetallicRoughnessFactor = new ShaderSemanticsClass({ index: 15, singularStr: 'metallicRoughnessFactor', pluralStr: 'metallicRoughnessFactors' });\nvar BrdfLutTexture = new ShaderSemanticsClass({ index: 16, singularStr: 'brdfLutTexture', pluralStr: 'brdfLutTexture' });\nvar DiffuseEnvTexture = new ShaderSemanticsClass({ index: 17, singularStr: 'diffuseEnvTexture', pluralStr: 'diffuseEnvTextures' });\nvar SpecularEnvTexture = new ShaderSemanticsClass({ index: 18, singularStr: 'specularEnvTexture', pluralStr: 'specularEnvTextures' });\nvar IBLParameter = new ShaderSemanticsClass({ index: 19, singularStr: 'iblParameter', pluralStr: 'iblParameter' });\nvar ViewPosition = new ShaderSemanticsClass({ index: 20, singularStr: 'viewPosition', pluralStr: 'viewPositions' });\nvar Wireframe = new ShaderSemanticsClass({ index: 21, singularStr: 'wireframe', pluralStr: 'wireframes' });\nvar DiffuseColorFactor = new ShaderSemanticsClass({ index: 22, singularStr: 'diffuseColorFactor', pluralStr: 'diffuseColorFactors' });\nvar DiffuseColorTexture = new ShaderSemanticsClass({ index: 23, singularStr: 'diffuseColorTexture', pluralStr: 'diffuseColorTextures' });\nvar SpecularColorFactor = new ShaderSemanticsClass({ index: 24, singularStr: 'specularColorFactor', pluralStr: 'specularColorFactors' });\nvar SpecularColorTexture = new ShaderSemanticsClass({ index: 25, singularStr: 'specularColorTexture', pluralStr: 'specularColorTextures' });\nvar Shininess = new ShaderSemanticsClass({ index: 26, singularStr: 'shininess', pluralStr: 'shininesses' });\nvar ShadingModel = new ShaderSemanticsClass({ index: 27, singularStr: 'shadingModel', pluralStr: 'shadingModels' });\nvar SkinningMode = new ShaderSemanticsClass({ index: 28, singularStr: 'skinningMode', pluralStr: 'skinningModes' });\nvar GeneralTexture = new ShaderSemanticsClass({ index: 29, singularStr: 'generalTexture', pluralStr: 'generalTextures' });\nvar VertexAttributesExistenceArray = new ShaderSemanticsClass({ index: 30, singularStr: 'vertexAttributesExistenceArray', pluralStr: 'vertexAttributesExistenceArrays' });\nvar BoneCompressedChank = new ShaderSemanticsClass({ index: 31, singularStr: 'boneCompressedChank', pluralStr: 'boneCompressedChanks' });\nvar BoneCompressedInfo = new ShaderSemanticsClass({ index: 32, singularStr: 'boneCompressedInfo', pluralStr: 'boneCompressedInfos' });\nvar PointSize = new ShaderSemanticsClass({ index: 33, singularStr: 'pointSize', pluralStr: 'pointSize' });\nvar ColorEnvTexture = new ShaderSemanticsClass({ index: 34, singularStr: 'colorEnvTexture', pluralStr: 'colorEnvTextures' });\nvar PointDistanceAttenuation = new ShaderSemanticsClass({ index: 35, singularStr: 'pointDistanceAttenuation', pluralStr: 'pointDistanceAttenuation' });\nvar HDRIFormat = new ShaderSemanticsClass({ index: 36, singularStr: 'hdriFormat', pluralStr: 'hdriFormats' });\nvar ScreenInfo = new ShaderSemanticsClass({ index: 37, singularStr: 'screenInfo', pluralStr: 'screenInfos' });\nvar typeList = [WorldMatrix, ViewMatrix, ProjectionMatrix, NormalMatrix, BoneMatrix, BaseColorFactor, BaseColorTexture,\n    NormalTexture, MetallicRoughnessTexture, OcclusionTexture, EmissiveTexture, LightNumber, LightPosition, LightDirection, LightIntensity,\n    MetallicRoughnessFactor, BrdfLutTexture, DiffuseEnvTexture, SpecularEnvTexture, IBLParameter, ViewPosition, Wireframe,\n    DiffuseColorFactor, DiffuseColorTexture, SpecularColorFactor, SpecularColorTexture, Shininess, ShadingModel, SkinningMode, GeneralTexture,\n    VertexAttributesExistenceArray, BoneCompressedChank, BoneCompressedInfo, PointSize, ColorEnvTexture, PointDistanceAttenuation, HDRIFormat, ScreenInfo];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList: typeList, str: str });\n}\nvar ShaderSemantics = Object.freeze({\n    WorldMatrix: WorldMatrix, ViewMatrix: ViewMatrix, ProjectionMatrix: ProjectionMatrix, NormalMatrix: NormalMatrix, BoneMatrix: BoneMatrix, BaseColorFactor: BaseColorFactor, BaseColorTexture: BaseColorTexture,\n    NormalTexture: NormalTexture, MetallicRoughnessTexture: MetallicRoughnessTexture, OcclusionTexture: OcclusionTexture, EmissiveTexture: EmissiveTexture, LightNumber: LightNumber, LightPosition: LightPosition, LightDirection: LightDirection, LightIntensity: LightIntensity,\n    MetallicRoughnessFactor: MetallicRoughnessFactor, BrdfLutTexture: BrdfLutTexture, DiffuseEnvTexture: DiffuseEnvTexture, SpecularEnvTexture: SpecularEnvTexture, IBLParameter: IBLParameter, ViewPosition: ViewPosition, Wireframe: Wireframe,\n    DiffuseColorFactor: DiffuseColorFactor, DiffuseColorTexture: DiffuseColorTexture, SpecularColorFactor: SpecularColorFactor, SpecularColorTexture: SpecularColorTexture, Shininess: Shininess, ShadingModel: ShadingModel, SkinningMode: SkinningMode, GeneralTexture: GeneralTexture,\n    VertexAttributesExistenceArray: VertexAttributesExistenceArray, BoneCompressedChank: BoneCompressedChank, BoneCompressedInfo: BoneCompressedInfo, fromString: fromString, PointSize: PointSize, ColorEnvTexture: ColorEnvTexture, PointDistanceAttenuation: PointDistanceAttenuation,\n    HDRIFormat: HDRIFormat, ScreenInfo: ScreenInfo\n});\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/ShaderSemantics.ts?");

/***/ }),

/***/ "./src/foundation/definitions/ShadingModel.ts":
/*!****************************************************!*\
  !*** ./src/foundation/definitions/ShadingModel.ts ***!
  \****************************************************/
/*! exports provided: ShadingModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShadingModel\", function() { return ShadingModel; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar ShadingModelClass = /** @class */ (function (_super) {\n    __extends(ShadingModelClass, _super);\n    function ShadingModelClass(_a) {\n        var index = _a.index, str = _a.str;\n        return _super.call(this, { index: index, str: str }) || this;\n    }\n    return ShadingModelClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar Unknown = new ShadingModelClass({ index: -1, str: 'UNKNOWN' });\nvar Constant = new ShadingModelClass({ index: 0, str: 'CONSTANT' });\nvar Lambert = new ShadingModelClass({ index: 1, str: 'LAMBERT' });\nvar BlinnPhong = new ShadingModelClass({ index: 2, str: 'BLINN' });\nvar Phong = new ShadingModelClass({ index: 3, str: 'PHONG' });\nvar typeList = [Unknown, Constant, Lambert, BlinnPhong, Phong];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nvar ShadingModel = Object.freeze({ Unknown: Unknown, Constant: Constant, Lambert: Lambert, BlinnPhong: BlinnPhong, Phong: Phong, from: from });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/ShadingModel.ts?");

/***/ }),

/***/ "./src/foundation/definitions/TextureParameter.ts":
/*!********************************************************!*\
  !*** ./src/foundation/definitions/TextureParameter.ts ***!
  \********************************************************/
/*! exports provided: TextureParameter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TextureParameter\", function() { return TextureParameter; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar TextureParameterClass = /** @class */ (function (_super) {\n    __extends(TextureParameterClass, _super);\n    function TextureParameterClass(_a) {\n        var index = _a.index, str = _a.str;\n        return _super.call(this, { index: index, str: str }) || this;\n    }\n    return TextureParameterClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar Nearest = new TextureParameterClass({ index: 0x2600, str: 'NEAREST' });\nvar Linear = new TextureParameterClass({ index: 0x2601, str: 'LINEAR' });\nvar LinearMipmapLinear = new TextureParameterClass({ index: 0x2703, str: 'LINEAR_MIPMAP_LINEAR' });\nvar TextureMagFilter = new TextureParameterClass({ index: 0x2800, str: 'TEXTURE_MAG_FILTER' });\nvar TextureMinFilter = new TextureParameterClass({ index: 0x2801, str: 'TEXTURE_MIN_FILTER' });\nvar TextureWrapS = new TextureParameterClass({ index: 0x2802, str: 'TEXTURE_WRAP_S' });\nvar TextureWrapT = new TextureParameterClass({ index: 0x2803, str: 'TEXTURE_WRAP_T' });\nvar Texture2D = new TextureParameterClass({ index: 0x0DE1, str: 'TEXTURE_2D' });\nvar Texture = new TextureParameterClass({ index: 0x1702, str: 'TEXTURE' });\nvar Texture0 = new TextureParameterClass({ index: 0x84C0, str: 'TEXTURE0' });\nvar Texture1 = new TextureParameterClass({ index: 0x84C1, str: 'TEXTURE1' });\nvar ActiveTexture = new TextureParameterClass({ index: 0x84E0, str: 'ACTIVE_TEXTURE' });\nvar Repeat = new TextureParameterClass({ index: 0x2901, str: 'REPEAT' });\nvar ClampToEdge = new TextureParameterClass({ index: 0x812F, str: 'CLAMP_TO_EDGE' });\nvar RGB8 = new TextureParameterClass({ index: 0x8051, str: 'RGB8' });\nvar RGBA8 = new TextureParameterClass({ index: 0x8058, str: 'RGBA8' });\nvar RGB10_A2 = new TextureParameterClass({ index: 0x8059, str: 'RGB10_A2' });\nvar RGB16F = new TextureParameterClass({ index: 0x881B, str: 'RGB16F' });\nvar RGB32F = new TextureParameterClass({ index: 0x8815, str: 'RGB32F' });\nvar RGBA16F = new TextureParameterClass({ index: 0x881A, str: 'RGBA16F' });\nvar RGBA32F = new TextureParameterClass({ index: 0x8814, str: 'RGBA32F' });\nvar Depth16 = new TextureParameterClass({ index: 0x81A5, str: 'DEPTH_COMPONENT16' });\nvar Depth24 = new TextureParameterClass({ index: 0x81A6, str: 'DEPTH_COMPONENT24' });\nvar Depth32F = new TextureParameterClass({ index: 0x8CAC, str: 'DEPTH_COMPONENT32F' });\nvar Depth24Stencil8 = new TextureParameterClass({ index: 0x88F0, str: 'DEPTH24_STENCIL8' });\nvar Depth32FStencil8 = new TextureParameterClass({ index: 0x8CAD, str: 'DEPTH32F_STENCIL8' });\nvar typeList = [Nearest, Linear, LinearMipmapLinear, TextureMagFilter, TextureMinFilter, TextureWrapS, TextureWrapT, Texture2D, Texture, Texture0, Texture1, ActiveTexture,\n    Repeat, ClampToEdge, RGB8, RGBA8, RGB10_A2, RGB16F, RGB32F, RGBA16F, RGBA32F, Depth16, Depth24, Depth32F, Depth24Stencil8, Depth32FStencil8];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nvar TextureParameter = Object.freeze({ Nearest: Nearest, Linear: Linear, LinearMipmapLinear: LinearMipmapLinear, TextureMagFilter: TextureMagFilter, TextureMinFilter: TextureMinFilter, TextureWrapS: TextureWrapS, TextureWrapT: TextureWrapT, Texture2D: Texture2D, Texture: Texture,\n    Texture0: Texture0, Texture1: Texture1, ActiveTexture: ActiveTexture, Repeat: Repeat, ClampToEdge: ClampToEdge, RGB8: RGB8, RGBA8: RGBA8, RGB10_A2: RGB10_A2, RGB16F: RGB16F, RGB32F: RGB32F, RGBA16F: RGBA16F, RGBA32F: RGBA32F, Depth16: Depth16, Depth24: Depth24, Depth32F: Depth32F, Depth24Stencil8: Depth24Stencil8, Depth32FStencil8: Depth32FStencil8 });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/TextureParameter.ts?");

/***/ }),

/***/ "./src/foundation/definitions/VertexAttribute.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/definitions/VertexAttribute.ts ***!
  \*******************************************************/
/*! exports provided: VertexAttributeClass, VertexAttribute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VertexAttributeClass\", function() { return VertexAttributeClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VertexAttribute\", function() { return VertexAttribute; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar VertexAttributeClass = /** @class */ (function (_super) {\n    __extends(VertexAttributeClass, _super);\n    function VertexAttributeClass(_a) {\n        var index = _a.index, str = _a.str, shaderStr = _a.shaderStr, attributeSlot = _a.attributeSlot;\n        var _this = _super.call(this, { index: index, str: str }) || this;\n        _this.__attributeSlot = attributeSlot;\n        _this.__shaderStr = shaderStr;\n        return _this;\n    }\n    VertexAttributeClass.prototype.getAttributeSlot = function () {\n        return this.__attributeSlot;\n    };\n    Object.defineProperty(VertexAttributeClass.prototype, \"shaderStr\", {\n        get: function () {\n            return this.__shaderStr;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return VertexAttributeClass;\n}(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\n\nvar Unknown = new VertexAttributeClass({ index: -1, str: 'UNKNOWN', shaderStr: 'a_unknown', attributeSlot: -1 });\nvar Position = new VertexAttributeClass({ index: 0, str: 'POSITION', shaderStr: 'a_position', attributeSlot: 0 });\nvar Normal = new VertexAttributeClass({ index: 1, str: 'NORMAL', shaderStr: 'a_normal', attributeSlot: 1 });\nvar Tangent = new VertexAttributeClass({ index: 2, str: 'TANGENT', shaderStr: 'a_tangent', attributeSlot: 2 });\nvar Texcoord0 = new VertexAttributeClass({ index: 3, str: 'TEXCOORD_0', shaderStr: 'a_texcoord_0', attributeSlot: 3 });\nvar Texcoord1 = new VertexAttributeClass({ index: 4, str: 'TEXCOORD_1', shaderStr: 'a_texcoord_1', attributeSlot: 4 });\nvar Color0 = new VertexAttributeClass({ index: 5, str: 'COLOR_0', shaderStr: 'a_color_0', attributeSlot: 5 });\nvar Joints0 = new VertexAttributeClass({ index: 6, str: 'JOINTS_0', shaderStr: 'a_joints_0', attributeSlot: 6 });\nvar Weights0 = new VertexAttributeClass({ index: 7, str: 'WEIGHTS_0', shaderStr: 'a_weights_0', attributeSlot: 7 });\nvar Instance = new VertexAttributeClass({ index: 8, str: 'INSTANCE', shaderStr: 'a_instance', attributeSlot: 8 });\nvar FaceNormal = new VertexAttributeClass({ index: 9, str: 'FACE_NORMAL', shaderStr: 'a_faceNormal', attributeSlot: 9 });\nvar BaryCentricCoord = new VertexAttributeClass({ index: 10, str: 'BARY_CENTRIC_COORD', shaderStr: 'a_baryCentricCoord', attributeSlot: 10 });\nvar typeList = [Unknown, Position, Normal, Tangent, Texcoord0, Texcoord1, Color0, Joints0, Weights0, Instance, FaceNormal, BaryCentricCoord];\nvar AttributeTypeNumber = 11;\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList: typeList, str: str });\n}\nvar VertexAttribute = Object.freeze({\n    Unknown: Unknown, Position: Position, Normal: Normal, Tangent: Tangent, Texcoord0: Texcoord0, Texcoord1: Texcoord1, Color0: Color0, Joints0: Joints0, Weights0: Weights0, Instance: Instance, FaceNormal: FaceNormal, BaryCentricCoord: BaryCentricCoord, AttributeTypeNumber: AttributeTypeNumber, from: from, fromString: fromString\n});\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/VertexAttribute.ts?");

/***/ }),

/***/ "./src/foundation/exporter/Gltf2Exporter.ts":
/*!**************************************************!*\
  !*** ./src/foundation/exporter/Gltf2Exporter.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _components_MeshComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../textures/AbstractTexture */ \"./src/foundation/textures/AbstractTexture.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n\n\n\n\n\nvar Gltf2Exporter = /** @class */ (function () {\n    function Gltf2Exporter() {\n    }\n    Gltf2Exporter.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new Gltf2Exporter();\n        }\n        return this.__instance;\n    };\n    Gltf2Exporter.prototype.export = function (filename) {\n        var entities = Gltf2Exporter.__entityRepository._getEntities();\n        var json = {\n            \"asset\": {\n                \"version\": \"2.0\",\n                \"generator\": \"Rhodonite (\" + window['Rn'].VERSION + \")\"\n            }\n        };\n        var fileName = filename ? filename : 'Rhodonite_' + (new Date()).getTime();\n        json.buffers = [{\n                'uri': fileName + '.bin'\n            }];\n        json.bufferViews = [];\n        json.accessors = [];\n        json.materials = [{\n                \"pbrMetallicRoughness\": {\n                    \"baseColorFactor\": [\n                        1.0,\n                        1.0,\n                        1.0,\n                        1.0\n                    ]\n                }\n            }];\n        this.countMeshes(json, entities);\n        this.createNodes(json, entities);\n        this.createMeshBinaryMetaData(json, entities);\n        this.createMeshes(json, entities);\n        this.createMaterials(json, entities);\n        var arraybuffer = this.createWriteBinary(json, entities);\n        this.download(json, fileName, arraybuffer);\n    };\n    Gltf2Exporter.prototype.createWriteBinary = function (json, entities) {\n        var buffer = new ArrayBuffer(json.buffers[0].byteLength);\n        var dataView = new DataView(buffer);\n        for (var i = 0; i < json.accessors.length; i++) {\n            var accessor = json.accessors[i];\n            var rnAccessor = accessor.accessor;\n            var compositionType = rnAccessor.compositionType;\n            var componentType = rnAccessor.componentType;\n            var dataViewSetter = rnAccessor.getDataViewSetter(componentType);\n            var attributeCount = accessor.count;\n            var bufferview = json.bufferViews[accessor.bufferView];\n            var bufferViewByteOffset = bufferview.byteOffset;\n            for (var k = 0; k < attributeCount; k++) {\n                if (compositionType.getNumberOfComponents() === 1) {\n                    var byteIndex = componentType.getSizeInBytes() * k;\n                    var value = rnAccessor.getScalar(k, {});\n                    dataView[dataViewSetter](bufferViewByteOffset + byteIndex, value, true);\n                }\n                else if (compositionType.getNumberOfComponents() === 2) {\n                    var array = rnAccessor.getVec2AsArray(k, {});\n                    for (var l = 0; l < 2; l++) {\n                        dataView[dataViewSetter](bufferViewByteOffset + componentType.getSizeInBytes() * (k * 2 + l), array[l], true);\n                    }\n                }\n                else if (compositionType.getNumberOfComponents() === 3) {\n                    var array = rnAccessor.getVec3AsArray(k, {});\n                    for (var l = 0; l < 3; l++) {\n                        dataView[dataViewSetter](bufferViewByteOffset + componentType.getSizeInBytes() * (k * 3 + l), array[l], true);\n                    }\n                }\n                else if (compositionType.getNumberOfComponents() === 4) {\n                    var array = rnAccessor.getVec4AsArray(k, {});\n                    for (var l = 0; l < 4; l++) {\n                        dataView[dataViewSetter](bufferViewByteOffset + componentType.getSizeInBytes() * (k * 4 + l), array[l], true);\n                    }\n                }\n            }\n            accessor.accessor = void 0;\n        }\n        return buffer;\n    };\n    Gltf2Exporter.prototype.countMeshes = function (json, entities) {\n        var count = 0;\n        json.meshes = [];\n        for (var i = 0; i < entities.length; i++) {\n            var entity = entities[i];\n            var meshComponent = entity.getComponent(_components_MeshComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n            if (meshComponent) {\n                entity.gltfMeshIndex = count++;\n            }\n        }\n    };\n    Gltf2Exporter.prototype.createMeshes = function (json, entities) {\n        var count = 0;\n        json.meshes = [];\n        for (var i = 0; i < entities.length; i++) {\n            var entity = entities[i];\n            var meshComponent = entity.getComponent(_components_MeshComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n            if (meshComponent) {\n                json.meshes[count] = {};\n                var mesh = json.meshes[count];\n                mesh.primitives = [];\n                var primitiveCount = meshComponent.getPrimitiveNumber();\n                for (var j = 0; j < primitiveCount; j++) {\n                    mesh.primitives[j] = {};\n                    var primitive = mesh.primitives[j];\n                    var rnPrimitive = meshComponent.getPrimitiveAt(j);\n                    var indicesAccessor = rnPrimitive.indicesAccessor;\n                    if (indicesAccessor) {\n                        primitive.indices = indicesAccessor.gltfAccessorIndex;\n                        primitive.mode = rnPrimitive.primitiveMode.index;\n                    }\n                    var attributeAccessors = rnPrimitive.attributeAccessors;\n                    primitive.attributes = {};\n                    var attributes = primitive.attributes;\n                    for (var k = 0; k < attributeAccessors.length; k++) {\n                        var attributeAccessor = attributeAccessors[k];\n                        attributes[rnPrimitive.attributeSemantics[k].str] = attributeAccessor.gltfAccessorIndex;\n                    }\n                    primitive.material = 0;\n                }\n                entity.gltfMeshIndex = count++;\n            }\n        }\n    };\n    Gltf2Exporter.prototype.createMaterials = function (json, entities) {\n        var countMesh = 0;\n        var countMaterial = 0;\n        var countTexture = 0;\n        var countImage = 0;\n        json.materials = [];\n        json.textures = [];\n        json.samplers = [];\n        json.images = [];\n        json.samplers[0] = {\n            \"magFilter\": 9729,\n            \"minFilter\": 9987,\n            \"wrapS\": 10497,\n            \"wrapT\": 10497\n        };\n        for (var i = 0; i < entities.length; i++) {\n            var entity = entities[i];\n            var meshComponent = entity.getComponent(_components_MeshComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n            if (meshComponent) {\n                var mesh = json.meshes[countMesh++];\n                var primitiveCount = meshComponent.getPrimitiveNumber();\n                for (var j = 0; j < primitiveCount; j++) {\n                    var rnPrimitive = meshComponent.getPrimitiveAt(j);\n                    var primitive = mesh.primitives[j];\n                    var rnMaterial = rnPrimitive.material;\n                    var colorParam = void 0;\n                    var metallic = 1.0;\n                    var roughness = 1.0;\n                    if (rnMaterial != null) {\n                        colorParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemantics\"].BaseColorFactor);\n                        if (colorParam == null) {\n                            colorParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemantics\"].DiffuseColorFactor);\n                        }\n                        else {\n                            metallic = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemantics\"].MetallicRoughnessFactor).x;\n                            roughness = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemantics\"].MetallicRoughnessFactor).y;\n                        }\n                    }\n                    else {\n                        colorParam = new _math_Vector4__WEBPACK_IMPORTED_MODULE_4__[\"default\"](1, 1, 1, 1);\n                    }\n                    var material = {\n                        \"pbrMetallicRoughness\": {\n                            \"baseColorFactor\": Array.prototype.slice.call(colorParam.v),\n                            \"metallicFactor\": metallic,\n                            \"roughnessFactor\": roughness\n                        }\n                    };\n                    if (rnMaterial) {\n                        material.alphaMode = rnMaterial.alphaMode.str;\n                        var processTexture = function (rnTexture) {\n                            if (rnTexture && rnTexture.width !== 1 && rnTexture.height !== 1) {\n                                var imageIndex = countImage;\n                                var match = false;\n                                for (var k = 0; k < json.images.length; k++) {\n                                    var image = json.images[k];\n                                    if (image.uri === rnTexture.name) {\n                                        imageIndex = k;\n                                        match = true;\n                                    }\n                                }\n                                if (!match) {\n                                    json.images[countImage++] = {\n                                        uri: rnTexture.name\n                                    };\n                                    var htmlCanvasElement = rnTexture.htmlCanvasElement;\n                                    if (htmlCanvasElement) {\n                                        var blob = htmlCanvasElement.toBlob(function (blob) {\n                                            var a = document.createElement('a');\n                                            var e = document.createEvent('MouseEvent');\n                                            e.initEvent(\"click\", true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);\n                                            a.href = URL.createObjectURL(blob);\n                                            a.download = rnTexture.name;\n                                            a.dispatchEvent(e);\n                                        });\n                                    }\n                                }\n                                json.textures[countTexture] = {\n                                    sampler: 0,\n                                    source: imageIndex\n                                };\n                                return countTexture++;\n                            }\n                        };\n                        var textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemantics\"].BaseColorTexture);\n                        var rnTexture = void 0;\n                        var textureIndex = void 0;\n                        if (textureParam != null) {\n                            rnTexture = _textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getRhodoniteTexture(textureParam.y);\n                            textureIndex = processTexture(rnTexture);\n                            if (textureIndex != null) {\n                                material.pbrMetallicRoughness.baseColorTexture = { index: textureIndex };\n                            }\n                        }\n                        else {\n                            textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemantics\"].DiffuseColorTexture);\n                            if (textureParam != null) {\n                                var rnTexture_1 = _textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getRhodoniteTexture(textureParam.y);\n                                var textureIndex_1 = processTexture(rnTexture_1);\n                                if (textureIndex_1 != null) {\n                                    material.pbrMetallicRoughness.baseColorTexture = { index: textureIndex_1 };\n                                }\n                            }\n                        }\n                        textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemantics\"].MetallicRoughnessTexture);\n                        rnTexture = _textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getRhodoniteTexture(textureParam.y);\n                        textureIndex = processTexture(rnTexture);\n                        if (textureIndex != null) {\n                            material.pbrMetallicRoughness.metallicRoughnessTexture = { index: textureIndex };\n                        }\n                        textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemantics\"].NormalTexture);\n                        rnTexture = _textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getRhodoniteTexture(textureParam.y);\n                        textureIndex = processTexture(rnTexture);\n                        if (textureIndex != null) {\n                            material.normalTexture = { index: textureIndex };\n                        }\n                        textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemantics\"].OcclusionTexture);\n                        rnTexture = _textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getRhodoniteTexture(textureParam.y);\n                        textureIndex = processTexture(rnTexture);\n                        if (textureIndex != null) {\n                            material.occlusionTexture = { index: textureIndex };\n                        }\n                        textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemantics\"].EmissiveTexture);\n                        rnTexture = _textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getRhodoniteTexture(textureParam.y);\n                        textureIndex = processTexture(rnTexture);\n                        if (textureIndex != null) {\n                            material.emissiveTexture = { index: textureIndex };\n                        }\n                    }\n                    json.materials.push(material);\n                    primitive.material = countMaterial++;\n                }\n            }\n        }\n    };\n    Gltf2Exporter.prototype.createNodes = function (json, entities) {\n        json.nodes = [];\n        json.scenes = [{ 'nodes': [] }];\n        var scene = json.scenes[0];\n        var nodes = json.nodes;\n        for (var i = 0; i < entities.length; i++) {\n            var entity = entities[i];\n            entity.gltfNodeIndex = i;\n        }\n        for (var i = 0; i < entities.length; i++) {\n            var entity = entities[i];\n            nodes[i] = {};\n            var node = nodes[i];\n            // node.name\n            node.name = entity.uniqueName;\n            // node.children\n            node.children = [];\n            var sceneGraphComponent = entity.getSceneGraph();\n            var children = sceneGraphComponent.children;\n            for (var j = 0; j < children.length; j++) {\n                var child = children[j];\n                node.children.push(child.entity.gltfNodeIndex);\n            }\n            // matrix\n            node.matrix = Array.prototype.slice.call(entity.getTransform().matrix.v);\n            // mesh\n            node.mesh = entity.gltfMeshIndex;\n            if (sceneGraphComponent.parent == null) {\n                scene.nodes.push(i);\n            }\n        }\n    };\n    Gltf2Exporter.prototype.createMeshBinaryMetaData = function (json, entities) {\n        var count = 0;\n        var bufferByteLength = 0;\n        for (var i = 0; i < entities.length; i++) {\n            var entity = entities[i];\n            var meshComponent = entity.getComponent(_components_MeshComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n            if (meshComponent) {\n                var primitiveCount = meshComponent.getPrimitiveNumber();\n                for (var j = 0; j < primitiveCount; j++) {\n                    var primitive = meshComponent.getPrimitiveAt(j);\n                    var indicesAccessor = primitive.indicesAccessor;\n                    if (indicesAccessor) {\n                        // BufferView\n                        var match = false;\n                        for (var k = 0; k < json.bufferViews.length; k++) {\n                            var bufferview = json.bufferViews[k];\n                            if (bufferview.rnAccessor === indicesAccessor) {\n                                match = true;\n                                indicesAccessor.gltfAccessorIndex = k;\n                            }\n                        }\n                        if (!match) {\n                            json.bufferViews[count] = {};\n                            var bufferview = json.bufferViews[count];\n                            bufferview.rnAccessor = indicesAccessor;\n                            bufferview.buffer = 0;\n                            bufferview.byteLength = indicesAccessor.byteLength;\n                            bufferview.byteOffset = bufferByteLength;\n                            bufferview.target = 34963;\n                            // Accessor\n                            json.accessors[count] = {};\n                            var accessor = json.accessors[count];\n                            accessor.bufferView = count;\n                            accessor.byteOffset = 0; //indicesAccessor.byteOffsetInBufferView;\n                            accessor.componentType = 5123;\n                            accessor.count = indicesAccessor.elementCount;\n                            indicesAccessor.calcMinMax();\n                            accessor.max = [indicesAccessor.max];\n                            accessor.min = [indicesAccessor.min];\n                            accessor.type = 'SCALAR';\n                            bufferByteLength += indicesAccessor.byteLength;\n                            indicesAccessor.gltfAccessorIndex = count;\n                            count++;\n                            accessor.accessor = indicesAccessor;\n                        }\n                    }\n                    var attributeAccessors = primitive.attributeAccessors;\n                    for (var j_1 = 0; j_1 < attributeAccessors.length; j_1++) {\n                        var attributeAccessor = attributeAccessors[j_1];\n                        var match = false;\n                        for (var k = 0; k < json.bufferViews.length; k++) {\n                            var bufferview = json.bufferViews[k];\n                            if (bufferview.rnAccessor === attributeAccessor) {\n                                match = true;\n                                attributeAccessor.gltfAccessorIndex = k;\n                            }\n                        }\n                        if (!match) {\n                            // BufferView\n                            json.bufferViews[count] = {};\n                            var bufferview = json.bufferViews[count];\n                            bufferview.rnAccessor = attributeAccessor;\n                            bufferview.buffer = 0;\n                            bufferview.byteLength = attributeAccessors[j_1].byteLength;\n                            bufferview.byteOffset = bufferByteLength;\n                            bufferview.target = 34962;\n                            // Accessor\n                            json.accessors[count] = {};\n                            var accessor = json.accessors[count];\n                            accessor.bufferView = count;\n                            accessor.byteOffset = 0; //attributeAccessor.byteOffsetInBufferView;\n                            accessor.componentType = 5126;\n                            accessor.count = attributeAccessor.elementCount;\n                            attributeAccessor.calcMinMax();\n                            accessor.max = Array.prototype.slice.call(attributeAccessor.max);\n                            accessor.min = Array.prototype.slice.call(attributeAccessor.min);\n                            accessor.type = 'VEC' + accessor.max.length;\n                            bufferByteLength += attributeAccessor.byteLength;\n                            attributeAccessor.gltfAccessorIndex = count;\n                            count++;\n                            accessor.accessor = attributeAccessor;\n                        }\n                    }\n                }\n            }\n        }\n        json.bufferViews.forEach(function (bufferView) {\n            bufferView.rnAccessor = void 0;\n        });\n        var buffer = json.buffers[0];\n        buffer.byteLength = bufferByteLength;\n    };\n    Gltf2Exporter.prototype.download = function (json, filename, arraybuffer) {\n        var a = document.createElement('a');\n        var e = document.createEvent('MouseEvent');\n        a.download = filename + '.gltf';\n        a.href = \"data:application/octet-stream,\" + encodeURIComponent(JSON.stringify(json));\n        e.initEvent(\"click\", true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);\n        a.dispatchEvent(e);\n        a = document.createElement('a');\n        e = document.createEvent('MouseEvent');\n        e.initEvent(\"click\", true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);\n        var blob = new Blob([arraybuffer], { type: \"octet/stream\" }), url = window.URL.createObjectURL(blob);\n        a.download = filename + '.bin';\n        a.href = url;\n        a.dispatchEvent(e);\n    };\n    Gltf2Exporter.__entityRepository = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n    return Gltf2Exporter;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (Gltf2Exporter);\n\n\n//# sourceURL=webpack:///./src/foundation/exporter/Gltf2Exporter.ts?");

/***/ }),

/***/ "./src/foundation/geometry/Plane.ts":
/*!******************************************!*\
  !*** ./src/foundation/geometry/Plane.ts ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Primitive__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Primitive */ \"./src/foundation/geometry/Primitive.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ \"./src/foundation/definitions/PrimitiveMode.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\nvar Plane = /** @class */ (function (_super) {\n    __extends(Plane, _super);\n    function Plane() {\n        return _super.call(this) || this;\n    }\n    Plane.prototype.generate = function (_a) {\n        var width = _a.width, height = _a.height, uSpan = _a.uSpan, vSpan = _a.vSpan, _b = _a.isUVRepeat, isUVRepeat = _b === void 0 ? false : _b, material = _a.material;\n        var positions = [];\n        for (var i = 0; i <= vSpan; i++) {\n            for (var j = 0; j <= uSpan; j++) {\n                positions.push((j / uSpan - 1 / 2) * width);\n                positions.push(0);\n                positions.push((i / vSpan - 1 / 2) * height);\n            }\n        }\n        var indices = [];\n        for (var i = 0; i < vSpan; i++) {\n            var degenerate_left_index = 0;\n            var degenerate_right_index = 0;\n            for (var j = 0; j <= uSpan; j++) {\n                indices.push(i * (uSpan + 1) + j);\n                indices.push((i + 1) * (uSpan + 1) + j);\n                if (j === 0) {\n                    degenerate_left_index = (i + 1) * (uSpan + 1) + j;\n                }\n                else if (j === uSpan) {\n                    degenerate_right_index = (i + 1) * (uSpan + 1) + j;\n                }\n            }\n            indices.push(degenerate_right_index);\n            indices.push(degenerate_left_index);\n        }\n        var normals = [];\n        for (var i = 0; i <= vSpan; i++) {\n            for (var j = 0; j <= uSpan; j++) {\n                normals.push(0);\n                normals.push(1);\n                normals.push(0);\n            }\n        }\n        var texcoords = [];\n        for (var i = 0; i <= vSpan; i++) {\n            for (var j = 0; j <= uSpan; j++) {\n                if (isUVRepeat) {\n                    texcoords.push(j);\n                    texcoords.push(i);\n                }\n                else {\n                    texcoords.push(j / uSpan);\n                    texcoords.push(i / vSpan);\n                }\n            }\n        }\n        var attributeCompositionTypes = [_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec3, _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec3, _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec2];\n        var attributeSemantics = [_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Position, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Normal, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Texcoord0];\n        var primitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_3__[\"PrimitiveMode\"].TriangleStrip;\n        var buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_4__[\"BufferUse\"].GPUVertexData);\n        var indicesBufferView = buffer.takeBufferView({ byteLengthToNeed: indices.length * 2 /*byte*/, byteStride: 0, isAoS: false });\n        var indicesAccessor = indicesBufferView.takeAccessor({\n            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Scalar,\n            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].UnsignedShort,\n            count: indices.length\n        });\n        for (var i = 0; i < indices.length; i++) {\n            indicesAccessor.setScalar(i, indices[i], {});\n        }\n        var attributes = [new Float32Array(positions), new Float32Array(normals), new Float32Array(texcoords)];\n        var sumOfAttributesByteSize = 0;\n        attributes.forEach(function (attribute) {\n            sumOfAttributesByteSize += attribute.byteLength;\n        });\n        var attributesBufferView = buffer.takeBufferView({ byteLengthToNeed: sumOfAttributesByteSize, byteStride: 0, isAoS: false });\n        var attributeAccessors = [];\n        var attributeComponentTypes = [];\n        attributes.forEach(function (attribute, i) {\n            attributeComponentTypes[i] = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].fromTypedArray(attributes[i]);\n            var accessor = attributesBufferView.takeAccessor({\n                compositionType: attributeCompositionTypes[i],\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].fromTypedArray(attributes[i]),\n                count: attribute.byteLength / attributeCompositionTypes[i].getNumberOfComponents() / attributeComponentTypes[i].getSizeInBytes()\n            });\n            accessor.copyFromTypedArray(attribute);\n            attributeAccessors.push(accessor);\n        });\n        var attributeMap = new Map();\n        for (var i = 0; i < attributeSemantics.length; i++) {\n            attributeMap.set(attributeSemantics[i], attributeAccessors[i]);\n        }\n        this.setData(attributeMap, primitiveMode, material, indicesAccessor);\n    };\n    return Plane;\n}(_Primitive__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (Plane);\n\n\n//# sourceURL=webpack:///./src/foundation/geometry/Plane.ts?");

/***/ }),

/***/ "./src/foundation/geometry/Primitive.ts":
/*!**********************************************!*\
  !*** ./src/foundation/geometry/Primitive.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ \"./src/foundation/definitions/PrimitiveMode.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _math_AABB__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/AABB */ \"./src/foundation/math/AABB.ts\");\n/* harmony import */ var _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../helpers/MaterialHelper */ \"./src/foundation/helpers/MaterialHelper.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\nvar Primitive = /** @class */ (function (_super) {\n    __extends(Primitive, _super);\n    function Primitive() {\n        var _this = _super.call(this) || this;\n        _this.__mode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].Unknown;\n        _this.__attributes = new Map();\n        _this.__primitiveUid = -1; // start ID from zero\n        _this.__aabb = new _math_AABB__WEBPACK_IMPORTED_MODULE_7__[\"default\"]();\n        _this.__targets = [];\n        return _this;\n    }\n    Primitive.prototype.setData = function (attributes, mode, material, indicesAccessor) {\n        this.__indices = indicesAccessor;\n        this.__attributes = attributes;\n        if (material != null) {\n            this.material = material;\n        }\n        else {\n            this.material = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_8__[\"default\"].createClassicUberMaterial();\n        }\n        this.__mode = mode;\n        this.__primitiveUid = Primitive.__primitiveCount++;\n        // if (Primitive.__headerAccessor == null) {\n        //   // primitive 0\n        //   // prim0.indices.byteOffset, prim0.indices.componentSizeInByte, prim0.indices.indicesLength, null\n        //   //   prim0.attrb0.byteOffset, prim0.attrib0.byteStride, prim0.attrib0.compopisionN, prim0.attrib0.componentSizeInByte\n        //   //   prim0.attrb1.byteOffset, prim0.attrib1.byteStride, prim0.attrib1.compopisionN, prim0.attrib1.componentSizeInByte\n        //   //   ...\n        //   //   prim0.attrb7.byteOffset, prim0.attrib7.byteStride, prim0.attrib7.compopisionN, prim0.attrib7.componentSizeInByte\n        //   // primitive 1\n        //   // prim1.indices.byteOffset, prim1.indices.componentSizeInByte, prim0.indices.indicesLength, null\n        //   //   prim1.attrb0.byteOffset, prim1.attrib0.byteStride, prim1.attrib0.compopisionN, prim1.attrib0.componentSizeInByte\n        //   //   prim1.attrb1.byteOffset, prim1.attrib1.byteStride, prim1.attrib1.compopisionN, prim1.attrib1.componentSizeInByte\n        //   //   ...\n        //   //   prim1.attrb7.byteOffset, prim1.attrib7.byteStride, prim1.attrib7.compopisionN, prim1.attrib7.componentSizeInByte\n        //   const buffer = MemoryManager.getInstance().getBuffer(BufferUse.UBOGeneric);\n        //   const bufferView = buffer.takeBufferView({byteLengthToNeed: ((1*4) + (8*4)) * 4/*byte*/ * Primitive.maxPrimitiveCount, byteStride: 64, isAoS:false });\n        //   Primitive.__headerAccessor = bufferView.takeAccessor(\n        //     {compositionType: CompositionType.Vec4, componentType: ComponentType.Float, count: 9 * Primitive.maxPrimitiveCount})\n        // }\n        // const attributeNumOfPrimitive = 1/*indices*/ + 8/*vertexAttributes*/;\n        // if (this.indicesAccessor != null) {\n        //   Primitive.__headerAccessor.setVec4(attributeNumOfPrimitive * this.__primitiveUid + 0 /* 0 means indices */,\n        //     this.indicesAccessor.byteOffsetInBuffer, this.indicesAccessor.componentSizeInBytes, this.indicesAccessor.byteLength / this.indicesAccessor.componentSizeInBytes, -1 );\n        // } else {\n        //   Primitive.__headerAccessor.setVec4(attributeNumOfPrimitive * this.__primitiveUid + 0 /* 0 means indices */, -1, -1, -1, -1 );\n        // }\n        // this.attributeAccessors.forEach((attributeAccessor, i)=>{\n        //   Primitive.__headerAccessor!.setVec4(attributeNumOfPrimitive * this.__primitiveUid + i,\n        //     attributeAccessor.byteOffsetInBuffer, attributeAccessor.byteStride, attributeAccessor.numberOfComponents, attributeAccessor.componentSizeInBytes);\n        // });\n    };\n    Object.defineProperty(Primitive, \"maxPrimitiveCount\", {\n        get: function () {\n            return 500;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Primitive, \"headerAccessor\", {\n        get: function () {\n            return this.__headerAccessor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Primitive.createPrimitive = function (_a) {\n        var indices = _a.indices, attributeCompositionTypes = _a.attributeCompositionTypes, attributeSemantics = _a.attributeSemantics, attributes = _a.attributes, material = _a.material, primitiveMode = _a.primitiveMode;\n        var buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_6__[\"BufferUse\"].GPUVertexData);\n        var indicesComponentType;\n        var indicesBufferView;\n        var indicesAccessor;\n        if (indices != null) {\n            indicesComponentType = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].fromTypedArray(indices);\n            indicesBufferView = buffer.takeBufferView({ byteLengthToNeed: indices.byteLength, byteStride: 0, isAoS: false });\n            indicesAccessor = indicesBufferView.takeAccessor({\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_5__[\"CompositionType\"].Scalar,\n                componentType: indicesComponentType,\n                count: indices.byteLength / indicesComponentType.getSizeInBytes()\n            });\n            // copy indices\n            for (var i = 0; i < indices.byteLength / indicesAccessor.componentSizeInBytes; i++) {\n                indicesAccessor.setScalar(i, indices[i], {});\n            }\n        }\n        var sumOfAttributesByteSize = 0;\n        attributes.forEach(function (attribute) {\n            sumOfAttributesByteSize += attribute.byteLength;\n        });\n        var attributesBufferView = buffer.takeBufferView({ byteLengthToNeed: sumOfAttributesByteSize, byteStride: 0, isAoS: false });\n        var attributeAccessors = [];\n        var attributeComponentTypes = [];\n        attributes.forEach(function (attribute, i) {\n            attributeComponentTypes[i] = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].fromTypedArray(attributes[i]);\n            var accessor = attributesBufferView.takeAccessor({\n                compositionType: attributeCompositionTypes[i],\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].fromTypedArray(attributes[i]),\n                count: attribute.byteLength / attributeCompositionTypes[i].getNumberOfComponents() / attributeComponentTypes[i].getSizeInBytes()\n            });\n            accessor.copyFromTypedArray(attribute);\n            attributeAccessors.push(accessor);\n        });\n        var attributeMap = new Map();\n        for (var i = 0; i < attributeSemantics.length; i++) {\n            attributeMap.set(attributeSemantics[i], attributeAccessors[i]);\n        }\n        var primitive = new Primitive();\n        primitive.setData(attributeMap, primitiveMode, material, indicesAccessor);\n        return primitive;\n    };\n    Object.defineProperty(Primitive.prototype, \"indicesAccessor\", {\n        get: function () {\n            return this.__indices;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Primitive.prototype.getVertexCountAsIndicesBased = function () {\n        if (this.indicesAccessor) {\n            return this.indicesAccessor.elementCount;\n        }\n        else {\n            return this.getVertexCountAsVerticesBased();\n        }\n    };\n    Primitive.prototype.getVertexCountAsVerticesBased = function () {\n        var positionAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Position);\n        return positionAccessor.elementCount;\n    };\n    Primitive.prototype.getTriangleCountAsIndicesBased = function () {\n        if (this.indicesAccessor) {\n            switch (this.__mode) {\n                case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].Triangles:\n                    return this.indicesAccessor.elementCount / 3;\n                case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].TriangleStrip:\n                    return this.indicesAccessor.elementCount - 2;\n                case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].TriangleFan:\n                    return this.indicesAccessor.elementCount - 2;\n                default:\n                    return 0;\n            }\n        }\n        else {\n            return this.getTriangleCountAsVerticesBased();\n        }\n    };\n    Primitive.prototype.getTriangleCountAsVerticesBased = function () {\n        var positionAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Position);\n        switch (this.__mode) {\n            case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].Triangles:\n                return positionAccessor.elementCount / 3;\n            case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].TriangleStrip:\n                return positionAccessor.elementCount - 2;\n            case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].TriangleFan:\n                return positionAccessor.elementCount - 2;\n            default:\n                return 0;\n        }\n    };\n    Primitive.prototype.hasIndices = function () {\n        return this.__indices != null;\n    };\n    Object.defineProperty(Primitive.prototype, \"attributeAccessors\", {\n        get: function () {\n            var accessors = [];\n            this.__attributes.forEach(function (accessor, semantic) {\n                accessors.push(accessor);\n            });\n            return accessors;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Primitive.prototype.getAttribute = function (semantic) {\n        return this.__attributes.get(semantic);\n    };\n    Object.defineProperty(Primitive.prototype, \"attributeSemantics\", {\n        get: function () {\n            var semantics = [];\n            this.__attributes.forEach(function (accessor, semantic) {\n                semantics.push(semantic);\n            });\n            return semantics;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Primitive.prototype, \"attributeEntries\", {\n        get: function () {\n            return this.__attributes.entries();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Primitive.prototype, \"attributeCompositionTypes\", {\n        get: function () {\n            var types = [];\n            this.__attributes.forEach(function (accessor, semantic) {\n                types.push(accessor.compositionType);\n            });\n            return types;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Primitive.prototype, \"attributeComponentTypes\", {\n        get: function () {\n            var types = [];\n            this.__attributes.forEach(function (accessor, semantic) {\n                types.push(accessor.componentType);\n            });\n            return types;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Primitive.prototype, \"primitiveMode\", {\n        get: function () {\n            return this.__mode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Primitive.prototype, \"primitiveUid\", {\n        get: function () {\n            return this.__primitiveUid;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Primitive.prototype, \"AABB\", {\n        get: function () {\n            if (this.__aabb.isVanilla()) {\n                var positionAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Position);\n                if (positionAccessor.min == null || positionAccessor.max == null) {\n                    positionAccessor.calcMinMax();\n                }\n                this.__aabb.minPoint = positionAccessor.min;\n                this.__aabb.maxPoint = positionAccessor.max;\n            }\n            return this.__aabb;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Primitive.prototype.setVertexAttribute = function (accessor, vertexSemantics) {\n        this.__attributes.set(vertexSemantics, accessor);\n    };\n    Primitive.prototype.removeIndices = function () {\n        this.__indices = undefined;\n    };\n    Primitive.prototype.setIndices = function (accessor) {\n        this.__indices = accessor;\n    };\n    Primitive.prototype.setTargets = function (targets) {\n        this.__targets = targets;\n    };\n    Object.defineProperty(Primitive.prototype, \"targets\", {\n        get: function () {\n            return this.__targets;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Primitive.__primitiveCount = 0;\n    return Primitive;\n}(_core_RnObject__WEBPACK_IMPORTED_MODULE_2__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (Primitive);\n\n\n//# sourceURL=webpack:///./src/foundation/geometry/Primitive.ts?");

/***/ }),

/***/ "./src/foundation/geometry/Sphere.ts":
/*!*******************************************!*\
  !*** ./src/foundation/geometry/Sphere.ts ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Primitive__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Primitive */ \"./src/foundation/geometry/Primitive.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ \"./src/foundation/definitions/PrimitiveMode.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar Sphere = /** @class */ (function (_super) {\n    __extends(Sphere, _super);\n    function Sphere() {\n        return _super.call(this) || this;\n    }\n    Sphere.prototype.generate = function (_a) {\n        var radius = _a.radius, widthSegments = _a.widthSegments, heightSegments = _a.heightSegments, material = _a.material;\n        var positions = [];\n        var texcoords = [];\n        var normals = [];\n        var shiftValue = 0.00001; // for avoid Singular point\n        for (var latNumber = 0; latNumber <= heightSegments; latNumber++) {\n            var theta = latNumber * Math.PI / heightSegments + shiftValue;\n            var sinTheta = Math.sin(theta);\n            var cosTheta = Math.cos(theta);\n            for (var longNumber = 0; longNumber <= widthSegments; longNumber++) {\n                var phi = longNumber * 2 * Math.PI / widthSegments;\n                var sinPhi = Math.sin(phi);\n                var cosPhi = Math.cos(phi);\n                var x = radius * cosPhi * sinTheta;\n                var y = radius * cosTheta;\n                var z = radius * sinPhi * sinTheta;\n                var position = new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](x, y, z);\n                positions.push(x);\n                positions.push(y);\n                positions.push(z);\n                var u = 1 - (longNumber / widthSegments);\n                var v = latNumber / heightSegments;\n                texcoords.push(u);\n                texcoords.push(v);\n                var normal = _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"].normalize(position);\n                normals.push(normal.x);\n                normals.push(normal.y);\n                normals.push(normal.z);\n            }\n        }\n        // first    first+1\n        //    +-------+\n        //    |     / |\n        //    |   /   |\n        //    | /     |\n        //    +-------+\n        // second   second+1\n        //\n        var indices = [];\n        for (var latNumber = 0; latNumber < heightSegments; latNumber++) {\n            for (var longNumber = 0; longNumber < widthSegments; longNumber++) {\n                var first = (latNumber * (widthSegments + 1)) + longNumber;\n                var second = first + widthSegments + 1;\n                indices.push(first + 1);\n                indices.push(second);\n                indices.push(first);\n                indices.push(first + 1);\n                indices.push(second + 1);\n                indices.push(second);\n            }\n        }\n        var attributeCompositionTypes = [_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec3, _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec3, _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec2];\n        var attributeSemantics = [_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Position, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Normal, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Texcoord0];\n        var primitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_3__[\"PrimitiveMode\"].Triangles;\n        var buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_4__[\"BufferUse\"].GPUVertexData);\n        var indicesBufferView = buffer.takeBufferView({ byteLengthToNeed: indices.length * 2 /*byte*/, byteStride: 0, isAoS: false });\n        var indicesAccessor = indicesBufferView.takeAccessor({\n            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Scalar,\n            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].UnsignedShort,\n            count: indices.length\n        });\n        for (var i = 0; i < indices.length; i++) {\n            indicesAccessor.setScalar(i, indices[i], {});\n        }\n        var attributes = [new Float32Array(positions), new Float32Array(normals), new Float32Array(texcoords)];\n        var sumOfAttributesByteSize = 0;\n        attributes.forEach(function (attribute) {\n            sumOfAttributesByteSize += attribute.byteLength;\n        });\n        var attributesBufferView = buffer.takeBufferView({ byteLengthToNeed: sumOfAttributesByteSize, byteStride: 0, isAoS: false });\n        var attributeAccessors = [];\n        var attributeComponentTypes = [];\n        attributes.forEach(function (attribute, i) {\n            attributeComponentTypes[i] = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].fromTypedArray(attributes[i]);\n            var accessor = attributesBufferView.takeAccessor({\n                compositionType: attributeCompositionTypes[i],\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].fromTypedArray(attributes[i]),\n                count: attribute.byteLength / attributeCompositionTypes[i].getNumberOfComponents() / attributeComponentTypes[i].getSizeInBytes()\n            });\n            accessor.copyFromTypedArray(attribute);\n            attributeAccessors.push(accessor);\n        });\n        var attributeMap = new Map();\n        for (var i = 0; i < attributeSemantics.length; i++) {\n            attributeMap.set(attributeSemantics[i], attributeAccessors[i]);\n        }\n        this.setData(attributeMap, primitiveMode, material, indicesAccessor);\n    };\n    return Sphere;\n}(_Primitive__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (Sphere);\n\n\n//# sourceURL=webpack:///./src/foundation/geometry/Sphere.ts?");

/***/ }),

/***/ "./src/foundation/helpers/MaterialHelper.ts":
/*!**************************************************!*\
  !*** ./src/foundation/helpers/MaterialHelper.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _materials_Material__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../materials/Material */ \"./src/foundation/materials/Material.ts\");\n/* harmony import */ var _materials_PbrShadingMaterialNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../materials/PbrShadingMaterialNode */ \"./src/foundation/materials/PbrShadingMaterialNode.ts\");\n/* harmony import */ var _materials_ClassicShadingSingleMaterialNode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../materials/ClassicShadingSingleMaterialNode */ \"./src/foundation/materials/ClassicShadingSingleMaterialNode.ts\");\n/* harmony import */ var _materials_EnvConstantSingleMaterial__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../materials/EnvConstantSingleMaterial */ \"./src/foundation/materials/EnvConstantSingleMaterial.ts\");\n/* harmony import */ var _materials_FXAA3QualitySingleMaterialNode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../materials/FXAA3QualitySingleMaterialNode */ \"./src/foundation/materials/FXAA3QualitySingleMaterialNode.ts\");\n\n\n\n\n\nfunction createPbrUberMaterial() {\n    var materialNode = new _materials_PbrShadingMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n    materialNode.isSingleOperation = true;\n    var material = new _materials_Material__WEBPACK_IMPORTED_MODULE_0__[\"default\"]([materialNode]);\n    return material;\n}\nfunction createClassicUberMaterial() {\n    var materialNode = new _materials_ClassicShadingSingleMaterialNode__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n    materialNode.isSingleOperation = true;\n    var material = new _materials_Material__WEBPACK_IMPORTED_MODULE_0__[\"default\"]([materialNode]);\n    return material;\n}\nfunction createEnvConstantMaterial() {\n    var materialNode = new _materials_EnvConstantSingleMaterial__WEBPACK_IMPORTED_MODULE_3__[\"default\"];\n    materialNode.isSingleOperation = true;\n    var material = new _materials_Material__WEBPACK_IMPORTED_MODULE_0__[\"default\"]([materialNode]);\n    return material;\n}\nfunction createFXAA3QualityMaterial() {\n    var materialNode = new _materials_FXAA3QualitySingleMaterialNode__WEBPACK_IMPORTED_MODULE_4__[\"default\"];\n    materialNode.isSingleOperation = true;\n    var material = new _materials_Material__WEBPACK_IMPORTED_MODULE_0__[\"default\"]([materialNode]);\n    return material;\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object.freeze({ createPbrUberMaterial: createPbrUberMaterial, createClassicUberMaterial: createClassicUberMaterial, createEnvConstantMaterial: createEnvConstantMaterial, createFXAA3QualityMaterial: createFXAA3QualityMaterial }));\n\n\n//# sourceURL=webpack:///./src/foundation/helpers/MaterialHelper.ts?");

/***/ }),

/***/ "./src/foundation/helpers/RenderableHelper.ts":
/*!****************************************************!*\
  !*** ./src/foundation/helpers/RenderableHelper.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _renderer_FrameBuffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../renderer/FrameBuffer */ \"./src/foundation/renderer/FrameBuffer.ts\");\n/* harmony import */ var _textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../textures/RenderTargetTexture */ \"./src/foundation/textures/RenderTargetTexture.ts\");\n/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/TextureParameter */ \"./src/foundation/definitions/TextureParameter.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/PixelFormat */ \"./src/foundation/definitions/PixelFormat.ts\");\n/* harmony import */ var _textures_RenderBuffer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../textures/RenderBuffer */ \"./src/foundation/textures/RenderBuffer.ts\");\n\n\n\n\n\n\nfunction createTexturesForRenderTarget(width, height, textureNum, _a) {\n    var _b = _a.level, level = _b === void 0 ? 0 : _b, _c = _a.internalFormat, internalFormat = _c === void 0 ? _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_4__[\"PixelFormat\"].RGBA : _c, _d = _a.format, format = _d === void 0 ? _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_4__[\"PixelFormat\"].RGBA : _d, _e = _a.type, type = _e === void 0 ? _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].UnsignedByte : _e, _f = _a.magFilter, magFilter = _f === void 0 ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Linear : _f, _g = _a.minFilter, minFilter = _g === void 0 ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Linear : _g, _h = _a.wrapS, wrapS = _h === void 0 ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].ClampToEdge : _h, _j = _a.wrapT, wrapT = _j === void 0 ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].ClampToEdge : _j;\n    var frameBuffer = new _renderer_FrameBuffer__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n    frameBuffer.create(width, height);\n    for (var i = 0; i < textureNum; i++) {\n        var renderTargetTexture = new _textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n        renderTargetTexture.create({ width: width, height: height, level: level, internalFormat: internalFormat, format: format, type: type, magFilter: magFilter, minFilter: minFilter, wrapS: wrapS, wrapT: wrapT });\n        frameBuffer.setColorAttachmentAt(i, renderTargetTexture);\n    }\n    var renderBuffer = new _textures_RenderBuffer__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n    renderBuffer.create(width, height, _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Depth16);\n    frameBuffer.setDepthAttachment(renderBuffer);\n    return frameBuffer;\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object.freeze({ createTexturesForRenderTarget: createTexturesForRenderTarget }));\n\n\n//# sourceURL=webpack:///./src/foundation/helpers/RenderableHelper.ts?");

/***/ }),

/***/ "./src/foundation/importer/DrcPointCloudImporter.ts":
/*!**********************************************************!*\
  !*** ./src/foundation/importer/DrcPointCloudImporter.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/DataUtil */ \"./src/foundation/misc/DataUtil.ts\");\n/* harmony import */ var _geometry_Primitive__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geometry/Primitive */ \"./src/foundation/geometry/Primitive.ts\");\n/* harmony import */ var _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/MaterialHelper */ \"./src/foundation/helpers/MaterialHelper.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ \"./src/foundation/definitions/PrimitiveMode.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (undefined && undefined.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\n\n\n\n\n\n\nvar DrcPointCloudImporter = /** @class */ (function () {\n    function DrcPointCloudImporter() {\n    }\n    // for ModelConverter,  not implemented yet\n    DrcPointCloudImporter.prototype.importPointCloud = function (gltfUri, textureUri, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var defaultOptions, _a, _b, _c, fileName, splitted, fileExtension, response, err_1, arrayBuffer;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        defaultOptions = {\n                            files: {\n                            //        \"foo.gltf\": content of file as ArrayBuffer,\n                            //        \"foo.bin\": content of file as ArrayBuffer,\n                            //        \"boo.png\": content of file as ArrayBuffer\n                            },\n                            loaderExtension: null,\n                            defaultShaderClass: null,\n                            statesOfElements: [\n                                {\n                                    targets: [],\n                                    states: {\n                                        enable: [\n                                        // 3042,  // BLEND\n                                        ],\n                                        functions: {\n                                        //\"blendFuncSeparate\": [1, 0, 1, 0],\n                                        }\n                                    },\n                                    isTransparent: true,\n                                    opacity: 1.0,\n                                    isTextureImageToLoadPreMultipliedAlpha: false,\n                                }\n                            ],\n                            extendedJson: void 0 //   URI string / JSON Object / ArrayBuffer\n                        };\n                        if (!(options && options.files)) return [3 /*break*/, 4];\n                        _a = [];\n                        for (_b in options.files)\n                            _a.push(_b);\n                        _c = 0;\n                        _d.label = 1;\n                    case 1:\n                        if (!(_c < _a.length)) return [3 /*break*/, 4];\n                        fileName = _a[_c];\n                        splitted = fileName.split('.');\n                        fileExtension = splitted[splitted.length - 1];\n                        if (!(fileExtension === 'gltf' || fileExtension === 'glb')) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.__decodeDraco(options.files[fileName], options, defaultOptions, void 0, textureUri).catch(function (err) {\n                                console.log('this.__decodeDraco error', err);\n                            })];\n                    case 2: return [2 /*return*/, _d.sent()];\n                    case 3:\n                        _c++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        _d.trys.push([4, 6, , 7]);\n                        return [4 /*yield*/, fetch(gltfUri)];\n                    case 5:\n                        response = _d.sent();\n                        return [3 /*break*/, 7];\n                    case 6:\n                        err_1 = _d.sent();\n                        throw new Error('this.__loadFromArrayBuffer: ' + err_1);\n                    case 7:\n                        ;\n                        return [4 /*yield*/, response.arrayBuffer()];\n                    case 8:\n                        arrayBuffer = _d.sent();\n                        return [4 /*yield*/, this.__decodeDraco(arrayBuffer, options, defaultOptions, gltfUri, textureUri).catch(function (err) {\n                                console.log('this.__decodeDraco error', err);\n                            })];\n                    case 9: return [2 /*return*/, _d.sent()];\n                }\n            });\n        });\n    };\n    DrcPointCloudImporter.prototype.__decodeDraco = function (arrayBuffer, options, defaultOptions, gltfUri, textureUri) {\n        return __awaiter(this, void 0, void 0, function () {\n            var gotText, gltfJson;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.__decodeBuffer(arrayBuffer, textureUri).then(function (json) { return __awaiter(_this, void 0, void 0, function () {\n                            return __generator(this, function (_a) {\n                                gotText = JSON.stringify(json);\n                                gltfJson = JSON.parse(gotText);\n                                return [2 /*return*/];\n                            });\n                        }); })];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this._loadAsTextJson(gltfJson, options, defaultOptions, gltfUri).catch(function (err) {\n                                console.log('this.__loadAsTextJson error', err);\n                            })];\n                    case 2: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    DrcPointCloudImporter.prototype.__decodeBuffer = function (arrayBuffer, textureUri) {\n        var draco = new DracoDecoderModule();\n        var decoder = new draco.Decoder();\n        var dracoGeometry = this.__getGeometryFromDracoBuffer(draco, decoder, arrayBuffer);\n        if (dracoGeometry == null) {\n            throw new Error('invalid dracoGeometry.');\n        }\n        if (dracoGeometry.geometryType !== draco.POINT_CLOUD) {\n            throw new Error('invalid geometryType of drc file.');\n        }\n        var posAttId = decoder.GetAttributeId(dracoGeometry, draco.POSITION);\n        if (posAttId === -1) {\n            draco.destroy(decoder);\n            draco.destroy(dracoGeometry);\n            throw new Error('Draco: No position attribute found.');\n        }\n        var geometryAttributes = ['POSITION', 'NORMAL', 'COLOR', 'TEX_COORD'];\n        var numPoints = dracoGeometry.num_points();\n        var attributeDataAll = [];\n        var attributeComponents = [];\n        var bufferLength = 0;\n        for (var i = 0; i < geometryAttributes.length; i++) {\n            var attId = decoder.GetAttributeId(dracoGeometry, draco[geometryAttributes[i]]);\n            if (attId === -1) {\n                geometryAttributes.splice(i, 1);\n                i--;\n                continue;\n            }\n            var attribute = decoder.GetAttribute(dracoGeometry, attId);\n            var attributeData = new draco.DracoFloat32Array();\n            decoder.GetAttributeFloatForAllPoints(dracoGeometry, attribute, attributeData);\n            attributeDataAll[i] = attributeData;\n            var numComponent = attribute.num_components();\n            attributeComponents[i] = numComponent;\n            if (geometryAttributes[i] === 'COLOR') {\n                bufferLength += numPoints * 4;\n            }\n            else {\n                bufferLength += numPoints * numComponent;\n            }\n        }\n        var buffer = new Float32Array(bufferLength);\n        for (var i = 0, currentBufferindex = 0; i < geometryAttributes.length; i++) {\n            if (geometryAttributes[i] === 'COLOR' && attributeComponents[i] === 3) {\n                for (var j = 0; j < numPoints; currentBufferindex += 4, j += 3) {\n                    buffer[currentBufferindex] = attributeDataAll[i].GetValue(j);\n                    buffer[currentBufferindex + 1] = attributeDataAll[i].GetValue(j + 1);\n                    buffer[currentBufferindex + 2] = attributeDataAll[i].GetValue(j + 2);\n                    buffer[currentBufferindex + 3] = 1.0; // alpha value\n                }\n            }\n            else if (geometryAttributes[i] === 'TEX_COORD') {\n                for (var j = 0; j < numPoints; currentBufferindex += 2, j++) {\n                    buffer[currentBufferindex] = attributeDataAll[i].GetValue(2 * j);\n                    buffer[currentBufferindex + 1] = 1.0 - attributeDataAll[i].GetValue(2 * j + 1);\n                }\n            }\n            else {\n                for (var j = 0; j < numPoints * attributeComponents[i]; currentBufferindex++, j++) {\n                    buffer[currentBufferindex] = attributeDataAll[i].GetValue(j);\n                }\n            }\n            draco.destroy(attributeDataAll[i]);\n        }\n        draco.destroy(decoder);\n        draco.destroy(dracoGeometry);\n        return this.__decodedBufferToJSON(buffer, numPoints, geometryAttributes, attributeComponents, textureUri);\n    };\n    DrcPointCloudImporter.prototype.__decodedBufferToJSON = function (buffer, numPoints, geometryAttributes, attributeComponents, textureUri) {\n        return __awaiter(this, void 0, void 0, function () {\n            var json, mimeType, accessors, bufferViews, byteOffsetOfBufferView, i, currentIndexOfBufferView, currentComponent, type, byteOffsetOfAccessor, mesh, attributes, _loop_1, this_1, i;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        json = {\n                            \"asset\": {\n                                version: \"2.0\"\n                            },\n                            \"nodes\": [\n                                {\n                                    \"name\": \"Node\",\n                                    \"mesh\": 0\n                                }\n                            ],\n                            \"scenes\": [\n                                {\n                                    \"nodes\": [\n                                        0\n                                    ]\n                                }\n                            ]\n                        };\n                        mimeType = 'application/octet-stream';\n                        return [4 /*yield*/, this.__convertBufferToURI(buffer.buffer, mimeType).then(function (uri) {\n                                json[\"buffers\"] = [\n                                    {\n                                        \"name\": \"input\",\n                                        \"byteLength\": buffer.byteLength,\n                                        \"uri\": uri\n                                    }\n                                ];\n                            }).catch(function (err) {\n                                console.log('this.__convertBufferToURI error:', err);\n                            })];\n                    case 1:\n                        _a.sent();\n                        accessors = [];\n                        bufferViews = [];\n                        byteOffsetOfBufferView = 0;\n                        for (i = 0, currentIndexOfBufferView = 0; i < geometryAttributes.length; currentIndexOfBufferView++) {\n                            currentComponent = attributeComponents[i];\n                            type = \"VEC\" + currentComponent;\n                            byteOffsetOfAccessor = 0;\n                            while (i < geometryAttributes.length && currentComponent === attributeComponents[i]) {\n                                accessors.push({\n                                    \"name\": \"point-cloud_\" + geometryAttributes[i].toLowerCase() + \"s\",\n                                    \"componentType\": 5126,\n                                    \"count\": numPoints,\n                                    \"type\": type,\n                                    \"bufferView\": currentIndexOfBufferView,\n                                    \"byteOffset\": byteOffsetOfAccessor\n                                });\n                                if (geometryAttributes[i] === 'COLOR') {\n                                    byteOffsetOfAccessor += numPoints * 4 * 4;\n                                }\n                                else {\n                                    byteOffsetOfAccessor += numPoints * attributeComponents[i] * 4;\n                                }\n                                i++;\n                            }\n                            bufferViews[currentIndexOfBufferView] = {\n                                \"name\": \"bufferView_\" + currentIndexOfBufferView,\n                                \"buffer\": 0,\n                                \"byteLength\": byteOffsetOfAccessor,\n                                \"byteOffset\": byteOffsetOfBufferView,\n                                \"byteStride\": currentComponent * 4,\n                                \"target\": 34962\n                            };\n                            byteOffsetOfBufferView += byteOffsetOfAccessor;\n                        }\n                        json[\"accessors\"] = accessors;\n                        json[\"bufferViews\"] = bufferViews;\n                        mesh = {\n                            \"name\": \"Node-Mesh\",\n                            \"primitives\": [\n                                {\n                                    \"mode\": 0\n                                }\n                            ]\n                        };\n                        attributes = {};\n                        _loop_1 = function (i) {\n                            var response, arrayBuffer, mimeType_1, err_2;\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        if (!(geometryAttributes[i] !== 'TEX_COORD')) return [3 /*break*/, 1];\n                                        attributes[geometryAttributes[i]] = i;\n                                        return [3 /*break*/, 8];\n                                    case 1:\n                                        if (!textureUri)\n                                            return [2 /*return*/, \"continue\"];\n                                        attributes['TEXCOORD_0'] = i;\n                                        _a.label = 2;\n                                    case 2:\n                                        _a.trys.push([2, 6, , 7]);\n                                        return [4 /*yield*/, fetch(textureUri)];\n                                    case 3:\n                                        response = _a.sent();\n                                        return [4 /*yield*/, response.arrayBuffer()];\n                                    case 4:\n                                        arrayBuffer = _a.sent();\n                                        mimeType_1 = 'image/jpeg';\n                                        return [4 /*yield*/, this_1.__convertBufferToURI(arrayBuffer, mimeType_1).then(function (uri) {\n                                                json[\"images\"] = [\n                                                    {\n                                                        \"mimeType\": mimeType_1,\n                                                        \"uri\": uri\n                                                    }\n                                                ];\n                                                json[\"textures\"] = [\n                                                    {\n                                                        \"source\": 0\n                                                    }\n                                                ];\n                                                json[\"materials\"] = [\n                                                    {\n                                                        \"pbrMetallicRoughness\": {\n                                                            \"baseColorTexture\": {\n                                                                \"index\": 0\n                                                            },\n                                                            \"metallicFactor\": 0\n                                                        }\n                                                    }\n                                                ];\n                                                mesh.primitives[0].material = 0;\n                                            }).catch(function (err) {\n                                                console.log('this.__convertBufferToURI error:', err);\n                                            })];\n                                    case 5:\n                                        _a.sent();\n                                        return [3 /*break*/, 7];\n                                    case 6:\n                                        err_2 = _a.sent();\n                                        throw new Error('jpg load error');\n                                    case 7:\n                                        ;\n                                        _a.label = 8;\n                                    case 8: return [2 /*return*/];\n                                }\n                            });\n                        };\n                        this_1 = this;\n                        i = 0;\n                        _a.label = 2;\n                    case 2:\n                        if (!(i < geometryAttributes.length)) return [3 /*break*/, 5];\n                        return [5 /*yield**/, _loop_1(i)];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4:\n                        i++;\n                        return [3 /*break*/, 2];\n                    case 5:\n                        mesh.primitives[0].attributes = attributes;\n                        json[\"meshes\"] = [mesh];\n                        return [2 /*return*/, new Promise(function (resolve, reject) {\n                                resolve(json);\n                            })];\n                }\n            });\n        });\n    };\n    DrcPointCloudImporter.prototype.__convertBufferToURI = function (arrayBuffer, mimeType) {\n        return new Promise(function (resolve, reject) {\n            var blob = new Blob([arrayBuffer], { type: mimeType });\n            var fr = new FileReader();\n            fr.onload = function (event) {\n                resolve(fr.result);\n            };\n            fr.onerror = function (event) {\n                reject(fr.error);\n            };\n            fr.readAsDataURL(blob);\n        });\n    };\n    DrcPointCloudImporter.prototype.importDirect = function (uri, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var defaultOptions, _a, _b, _c, fileName, splitted, fileExtension, response, err_3, arrayBuffer;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        defaultOptions = {\n                            files: {\n                            //        \"foo.gltf\": content of file as ArrayBuffer,\n                            //        \"foo.bin\": content of file as ArrayBuffer,\n                            //        \"boo.png\": content of file as ArrayBuffer\n                            },\n                            loaderExtension: null,\n                            defaultShaderClass: null,\n                            statesOfElements: [\n                                {\n                                    targets: [],\n                                    states: {\n                                        enable: [\n                                        // 3042,  // BLEND\n                                        ],\n                                        functions: {\n                                        //\"blendFuncSeparate\": [1, 0, 1, 0],\n                                        }\n                                    },\n                                    isTransparent: true,\n                                    opacity: 1.0,\n                                    isTextureImageToLoadPreMultipliedAlpha: false,\n                                }\n                            ],\n                            extendedJson: void 0 //   URI string / JSON Object / ArrayBuffer\n                        };\n                        if (!(options && options.files)) return [3 /*break*/, 4];\n                        _a = [];\n                        for (_b in options.files)\n                            _a.push(_b);\n                        _c = 0;\n                        _d.label = 1;\n                    case 1:\n                        if (!(_c < _a.length)) return [3 /*break*/, 4];\n                        fileName = _a[_c];\n                        splitted = fileName.split('.');\n                        fileExtension = splitted[splitted.length - 1];\n                        if (!(fileExtension === 'gltf' || fileExtension === 'glb')) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.__loadFromArrayBuffer(options.files[fileName], options, defaultOptions, void 0).catch(function (err) {\n                                console.log('this.__loadFromArrayBuffer error', err);\n                            })];\n                    case 2: return [2 /*return*/, _d.sent()];\n                    case 3:\n                        _c++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        _d.trys.push([4, 6, , 7]);\n                        return [4 /*yield*/, fetch(uri)];\n                    case 5:\n                        response = _d.sent();\n                        return [3 /*break*/, 7];\n                    case 6:\n                        err_3 = _d.sent();\n                        console.log('this.__loadFromArrayBuffer', err_3);\n                        return [3 /*break*/, 7];\n                    case 7:\n                        ;\n                        return [4 /*yield*/, response.arrayBuffer()];\n                    case 8:\n                        arrayBuffer = _d.sent();\n                        return [2 /*return*/, this.__decodeDracoDirect(arrayBuffer, options)];\n                }\n            });\n        });\n    };\n    DrcPointCloudImporter.prototype.__decodeDracoDirect = function (arrayBuffer, options) {\n        var draco = new DracoDecoderModule();\n        var decoder = new draco.Decoder();\n        var dracoGeometry = this.__getGeometryFromDracoBuffer(draco, decoder, arrayBuffer);\n        if (dracoGeometry == null) {\n            return void 0;\n        }\n        if (dracoGeometry.geometryType !== draco.POINT_CLOUD) {\n            throw new Error('invalid geometryType of drc file.');\n        }\n        var attributeCompositionTypes = [];\n        var attributeSemantics = [];\n        var attributes = [];\n        this.__getPositions(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes);\n        this.__getColors(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes);\n        this.__getNormals(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes);\n        //    const texcoord = this.__getTextures(draco, decoder, dracoGeometry);\n        var primitive = _geometry_Primitive__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createPrimitive({\n            attributeCompositionTypes: attributeCompositionTypes,\n            attributeSemantics: attributeSemantics,\n            attributes: attributes,\n            material: _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createClassicUberMaterial(),\n            primitiveMode: _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_4__[\"PrimitiveMode\"].Points\n        });\n        draco.destroy(decoder);\n        draco.destroy(dracoGeometry);\n        return new Promise(function (resolve, reject) {\n            resolve(primitive);\n        });\n    };\n    DrcPointCloudImporter.prototype.__getGeometryFromDracoBuffer = function (draco, decoder, arrayBuffer) {\n        var buffer = new draco.DecoderBuffer();\n        buffer.Init(new Int8Array(arrayBuffer), arrayBuffer.byteLength);\n        var geometryType = decoder.GetEncodedGeometryType(buffer);\n        var dracoGeometry;\n        var decodingStatus;\n        if (geometryType === draco.TRIANGULAR_MESH) {\n            dracoGeometry = new draco.Mesh();\n            decodingStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);\n        }\n        else if (geometryType === draco.POINT_CLOUD) {\n            dracoGeometry = new draco.PointCloud();\n            decodingStatus = decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n        }\n        else {\n            var errorMsg = 'Unknown geometry type.';\n            console.error(errorMsg);\n        }\n        dracoGeometry.geometryType = geometryType; // store\n        if (!decodingStatus.ok() || dracoGeometry.ptr == 0) {\n            var errorMsg = 'Decoding failed: ';\n            errorMsg += decodingStatus.error_msg();\n            console.error(errorMsg);\n            draco.destroy(decoder);\n            draco.destroy(dracoGeometry);\n            return void 0;\n        }\n        draco.destroy(buffer);\n        return dracoGeometry;\n    };\n    DrcPointCloudImporter.prototype.__getPositions = function (draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes) {\n        var posAttId = decoder.GetAttributeId(dracoGeometry, draco.POSITION);\n        if (posAttId === -1) {\n            draco.destroy(decoder);\n            draco.destroy(dracoGeometry);\n            throw new Error('Draco: No position attribute found.');\n        }\n        var posAttribute = decoder.GetAttribute(dracoGeometry, posAttId);\n        var posAttributeData = new draco.DracoFloat32Array();\n        decoder.GetAttributeFloatForAllPoints(dracoGeometry, posAttribute, posAttributeData);\n        var numPoints = dracoGeometry.num_points();\n        var numVertces = numPoints * 3;\n        var positions = new Float32Array(numVertces);\n        for (var i = 0; i < numVertces; i += 1) {\n            positions[i] = posAttributeData.GetValue(i); // XYZ XYZ\n        }\n        attributeCompositionTypes.push(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3);\n        attributeSemantics.push(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_5__[\"VertexAttribute\"].Position);\n        attributes.push(positions);\n        draco.destroy(posAttributeData);\n        return positions;\n    };\n    DrcPointCloudImporter.prototype.__getColors = function (draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes) {\n        // Get color attributes if exists.\n        var colorAttId = decoder.GetAttributeId(dracoGeometry, draco.COLOR);\n        if (colorAttId === -1) {\n            return null;\n        }\n        else {\n            //console.log('Loaded color attribute.');\n            var colAttribute = decoder.GetAttribute(dracoGeometry, colorAttId);\n            var colAttributeData = new draco.DracoFloat32Array();\n            decoder.GetAttributeFloatForAllPoints(dracoGeometry, colAttribute, colAttributeData);\n            var numPoints = dracoGeometry.num_points();\n            var numComponents = colAttribute.num_components();\n            var numVertces = numPoints * 4;\n            var colors = new Float32Array(numVertces);\n            for (var i = 0; i < numVertces; i += numComponents) {\n                colors[i] = colAttributeData.GetValue(i);\n                colors[i + 1] = colAttributeData.GetValue(i + 1);\n                colors[i + 2] = colAttributeData.GetValue(i + 2);\n                if (numComponents == 4) {\n                    colors[i + 3] = colAttributeData.GetValue(i + 3);\n                }\n                else {\n                    colors[i + 3] = 1.0;\n                }\n            }\n            attributeCompositionTypes.push(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3);\n            attributeSemantics.push(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_5__[\"VertexAttribute\"].Color0);\n            attributes.push(colors);\n            draco.destroy(colAttributeData);\n            return colors;\n        }\n    };\n    DrcPointCloudImporter.prototype.__getNormals = function (draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes) {\n        // Get normal attributes if exists.\n        var normalAttId = decoder.GetAttributeId(dracoGeometry, draco.NORMAL);\n        if (normalAttId === -1) {\n            return null;\n        }\n        else {\n            //console.log('Loaded normal attribute.');\n            var norAttribute = decoder.GetAttribute(dracoGeometry, normalAttId);\n            var norAttributeData = new draco.DracoFloat32Array();\n            decoder.GetAttributeFloatForAllPoints(dracoGeometry, norAttribute, norAttributeData);\n            var numPoints = dracoGeometry.num_points();\n            var numVertces = numPoints * 3;\n            var normals = new Float32Array(numVertces);\n            for (var i = 0; i < numVertces; i += 1) {\n                normals[i] = norAttributeData.GetValue(i); // XYZ XYZ\n            }\n            attributeCompositionTypes.push(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3);\n            attributeSemantics.push(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_5__[\"VertexAttribute\"].Normal);\n            attributes.push(normals);\n            draco.destroy(norAttributeData);\n            return normals;\n        }\n    };\n    DrcPointCloudImporter.prototype.__loadFromArrayBuffer = function (arrayBuffer, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function () {\n            var dataView, isLittleEndian, magic, result, gotText, json;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        dataView = new DataView(arrayBuffer, 0, 20);\n                        isLittleEndian = true;\n                        magic = dataView.getUint32(0, isLittleEndian);\n                        if (!(magic !== 0x46546C67)) return [3 /*break*/, 2];\n                        gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(arrayBuffer);\n                        json = JSON.parse(gotText);\n                        return [4 /*yield*/, this._loadAsTextJson(json, options, defaultOptions, uri).catch(function (err) {\n                                console.log('this.__loadAsTextJson error', err);\n                            })];\n                    case 1:\n                        result = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 2: return [4 /*yield*/, this._loadAsBinaryJson(dataView, isLittleEndian, arrayBuffer, options, defaultOptions, uri).catch(function (err) {\n                            console.log('this.__loadAsBinaryJson error', err);\n                        })];\n                    case 3:\n                        result = _a.sent();\n                        _a.label = 4;\n                    case 4: return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    DrcPointCloudImporter.prototype._getOptions = function (defaultOptions, json, options) {\n        if (json.asset && json.asset.extras && json.asset.extras.loadOptions) {\n            for (var optionName in json.asset.extras.loadOptions) {\n                defaultOptions[optionName] = json.asset.extras.loadOptions[optionName];\n            }\n        }\n        for (var optionName in options) {\n            defaultOptions[optionName] = options[optionName];\n        }\n        return defaultOptions;\n    };\n    DrcPointCloudImporter.prototype._loadAsBinaryJson = function (dataView, isLittleEndian, arrayBuffer, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function () {\n            var gltfVer, lengthOfThisFile, lengthOfJSonChunkData, chunkType, arrayBufferJSonContent, gotText, gltfJson, arrayBufferBinary, basePath, result, err_4;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        gltfVer = dataView.getUint32(4, isLittleEndian);\n                        if (gltfVer !== 2) {\n                            throw new Error('invalid version field in this binary glTF file.');\n                        }\n                        lengthOfThisFile = dataView.getUint32(8, isLittleEndian);\n                        lengthOfJSonChunkData = dataView.getUint32(12, isLittleEndian);\n                        chunkType = dataView.getUint32(16, isLittleEndian);\n                        // 0x4E4F534A means JSON format (0x4E4F534A is 'JSON' in ASCII codes)\n                        if (chunkType !== 0x4E4F534A) {\n                            throw new Error('invalid chunkType of chunk0 in this binary glTF file.');\n                        }\n                        arrayBufferJSonContent = arrayBuffer.slice(20, 20 + lengthOfJSonChunkData);\n                        gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(arrayBufferJSonContent);\n                        gltfJson = JSON.parse(gotText);\n                        options = this._getOptions(defaultOptions, gltfJson, options);\n                        arrayBufferBinary = arrayBuffer.slice(20 + lengthOfJSonChunkData + 8);\n                        basePath = null;\n                        if (uri) {\n                            //Set the location of glb file as basePath\n                            basePath = uri.substring(0, uri.lastIndexOf('/')) + '/';\n                        }\n                        if (gltfJson.asset.extras === undefined) {\n                            gltfJson.asset.extras = { fileType: \"glTF\", version: \"2\" };\n                        }\n                        this._mergeExtendedJson(gltfJson, options.extendedJson);\n                        gltfJson.asset.extras.basePath = basePath;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this._loadInner(arrayBufferBinary, basePath, gltfJson, options)];\n                    case 2:\n                        result = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_4 = _a.sent();\n                        console.log(\"this._loadInner error in _loadAsBinaryJson\", err_4);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/, result[0][0]];\n                }\n            });\n        });\n    };\n    DrcPointCloudImporter.prototype._loadAsTextJson = function (gltfJson, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function () {\n            var basePath, result, err_5;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (uri) {\n                            //Set the location of gltf file as basePath\n                            basePath = uri.substring(0, uri.lastIndexOf('/')) + '/';\n                        }\n                        if (gltfJson.asset.extras === undefined) {\n                            gltfJson.asset.extras = { fileType: \"glTF\", version: \"2\" };\n                        }\n                        options = this._getOptions(defaultOptions, gltfJson, options);\n                        this._mergeExtendedJson(gltfJson, options.extendedJson);\n                        gltfJson.asset.extras.basePath = basePath;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this._loadInner(undefined, basePath, gltfJson, options)];\n                    case 2:\n                        result = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_5 = _a.sent();\n                        console.log('this._loadInner error in _loadAsTextJson', err_5);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/, result[0][0]];\n                }\n            });\n        });\n    };\n    DrcPointCloudImporter.prototype._loadInner = function (arrayBufferBinary, basePath, gltfJson, options) {\n        var _this = this;\n        var promises = [];\n        var resources = {\n            shaders: [],\n            buffers: [],\n            images: []\n        };\n        promises.push(this._loadResources(arrayBufferBinary, basePath, gltfJson, options, resources));\n        promises.push(new Promise(function (resolve, reject) {\n            _this._loadJsonContent(gltfJson, options);\n            resolve();\n        }));\n        return Promise.all(promises);\n    };\n    DrcPointCloudImporter.prototype._loadJsonContent = function (gltfJson, options) {\n        // Scene\n        this._loadDependenciesOfScenes(gltfJson);\n        // Node\n        this._loadDependenciesOfNodes(gltfJson);\n        // Mesh\n        this._loadDependenciesOfMeshes(gltfJson);\n        // Material\n        this._loadDependenciesOfMaterials(gltfJson);\n        // Texture\n        this._loadDependenciesOfTextures(gltfJson);\n        // Joint\n        this._loadDependenciesOfJoints(gltfJson);\n        // Animation\n        this._loadDependenciesOfAnimations(gltfJson);\n        // Accessor\n        this._loadDependenciesOfAccessors(gltfJson);\n        // BufferView\n        this._loadDependenciesOfBufferViews(gltfJson);\n        if (gltfJson.asset === void 0) {\n            gltfJson.asset = {};\n        }\n        if (gltfJson.asset.extras === void 0) {\n            gltfJson.asset.extras = {};\n        }\n    };\n    DrcPointCloudImporter.prototype._loadDependenciesOfScenes = function (gltfJson) {\n        var e_1, _a;\n        try {\n            for (var _b = __values(gltfJson.scenes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var scene = _c.value;\n                scene.nodesIndices = scene.nodes.concat();\n                for (var i in scene.nodesIndices) {\n                    scene.nodes[i] = gltfJson.nodes[scene.nodes[i]];\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    DrcPointCloudImporter.prototype._loadDependenciesOfNodes = function (gltfJson) {\n        var e_2, _a;\n        try {\n            for (var _b = __values(gltfJson.nodes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var node = _c.value;\n                // Hierarchy\n                if (node.children) {\n                    node.childrenIndices = node.children.concat();\n                    node.children = [];\n                    for (var i in node.childrenIndices) {\n                        node.children[i] = gltfJson.nodes[node.childrenIndices[i]];\n                    }\n                }\n                // Mesh\n                if (node.mesh !== void 0 && gltfJson.meshes !== void 0) {\n                    node.meshIndex = node.mesh;\n                    node.mesh = gltfJson.meshes[node.meshIndex];\n                }\n                // Skin\n                if (node.skin !== void 0 && gltfJson.skins !== void 0) {\n                    node.skinIndex = node.skin;\n                    node.skin = gltfJson.skins[node.skinIndex];\n                    if (node.mesh.extras === void 0) {\n                        node.mesh.extras = {};\n                    }\n                    node.mesh.extras._skin = node.skin;\n                }\n                // Camera\n                if (node.camera !== void 0 && gltfJson.cameras !== void 0) {\n                    node.cameraIndex = node.camera;\n                    node.camera = gltfJson.cameras[node.cameraIndex];\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    DrcPointCloudImporter.prototype._loadDependenciesOfMeshes = function (gltfJson) {\n        var e_3, _a, e_4, _b, e_5, _c;\n        try {\n            // Mesh\n            for (var _d = __values(gltfJson.meshes), _e = _d.next(); !_e.done; _e = _d.next()) {\n                var mesh = _e.value;\n                try {\n                    for (var _f = __values(mesh.primitives), _g = _f.next(); !_g.done; _g = _f.next()) {\n                        var primitive = _g.value;\n                        if (primitive.material !== void 0) {\n                            primitive.materialIndex = primitive.material;\n                            primitive.material = gltfJson.materials[primitive.materialIndex];\n                        }\n                        primitive.attributesindex = Object.assign({}, primitive.attributes);\n                        for (var attributeName in primitive.attributesindex) {\n                            if (primitive.attributesindex[attributeName] >= 0) {\n                                var accessor = gltfJson.accessors[primitive.attributesindex[attributeName]];\n                                accessor.extras = {\n                                    toGetAsTypedArray: true,\n                                    attributeName: attributeName\n                                };\n                                primitive.attributes[attributeName] = accessor;\n                            }\n                            else {\n                                primitive.attributes[attributeName] = void 0;\n                            }\n                        }\n                        if (primitive.indices != null) {\n                            primitive.indicesIndex = primitive.indices;\n                            primitive.indices = gltfJson.accessors[primitive.indicesIndex];\n                        }\n                        if (primitive.targets != null) {\n                            primitive.targetIndices = primitive.targets;\n                            primitive.targets = [];\n                            try {\n                                for (var _h = __values(primitive.targetIndices), _j = _h.next(); !_j.done; _j = _h.next()) {\n                                    var target = _j.value;\n                                    var attributes = {};\n                                    for (var attributeName in target) {\n                                        if (target[attributeName] >= 0) {\n                                            var accessor = gltfJson.accessors[target[attributeName]];\n                                            accessor.extras = {\n                                                toGetAsTypedArray: true,\n                                                attributeName: attributeName\n                                            };\n                                            attributes[attributeName] = accessor;\n                                        }\n                                        else {\n                                            attributes[attributeName] = void 0;\n                                        }\n                                    }\n                                    primitive.targets.push(attributes);\n                                }\n                            }\n                            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n                            finally {\n                                try {\n                                    if (_j && !_j.done && (_c = _h.return)) _c.call(_h);\n                                }\n                                finally { if (e_5) throw e_5.error; }\n                            }\n                        }\n                    }\n                }\n                catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                finally {\n                    try {\n                        if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n                    }\n                    finally { if (e_4) throw e_4.error; }\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    };\n    DrcPointCloudImporter.prototype._loadDependenciesOfMaterials = function (gltfJson) {\n        var e_6, _a;\n        // Material\n        if (gltfJson.materials) {\n            try {\n                for (var _b = __values(gltfJson.materials), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var material = _c.value;\n                    if (material.pbrMetallicRoughness) {\n                        var baseColorTexture = material.pbrMetallicRoughness.baseColorTexture;\n                        if (baseColorTexture !== void 0) {\n                            baseColorTexture.texture = gltfJson.textures[baseColorTexture.index];\n                        }\n                        var metallicRoughnessTexture = material.pbrMetallicRoughness.metallicRoughnessTexture;\n                        if (metallicRoughnessTexture !== void 0) {\n                            metallicRoughnessTexture.texture = gltfJson.textures[metallicRoughnessTexture.index];\n                        }\n                    }\n                    var normalTexture = material.normalTexture;\n                    if (normalTexture !== void 0) {\n                        normalTexture.texture = gltfJson.textures[normalTexture.index];\n                    }\n                    var occlusionTexture = material.occlusionTexture;\n                    if (occlusionTexture !== void 0) {\n                        occlusionTexture.texture = gltfJson.textures[occlusionTexture.index];\n                    }\n                    var emissiveTexture = material.emissiveTexture;\n                    if (emissiveTexture !== void 0) {\n                        emissiveTexture.texture = gltfJson.textures[emissiveTexture.index];\n                    }\n                }\n            }\n            catch (e_6_1) { e_6 = { error: e_6_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_6) throw e_6.error; }\n            }\n        }\n    };\n    DrcPointCloudImporter.prototype._loadDependenciesOfTextures = function (gltfJson) {\n        var e_7, _a;\n        // Texture\n        if (gltfJson.textures) {\n            try {\n                for (var _b = __values(gltfJson.textures), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var texture = _c.value;\n                    if (texture.sampler !== void 0) {\n                        texture.samplerIndex = texture.sampler;\n                        texture.sampler = gltfJson.samplers[texture.samplerIndex];\n                    }\n                    if (texture.source !== void 0) {\n                        texture.sourceIndex = texture.source;\n                        texture.image = gltfJson.images[texture.sourceIndex];\n                    }\n                }\n            }\n            catch (e_7_1) { e_7 = { error: e_7_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_7) throw e_7.error; }\n            }\n        }\n    };\n    DrcPointCloudImporter.prototype._loadDependenciesOfJoints = function (gltfJson) {\n        var e_8, _a, e_9, _b;\n        if (gltfJson.skins) {\n            try {\n                for (var _c = __values(gltfJson.skins), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var skin = _d.value;\n                    skin.skeletonIndex = skin.skeleton;\n                    skin.skeleton = gltfJson.nodes[skin.skeletonIndex];\n                    skin.inverseBindMatricesIndex = skin.inverseBindMatrices;\n                    skin.inverseBindMatrices = gltfJson.accessors[skin.inverseBindMatricesIndex];\n                    if (skin.skeleton == null) {\n                        skin.skeletonIndex = skin.joints[0];\n                        skin.skeleton = gltfJson.nodes[skin.skeletonIndex];\n                    }\n                    skin.jointsIndices = skin.joints;\n                    skin.joints = [];\n                    try {\n                        for (var _e = __values(skin.jointsIndices), _f = _e.next(); !_f.done; _f = _e.next()) {\n                            var jointIndex = _f.value;\n                            skin.joints.push(gltfJson.nodes[jointIndex]);\n                        }\n                    }\n                    catch (e_9_1) { e_9 = { error: e_9_1 }; }\n                    finally {\n                        try {\n                            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                        }\n                        finally { if (e_9) throw e_9.error; }\n                    }\n                }\n            }\n            catch (e_8_1) { e_8 = { error: e_8_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                }\n                finally { if (e_8) throw e_8.error; }\n            }\n        }\n    };\n    DrcPointCloudImporter.prototype._loadDependenciesOfAnimations = function (gltfJson) {\n        var e_10, _a, e_11, _b, e_12, _c;\n        if (gltfJson.animations) {\n            try {\n                for (var _d = __values(gltfJson.animations), _e = _d.next(); !_e.done; _e = _d.next()) {\n                    var animation = _e.value;\n                    try {\n                        for (var _f = __values(animation.channels), _g = _f.next(); !_g.done; _g = _f.next()) {\n                            var channel = _g.value;\n                            channel.samplerIndex = channel.sampler;\n                            channel.sampler = animation.samplers[channel.samplerIndex];\n                            channel.target.nodeIndex = channel.target.node;\n                            channel.target.node = gltfJson.nodes[channel.target.nodeIndex];\n                        }\n                    }\n                    catch (e_11_1) { e_11 = { error: e_11_1 }; }\n                    finally {\n                        try {\n                            if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n                        }\n                        finally { if (e_11) throw e_11.error; }\n                    }\n                    try {\n                        for (var _h = __values(animation.channels), _j = _h.next(); !_j.done; _j = _h.next()) {\n                            var channel = _j.value;\n                            channel.sampler.inputIndex = channel.sampler.input;\n                            channel.sampler.outputIndex = channel.sampler.output;\n                            channel.sampler.input = gltfJson.accessors[channel.sampler.inputIndex];\n                            channel.sampler.output = gltfJson.accessors[channel.sampler.outputIndex];\n                            if (channel.sampler.output.extras === void 0) {\n                                channel.sampler.output.extras = {};\n                            }\n                            if (channel.target.path === 'rotation') {\n                                channel.sampler.output.extras.quaternionIfVec4 = true;\n                            }\n                            if (channel.target.path === 'weights') {\n                                var weightCount = channel.sampler.output.count / channel.sampler.input.count;\n                                channel.sampler.output.extras.weightCount = weightCount;\n                            }\n                        }\n                    }\n                    catch (e_12_1) { e_12 = { error: e_12_1 }; }\n                    finally {\n                        try {\n                            if (_j && !_j.done && (_c = _h.return)) _c.call(_h);\n                        }\n                        finally { if (e_12) throw e_12.error; }\n                    }\n                }\n            }\n            catch (e_10_1) { e_10 = { error: e_10_1 }; }\n            finally {\n                try {\n                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n                }\n                finally { if (e_10) throw e_10.error; }\n            }\n        }\n    };\n    DrcPointCloudImporter.prototype._loadDependenciesOfAccessors = function (gltfJson) {\n        var e_13, _a;\n        try {\n            // Accessor\n            for (var _b = __values(gltfJson.accessors), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var accessor = _c.value;\n                if (accessor.bufferView == null) {\n                    accessor.bufferView = 0;\n                }\n                accessor.bufferViewIndex = accessor.bufferView;\n                accessor.bufferView = gltfJson.bufferViews[accessor.bufferViewIndex];\n            }\n        }\n        catch (e_13_1) { e_13 = { error: e_13_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_13) throw e_13.error; }\n        }\n    };\n    DrcPointCloudImporter.prototype._loadDependenciesOfBufferViews = function (gltfJson) {\n        var e_14, _a;\n        try {\n            // BufferView\n            for (var _b = __values(gltfJson.bufferViews), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var bufferView = _c.value;\n                if (bufferView.buffer !== void 0) {\n                    bufferView.bufferIndex = bufferView.buffer;\n                    bufferView.buffer = gltfJson.buffers[bufferView.bufferIndex];\n                }\n            }\n        }\n        catch (e_14_1) { e_14 = { error: e_14_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_14) throw e_14.error; }\n        }\n    };\n    DrcPointCloudImporter.prototype._mergeExtendedJson = function (gltfJson, extendedData) {\n        var extendedJson = null;\n        if (extendedData instanceof ArrayBuffer) {\n            var extendedJsonStr = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(extendedData);\n            extendedJson = JSON.parse(extendedJsonStr);\n        }\n        else if (typeof extendedData === 'string') {\n            extendedJson = JSON.parse(extendedData);\n            extendedJson = extendedJson;\n        }\n        else if (typeof extendedData === 'object') {\n            extendedJson = extendedData;\n        }\n        else {\n        }\n        Object.assign(gltfJson, extendedJson);\n    };\n    DrcPointCloudImporter.prototype._loadResources = function (arrayBufferBinary, basePath, gltfJson, options, resources) {\n        var _this = this;\n        var promisesToLoadResources = [];\n        var _loop_2 = function (i) {\n            var bufferInfo = gltfJson.buffers[i];\n            var splitted = void 0;\n            var filename;\n            if (bufferInfo.uri) {\n                splitted = bufferInfo.uri.split('/');\n                filename = splitted[splitted.length - 1];\n            }\n            if (typeof bufferInfo.uri === 'undefined') {\n                promisesToLoadResources.push(new Promise(function (resolve, rejected) {\n                    resources.buffers[i] = arrayBufferBinary;\n                    bufferInfo.buffer = arrayBufferBinary;\n                    resolve(gltfJson);\n                }));\n            }\n            else if (bufferInfo.uri.match(/^data:application\\/(.*);base64,/)) {\n                promisesToLoadResources.push(new Promise(function (resolve, rejected) {\n                    var arrayBuffer = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].base64ToArrayBuffer(bufferInfo.uri);\n                    resources.buffers[i] = arrayBuffer;\n                    bufferInfo.buffer = arrayBuffer;\n                    resolve(gltfJson);\n                }));\n            }\n            else if (options.files && options.files[filename]) {\n                promisesToLoadResources.push(new Promise(function (resolve, rejected) {\n                    var arrayBuffer = options.files[filename];\n                    resources.buffers[i] = arrayBuffer;\n                    bufferInfo.buffer = arrayBuffer;\n                    resolve(gltfJson);\n                }));\n            }\n            else {\n                promisesToLoadResources.push(_misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].loadResourceAsync(basePath + bufferInfo.uri, true, function (resolve, response) {\n                    resources.buffers[i] = response;\n                    bufferInfo.buffer = response;\n                    resolve(gltfJson);\n                }, function (reject, error) {\n                }));\n            }\n        };\n        // Shaders Async load\n        // for (let _i in gltfJson.shaders) {\n        //   const i = _i as any as number;\n        //   resources.shaders[i] = {};\n        //   let shaderJson = gltfJson.shaders[i];\n        //   let shaderType = shaderJson.type;\n        //   if (typeof shaderJson.extensions !== 'undefined' && typeof shaderJson.extensions.KHR_binary_glTF !== 'undefined') {\n        //     resources.shaders[i].shaderText = this._accessBinaryAsShader(shaderJson.extensions.KHR_binary_glTF.bufferView, gltfJson, arrayBufferBinary);\n        //     resources.shaders[i].shaderType = shaderType;\n        //     continue;\n        //   }\n        //   let shaderUri = shaderJson.uri;\n        //   if (options.files) {\n        //     const splitted = shaderUri.split('/');\n        //     const filename = splitted[splitted.length - 1];\n        //     if (options.files[filename]) {\n        //       const arrayBuffer = options.files[filename];\n        //       resources.shaders[i].shaderText = DataUtil.arrayBufferToString(arrayBuffer);\n        //       resources.shaders[i].shaderType = shaderType;\n        //       continue;\n        //     }\n        //   }\n        //   if (shaderUri.match(/^data:/)) {\n        //     promisesToLoadResources.push(\n        //       new Promise((resolve, rejected) => {\n        //         let arrayBuffer = DataUtil.base64ToArrayBuffer(shaderUri);\n        //         resources.shaders[i].shaderText = DataUtil.arrayBufferToString(arrayBuffer);\n        //         resources.shaders[i].shaderType = shaderType;\n        //         resolve();\n        //       })\n        //     );\n        //   } else {\n        //     shaderUri = basePath + shaderUri;\n        //     promisesToLoadResources.push(\n        //       DataUtil.loadResourceAsync(shaderUri, false,\n        //         (resolve:Function, response:any)=>{\n        //           resources.shaders[i].shaderText = response;\n        //           resources.shaders[i].shaderType = shaderType;\n        //           resolve(gltfJson);\n        //         },\n        //         (reject:Function, error:any)=>{\n        //         }\n        //       )\n        //     );\n        //   }\n        // }\n        // Buffers Async load\n        for (var i in gltfJson.buffers) {\n            _loop_2(i);\n        }\n        var _loop_3 = function (_i) {\n            var i = _i;\n            var imageJson = gltfJson.images[i];\n            //let imageJson = gltfJson.images[textureJson.source];\n            //let samplerJson = gltfJson.samplers[textureJson.sampler];\n            var imageUri;\n            if (typeof imageJson.uri === 'undefined') {\n                imageUri = this_2._accessBinaryAsImage(imageJson.bufferView, gltfJson, arrayBufferBinary, imageJson.mimeType);\n            }\n            else {\n                var imageFileStr = imageJson.uri;\n                var splitted = imageFileStr.split('/');\n                var filename = splitted[splitted.length - 1];\n                if (options.files && options.files[filename]) {\n                    var arrayBuffer = options.files[filename];\n                    var splitted_1 = filename.split('.');\n                    var fileExtension = splitted_1[splitted_1.length - 1];\n                    imageUri = this_2._accessArrayBufferAsImage(arrayBuffer, fileExtension);\n                }\n                else if (imageFileStr.match(/^data:/)) {\n                    imageUri = imageFileStr;\n                }\n                else {\n                    imageUri = basePath + imageFileStr;\n                }\n            }\n            // if (options.extensionLoader && options.extensionLoader.setUVTransformToTexture) {\n            //   options.extensionLoader.setUVTransformToTexture(texture, samplerJson);\n            // }\n            promisesToLoadResources.push(new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\n                var img, load_1, loadBinaryImage;\n                var _this = this;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            img = new Image();\n                            img.crossOrigin = 'Anonymous';\n                            return [4 /*yield*/, this._imgLoad(img, imageUri)];\n                        case 1:\n                            _a.sent();\n                            imageJson.image = img;\n                            resources.images[i] = img;\n                            if (imageUri.match(/^data:/)) {\n                                resolve(gltfJson);\n                            }\n                            else {\n                                load_1 = function (img, response) {\n                                    var bytes = new Uint8Array(response);\n                                    var binaryData = \"\";\n                                    for (var i = 0, len = bytes.byteLength; i < len; i++) {\n                                        binaryData += String.fromCharCode(bytes[i]);\n                                    }\n                                    var split = imageUri.split('.');\n                                    var ext = split[split.length - 1];\n                                    img.src = _this._getImageType(ext) + window.btoa(binaryData);\n                                    img.name = (imageJson.name) ? imageJson.name : imageJson.uri;\n                                    img.onload = function () {\n                                        resolve(gltfJson);\n                                    };\n                                };\n                                loadBinaryImage = function () {\n                                    var xhr = new XMLHttpRequest();\n                                    xhr.onreadystatechange = (function (_img) {\n                                        return function () {\n                                            if (xhr.readyState == 4 && xhr.status == 200) {\n                                                load_1(_img, xhr.response);\n                                            }\n                                        };\n                                    })(img);\n                                    xhr.open('GET', imageUri);\n                                    xhr.responseType = 'arraybuffer';\n                                    xhr.send();\n                                };\n                                loadBinaryImage();\n                            }\n                            resources.images[i] = img;\n                            return [2 /*return*/];\n                    }\n                });\n            }); }));\n        };\n        var this_2 = this;\n        // Textures Async load\n        for (var _i in gltfJson.images) {\n            _loop_3(_i);\n        }\n        return Promise.all(promisesToLoadResources).then().catch(function (err) {\n            console.log('Promise.all error', err);\n        });\n    };\n    DrcPointCloudImporter.prototype._accessBinaryAsImage = function (bufferViewStr, json, arrayBuffer, mimeType) {\n        var arrayBufferSliced = this._sliceBufferViewToArrayBuffer(json, bufferViewStr, arrayBuffer);\n        return this._accessArrayBufferAsImage(arrayBufferSliced, mimeType);\n    };\n    DrcPointCloudImporter.prototype._sliceBufferViewToArrayBuffer = function (json, bufferViewStr, arrayBuffer) {\n        var bufferViewJson = json.bufferViews[bufferViewStr];\n        var byteOffset = (bufferViewJson.byteOffset != null) ? bufferViewJson.byteOffset : 0;\n        var byteLength = bufferViewJson.byteLength;\n        var arrayBufferSliced = arrayBuffer.slice(byteOffset, byteOffset + byteLength);\n        return arrayBufferSliced;\n    };\n    DrcPointCloudImporter.prototype._accessArrayBufferAsImage = function (arrayBuffer, imageType) {\n        var bytes = new Uint8Array(arrayBuffer);\n        var binaryData = '';\n        for (var i = 0, len = bytes.byteLength; i < len; i++) {\n            binaryData += String.fromCharCode(bytes[i]);\n        }\n        var imgSrc = this._getImageType(imageType);\n        var dataUrl = imgSrc + _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].btoa(binaryData);\n        return dataUrl;\n    };\n    DrcPointCloudImporter.prototype._imgLoad = function (img, imageUri) {\n        return new Promise((function (resolve, reject) {\n            img.onload = function () {\n                resolve();\n            };\n            img.src = imageUri;\n        }));\n    };\n    DrcPointCloudImporter.prototype._getImageType = function (imageType) {\n        var imgSrc = null;\n        if (imageType === 'image/jpeg' || imageType.toLowerCase() === 'jpg' || imageType.toLowerCase() === 'jpeg') {\n            imgSrc = \"data:image/jpeg;base64,\";\n        }\n        else if (imageType == 'image/png' || imageType.toLowerCase() === 'png') {\n            imgSrc = \"data:image/png;base64,\";\n        }\n        else if (imageType == 'image/gif' || imageType.toLowerCase() === 'gif') {\n            imgSrc = \"data:image/gif;base64,\";\n        }\n        else if (imageType == 'image/bmp' || imageType.toLowerCase() === 'bmp') {\n            imgSrc = \"data:image/bmp;base64,\";\n        }\n        else {\n            imgSrc = \"data:image/unknown;base64,\";\n        }\n        return imgSrc;\n    };\n    DrcPointCloudImporter.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new DrcPointCloudImporter();\n        }\n        return this.__instance;\n    };\n    return DrcPointCloudImporter;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (DrcPointCloudImporter);\n\n\n//# sourceURL=webpack:///./src/foundation/importer/DrcPointCloudImporter.ts?");

/***/ }),

/***/ "./src/foundation/importer/FormatDetector.ts":
/*!***************************************************!*\
  !*** ./src/foundation/importer/FormatDetector.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return detectFormat; });\n/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/DataUtil */ \"./src/foundation/misc/DataUtil.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\nfunction detectFormat(uri, files) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _loop_1, fileName, state_1, splitted, fileExtension;\n        return __generator(this, function (_a) {\n            if (files) {\n                _loop_1 = function (fileName) {\n                    var splitted_1 = fileName.split('.');\n                    var fileExtension_1 = splitted_1[splitted_1.length - 1];\n                    if (fileExtension_1 === 'gltf' || fileExtension_1 === 'glb') {\n                        return { value: new Promise(function (resolve, reject) {\n                                checkArrayBufferOfGltf(files[fileName], resolve);\n                            }) };\n                    }\n                };\n                for (fileName in files) {\n                    state_1 = _loop_1(fileName);\n                    if (typeof state_1 === \"object\")\n                        return [2 /*return*/, state_1.value];\n                }\n            }\n            splitted = uri.split('.');\n            fileExtension = splitted[splitted.length - 1];\n            // Effekseer\n            if (fileExtension === 'efk') {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        resolve('Effekseer');\n                    })];\n            }\n            // glTF\n            return [2 /*return*/, _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].loadResourceAsync(uri, true, function (resolve, response) {\n                    var arrayBuffer = response;\n                    checkArrayBufferOfGltf(arrayBuffer, resolve);\n                }, function (rejects, status) {\n                    console.log(status);\n                })];\n        });\n    });\n}\nfunction checkArrayBufferOfGltf(arrayBuffer, resolve) {\n    var isLittleEndian = true;\n    var dataView = new DataView(arrayBuffer, 0, 20);\n    // Magic field\n    var magic = dataView.getUint32(0, isLittleEndian);\n    // 0x46546C67 is 'glTF' in ASCII codes.\n    if (magic !== 0x46546C67) {\n        // It must be normal glTF (NOT binary) file...\n        var gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(arrayBuffer);\n        var gltfJson = JSON.parse(gotText);\n        var glTFVer_1 = checkGLTFVersion(gltfJson);\n        resolve(\"glTF\" + glTFVer_1);\n        return;\n    }\n    var glTFVer = dataView.getUint32(4, isLittleEndian);\n    resolve(\"glTF\" + glTFVer);\n}\nfunction checkGLTFVersion(gltfJson) {\n    var glTFVer = 1.0;\n    if (gltfJson.asset && gltfJson.asset.version) {\n        glTFVer = parseFloat(gltfJson.asset.version);\n    }\n    return glTFVer;\n}\n\n\n//# sourceURL=webpack:///./src/foundation/importer/FormatDetector.ts?");

/***/ }),

/***/ "./src/foundation/importer/Gltf1Importer.ts":
/*!**************************************************!*\
  !*** ./src/foundation/importer/Gltf1Importer.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/DataUtil */ \"./src/foundation/misc/DataUtil.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (undefined && undefined.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\n\nvar Gltf1Importer = /** @class */ (function () {\n    function Gltf1Importer() {\n    }\n    Gltf1Importer.prototype.import = function (uri, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var defaultOptions, _a, _b, _c, fileName, splitted, fileExtension, response, arrayBuffer;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        defaultOptions = {\n                            files: {\n                            //        \"foo.gltf\": content of file as ArrayBuffer,\n                            //        \"foo.bin\": content of file as ArrayBuffer,\n                            //        \"boo.png\": content of file as ArrayBuffer\n                            },\n                            loaderExtension: null,\n                            defaultShaderClass: null,\n                            statesOfElements: [\n                                {\n                                    targets: [],\n                                    states: {\n                                        enable: [\n                                        // 3042,  // BLEND\n                                        ],\n                                        functions: {\n                                        //\"blendFuncSeparate\": [1, 0, 1, 0],\n                                        }\n                                    },\n                                    isTransparent: true,\n                                    opacity: 1.0,\n                                    isTextureImageToLoadPreMultipliedAlpha: false,\n                                }\n                            ],\n                            extendedJson: void 0 //   URI string / JSON Object / ArrayBuffer\n                        };\n                        if (!(options && options.files)) return [3 /*break*/, 4];\n                        _a = [];\n                        for (_b in options.files)\n                            _a.push(_b);\n                        _c = 0;\n                        _d.label = 1;\n                    case 1:\n                        if (!(_c < _a.length)) return [3 /*break*/, 4];\n                        fileName = _a[_c];\n                        splitted = fileName.split('.');\n                        fileExtension = splitted[splitted.length - 1];\n                        if (!(fileExtension === 'gltf' || fileExtension === 'glb')) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.__loadFromArrayBuffer(options.files[fileName], options, defaultOptions, void 0)];\n                    case 2: return [2 /*return*/, _d.sent()];\n                    case 3:\n                        _c++;\n                        return [3 /*break*/, 1];\n                    case 4: return [4 /*yield*/, fetch(uri)];\n                    case 5:\n                        response = _d.sent();\n                        return [4 /*yield*/, response.arrayBuffer()];\n                    case 6:\n                        arrayBuffer = _d.sent();\n                        return [4 /*yield*/, this.__loadFromArrayBuffer(arrayBuffer, options, defaultOptions, uri)];\n                    case 7: return [2 /*return*/, _d.sent()];\n                }\n            });\n        });\n    };\n    Gltf1Importer.prototype.__loadFromArrayBuffer = function (arrayBuffer, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function () {\n            var dataView, isLittleEndian, magic, result, gotText, json;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        dataView = new DataView(arrayBuffer, 0, 20);\n                        isLittleEndian = true;\n                        magic = dataView.getUint32(0, isLittleEndian);\n                        if (!(magic !== 0x46546C67)) return [3 /*break*/, 2];\n                        gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(arrayBuffer);\n                        json = JSON.parse(gotText);\n                        return [4 /*yield*/, this._loadAsTextJson(json, options, defaultOptions, uri)];\n                    case 1:\n                        result = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 2: return [4 /*yield*/, this._loadAsBinaryJson(dataView, isLittleEndian, arrayBuffer, options, defaultOptions, uri)];\n                    case 3:\n                        result = _a.sent();\n                        _a.label = 4;\n                    case 4: return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    Gltf1Importer.prototype._getOptions = function (defaultOptions, json, options) {\n        if (json.asset && json.asset.extras && json.asset.extras.loadOptions) {\n            for (var optionName in json.asset.extras.loadOptions) {\n                defaultOptions[optionName] = json.asset.extras.loadOptions[optionName];\n            }\n        }\n        for (var optionName in options) {\n            defaultOptions[optionName] = options[optionName];\n        }\n        return defaultOptions;\n    };\n    Gltf1Importer.prototype._loadAsBinaryJson = function (dataView, isLittleEndian, arrayBuffer, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function () {\n            var gltfVer, lengthOfThisFile, lengthOfJSonChunkData, chunkType, arrayBufferJSonContent, gotText, gltfJson, arrayBufferBinary, basePath, result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        gltfVer = dataView.getUint32(4, isLittleEndian);\n                        if (gltfVer !== 2) {\n                            throw new Error('invalid version field in this binary glTF file.');\n                        }\n                        lengthOfThisFile = dataView.getUint32(8, isLittleEndian);\n                        lengthOfJSonChunkData = dataView.getUint32(12, isLittleEndian);\n                        chunkType = dataView.getUint32(16, isLittleEndian);\n                        // 0x4E4F534A means JSON format (0x4E4F534A is 'JSON' in ASCII codes)\n                        if (chunkType !== 0x4E4F534A) {\n                            throw new Error('invalid chunkType of chunk0 in this binary glTF file.');\n                        }\n                        arrayBufferJSonContent = arrayBuffer.slice(20, 20 + lengthOfJSonChunkData);\n                        gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(arrayBufferJSonContent);\n                        gltfJson = JSON.parse(gotText);\n                        options = this._getOptions(defaultOptions, gltfJson, options);\n                        arrayBufferBinary = arrayBuffer.slice(20 + lengthOfJSonChunkData + 8);\n                        basePath = null;\n                        if (uri) {\n                            //Set the location of glb file as basePath\n                            basePath = uri.substring(0, uri.lastIndexOf('/')) + '/';\n                        }\n                        if (gltfJson.asset === undefined) {\n                            gltfJson.asset = {};\n                        }\n                        if (gltfJson.asset.extras === undefined) {\n                            gltfJson.asset.extras = { fileType: \"glTF\", version: \"1\" };\n                        }\n                        this._mergeExtendedJson(gltfJson, options.extendedJson);\n                        gltfJson.asset.extras.basePath = basePath;\n                        return [4 /*yield*/, this._loadInner(arrayBufferBinary, basePath, gltfJson, options)];\n                    case 1:\n                        result = _a.sent();\n                        return [2 /*return*/, result[0][0]];\n                }\n            });\n        });\n    };\n    Gltf1Importer.prototype._loadAsTextJson = function (gltfJson, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function () {\n            var basePath, result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (uri) {\n                            //Set the location of gltf file as basePath\n                            basePath = uri.substring(0, uri.lastIndexOf('/')) + '/';\n                        }\n                        if (gltfJson.asset === undefined) {\n                            gltfJson.asset = {};\n                        }\n                        if (gltfJson.asset.extras === undefined) {\n                            gltfJson.asset.extras = { fileType: \"glTF\", version: \"1\" };\n                        }\n                        options = this._getOptions(defaultOptions, gltfJson, options);\n                        this._mergeExtendedJson(gltfJson, options.extendedJson);\n                        gltfJson.asset.extras.basePath = basePath;\n                        return [4 /*yield*/, this._loadInner(undefined, basePath, gltfJson, options)];\n                    case 1:\n                        result = _a.sent();\n                        return [2 /*return*/, result[0][0]];\n                }\n            });\n        });\n    };\n    Gltf1Importer.prototype._loadInner = function (arrayBufferBinary, basePath, gltfJson, options) {\n        var _this = this;\n        var promises = [];\n        var resources = {\n            shaders: [],\n            buffers: [],\n            images: []\n        };\n        promises.push(this._loadResources(arrayBufferBinary, basePath, gltfJson, options, resources));\n        promises.push(new Promise(function (resolve, reject) {\n            _this._loadJsonContent(gltfJson, options);\n            resolve();\n        }));\n        return Promise.all(promises);\n    };\n    Gltf1Importer.prototype._loadJsonContent = function (gltfJson, options) {\n        this._convertToGltf2LikeStructure(gltfJson);\n        // Scene\n        this._loadDependenciesOfScenes(gltfJson);\n        // Node\n        this._loadDependenciesOfNodes(gltfJson);\n        // Mesh\n        this._loadDependenciesOfMeshes(gltfJson);\n        // Material\n        this._loadDependenciesOfMaterials(gltfJson);\n        // Texture\n        this._loadDependenciesOfTextures(gltfJson);\n        // Joint\n        this._loadDependenciesOfJoints(gltfJson);\n        // Animation\n        this._loadDependenciesOfAnimations(gltfJson);\n        // Accessor\n        this._loadDependenciesOfAccessors(gltfJson);\n        // BufferView\n        this._loadDependenciesOfBufferViews(gltfJson);\n    };\n    Gltf1Importer.prototype._convertToGltf2LikeStructure = function (gltfJson) {\n        gltfJson.bufferDic = gltfJson.buffers;\n        gltfJson.buffers = [];\n        for (var bufferName in gltfJson.bufferDic) {\n            gltfJson.buffers.push(gltfJson.bufferDic[bufferName]);\n        }\n        gltfJson.sceneDic = gltfJson.scenes;\n        gltfJson.scenes = [];\n        for (var sceneName in gltfJson.sceneDic) {\n            gltfJson.scenes.push(gltfJson.sceneDic[sceneName]);\n        }\n        gltfJson.meshDic = gltfJson.meshes;\n        {\n            var count = 0;\n            gltfJson.nodeDic = gltfJson.nodes;\n            gltfJson.nodes = [];\n            gltfJson.nodesIndices = [];\n            for (var nodeName in gltfJson.nodeDic) {\n                gltfJson.nodesIndices.push(count);\n                var node = gltfJson.nodeDic[nodeName];\n                node._index = count++;\n                gltfJson.nodes.push(node);\n            }\n        }\n        gltfJson.skinDic = gltfJson.skins;\n        gltfJson.skins = [];\n        for (var skinName in gltfJson.skinDic) {\n            gltfJson.skins.push(gltfJson.skinDic[skinName]);\n        }\n        gltfJson.materialDic = gltfJson.materials;\n        gltfJson.cameraDic = gltfJson.cameras;\n        gltfJson.shaderDic = gltfJson.shaders;\n        gltfJson.imageDic = gltfJson.images;\n        gltfJson.animationDic = gltfJson.animations;\n        gltfJson.animations = [];\n        for (var animationName in gltfJson.animationDic) {\n            gltfJson.animations.push(gltfJson.animationDic[animationName]);\n        }\n        gltfJson.textureDic = gltfJson.textures;\n        gltfJson.samplerDic = gltfJson.samplers;\n        gltfJson.accessorDic = gltfJson.accessors;\n        gltfJson.bufferViewDic = gltfJson.bufferViews;\n    };\n    Gltf1Importer.prototype._loadDependenciesOfScenes = function (gltfJson) {\n        var e_1, _a;\n        for (var sceneName in gltfJson.sceneDic) {\n            var scene = gltfJson.sceneDic[sceneName];\n            scene.nodeNames = scene.nodes;\n            scene.nodes = [];\n            scene.nodesIndices = [];\n            try {\n                for (var _b = __values(scene.nodeNames), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var name_1 = _c.value;\n                    scene.nodes.push(gltfJson.nodeDic[name_1]);\n                    // calc index of 'name' in gltfJson.nodeDic enumerate\n                    var count = 0;\n                    for (var nodeName in gltfJson.nodeDic) {\n                        if (nodeName === name_1) {\n                            break;\n                        }\n                        count++;\n                    }\n                    scene.nodesIndices.push(count);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n    };\n    Gltf1Importer.prototype._loadDependenciesOfNodes = function (gltfJson) {\n        var e_2, _a, e_3, _b, e_4, _c;\n        try {\n            for (var _d = __values(gltfJson.nodes), _e = _d.next(); !_e.done; _e = _d.next()) {\n                var node = _e.value;\n                //const node = (gltfJson.nodeDic as any)[nodeName];\n                // Hierarchy\n                if (node.children) {\n                    node.childrenNames = node.children.concat();\n                    node.children = [];\n                    node.childrenIndices = [];\n                    try {\n                        for (var _f = __values(node.childrenNames), _g = _f.next(); !_g.done; _g = _f.next()) {\n                            var name_2 = _g.value;\n                            var childNode = gltfJson.nodeDic[name_2];\n                            node.children.push(childNode);\n                            node.childrenIndices.push(childNode._index);\n                        }\n                    }\n                    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                    finally {\n                        try {\n                            if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n                        }\n                        finally { if (e_3) throw e_3.error; }\n                    }\n                }\n                // Mesh\n                if (node.meshes !== void 0 && gltfJson.meshes !== void 0) {\n                    node.meshNames = node.meshes;\n                    node.meshes = [];\n                    try {\n                        for (var _h = __values(node.meshNames), _j = _h.next(); !_j.done; _j = _h.next()) {\n                            var name_3 = _j.value;\n                            node.meshes.push(gltfJson.meshDic[name_3]);\n                        }\n                    }\n                    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                    finally {\n                        try {\n                            if (_j && !_j.done && (_c = _h.return)) _c.call(_h);\n                        }\n                        finally { if (e_4) throw e_4.error; }\n                    }\n                    node.mesh = node.meshes[1];\n                    if (node.meshes == null || node.meshes.length === 0) {\n                        node.mesh = node.meshes[0];\n                    }\n                    else {\n                        var mergedMesh = {\n                            name: '',\n                            primitives: []\n                        };\n                        for (var i = 0; i < node.meshes.length; i++) {\n                            mergedMesh.name += '_' + node.meshes[i].name;\n                            Array.prototype.push.apply(mergedMesh.primitives, node.meshes[i].primitives);\n                        }\n                        mergedMesh.name += '_merged';\n                        node.mesh = mergedMesh;\n                        node.meshes = void 0;\n                    }\n                }\n                // Skin\n                if (node.skin !== void 0 && gltfJson.skins !== void 0) {\n                    if (typeof node.skin === 'string') {\n                        node.skinName = node.skin;\n                        node.skin = gltfJson.skinDic[node.skinName];\n                    }\n                    // if (node.mesh.extras === void 0) {\n                    //   node.mesh.extras = {};\n                    // }\n                    //node.mesh.extras._skin = node.skin;\n                }\n                // Camera\n                if (node.camera !== void 0 && gltfJson.cameras !== void 0) {\n                    node.cameraName = node.camera;\n                    node.camera = gltfJson.cameraDic[node.cameraName];\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    Gltf1Importer.prototype._loadDependenciesOfMeshes = function (gltfJson) {\n        var e_5, _a;\n        // Mesh\n        for (var meshName in gltfJson.meshDic) {\n            var mesh = gltfJson.meshDic[meshName];\n            try {\n                for (var _b = __values(mesh.primitives), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var primitive = _c.value;\n                    if (primitive.material !== void 0) {\n                        primitive.materialName = primitive.material;\n                        primitive.material = gltfJson.materialDic[primitive.materialName];\n                    }\n                    primitive.attributeNames = Object.assign({}, primitive.attributes);\n                    primitive.attributes = [];\n                    for (var attributeName in primitive.attributeNames) {\n                        if (primitive.attributeNames[attributeName] != null) {\n                            var accessorName = primitive.attributeNames[attributeName];\n                            var accessor = gltfJson.accessorDic[accessorName];\n                            if (attributeName === 'JOINT') {\n                                attributeName = 'JOINTS_0';\n                                delete primitive.attributes['JOINT'];\n                            }\n                            else if (attributeName === 'WEIGHT') {\n                                attributeName = 'WEIGHTS_0';\n                                delete primitive.attributes['WEIGHT'];\n                            }\n                            accessor.extras = {\n                                toGetAsTypedArray: true,\n                                attributeName: attributeName\n                            };\n                            primitive.attributes.push(accessor);\n                        }\n                        else {\n                            //primitive.attributes[attributeName] = void 0;\n                        }\n                    }\n                    if (primitive.indices !== void 0) {\n                        primitive.indicesName = primitive.indices;\n                        primitive.indices = gltfJson.accessorDic[primitive.indicesName];\n                    }\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n        }\n    };\n    Gltf1Importer.prototype._isKHRMaterialsCommon = function (materialJson) {\n        if (typeof materialJson.extensions !== 'undefined' && typeof materialJson.extensions.KHR_materials_common !== 'undefined') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Gltf1Importer.prototype._loadDependenciesOfMaterials = function (gltfJson) {\n        // Material\n        if (gltfJson.materials) {\n            var _loop_1 = function (materialStr) {\n                var material = gltfJson.materials[materialStr];\n                var origMaterial = material;\n                if (this_1._isKHRMaterialsCommon(material)) {\n                    material = material.extensions.KHR_materials_common;\n                }\n                var setParameters = function (values, isParameter) {\n                    for (var valueName in values) {\n                        var value = null;\n                        if (isParameter) {\n                            value = values[valueName].value;\n                            if (typeof value === 'undefined') {\n                                continue;\n                            }\n                        }\n                        else {\n                            value = values[valueName];\n                        }\n                        if (typeof value === 'string') {\n                            var textureStr = value;\n                            var texturePurpose = void 0;\n                            if (valueName === 'diffuse' || (material.technique === \"CONSTANT\" && valueName === 'ambient')) {\n                                origMaterial.diffuseColorTexture = {};\n                                origMaterial.diffuseColorTexture.texture = gltfJson.textures[value];\n                            }\n                            else if (valueName === 'emission' && textureStr.match(/_normal$/)) {\n                                origMaterial.emissionTexure = {};\n                                origMaterial.emissionTexture.texture = gltfJson.textures[value];\n                            }\n                            origMaterial.extras = {};\n                            origMaterial.extras.technique = material.technique;\n                        }\n                        else {\n                            if (valueName === 'diffuse') {\n                                origMaterial.diffuseColorFactor = value;\n                            }\n                        }\n                    }\n                };\n                setParameters(material.values, false);\n                if (material.technique && gltfJson.techniques) {\n                    if (typeof gltfJson.techniques[material.technique] !== \"undefined\") {\n                        setParameters(gltfJson.techniques[material.technique].parameters, true);\n                    }\n                }\n            };\n            var this_1 = this;\n            for (var materialStr in gltfJson.materials) {\n                _loop_1(materialStr);\n            }\n        }\n    };\n    Gltf1Importer.prototype._loadDependenciesOfTextures = function (gltfJson) {\n        // Texture\n        if (gltfJson.textures) {\n            for (var textureName in gltfJson.textureDic) {\n                var texture = gltfJson.textureDic[textureName];\n                if (texture.sampler !== void 0) {\n                    texture.samplerName = texture.sampler;\n                    texture.sampler = gltfJson.samplerDic[texture.samplerName];\n                }\n                if (texture.source !== void 0) {\n                    texture.sourceName = texture.source;\n                    texture.image = gltfJson.imageDic[texture.sourceName];\n                }\n            }\n        }\n    };\n    Gltf1Importer.prototype._loadDependenciesOfJoints = function (gltfJson) {\n        var e_6, _a, e_7, _b, e_8, _c;\n        if (gltfJson.skins) {\n            for (var skinName in gltfJson.skinDic) {\n                var skin = gltfJson.skinDic[skinName];\n                skin.joints = [];\n                skin.jointsIndices = [];\n                try {\n                    for (var _d = __values(skin.jointNames), _e = _d.next(); !_e.done; _e = _d.next()) {\n                        var jointName = _e.value;\n                        var joint = gltfJson.nodeDic[jointName];\n                        skin.joints.push(joint);\n                        skin.jointsIndices.push(joint._index);\n                    }\n                }\n                catch (e_6_1) { e_6 = { error: e_6_1 }; }\n                finally {\n                    try {\n                        if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n                    }\n                    finally { if (e_6) throw e_6.error; }\n                }\n                skin.skeletonNames = skin.skeletons;\n                if (skin.skeletonNames) {\n                    try {\n                        for (var _f = __values(skin.skeletonNames), _g = _f.next(); !_g.done; _g = _f.next()) {\n                            var name_4 = _g.value;\n                            skin.skeleton = skin.skeletons.push(gltfJson.nodeDic[name_4]);\n                        }\n                    }\n                    catch (e_7_1) { e_7 = { error: e_7_1 }; }\n                    finally {\n                        try {\n                            if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n                        }\n                        finally { if (e_7) throw e_7.error; }\n                    }\n                }\n                else {\n                    skin.skeleton = skin.joints[0];\n                }\n                skin.skeletonIndex = skin.skeleton._index;\n                skin.inverseBindMatricesName = skin.inverseBindMatrices;\n                skin.inverseBindMatrices = gltfJson.accessorDic[skin.inverseBindMatricesName];\n                skin.joints_tmp = skin.joints;\n                skin.joints = [];\n                try {\n                    for (var _h = __values(skin.joints_tmp), _j = _h.next(); !_j.done; _j = _h.next()) {\n                        var joint = _j.value;\n                        skin.joints.push(gltfJson.nodeDic[joint.name]);\n                    }\n                }\n                catch (e_8_1) { e_8 = { error: e_8_1 }; }\n                finally {\n                    try {\n                        if (_j && !_j.done && (_c = _h.return)) _c.call(_h);\n                    }\n                    finally { if (e_8) throw e_8.error; }\n                }\n                skin.joints_tmp = void 0;\n            }\n        }\n    };\n    Gltf1Importer.prototype._loadDependenciesOfAnimations = function (gltfJson) {\n        var e_9, _a, e_10, _b;\n        if (gltfJson.animations) {\n            for (var animationName in gltfJson.animationDic) {\n                var animation = gltfJson.animationDic[animationName];\n                animation.samplerDic = animation.samplers;\n                animation.samplers = [];\n                try {\n                    for (var _c = __values(animation.channels), _d = _c.next(); !_d.done; _d = _c.next()) {\n                        var channel = _d.value;\n                        channel.sampler = animation.samplerDic[channel.sampler];\n                        channel.target.node = gltfJson.nodeDic[channel.target.id];\n                        channel.target.nodeIndex = channel.target.node._index;\n                        channel.sampler.input = gltfJson.accessors[animation.parameters['TIME']];\n                        channel.sampler.output = gltfJson.accessors[animation.parameters[channel.target.path]];\n                        animation.samplers.push(channel.sampler);\n                        if (channel.target.path === 'rotation') {\n                            if (channel.sampler.output.extras === void 0) {\n                                channel.sampler.output.extras = {};\n                            }\n                            channel.sampler.output.extras.quaternionIfVec4 = true;\n                        }\n                    }\n                }\n                catch (e_9_1) { e_9 = { error: e_9_1 }; }\n                finally {\n                    try {\n                        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                    }\n                    finally { if (e_9) throw e_9.error; }\n                }\n                animation.channelDic = animation.channels;\n                animation.channels = [];\n                try {\n                    for (var _e = __values(animation.channelDic), _f = _e.next(); !_f.done; _f = _e.next()) {\n                        var channel = _f.value;\n                        animation.channels.push(channel);\n                    }\n                }\n                catch (e_10_1) { e_10 = { error: e_10_1 }; }\n                finally {\n                    try {\n                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                    }\n                    finally { if (e_10) throw e_10.error; }\n                }\n            }\n        }\n    };\n    Gltf1Importer.prototype._loadDependenciesOfAccessors = function (gltfJson) {\n        // Accessor\n        for (var accessorName in gltfJson.accessorDic) {\n            var accessor = gltfJson.accessorDic[accessorName];\n            if (accessor.bufferView !== void 0) {\n                accessor.bufferViewName = accessor.bufferView;\n                accessor.bufferView = gltfJson.bufferViewDic[accessor.bufferViewName];\n            }\n        }\n    };\n    Gltf1Importer.prototype._loadDependenciesOfBufferViews = function (gltfJson) {\n        // BufferView\n        for (var bufferViewName in gltfJson.bufferViewDic) {\n            var bufferView = gltfJson.bufferViewDic[bufferViewName];\n            if (bufferView.buffer !== void 0) {\n                bufferView.bufferName = bufferView.buffer;\n                bufferView.buffer = gltfJson.bufferDic[bufferView.bufferName];\n            }\n        }\n    };\n    Gltf1Importer.prototype._mergeExtendedJson = function (gltfJson, extendedData) {\n        var extendedJson = null;\n        if (extendedData instanceof ArrayBuffer) {\n            var extendedJsonStr = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(extendedData);\n            extendedJson = JSON.parse(extendedJsonStr);\n        }\n        else if (typeof extendedData === 'string') {\n            extendedJson = JSON.parse(extendedData);\n            extendedJson = extendedJson;\n        }\n        else if (typeof extendedData === 'object') {\n            extendedJson = extendedData;\n        }\n        else {\n        }\n        Object.assign(gltfJson, extendedJson);\n    };\n    Gltf1Importer.prototype._loadResources = function (arrayBufferBinary, basePath, gltfJson, options, resources) {\n        var _this = this;\n        var promisesToLoadResources = [];\n        var _loop_2 = function (i) {\n            var bufferInfo = gltfJson.buffers[i];\n            var splitted = void 0;\n            var filename;\n            if (bufferInfo.uri) {\n                splitted = bufferInfo.uri.split('/');\n                filename = splitted[splitted.length - 1];\n            }\n            if (typeof bufferInfo.uri === 'undefined') {\n                promisesToLoadResources.push(new Promise(function (resolve, rejected) {\n                    resources.buffers[i] = arrayBufferBinary;\n                    bufferInfo.buffer = arrayBufferBinary;\n                    resolve(gltfJson);\n                }));\n            }\n            else if (bufferInfo.uri.match(/^data:application\\/(.*);base64,/)) {\n                promisesToLoadResources.push(new Promise(function (resolve, rejected) {\n                    var arrayBuffer = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].base64ToArrayBuffer(bufferInfo.uri);\n                    resources.buffers[i] = arrayBuffer;\n                    bufferInfo.buffer = arrayBuffer;\n                    resolve(gltfJson);\n                }));\n            }\n            else if (options.files && options.files[filename]) {\n                promisesToLoadResources.push(new Promise(function (resolve, rejected) {\n                    var arrayBuffer = options.files[filename];\n                    resources.buffers[i] = arrayBuffer;\n                    bufferInfo.buffer = arrayBuffer;\n                    resolve(gltfJson);\n                }));\n            }\n            else {\n                promisesToLoadResources.push(_misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].loadResourceAsync(basePath + bufferInfo.uri, true, function (resolve, response) {\n                    resources.buffers[i] = response;\n                    bufferInfo.buffer = response;\n                    resolve(gltfJson);\n                }, function (reject, error) {\n                }));\n            }\n        };\n        // Shaders Async load\n        // for (let _i in gltfJson.shaders) {\n        //   const i = _i as any as number;\n        //   resources.shaders[i] = {};\n        //   let shaderJson = gltfJson.shaders[i];\n        //   let shaderType = shaderJson.type;\n        //   if (typeof shaderJson.extensions !== 'undefined' && typeof shaderJson.extensions.KHR_binary_glTF !== 'undefined') {\n        //     resources.shaders[i].shaderText = this._accessBinaryAsShader(shaderJson.extensions.KHR_binary_glTF.bufferView, gltfJson, arrayBufferBinary);\n        //     resources.shaders[i].shaderType = shaderType;\n        //     continue;\n        //   }\n        //   let shaderUri = shaderJson.uri;\n        //   if (options.files) {\n        //     const splitted = shaderUri.split('/');\n        //     const filename = splitted[splitted.length - 1];\n        //     if (options.files[filename]) {\n        //       const arrayBuffer = options.files[filename];\n        //       resources.shaders[i].shaderText = DataUtil.arrayBufferToString(arrayBuffer);\n        //       resources.shaders[i].shaderType = shaderType;\n        //       continue;\n        //     }\n        //   }\n        //   if (shaderUri.match(/^data:/)) {\n        //     promisesToLoadResources.push(\n        //       new Promise((resolve, rejected) => {\n        //         let arrayBuffer = DataUtil.base64ToArrayBuffer(shaderUri);\n        //         resources.shaders[i].shaderText = DataUtil.arrayBufferToString(arrayBuffer);\n        //         resources.shaders[i].shaderType = shaderType;\n        //         resolve();\n        //       })\n        //     );\n        //   } else {\n        //     shaderUri = basePath + shaderUri;\n        //     promisesToLoadResources.push(\n        //       DataUtil.loadResourceAsync(shaderUri, false,\n        //         (resolve:Function, response:any)=>{\n        //           resources.shaders[i].shaderText = response;\n        //           resources.shaders[i].shaderType = shaderType;\n        //           resolve(gltfJson);\n        //         },\n        //         (reject:Function, error:any)=>{\n        //         }\n        //       )\n        //     );\n        //   }\n        // }\n        // Buffers Async load\n        for (var i in gltfJson.buffers) {\n            _loop_2(i);\n        }\n        var _loop_3 = function (_i) {\n            var i = _i;\n            var imageJson = gltfJson.images[i];\n            //let imageJson = gltfJson.images[textureJson.source];\n            //let samplerJson = gltfJson.samplers[textureJson.sampler];\n            var imageUri;\n            if (typeof imageJson.uri === 'undefined') {\n                imageUri = this_2._accessBinaryAsImage(imageJson.bufferView, gltfJson, arrayBufferBinary, imageJson.mimeType);\n            }\n            else {\n                var imageFileStr = imageJson.uri;\n                var splitted = imageFileStr.split('/');\n                var filename = splitted[splitted.length - 1];\n                if (options.files && options.files[filename]) {\n                    var arrayBuffer = options.files[filename];\n                    var splitted_1 = filename.split('.');\n                    var fileExtension = splitted_1[splitted_1.length - 1];\n                    imageUri = this_2._accessArrayBufferAsImage(arrayBuffer, fileExtension);\n                }\n                else if (imageFileStr.match(/^data:/)) {\n                    imageUri = imageFileStr;\n                }\n                else {\n                    imageUri = basePath + imageFileStr;\n                }\n            }\n            // if (options.extensionLoader && options.extensionLoader.setUVTransformToTexture) {\n            //   options.extensionLoader.setUVTransformToTexture(texture, samplerJson);\n            // }\n            promisesToLoadResources.push(new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\n                var img, load_1, loadBinaryImage;\n                var _this = this;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            img = new Image();\n                            img.crossOrigin = 'Anonymous';\n                            return [4 /*yield*/, this._imgLoad(img, imageUri)];\n                        case 1:\n                            _a.sent();\n                            imageJson.image = img;\n                            resources.images[i] = img;\n                            if (imageUri.match(/^data:/)) {\n                                resolve(gltfJson);\n                            }\n                            else {\n                                load_1 = function (img, response) {\n                                    var bytes = new Uint8Array(response);\n                                    var binaryData = \"\";\n                                    for (var i = 0, len = bytes.byteLength; i < len; i++) {\n                                        binaryData += String.fromCharCode(bytes[i]);\n                                    }\n                                    var split = imageUri.split('.');\n                                    var ext = split[split.length - 1];\n                                    img.src = _this._getImageType(ext) + window.btoa(binaryData);\n                                    img.onload = function () {\n                                        resolve(gltfJson);\n                                    };\n                                };\n                                loadBinaryImage = function () {\n                                    var xhr = new XMLHttpRequest();\n                                    xhr.onreadystatechange = (function (_img) {\n                                        return function () {\n                                            if (xhr.readyState == 4 && xhr.status == 200) {\n                                                load_1(_img, xhr.response);\n                                            }\n                                        };\n                                    })(img);\n                                    xhr.open('GET', imageUri);\n                                    xhr.responseType = 'arraybuffer';\n                                    xhr.send();\n                                };\n                                loadBinaryImage();\n                            }\n                            resources.images[i] = img;\n                            return [2 /*return*/];\n                    }\n                });\n            }); }));\n        };\n        var this_2 = this;\n        // Textures Async load\n        for (var _i in gltfJson.images) {\n            _loop_3(_i);\n        }\n        return Promise.all(promisesToLoadResources);\n    };\n    Gltf1Importer.prototype._accessBinaryAsImage = function (bufferViewStr, json, arrayBuffer, mimeType) {\n        var arrayBufferSliced = this._sliceBufferViewToArrayBuffer(json, bufferViewStr, arrayBuffer);\n        return this._accessArrayBufferAsImage(arrayBufferSliced, mimeType);\n    };\n    Gltf1Importer.prototype._sliceBufferViewToArrayBuffer = function (json, bufferViewStr, arrayBuffer) {\n        var bufferViewJson = json.bufferViews[bufferViewStr];\n        var byteOffset = (bufferViewJson.byteOffset != null) ? bufferViewJson.byteOffset : 0;\n        var byteLength = bufferViewJson.byteLength;\n        var arrayBufferSliced = arrayBuffer.slice(byteOffset, byteOffset + byteLength);\n        return arrayBufferSliced;\n    };\n    Gltf1Importer.prototype._accessArrayBufferAsImage = function (arrayBuffer, imageType) {\n        var bytes = new Uint8Array(arrayBuffer);\n        var binaryData = '';\n        for (var i = 0, len = bytes.byteLength; i < len; i++) {\n            binaryData += String.fromCharCode(bytes[i]);\n        }\n        var imgSrc = this._getImageType(imageType);\n        var dataUrl = imgSrc + _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].btoa(binaryData);\n        return dataUrl;\n    };\n    Gltf1Importer.prototype._imgLoad = function (img, imageUri) {\n        return new Promise((function (resolve, reject) {\n            img.onload = function () {\n                resolve();\n            };\n            img.src = imageUri;\n        }));\n    };\n    Gltf1Importer.prototype._getImageType = function (imageType) {\n        var imgSrc = null;\n        if (imageType === 'image/jpeg' || imageType.toLowerCase() === 'jpg' || imageType.toLowerCase() === 'jpeg') {\n            imgSrc = \"data:image/jpeg;base64,\";\n        }\n        else if (imageType == 'image/png' || imageType.toLowerCase() === 'png') {\n            imgSrc = \"data:image/png;base64,\";\n        }\n        else if (imageType == 'image/gif' || imageType.toLowerCase() === 'gif') {\n            imgSrc = \"data:image/gif;base64,\";\n        }\n        else if (imageType == 'image/bmp' || imageType.toLowerCase() === 'bmp') {\n            imgSrc = \"data:image/bmp;base64,\";\n        }\n        else {\n            imgSrc = \"data:image/unknown;base64,\";\n        }\n        return imgSrc;\n    };\n    Gltf1Importer.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new Gltf1Importer();\n        }\n        return this.__instance;\n    };\n    return Gltf1Importer;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (Gltf1Importer);\n\n\n//# sourceURL=webpack:///./src/foundation/importer/Gltf1Importer.ts?");

/***/ }),

/***/ "./src/foundation/importer/Gltf2Importer.ts":
/*!**************************************************!*\
  !*** ./src/foundation/importer/Gltf2Importer.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/DataUtil */ \"./src/foundation/misc/DataUtil.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (undefined && undefined.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\n\nvar Gltf2Importer = /** @class */ (function () {\n    function Gltf2Importer() {\n    }\n    Gltf2Importer.prototype.import = function (uri, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var defaultOptions, _a, _b, _c, fileName, splitted, fileExtension, response, err_1, arrayBuffer;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        defaultOptions = {\n                            files: {\n                            //        \"foo.gltf\": content of file as ArrayBuffer,\n                            //        \"foo.bin\": content of file as ArrayBuffer,\n                            //        \"boo.png\": content of file as ArrayBuffer\n                            },\n                            loaderExtension: null,\n                            defaultShaderClass: null,\n                            statesOfElements: [\n                                {\n                                    targets: [],\n                                    states: {\n                                        enable: [\n                                        // 3042,  // BLEND\n                                        ],\n                                        functions: {\n                                        //\"blendFuncSeparate\": [1, 0, 1, 0],\n                                        }\n                                    },\n                                    isTransparent: true,\n                                    opacity: 1.0,\n                                    isTextureImageToLoadPreMultipliedAlpha: false,\n                                }\n                            ],\n                            extendedJson: void 0 //   URI string / JSON Object / ArrayBuffer\n                        };\n                        if (!(options && options.files)) return [3 /*break*/, 4];\n                        _a = [];\n                        for (_b in options.files)\n                            _a.push(_b);\n                        _c = 0;\n                        _d.label = 1;\n                    case 1:\n                        if (!(_c < _a.length)) return [3 /*break*/, 4];\n                        fileName = _a[_c];\n                        splitted = fileName.split('.');\n                        fileExtension = splitted[splitted.length - 1];\n                        if (!(fileExtension === 'gltf' || fileExtension === 'glb')) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.__loadFromArrayBuffer(options.files[fileName], options, defaultOptions, void 0).catch(function (err) {\n                                console.log('this.__loadFromArrayBuffer error', err);\n                            })];\n                    case 2: return [2 /*return*/, _d.sent()];\n                    case 3:\n                        _c++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        _d.trys.push([4, 6, , 7]);\n                        return [4 /*yield*/, fetch(uri)];\n                    case 5:\n                        response = _d.sent();\n                        return [3 /*break*/, 7];\n                    case 6:\n                        err_1 = _d.sent();\n                        console.log('this.__loadFromArrayBuffer', err_1);\n                        return [3 /*break*/, 7];\n                    case 7:\n                        ;\n                        return [4 /*yield*/, response.arrayBuffer()];\n                    case 8:\n                        arrayBuffer = _d.sent();\n                        return [4 /*yield*/, this.__loadFromArrayBuffer(arrayBuffer, options, defaultOptions, uri).catch(function (err) {\n                                console.log('this.__loadFromArrayBuffer error', err);\n                            })];\n                    case 9: return [2 /*return*/, _d.sent()];\n                }\n            });\n        });\n    };\n    Gltf2Importer.prototype.__loadFromArrayBuffer = function (arrayBuffer, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function () {\n            var dataView, isLittleEndian, magic, result, gotText, json;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        dataView = new DataView(arrayBuffer, 0, 20);\n                        isLittleEndian = true;\n                        magic = dataView.getUint32(0, isLittleEndian);\n                        if (!(magic !== 0x46546C67)) return [3 /*break*/, 2];\n                        gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(arrayBuffer);\n                        json = JSON.parse(gotText);\n                        return [4 /*yield*/, this._loadAsTextJson(json, options, defaultOptions, uri).catch(function (err) {\n                                console.log('this.__loadAsTextJson error', err);\n                            })];\n                    case 1:\n                        result = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 2: return [4 /*yield*/, this._loadAsBinaryJson(dataView, isLittleEndian, arrayBuffer, options, defaultOptions, uri).catch(function (err) {\n                            console.log('this.__loadAsBinaryJson error', err);\n                        })];\n                    case 3:\n                        result = _a.sent();\n                        _a.label = 4;\n                    case 4: return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    Gltf2Importer.prototype._getOptions = function (defaultOptions, json, options) {\n        if (json.asset && json.asset.extras && json.asset.extras.loadOptions) {\n            for (var optionName in json.asset.extras.loadOptions) {\n                defaultOptions[optionName] = json.asset.extras.loadOptions[optionName];\n            }\n        }\n        for (var optionName in options) {\n            defaultOptions[optionName] = options[optionName];\n        }\n        return defaultOptions;\n    };\n    Gltf2Importer.prototype._loadAsBinaryJson = function (dataView, isLittleEndian, arrayBuffer, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function () {\n            var gltfVer, lengthOfThisFile, lengthOfJSonChunkData, chunkType, arrayBufferJSonContent, gotText, gltfJson, arrayBufferBinary, basePath, result, err_2;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        gltfVer = dataView.getUint32(4, isLittleEndian);\n                        if (gltfVer !== 2) {\n                            throw new Error('invalid version field in this binary glTF file.');\n                        }\n                        lengthOfThisFile = dataView.getUint32(8, isLittleEndian);\n                        lengthOfJSonChunkData = dataView.getUint32(12, isLittleEndian);\n                        chunkType = dataView.getUint32(16, isLittleEndian);\n                        // 0x4E4F534A means JSON format (0x4E4F534A is 'JSON' in ASCII codes)\n                        if (chunkType !== 0x4E4F534A) {\n                            throw new Error('invalid chunkType of chunk0 in this binary glTF file.');\n                        }\n                        arrayBufferJSonContent = arrayBuffer.slice(20, 20 + lengthOfJSonChunkData);\n                        gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(arrayBufferJSonContent);\n                        gltfJson = JSON.parse(gotText);\n                        options = this._getOptions(defaultOptions, gltfJson, options);\n                        arrayBufferBinary = arrayBuffer.slice(20 + lengthOfJSonChunkData + 8);\n                        basePath = null;\n                        if (uri) {\n                            //Set the location of glb file as basePath\n                            basePath = uri.substring(0, uri.lastIndexOf('/')) + '/';\n                        }\n                        if (gltfJson.asset.extras === undefined) {\n                            gltfJson.asset.extras = { fileType: \"glTF\", version: \"2\" };\n                        }\n                        this._mergeExtendedJson(gltfJson, options.extendedJson);\n                        gltfJson.asset.extras.basePath = basePath;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this._loadInner(arrayBufferBinary, basePath, gltfJson, options)];\n                    case 2:\n                        result = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_2 = _a.sent();\n                        console.log(\"this._loadInner error in _loadAsBinaryJson\", err_2);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/, result[0][0]];\n                }\n            });\n        });\n    };\n    Gltf2Importer.prototype._loadAsTextJson = function (gltfJson, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function () {\n            var basePath, result, err_3;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (uri) {\n                            //Set the location of gltf file as basePath\n                            basePath = uri.substring(0, uri.lastIndexOf('/')) + '/';\n                        }\n                        if (gltfJson.asset.extras === undefined) {\n                            gltfJson.asset.extras = { fileType: \"glTF\", version: \"2\" };\n                        }\n                        options = this._getOptions(defaultOptions, gltfJson, options);\n                        this._mergeExtendedJson(gltfJson, options.extendedJson);\n                        gltfJson.asset.extras.basePath = basePath;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this._loadInner(undefined, basePath, gltfJson, options)];\n                    case 2:\n                        result = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_3 = _a.sent();\n                        console.log('this._loadInner error in _loadAsTextJson', err_3);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/, result[0][0]];\n                }\n            });\n        });\n    };\n    Gltf2Importer.prototype._loadInner = function (arrayBufferBinary, basePath, gltfJson, options) {\n        var _this = this;\n        var promises = [];\n        var resources = {\n            shaders: [],\n            buffers: [],\n            images: []\n        };\n        promises.push(this._loadResources(arrayBufferBinary, basePath, gltfJson, options, resources));\n        promises.push(new Promise(function (resolve, reject) {\n            _this._loadJsonContent(gltfJson, options);\n            resolve();\n        }));\n        return Promise.all(promises);\n    };\n    Gltf2Importer.prototype._loadJsonContent = function (gltfJson, options) {\n        // Scene\n        this._loadDependenciesOfScenes(gltfJson);\n        // Node\n        this._loadDependenciesOfNodes(gltfJson);\n        // Mesh\n        this._loadDependenciesOfMeshes(gltfJson);\n        // Material\n        this._loadDependenciesOfMaterials(gltfJson);\n        // Texture\n        this._loadDependenciesOfTextures(gltfJson);\n        // Joint\n        this._loadDependenciesOfJoints(gltfJson);\n        // Animation\n        this._loadDependenciesOfAnimations(gltfJson);\n        // Accessor\n        this._loadDependenciesOfAccessors(gltfJson);\n        // BufferView\n        this._loadDependenciesOfBufferViews(gltfJson);\n        if (gltfJson.asset === void 0) {\n            gltfJson.asset = {};\n        }\n        if (gltfJson.asset.extras === void 0) {\n            gltfJson.asset.extras = {};\n        }\n    };\n    Gltf2Importer.prototype._loadDependenciesOfScenes = function (gltfJson) {\n        var e_1, _a;\n        try {\n            for (var _b = __values(gltfJson.scenes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var scene = _c.value;\n                scene.nodesIndices = scene.nodes.concat();\n                for (var i in scene.nodesIndices) {\n                    scene.nodes[i] = gltfJson.nodes[scene.nodes[i]];\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    Gltf2Importer.prototype._loadDependenciesOfNodes = function (gltfJson) {\n        var e_2, _a;\n        try {\n            for (var _b = __values(gltfJson.nodes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var node = _c.value;\n                // Hierarchy\n                if (node.children) {\n                    node.childrenIndices = node.children.concat();\n                    node.children = [];\n                    for (var i in node.childrenIndices) {\n                        node.children[i] = gltfJson.nodes[node.childrenIndices[i]];\n                    }\n                }\n                // Mesh\n                if (node.mesh !== void 0 && gltfJson.meshes !== void 0) {\n                    node.meshIndex = node.mesh;\n                    node.mesh = gltfJson.meshes[node.meshIndex];\n                }\n                // Skin\n                if (node.skin !== void 0 && gltfJson.skins !== void 0) {\n                    node.skinIndex = node.skin;\n                    node.skin = gltfJson.skins[node.skinIndex];\n                    if (node.mesh.extras === void 0) {\n                        node.mesh.extras = {};\n                    }\n                    node.mesh.extras._skin = node.skin;\n                }\n                // Camera\n                if (node.camera !== void 0 && gltfJson.cameras !== void 0) {\n                    node.cameraIndex = node.camera;\n                    node.camera = gltfJson.cameras[node.cameraIndex];\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    Gltf2Importer.prototype._loadDependenciesOfMeshes = function (gltfJson) {\n        var e_3, _a, e_4, _b, e_5, _c;\n        try {\n            // Mesh\n            for (var _d = __values(gltfJson.meshes), _e = _d.next(); !_e.done; _e = _d.next()) {\n                var mesh = _e.value;\n                try {\n                    for (var _f = __values(mesh.primitives), _g = _f.next(); !_g.done; _g = _f.next()) {\n                        var primitive = _g.value;\n                        if (primitive.material !== void 0) {\n                            primitive.materialIndex = primitive.material;\n                            primitive.material = gltfJson.materials[primitive.materialIndex];\n                        }\n                        primitive.attributesindex = Object.assign({}, primitive.attributes);\n                        for (var attributeName in primitive.attributesindex) {\n                            if (primitive.attributesindex[attributeName] >= 0) {\n                                var accessor = gltfJson.accessors[primitive.attributesindex[attributeName]];\n                                accessor.extras = {\n                                    toGetAsTypedArray: true,\n                                    attributeName: attributeName\n                                };\n                                primitive.attributes[attributeName] = accessor;\n                            }\n                            else {\n                                primitive.attributes[attributeName] = void 0;\n                            }\n                        }\n                        if (primitive.indices != null) {\n                            primitive.indicesIndex = primitive.indices;\n                            primitive.indices = gltfJson.accessors[primitive.indicesIndex];\n                        }\n                        if (primitive.targets != null) {\n                            primitive.targetIndices = primitive.targets;\n                            primitive.targets = [];\n                            try {\n                                for (var _h = __values(primitive.targetIndices), _j = _h.next(); !_j.done; _j = _h.next()) {\n                                    var target = _j.value;\n                                    var attributes = {};\n                                    for (var attributeName in target) {\n                                        if (target[attributeName] >= 0) {\n                                            var accessor = gltfJson.accessors[target[attributeName]];\n                                            accessor.extras = {\n                                                toGetAsTypedArray: true,\n                                                attributeName: attributeName\n                                            };\n                                            attributes[attributeName] = accessor;\n                                        }\n                                        else {\n                                            attributes[attributeName] = void 0;\n                                        }\n                                    }\n                                    primitive.targets.push(attributes);\n                                }\n                            }\n                            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n                            finally {\n                                try {\n                                    if (_j && !_j.done && (_c = _h.return)) _c.call(_h);\n                                }\n                                finally { if (e_5) throw e_5.error; }\n                            }\n                        }\n                    }\n                }\n                catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                finally {\n                    try {\n                        if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n                    }\n                    finally { if (e_4) throw e_4.error; }\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    };\n    Gltf2Importer.prototype._loadDependenciesOfMaterials = function (gltfJson) {\n        var e_6, _a;\n        // Material\n        if (gltfJson.materials) {\n            try {\n                for (var _b = __values(gltfJson.materials), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var material = _c.value;\n                    if (material.pbrMetallicRoughness) {\n                        var baseColorTexture = material.pbrMetallicRoughness.baseColorTexture;\n                        if (baseColorTexture !== void 0) {\n                            baseColorTexture.texture = gltfJson.textures[baseColorTexture.index];\n                        }\n                        var metallicRoughnessTexture = material.pbrMetallicRoughness.metallicRoughnessTexture;\n                        if (metallicRoughnessTexture !== void 0) {\n                            metallicRoughnessTexture.texture = gltfJson.textures[metallicRoughnessTexture.index];\n                        }\n                    }\n                    var normalTexture = material.normalTexture;\n                    if (normalTexture !== void 0) {\n                        normalTexture.texture = gltfJson.textures[normalTexture.index];\n                    }\n                    var occlusionTexture = material.occlusionTexture;\n                    if (occlusionTexture !== void 0) {\n                        occlusionTexture.texture = gltfJson.textures[occlusionTexture.index];\n                    }\n                    var emissiveTexture = material.emissiveTexture;\n                    if (emissiveTexture !== void 0) {\n                        emissiveTexture.texture = gltfJson.textures[emissiveTexture.index];\n                    }\n                }\n            }\n            catch (e_6_1) { e_6 = { error: e_6_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_6) throw e_6.error; }\n            }\n        }\n    };\n    Gltf2Importer.prototype._loadDependenciesOfTextures = function (gltfJson) {\n        var e_7, _a;\n        // Texture\n        if (gltfJson.textures) {\n            try {\n                for (var _b = __values(gltfJson.textures), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var texture = _c.value;\n                    if (texture.sampler !== void 0) {\n                        texture.samplerIndex = texture.sampler;\n                        texture.sampler = gltfJson.samplers[texture.samplerIndex];\n                    }\n                    if (texture.source !== void 0) {\n                        texture.sourceIndex = texture.source;\n                        texture.image = gltfJson.images[texture.sourceIndex];\n                    }\n                }\n            }\n            catch (e_7_1) { e_7 = { error: e_7_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_7) throw e_7.error; }\n            }\n        }\n    };\n    Gltf2Importer.prototype._loadDependenciesOfJoints = function (gltfJson) {\n        var e_8, _a, e_9, _b;\n        if (gltfJson.skins) {\n            try {\n                for (var _c = __values(gltfJson.skins), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var skin = _d.value;\n                    skin.skeletonIndex = skin.skeleton;\n                    skin.skeleton = gltfJson.nodes[skin.skeletonIndex];\n                    skin.inverseBindMatricesIndex = skin.inverseBindMatrices;\n                    skin.inverseBindMatrices = gltfJson.accessors[skin.inverseBindMatricesIndex];\n                    if (skin.skeleton == null) {\n                        skin.skeletonIndex = skin.joints[0];\n                        skin.skeleton = gltfJson.nodes[skin.skeletonIndex];\n                    }\n                    skin.jointsIndices = skin.joints;\n                    skin.joints = [];\n                    try {\n                        for (var _e = __values(skin.jointsIndices), _f = _e.next(); !_f.done; _f = _e.next()) {\n                            var jointIndex = _f.value;\n                            skin.joints.push(gltfJson.nodes[jointIndex]);\n                        }\n                    }\n                    catch (e_9_1) { e_9 = { error: e_9_1 }; }\n                    finally {\n                        try {\n                            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                        }\n                        finally { if (e_9) throw e_9.error; }\n                    }\n                }\n            }\n            catch (e_8_1) { e_8 = { error: e_8_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                }\n                finally { if (e_8) throw e_8.error; }\n            }\n        }\n    };\n    Gltf2Importer.prototype._loadDependenciesOfAnimations = function (gltfJson) {\n        var e_10, _a, e_11, _b, e_12, _c;\n        if (gltfJson.animations) {\n            try {\n                for (var _d = __values(gltfJson.animations), _e = _d.next(); !_e.done; _e = _d.next()) {\n                    var animation = _e.value;\n                    try {\n                        for (var _f = __values(animation.channels), _g = _f.next(); !_g.done; _g = _f.next()) {\n                            var channel = _g.value;\n                            channel.samplerIndex = channel.sampler;\n                            channel.sampler = animation.samplers[channel.samplerIndex];\n                            channel.target.nodeIndex = channel.target.node;\n                            channel.target.node = gltfJson.nodes[channel.target.nodeIndex];\n                        }\n                    }\n                    catch (e_11_1) { e_11 = { error: e_11_1 }; }\n                    finally {\n                        try {\n                            if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n                        }\n                        finally { if (e_11) throw e_11.error; }\n                    }\n                    try {\n                        for (var _h = __values(animation.channels), _j = _h.next(); !_j.done; _j = _h.next()) {\n                            var channel = _j.value;\n                            channel.sampler.inputIndex = channel.sampler.input;\n                            channel.sampler.outputIndex = channel.sampler.output;\n                            channel.sampler.input = gltfJson.accessors[channel.sampler.inputIndex];\n                            channel.sampler.output = gltfJson.accessors[channel.sampler.outputIndex];\n                            if (channel.sampler.output.extras === void 0) {\n                                channel.sampler.output.extras = {};\n                            }\n                            if (channel.target.path === 'rotation') {\n                                channel.sampler.output.extras.quaternionIfVec4 = true;\n                            }\n                            if (channel.target.path === 'weights') {\n                                var weightCount = channel.sampler.output.count / channel.sampler.input.count;\n                                channel.sampler.output.extras.weightCount = weightCount;\n                            }\n                        }\n                    }\n                    catch (e_12_1) { e_12 = { error: e_12_1 }; }\n                    finally {\n                        try {\n                            if (_j && !_j.done && (_c = _h.return)) _c.call(_h);\n                        }\n                        finally { if (e_12) throw e_12.error; }\n                    }\n                }\n            }\n            catch (e_10_1) { e_10 = { error: e_10_1 }; }\n            finally {\n                try {\n                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n                }\n                finally { if (e_10) throw e_10.error; }\n            }\n        }\n    };\n    Gltf2Importer.prototype._loadDependenciesOfAccessors = function (gltfJson) {\n        var e_13, _a;\n        try {\n            // Accessor\n            for (var _b = __values(gltfJson.accessors), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var accessor = _c.value;\n                if (accessor.bufferView == null) {\n                    accessor.bufferView = 0;\n                }\n                accessor.bufferViewIndex = accessor.bufferView;\n                accessor.bufferView = gltfJson.bufferViews[accessor.bufferViewIndex];\n            }\n        }\n        catch (e_13_1) { e_13 = { error: e_13_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_13) throw e_13.error; }\n        }\n    };\n    Gltf2Importer.prototype._loadDependenciesOfBufferViews = function (gltfJson) {\n        var e_14, _a;\n        try {\n            // BufferView\n            for (var _b = __values(gltfJson.bufferViews), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var bufferView = _c.value;\n                if (bufferView.buffer !== void 0) {\n                    bufferView.bufferIndex = bufferView.buffer;\n                    bufferView.buffer = gltfJson.buffers[bufferView.bufferIndex];\n                }\n            }\n        }\n        catch (e_14_1) { e_14 = { error: e_14_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_14) throw e_14.error; }\n        }\n    };\n    Gltf2Importer.prototype._mergeExtendedJson = function (gltfJson, extendedData) {\n        var extendedJson = null;\n        if (extendedData instanceof ArrayBuffer) {\n            var extendedJsonStr = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(extendedData);\n            extendedJson = JSON.parse(extendedJsonStr);\n        }\n        else if (typeof extendedData === 'string') {\n            extendedJson = JSON.parse(extendedData);\n            extendedJson = extendedJson;\n        }\n        else if (typeof extendedData === 'object') {\n            extendedJson = extendedData;\n        }\n        else {\n        }\n        Object.assign(gltfJson, extendedJson);\n    };\n    Gltf2Importer.prototype._loadResources = function (arrayBufferBinary, basePath, gltfJson, options, resources) {\n        return __awaiter(this, void 0, void 0, function () {\n            var promisesToLoadResources, _loop_1, i, _loop_2, this_1, _i;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        promisesToLoadResources = [];\n                        _loop_1 = function (i) {\n                            var bufferInfo = gltfJson.buffers[i];\n                            var splitted = void 0;\n                            var filename;\n                            if (bufferInfo.uri) {\n                                splitted = bufferInfo.uri.split('/');\n                                filename = splitted[splitted.length - 1];\n                            }\n                            if (typeof bufferInfo.uri === 'undefined') {\n                                promisesToLoadResources.push(new Promise(function (resolve, rejected) {\n                                    resources.buffers[i] = arrayBufferBinary;\n                                    bufferInfo.buffer = arrayBufferBinary;\n                                    resolve(gltfJson);\n                                }));\n                            }\n                            else if (bufferInfo.uri.match(/^data:application\\/(.*);base64,/)) {\n                                promisesToLoadResources.push(new Promise(function (resolve, rejected) {\n                                    var arrayBuffer = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].base64ToArrayBuffer(bufferInfo.uri);\n                                    resources.buffers[i] = arrayBuffer;\n                                    bufferInfo.buffer = arrayBuffer;\n                                    resolve(gltfJson);\n                                }));\n                            }\n                            else if (options.files && options.files[filename]) {\n                                promisesToLoadResources.push(new Promise(function (resolve, rejected) {\n                                    var arrayBuffer = options.files[filename];\n                                    resources.buffers[i] = arrayBuffer;\n                                    bufferInfo.buffer = arrayBuffer;\n                                    resolve(gltfJson);\n                                }));\n                            }\n                            else {\n                                promisesToLoadResources.push(_misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].loadResourceAsync(basePath + bufferInfo.uri, true, function (resolve, response) {\n                                    resources.buffers[i] = response;\n                                    bufferInfo.buffer = response;\n                                    resolve(gltfJson);\n                                }, function (reject, error) {\n                                }));\n                            }\n                        };\n                        // Shaders Async load\n                        // for (let _i in gltfJson.shaders) {\n                        //   const i = _i as any as number;\n                        //   resources.shaders[i] = {};\n                        //   let shaderJson = gltfJson.shaders[i];\n                        //   let shaderType = shaderJson.type;\n                        //   if (typeof shaderJson.extensions !== 'undefined' && typeof shaderJson.extensions.KHR_binary_glTF !== 'undefined') {\n                        //     resources.shaders[i].shaderText = this._accessBinaryAsShader(shaderJson.extensions.KHR_binary_glTF.bufferView, gltfJson, arrayBufferBinary);\n                        //     resources.shaders[i].shaderType = shaderType;\n                        //     continue;\n                        //   }\n                        //   let shaderUri = shaderJson.uri;\n                        //   if (options.files) {\n                        //     const splitted = shaderUri.split('/');\n                        //     const filename = splitted[splitted.length - 1];\n                        //     if (options.files[filename]) {\n                        //       const arrayBuffer = options.files[filename];\n                        //       resources.shaders[i].shaderText = DataUtil.arrayBufferToString(arrayBuffer);\n                        //       resources.shaders[i].shaderType = shaderType;\n                        //       continue;\n                        //     }\n                        //   }\n                        //   if (shaderUri.match(/^data:/)) {\n                        //     promisesToLoadResources.push(\n                        //       new Promise((resolve, rejected) => {\n                        //         let arrayBuffer = DataUtil.base64ToArrayBuffer(shaderUri);\n                        //         resources.shaders[i].shaderText = DataUtil.arrayBufferToString(arrayBuffer);\n                        //         resources.shaders[i].shaderType = shaderType;\n                        //         resolve();\n                        //       })\n                        //     );\n                        //   } else {\n                        //     shaderUri = basePath + shaderUri;\n                        //     promisesToLoadResources.push(\n                        //       DataUtil.loadResourceAsync(shaderUri, false,\n                        //         (resolve:Function, response:any)=>{\n                        //           resources.shaders[i].shaderText = response;\n                        //           resources.shaders[i].shaderType = shaderType;\n                        //           resolve(gltfJson);\n                        //         },\n                        //         (reject:Function, error:any)=>{\n                        //         }\n                        //       )\n                        //     );\n                        //   }\n                        // }\n                        // Buffers Async load\n                        for (i in gltfJson.buffers) {\n                            _loop_1(i);\n                        }\n                        return [4 /*yield*/, Promise.all(promisesToLoadResources)];\n                    case 1:\n                        _a.sent();\n                        _loop_2 = function (_i) {\n                            var i = _i;\n                            var imageJson = gltfJson.images[i];\n                            //let imageJson = gltfJson.images[textureJson.source];\n                            //let samplerJson = gltfJson.samplers[textureJson.sampler];\n                            var imageUri;\n                            if (typeof imageJson.uri === 'undefined') {\n                                var arrayBuffer = arrayBufferBinary;\n                                if (arrayBufferBinary == null) {\n                                    var bufferView = gltfJson.bufferViews[imageJson.bufferView];\n                                    arrayBuffer = bufferView.buffer.buffer;\n                                }\n                                imageUri = this_1._accessBinaryAsImage(imageJson.bufferView, gltfJson, arrayBuffer, imageJson.mimeType);\n                            }\n                            else {\n                                var imageFileStr = imageJson.uri;\n                                var splitted = imageFileStr.split('/');\n                                var filename = splitted[splitted.length - 1];\n                                if (options.files && options.files[filename]) {\n                                    var arrayBuffer = options.files[filename];\n                                    var splitted_1 = filename.split('.');\n                                    var fileExtension = splitted_1[splitted_1.length - 1];\n                                    imageUri = this_1._accessArrayBufferAsImage(arrayBuffer, fileExtension);\n                                }\n                                else if (imageFileStr.match(/^data:/)) {\n                                    imageUri = imageFileStr;\n                                }\n                                else {\n                                    imageUri = basePath + imageFileStr;\n                                }\n                            }\n                            // if (options.extensionLoader && options.extensionLoader.setUVTransformToTexture) {\n                            //   options.extensionLoader.setUVTransformToTexture(texture, samplerJson);\n                            // }\n                            promisesToLoadResources.push(new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\n                                var img, load_1, loadBinaryImage;\n                                var _this = this;\n                                return __generator(this, function (_a) {\n                                    switch (_a.label) {\n                                        case 0:\n                                            img = new Image();\n                                            img.crossOrigin = 'Anonymous';\n                                            return [4 /*yield*/, this._imgLoad(img, imageUri)];\n                                        case 1:\n                                            _a.sent();\n                                            imageJson.image = img;\n                                            resources.images[i] = img;\n                                            if (imageUri.match(/^data:/)) {\n                                                resolve(gltfJson);\n                                            }\n                                            else {\n                                                load_1 = function (img, response) {\n                                                    var bytes = new Uint8Array(response);\n                                                    var binaryData = \"\";\n                                                    for (var i = 0, len = bytes.byteLength; i < len; i++) {\n                                                        binaryData += String.fromCharCode(bytes[i]);\n                                                    }\n                                                    var split = imageUri.split('.');\n                                                    var ext = split[split.length - 1];\n                                                    img.src = _this._getImageType(ext) + window.btoa(binaryData);\n                                                    img.name = (imageJson.name) ? imageJson.name : imageJson.uri;\n                                                    img.onload = function () {\n                                                        resolve(gltfJson);\n                                                    };\n                                                };\n                                                loadBinaryImage = function () {\n                                                    var xhr = new XMLHttpRequest();\n                                                    xhr.onreadystatechange = (function (_img) {\n                                                        return function () {\n                                                            if (xhr.readyState == 4 && xhr.status == 200) {\n                                                                load_1(_img, xhr.response);\n                                                            }\n                                                        };\n                                                    })(img);\n                                                    xhr.open('GET', imageUri);\n                                                    xhr.responseType = 'arraybuffer';\n                                                    xhr.send();\n                                                };\n                                                loadBinaryImage();\n                                            }\n                                            resources.images[i] = img;\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            }); }));\n                        };\n                        this_1 = this;\n                        // Textures Async load\n                        for (_i in gltfJson.images) {\n                            _loop_2(_i);\n                        }\n                        return [2 /*return*/, Promise.all(promisesToLoadResources).then().catch(function (err) {\n                                console.log('Promise.all error', err);\n                            })];\n                }\n            });\n        });\n    };\n    Gltf2Importer.prototype._accessBinaryAsImage = function (bufferViewStr, json, arrayBuffer, mimeType) {\n        var arrayBufferSliced = this._sliceBufferViewToArrayBuffer(json, bufferViewStr, arrayBuffer);\n        return this._accessArrayBufferAsImage(arrayBufferSliced, mimeType);\n    };\n    Gltf2Importer.prototype._sliceBufferViewToArrayBuffer = function (json, bufferViewStr, arrayBuffer) {\n        var bufferViewJson = json.bufferViews[bufferViewStr];\n        var byteOffset = (bufferViewJson.byteOffset != null) ? bufferViewJson.byteOffset : 0;\n        var byteLength = bufferViewJson.byteLength;\n        var arrayBufferSliced = arrayBuffer.slice(byteOffset, byteOffset + byteLength);\n        return arrayBufferSliced;\n    };\n    Gltf2Importer.prototype._accessArrayBufferAsImage = function (arrayBuffer, imageType) {\n        var bytes = new Uint8Array(arrayBuffer);\n        var binaryData = '';\n        for (var i = 0, len = bytes.byteLength; i < len; i++) {\n            binaryData += String.fromCharCode(bytes[i]);\n        }\n        var imgSrc = this._getImageType(imageType);\n        var dataUrl = imgSrc + _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].btoa(binaryData);\n        return dataUrl;\n    };\n    Gltf2Importer.prototype._imgLoad = function (img, imageUri) {\n        return new Promise((function (resolve, reject) {\n            img.onload = function () {\n                resolve();\n            };\n            img.src = imageUri;\n        }));\n    };\n    Gltf2Importer.prototype._getImageType = function (imageType) {\n        var imgSrc = null;\n        if (imageType === 'image/jpeg' || imageType.toLowerCase() === 'jpg' || imageType.toLowerCase() === 'jpeg') {\n            imgSrc = \"data:image/jpeg;base64,\";\n        }\n        else if (imageType == 'image/png' || imageType.toLowerCase() === 'png') {\n            imgSrc = \"data:image/png;base64,\";\n        }\n        else if (imageType == 'image/gif' || imageType.toLowerCase() === 'gif') {\n            imgSrc = \"data:image/gif;base64,\";\n        }\n        else if (imageType == 'image/bmp' || imageType.toLowerCase() === 'bmp') {\n            imgSrc = \"data:image/bmp;base64,\";\n        }\n        else {\n            imgSrc = \"data:image/unknown;base64,\";\n        }\n        return imgSrc;\n    };\n    Gltf2Importer.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new Gltf2Importer();\n        }\n        return this.__instance;\n    };\n    return Gltf2Importer;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (Gltf2Importer);\n\n\n//# sourceURL=webpack:///./src/foundation/importer/Gltf2Importer.ts?");

/***/ }),

/***/ "./src/foundation/importer/ModelConverter.ts":
/*!***************************************************!*\
  !*** ./src/foundation/importer/ModelConverter.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _components_TransformComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/TransformComponent */ \"./src/foundation/components/TransformComponent.ts\");\n/* harmony import */ var _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _components_MeshComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_Quaternion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/MeshRendererComponent */ \"./src/foundation/components/MeshRendererComponent.ts\");\n/* harmony import */ var _geometry_Primitive__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../geometry/Primitive */ \"./src/foundation/geometry/Primitive.ts\");\n/* harmony import */ var _memory_Buffer__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../memory/Buffer */ \"./src/foundation/memory/Buffer.ts\");\n/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ \"./src/foundation/definitions/PrimitiveMode.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _definitions_CameraType__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../definitions/CameraType */ \"./src/foundation/definitions/CameraType.ts\");\n/* harmony import */ var _textures_Texture__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../textures/Texture */ \"./src/foundation/textures/Texture.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _components_AnimationComponent__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../components/AnimationComponent */ \"./src/foundation/components/AnimationComponent.ts\");\n/* harmony import */ var _definitions_Animation__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../definitions/Animation */ \"./src/foundation/definitions/Animation.ts\");\n/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../math/MathUtil */ \"./src/foundation/math/MathUtil.ts\");\n/* harmony import */ var _components_SkeletalComponent__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../components/SkeletalComponent */ \"./src/foundation/components/SkeletalComponent.ts\");\n/* harmony import */ var _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../definitions/AlphaMode */ \"./src/foundation/definitions/AlphaMode.ts\");\n/* harmony import */ var _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../helpers/MaterialHelper */ \"./src/foundation/helpers/MaterialHelper.ts\");\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../math/Vector2 */ \"./src/foundation/math/Vector2.ts\");\n/* harmony import */ var _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../definitions/ShadingModel */ \"./src/foundation/definitions/ShadingModel.ts\");\nvar __values = (undefined && undefined.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A converter class from glTF2 model to Rhodonite Native data\n */\nvar ModelConverter = /** @class */ (function () {\n    function ModelConverter() {\n    }\n    /**\n     * The static method to get singleton instance of this class.\n     * @return The singleton instance of ModelConverter class\n     */\n    ModelConverter.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new ModelConverter();\n        }\n        return this.__instance;\n    };\n    ModelConverter.prototype._getDefaultShader = function (options) {\n        var defaultShader = null;\n        // if (options && typeof options.defaultShaderClass !== \"undefined\") {\n        //   if (typeof options.defaultShaderClass === \"string\") {\n        //     defaultShader = GLBoost[options.defaultShaderClass];\n        //   } else {\n        //     defaultShader = options.defaultShaderClass;\n        //   }\n        // }\n        return defaultShader;\n    };\n    ModelConverter.prototype.__generateEntity = function (components, gltfModel) {\n        var repo = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        var entity = repo.createEntity(components);\n        entity.tryToSetTag('SourceType', gltfModel.asset.extras.fileType);\n        entity.tryToSetTag('SourceTypeVersion', gltfModel.asset.extras.version);\n        return entity;\n    };\n    ModelConverter.prototype.__generateGroupEntity = function (gltfModel) {\n        var entity = this.__generateEntity([_components_TransformComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]], gltfModel);\n        return entity;\n    };\n    ModelConverter.prototype.__generateMeshEntity = function (gltfModel) {\n        var entity = this.__generateEntity([_components_TransformComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"], _components_MeshComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"]], gltfModel);\n        return entity;\n    };\n    ModelConverter.prototype.__generateCameraEntity = function (gltfModel) {\n        var entity = this.__generateEntity([_components_TransformComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_14__[\"default\"]], gltfModel);\n        return entity;\n    };\n    ModelConverter.prototype.convertToRhodoniteObject = function (gltfModel) {\n        // load binary data\n        // for (let accessor of gltfModel.accessors) {\n        //   this._accessBinaryWithAccessor(accessor);\n        // }\n        var e_1, _a;\n        var rnBuffer = this.createRnBuffer(gltfModel);\n        // Mesh, Camera, Group, ...\n        var rnEntities = this.__setupObjects(gltfModel, rnBuffer);\n        // Transfrom\n        this._setupTransform(gltfModel, rnEntities);\n        // Skeleton\n        this._setupSkeleton(gltfModel, rnEntities);\n        // Hierarchy\n        this._setupHierarchy(gltfModel, rnEntities);\n        // Camera\n        //this._setupCamera(gltfModel, groups);\n        // Animation\n        this.__setupAnimation(gltfModel, rnEntities);\n        // Root Group\n        var rootGroup = this.__generateGroupEntity(gltfModel);\n        rootGroup.tryToSetUniqueName('FileRoot', true);\n        rootGroup.tryToSetTag('ObjectType', 'top');\n        if (gltfModel.scenes[0].nodesIndices) {\n            try {\n                for (var _b = __values(gltfModel.scenes[0].nodesIndices), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var nodesIndex = _c.value;\n                    rootGroup.getSceneGraph().addChild(rnEntities[nodesIndex].getSceneGraph());\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        // Post Skeletal Proccess\n        // for (let glboostMesh of glboostMeshes) {\n        //   if (glboostMesh instanceof M_SkeletalMesh) {\n        //     if (!glboostMesh.jointsHierarchy) {\n        //       glboostMesh.jointsHierarchy = rootGroup;\n        //     }\n        //   }\n        // }\n        // let options = gltfModel.asset.extras.glboostOptions;\n        // if (options.loaderExtension && options.loaderExtension.setAssetPropertiesToRootGroup) {\n        //   options.loaderExtension.setAssetPropertiesToRootGroup(rootGroup, gltfModel.asset);\n        // }\n        // if (options && options.loaderExtension && options.loaderExtension.loadExtensionInfoAndSetToRootGroup) {\n        //   options.loaderExtension.loadExtensionInfoAndSetToRootGroup(rootGroup, gltfModel, glBoostContext);\n        // }\n        // rootGroup.allMeshes = rootGroup.searchElementsByType(M_Mesh);\n        return rootGroup;\n    };\n    ModelConverter.prototype._setupCamera = function (gltfModel) {\n    };\n    ModelConverter.prototype.createRnBuffer = function (gltfModel) {\n        var buffer = gltfModel.buffers[0];\n        var rnBuffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n            byteLength: buffer.byteLength,\n            arrayBuffer: buffer.buffer,\n            name: \"gltf2Buffer_0_(\" + buffer.uri + \")\"\n        });\n        return rnBuffer;\n    };\n    ModelConverter.prototype._setupTransform = function (gltfModel, groups) {\n        for (var node_i in gltfModel.nodes) {\n            var group = groups[node_i];\n            var nodeJson = gltfModel.nodes[node_i];\n            if (nodeJson.translation) {\n                group.getTransform().translate = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](nodeJson.translation[0], nodeJson.translation[1], nodeJson.translation[2]);\n            }\n            if (nodeJson.scale) {\n                group.getTransform().scale = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](nodeJson.scale[0], nodeJson.scale[1], nodeJson.scale[2]);\n            }\n            if (nodeJson.rotation) {\n                group.getTransform().quaternion = new _math_Quaternion__WEBPACK_IMPORTED_MODULE_5__[\"default\"](nodeJson.rotation[0], nodeJson.rotation[1], nodeJson.rotation[2], nodeJson.rotation[3]);\n            }\n            if (nodeJson.matrix) {\n                group.getTransform().matrix = new _math_Matrix44__WEBPACK_IMPORTED_MODULE_6__[\"default\"](nodeJson.matrix, true);\n            }\n        }\n    };\n    ModelConverter.prototype._setupHierarchy = function (gltfModel, rnEntities) {\n        var e_2, _a;\n        var groupSceneComponents = rnEntities.map(function (group) { return group.getSceneGraph(); });\n        for (var node_i in gltfModel.nodes) {\n            var parentNode_i = parseInt(node_i);\n            var node = gltfModel.nodes[parentNode_i];\n            if (node.childrenIndices) {\n                var parentGroup = groupSceneComponents[parentNode_i];\n                try {\n                    for (var _b = __values(node.childrenIndices), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var childNode_i = _c.value;\n                        var childGroup = groupSceneComponents[childNode_i];\n                        parentGroup.addChild(childGroup);\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n        }\n    };\n    ModelConverter.prototype.__setupAnimation = function (gltfModel, rnEntities) {\n        var e_3, _a, e_4, _b, e_5, _c, e_6, _d;\n        if (gltfModel.animations) {\n            try {\n                for (var _e = __values(gltfModel.animations), _f = _e.next(); !_f.done; _f = _e.next()) {\n                    var animation = _f.value;\n                    try {\n                        for (var _g = __values(animation.samplers), _h = _g.next(); !_h.done; _h = _g.next()) {\n                            var sampler = _h.value;\n                            this._accessBinaryWithAccessor(sampler.input);\n                            this._accessBinaryWithAccessor(sampler.output);\n                        }\n                    }\n                    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                    finally {\n                        try {\n                            if (_h && !_h.done && (_b = _g.return)) _b.call(_g);\n                        }\n                        finally { if (e_4) throw e_4.error; }\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n        }\n        var entityRepository = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        if (gltfModel.animations) {\n            try {\n                for (var _j = __values(gltfModel.animations), _k = _j.next(); !_k.done; _k = _j.next()) {\n                    var animation = _k.value;\n                    try {\n                        for (var _l = __values(animation.channels), _m = _l.next(); !_m.done; _m = _l.next()) {\n                            var channel = _m.value;\n                            var animInputArray = channel.sampler.input.extras.typedDataArray;\n                            var animOutputArray = channel.sampler.output.extras.typedDataArray;\n                            var interpolation = (channel.sampler.interpolation != null) ? channel.sampler.interpolation : 'LINEAR';\n                            var animationAttributeName = '';\n                            if (channel.target.path === 'translation') {\n                                animationAttributeName = 'translate';\n                            }\n                            else if (channel.target.path === 'rotation') {\n                                animationAttributeName = 'quaternion';\n                            }\n                            else {\n                                animationAttributeName = channel.target.path;\n                            }\n                            var rnEntity = rnEntities[channel.target.nodeIndex];\n                            if (rnEntity) {\n                                entityRepository.addComponentsToEntity([_components_AnimationComponent__WEBPACK_IMPORTED_MODULE_18__[\"default\"]], rnEntity.entityUID);\n                                var animationComponent = rnEntity.getComponent(_components_AnimationComponent__WEBPACK_IMPORTED_MODULE_18__[\"default\"]);\n                                if (animationComponent) {\n                                    animationComponent.setAnimation(animationAttributeName, animInputArray, animOutputArray, _definitions_Animation__WEBPACK_IMPORTED_MODULE_19__[\"Animation\"].fromString(interpolation));\n                                }\n                            }\n                        }\n                    }\n                    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n                    finally {\n                        try {\n                            if (_m && !_m.done && (_d = _l.return)) _d.call(_l);\n                        }\n                        finally { if (e_6) throw e_6.error; }\n                    }\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n        }\n    };\n    ModelConverter.prototype._setupSkeleton = function (gltfModel, rnEntities) {\n        var e_7, _a, e_8, _b, e_9, _c;\n        if (gltfModel.skins == null) {\n            return;\n        }\n        var entityRepository = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        try {\n            for (var _d = __values(gltfModel.skins), _e = _d.next(); !_e.done; _e = _d.next()) {\n                var skin = _e.value;\n                if (skin.inverseBindMatrices) {\n                    this._accessBinaryWithAccessor(skin.inverseBindMatrices);\n                }\n            }\n        }\n        catch (e_7_1) { e_7 = { error: e_7_1 }; }\n        finally {\n            try {\n                if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n            }\n            finally { if (e_7) throw e_7.error; }\n        }\n        for (var node_i in gltfModel.nodes) {\n            var node = gltfModel.nodes[node_i];\n            var sg = rnEntities[node_i].getSceneGraph();\n            var skeletalComponent = void 0;\n            if (node.skin != null) {\n                var rnEntity = rnEntities[node_i];\n                entityRepository.addComponentsToEntity([_components_SkeletalComponent__WEBPACK_IMPORTED_MODULE_21__[\"default\"]], rnEntity.entityUID);\n                skeletalComponent = rnEntity.getComponent(_components_SkeletalComponent__WEBPACK_IMPORTED_MODULE_21__[\"default\"]);\n                //        skeletalComponent.isSkinning = false;\n                skeletalComponent._jointIndices = node.skin.jointsIndices;\n                if (node.skin.bindShapeMatrix != null) {\n                    skeletalComponent._bindShapeMatrix = new _math_Matrix44__WEBPACK_IMPORTED_MODULE_6__[\"default\"](node.skin.bindShapeMatrix);\n                }\n            }\n            if (node.skin && node.skin.skeleton) {\n                sg.isRootJoint = true;\n                // if (node.meshes) {\n                //   // let rnEntity = rnEntities[node_i];\n                //   // entityRepository\n                //   // for (let mesh of node.meshes) {\n                //   //   mesh\n                //   //   const entity = this.__generateMeshEntity() {\n                //   //   }\n                //   // }\n                //   // skeletalComponent!.jointsHierarchy = rnEntities[node.skin.skeletonIndex].getSceneGraph();\n                // } else \n                if (node.mesh) {\n                    var joints = [];\n                    try {\n                        for (var _f = __values(node.skin.jointsIndices), _g = _f.next(); !_g.done; _g = _f.next()) {\n                            var i = _g.value;\n                            joints.push(rnEntities[i].getSceneGraph());\n                        }\n                    }\n                    catch (e_8_1) { e_8 = { error: e_8_1 }; }\n                    finally {\n                        try {\n                            if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n                        }\n                        finally { if (e_8) throw e_8.error; }\n                    }\n                    skeletalComponent.joints = joints;\n                    //skeletalComponent!.jointsHierarchy = rnEntities[node.skin.skeletonIndex].getSceneGraph();\n                }\n            }\n            if (node.skin && node.skin.joints) {\n                try {\n                    for (var _h = __values(node.skin.jointsIndices), _j = _h.next(); !_j.done; _j = _h.next()) {\n                        var joint_i = _j.value;\n                        var sg_1 = rnEntities[joint_i].getSceneGraph();\n                        sg_1.jointIndex = joint_i;\n                    }\n                }\n                catch (e_9_1) { e_9 = { error: e_9_1 }; }\n                finally {\n                    try {\n                        if (_j && !_j.done && (_c = _h.return)) _c.call(_h);\n                    }\n                    finally { if (e_9) throw e_9.error; }\n                }\n            }\n            if (node.skin && node.skin.inverseBindMatrices != null) {\n                skeletalComponent._inverseBindMatrices = node.skin.inverseBindMatrices.extras.typedDataArray;\n            }\n        }\n    };\n    ModelConverter.prototype.__setupObjects = function (gltfModel, rnBuffer) {\n        //const meshEntities: Entity[] = [];\n        var rnEntities = [];\n        for (var node_i in gltfModel.nodes) {\n            var node = gltfModel.nodes[parseInt(node_i)];\n            if (node.mesh != null) {\n                var meshEntity = this.__setupMesh(node.mesh, rnBuffer, gltfModel);\n                if (node.name) {\n                    meshEntity.tryToSetUniqueName(node.name, true);\n                }\n                if (node.mesh.name) {\n                    meshEntity.tryToSetUniqueName(node.mesh.name, true);\n                }\n                rnEntities.push(meshEntity);\n            }\n            else if (node.camera != null) {\n                var cameraEntity = this.__setupCamera(node.camera, gltfModel);\n                if (node.name) {\n                    cameraEntity.tryToSetUniqueName(node.name, true);\n                }\n                rnEntities.push(cameraEntity);\n            }\n            else {\n                var group = this.__generateGroupEntity(gltfModel);\n                if (node.name) {\n                    group.tryToSetUniqueName(node.name, true);\n                }\n                rnEntities.push(group);\n            }\n        }\n        return rnEntities;\n    };\n    ModelConverter.prototype.__setupCamera = function (camera, gltfModel) {\n        var cameraEntity = this.__generateCameraEntity(gltfModel);\n        var cameraComponent = cameraEntity.getComponent(_components_CameraComponent__WEBPACK_IMPORTED_MODULE_14__[\"default\"]);\n        cameraComponent.direction = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 0, -1);\n        if (gltfModel.asset && gltfModel.asset.LastSaved_ApplicationVendor) {\n            // For an old exporter compatibility\n            cameraComponent.direction = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](1, 0, 0);\n            cameraComponent.directionInner = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](1, 0, 0);\n        }\n        cameraComponent.up = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 1, 0);\n        cameraComponent.type = _definitions_CameraType__WEBPACK_IMPORTED_MODULE_15__[\"CameraType\"].fromString(camera.type);\n        if (cameraComponent.type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_15__[\"CameraType\"].Perspective) {\n            cameraComponent.aspect = camera.perspective.aspectRatio ? camera.perspective.aspectRatio : 1;\n            cameraComponent.fovy = _math_MathUtil__WEBPACK_IMPORTED_MODULE_20__[\"MathUtil\"].radianToDegree(camera.perspective.yfov);\n            cameraComponent.zNear = camera.perspective.znear;\n            cameraComponent.zFar = camera.perspective.zfar ? camera.perspective.zfar : 100000;\n        }\n        else if (cameraComponent.type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_15__[\"CameraType\"].Orthographic) {\n            cameraComponent.xmag = camera.orthographic.zmag;\n            cameraComponent.ymag = camera.orthographic.ymag;\n            cameraComponent.zNear = camera.orthographic.znear;\n            cameraComponent.zFar = camera.orthographic.zfar;\n        }\n        return cameraEntity;\n    };\n    ModelConverter.prototype.__setupMesh = function (mesh, rnBuffer, gltfModel) {\n        var e_10, _a;\n        var meshEntity = this.__generateMeshEntity(gltfModel);\n        var rnPrimitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_10__[\"PrimitiveMode\"].Triangles;\n        var meshComponent = meshEntity.getComponent(_components_MeshComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\n        for (var i in mesh.primitives) {\n            var primitive = mesh.primitives[i];\n            if (primitive.mode != null) {\n                rnPrimitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_10__[\"PrimitiveMode\"].from(primitive.mode);\n            }\n            // indices\n            var indicesRnAccessor = void 0;\n            var map = new Map();\n            if (primitive.extensions && primitive.extensions.KHR_draco_mesh_compression) {\n                indicesRnAccessor = this.__decodeDraco(primitive, rnBuffer, gltfModel, map);\n                if (indicesRnAccessor == null) {\n                    break;\n                }\n            }\n            else {\n                // attributes\n                if (primitive.indices) {\n                    indicesRnAccessor = this.__getRnAccessor(primitive.indices, rnBuffer);\n                }\n                for (var attributeName in primitive.attributes) {\n                    var attributeAccessor = primitive.attributes[attributeName];\n                    var attributeRnAccessor = this.__getRnAccessor(attributeAccessor, rnBuffer);\n                    map.set(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_13__[\"VertexAttribute\"].fromString(attributeAccessor.extras.attributeName), attributeRnAccessor);\n                }\n            }\n            var material = this.__setupMaterial(gltfModel, primitive.material);\n            var rnPrimitive = new _geometry_Primitive__WEBPACK_IMPORTED_MODULE_8__[\"default\"]();\n            rnPrimitive.setData(map, rnPrimitiveMode, material, indicesRnAccessor);\n            // morph targets\n            if (primitive.targets != null) {\n                var targets = [];\n                try {\n                    for (var _b = __values(primitive.targets), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var target = _c.value;\n                        var targetMap = new Map();\n                        for (var attributeName in target) {\n                            var attributeAccessor = target[attributeName];\n                            var attributeRnAccessor = this.__getRnAccessor(attributeAccessor, rnBuffer);\n                            targetMap.set(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_13__[\"VertexAttribute\"].fromString(attributeName), attributeRnAccessor);\n                        }\n                        targets.push(targetMap);\n                    }\n                }\n                catch (e_10_1) { e_10 = { error: e_10_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_10) throw e_10.error; }\n                }\n                rnPrimitive.setTargets(targets);\n            }\n            meshComponent.addPrimitive(rnPrimitive);\n        }\n        if (mesh.weights) {\n            meshComponent.weights = mesh.weights;\n        }\n        return meshEntity;\n    };\n    ModelConverter.prototype.__setupMaterial = function (gltfModel, materialJson) {\n        if (materialJson == null) {\n            return void 0;\n        }\n        var material;\n        if (gltfModel.asset != null && gltfModel.asset.version === '2') {\n        }\n        else {\n        }\n        var pbrMetallicRoughness = materialJson.pbrMetallicRoughness;\n        if (pbrMetallicRoughness != null) {\n            material = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_23__[\"default\"].createPbrUberMaterial();\n            var baseColorFactor = pbrMetallicRoughness.baseColorFactor;\n            if (baseColorFactor != null) {\n                material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].BaseColorFactor, new _math_Vector4__WEBPACK_IMPORTED_MODULE_17__[\"default\"](baseColorFactor));\n            }\n            var baseColorTexture = pbrMetallicRoughness.baseColorTexture;\n            if (baseColorTexture != null) {\n                var texture = baseColorTexture.texture;\n                var image = texture.image.image;\n                var rnTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_16__[\"default\"]();\n                rnTexture.generateTextureFromImage(image);\n                rnTexture.name = image.name;\n                // material.baseColorTexture = rnTexture;\n                material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].BaseColorTexture, rnTexture);\n            }\n            var normalTexture = materialJson.normalTexture;\n            if (normalTexture != null) {\n                var texture = normalTexture.texture;\n                var image = texture.image.image;\n                var rnTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_16__[\"default\"]();\n                rnTexture.generateTextureFromImage(image);\n                rnTexture.name = image.name;\n                // material.normalTexture = rnTexture;\n                material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].NormalTexture, rnTexture);\n            }\n            var occlusionTexture = materialJson.occlusionTexture;\n            if (occlusionTexture != null) {\n                var texture = occlusionTexture.texture;\n                var image = texture.image.image;\n                var rnTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_16__[\"default\"]();\n                rnTexture.generateTextureFromImage(image);\n                rnTexture.name = image.name;\n                // material.occlusionTexture = rnTexture;\n                material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].OcclusionTexture, rnTexture);\n            }\n            var metallicFactor = pbrMetallicRoughness.metallicFactor;\n            metallicFactor = (metallicFactor != null) ? metallicFactor : 1;\n            var roughnessFactor = pbrMetallicRoughness.roughnessFactor;\n            roughnessFactor = (roughnessFactor != null) ? roughnessFactor : 1;\n            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].MetallicRoughnessFactor, new _math_Vector2__WEBPACK_IMPORTED_MODULE_25__[\"default\"](metallicFactor, roughnessFactor));\n            var metallicRoughnessTexture = pbrMetallicRoughness.metallicRoughnessTexture;\n            if (metallicRoughnessTexture != null) {\n                var texture = metallicRoughnessTexture.texture;\n                var image = texture.image.image;\n                var rnTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_16__[\"default\"]();\n                rnTexture.generateTextureFromImage(image);\n                rnTexture.name = image.name;\n                // material.metallicRoughnessTexture = rnTexture;\n                material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].MetallicRoughnessTexture, rnTexture);\n            }\n            var alphaMode = materialJson.alphaMode;\n            if (alphaMode != null) {\n                material.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_22__[\"AlphaMode\"].fromString(alphaMode);\n            }\n        }\n        else {\n            material = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_23__[\"default\"].createClassicUberMaterial();\n            var param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].Phong.index;\n            if (materialJson.extras && materialJson.extras.technique) {\n                switch (materialJson.extras.technique) {\n                    case _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].Constant.str:\n                        param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].Constant.index;\n                        break;\n                    case _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].Lambert.str:\n                        param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].Lambert.index;\n                        break;\n                    case _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].BlinnPhong.str:\n                        param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].BlinnPhong.index;\n                        break;\n                    case _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].Phong.str:\n                        param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].Phong.index;\n                        break;\n                }\n                material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].ShadingModel, param);\n            }\n        }\n        var diffuseColorTexture = materialJson.diffuseColorTexture;\n        if (diffuseColorTexture != null) {\n            var texture = diffuseColorTexture.texture;\n            var image = texture.image.image;\n            var rnTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_16__[\"default\"]();\n            rnTexture.generateTextureFromImage(image);\n            rnTexture.name = image.name;\n            // material.emissiveTexture = rnTexture;\n            material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].DiffuseColorTexture, rnTexture);\n        }\n        var emissiveTexture = materialJson.emissiveTexture;\n        if (emissiveTexture != null) {\n            var texture = emissiveTexture.texture;\n            var image = texture.image.image;\n            var rnTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_16__[\"default\"]();\n            rnTexture.generateTextureFromImage(image);\n            rnTexture.name = image.name;\n            // material.emissiveTexture = rnTexture;\n            material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].EmissiveTexture, rnTexture);\n        }\n        var diffuseColorFactor = materialJson.diffuseColorFactor;\n        if (diffuseColorFactor != null) {\n            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].DiffuseColorFactor, new _math_Vector4__WEBPACK_IMPORTED_MODULE_17__[\"default\"](diffuseColorFactor));\n        }\n        return material;\n    };\n    ModelConverter.prototype._adjustByteAlign = function (typedArrayClass, arrayBuffer, alignSize, byteOffset, length) {\n        if ((byteOffset % alignSize) != 0) {\n            return new typedArrayClass(arrayBuffer.slice(byteOffset), 0, length);\n        }\n        else {\n            return new typedArrayClass(arrayBuffer, byteOffset, length);\n        }\n    };\n    ModelConverter.prototype._checkBytesPerComponent = function (accessor) {\n        var bytesPerComponent = 0;\n        switch (accessor.componentType) {\n            case 5120: // gl.BYTE\n                bytesPerComponent = 1;\n                break;\n            case 5121: // gl.UNSIGNED_BYTE\n                bytesPerComponent = 1;\n                break;\n            case 5122: // gl.SHORT\n                bytesPerComponent = 2;\n                break;\n            case 5123: // gl.UNSIGNED_SHORT\n                bytesPerComponent = 2;\n                break;\n            case 5124: // gl.INT\n                bytesPerComponent = 4;\n                break;\n            case 5125: // gl.UNSIGNED_INT\n                bytesPerComponent = 4;\n                break;\n            case 5126: // gl.FLOAT\n                bytesPerComponent = 4;\n                break;\n            default:\n                break;\n        }\n        return bytesPerComponent;\n    };\n    ModelConverter.prototype._checkComponentNumber = function (accessor) {\n        var componentN = 0;\n        switch (accessor.type) {\n            case 'SCALAR':\n                componentN = 1;\n                break;\n            case 'VEC2':\n                componentN = 2;\n                break;\n            case 'VEC3':\n                componentN = 3;\n                break;\n            case 'VEC4':\n                componentN = 4;\n                break;\n            case 'MAT4':\n                componentN = 16;\n                break;\n        }\n        return componentN;\n    };\n    ModelConverter.prototype._checkDataViewMethod = function (accessor) {\n        var dataViewMethod = '';\n        switch (accessor.componentType) {\n            case 5120: // gl.BYTE\n                dataViewMethod = 'getInt8';\n                break;\n            case 5121: // gl.UNSIGNED_BYTE\n                dataViewMethod = 'getUint8';\n                break;\n            case 5122: // gl.SHORT\n                dataViewMethod = 'getInt16';\n                break;\n            case 5123: // gl.UNSIGNED_SHORT\n                dataViewMethod = 'getUint16';\n                break;\n            case 5124: // gl.INT\n                dataViewMethod = 'getInt32';\n                break;\n            case 5125: // gl.UNSIGNED_INT\n                dataViewMethod = 'getUint32';\n                break;\n            case 5126: // gl.FLOAT\n                dataViewMethod = 'getFloat32';\n                break;\n            default:\n                break;\n        }\n        return dataViewMethod;\n    };\n    ModelConverter._isSystemLittleEndian = function () {\n        return !!(new Uint8Array((new Uint16Array([0x00ff])).buffer))[0];\n    };\n    ModelConverter.prototype._accessBinaryWithAccessor = function (accessor) {\n        var bufferView = accessor.bufferView;\n        var byteOffset = bufferView.byteOffset + (accessor.byteOffset !== void 0 ? accessor.byteOffset : 0);\n        var buffer = bufferView.buffer;\n        var arrayBuffer = buffer.buffer;\n        var componentN = this._checkComponentNumber(accessor);\n        var componentBytes = this._checkBytesPerComponent(accessor);\n        var dataViewMethod = this._checkDataViewMethod(accessor);\n        if (accessor.extras === void 0) {\n            accessor.extras = {};\n        }\n        accessor.extras.componentN = componentN;\n        accessor.extras.componentBytes = componentBytes;\n        accessor.extras.dataViewMethod = dataViewMethod;\n        var byteLength = componentBytes * componentN * accessor.count;\n        var typedDataArray = [];\n        if (accessor.extras && accessor.extras.toGetAsTypedArray) {\n            if (ModelConverter._isSystemLittleEndian()) {\n                if (dataViewMethod === 'getFloat32') {\n                    typedDataArray = this._adjustByteAlign(Float32Array, arrayBuffer, 4, byteOffset, byteLength / componentBytes);\n                }\n                else if (dataViewMethod === 'getInt8') {\n                    typedDataArray = new Int8Array(arrayBuffer, byteOffset, byteLength / componentBytes);\n                }\n                else if (dataViewMethod === 'getUint8') {\n                    typedDataArray = new Uint8Array(arrayBuffer, byteOffset, byteLength / componentBytes);\n                }\n                else if (dataViewMethod === 'getInt16') {\n                    typedDataArray = this._adjustByteAlign(Int16Array, arrayBuffer, 2, byteOffset, byteLength / componentBytes);\n                }\n                else if (dataViewMethod === 'getUint16') {\n                    typedDataArray = this._adjustByteAlign(Uint16Array, arrayBuffer, 2, byteOffset, byteLength / componentBytes);\n                }\n                else if (dataViewMethod === 'getInt32') {\n                    typedDataArray = this._adjustByteAlign(Int32Array, arrayBuffer, 4, byteOffset, byteLength / componentBytes);\n                }\n                else if (dataViewMethod === 'getUint32') {\n                    typedDataArray = this._adjustByteAlign(Uint32Array, arrayBuffer, 4, byteOffset, byteLength / componentBytes);\n                }\n            }\n            else {\n                var dataView = new DataView(arrayBuffer, byteOffset, byteLength);\n                var byteDelta = componentBytes * componentN;\n                var littleEndian = true;\n                for (var pos = 0; pos < byteLength; pos += byteDelta) {\n                    switch (accessor.type) {\n                        case 'SCALAR':\n                            typedDataArray.push(dataView[dataViewMethod](pos, littleEndian));\n                            break;\n                        case 'VEC2':\n                            typedDataArray.push(dataView[dataViewMethod](pos, littleEndian));\n                            typedDataArray.push(dataView[dataViewMethod](pos + componentBytes, littleEndian));\n                            break;\n                        case 'VEC3':\n                            typedDataArray.push(dataView[dataViewMethod](pos, littleEndian));\n                            typedDataArray.push(dataView[dataViewMethod](pos + componentBytes, littleEndian));\n                            typedDataArray.push(dataView[dataViewMethod](pos + componentBytes * 2, littleEndian));\n                            break;\n                        case 'VEC4':\n                            typedDataArray.push(dataView[dataViewMethod](pos, littleEndian));\n                            typedDataArray.push(dataView[dataViewMethod](pos + componentBytes, littleEndian));\n                            typedDataArray.push(dataView[dataViewMethod](pos + componentBytes * 2, littleEndian));\n                            typedDataArray.push(dataView[dataViewMethod](pos + componentBytes * 3, littleEndian));\n                            break;\n                    }\n                }\n                if (dataViewMethod === 'getInt8') {\n                    typedDataArray = new Int8Array(typedDataArray);\n                }\n                else if (dataViewMethod === 'getUint8') {\n                    typedDataArray = new Uint8Array(typedDataArray);\n                }\n                else if (dataViewMethod === 'getInt16') {\n                    typedDataArray = new Int16Array(typedDataArray);\n                }\n                else if (dataViewMethod === 'getUint16') {\n                    typedDataArray = new Uint16Array(typedDataArray);\n                }\n                else if (dataViewMethod === 'getInt32') {\n                    typedDataArray = new Int32Array(typedDataArray);\n                }\n                else if (dataViewMethod === 'getUint32') {\n                    typedDataArray = new Uint32Array(typedDataArray);\n                }\n                else if (dataViewMethod === 'getFloat32') {\n                    typedDataArray = new Float32Array(typedDataArray);\n                }\n            }\n        }\n        else {\n            var dataView = new DataView(arrayBuffer, byteOffset, byteLength);\n            var byteDelta = componentBytes * componentN;\n            if (accessor.extras && accessor.extras.weightCount) {\n                byteDelta = componentBytes * componentN * accessor.extras.weightCount;\n            }\n            var littleEndian = true;\n            for (var pos = 0; pos < byteLength; pos += byteDelta) {\n                switch (accessor.type) {\n                    case 'SCALAR':\n                        if (accessor.extras && accessor.extras.weightCount) {\n                            var array = [];\n                            for (var i = 0; i < accessor.extras.weightCount; i++) {\n                                array.push(dataView[dataViewMethod](pos + componentBytes * i, littleEndian));\n                            }\n                            typedDataArray.push(array);\n                        }\n                        else {\n                            typedDataArray.push(dataView[dataViewMethod](pos, littleEndian));\n                        }\n                        break;\n                    case 'VEC2':\n                        typedDataArray.push(new _math_Vector2__WEBPACK_IMPORTED_MODULE_25__[\"default\"](dataView[dataViewMethod](pos, littleEndian), dataView[dataViewMethod](pos + componentBytes, littleEndian)));\n                        break;\n                    case 'VEC3':\n                        typedDataArray.push(new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](dataView[dataViewMethod](pos, littleEndian), dataView[dataViewMethod](pos + componentBytes, littleEndian), dataView[dataViewMethod](pos + componentBytes * 2, littleEndian)));\n                        break;\n                    case 'VEC4':\n                        if (accessor.extras && accessor.extras.quaternionIfVec4) {\n                            typedDataArray.push(new _math_Quaternion__WEBPACK_IMPORTED_MODULE_5__[\"default\"](dataView[dataViewMethod](pos, littleEndian), dataView[dataViewMethod](pos + componentBytes, littleEndian), dataView[dataViewMethod](pos + componentBytes * 2, littleEndian), dataView[dataViewMethod](pos + componentBytes * 3, littleEndian)));\n                        }\n                        else {\n                            typedDataArray.push(new _math_Vector4__WEBPACK_IMPORTED_MODULE_17__[\"default\"](dataView[dataViewMethod](pos, littleEndian), dataView[dataViewMethod](pos + componentBytes, littleEndian), dataView[dataViewMethod](pos + componentBytes * 2, littleEndian), dataView[dataViewMethod](pos + componentBytes * 3, littleEndian)));\n                        }\n                        break;\n                    case 'MAT4':\n                        var matrixComponents = [];\n                        for (var i = 0; i < 16; i++) {\n                            matrixComponents[i] = dataView[dataViewMethod](pos + componentBytes * i, littleEndian);\n                        }\n                        typedDataArray.push(new _math_Matrix44__WEBPACK_IMPORTED_MODULE_6__[\"default\"](matrixComponents, true));\n                        break;\n                }\n            }\n        }\n        accessor.extras.typedDataArray = typedDataArray;\n        return typedDataArray;\n    };\n    ModelConverter.prototype.__addOffsetToIndices = function (meshComponent) {\n        var primitiveNumber = meshComponent.getPrimitiveNumber();\n        var offsetSum = 0;\n        for (var i = 0; i < primitiveNumber; i++) {\n            var primitive = meshComponent.getPrimitiveAt(i);\n            var indicesAccessor = primitive.indicesAccessor;\n            if (indicesAccessor) {\n                var elementNumber = indicesAccessor.elementCount;\n                for (var j = 0; j < elementNumber; j++) {\n                    var index = indicesAccessor.getScalar(j, {});\n                    indicesAccessor.setScalar(j, index + offsetSum, {});\n                }\n                offsetSum += elementNumber;\n            }\n        }\n    };\n    ModelConverter.prototype.__getRnAccessor = function (accessor, rnBuffer) {\n        var bufferView = accessor.bufferView;\n        var rnBufferView = rnBuffer.takeBufferViewWithByteOffset({\n            byteLengthToNeed: bufferView.byteLength,\n            byteStride: (bufferView.byteStride != null) ? bufferView.byteStride : 0,\n            byteOffset: (bufferView.byteOffset != null) ? bufferView.byteOffset : 0,\n            isAoS: false\n        });\n        var rnAccessor;\n        if (accessor.byteStride != null) {\n            rnAccessor = rnBufferView.takeFlexibleAccessorWithByteOffset({\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].fromString(accessor.type),\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_12__[\"ComponentType\"].from(accessor.componentType),\n                count: accessor.count,\n                byteStride: accessor.byteStride,\n                byteOffset: (accessor.byteOffset != null) ? accessor.byteOffset : 0,\n                max: accessor.max,\n                min: accessor.min\n            });\n        }\n        else {\n            rnAccessor = rnBufferView.takeAccessorWithByteOffset({\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].fromString(accessor.type),\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_12__[\"ComponentType\"].from(accessor.componentType),\n                count: accessor.count,\n                byteOffset: (accessor.byteOffset != null) ? accessor.byteOffset : 0,\n                max: accessor.max,\n                min: accessor.min\n            });\n        }\n        return rnAccessor;\n    };\n    ModelConverter.prototype.__createRnAccessor = function (accessor, numOfAttributes, compositionNum, rnBuffer) {\n        var rnBufferView = rnBuffer.takeBufferView({\n            byteLengthToNeed: numOfAttributes * compositionNum * 4,\n            byteStride: 0,\n            isAoS: false\n        });\n        var rnAccessor;\n        if (accessor.byteStride != null) {\n            rnAccessor = rnBufferView.takeFlexibleAccessorWithByteOffset({\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].fromString(accessor.type),\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_12__[\"ComponentType\"].from(accessor.componentType),\n                count: numOfAttributes,\n                byteStride: accessor.byteStride,\n                byteOffset: (accessor.byteOffset != null) ? accessor.byteOffset : 0,\n                max: accessor.max,\n                min: accessor.min\n            });\n        }\n        else {\n            rnAccessor = rnBufferView.takeAccessorWithByteOffset({\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].fromString(accessor.type),\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_12__[\"ComponentType\"].from(accessor.componentType),\n                count: numOfAttributes,\n                byteOffset: (accessor.byteOffset != null) ? accessor.byteOffset : 0,\n                max: accessor.max,\n                min: accessor.min\n            });\n        }\n        return rnAccessor;\n    };\n    ModelConverter.prototype.__getRnBufferView = function (bufferView, rnBuffer) {\n        var rnBufferView = rnBuffer.takeBufferViewWithByteOffset({\n            byteLengthToNeed: bufferView.byteLength,\n            byteStride: (bufferView.byteStride != null) ? bufferView.byteStride : 0,\n            byteOffset: (bufferView.byteOffset != null) ? bufferView.byteOffset : 0,\n            isAoS: false\n        });\n        return rnBufferView;\n    };\n    ModelConverter.prototype.__getGeometryFromDracoBuffer = function (draco, decoder, arrayBuffer) {\n        var buffer = new draco.DecoderBuffer();\n        buffer.Init(new Int8Array(arrayBuffer), arrayBuffer.byteLength);\n        var geometryType = decoder.GetEncodedGeometryType(buffer);\n        var dracoGeometry;\n        var decodingStatus;\n        if (geometryType === draco.TRIANGULAR_MESH) {\n            dracoGeometry = new draco.Mesh();\n            decodingStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);\n        }\n        else if (geometryType == draco.POINT_CLOUD) {\n            dracoGeometry = new draco.PointCloud();\n            decodingStatus = decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n        }\n        else {\n            var errorMsg = 'Unknown geometry type.';\n            console.error(errorMsg);\n        }\n        dracoGeometry.geometryType = geometryType; // store\n        if (!decodingStatus.ok() || dracoGeometry.ptr == 0) {\n            var errorMsg = 'Decoding failed: ';\n            errorMsg += decodingStatus.error_msg();\n            console.error(errorMsg);\n            draco.destroy(decoder);\n            draco.destroy(dracoGeometry);\n            return void 0;\n        }\n        draco.destroy(buffer);\n        return dracoGeometry;\n    };\n    ModelConverter.prototype.__getIndicesFromDraco = function (draco, decoder, dracoGeometry, triangleStripDrawMode) {\n        // For mesh, we need to generate the faces.\n        var geometryType = dracoGeometry.geometryType;\n        if (geometryType !== draco.TRIANGULAR_MESH) {\n            return void 0;\n        }\n        var indices;\n        if (triangleStripDrawMode) {\n            var stripsArray = new draco.DracoInt32Array();\n            decoder.GetTriangleStripsFromMesh(dracoGeometry, stripsArray);\n            indices = new Uint32Array(stripsArray.size());\n            for (var i = 0; i < stripsArray.size(); ++i) {\n                indices[i] = stripsArray.GetValue(i);\n            }\n            draco.destroy(stripsArray);\n        }\n        else { // TRIANGLES\n            var numFaces = dracoGeometry.num_faces();\n            var numIndices = numFaces * 3;\n            indices = new Uint32Array(numIndices);\n            var ia = new draco.DracoInt32Array();\n            for (var i_1 = 0; i_1 < numFaces; ++i_1) {\n                decoder.GetFaceFromMesh(dracoGeometry, i_1, ia);\n                var index = i_1 * 3;\n                indices[index] = ia.GetValue(0);\n                indices[index + 1] = ia.GetValue(1);\n                indices[index + 2] = ia.GetValue(2);\n            }\n            draco.destroy(ia);\n        }\n        return indices;\n    };\n    ModelConverter.prototype.__decodeDraco = function (primitive, rnBuffer, gltfModel, map) {\n        var bufferView = gltfModel.bufferViews[primitive.extensions.KHR_draco_mesh_compression.bufferView];\n        var rnBufferView = this.__getRnBufferView(bufferView, rnBuffer);\n        var arraybufferOfBufferView = new Uint8Array(rnBufferView.getUint8Array()).buffer;\n        var draco = new DracoDecoderModule();\n        var decoder = new draco.Decoder();\n        var dracoGeometry = this.__getGeometryFromDracoBuffer(draco, decoder, arraybufferOfBufferView);\n        if (dracoGeometry == null) {\n            draco.destroy(dracoGeometry);\n            draco.destroy(decoder);\n            return void 0;\n        }\n        var numPoints = dracoGeometry.num_points();\n        var posAttId = decoder.GetAttributeId(dracoGeometry, draco.POSITION);\n        if (posAttId == -1) {\n            var errorMsg = 'Position attribute not found in draco.';\n            console.error(errorMsg);\n            draco.destroy(dracoGeometry);\n            draco.destroy(decoder);\n            return void 0;\n        }\n        var lengthOfRnBufferForDraco = 0;\n        if (primitive.indices) {\n            var count = primitive.indices.count;\n            lengthOfRnBufferForDraco += count * 4;\n        }\n        for (var attributeName in primitive.attributes) {\n            var accessor = primitive.attributes[attributeName];\n            var compositionNum = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].fromString(accessor.type).getNumberOfComponents();\n            var attributeByteLength = numPoints * compositionNum * 4;\n            lengthOfRnBufferForDraco += attributeByteLength;\n        }\n        var rnDracoBuffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n            byteLength: lengthOfRnBufferForDraco,\n            arrayBuffer: new ArrayBuffer(lengthOfRnBufferForDraco),\n            name: 'Draco'\n        });\n        var primitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_10__[\"PrimitiveMode\"].from(primitive.mode);\n        var isTriangleStrip = false;\n        if (primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_10__[\"PrimitiveMode\"].TriangleStrip) {\n            isTriangleStrip = true;\n        }\n        var indices = this.__getIndicesFromDraco(draco, decoder, dracoGeometry, isTriangleStrip);\n        var indicesDracoAccessor = this.__createRnAccessor(primitive.indices, indices.length, 1, rnDracoBuffer);\n        for (var i = 0; i < indices.length; i++) {\n            indicesDracoAccessor.setScalar(i, indices[i], {});\n        }\n        for (var attributeName in primitive.attributes) {\n            var attributeAccessor = primitive.attributes[attributeName];\n            var compositionNum = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].fromString(attributeAccessor.type).getNumberOfComponents();\n            var attributeRnDracoAccessor = this.__createRnAccessor(attributeAccessor, numPoints, compositionNum, rnDracoBuffer);\n            var dracoAttributeName = attributeName;\n            if (attributeName === 'TEXCOORD_0') {\n                dracoAttributeName = 'TEX_COORD';\n            }\n            var attId = decoder.GetAttributeId(dracoGeometry, draco[dracoAttributeName]);\n            if (attId === -1) {\n                var errorMsg = attributeName + 'attribute not found in draco.';\n                console.error(errorMsg);\n                continue;\n            }\n            var attribute = decoder.GetAttribute(dracoGeometry, attId);\n            var attributeData = new draco.DracoFloat32Array();\n            decoder.GetAttributeFloatForAllPoints(dracoGeometry, attribute, attributeData);\n            for (var i = 0; i < numPoints; i++) {\n                if (compositionNum === 1) {\n                    attributeRnDracoAccessor.setScalar(i, attributeData.GetValue(i * compositionNum), {});\n                }\n                else if (compositionNum === 2) {\n                    attributeRnDracoAccessor.setVec2(i, attributeData.GetValue(i * compositionNum), attributeData.GetValue(i * compositionNum + 1), {});\n                }\n                else if (compositionNum === 3) {\n                    attributeRnDracoAccessor.setVec3(i, attributeData.GetValue(i * compositionNum), attributeData.GetValue(i * compositionNum + 1), attributeData.GetValue(i * compositionNum + 2), {});\n                }\n                else if (compositionNum === 4) {\n                    attributeRnDracoAccessor.setVec4(i, attributeData.GetValue(i * compositionNum), attributeData.GetValue(i * compositionNum + 1), attributeData.GetValue(i * compositionNum + 2), attributeData.GetValue(i * compositionNum + 3), {});\n                }\n            }\n            draco.destroy(attributeData);\n            map.set(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_13__[\"VertexAttribute\"].fromString(attributeAccessor.extras.attributeName), attributeRnDracoAccessor);\n        }\n        draco.destroy(dracoGeometry);\n        draco.destroy(decoder);\n        return indicesDracoAccessor;\n    };\n    return ModelConverter;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (ModelConverter);\n\n\n//# sourceURL=webpack:///./src/foundation/importer/ModelConverter.ts?");

/***/ }),

/***/ "./src/foundation/main.ts":
/*!********************************!*\
  !*** ./src/foundation/main.ts ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core/EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _components_TransformComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/TransformComponent */ \"./src/foundation/components/TransformComponent.ts\");\n/* harmony import */ var _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _components_MeshComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/MeshRendererComponent */ \"./src/foundation/components/MeshRendererComponent.ts\");\n/* harmony import */ var _geometry_Primitive__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometry/Primitive */ \"./src/foundation/geometry/Primitive.ts\");\n/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./definitions/PrimitiveMode */ \"./src/foundation/definitions/PrimitiveMode.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _system_System__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./system/System */ \"./src/foundation/system/System.ts\");\n/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./math/Vector2 */ \"./src/foundation/math/Vector2.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./math/MutableVector4 */ \"./src/foundation/math/MutableVector4.ts\");\n/* harmony import */ var _math_Matrix33__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./math/Matrix33 */ \"./src/foundation/math/Matrix33.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./definitions/ProcessApproach */ \"./src/foundation/definitions/ProcessApproach.ts\");\n/* harmony import */ var _importer_Gltf1Importer__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./importer/Gltf1Importer */ \"./src/foundation/importer/Gltf1Importer.ts\");\n/* harmony import */ var _importer_Gltf2Importer__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./importer/Gltf2Importer */ \"./src/foundation/importer/Gltf2Importer.ts\");\n/* harmony import */ var _importer_DrcPointCloudImporter__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./importer/DrcPointCloudImporter */ \"./src/foundation/importer/DrcPointCloudImporter.ts\");\n/* harmony import */ var _exporter_Gltf2Exporter__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./exporter/Gltf2Exporter */ \"./src/foundation/exporter/Gltf2Exporter.ts\");\n/* harmony import */ var _importer_ModelConverter__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./importer/ModelConverter */ \"./src/foundation/importer/ModelConverter.ts\");\n/* harmony import */ var _system_ModuleManager__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./system/ModuleManager */ \"./src/foundation/system/ModuleManager.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _definitions_CameraType__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./definitions/CameraType */ \"./src/foundation/definitions/CameraType.ts\");\n/* harmony import */ var _math_RowMajarMatrix44__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./math/RowMajarMatrix44 */ \"./src/foundation/math/RowMajarMatrix44.ts\");\n/* harmony import */ var _components_AnimationComponent__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./components/AnimationComponent */ \"./src/foundation/components/AnimationComponent.ts\");\n/* harmony import */ var _components_LightComponent__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./components/LightComponent */ \"./src/foundation/components/LightComponent.ts\");\n/* harmony import */ var _definitions_LightType__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./definitions/LightType */ \"./src/foundation/definitions/LightType.ts\");\n/* harmony import */ var _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./definitions/AlphaMode */ \"./src/foundation/definitions/AlphaMode.ts\");\n/* harmony import */ var _textures_CubeTexture__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./textures/CubeTexture */ \"./src/foundation/textures/CubeTexture.ts\");\n/* harmony import */ var _components_CameraControllerComponent__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./components/CameraControllerComponent */ \"./src/foundation/components/CameraControllerComponent.ts\");\n/* harmony import */ var _importer_FormatDetector__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./importer/FormatDetector */ \"./src/foundation/importer/FormatDetector.ts\");\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _geometry_Plane__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./geometry/Plane */ \"./src/foundation/geometry/Plane.ts\");\n/* harmony import */ var _geometry_Sphere__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./geometry/Sphere */ \"./src/foundation/geometry/Sphere.ts\");\n/* harmony import */ var _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./helpers/MaterialHelper */ \"./src/foundation/helpers/MaterialHelper.ts\");\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./renderer/RenderPass */ \"./src/foundation/renderer/RenderPass.ts\");\n/* harmony import */ var _renderer_FrameBuffer__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./renderer/FrameBuffer */ \"./src/foundation/renderer/FrameBuffer.ts\");\n/* harmony import */ var _renderer_Expression__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./renderer/Expression */ \"./src/foundation/renderer/Expression.ts\");\n/* harmony import */ var _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./definitions/HdriFormat */ \"./src/foundation/definitions/HdriFormat.ts\");\n/* harmony import */ var _textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./textures/RenderTargetTexture */ \"./src/foundation/textures/RenderTargetTexture.ts\");\n/* harmony import */ var _textures_RenderBuffer__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./textures/RenderBuffer */ \"./src/foundation/textures/RenderBuffer.ts\");\n/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./definitions/TextureParameter */ \"./src/foundation/definitions/TextureParameter.ts\");\n/* harmony import */ var _helpers_RenderableHelper__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./helpers/RenderableHelper */ \"./src/foundation/helpers/RenderableHelper.ts\");\n/* harmony import */ var _textures_Texture__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./textures/Texture */ \"./src/foundation/textures/Texture.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Rn = {\n    EntityRepository: _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n    ComponentRepository: _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n    TransformComponent: _components_TransformComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n    SceneGraphComponent: _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n    MeshComponent: _components_MeshComponent__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n    MeshRendererComponent: _components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n    Primitive: _geometry_Primitive__WEBPACK_IMPORTED_MODULE_6__[\"default\"],\n    CompositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_9__[\"CompositionType\"],\n    ComponentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_10__[\"ComponentType\"],\n    VertexAttribute: _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_8__[\"VertexAttribute\"],\n    PrimitiveMode: _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_7__[\"PrimitiveMode\"],\n    System: _system_System__WEBPACK_IMPORTED_MODULE_11__[\"default\"],\n    Vector2: _math_Vector2__WEBPACK_IMPORTED_MODULE_12__[\"default\"],\n    Vector3: _math_Vector3__WEBPACK_IMPORTED_MODULE_13__[\"default\"],\n    Vector4: _math_Vector4__WEBPACK_IMPORTED_MODULE_14__[\"default\"],\n    MutableVector3: _math_MutableVector3__WEBPACK_IMPORTED_MODULE_15__[\"default\"],\n    MutableVector4: _math_MutableVector4__WEBPACK_IMPORTED_MODULE_16__[\"default\"],\n    Matrix33: _math_Matrix33__WEBPACK_IMPORTED_MODULE_17__[\"default\"],\n    Matrix44: _math_Matrix44__WEBPACK_IMPORTED_MODULE_18__[\"default\"],\n    MutableMatrix44: _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_19__[\"default\"],\n    ProcessApproach: _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_20__[\"ProcessApproach\"],\n    Gltf1Importer: _importer_Gltf1Importer__WEBPACK_IMPORTED_MODULE_21__[\"default\"],\n    Gltf2Importer: _importer_Gltf2Importer__WEBPACK_IMPORTED_MODULE_22__[\"default\"],\n    DrcPointCloudImporter: _importer_DrcPointCloudImporter__WEBPACK_IMPORTED_MODULE_23__[\"default\"],\n    ModelConverter: _importer_ModelConverter__WEBPACK_IMPORTED_MODULE_25__[\"default\"],\n    ModuleManager: _system_ModuleManager__WEBPACK_IMPORTED_MODULE_26__[\"default\"],\n    MemoryManager: _core_MemoryManager__WEBPACK_IMPORTED_MODULE_27__[\"default\"],\n    CameraComponent: _components_CameraComponent__WEBPACK_IMPORTED_MODULE_28__[\"default\"],\n    CameraType: _definitions_CameraType__WEBPACK_IMPORTED_MODULE_29__[\"CameraType\"],\n    RowMajarMatrix44: _math_RowMajarMatrix44__WEBPACK_IMPORTED_MODULE_30__[\"default\"],\n    AnimationComponent: _components_AnimationComponent__WEBPACK_IMPORTED_MODULE_31__[\"default\"],\n    LightComponent: _components_LightComponent__WEBPACK_IMPORTED_MODULE_32__[\"default\"],\n    LightType: _definitions_LightType__WEBPACK_IMPORTED_MODULE_33__[\"LightType\"],\n    CubeTexture: _textures_CubeTexture__WEBPACK_IMPORTED_MODULE_35__[\"default\"],\n    CameraControllerComponent: _components_CameraControllerComponent__WEBPACK_IMPORTED_MODULE_36__[\"default\"],\n    AlphaMode: _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_34__[\"AlphaMode\"],\n    Gltf2Exporter: _exporter_Gltf2Exporter__WEBPACK_IMPORTED_MODULE_24__[\"default\"],\n    detectFormat: _importer_FormatDetector__WEBPACK_IMPORTED_MODULE_37__[\"default\"],\n    Config: _core_Config__WEBPACK_IMPORTED_MODULE_38__[\"default\"],\n    Plane: _geometry_Plane__WEBPACK_IMPORTED_MODULE_39__[\"default\"],\n    Sphere: _geometry_Sphere__WEBPACK_IMPORTED_MODULE_40__[\"default\"],\n    MaterialHelper: _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_41__[\"default\"],\n    ShaderSemantics: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_42__[\"ShaderSemantics\"],\n    RenderPass: _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_43__[\"default\"],\n    FrameBuffer: _renderer_FrameBuffer__WEBPACK_IMPORTED_MODULE_44__[\"default\"],\n    Expression: _renderer_Expression__WEBPACK_IMPORTED_MODULE_45__[\"default\"],\n    HdriFormat: _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_46__[\"HdriFormat\"],\n    RenderTargetTexture: _textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_47__[\"default\"],\n    RenderBuffer: _textures_RenderBuffer__WEBPACK_IMPORTED_MODULE_48__[\"default\"],\n    TextureParameter: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_49__[\"TextureParameter\"],\n    RenderableHelper: _helpers_RenderableHelper__WEBPACK_IMPORTED_MODULE_50__[\"default\"],\n    Texture: _textures_Texture__WEBPACK_IMPORTED_MODULE_51__[\"default\"],\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Rn);\nwindow['Rn'] = Rn;\n\n\n//# sourceURL=webpack:///./src/foundation/main.ts?");

/***/ }),

/***/ "./src/foundation/materials/AbstractMaterialNode.ts":
/*!**********************************************************!*\
  !*** ./src/foundation/materials/AbstractMaterialNode.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (undefined && undefined.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\n\nvar AbstractMaterialNode = /** @class */ (function (_super) {\n    __extends(AbstractMaterialNode, _super);\n    function AbstractMaterialNode(shader, shaderFunctionName) {\n        var _this = _super.call(this) || this;\n        _this.__semantics = [];\n        _this.__shaderNode = [];\n        _this.__vertexInputs = [];\n        _this.__pixelInputs = [];\n        _this.__vertexOutputs = [];\n        _this.__pixelOutputs = [];\n        _this.__vertexInputConnections = [];\n        _this.__pixelInputConnections = [];\n        _this.isSingleOperation = false;\n        _this.shader = shader;\n        _this.shaderFunctionName = shaderFunctionName;\n        _this.__materialNodeUid = ++AbstractMaterialNode.__invalidMaterialNodeCount;\n        AbstractMaterialNode.materialNodes[AbstractMaterialNode.__invalidMaterialNodeCount] = _this;\n        return _this;\n    }\n    AbstractMaterialNode.getMaterialNode = function (materialNodeUid) {\n        return AbstractMaterialNode.materialNodes[materialNodeUid];\n    };\n    Object.defineProperty(AbstractMaterialNode.prototype, \"materialNodeUid\", {\n        get: function () {\n            return this.__materialNodeUid;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractMaterialNode.prototype, \"_semanticsInfoArray\", {\n        get: function () {\n            return this.__semantics;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AbstractMaterialNode.prototype.setShaderSemanticsInfoArray = function (shaderSemanticsInfoArray) {\n        this.__semantics = shaderSemanticsInfoArray;\n    };\n    AbstractMaterialNode.prototype.addVertexInputConnection = function (materialNode, outputNameOfPrev, inputNameOfThis) {\n        this.__vertexInputConnections.push({ materialNodeUid: materialNode.materialNodeUid, outputNameOfPrev: outputNameOfPrev, inputNameOfThis: inputNameOfThis });\n    };\n    AbstractMaterialNode.prototype.addPixelInputConnection = function (materialNode, outputNameOfPrev, inputNameOfThis) {\n        this.__pixelInputConnections.push({ materialNodeUid: materialNode.materialNodeUid, outputNameOfPrev: outputNameOfPrev, inputNameOfThis: inputNameOfThis });\n    };\n    Object.defineProperty(AbstractMaterialNode.prototype, \"vertexInputConnections\", {\n        get: function () {\n            return this.__vertexInputConnections;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractMaterialNode.prototype, \"pixelInputConnections\", {\n        get: function () {\n            return this.__pixelInputConnections;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AbstractMaterialNode.prototype.getVertexInput = function (name) {\n        var e_1, _a;\n        try {\n            for (var _b = __values(this.__vertexInputs), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var input = _c.value;\n                if (input.name === name) {\n                    return input;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return void 0;\n    };\n    AbstractMaterialNode.prototype.getVertexOutput = function (name) {\n        var e_2, _a;\n        try {\n            for (var _b = __values(this.__vertexOutputs), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var output = _c.value;\n                if (output.name === name) {\n                    return output;\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return void 0;\n    };\n    AbstractMaterialNode.prototype.getPixelInput = function (name) {\n        var e_3, _a;\n        try {\n            for (var _b = __values(this.__pixelInputs), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var input = _c.value;\n                if (input.name === name) {\n                    return input;\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return void 0;\n    };\n    AbstractMaterialNode.prototype.getPixelOutput = function (name) {\n        var e_4, _a;\n        try {\n            for (var _b = __values(this.__pixelOutputs), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var output = _c.value;\n                if (output.name === name) {\n                    return output;\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        return void 0;\n    };\n    AbstractMaterialNode.__invalidMaterialNodeUid = -1;\n    AbstractMaterialNode.__invalidMaterialNodeCount = -1;\n    AbstractMaterialNode.materialNodes = [];\n    return AbstractMaterialNode;\n}(_core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (AbstractMaterialNode);\n\n\n//# sourceURL=webpack:///./src/foundation/materials/AbstractMaterialNode.ts?");

/***/ }),

/***/ "./src/foundation/materials/ClassicShadingSingleMaterialNode.ts":
/*!**********************************************************************!*\
  !*** ./src/foundation/materials/ClassicShadingSingleMaterialNode.ts ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Vector2 */ \"./src/foundation/math/Vector2.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../webgl/WebGLResourceRepository */ \"./src/webgl/WebGLResourceRepository.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _webgl_shaders_ClassicShader__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../webgl/shaders/ClassicShader */ \"./src/webgl/shaders/ClassicShader.ts\");\n/* harmony import */ var _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../definitions/ShadingModel */ \"./src/foundation/definitions/ShadingModel.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\nvar ClassicShadingSingleMaterialNode = /** @class */ (function (_super) {\n    __extends(ClassicShadingSingleMaterialNode, _super);\n    function ClassicShadingSingleMaterialNode() {\n        var _this = _super.call(this, _webgl_shaders_ClassicShader__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getInstance(), \"classicShading\") || this;\n        ClassicShadingSingleMaterialNode.initDefaultTextures();\n        var shaderSemanticsInfoArray = [\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].DiffuseColorFactor,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec4,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                isPlural: false,\n                prefix: \"material.\",\n                isSystem: false,\n                initialValue: new _math_Vector4__WEBPACK_IMPORTED_MODULE_7__[\"default\"](1, 1, 1, 1)\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].DiffuseColorTexture,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                isPlural: false,\n                isSystem: false,\n                initialValue: [\n                    0,\n                    ClassicShadingSingleMaterialNode.__dummyWhiteTextureUid\n                ]\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].SpecularColorFactor,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec2,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                isPlural: false,\n                prefix: \"material.\",\n                isSystem: false,\n                initialValue: new _math_Vector2__WEBPACK_IMPORTED_MODULE_3__[\"default\"](1, 1)\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].SpecularColorTexture,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                isPlural: false,\n                isSystem: false,\n                initialValue: [\n                    1,\n                    ClassicShadingSingleMaterialNode.__dummyWhiteTextureUid\n                ]\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].NormalTexture,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                isPlural: false,\n                isSystem: false,\n                initialValue: [\n                    2,\n                    ClassicShadingSingleMaterialNode.__dummyBlueTextureUid\n                ]\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].OcclusionTexture,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                isPlural: false,\n                isSystem: false,\n                initialValue: [\n                    3,\n                    ClassicShadingSingleMaterialNode.__dummyWhiteTextureUid\n                ]\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].EmissiveTexture,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                isPlural: false,\n                isSystem: false,\n                initialValue: [\n                    4,\n                    ClassicShadingSingleMaterialNode.__dummyBlackTextureUid\n                ]\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].Shininess,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                isPlural: false,\n                isSystem: false,\n                initialValue: 5\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].Wireframe,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec3,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                isPlural: false,\n                isSystem: false,\n                initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_8__[\"default\"](0, 0, 1)\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].ShadingModel,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                isPlural: false,\n                isSystem: false,\n                initialValue: _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_10__[\"ShadingModel\"].Constant.index\n            }\n        ];\n        _this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);\n        return _this;\n    }\n    ClassicShadingSingleMaterialNode.initDefaultTextures = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var webglResourceRepository;\n            return __generator(this, function (_a) {\n                if (ClassicShadingSingleMaterialNode.__dummyWhiteTextureUid !==\n                    _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid) {\n                    return [2 /*return*/];\n                }\n                webglResourceRepository = _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInstance();\n                ClassicShadingSingleMaterialNode.__dummyWhiteTextureUid = webglResourceRepository.createDummyTexture();\n                ClassicShadingSingleMaterialNode.__dummyBlueTextureUid = webglResourceRepository.createDummyTexture(\"rgba(127.5, 127.5, 255, 1)\");\n                ClassicShadingSingleMaterialNode.__dummyBlackTextureUid = webglResourceRepository.createDummyTexture(\"rgba(0, 0, 0, 1)\");\n                ClassicShadingSingleMaterialNode.__dummyBlackCubeTextureUid = webglResourceRepository.createDummyCubeTexture();\n                return [2 /*return*/];\n            });\n        });\n    };\n    ClassicShadingSingleMaterialNode.__dummyWhiteTextureUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n    ClassicShadingSingleMaterialNode.__dummyBlueTextureUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n    ClassicShadingSingleMaterialNode.__dummyBlackTextureUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n    ClassicShadingSingleMaterialNode.__dummyBlackCubeTextureUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n    return ClassicShadingSingleMaterialNode;\n}(_AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (ClassicShadingSingleMaterialNode);\n\n\n//# sourceURL=webpack:///./src/foundation/materials/ClassicShadingSingleMaterialNode.ts?");

/***/ }),

/***/ "./src/foundation/materials/EnvConstantSingleMaterial.ts":
/*!***************************************************************!*\
  !*** ./src/foundation/materials/EnvConstantSingleMaterial.ts ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../webgl/WebGLResourceRepository */ \"./src/webgl/WebGLResourceRepository.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _webgl_shaders_EnvCostantShader__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../webgl/shaders/EnvCostantShader */ \"./src/webgl/shaders/EnvCostantShader.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\nvar EnvConstantSingleMaterialNode = /** @class */ (function (_super) {\n    __extends(EnvConstantSingleMaterialNode, _super);\n    function EnvConstantSingleMaterialNode() {\n        var _this = _super.call(this, _webgl_shaders_EnvCostantShader__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getInstance(), \"envConstantShading\") || this;\n        EnvConstantSingleMaterialNode.initDefaultTextures();\n        var shaderSemanticsInfoArray = [\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].DiffuseColorFactor,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec4,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n                isPlural: false,\n                prefix: \"material.\",\n                isSystem: false,\n                initialValue: new _math_Vector4__WEBPACK_IMPORTED_MODULE_6__[\"default\"](1, 1, 1, 1)\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].ColorEnvTexture,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].TextureCube,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Int,\n                isPlural: false,\n                isSystem: false,\n                initialValue: [\n                    0,\n                    EnvConstantSingleMaterialNode.__dummyBlackCubeTextureUid\n                ]\n            },\n        ];\n        _this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);\n        return _this;\n    }\n    EnvConstantSingleMaterialNode.initDefaultTextures = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var webglResourceRepository;\n            return __generator(this, function (_a) {\n                if (EnvConstantSingleMaterialNode.__dummyWhiteTextureUid !== _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].InvalidCGAPIResourceUid) {\n                    return [2 /*return*/];\n                }\n                webglResourceRepository = _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance();\n                EnvConstantSingleMaterialNode.__dummyWhiteTextureUid = webglResourceRepository.createDummyTexture();\n                EnvConstantSingleMaterialNode.__dummyBlackTextureUid = webglResourceRepository.createDummyTexture(\"rgba(0, 0, 0, 1)\");\n                EnvConstantSingleMaterialNode.__dummyBlackCubeTextureUid = webglResourceRepository.createDummyCubeTexture();\n                return [2 /*return*/];\n            });\n        });\n    };\n    EnvConstantSingleMaterialNode.__dummyWhiteTextureUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].InvalidCGAPIResourceUid;\n    EnvConstantSingleMaterialNode.__dummyBlackTextureUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].InvalidCGAPIResourceUid;\n    EnvConstantSingleMaterialNode.__dummyBlackCubeTextureUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].InvalidCGAPIResourceUid;\n    EnvConstantSingleMaterialNode.__pbrCookTorranceBrdfLutDataUrlUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].InvalidCGAPIResourceUid;\n    return EnvConstantSingleMaterialNode;\n}(_AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (EnvConstantSingleMaterialNode);\n\n\n//# sourceURL=webpack:///./src/foundation/materials/EnvConstantSingleMaterial.ts?");

/***/ }),

/***/ "./src/foundation/materials/FXAA3QualitySingleMaterialNode.ts":
/*!********************************************************************!*\
  !*** ./src/foundation/materials/FXAA3QualitySingleMaterialNode.ts ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Vector2 */ \"./src/foundation/math/Vector2.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../webgl/WebGLResourceRepository */ \"./src/webgl/WebGLResourceRepository.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _webgl_shaders_FXAA3Quality__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../webgl/shaders/FXAA3Quality */ \"./src/webgl/shaders/FXAA3Quality.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\nvar FXAA3QualitySingleMaterialNode = /** @class */ (function (_super) {\n    __extends(FXAA3QualitySingleMaterialNode, _super);\n    function FXAA3QualitySingleMaterialNode() {\n        var _this = _super.call(this, _webgl_shaders_FXAA3Quality__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getInstance(), \"FXAA3QualityShading\") || this;\n        FXAA3QualitySingleMaterialNode.initDefaultTextures();\n        var shaderSemanticsInfoArray = [\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].BaseColorTexture,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                isPlural: false,\n                isSystem: false,\n                initialValue: [\n                    0,\n                    FXAA3QualitySingleMaterialNode.__dummyWhiteTextureUid\n                ]\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].ScreenInfo,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec2,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                isPlural: false,\n                isSystem: false,\n                initialValue: new _math_Vector2__WEBPACK_IMPORTED_MODULE_3__[\"default\"](0, 0)\n            },\n        ];\n        _this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);\n        return _this;\n    }\n    FXAA3QualitySingleMaterialNode.initDefaultTextures = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var webglResourceRepository;\n            return __generator(this, function (_a) {\n                if (FXAA3QualitySingleMaterialNode.__dummyWhiteTextureUid !== _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid) {\n                    return [2 /*return*/];\n                }\n                webglResourceRepository = _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInstance();\n                FXAA3QualitySingleMaterialNode.__dummyWhiteTextureUid = webglResourceRepository.createDummyTexture();\n                return [2 /*return*/];\n            });\n        });\n    };\n    FXAA3QualitySingleMaterialNode.__dummyWhiteTextureUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n    FXAA3QualitySingleMaterialNode.__dummyBlackTextureUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n    FXAA3QualitySingleMaterialNode.__dummyBlackCubeTextureUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n    FXAA3QualitySingleMaterialNode.__pbrCookTorranceBrdfLutDataUrlUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n    return FXAA3QualitySingleMaterialNode;\n}(_AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (FXAA3QualitySingleMaterialNode);\n\n\n//# sourceURL=webpack:///./src/foundation/materials/FXAA3QualitySingleMaterialNode.ts?");

/***/ }),

/***/ "./src/foundation/materials/Material.ts":
/*!**********************************************!*\
  !*** ./src/foundation/materials/Material.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/AlphaMode */ \"./src/foundation/definitions/AlphaMode.ts\");\n/* harmony import */ var _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../webgl/WebGLResourceRepository */ \"./src/webgl/WebGLResourceRepository.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../textures/AbstractTexture */ \"./src/foundation/textures/AbstractTexture.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (undefined && undefined.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\n\n\n\n\n\n\n\n\n\nvar Material = /** @class */ (function (_super) {\n    __extends(Material, _super);\n    function Material(materialNodes) {\n        var _this = _super.call(this) || this;\n        _this.__materialNodes = [];\n        _this.__fields = new Map();\n        _this.__fieldsInfo = new Map();\n        _this._shaderProgramUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n        _this.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__[\"AlphaMode\"].Opaque;\n        _this.__materialNodes = materialNodes;\n        _this.initialize();\n        return _this;\n    }\n    Material.prototype.setMaterialNodes = function (materialNodes) {\n        this.__materialNodes = materialNodes;\n    };\n    Material.prototype.initialize = function () {\n        var _this = this;\n        this.__materialNodes.forEach(function (materialNode) {\n            var semanticsInfoArray = materialNode._semanticsInfoArray;\n            semanticsInfoArray.forEach(function (semanticsInfo) {\n                _this.__fields.set(semanticsInfo.semantic, semanticsInfo.initialValue);\n                _this.__fieldsInfo.set(semanticsInfo.semantic, semanticsInfo);\n            });\n        });\n    };\n    Material.prototype.setParameter = function (shaderSemantic, value) {\n        this.__fields.set(shaderSemantic, value);\n    };\n    Material.prototype.setTextureParameter = function (shaderSemantic, value) {\n        var array = this.__fields.get(shaderSemantic);\n        this.__fields.set(shaderSemantic, [array[0], value]);\n    };\n    Material.prototype.getParameter = function (shaderSemantic) {\n        return this.__fields.get(shaderSemantic);\n    };\n    Material.prototype.setUniformLocations = function (shaderProgramUid) {\n        var webglResourceRepository = _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance();\n        var args = [];\n        this.__materialNodes.forEach(function (materialNode) {\n            var semanticsInfoArray = materialNode._semanticsInfoArray;\n            args = args.concat(semanticsInfoArray);\n        });\n        webglResourceRepository.setupUniformLocations(shaderProgramUid, args);\n    };\n    Material.prototype.setUniformValues = function (shaderProgramUid, force) {\n        var _this = this;\n        var webglResourceRepository = _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance();\n        var gl = webglResourceRepository.currentWebGLContextWrapper.getRawContext();\n        this.__fields.forEach(function (value, key) {\n            var info = _this.__fieldsInfo.get(key);\n            var setAsMatrix = false;\n            if (info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Mat3 || info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Mat4) {\n                setAsMatrix = true;\n            }\n            var componentType = 'f';\n            if (info.componentType === _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Int || info.componentType === _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Short || info.componentType === _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Byte) {\n                componentType = 'i';\n            }\n            var updated;\n            if (info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Texture2D || info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].TextureCube) {\n                if (value[0] != null && value[1] != null) {\n                    updated = webglResourceRepository.setUniformValue(shaderProgramUid, key, setAsMatrix, info.compositionType.getNumberOfComponents(), componentType, false, { x: value[0] }, { force: force });\n                }\n            }\n            else if (info.compositionType !== _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Scalar) {\n                updated = webglResourceRepository.setUniformValue(shaderProgramUid, key, setAsMatrix, info.compositionType.getNumberOfComponents(), componentType, true, { x: value.v }, { force: force });\n            }\n            else {\n                updated = webglResourceRepository.setUniformValue(shaderProgramUid, key, setAsMatrix, info.compositionType.getNumberOfComponents(), componentType, false, { x: value }, { force: force });\n            }\n            if (updated && value[0] != null && value[1] != null) {\n                if (info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Texture2D) {\n                    webglResourceRepository.bindTexture2D(value[0], (value[1] instanceof _textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_8__[\"default\"]) ? value[1].cgApiResourceUid : value[1]);\n                }\n                else if (info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].TextureCube) {\n                    webglResourceRepository.bindTextureCube(value[0], (value[1] instanceof _textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_8__[\"default\"]) ? value[1].cgApiResourceUid : value[1]);\n                }\n            }\n        });\n    };\n    Material.prototype.createProgramAsSingleOperation = function (vertexShaderMethodDefinitions_uniform) {\n        var webglResourceRepository = _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance();\n        var materialNode = this.__materialNodes[0];\n        var glslShader = materialNode.shader;\n        // Shader Construction\n        var vertexShader = glslShader.glslBegin +\n            (\"\\nuniform bool u_vertexAttributesExistenceArray[\" + _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_7__[\"VertexAttribute\"].AttributeTypeNumber + \"];\\n\") +\n            vertexShaderMethodDefinitions_uniform +\n            glslShader.vertexShaderDefinitions +\n            glslShader.glslMainBegin +\n            glslShader.vertexShaderBody +\n            glslShader.glslMainEnd;\n        var fragmentShader = glslShader.pixelShaderBody;\n        var shaderCharCount = (vertexShader + fragmentShader).length;\n        // Cache\n        if (Material.__shaderMap.has(shaderCharCount)) {\n            this._shaderProgramUid = Material.__shaderMap.get(shaderCharCount);\n            return this._shaderProgramUid;\n        }\n        else {\n            this._shaderProgramUid = webglResourceRepository.createShaderProgram({\n                vertexShaderStr: vertexShader,\n                fragmentShaderStr: fragmentShader,\n                attributeNames: glslShader.attributeNames,\n                attributeSemantics: glslShader.attributeSemantics\n            });\n            Material.__shaderMap.set(shaderCharCount, this._shaderProgramUid);\n            return this._shaderProgramUid;\n        }\n    };\n    Material.prototype.createProgramString = function (vertexShaderMethodDefinitions_uniform) {\n        if (vertexShaderMethodDefinitions_uniform === void 0) { vertexShaderMethodDefinitions_uniform = ''; }\n        // Find Start Node\n        var firstMaterialNodeVertex;\n        var firstMaterialNodePixel;\n        for (var i = 0; i < this.__materialNodes.length; i++) {\n            var materialNode = this.__materialNodes[i];\n            if (materialNode.vertexInputConnections.length === 0) {\n                firstMaterialNodeVertex = materialNode;\n            }\n            if (materialNode.pixelInputConnections.length === 0) {\n                firstMaterialNodePixel = materialNode;\n            }\n        }\n        // Topological Sorting\n        var ignoredInputUidsVertex = [firstMaterialNodeVertex.materialNodeUid];\n        var sortedNodeArrayVertex = [firstMaterialNodeVertex];\n        var ignoredInputUidsPixel = [firstMaterialNodePixel.materialNodeUid];\n        var sortedNodeArrayPixel = [firstMaterialNodePixel];\n        /// delete first nodes from existing array\n        var materialNodesVertex = this.__materialNodes.concat();\n        var materialNodesPixel = this.__materialNodes.concat();\n        materialNodesVertex.splice(materialNodesVertex.indexOf(firstMaterialNodeVertex), 1);\n        materialNodesPixel.splice(materialNodesPixel.indexOf(firstMaterialNodePixel), 1);\n        var _loop_1 = function () {\n            var materialNodeWhichHasNoInputs;\n            materialNodesVertex.forEach(function (materialNode) {\n                var e_1, _a;\n                var inputCount = 0;\n                try {\n                    for (var _b = __values(materialNode.vertexInputConnections), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var inputConnection = _c.value;\n                        if (ignoredInputUidsVertex.indexOf(inputConnection.materialNodeUid) === -1) {\n                            inputCount++;\n                        }\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n                if (inputCount === 0) {\n                    materialNodeWhichHasNoInputs = materialNode;\n                }\n            });\n            sortedNodeArrayVertex.push(materialNodeWhichHasNoInputs);\n            ignoredInputUidsVertex.push(materialNodeWhichHasNoInputs.materialNodeUid);\n            materialNodesVertex.splice(materialNodesVertex.indexOf(materialNodeWhichHasNoInputs), 1);\n        };\n        do {\n            _loop_1();\n        } while (materialNodesVertex.length !== 0);\n        var _loop_2 = function () {\n            var materialNodeWhichHasNoInputs;\n            materialNodesPixel.forEach(function (materialNode) {\n                var e_2, _a;\n                var inputCount = 0;\n                try {\n                    for (var _b = __values(materialNode.pixelInputConnections), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var inputConnection = _c.value;\n                        if (ignoredInputUidsPixel.indexOf(inputConnection.materialNodeUid) === -1) {\n                            inputCount++;\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n                if (inputCount === 0) {\n                    materialNodeWhichHasNoInputs = materialNode;\n                }\n            });\n            sortedNodeArrayPixel.push(materialNodeWhichHasNoInputs);\n            ignoredInputUidsPixel.push(materialNodeWhichHasNoInputs.materialNodeUid);\n            materialNodesPixel.splice(materialNodesPixel.indexOf(materialNodeWhichHasNoInputs), 1);\n        };\n        do {\n            _loop_2();\n        } while (materialNodesPixel.length !== 0);\n        // Get GLSL Beginning code\n        var vertexShader = firstMaterialNodeVertex.shader.glslBegin;\n        var pixelShader = firstMaterialNodeVertex.shader.glslBegin;\n        // attribute variables definitions in Vertex Shader\n        for (var i = 0; i < sortedNodeArrayVertex.length; i++) {\n            var materialNode = sortedNodeArrayVertex[i];\n            var attributeNames_1 = materialNode.shader.attributeNames;\n            var attributeSemantics_1 = materialNode.shader.attributeSemantics;\n            var attributeCompositions = materialNode.shader.attributeCompositions;\n            for (var j = 0; j < attributeSemantics_1.length; j++) {\n                var attributeName = attributeNames_1[j];\n                var attributeComposition = attributeCompositions[j];\n                vertexShader += attributeComposition.getGlslStr(_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float) + \" \" + attributeName + \";\\n\";\n            }\n        }\n        vertexShader += '\\n';\n        // uniform variables definitions\n        for (var i = 0; i < sortedNodeArrayVertex.length; i++) {\n            var materialNode = sortedNodeArrayVertex[i];\n            var semanticsInfoArray = materialNode._semanticsInfoArray;\n            for (var j = 0; j < semanticsInfoArray.length; j++) {\n                var semanticInfo = semanticsInfoArray[j];\n                var attributeComposition = semanticInfo.compositionType;\n                vertexShader += \"uniform \" + attributeComposition.getGlslStr(semanticInfo.componentType) + \" u_\" + semanticInfo.semantic.singularStr + \";\\n\";\n            }\n        }\n        vertexShader += '\\n';\n        for (var i = 0; i < sortedNodeArrayPixel.length; i++) {\n            var materialNode = sortedNodeArrayPixel[i];\n            var semanticsInfoArray = materialNode._semanticsInfoArray;\n            for (var j = 0; j < semanticsInfoArray.length; j++) {\n                var semanticInfo = semanticsInfoArray[j];\n                var attributeComposition = semanticInfo.compositionType;\n                pixelShader += \"uniform \" + attributeComposition.getGlslStr(semanticInfo.componentType) + \" u_\" + semanticInfo.semantic.singularStr + \";\\n\";\n            }\n        }\n        pixelShader += '\\n';\n        // remove node which don't have inputConnections (except first node)\n        var vertexMaterialNodes = [];\n        var pixelMaterialNodes = [];\n        for (var i = 0; i < sortedNodeArrayVertex.length; i++) {\n            var materialNode = sortedNodeArrayVertex[i];\n            if (i === 0 || materialNode.vertexInputConnections.length > 0) {\n                vertexMaterialNodes.push(materialNode);\n            }\n        }\n        for (var i = 0; i < sortedNodeArrayPixel.length; i++) {\n            var materialNode = sortedNodeArrayPixel[i];\n            if (i === 0 || materialNode.pixelInputConnections.length > 0) {\n                pixelMaterialNodes.push(materialNode);\n            }\n        }\n        // Add additional functions by system\n        vertexShader += \"\\nuniform bool u_vertexAttributesExistenceArray[\" + _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_7__[\"VertexAttribute\"].AttributeTypeNumber + \"];\\n\";\n        vertexShader += vertexShaderMethodDefinitions_uniform;\n        // function definitions\n        var existFunctions = [];\n        for (var i = 0; i < vertexMaterialNodes.length; i++) {\n            var materialNode = vertexMaterialNodes[i];\n            if (existFunctions.indexOf(materialNode.shaderFunctionName) !== -1) {\n                continue;\n            }\n            vertexShader += materialNode.shader.vertexShaderDefinitions;\n            pixelShader += materialNode.shader.pixelShaderDefinitions;\n            existFunctions.push(materialNode.shaderFunctionName);\n        }\n        // vertex main process\n        {\n            vertexShader += firstMaterialNodeVertex.shader.glslMainBegin;\n            var varInputNames = [];\n            var varOutputNames = [];\n            for (var i = 1; i < vertexMaterialNodes.length; i++) {\n                var materialNode = vertexMaterialNodes[i];\n                if (varInputNames[i] == null) {\n                    varInputNames[i] = [];\n                }\n                if (i - 1 >= 0) {\n                    if (varOutputNames[i - 1] == null) {\n                        varOutputNames[i - 1] = [];\n                    }\n                }\n                for (var j = 0; j < materialNode.vertexInputConnections.length; j++) {\n                    var inputConnection = materialNode.vertexInputConnections[j];\n                    var inputNode = _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_2__[\"default\"].materialNodes[inputConnection.materialNodeUid];\n                    var outputSocketOfPrev = inputNode.getVertexOutput(inputConnection.outputNameOfPrev);\n                    var inputSocketOfThis = materialNode.getVertexInput(inputConnection.inputNameOfThis);\n                    var glslTypeStr = inputSocketOfThis.compositionType.getGlslStr(inputSocketOfThis.componentType);\n                    var varName = outputSocketOfPrev.name + \"_\" + inputConnection.materialNodeUid + \"_to_\" + inputSocketOfThis.name + \"_\" + materialNode.materialNodeUid;\n                    varInputNames[i].push(varName);\n                    var rowStr = glslTypeStr + \" \" + varName + \";\\n\";\n                    vertexShader += rowStr;\n                }\n                for (var j = i; j < vertexMaterialNodes.length; j++) {\n                    var materialNodeInner = vertexMaterialNodes[j];\n                    var prevMaterialNodeInner = vertexMaterialNodes[i - 1];\n                    for (var k = 0; k < materialNodeInner.vertexInputConnections.length; k++) {\n                        var inputConnection = materialNodeInner.vertexInputConnections[k];\n                        if (prevMaterialNodeInner != null && inputConnection.materialNodeUid !== prevMaterialNodeInner.materialNodeUid) {\n                            continue;\n                        }\n                        var inputNode = _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_2__[\"default\"].materialNodes[inputConnection.materialNodeUid];\n                        var outputSocketOfPrev = inputNode.getVertexOutput(inputConnection.outputNameOfPrev);\n                        var inputSocketOfThis = materialNodeInner.getVertexInput(inputConnection.inputNameOfThis);\n                        var glslTypeStr = inputSocketOfThis.compositionType.getGlslStr(inputSocketOfThis.componentType);\n                        var varName = outputSocketOfPrev.name + \"_\" + inputConnection.materialNodeUid + \"_to_\" + inputSocketOfThis.name + \"_\" + materialNodeInner.materialNodeUid;\n                        if (i - 1 >= 0) {\n                            varOutputNames[i - 1].push(varName);\n                        }\n                    }\n                }\n            }\n            for (var i = 0; i < vertexMaterialNodes.length; i++) {\n                var materialNode = vertexMaterialNodes[i];\n                var functionName = materialNode.shaderFunctionName;\n                if (varInputNames[i] == null) {\n                    varInputNames[i] = [];\n                }\n                var varNames = varInputNames[i].concat(varOutputNames[i]);\n                var rowStr = functionName + \"(\";\n                for (var k = 0; k < varNames.length; k++) {\n                    var varName = varNames[k];\n                    if (varName == null) {\n                        continue;\n                    }\n                    if (k !== 0) {\n                        rowStr += ', ';\n                    }\n                    rowStr += varNames[k];\n                }\n                rowStr += ');\\n';\n                vertexShader += rowStr;\n            }\n            vertexShader += firstMaterialNodeVertex.shader.glslMainEnd;\n        }\n        // pixel main process\n        {\n            pixelShader += firstMaterialNodePixel.shader.glslMainBegin;\n            var varInputNames = [];\n            var varOutputNames = [];\n            for (var i = 1; i < pixelMaterialNodes.length; i++) {\n                var materialNode = pixelMaterialNodes[i];\n                if (varInputNames[i] == null) {\n                    varInputNames[i] = [];\n                }\n                if (i - 1 >= 0) {\n                    if (varOutputNames[i - 1] == null) {\n                        varOutputNames[i - 1] = [];\n                    }\n                }\n                for (var j = 0; j < materialNode.pixelInputConnections.length; j++) {\n                    var inputConnection = materialNode.pixelInputConnections[j];\n                    var inputNode = _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_2__[\"default\"].materialNodes[inputConnection.materialNodeUid];\n                    var outputSocketOfPrev = inputNode.getPixelOutput(inputConnection.outputNameOfPrev);\n                    var inputSocketOfThis = materialNode.getPixelInput(inputConnection.inputNameOfThis);\n                    var glslTypeStr = inputSocketOfThis.compositionType.getGlslStr(inputSocketOfThis.componentType);\n                    var varName = outputSocketOfPrev.name + \"_\" + inputConnection.materialNodeUid + \"_to_\" + inputSocketOfThis.name + \"_\" + materialNode.materialNodeUid;\n                    varInputNames[i].push(varName);\n                    var rowStr = glslTypeStr + \" \" + varName + \";\\n\";\n                    pixelShader += rowStr;\n                }\n                for (var j = i; j < pixelMaterialNodes.length; j++) {\n                    var materialNodeInner = pixelMaterialNodes[j];\n                    var prevMaterialNodeInner = pixelMaterialNodes[i - 1];\n                    for (var k = 0; k < materialNodeInner.pixelInputConnections.length; k++) {\n                        var inputConnection = materialNodeInner.pixelInputConnections[k];\n                        if (prevMaterialNodeInner != null && inputConnection.materialNodeUid !== prevMaterialNodeInner.materialNodeUid) {\n                            continue;\n                        }\n                        var inputNode = _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_2__[\"default\"].materialNodes[inputConnection.materialNodeUid];\n                        var outputSocketOfPrev = inputNode.getPixelOutput(inputConnection.outputNameOfPrev);\n                        var inputSocketOfThis = materialNodeInner.getPixelInput(inputConnection.inputNameOfThis);\n                        var glslTypeStr = inputSocketOfThis.compositionType.getGlslStr(inputSocketOfThis.componentType);\n                        var varName = outputSocketOfPrev.name + \"_\" + inputConnection.materialNodeUid + \"_to_\" + inputSocketOfThis.name + \"_\" + materialNodeInner.materialNodeUid;\n                        if (i - 1 >= 0) {\n                            varOutputNames[i - 1].push(varName);\n                        }\n                    }\n                }\n            }\n            for (var i = 0; i < pixelMaterialNodes.length; i++) {\n                var materialNode = pixelMaterialNodes[i];\n                var functionName = materialNode.shaderFunctionName;\n                if (varInputNames[i] == null) {\n                    varInputNames[i] = [];\n                }\n                var varNames = varInputNames[i].concat(varOutputNames[i]);\n                var rowStr = functionName + \"(\";\n                for (var k = 0; k < varNames.length; k++) {\n                    var varName = varNames[k];\n                    if (varName == null) {\n                        continue;\n                    }\n                    if (k !== 0) {\n                        rowStr += ', ';\n                    }\n                    rowStr += varNames[k];\n                }\n                rowStr += ');\\n';\n                pixelShader += rowStr;\n            }\n            pixelShader += firstMaterialNodePixel.shader.glslMainEnd;\n        }\n        var attributeNames = [];\n        var attributeSemantics = [];\n        for (var i = 0; i < vertexMaterialNodes.length; i++) {\n            var materialNode = vertexMaterialNodes[i];\n            Array.prototype.push.apply(attributeNames, materialNode.shader.attributeNames);\n            Array.prototype.push.apply(attributeSemantics, materialNode.shader.attributeSemantics);\n        }\n        // remove duplicate values\n        attributeNames = Array.from(new Set(attributeNames));\n        attributeSemantics = Array.from(new Set(attributeSemantics));\n        return { vertexShader: vertexShader, pixelShader: pixelShader, attributeNames: attributeNames, attributeSemantics: attributeSemantics };\n    };\n    Material.prototype.createProgram = function (vertexShaderMethodDefinitions_uniform) {\n        if (this.__materialNodes[0].isSingleOperation) {\n            return this.createProgramAsSingleOperation(vertexShaderMethodDefinitions_uniform);\n        }\n        else {\n            var webglResourceRepository = _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance();\n            var returnValue = this.createProgramString(vertexShaderMethodDefinitions_uniform);\n            var shaderCharCount = (returnValue.vertexShader + returnValue.pixelShader).length;\n            // Cache\n            if (Material.__shaderMap.has(shaderCharCount)) {\n                this._shaderProgramUid = Material.__shaderMap.get(shaderCharCount);\n                return this._shaderProgramUid;\n            }\n            else {\n                this._shaderProgramUid = webglResourceRepository.createShaderProgram({\n                    vertexShaderStr: returnValue.vertexShader,\n                    fragmentShaderStr: returnValue.pixelShader,\n                    attributeNames: returnValue.attributeNames,\n                    attributeSemantics: returnValue.attributeSemantics\n                });\n                Material.__shaderMap.set(shaderCharCount, this._shaderProgramUid);\n                return this._shaderProgramUid;\n            }\n        }\n    };\n    Material.prototype.isBlend = function () {\n        if (this.alphaMode === _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__[\"AlphaMode\"].Blend) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Material.__shaderMap = new Map();\n    return Material;\n}(_core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (Material);\n\n\n//# sourceURL=webpack:///./src/foundation/materials/Material.ts?");

/***/ }),

/***/ "./src/foundation/materials/PbrShadingMaterialNode.ts":
/*!************************************************************!*\
  !*** ./src/foundation/materials/PbrShadingMaterialNode.ts ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Vector2 */ \"./src/foundation/math/Vector2.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../webgl/WebGLResourceRepository */ \"./src/webgl/WebGLResourceRepository.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _webgl_shaders_GcsPBRShader__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../webgl/shaders/GcsPBRShader */ \"./src/webgl/shaders/GcsPBRShader.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\nvar PbrShadingMaterialNode = /** @class */ (function (_super) {\n    __extends(PbrShadingMaterialNode, _super);\n    function PbrShadingMaterialNode() {\n        var _this = _super.call(this, _webgl_shaders_GcsPBRShader__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getInstance(), 'pbrShading') || this;\n        PbrShadingMaterialNode.initDefaultTextures();\n        var shaderSemanticsInfoArray = [\n            { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].BaseColorFactor, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec4, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float, isPlural: false, prefix: 'material.', isSystem: false, initialValue: new _math_Vector4__WEBPACK_IMPORTED_MODULE_7__[\"default\"](1, 1, 1, 1) },\n            { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].BaseColorTexture, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int, isPlural: false, isSystem: false, initialValue: [0, PbrShadingMaterialNode.__dummyWhiteTextureUid] },\n            { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].MetallicRoughnessFactor, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec2, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float, isPlural: false, prefix: 'material.', isSystem: false, initialValue: new _math_Vector2__WEBPACK_IMPORTED_MODULE_3__[\"default\"](1, 1) },\n            { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].MetallicRoughnessTexture, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int, isPlural: false, isSystem: false, initialValue: [1, PbrShadingMaterialNode.__dummyWhiteTextureUid] },\n            { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].NormalTexture, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int, isPlural: false, isSystem: false, initialValue: [2, PbrShadingMaterialNode.__dummyBlueTextureUid] },\n            { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].OcclusionTexture, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int, isPlural: false, isSystem: false, initialValue: [3, PbrShadingMaterialNode.__dummyWhiteTextureUid] },\n            { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].EmissiveTexture, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int, isPlural: false, isSystem: false, initialValue: [4, PbrShadingMaterialNode.__dummyBlackTextureUid] },\n            //      {semantic: ShaderSemantics.BrdfLutTexture, compositionType: CompositionType.Texture2D, componentType: ComponentType.Int, isPlural: false, isSystem: false, initialValue: new Vector2(6, PbrShadingMaterialNode.__pbrCookTorranceBrdfLutDataUrlUid)},\n            // {semantic: ShaderSemantics.DiffuseEnvTexture, compositionType: CompositionType.TextureCube, componentType: ComponentType.Int, isPlural: false, isSystem: false, initialValue: new Vector2(7, PbrShadingMaterialNode.dummyBlackCubeTextureUid)},\n            // {semantic: ShaderSemantics.SpecularEnvTexture, compositionType: CompositionType.TextureCube, componentType: ComponentType.Int, isPlural: false, isSystem: false, initialValue: new Vector2(8, PbrShadingMaterialNode.dummyBlackCubeTextureUid)},\n            // {semantic: ShaderSemantics.IBLParameter, compositionType: CompositionType.Vec3, componentType: ComponentType.Float, isPlural: false, isSystem: false},\n            { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].Wireframe, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec3, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float, isPlural: false, isSystem: false, initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_8__[\"default\"](0, 0, 1) },\n        ];\n        _this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);\n        return _this;\n    }\n    PbrShadingMaterialNode.initDefaultTextures = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var webglResourceRepository;\n            return __generator(this, function (_a) {\n                if (PbrShadingMaterialNode.__dummyWhiteTextureUid !== _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid) {\n                    return [2 /*return*/];\n                }\n                webglResourceRepository = _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInstance();\n                PbrShadingMaterialNode.__dummyWhiteTextureUid = webglResourceRepository.createDummyTexture();\n                PbrShadingMaterialNode.__dummyBlueTextureUid = webglResourceRepository.createDummyTexture(\"rgba(127.5, 127.5, 255, 1)\");\n                PbrShadingMaterialNode.__dummyBlackTextureUid = webglResourceRepository.createDummyTexture(\"rgba(0, 0, 0, 1)\");\n                PbrShadingMaterialNode.__dummyBlackCubeTextureUid = webglResourceRepository.createDummyCubeTexture();\n                return [2 /*return*/];\n            });\n        });\n    };\n    PbrShadingMaterialNode.prototype.convertValue = function (shaderSemantic, value) {\n    };\n    PbrShadingMaterialNode.__dummyWhiteTextureUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n    PbrShadingMaterialNode.__dummyBlueTextureUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n    PbrShadingMaterialNode.__dummyBlackTextureUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n    PbrShadingMaterialNode.__dummyBlackCubeTextureUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n    PbrShadingMaterialNode.__pbrCookTorranceBrdfLutDataUrlUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n    return PbrShadingMaterialNode;\n}(_AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (PbrShadingMaterialNode);\n\n\n//# sourceURL=webpack:///./src/foundation/materials/PbrShadingMaterialNode.ts?");

/***/ }),

/***/ "./src/foundation/math/AABB.ts":
/*!*************************************!*\
  !*** ./src/foundation/math/AABB.ts ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _Vector4__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _MutableVector3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n\n\n\nvar AABB = /** @class */ (function () {\n    function AABB() {\n        this.__min = new _MutableVector3__WEBPACK_IMPORTED_MODULE_2__[\"default\"](Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\n        this.__max = new _MutableVector3__WEBPACK_IMPORTED_MODULE_2__[\"default\"](-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);\n        this.__centerPoint = _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].zero();\n        this.__lengthCenterToCorner = 0;\n        this.__isCenterPointDirty = false;\n        this.__isLengthCenterToCornerDirty = false;\n    }\n    AABB.prototype.clone = function () {\n        var instance = new AABB();\n        instance.__max = this.__max.clone();\n        instance.__min = this.__min.clone();\n        instance.__centerPoint = this.__centerPoint.clone();\n        instance.__lengthCenterToCorner = this.__lengthCenterToCorner;\n        return instance;\n    };\n    Object.defineProperty(AABB.prototype, \"minPoint\", {\n        get: function () {\n            return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.__min);\n        },\n        set: function (val) {\n            this.__min = new _MutableVector3__WEBPACK_IMPORTED_MODULE_2__[\"default\"](val);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AABB.prototype, \"maxPoint\", {\n        get: function () {\n            return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.__max);\n        },\n        set: function (val) {\n            this.__max = new _MutableVector3__WEBPACK_IMPORTED_MODULE_2__[\"default\"](val);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AABB.prototype.isVanilla = function () {\n        if (this.__min.x >= Number.MAX_VALUE && this.__min.y >= Number.MAX_VALUE && this.__min.z >= Number.MAX_VALUE\n            && this.__max.x <= -Number.MAX_VALUE && this.__max.y <= -Number.MAX_VALUE && this.__max.z <= -Number.MAX_VALUE) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    AABB.prototype.addPosition = function (positionVector) {\n        this.__min.x = (positionVector.x < this.__min.x) ? positionVector.x : this.__min.x;\n        this.__min.y = (positionVector.y < this.__min.y) ? positionVector.y : this.__min.y;\n        this.__min.z = (positionVector.z < this.__min.z) ? positionVector.z : this.__min.z;\n        this.__max.x = (this.__max.x < positionVector.x) ? positionVector.x : this.__max.x;\n        this.__max.y = (this.__max.y < positionVector.y) ? positionVector.y : this.__max.y;\n        this.__max.z = (this.__max.z < positionVector.z) ? positionVector.z : this.__max.z;\n        this.__isCenterPointDirty = true;\n        this.__isLengthCenterToCornerDirty = true;\n        return positionVector;\n    };\n    AABB.prototype.addPositionWithArray = function (array, index) {\n        this.__min.x = (array[index + 0] < this.__min.x) ? array[index + 0] : this.__min.x;\n        this.__min.y = (array[index + 1] < this.__min.y) ? array[index + 1] : this.__min.y;\n        this.__min.z = (array[index + 2] < this.__min.z) ? array[index + 2] : this.__min.z;\n        this.__max.x = (this.__max.x < array[index + 0]) ? array[index + 0] : this.__max.x;\n        this.__max.y = (this.__max.y < array[index + 1]) ? array[index + 1] : this.__max.y;\n        this.__max.z = (this.__max.z < array[index + 2]) ? array[index + 2] : this.__max.z;\n        this.__isCenterPointDirty = true;\n        this.__isLengthCenterToCornerDirty = true;\n        return array;\n    };\n    AABB.prototype.mergeAABB = function (aabb) {\n        var isUpdated = false;\n        if (aabb.isVanilla()) {\n            return isUpdated;\n        }\n        if (this.isVanilla()) {\n            this.__min.x = aabb.minPoint.x;\n            this.__min.y = aabb.minPoint.y;\n            this.__min.z = aabb.minPoint.z;\n            this.__max.x = aabb.maxPoint.x;\n            this.__max.y = aabb.maxPoint.y;\n            this.__max.z = aabb.maxPoint.z;\n            isUpdated = true;\n            return isUpdated;\n        }\n        if (aabb.minPoint.x < this.__min.x) {\n            this.__min.x = aabb.minPoint.x;\n            isUpdated = true;\n        }\n        if (aabb.minPoint.y < this.__min.y) {\n            this.__min.y = aabb.minPoint.y;\n            isUpdated = true;\n        }\n        if (aabb.minPoint.z < this.__min.z) {\n            this.__min.z = aabb.minPoint.z;\n            isUpdated = true;\n        }\n        if (this.__max.x < aabb.maxPoint.x) {\n            this.__max.x = aabb.maxPoint.x;\n            isUpdated = true;\n        }\n        if (this.__max.y < aabb.maxPoint.y) {\n            this.__max.y = aabb.maxPoint.y;\n            isUpdated = true;\n        }\n        if (this.__max.z < aabb.maxPoint.z) {\n            this.__max.z = aabb.maxPoint.z;\n            isUpdated = true;\n        }\n        this.__isCenterPointDirty = true;\n        this.__isLengthCenterToCornerDirty = true;\n        return isUpdated;\n    };\n    Object.defineProperty(AABB.prototype, \"centerPoint\", {\n        get: function () {\n            if (this.__isCenterPointDirty) {\n                this.__centerPoint = _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(this.__min, this.__max).divide(2);\n                this.__isCenterPointDirty = false;\n            }\n            return this.__centerPoint;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AABB.prototype, \"lengthCenterToCorner\", {\n        get: function () {\n            if (this.__isLengthCenterToCornerDirty) {\n                var lengthCenterToCorner = _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].lengthBtw(this.centerPoint, this.maxPoint);\n                this.__lengthCenterToCorner = (lengthCenterToCorner !== lengthCenterToCorner) ? 0 : lengthCenterToCorner;\n                this.__isLengthCenterToCornerDirty = false;\n            }\n            return this.__lengthCenterToCorner;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AABB.prototype, \"sizeX\", {\n        get: function () {\n            return (this.__max.x - this.__min.x);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AABB.prototype, \"sizeY\", {\n        get: function () {\n            return (this.__max.y - this.__min.y);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AABB.prototype, \"sizeZ\", {\n        get: function () {\n            return (this.__max.z - this.__min.z);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AABB.multiplyMatrix = function (matrix, aabb) {\n        if (aabb.isVanilla()) {\n            return aabb.clone();\n        }\n        var newAabb = new AABB();\n        var AABB_0 = new _Vector4__WEBPACK_IMPORTED_MODULE_1__[\"default\"](aabb.__min.x, aabb.__min.y, aabb.__min.z, 1);\n        var AABB_1 = new _Vector4__WEBPACK_IMPORTED_MODULE_1__[\"default\"](aabb.__max.x, aabb.__min.y, aabb.__min.z, 1);\n        var AABB_2 = new _Vector4__WEBPACK_IMPORTED_MODULE_1__[\"default\"](aabb.__min.x, aabb.__max.y, aabb.__min.z, 1);\n        var AABB_3 = new _Vector4__WEBPACK_IMPORTED_MODULE_1__[\"default\"](aabb.__min.x, aabb.__min.y, aabb.__max.z, 1);\n        var AABB_4 = new _Vector4__WEBPACK_IMPORTED_MODULE_1__[\"default\"](aabb.__min.x, aabb.__max.y, aabb.__max.z, 1);\n        var AABB_5 = new _Vector4__WEBPACK_IMPORTED_MODULE_1__[\"default\"](aabb.__max.x, aabb.__min.y, aabb.__max.z, 1);\n        var AABB_6 = new _Vector4__WEBPACK_IMPORTED_MODULE_1__[\"default\"](aabb.__max.x, aabb.__max.y, aabb.__min.z, 1);\n        var AABB_7 = new _Vector4__WEBPACK_IMPORTED_MODULE_1__[\"default\"](aabb.__max.x, aabb.__max.y, aabb.__max.z, 1);\n        newAabb.addPosition(new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](matrix.multiplyVector(AABB_0)));\n        newAabb.addPosition(new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](matrix.multiplyVector(AABB_1)));\n        newAabb.addPosition(new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](matrix.multiplyVector(AABB_2)));\n        newAabb.addPosition(new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](matrix.multiplyVector(AABB_3)));\n        newAabb.addPosition(new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](matrix.multiplyVector(AABB_4)));\n        newAabb.addPosition(new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](matrix.multiplyVector(AABB_5)));\n        newAabb.addPosition(new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](matrix.multiplyVector(AABB_6)));\n        newAabb.addPosition(new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](matrix.multiplyVector(AABB_7)));\n        return newAabb;\n    };\n    AABB.prototype.toString = function () {\n        return 'AABB_min: ' + this.__min + '\\n' + 'AABB_max: ' + this.__max + '\\n'\n            + 'centerPoint: ' + this.__centerPoint + '\\n' + 'lengthCenterToCorner: ' + this.__lengthCenterToCorner;\n    };\n    return AABB;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (AABB);\n\n\n//# sourceURL=webpack:///./src/foundation/math/AABB.ts?");

/***/ }),

/***/ "./src/foundation/math/LogQuaternion.ts":
/*!**********************************************!*\
  !*** ./src/foundation/math/LogQuaternion.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Quaternion__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n\nvar LogQuaternion = /** @class */ (function () {\n    function LogQuaternion(x, y, z) {\n        if (ArrayBuffer.isView(x)) {\n            this.v = x;\n            return;\n        }\n        else if (x == null) {\n            this.v = new Float32Array(0);\n            return;\n        }\n        else {\n            this.v = new Float32Array(3);\n        }\n        if (x == null) {\n            this.v[0] = 0;\n            this.v[1] = 0;\n            this.v[2] = 0;\n        }\n        else if (x instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            var theta = Math.acos(x.w);\n            var sin = Math.sin(theta);\n            this.v[0] = x.x * (theta / sin);\n            this.v[1] = x.y * (theta / sin);\n            this.v[2] = x.z * (theta / sin);\n        }\n        else if (Array.isArray(x)) {\n            this.v[0] = x[0];\n            this.v[1] = x[1];\n            this.v[2] = x[2];\n        }\n        else if (typeof x.z !== 'undefined') {\n            this.v[0] = x.x;\n            this.v[1] = x.y;\n            this.v[2] = x.z;\n        }\n        else {\n            this.v[0] = x;\n            this.v[1] = x;\n            this.v[2] = x;\n        }\n    }\n    Object.defineProperty(LogQuaternion.prototype, \"x\", {\n        get: function () {\n            return this.v[0];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LogQuaternion.prototype, \"y\", {\n        get: function () {\n            return this.v[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LogQuaternion.prototype, \"z\", {\n        get: function () {\n            return this.v[2];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return LogQuaternion;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (LogQuaternion);\n\n\n//# sourceURL=webpack:///./src/foundation/math/LogQuaternion.ts?");

/***/ }),

/***/ "./src/foundation/math/MathClassUtil.ts":
/*!**********************************************!*\
  !*** ./src/foundation/math/MathClassUtil.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Vector2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector2 */ \"./src/foundation/math/Vector2.ts\");\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _Vector4__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _Quaternion__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n/* harmony import */ var _Matrix33__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Matrix33 */ \"./src/foundation/math/Matrix33.ts\");\n/* harmony import */ var _Matrix44__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./MutableMatrix33 */ \"./src/foundation/math/MutableMatrix33.ts\");\n/* harmony import */ var _MutableVector4__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./MutableVector4 */ \"./src/foundation/math/MutableVector4.ts\");\n/* harmony import */ var _MutableVector3__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n\n\n\n\n\n\n\n\n\n\n\nvar MathClassUtil = /** @class */ (function () {\n    function MathClassUtil() {\n    }\n    MathClassUtil.arrayToVector = function (element) {\n        if (Array.isArray(element)) {\n            if (typeof (element[3]) !== 'undefined') {\n                return new _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"](element[0], element[1], element[2], element[3]);\n            }\n            else if (typeof (element[2]) !== 'undefined') {\n                return new _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](element[0], element[1], element[2]);\n            }\n            else {\n                return new _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"](element[0], element[1]);\n            }\n        }\n        else {\n            return element;\n        }\n    };\n    MathClassUtil.arrayToVectorOrMatrix = function (element) {\n        if (Array.isArray(element)) {\n            if (typeof (element[15]) !== 'undefined') {\n                return new _Matrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"](element);\n            }\n            else if (typeof (element[8]) !== 'undefined') {\n                return new _Matrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"](element);\n            }\n            else if (typeof (element[3]) !== 'undefined') {\n                return new _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"](element[0], element[1], element[2], element[3]);\n            }\n            else if (typeof (element[2]) !== 'undefined') {\n                return new _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](element[0], element[1], element[2]);\n            }\n            else {\n                return new _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"](element[0], element[1]);\n            }\n        }\n        else {\n            return element;\n        }\n    };\n    MathClassUtil.getImmutableValueClass = function (compositionType) {\n        if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Vec2) {\n            return _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Vec3) {\n            return _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Vec4) {\n            return _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Mat3) {\n            return _Matrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Mat4) {\n            return _Matrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"];\n        }\n    };\n    MathClassUtil.getMutableValueClass = function (compositionType) {\n        if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Vec3) {\n            return _MutableVector3__WEBPACK_IMPORTED_MODULE_10__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Vec4) {\n            return _MutableVector4__WEBPACK_IMPORTED_MODULE_9__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Mat3) {\n            return _MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Mat4) {\n            return _MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"];\n        }\n    };\n    MathClassUtil.cloneOfMathObjects = function (element) {\n        if (element instanceof _Matrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"]) {\n            return element.clone();\n        }\n        else if (element instanceof _Matrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"]) {\n            return element.clone();\n        }\n        else if (element instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            return element.clone();\n        }\n        else if (element instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return element.clone();\n        }\n        else if (element instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return element.clone();\n        }\n        else {\n            return element;\n        }\n    };\n    MathClassUtil.isAcceptableArrayForQuaternion = function (element) {\n        if (Array.isArray(element)) {\n            if (typeof (element[3]) !== 'undefined') {\n                return true;\n            }\n        }\n        return false;\n    };\n    MathClassUtil.arrayToQuaternion = function (element) {\n        return new _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"](element[0], element[1], element[2], element[3]);\n    };\n    MathClassUtil.makeSubArray = function (array, componentN) {\n        if (componentN === 4) {\n            return [array[0], array[1], array[2], array[3]];\n        }\n        else if (componentN === 3) {\n            return [array[0], array[1], array[2]];\n        }\n        else if (componentN === 2) {\n            return [array[0], array[1]];\n        }\n        else {\n            return array[0];\n        }\n    };\n    MathClassUtil.vectorToArray = function (element) {\n        if (element instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return [element.x, element.y];\n        }\n        else if (element instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return [element.x, element.y, element.z];\n        }\n        else if (element instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"] || element instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n            return [element.x, element.y, element.z, element.w];\n        }\n        else {\n            return element;\n        }\n    };\n    /**\n     * discriminate which Vector instance\n     * @param element any Vector instance\n     * @return number of Vector instance\n     */\n    MathClassUtil.compomentNumberOfVector = function (element) {\n        if (element instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return 2;\n        }\n        else if (element instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return 3;\n        }\n        else if (element instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"] || element instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n            return 4;\n        }\n        else if (Array.isArray(element)) {\n            return element.length;\n        }\n        else {\n            return 0;\n        }\n    };\n    // values range must be [-1, 1]\n    MathClassUtil.packNormalizedVec4ToVec2 = function (x, y, z, w, criteria) {\n        var v0 = 0.0;\n        var v1 = 0.0;\n        x = (x + 1) / 2.0;\n        y = (y + 1) / 2.0;\n        z = (z + 1) / 2.0;\n        w = (w + 1) / 2.0;\n        var ir = Math.floor(x * (criteria - 1.0));\n        var ig = Math.floor(y * (criteria - 1.0));\n        var irg = ir * criteria + ig;\n        v0 = irg / criteria;\n        var ib = Math.floor(z * (criteria - 1.0));\n        var ia = Math.floor(w * (criteria - 1.0));\n        var iba = ib * criteria + ia;\n        v1 = iba / criteria;\n        return [v0, v1];\n    };\n    MathClassUtil.unProject = function (windowPosVec3, inversePVMat44, viewportVec4, zNear, zFar) {\n        var input = new _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"]((windowPosVec3.x - viewportVec4.x) / viewportVec4.z * 2 - 1.0, (windowPosVec3.y - viewportVec4.y) / viewportVec4.w * 2 - 1.0, \n        //      (windowPosVec3.z - zNear) / (zFar - zNear),\n        2 * windowPosVec3.z - 1.0, 1.0);\n        var PVMat44 = inversePVMat44; //Matrix44.transpose(inversePVMat44);\n        var out = PVMat44.multiplyVector(input);\n        //    const a = input.x * PVMat44.m03 + input.y * PVMat44.m13 + input.z * PVMat44.m23 + PVMat44.m33;\n        //    const a = input.x * PVMat44.m30 + input.y * PVMat44.m31 + input.z * PVMat44.m32 + PVMat44.m33;\n        if (out.w === 0) {\n            console.warn(\"Zero division!\");\n        }\n        var output = new _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](_Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].multiply(out, 1 / out.w));\n        return output;\n    };\n    MathClassUtil.add = function (lhs, rhs) {\n        if (isFinite(lhs)) { // number?\n            return lhs + rhs;\n        }\n        else if (lhs instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(lhs, rhs);\n        }\n        else if (lhs instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].add(lhs, rhs);\n        }\n        else if (lhs instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            return _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].add(lhs, rhs);\n        }\n        else if (lhs instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n            return _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"].add(lhs, rhs);\n        }\n        else if (Array.isArray(lhs)) {\n            var arr = [];\n            for (var i = 0; i < lhs.length; i++) {\n                arr[i] = lhs[i] + rhs[i];\n            }\n            return arr;\n        }\n        else {\n            console.error('Non supported type!');\n        }\n    };\n    MathClassUtil.subtract = function (lhs, rhs) {\n        if (isFinite(lhs)) { // number?\n            return lhs - rhs;\n        }\n        else if (lhs instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(lhs, rhs);\n        }\n        else if (lhs instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].subtract(lhs, rhs);\n        }\n        else if (lhs instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            return _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subtract(lhs, rhs);\n        }\n        else if (lhs instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n            return _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subtract(lhs, rhs);\n        }\n        else if (Array.isArray(lhs)) {\n            var arr = [];\n            for (var i = 0; i < lhs.length; i++) {\n                arr[i] = lhs[i] - rhs[i];\n            }\n            return arr;\n        }\n        else {\n            console.error('Non supported type!');\n        }\n    };\n    MathClassUtil.multiplyNumber = function (lhs, rhs) {\n        if (isFinite(lhs)) { // number?\n            return lhs * rhs;\n        }\n        else if (lhs instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(lhs, rhs);\n        }\n        else if (lhs instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].multiply(lhs, rhs);\n        }\n        else if (lhs instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            return _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].multiply(lhs, rhs);\n        }\n        else if (lhs instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n            return _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"].multiplyNumber(lhs, rhs);\n        }\n        else if (Array.isArray(lhs)) {\n            var arr = [];\n            for (var i = 0; i < lhs.length; i++) {\n                arr[i] = lhs[i] * rhs;\n            }\n            return arr;\n        }\n        else {\n            console.error('Non supported type!');\n        }\n    };\n    MathClassUtil.divideNumber = function (lhs, rhs) {\n        if (isFinite(lhs)) { // number?\n            return lhs / rhs;\n        }\n        else if (lhs instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(lhs, 1 / rhs);\n        }\n        else if (lhs instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].multiply(lhs, 1 / rhs);\n        }\n        else if (lhs instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            return _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].multiply(lhs, 1 / rhs);\n        }\n        else if (lhs instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n            return _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"].multiplyNumber(lhs, 1 / rhs);\n        }\n        else if (Array.isArray(lhs)) {\n            var arr = [];\n            for (var i = 0; i < lhs.length; i++) {\n                arr[i] = lhs[i] / rhs;\n            }\n            return arr;\n        }\n        else {\n            console.error('Non supported type!');\n        }\n    };\n    MathClassUtil.init = function (objForDetectType, val) {\n        if (isFinite(objForDetectType)) { // number?\n            return val;\n        }\n        else if (objForDetectType instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return new _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"](val, val);\n        }\n        else if (objForDetectType instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return new _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](val, val, val);\n        }\n        else if (objForDetectType instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            return new _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"](val, val, val, val);\n        }\n        else if (objForDetectType instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n            return new _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"](0, 0, 0, 1);\n        }\n        else if (Array.isArray(objForDetectType)) {\n            var arr = [];\n            for (var i = 0; i < objForDetectType.length; i++) {\n                arr[i] = val;\n            }\n            return arr;\n        }\n        else {\n            console.error('Non supported type!');\n        }\n    };\n    return MathClassUtil;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (MathClassUtil);\n//GLBoost[\"MathClassUtil\"] = MathClassUtil;\n\n\n//# sourceURL=webpack:///./src/foundation/math/MathClassUtil.ts?");

/***/ }),

/***/ "./src/foundation/math/MathUtil.ts":
/*!*****************************************!*\
  !*** ./src/foundation/math/MathUtil.ts ***!
  \*****************************************/
/*! exports provided: MathUtil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MathUtil\", function() { return MathUtil; });\n//import GLBoost from '../../globals';\nfunction radianToDegree(rad) {\n    return rad * 180 / Math.PI;\n}\nfunction degreeToRadian(deg) {\n    return deg * Math.PI / 180;\n}\n// https://gamedev.stackexchange.com/questions/17326/conversion-of-a-number-from-single-precision-floating-point-representation-to-a/17410#17410\nvar toHalfFloat = (function () {\n    var floatView = new Float32Array(1);\n    var int32View = new Int32Array(floatView.buffer);\n    /* This method is faster than the OpenEXR implementation (very often\n      * used, eg. in Ogre), with the additional benefit of rounding, inspired\n      * by James Tursa?s half-precision code. */\n    return function toHalf(val) {\n        floatView[0] = val;\n        var x = int32View[0];\n        var bits = (x >> 16) & 0x8000; /* Get the sign */\n        var m = (x >> 12) & 0x07ff; /* Keep one extra bit for rounding */\n        var e = (x >> 23) & 0xff; /* Using int is faster here */\n        /* If zero, or denormal, or exponent underflows too much for a denormal\n          * half, return signed zero. */\n        if (e < 103) {\n            return bits;\n        }\n        /* If NaN, return NaN. If Inf or exponent overflow, return Inf. */\n        if (e > 142) {\n            bits |= 0x7c00;\n            /* If exponent was 0xff and one mantissa bit was set, it means NaN,\n                  * not Inf, so make sure we set one mantissa bit too. */\n            bits |= ((e == 255) ? 0 : 1) && (x & 0x007fffff);\n            return bits;\n        }\n        /* If exponent underflows but not too much, return a denormal */\n        if (e < 113) {\n            m |= 0x0800;\n            /* Extra rounding may overflow and set mantissa to 0 and exponent\n              * to 1, which is OK. */\n            bits |= (m >> (114 - e)) + ((m >> (113 - e)) & 1);\n            return bits;\n        }\n        bits |= ((e - 112) << 10) | (m >> 1);\n        /* Extra rounding. An overflow will set mantissa to 0 and increment\n          * the exponent, which is OK. */\n        bits += m & 1;\n        return bits;\n    };\n}());\n/**\n * check whether or not this texture size is power of two.\n *\n * @param x texture size.\n * @returns check whether or not the size x is power of two.\n */\nfunction isPowerOfTwo(x) {\n    return (x & (x - 1)) == 0;\n}\nfunction isPowerOfTwoTexture(width, height) {\n    return isPowerOfTwo(width) && isPowerOfTwo(height);\n}\n// values range must be [-1, 1]\nfunction packNormalizedVec4ToVec2(x, y, z, w, criteria) {\n    var v0 = 0.0;\n    var v1 = 0.0;\n    x = (x + 1) / 2.0;\n    y = (y + 1) / 2.0;\n    z = (z + 1) / 2.0;\n    w = (w + 1) / 2.0;\n    var ir = Math.floor(x * (criteria - 1.0));\n    var ig = Math.floor(y * (criteria - 1.0));\n    var irg = ir * criteria + ig;\n    v0 = irg / criteria;\n    var ib = Math.floor(z * (criteria - 1.0));\n    var ia = Math.floor(w * (criteria - 1.0));\n    var iba = ib * criteria + ia;\n    v1 = iba / criteria;\n    return [v0, v1];\n}\nvar MathUtil = Object.freeze({ radianToDegree: radianToDegree, degreeToRadian: degreeToRadian, toHalfFloat: toHalfFloat, isPowerOfTwo: isPowerOfTwo, isPowerOfTwoTexture: isPowerOfTwoTexture, packNormalizedVec4ToVec2: packNormalizedVec4ToVec2 });\n\n\n//# sourceURL=webpack:///./src/foundation/math/MathUtil.ts?");

/***/ }),

/***/ "./src/foundation/math/Matrix33.ts":
/*!*****************************************!*\
  !*** ./src/foundation/math/Matrix33.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n// import GLBoost from '../../globals';\n\n\nvar Matrix33 = /** @class */ (function () {\n    function Matrix33(m0, m1, m2, m3, m4, m5, m6, m7, m8, isColumnMajor, notCopyFloatArray) {\n        if (isColumnMajor === void 0) { isColumnMajor = false; }\n        if (notCopyFloatArray === void 0) { notCopyFloatArray = false; }\n        var _isColumnMajor = (arguments.length === 10) ? isColumnMajor : m1;\n        var _notCopyFloatArray = (arguments.length === 3) ? notCopyFloatArray : false;\n        var m = m0;\n        if (m == null) {\n            this.v = new Float32Array(0);\n            return;\n        }\n        if (arguments.length === 9) {\n            this.v = new Float32Array(9);\n            if (_isColumnMajor === true) {\n                var m_1 = arguments;\n                this.v[0] = m_1[0];\n                this.v[3] = m_1[3];\n                this.v[6] = m_1[6];\n                this.v[1] = m_1[1];\n                this.v[4] = m_1[4];\n                this.v[7] = m_1[7];\n                this.v[2] = m_1[2];\n                this.v[5] = m_1[5];\n                this.v[8] = m_1[8];\n            }\n            else {\n                var m_2 = arguments;\n                // arguments[0-8] must be row major values if isColumnMajor is false\n                this.v[0] = m_2[0];\n                this.v[3] = m_2[1];\n                this.v[6] = m_2[2];\n                this.v[1] = m_2[3];\n                this.v[4] = m_2[4];\n                this.v[7] = m_2[5];\n                this.v[2] = m_2[6];\n                this.v[5] = m_2[7];\n                this.v[8] = m_2[8];\n            }\n        }\n        else if (Array.isArray(m)) {\n            this.v = new Float32Array(9);\n            if (_isColumnMajor === true) {\n                this.v[0] = m[0];\n                this.v[3] = m[3];\n                this.v[6] = m[6];\n                this.v[1] = m[1];\n                this.v[4] = m[4];\n                this.v[7] = m[7];\n                this.v[2] = m[2];\n                this.v[5] = m[5];\n                this.v[8] = m[8];\n            }\n            else {\n                // 'm' must be row major array if isColumnMajor is false\n                this.v[0] = m[0];\n                this.v[3] = m[1];\n                this.v[6] = m[2];\n                this.v[1] = m[3];\n                this.v[4] = m[4];\n                this.v[7] = m[5];\n                this.v[2] = m[6];\n                this.v[5] = m[7];\n                this.v[8] = m[8];\n            }\n        }\n        else if (m instanceof Float32Array) {\n            if (_notCopyFloatArray) {\n                this.v = m;\n            }\n            else {\n                this.v = new Float32Array(9);\n                if (_isColumnMajor === true) {\n                    this.v[0] = m[0];\n                    this.v[3] = m[3];\n                    this.v[6] = m[6];\n                    this.v[1] = m[1];\n                    this.v[4] = m[4];\n                    this.v[7] = m[7];\n                    this.v[2] = m[2];\n                    this.v[5] = m[5];\n                    this.v[8] = m[8];\n                }\n                else {\n                    // 'm' must be row major array if isColumnMajor is false\n                    this.v[0] = m[0];\n                    this.v[3] = m[1];\n                    this.v[6] = m[2];\n                    this.v[1] = m[3];\n                    this.v[4] = m[4];\n                    this.v[7] = m[5];\n                    this.v[2] = m[6];\n                    this.v[5] = m[7];\n                    this.v[8] = m[8];\n                }\n            }\n        }\n        else if (!!m && typeof m.m22 !== 'undefined') {\n            if (_notCopyFloatArray) {\n                this.v = m.v;\n            }\n            else {\n                this.v = new Float32Array(9);\n                if (_isColumnMajor === true) {\n                    var v = m.v;\n                    this.v[0] = v[0];\n                    this.v[3] = v[3];\n                    this.v[6] = v[6];\n                    this.v[1] = v[1];\n                    this.v[4] = v[4];\n                    this.v[7] = v[7];\n                    this.v[2] = v[2];\n                    this.v[5] = v[5];\n                    this.v[8] = v[8];\n                }\n                else {\n                    var v = m.v;\n                    // 'm' must be row major array if isColumnMajor is false\n                    this.v[0] = v[0];\n                    this.v[3] = v[1];\n                    this.v[6] = v[2];\n                    this.v[1] = v[3];\n                    this.v[4] = v[4];\n                    this.v[7] = v[5];\n                    this.v[2] = v[6];\n                    this.v[5] = v[7];\n                    this.v[8] = v[8];\n                }\n            }\n        }\n        else if (!!m && typeof m.className !== 'undefined' && m.className === 'Quaternion') {\n            this.v = new Float32Array(9);\n            var q = m;\n            var sx = q.x * q.x;\n            var sy = q.y * q.y;\n            var sz = q.z * q.z;\n            var cx = q.y * q.z;\n            var cy = q.x * q.z;\n            var cz = q.x * q.y;\n            var wx = q.w * q.x;\n            var wy = q.w * q.y;\n            var wz = q.w * q.z;\n            this.v[0] = 1.0 - 2.0 * (sy + sz);\n            this.v[3] = 2.0 * (cz - wz);\n            this.v[6] = 2.0 * (cy + wy);\n            this.v[1] = 2.0 * (cz + wz);\n            this.v[4] = 1.0 - 2.0 * (sx + sz);\n            this.v[7] = 2.0 * (cx - wx);\n            this.v[2] = 2.0 * (cy - wy);\n            this.v[5] = 2.0 * (cx + wx);\n            this.v[8] = 1.0 - 2.0 * (sx + sy);\n        }\n        else {\n            this.v = new Float32Array(9);\n            this.v[0] = 1;\n            this.v[3] = 0;\n            this.v[6] = 0;\n            this.v[1] = 0;\n            this.v[4] = 1;\n            this.v[7] = 0;\n            this.v[2] = 0;\n            this.v[5] = 0;\n            this.v[8] = 1;\n        }\n    }\n    Object.defineProperty(Matrix33.prototype, \"className\", {\n        get: function () {\n            return this.constructor.name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix33, \"compositionType\", {\n        get: function () {\n            return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Mat3;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Matrix33.prototype.multiplyVector = function (vec) {\n        var x = this.m00 * vec.x + this.m01 * vec.y + this.m02 * vec.z;\n        var y = this.m10 * vec.x + this.m11 * vec.y + this.m12 * vec.z;\n        var z = this.m20 * vec.x + this.m21 * vec.y + this.m22 * vec.z;\n        return new vec.constructor(x, y, z);\n    };\n    /**\n     * Make this identity matrix（static method version）\n     */\n    Matrix33.identity = function () {\n        return new Matrix33(1, 0, 0, 0, 1, 0, 0, 0, 1);\n    };\n    Matrix33.dummy = function () {\n        return new Matrix33(null);\n    };\n    Matrix33.prototype.isDummy = function () {\n        if (this.v.length === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Matrix33.prototype.clone = function () {\n        return new Matrix33(this.v[0], this.v[3], this.v[6], this.v[1], this.v[4], this.v[7], this.v[2], this.v[5], this.v[8]);\n    };\n    /**\n     * Create X oriented Rotation Matrix\n     */\n    Matrix33.rotateX = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new Matrix33(1, 0, 0, 0, cos, -sin, 0, sin, cos);\n    };\n    /**\n     * Create Y oriented Rotation Matrix\n     */\n    Matrix33.rotateY = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new Matrix33(cos, 0, sin, 0, 1, 0, -sin, 0, cos);\n    };\n    /**\n     * Create Z oriented Rotation Matrix\n     */\n    Matrix33.rotateZ = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new Matrix33(cos, -sin, 0, sin, cos, 0, 0, 0, 1);\n    };\n    Matrix33.rotateXYZ = function (x, y, z) {\n        return Matrix33.multiply(Matrix33.multiply(Matrix33.rotateZ(z), Matrix33.rotateY(y)), Matrix33.rotateX(x));\n    };\n    Matrix33.rotate = function (vec3) {\n        return Matrix33.multiply(Matrix33.multiply(Matrix33.rotateZ(vec3.z), Matrix33.rotateY(vec3.y)), Matrix33.rotateX(vec3.x));\n    };\n    Matrix33.scale = function (vec) {\n        return new Matrix33(vec.x, 0, 0, 0, vec.y, 0, 0, 0, vec.z);\n    };\n    /**\n     * zero matrix(static version)\n     */\n    Matrix33.zero = function () {\n        return new Matrix33(0, 0, 0, 0, 0, 0, 0, 0, 0);\n    };\n    /**\n     * transpose(static version)\n     */\n    Matrix33.transpose = function (mat) {\n        var mat_t = new Matrix33(mat.m00, mat.m10, mat.m20, mat.m01, mat.m11, mat.m21, mat.m02, mat.m12, mat.m22);\n        return mat_t;\n    };\n    /**\n     * multiply matrixs (static version)\n     */\n    Matrix33.multiply = function (l_m, r_m) {\n        var m00 = l_m.m00 * r_m.m00 + l_m.m01 * r_m.m10 + l_m.m02 * r_m.m20;\n        var m10 = l_m.m10 * r_m.m00 + l_m.m11 * r_m.m10 + l_m.m12 * r_m.m20;\n        var m20 = l_m.m20 * r_m.m00 + l_m.m21 * r_m.m10 + l_m.m22 * r_m.m20;\n        var m01 = l_m.m00 * r_m.m01 + l_m.m01 * r_m.m11 + l_m.m02 * r_m.m21;\n        var m11 = l_m.m10 * r_m.m01 + l_m.m11 * r_m.m11 + l_m.m12 * r_m.m21;\n        var m21 = l_m.m20 * r_m.m01 + l_m.m21 * r_m.m11 + l_m.m22 * r_m.m21;\n        var m02 = l_m.m00 * r_m.m02 + l_m.m01 * r_m.m12 + l_m.m02 * r_m.m22;\n        var m12 = l_m.m10 * r_m.m02 + l_m.m11 * r_m.m12 + l_m.m12 * r_m.m22;\n        var m22 = l_m.m20 * r_m.m02 + l_m.m21 * r_m.m12 + l_m.m22 * r_m.m22;\n        return new Matrix33(m00, m01, m02, m10, m11, m12, m20, m21, m22);\n    };\n    Matrix33.prototype.determinant = function () {\n        return this.m00 * this.m11 * this.m22 + this.m10 * this.m21 * this.m02 + this.m20 * this.m01 * this.m12\n            - this.m00 * this.m21 * this.m12 - this.m20 * this.m11 * this.m02 - this.m10 * this.m01 * this.m22;\n    };\n    Matrix33.determinant = function (mat) {\n        return mat.m00 * mat.m11 * mat.m22 + mat.m10 * mat.m21 * mat.m02 + mat.m20 * mat.m01 * mat.m12\n            - mat.m00 * mat.m21 * mat.m12 - mat.m20 * mat.m11 * mat.m02 - mat.m10 * mat.m01 * mat.m22;\n    };\n    Matrix33.invert = function (mat) {\n        var det = mat.determinant();\n        var m00 = (mat.m11 * mat.m22 - mat.m12 * mat.m21) / det;\n        var m01 = (mat.m02 * mat.m21 - mat.m01 * mat.m22) / det;\n        var m02 = (mat.m01 * mat.m12 - mat.m02 * mat.m11) / det;\n        var m10 = (mat.m12 * mat.m20 - mat.m10 * mat.m22) / det;\n        var m11 = (mat.m00 * mat.m22 - mat.m02 * mat.m20) / det;\n        var m12 = (mat.m02 * mat.m10 - mat.m00 * mat.m12) / det;\n        var m20 = (mat.m10 * mat.m21 - mat.m11 * mat.m20) / det;\n        var m21 = (mat.m01 * mat.m20 - mat.m00 * mat.m21) / det;\n        var m22 = (mat.m00 * mat.m11 - mat.m01 * mat.m10) / det;\n        return new Matrix33(m00, m01, m02, m10, m11, m12, m20, m21, m22);\n    };\n    Object.defineProperty(Matrix33.prototype, \"m00\", {\n        get: function () {\n            return this.v[0];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix33.prototype, \"m10\", {\n        get: function () {\n            return this.v[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix33.prototype, \"m20\", {\n        get: function () {\n            return this.v[2];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix33.prototype, \"m01\", {\n        get: function () {\n            return this.v[3];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix33.prototype, \"m11\", {\n        get: function () {\n            return this.v[4];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix33.prototype, \"m21\", {\n        get: function () {\n            return this.v[5];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix33.prototype, \"m02\", {\n        get: function () {\n            return this.v[6];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix33.prototype, \"m12\", {\n        get: function () {\n            return this.v[7];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix33.prototype, \"m22\", {\n        get: function () {\n            return this.v[8];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Matrix33.prototype.toString = function () {\n        return this.m00 + ' ' + this.m01 + ' ' + this.m02 + '\\n' +\n            this.m10 + ' ' + this.m11 + ' ' + this.m12 + '\\n' +\n            this.m20 + ' ' + this.m21 + ' ' + this.m22 + '\\n';\n    };\n    Matrix33.prototype.nearZeroToZero = function (value) {\n        if (Math.abs(value) < 0.00001) {\n            value = 0;\n        }\n        else if (0.99999 < value && value < 1.00001) {\n            value = 1;\n        }\n        else if (-1.00001 < value && value < -0.99999) {\n            value = -1;\n        }\n        return value;\n    };\n    Matrix33.prototype.toStringApproximately = function () {\n        return this.nearZeroToZero(this.m00) + ' ' + this.nearZeroToZero(this.m01) + ' ' + this.nearZeroToZero(this.m02) + '\\n' +\n            this.nearZeroToZero(this.m10) + ' ' + this.nearZeroToZero(this.m11) + ' ' + this.nearZeroToZero(this.m12) + ' \\n' +\n            this.nearZeroToZero(this.m20) + ' ' + this.nearZeroToZero(this.m21) + ' ' + this.nearZeroToZero(this.m22) + '\\n';\n    };\n    Matrix33.prototype.getScale = function () {\n        return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](Math.sqrt(this.m00 * this.m00 + this.m01 * this.m01 + this.m02 * this.m02), Math.sqrt(this.m10 * this.m10 + this.m11 * this.m11 + this.m12 * this.m12), Math.sqrt(this.m20 * this.m20 + this.m21 * this.m21 + this.m22 * this.m22));\n    };\n    Matrix33.prototype.isEqual = function (mat, delta) {\n        if (delta === void 0) { delta = Number.EPSILON; }\n        if (Math.abs(mat.v[0] - this.v[0]) < delta &&\n            Math.abs(mat.v[1] - this.v[1]) < delta &&\n            Math.abs(mat.v[2] - this.v[2]) < delta &&\n            Math.abs(mat.v[3] - this.v[3]) < delta &&\n            Math.abs(mat.v[4] - this.v[4]) < delta &&\n            Math.abs(mat.v[5] - this.v[5]) < delta &&\n            Math.abs(mat.v[6] - this.v[6]) < delta &&\n            Math.abs(mat.v[7] - this.v[7]) < delta &&\n            Math.abs(mat.v[8] - this.v[8]) < delta) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return Matrix33;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (Matrix33);\n\n\n//# sourceURL=webpack:///./src/foundation/math/Matrix33.ts?");

/***/ }),

/***/ "./src/foundation/math/Matrix44.ts":
/*!*****************************************!*\
  !*** ./src/foundation/math/Matrix44.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _Quaternion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n/* harmony import */ var _Vector4__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n//import GLBoost from '../../globals';\n\n\n\n\nvar FloatArray = Float32Array;\nvar Matrix44 = /** @class */ (function () {\n    function Matrix44(m0, m1, m2, m3, m4, m5, m6, m7, m8, m9, m10, m11, m12, m13, m14, m15, isColumnMajor, notCopyFloatArray) {\n        if (isColumnMajor === void 0) { isColumnMajor = false; }\n        if (notCopyFloatArray === void 0) { notCopyFloatArray = false; }\n        var _isColumnMajor = (arguments.length >= 16) ? isColumnMajor : m1;\n        var _notCopyFloatArray = (arguments.length >= 16) ? notCopyFloatArray : m2;\n        var m = m0;\n        if (m == null) {\n            this.v = new FloatArray(0);\n            return;\n        }\n        if (arguments.length >= 16 && arguments[3] != null) {\n            this.v = new FloatArray(16); // Data order is column major\n            var m_1 = arguments;\n            if (_isColumnMajor === true) {\n                this.v[0] = m_1[0];\n                this.v[4] = m_1[4];\n                this.v[8] = m_1[8];\n                this.v[12] = m_1[12];\n                this.v[1] = m_1[1];\n                this.v[5] = m_1[5];\n                this.v[9] = m_1[9];\n                this.v[13] = m_1[13];\n                this.v[2] = m_1[2];\n                this.v[6] = m_1[6];\n                this.v[10] = m_1[10];\n                this.v[14] = m_1[14];\n                this.v[3] = m_1[3];\n                this.v[7] = m_1[7];\n                this.v[11] = m_1[11];\n                this.v[15] = m_1[15];\n            }\n            else {\n                // arguments[0-15] must be row major values if isColumnMajor is false\n                this.v[0] = m_1[0];\n                this.v[4] = m_1[1];\n                this.v[8] = m_1[2];\n                this.v[12] = m_1[3];\n                this.v[1] = m_1[4];\n                this.v[5] = m_1[5];\n                this.v[9] = m_1[6];\n                this.v[13] = m_1[7];\n                this.v[2] = m_1[8];\n                this.v[6] = m_1[9];\n                this.v[10] = m_1[10];\n                this.v[14] = m_1[11];\n                this.v[3] = m_1[12];\n                this.v[7] = m_1[13];\n                this.v[11] = m_1[14];\n                this.v[15] = m_1[15];\n            }\n        }\n        else if (Array.isArray(m)) {\n            this.v = new FloatArray(16);\n            if (_isColumnMajor === true) {\n                this.v[0] = m[0];\n                this.v[4] = m[4];\n                this.v[8] = m[8];\n                this.v[12] = m[12];\n                this.v[1] = m[1];\n                this.v[5] = m[5];\n                this.v[9] = m[9];\n                this.v[13] = m[13];\n                this.v[2] = m[2];\n                this.v[6] = m[6];\n                this.v[10] = m[10];\n                this.v[14] = m[14];\n                this.v[3] = m[3];\n                this.v[7] = m[7];\n                this.v[11] = m[11];\n                this.v[15] = m[15];\n            }\n            else {\n                // 'm' must be row major values if isColumnMajor is false\n                this.v[0] = m[0];\n                this.v[4] = m[1];\n                this.v[8] = m[2];\n                this.v[12] = m[3];\n                this.v[1] = m[4];\n                this.v[5] = m[5];\n                this.v[9] = m[6];\n                this.v[13] = m[7];\n                this.v[2] = m[8];\n                this.v[6] = m[9];\n                this.v[10] = m[10];\n                this.v[14] = m[11];\n                this.v[3] = m[12];\n                this.v[7] = m[13];\n                this.v[11] = m[14];\n                this.v[15] = m[15];\n            }\n        }\n        else if (m instanceof FloatArray) {\n            if (_notCopyFloatArray) {\n                this.v = m;\n            }\n            else {\n                this.v = new FloatArray(16);\n                if (_isColumnMajor === true) {\n                    this.v[0] = m[0];\n                    this.v[4] = m[4];\n                    this.v[8] = m[8];\n                    this.v[12] = m[12];\n                    this.v[1] = m[1];\n                    this.v[5] = m[5];\n                    this.v[9] = m[9];\n                    this.v[13] = m[13];\n                    this.v[2] = m[2];\n                    this.v[6] = m[6];\n                    this.v[10] = m[10];\n                    this.v[14] = m[14];\n                    this.v[3] = m[3];\n                    this.v[7] = m[7];\n                    this.v[11] = m[11];\n                    this.v[15] = m[15];\n                }\n                else {\n                    // 'm' must be row major values if isColumnMajor is false\n                    this.v[0] = m[0];\n                    this.v[4] = m[1];\n                    this.v[8] = m[2];\n                    this.v[12] = m[3];\n                    this.v[1] = m[4];\n                    this.v[5] = m[5];\n                    this.v[9] = m[6];\n                    this.v[13] = m[7];\n                    this.v[2] = m[8];\n                    this.v[6] = m[9];\n                    this.v[10] = m[10];\n                    this.v[14] = m[11];\n                    this.v[3] = m[12];\n                    this.v[7] = m[13];\n                    this.v[11] = m[14];\n                    this.v[15] = m[15];\n                }\n            }\n        }\n        else if (!!m && typeof m.m33 !== 'undefined' && typeof m.m22 !== 'undefined') {\n            if (_notCopyFloatArray) {\n                this.v = m.v;\n            }\n            else {\n                this.v = new FloatArray(16);\n                var v = m.v;\n                if (_isColumnMajor === true) {\n                    this.v[0] = v[0];\n                    this.v[4] = v[4];\n                    this.v[8] = v[8];\n                    this.v[12] = v[12];\n                    this.v[1] = v[1];\n                    this.v[5] = v[5];\n                    this.v[9] = v[9];\n                    this.v[13] = v[13];\n                    this.v[2] = v[2];\n                    this.v[6] = v[6];\n                    this.v[10] = v[10];\n                    this.v[14] = v[14];\n                    this.v[3] = v[3];\n                    this.v[7] = v[7];\n                    this.v[11] = v[11];\n                    this.v[15] = v[15];\n                }\n                else {\n                    // 'm' must be row major values if isColumnMajor is false\n                    this.v[0] = v[0];\n                    this.v[4] = v[1];\n                    this.v[8] = v[2];\n                    this.v[12] = v[3];\n                    this.v[1] = v[4];\n                    this.v[5] = v[5];\n                    this.v[9] = v[6];\n                    this.v[13] = v[7];\n                    this.v[2] = v[8];\n                    this.v[6] = v[9];\n                    this.v[10] = v[10];\n                    this.v[14] = v[11];\n                    this.v[3] = v[12];\n                    this.v[7] = v[13];\n                    this.v[11] = v[14];\n                    this.v[15] = v[15];\n                }\n            }\n        }\n        else if (!!m && typeof m.m33 === 'undefined' && typeof m.m22 !== 'undefined') {\n            if (_notCopyFloatArray) {\n                this.v = m.v;\n            }\n            else {\n                this.v = new FloatArray(16);\n                var v = m.v;\n                if (_isColumnMajor === true) {\n                    this.v[0] = v[0];\n                    this.v[4] = v[3];\n                    this.v[8] = v[6];\n                    this.v[12] = 0;\n                    this.v[1] = v[1];\n                    this.v[5] = v[4];\n                    this.v[9] = v[7];\n                    this.v[13] = 0;\n                    this.v[2] = v[2];\n                    this.v[6] = v[5];\n                    this.v[10] = v[8];\n                    this.v[14] = 0;\n                    this.v[3] = 0;\n                    this.v[7] = 0;\n                    this.v[11] = 0;\n                    this.v[15] = 1;\n                }\n                else {\n                    // 'm' must be row major values if isColumnMajor is false\n                    this.v[0] = v[0];\n                    this.v[4] = v[1];\n                    this.v[8] = v[2];\n                    this.v[12] = 0;\n                    this.v[1] = v[3];\n                    this.v[5] = v[4];\n                    this.v[9] = v[5];\n                    this.v[13] = 0;\n                    this.v[2] = v[6];\n                    this.v[6] = v[7];\n                    this.v[10] = v[8];\n                    this.v[14] = 0;\n                    this.v[3] = 0;\n                    this.v[7] = 0;\n                    this.v[11] = 0;\n                    this.v[15] = 1;\n                }\n            }\n        }\n        else if (!!m && typeof m.className !== 'undefined' && m instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            this.v = new FloatArray(16);\n            var sx = m.x * m.x;\n            var sy = m.y * m.y;\n            var sz = m.z * m.z;\n            var cx = m.y * m.z;\n            var cy = m.x * m.z;\n            var cz = m.x * m.y;\n            var wx = m.w * m.x;\n            var wy = m.w * m.y;\n            var wz = m.w * m.z;\n            this.v[0] = 1.0 - 2.0 * (sy + sz);\n            this.v[4] = 2.0 * (cz - wz);\n            this.v[8] = 2.0 * (cy + wy);\n            this.v[12] = 0;\n            this.v[1] = 2.0 * (cz + wz);\n            this.v[5] = 1.0 - 2.0 * (sx + sz);\n            this.v[9] = 2.0 * (cx - wx);\n            this.v[13] = 0;\n            this.v[2] = 2.0 * (cy - wy);\n            this.v[6] = 2.0 * (cx + wx);\n            this.v[10] = 1.0 - 2.0 * (sx + sy);\n            this.v[14] = 0;\n            this.v[3] = 0;\n            this.v[7] = 0;\n            this.v[11] = 0;\n            this.v[15] = 1;\n        }\n        else {\n            this.v = new FloatArray(16);\n            this.v[0] = 1;\n            this.v[4] = 0;\n            this.v[8] = 0;\n            this.v[12] = 0;\n            this.v[1] = 0;\n            this.v[5] = 1;\n            this.v[9] = 0;\n            this.v[13] = 0;\n            this.v[2] = 0;\n            this.v[6] = 0;\n            this.v[10] = 1;\n            this.v[14] = 0;\n            this.v[3] = 0;\n            this.v[7] = 0;\n            this.v[11] = 0;\n            this.v[15] = 1;\n        }\n    }\n    Matrix44.dummy = function () {\n        return new Matrix44(null);\n    };\n    Object.defineProperty(Matrix44, \"compositionType\", {\n        get: function () {\n            return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Mat4;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Matrix44.prototype.isDummy = function () {\n        if (this.v.length === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Object.defineProperty(Matrix44.prototype, \"className\", {\n        get: function () {\n            return this.constructor.name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Matrix44.prototype.clone = function () {\n        return new Matrix44(this.v[0], this.v[4], this.v[8], this.v[12], this.v[1], this.v[5], this.v[9], this.v[13], this.v[2], this.v[6], this.v[10], this.v[14], this.v[3], this.v[7], this.v[11], this.v[15]);\n    };\n    Matrix44.fromQuaternionTo = function (m, outMat) {\n        var sx = m.x * m.x;\n        var sy = m.y * m.y;\n        var sz = m.z * m.z;\n        var cx = m.y * m.z;\n        var cy = m.x * m.z;\n        var cz = m.x * m.y;\n        var wx = m.w * m.x;\n        var wy = m.w * m.y;\n        var wz = m.w * m.z;\n        outMat.m00 = 1.0 - 2.0 * (sy + sz);\n        outMat.m01 = 2.0 * (cz - wz);\n        outMat.m02 = 2.0 * (cy + wy);\n        outMat.m03 = 0;\n        outMat.m10 = 2.0 * (cz + wz);\n        outMat.m11 = 1.0 - 2.0 * (sx + sz);\n        outMat.m12 = 2.0 * (cx - wx);\n        outMat.m13 = 0;\n        outMat.m20 = 2.0 * (cy - wy);\n        outMat.m21 = 2.0 * (cx + wx);\n        outMat.m22 = 1.0 - 2.0 * (sx + sy);\n        outMat.m23 = 0;\n        outMat.m30 = 0;\n        outMat.m31 = 0;\n        outMat.m32 = 0;\n        outMat.m33 = 1;\n    };\n    /**\n     * to the identity matrix（static版）\n     */\n    Matrix44.identity = function () {\n        return new Matrix44(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    };\n    Matrix44.prototype.isEqual = function (mat, delta) {\n        if (delta === void 0) { delta = Number.EPSILON; }\n        if (Math.abs(mat.v[0] - this.v[0]) < delta &&\n            Math.abs(mat.v[1] - this.v[1]) < delta &&\n            Math.abs(mat.v[2] - this.v[2]) < delta &&\n            Math.abs(mat.v[3] - this.v[3]) < delta &&\n            Math.abs(mat.v[4] - this.v[4]) < delta &&\n            Math.abs(mat.v[5] - this.v[5]) < delta &&\n            Math.abs(mat.v[6] - this.v[6]) < delta &&\n            Math.abs(mat.v[7] - this.v[7]) < delta &&\n            Math.abs(mat.v[8] - this.v[8]) < delta &&\n            Math.abs(mat.v[9] - this.v[9]) < delta &&\n            Math.abs(mat.v[10] - this.v[10]) < delta &&\n            Math.abs(mat.v[11] - this.v[11]) < delta &&\n            Math.abs(mat.v[12] - this.v[12]) < delta &&\n            Math.abs(mat.v[13] - this.v[13]) < delta &&\n            Math.abs(mat.v[14] - this.v[14]) < delta &&\n            Math.abs(mat.v[15] - this.v[15]) < delta) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Matrix44.prototype.getTranslate = function () {\n        return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.m03, this.m13, this.m23);\n    };\n    Matrix44.translate = function (vec) {\n        return new Matrix44(1, 0, 0, vec.x, 0, 1, 0, vec.y, 0, 0, 1, vec.z, 0, 0, 0, 1);\n    };\n    Matrix44.scale = function (vec) {\n        return new Matrix44(vec.x, 0, 0, 0, 0, vec.y, 0, 0, 0, 0, vec.z, 0, 0, 0, 0, 1);\n    };\n    /**\n     * Create X oriented Rotation Matrix\n    */\n    Matrix44.rotateX = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new Matrix44(1, 0, 0, 0, 0, cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1);\n    };\n    /**\n     * Create Y oriented Rotation Matrix\n     */\n    Matrix44.rotateY = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new Matrix44(cos, 0, sin, 0, 0, 1, 0, 0, -sin, 0, cos, 0, 0, 0, 0, 1);\n    };\n    /**\n     * Create Z oriented Rotation Matrix\n     */\n    Matrix44.rotateZ = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new Matrix44(cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    };\n    /**\n     * @return Euler Angles Rotation (x, y, z)\n     */\n    Matrix44.prototype.toEulerAngles = function () {\n        var rotate = null;\n        if (Math.abs(this.m20) != 1.0) {\n            var y = -Math.asin(this.m20);\n            var x = Math.atan2(this.m21 / Math.cos(y), this.m22 / Math.cos(y));\n            var z = Math.atan2(this.m10 / Math.cos(y), this.m00 / Math.cos(y));\n            rotate = new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](x, y, z);\n        }\n        else if (this.m20 === -1.0) {\n            rotate = new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](Math.atan2(this.m01, this.m02), Math.PI / 2.0, 0.0);\n        }\n        else {\n            rotate = new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](Math.atan2(-this.m01, -this.m02), -Math.PI / 2.0, 0.0);\n        }\n        return rotate;\n    };\n    Matrix44.prototype.toEulerAnglesTo = function (outVec3) {\n        if (Math.abs(this.m20) != 1.0) {\n            var y = -Math.asin(this.m20);\n            var x = Math.atan2(this.m21 / Math.cos(y), this.m22 / Math.cos(y));\n            var z = Math.atan2(this.m10 / Math.cos(y), this.m00 / Math.cos(y));\n            outVec3.x = x;\n            outVec3.y = y;\n            outVec3.z = z;\n        }\n        else if (this.m20 === -1.0) {\n            outVec3.x = Math.atan2(this.m01, this.m02);\n            outVec3.y = Math.PI / 2.0;\n            outVec3.z = 0.0;\n        }\n        else {\n            outVec3.x = Math.atan2(-this.m01, -this.m02);\n            outVec3.y = -Math.PI / 2.0;\n            outVec3.z = 0.0;\n        }\n    };\n    Matrix44.zero = function () {\n        return new Matrix44(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    };\n    Matrix44.prototype.flattenAsArray = function () {\n        return [this.v[0], this.v[1], this.v[2], this.v[3],\n            this.v[4], this.v[5], this.v[6], this.v[7],\n            this.v[8], this.v[9], this.v[10], this.v[11],\n            this.v[12], this.v[13], this.v[14], this.v[15]];\n    };\n    /**\n     * transpose(static version)\n     */\n    Matrix44.transpose = function (mat) {\n        var mat_t = new Matrix44(mat.m00, mat.m10, mat.m20, mat.m30, mat.m01, mat.m11, mat.m21, mat.m31, mat.m02, mat.m12, mat.m22, mat.m32, mat.m03, mat.m13, mat.m23, mat.m33);\n        return mat_t;\n    };\n    Matrix44.prototype.multiplyVector = function (vec) {\n        var x = this.m00 * vec.x + this.m01 * vec.y + this.m02 * vec.z + this.m03 * vec.w;\n        var y = this.m10 * vec.x + this.m11 * vec.y + this.m12 * vec.z + this.m13 * vec.w;\n        var z = this.m20 * vec.x + this.m21 * vec.y + this.m22 * vec.z + this.m23 * vec.w;\n        var w = this.m30 * vec.x + this.m31 * vec.y + this.m32 * vec.z + this.m33 * vec.w;\n        return new _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"](x, y, z, w);\n    };\n    Matrix44.prototype.multiplyVector3 = function (vec) {\n        var x = this.m00 * vec.x + this.m01 * vec.y + this.m02 * vec.z + this.m03 * vec.w;\n        var y = this.m10 * vec.x + this.m11 * vec.y + this.m12 * vec.z + this.m13 * vec.w;\n        var z = this.m20 * vec.x + this.m21 * vec.y + this.m22 * vec.z + this.m23 * vec.w;\n        return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](x, y, z);\n    };\n    Matrix44.prototype.multiplyVector3To = function (vec, outVec) {\n        outVec.x = this.m00 * vec.x + this.m01 * vec.y + this.m02 * vec.z + this.m03 * vec.w;\n        outVec.y = this.m10 * vec.x + this.m11 * vec.y + this.m12 * vec.z + this.m13 * vec.w;\n        outVec.z = this.m20 * vec.x + this.m21 * vec.y + this.m22 * vec.z + this.m23 * vec.w;\n    };\n    /**\n     * multiply zero matrix and zero matrix(static version)\n     */\n    Matrix44.multiply = function (l_m, r_m) {\n        var m00 = l_m.m00 * r_m.m00 + l_m.m01 * r_m.m10 + l_m.m02 * r_m.m20 + l_m.m03 * r_m.m30;\n        var m10 = l_m.m10 * r_m.m00 + l_m.m11 * r_m.m10 + l_m.m12 * r_m.m20 + l_m.m13 * r_m.m30;\n        var m20 = l_m.m20 * r_m.m00 + l_m.m21 * r_m.m10 + l_m.m22 * r_m.m20 + l_m.m23 * r_m.m30;\n        var m30 = l_m.m30 * r_m.m00 + l_m.m31 * r_m.m10 + l_m.m32 * r_m.m20 + l_m.m33 * r_m.m30;\n        var m01 = l_m.m00 * r_m.m01 + l_m.m01 * r_m.m11 + l_m.m02 * r_m.m21 + l_m.m03 * r_m.m31;\n        var m11 = l_m.m10 * r_m.m01 + l_m.m11 * r_m.m11 + l_m.m12 * r_m.m21 + l_m.m13 * r_m.m31;\n        var m21 = l_m.m20 * r_m.m01 + l_m.m21 * r_m.m11 + l_m.m22 * r_m.m21 + l_m.m23 * r_m.m31;\n        var m31 = l_m.m30 * r_m.m01 + l_m.m31 * r_m.m11 + l_m.m32 * r_m.m21 + l_m.m33 * r_m.m31;\n        var m02 = l_m.m00 * r_m.m02 + l_m.m01 * r_m.m12 + l_m.m02 * r_m.m22 + l_m.m03 * r_m.m32;\n        var m12 = l_m.m10 * r_m.m02 + l_m.m11 * r_m.m12 + l_m.m12 * r_m.m22 + l_m.m13 * r_m.m32;\n        var m22 = l_m.m20 * r_m.m02 + l_m.m21 * r_m.m12 + l_m.m22 * r_m.m22 + l_m.m23 * r_m.m32;\n        var m32 = l_m.m30 * r_m.m02 + l_m.m31 * r_m.m12 + l_m.m32 * r_m.m22 + l_m.m33 * r_m.m32;\n        var m03 = l_m.m00 * r_m.m03 + l_m.m01 * r_m.m13 + l_m.m02 * r_m.m23 + l_m.m03 * r_m.m33;\n        var m13 = l_m.m10 * r_m.m03 + l_m.m11 * r_m.m13 + l_m.m12 * r_m.m23 + l_m.m13 * r_m.m33;\n        var m23 = l_m.m20 * r_m.m03 + l_m.m21 * r_m.m13 + l_m.m22 * r_m.m23 + l_m.m23 * r_m.m33;\n        var m33 = l_m.m30 * r_m.m03 + l_m.m31 * r_m.m13 + l_m.m32 * r_m.m23 + l_m.m33 * r_m.m33;\n        return new Matrix44(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    };\n    Matrix44.prototype.determinant = function () {\n        return this.m00 * this.m11 * this.m22 * this.m33 + this.m00 * this.m12 * this.m23 * this.m31 + this.m00 * this.m13 * this.m21 * this.m32 +\n            this.m01 * this.m10 * this.m23 * this.m32 + this.m01 * this.m12 * this.m20 * this.m33 + this.m01 * this.m13 * this.m22 * this.m30 +\n            this.m02 * this.m10 * this.m21 * this.m33 + this.m02 * this.m11 * this.m23 * this.m30 + this.m02 * this.m13 * this.m20 * this.m31 +\n            this.m03 * this.m10 * this.m22 * this.m31 + this.m03 * this.m11 * this.m20 * this.m32 + this.m03 * this.m12 * this.m21 * this.m30 -\n            this.m00 * this.m11 * this.m23 * this.m32 - this.m00 * this.m12 * this.m21 * this.m33 - this.m00 * this.m13 * this.m22 * this.m31 -\n            this.m01 * this.m10 * this.m22 * this.m33 - this.m01 * this.m12 * this.m23 * this.m30 - this.m01 * this.m13 * this.m20 * this.m32 -\n            this.m02 * this.m10 * this.m23 * this.m31 - this.m02 * this.m11 * this.m20 * this.m33 - this.m02 * this.m13 * this.m21 * this.m30 -\n            this.m03 * this.m10 * this.m21 * this.m32 - this.m03 * this.m11 * this.m22 * this.m30 - this.m03 * this.m12 * this.m20 * this.m31;\n    };\n    Matrix44.determinant = function (m) {\n        var n00 = m.m00 * m.m11 - m.m01 * m.m10;\n        var n01 = m.m00 * m.m12 - m.m02 * m.m10;\n        var n02 = m.m00 * m.m13 - m.m03 * m.m10;\n        var n03 = m.m01 * m.m12 - m.m02 * m.m11;\n        var n04 = m.m01 * m.m13 - m.m03 * m.m11;\n        var n05 = m.m02 * m.m13 - m.m03 * m.m12;\n        var n06 = m.m20 * m.m31 - m.m21 * m.m30;\n        var n07 = m.m20 * m.m32 - m.m22 * m.m30;\n        var n08 = m.m20 * m.m33 - m.m23 * m.m30;\n        var n09 = m.m21 * m.m32 - m.m22 * m.m31;\n        var n10 = m.m21 * m.m33 - m.m23 * m.m31;\n        var n11 = m.m22 * m.m33 - m.m23 * m.m32;\n        var det = n00 * n11 - n01 * n10 + n02 * n09 + n03 * n08 - n04 * n07 + n05 * n06;\n        return det;\n    };\n    Matrix44.invert = function (m) {\n        var n00 = m.m00 * m.m11 - m.m01 * m.m10;\n        var n01 = m.m00 * m.m12 - m.m02 * m.m10;\n        var n02 = m.m00 * m.m13 - m.m03 * m.m10;\n        var n03 = m.m01 * m.m12 - m.m02 * m.m11;\n        var n04 = m.m01 * m.m13 - m.m03 * m.m11;\n        var n05 = m.m02 * m.m13 - m.m03 * m.m12;\n        var n06 = m.m20 * m.m31 - m.m21 * m.m30;\n        var n07 = m.m20 * m.m32 - m.m22 * m.m30;\n        var n08 = m.m20 * m.m33 - m.m23 * m.m30;\n        var n09 = m.m21 * m.m32 - m.m22 * m.m31;\n        var n10 = m.m21 * m.m33 - m.m23 * m.m31;\n        var n11 = m.m22 * m.m33 - m.m23 * m.m32;\n        var det = n00 * n11 - n01 * n10 + n02 * n09 + n03 * n08 - n04 * n07 + n05 * n06;\n        det = 1.0 / det;\n        var out0 = (m.m11 * n11 - m.m12 * n10 + m.m13 * n09) * det;\n        var out1 = (m.m02 * n10 - m.m01 * n11 - m.m03 * n09) * det;\n        var out2 = (m.m31 * n05 - m.m32 * n04 + m.m33 * n03) * det;\n        var out3 = (m.m22 * n04 - m.m21 * n05 - m.m23 * n03) * det;\n        var out4 = (m.m12 * n08 - m.m10 * n11 - m.m13 * n07) * det;\n        var out5 = (m.m00 * n11 - m.m02 * n08 + m.m03 * n07) * det;\n        var out6 = (m.m32 * n02 - m.m30 * n05 - m.m33 * n01) * det;\n        var out7 = (m.m20 * n05 - m.m22 * n02 + m.m23 * n01) * det;\n        var out8 = (m.m10 * n10 - m.m11 * n08 + m.m13 * n06) * det;\n        var out9 = (m.m01 * n08 - m.m00 * n10 - m.m03 * n06) * det;\n        var out10 = (m.m30 * n04 - m.m31 * n02 + m.m33 * n00) * det;\n        var out11 = (m.m21 * n02 - m.m20 * n04 - m.m23 * n00) * det;\n        var out12 = (m.m11 * n07 - m.m10 * n09 - m.m12 * n06) * det;\n        var out13 = (m.m00 * n09 - m.m01 * n07 + m.m02 * n06) * det;\n        var out14 = (m.m31 * n01 - m.m30 * n03 - m.m32 * n00) * det;\n        var out15 = (m.m20 * n03 - m.m21 * n01 + m.m22 * n00) * det;\n        return new Matrix44(out0, out1, out2, out3, out4, out5, out6, out7, out8, out9, out10, out11, out12, out13, out14, out15, true);\n    };\n    Matrix44.invertTo = function (m, outM) {\n        var n00 = m.m00 * m.m11 - m.m01 * m.m10;\n        var n01 = m.m00 * m.m12 - m.m02 * m.m10;\n        var n02 = m.m00 * m.m13 - m.m03 * m.m10;\n        var n03 = m.m01 * m.m12 - m.m02 * m.m11;\n        var n04 = m.m01 * m.m13 - m.m03 * m.m11;\n        var n05 = m.m02 * m.m13 - m.m03 * m.m12;\n        var n06 = m.m20 * m.m31 - m.m21 * m.m30;\n        var n07 = m.m20 * m.m32 - m.m22 * m.m30;\n        var n08 = m.m20 * m.m33 - m.m23 * m.m30;\n        var n09 = m.m21 * m.m32 - m.m22 * m.m31;\n        var n10 = m.m21 * m.m33 - m.m23 * m.m31;\n        var n11 = m.m22 * m.m33 - m.m23 * m.m32;\n        var det = n00 * n11 - n01 * n10 + n02 * n09 + n03 * n08 - n04 * n07 + n05 * n06;\n        det = 1.0 / det;\n        outM.m00 = (m.m11 * n11 - m.m12 * n10 + m.m13 * n09) * det;\n        outM.m01 = (m.m02 * n10 - m.m01 * n11 - m.m03 * n09) * det;\n        outM.m02 = (m.m31 * n05 - m.m32 * n04 + m.m33 * n03) * det;\n        outM.m03 = (m.m22 * n04 - m.m21 * n05 - m.m23 * n03) * det;\n        outM.m10 = (m.m12 * n08 - m.m10 * n11 - m.m13 * n07) * det;\n        outM.m11 = (m.m00 * n11 - m.m02 * n08 + m.m03 * n07) * det;\n        outM.m12 = (m.m32 * n02 - m.m30 * n05 - m.m33 * n01) * det;\n        outM.m13 = (m.m20 * n05 - m.m22 * n02 + m.m23 * n01) * det;\n        outM.m20 = (m.m10 * n10 - m.m11 * n08 + m.m13 * n06) * det;\n        outM.m21 = (m.m01 * n08 - m.m00 * n10 - m.m03 * n06) * det;\n        outM.m22 = (m.m30 * n04 - m.m31 * n02 + m.m33 * n00) * det;\n        outM.m23 = (m.m21 * n02 - m.m20 * n04 - m.m23 * n00) * det;\n        outM.m30 = (m.m11 * n07 - m.m10 * n09 - m.m12 * n06) * det;\n        outM.m31 = (m.m00 * n09 - m.m01 * n07 + m.m02 * n06) * det;\n        outM.m32 = (m.m31 * n01 - m.m30 * n03 - m.m32 * n00) * det;\n        outM.m33 = (m.m20 * n03 - m.m21 * n01 + m.m22 * n00) * det;\n    };\n    Object.defineProperty(Matrix44.prototype, \"m00\", {\n        get: function () {\n            return this.v[0];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m10\", {\n        get: function () {\n            return this.v[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m20\", {\n        get: function () {\n            return this.v[2];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m30\", {\n        get: function () {\n            return this.v[3];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m01\", {\n        get: function () {\n            return this.v[4];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m11\", {\n        get: function () {\n            return this.v[5];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m21\", {\n        get: function () {\n            return this.v[6];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m31\", {\n        get: function () {\n            return this.v[7];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m02\", {\n        get: function () {\n            return this.v[8];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m12\", {\n        get: function () {\n            return this.v[9];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m22\", {\n        get: function () {\n            return this.v[10];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m32\", {\n        get: function () {\n            return this.v[11];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m03\", {\n        get: function () {\n            return this.v[12];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m13\", {\n        get: function () {\n            return this.v[13];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m23\", {\n        get: function () {\n            return this.v[14];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix44.prototype, \"m33\", {\n        get: function () {\n            return this.v[15];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Matrix44.prototype.toString = function () {\n        return this.m00 + ' ' + this.m01 + ' ' + this.m02 + ' ' + this.m03 + ' \\n' +\n            this.m10 + ' ' + this.m11 + ' ' + this.m12 + ' ' + this.m13 + ' \\n' +\n            this.m20 + ' ' + this.m21 + ' ' + this.m22 + ' ' + this.m23 + ' \\n' +\n            this.m30 + ' ' + this.m31 + ' ' + this.m32 + ' ' + this.m33 + ' \\n';\n    };\n    Matrix44.prototype.nearZeroToZero = function (value) {\n        if (Math.abs(value) < 0.00001) {\n            value = 0;\n        }\n        else if (0.99999 < value && value < 1.00001) {\n            value = 1;\n        }\n        else if (-1.00001 < value && value < -0.99999) {\n            value = -1;\n        }\n        return value;\n    };\n    Matrix44.prototype.toStringApproximately = function () {\n        return this.nearZeroToZero(this.m00) + ' ' + this.nearZeroToZero(this.m01) + ' ' + this.nearZeroToZero(this.m02) + ' ' + this.nearZeroToZero(this.m03) + ' \\n' +\n            this.nearZeroToZero(this.m10) + ' ' + this.nearZeroToZero(this.m11) + ' ' + this.nearZeroToZero(this.m12) + ' ' + this.nearZeroToZero(this.m13) + ' \\n' +\n            this.nearZeroToZero(this.m20) + ' ' + this.nearZeroToZero(this.m21) + ' ' + this.nearZeroToZero(this.m22) + ' ' + this.nearZeroToZero(this.m23) + ' \\n' +\n            this.nearZeroToZero(this.m30) + ' ' + this.nearZeroToZero(this.m31) + ' ' + this.nearZeroToZero(this.m32) + ' ' + this.nearZeroToZero(this.m33) + ' \\n';\n    };\n    Matrix44.prototype.getScale = function () {\n        return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](Math.sqrt(this.m00 * this.m00 + this.m01 * this.m01 + this.m02 * this.m02), Math.sqrt(this.m10 * this.m10 + this.m11 * this.m11 + this.m12 * this.m12), Math.sqrt(this.m20 * this.m20 + this.m21 * this.m21 + this.m22 * this.m22));\n    };\n    Matrix44.prototype.getRotate = function () {\n        var quat = _Quaternion__WEBPACK_IMPORTED_MODULE_1__[\"default\"].fromMatrix(this);\n        var rotateMat = new Matrix44(quat);\n        return rotateMat;\n    };\n    return Matrix44;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (Matrix44);\n\n\n//# sourceURL=webpack:///./src/foundation/math/Matrix44.ts?");

/***/ }),

/***/ "./src/foundation/math/MutableMatrix33.ts":
/*!************************************************!*\
  !*** ./src/foundation/math/MutableMatrix33.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Matrix33__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Matrix33 */ \"./src/foundation/math/Matrix33.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar MutableMatrix33 = /** @class */ (function (_super) {\n    __extends(MutableMatrix33, _super);\n    function MutableMatrix33(m0, m1, m2, m3, m4, m5, m6, m7, m8, isColumnMajor, notCopyFloatArray) {\n        if (isColumnMajor === void 0) { isColumnMajor = false; }\n        if (notCopyFloatArray === void 0) { notCopyFloatArray = false; }\n        return _super.call(this, m0, m1, m2, m3, m4, m5, m6, m7, m8, isColumnMajor) || this;\n    }\n    MutableMatrix33.prototype.setComponents = function (m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n        this.v[0] = m00;\n        this.v[3] = m01;\n        this.v[6] = m02;\n        this.v[1] = m10;\n        this.v[4] = m11;\n        this.v[7] = m12;\n        this.v[2] = m20;\n        this.v[5] = m21;\n        this.v[8] = m22;\n        return this;\n    };\n    MutableMatrix33.prototype.copyComponents = function (mat) {\n        var m = mat;\n        this.m00 = m.m00;\n        this.m01 = m.m01;\n        this.m02 = m.m02;\n        this.m10 = m.m10;\n        this.m11 = m.m11;\n        this.m12 = m.m12;\n        this.m20 = m.m20;\n        this.m21 = m.m21;\n        this.m22 = m.m22;\n    };\n    Object.defineProperty(MutableMatrix33, \"compositionType\", {\n        get: function () {\n            return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Mat3;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MutableMatrix33.dummy = function () {\n        return new MutableMatrix33(null);\n    };\n    MutableMatrix33.prototype.identity = function () {\n        this.setComponents(1, 0, 0, 0, 1, 0, 0, 0, 1);\n        return this;\n    };\n    /**\n     * Create X oriented Rotation Matrix\n     */\n    MutableMatrix33.prototype.rotateX = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return this.setComponents(1, 0, 0, 0, cos, -sin, 0, sin, cos);\n    };\n    /**\n     * Create Y oriented Rotation Matrix\n     */\n    MutableMatrix33.prototype.rotateY = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        this.setComponents(cos, 0, sin, 0, 1, 0, -sin, 0, cos);\n        return this;\n    };\n    /**\n     * Create Z oriented Rotation Matrix\n     */\n    MutableMatrix33.prototype.rotateZ = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return this.setComponents(cos, -sin, 0, sin, cos, 0, 0, 0, 1);\n    };\n    /**\n   * Create X oriented Rotation Matrix\n   */\n    MutableMatrix33.rotateX = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new MutableMatrix33(1, 0, 0, 0, cos, -sin, 0, sin, cos);\n    };\n    /**\n     * Create Y oriented Rotation Matrix\n     */\n    MutableMatrix33.rotateY = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new MutableMatrix33(cos, 0, sin, 0, 1, 0, -sin, 0, cos);\n    };\n    /**\n     * Create Z oriented Rotation Matrix\n     */\n    MutableMatrix33.rotateZ = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new MutableMatrix33(cos, -sin, 0, sin, cos, 0, 0, 0, 1);\n    };\n    MutableMatrix33.prototype.scale = function (vec) {\n        return this.setComponents(vec.x, 0, 0, 0, vec.y, 0, 0, 0, vec.z);\n    };\n    MutableMatrix33.rotateXYZ = function (x, y, z) {\n        return (MutableMatrix33.rotateZ(z).multiply(MutableMatrix33.rotateY(y).multiply(MutableMatrix33.rotateX(x))));\n    };\n    MutableMatrix33.rotate = function (vec3) {\n        return (MutableMatrix33.rotateZ(vec3.z).multiply(MutableMatrix33.rotateY(vec3.y).multiply(MutableMatrix33.rotateX(vec3.x))));\n    };\n    /**\n     * zero matrix\n     */\n    MutableMatrix33.prototype.zero = function () {\n        this.setComponents(0, 0, 0, 0, 0, 0, 0, 0, 0);\n        return this;\n    };\n    MutableMatrix33.prototype.raw = function () {\n        return this.v;\n    };\n    MutableMatrix33.prototype.flattenAsArray = function () {\n        return [this.v[0], this.v[1], this.v[2],\n            this.v[3], this.v[4], this.v[5],\n            this.v[6], this.v[7], this.v[8]];\n    };\n    MutableMatrix33.prototype._swap = function (l, r) {\n        this.v[r] = [this.v[l], this.v[l] = this.v[r]][0]; // Swap\n    };\n    /**\n     * transpose\n     */\n    MutableMatrix33.prototype.transpose = function () {\n        this._swap(1, 3);\n        this._swap(2, 6);\n        this._swap(5, 8);\n        return this;\n    };\n    /**\n     * multiply zero matrix and zero matrix\n     */\n    MutableMatrix33.prototype.multiply = function (mat) {\n        var m00 = this.m00 * mat.m00 + this.m01 * mat.m10 + this.m02 * mat.m20;\n        var m01 = this.m00 * mat.m01 + this.m01 * mat.m11 + this.m02 * mat.m21;\n        var m02 = this.m00 * mat.m02 + this.m01 * mat.m12 + this.m02 * mat.m22;\n        var m10 = this.m10 * mat.m00 + this.m11 * mat.m10 + this.m12 * mat.m20;\n        var m11 = this.m10 * mat.m01 + this.m11 * mat.m11 + this.m12 * mat.m21;\n        var m12 = this.m10 * mat.m02 + this.m11 * mat.m12 + this.m12 * mat.m22;\n        var m20 = this.m20 * mat.m00 + this.m21 * mat.m10 + this.m22 * mat.m20;\n        var m21 = this.m20 * mat.m01 + this.m21 * mat.m11 + this.m22 * mat.m21;\n        var m22 = this.m20 * mat.m02 + this.m21 * mat.m12 + this.m22 * mat.m22;\n        return this.setComponents(m00, m01, m02, m10, m11, m12, m20, m21, m22);\n    };\n    MutableMatrix33.prototype.invert = function () {\n        var det = this.determinant();\n        var m00 = (this.m11 * this.m22 - this.m12 * this.m21) / det;\n        var m01 = (this.m02 * this.m21 - this.m01 * this.m22) / det;\n        var m02 = (this.m01 * this.m12 - this.m02 * this.m11) / det;\n        var m10 = (this.m12 * this.m20 - this.m10 * this.m22) / det;\n        var m11 = (this.m00 * this.m22 - this.m02 * this.m20) / det;\n        var m12 = (this.m02 * this.m10 - this.m00 * this.m12) / det;\n        var m20 = (this.m10 * this.m21 - this.m11 * this.m20) / det;\n        var m21 = (this.m01 * this.m20 - this.m00 * this.m21) / det;\n        var m22 = (this.m00 * this.m11 - this.m01 * this.m10) / det;\n        return this.setComponents(m00, m01, m02, m10, m11, m12, m20, m21, m22);\n    };\n    MutableMatrix33.prototype.addScale = function (vec) {\n        this.m00 *= vec.x;\n        this.m11 *= vec.y;\n        this.m22 *= vec.z;\n        return this;\n    };\n    Object.defineProperty(MutableMatrix33.prototype, \"m00\", {\n        get: function () {\n            return this.v[0];\n        },\n        set: function (val) {\n            this.v[0] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix33.prototype, \"m10\", {\n        get: function () {\n            return this.v[1];\n        },\n        set: function (val) {\n            this.v[1] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix33.prototype, \"m20\", {\n        get: function () {\n            return this.v[2];\n        },\n        set: function (val) {\n            this.v[2] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix33.prototype, \"m01\", {\n        get: function () {\n            return this.v[3];\n        },\n        set: function (val) {\n            this.v[3] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix33.prototype, \"m11\", {\n        get: function () {\n            return this.v[4];\n        },\n        set: function (val) {\n            this.v[4] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix33.prototype, \"m21\", {\n        get: function () {\n            return this.v[5];\n        },\n        set: function (val) {\n            this.v[5] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix33.prototype, \"m02\", {\n        get: function () {\n            return this.v[6];\n        },\n        set: function (val) {\n            this.v[6] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix33.prototype, \"m12\", {\n        get: function () {\n            return this.v[7];\n        },\n        set: function (val) {\n            this.v[7] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix33.prototype, \"m22\", {\n        get: function () {\n            return this.v[8];\n        },\n        set: function (val) {\n            this.v[8] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return MutableMatrix33;\n}(_Matrix33__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (MutableMatrix33);\n\n\n//# sourceURL=webpack:///./src/foundation/math/MutableMatrix33.ts?");

/***/ }),

/***/ "./src/foundation/math/MutableMatrix44.ts":
/*!************************************************!*\
  !*** ./src/foundation/math/MutableMatrix44.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Matrix44__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar FloatArray = Float32Array;\nvar MutableMatrix44 = /** @class */ (function (_super) {\n    __extends(MutableMatrix44, _super);\n    function MutableMatrix44(m0, m1, m2, m3, m4, m5, m6, m7, m8, m9, m10, m11, m12, m13, m14, m15, isColumnMajor, notCopyFloatArray) {\n        if (isColumnMajor === void 0) { isColumnMajor = false; }\n        if (notCopyFloatArray === void 0) { notCopyFloatArray = false; }\n        var _this = this;\n        var _isColumnMajor = (arguments.length >= 16) ? isColumnMajor : m1;\n        var _notCopyFloatArray = (arguments.length >= 16) ? notCopyFloatArray : m2;\n        if (arguments.length >= 16) {\n            _this = _super.call(this, m0, m1, m2, m3, m4, m5, m6, m7, m8, m9, m10, m11, m12, m13, m14, m15, _isColumnMajor, _notCopyFloatArray) || this;\n        }\n        else {\n            _this = _super.call(this, m0, _isColumnMajor, _notCopyFloatArray) || this;\n        }\n        return _this;\n    }\n    MutableMatrix44.prototype.setComponents = function (m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n        this.v[0] = m00;\n        this.v[4] = m01;\n        this.v[8] = m02;\n        this.v[12] = m03;\n        this.v[1] = m10;\n        this.v[5] = m11;\n        this.v[9] = m12;\n        this.v[13] = m13;\n        this.v[2] = m20;\n        this.v[6] = m21;\n        this.v[10] = m22;\n        this.v[14] = m23;\n        this.v[3] = m30;\n        this.v[7] = m31;\n        this.v[11] = m32;\n        this.v[15] = m33;\n        return this;\n    };\n    MutableMatrix44.prototype.copyComponents = function (mat4) {\n        //this.setComponents.apply(this, mat4.m); // 'm' must be row major array if isColumnMajor is false\n        var m = mat4.v;\n        this.v[0] = m[0];\n        this.v[1] = m[1];\n        this.v[2] = m[2];\n        this.v[3] = m[3];\n        this.v[4] = m[4];\n        this.v[5] = m[5];\n        this.v[6] = m[6];\n        this.v[7] = m[7];\n        this.v[8] = m[8];\n        this.v[9] = m[9];\n        this.v[10] = m[10];\n        this.v[11] = m[11];\n        this.v[12] = m[12];\n        this.v[13] = m[13];\n        this.v[14] = m[14];\n        this.v[15] = m[15];\n    };\n    Object.defineProperty(MutableMatrix44, \"compositionType\", {\n        get: function () {\n            return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Mat4;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MutableMatrix44.dummy = function () {\n        return new MutableMatrix44(null);\n    };\n    /**\n     * to the identity matrix（static版）\n     */\n    MutableMatrix44.identity = function () {\n        return new MutableMatrix44(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    };\n    MutableMatrix44.prototype.translate = function (vec) {\n        return this.setComponents(1, 0, 0, vec.x, 0, 1, 0, vec.y, 0, 0, 1, vec.z, 0, 0, 0, 1);\n    };\n    MutableMatrix44.prototype.putTranslate = function (vec) {\n        this.m03 = vec.x;\n        this.m13 = vec.y;\n        this.m23 = vec.z;\n    };\n    MutableMatrix44.prototype.scale = function (vec) {\n        return this.setComponents(vec.x, 0, 0, 0, 0, vec.y, 0, 0, 0, 0, vec.z, 0, 0, 0, 0, 1);\n    };\n    MutableMatrix44.prototype.addScale = function (vec) {\n        this.m00 *= vec.x;\n        this.m11 *= vec.y;\n        this.m22 *= vec.z;\n        return this;\n    };\n    /**\n     * Create X oriented Rotation Matrix\n     */\n    MutableMatrix44.prototype.rotateX = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return this.setComponents(1, 0, 0, 0, 0, cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1);\n    };\n    /**\n     * Create Y oriented Rotation Matrix\n     */\n    MutableMatrix44.prototype.rotateY = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return this.setComponents(cos, 0, sin, 0, 0, 1, 0, 0, -sin, 0, cos, 0, 0, 0, 0, 1);\n    };\n    /**\n   * Create Z oriented Rotation Matrix\n   */\n    MutableMatrix44.prototype.rotateZ = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return this.setComponents(cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    };\n    MutableMatrix44.prototype.rotateXYZ = function (x, y, z) {\n        var cosX = Math.cos(x);\n        var sinX = Math.sin(x);\n        var cosY = Math.cos(y);\n        var sinY = Math.sin(y);\n        var cosZ = Math.cos(z);\n        var sinZ = Math.sin(z);\n        var xm00 = 1;\n        //const xm01 = 0;\n        //const xm02 = 0;\n        //const xm10 = 0;\n        var xm11 = cosX;\n        var xm12 = -sinX;\n        //const xm20 = 0;\n        var xm21 = sinX;\n        var xm22 = cosX;\n        var ym00 = cosY;\n        //const ym01 = 0;\n        var ym02 = sinY;\n        //const ym10 = 0;\n        var ym11 = 1;\n        //const ym12 = 0;\n        var ym20 = -sinY;\n        //const ym21 = 0;\n        var ym22 = cosY;\n        var zm00 = cosZ;\n        var zm01 = -sinZ;\n        //const zm02 = 0;\n        var zm10 = sinZ;\n        var zm11 = cosZ;\n        //const zm12 = 0;\n        //const zm20 = 0;\n        //const zm21 = 0;\n        var zm22 = 1;\n        var yxm00 = ym00 * xm00;\n        var yxm01 = ym02 * xm21;\n        var yxm02 = ym02 * xm22;\n        //const yxm10 = 0;\n        var yxm11 = ym11 * xm11;\n        var yxm12 = ym11 * xm12;\n        var yxm20 = ym20 * xm00;\n        var yxm21 = ym22 * xm21;\n        var yxm22 = ym22 * xm22;\n        this.v[0] = zm00 * yxm00;\n        this.v[4] = zm00 * yxm01 + zm01 * yxm11;\n        this.v[8] = zm00 * yxm02 + zm01 * yxm12;\n        this.v[12] = 0;\n        this.v[1] = zm10 * yxm00;\n        this.v[5] = zm10 * yxm01 + zm11 * yxm11;\n        this.v[9] = zm10 * yxm02 + zm11 * yxm12;\n        this.v[13] = 0;\n        this.v[2] = zm22 * yxm20;\n        this.v[6] = zm22 * yxm21;\n        this.v[10] = zm22 * yxm22;\n        this.v[14] = 0;\n        this.v[3] = 0;\n        this.v[7] = 0;\n        this.v[11] = 0;\n        this.v[15] = 1;\n        return this;\n    };\n    /**\n     * to the identity matrix\n     */\n    MutableMatrix44.prototype.identity = function () {\n        this.setComponents(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n        return this;\n    };\n    MutableMatrix44.prototype._swap = function (l, r) {\n        this.v[r] = [this.v[l], this.v[l] = this.v[r]][0]; // Swap\n    };\n    /**\n     * transpose\n     */\n    MutableMatrix44.prototype.transpose = function () {\n        this._swap(1, 4);\n        this._swap(2, 8);\n        this._swap(3, 12);\n        this._swap(6, 9);\n        this._swap(7, 13);\n        this._swap(11, 14);\n        return this;\n    };\n    /**\n   * multiply zero matrix and zero matrix\n   */\n    MutableMatrix44.prototype.multiply = function (mat) {\n        var m00 = this.m00 * mat.m00 + this.m01 * mat.m10 + this.m02 * mat.m20 + this.m03 * mat.m30;\n        var m01 = this.m00 * mat.m01 + this.m01 * mat.m11 + this.m02 * mat.m21 + this.m03 * mat.m31;\n        var m02 = this.m00 * mat.m02 + this.m01 * mat.m12 + this.m02 * mat.m22 + this.m03 * mat.m32;\n        var m03 = this.m00 * mat.m03 + this.m01 * mat.m13 + this.m02 * mat.m23 + this.m03 * mat.m33;\n        var m10 = this.m10 * mat.m00 + this.m11 * mat.m10 + this.m12 * mat.m20 + this.m13 * mat.m30;\n        var m11 = this.m10 * mat.m01 + this.m11 * mat.m11 + this.m12 * mat.m21 + this.m13 * mat.m31;\n        var m12 = this.m10 * mat.m02 + this.m11 * mat.m12 + this.m12 * mat.m22 + this.m13 * mat.m32;\n        var m13 = this.m10 * mat.m03 + this.m11 * mat.m13 + this.m12 * mat.m23 + this.m13 * mat.m33;\n        var m20 = this.m20 * mat.m00 + this.m21 * mat.m10 + this.m22 * mat.m20 + this.m23 * mat.m30;\n        var m21 = this.m20 * mat.m01 + this.m21 * mat.m11 + this.m22 * mat.m21 + this.m23 * mat.m31;\n        var m22 = this.m20 * mat.m02 + this.m21 * mat.m12 + this.m22 * mat.m22 + this.m23 * mat.m32;\n        var m23 = this.m20 * mat.m03 + this.m21 * mat.m13 + this.m22 * mat.m23 + this.m23 * mat.m33;\n        var m30 = this.m30 * mat.m00 + this.m31 * mat.m10 + this.m32 * mat.m20 + this.m33 * mat.m30;\n        var m31 = this.m30 * mat.m01 + this.m31 * mat.m11 + this.m32 * mat.m21 + this.m33 * mat.m31;\n        var m32 = this.m30 * mat.m02 + this.m31 * mat.m12 + this.m32 * mat.m22 + this.m33 * mat.m32;\n        var m33 = this.m30 * mat.m03 + this.m31 * mat.m13 + this.m32 * mat.m23 + this.m33 * mat.m33;\n        return this.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    };\n    MutableMatrix44.prototype.multiplyByLeft = function (mat) {\n        var m00 = mat.m00 * this.m00 + mat.m01 * this.m10 + mat.m02 * this.m20 + mat.m03 * this.m30;\n        var m01 = mat.m00 * this.m01 + mat.m01 * this.m11 + mat.m02 * this.m21 + mat.m03 * this.m31;\n        var m02 = mat.m00 * this.m02 + mat.m01 * this.m12 + mat.m02 * this.m22 + mat.m03 * this.m32;\n        var m03 = mat.m00 * this.m03 + mat.m01 * this.m13 + mat.m02 * this.m23 + mat.m03 * this.m33;\n        var m10 = mat.m10 * this.m00 + mat.m11 * this.m10 + mat.m12 * this.m20 + mat.m13 * this.m30;\n        var m11 = mat.m10 * this.m01 + mat.m11 * this.m11 + mat.m12 * this.m21 + mat.m13 * this.m31;\n        var m12 = mat.m10 * this.m02 + mat.m11 * this.m12 + mat.m12 * this.m22 + mat.m13 * this.m32;\n        var m13 = mat.m10 * this.m03 + mat.m11 * this.m13 + mat.m12 * this.m23 + mat.m13 * this.m33;\n        var m20 = mat.m20 * this.m00 + mat.m21 * this.m10 + mat.m22 * this.m20 + mat.m23 * this.m30;\n        var m21 = mat.m20 * this.m01 + mat.m21 * this.m11 + mat.m22 * this.m21 + mat.m23 * this.m31;\n        var m22 = mat.m20 * this.m02 + mat.m21 * this.m12 + mat.m22 * this.m22 + mat.m23 * this.m32;\n        var m23 = mat.m20 * this.m03 + mat.m21 * this.m13 + mat.m22 * this.m23 + mat.m23 * this.m33;\n        var m30 = mat.m30 * this.m00 + mat.m31 * this.m10 + mat.m32 * this.m20 + mat.m33 * this.m30;\n        var m31 = mat.m30 * this.m01 + mat.m31 * this.m11 + mat.m32 * this.m21 + mat.m33 * this.m31;\n        var m32 = mat.m30 * this.m02 + mat.m31 * this.m12 + mat.m32 * this.m22 + mat.m33 * this.m32;\n        var m33 = mat.m30 * this.m03 + mat.m31 * this.m13 + mat.m32 * this.m23 + mat.m33 * this.m33;\n        return this.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    };\n    MutableMatrix44.prototype.invert = function () {\n        var det = this.determinant();\n        var m00 = (this.m11 * this.m22 * this.m33 + this.m12 * this.m23 * this.m31 + this.m13 * this.m21 * this.m32 - this.m11 * this.m23 * this.m32 - this.m12 * this.m21 * this.m33 - this.m13 * this.m22 * this.m31) / det;\n        var m01 = (this.m01 * this.m23 * this.m32 + this.m02 * this.m21 * this.m33 + this.m03 * this.m22 * this.m31 - this.m01 * this.m22 * this.m33 - this.m02 * this.m23 * this.m31 - this.m03 * this.m21 * this.m32) / det;\n        var m02 = (this.m01 * this.m12 * this.m33 + this.m02 * this.m13 * this.m31 + this.m03 * this.m11 * this.m32 - this.m01 * this.m13 * this.m32 - this.m02 * this.m11 * this.m33 - this.m03 * this.m12 * this.m31) / det;\n        var m03 = (this.m01 * this.m13 * this.m22 + this.m02 * this.m11 * this.m23 + this.m03 * this.m12 * this.m21 - this.m01 * this.m12 * this.m23 - this.m02 * this.m13 * this.m21 - this.m03 * this.m11 * this.m22) / det;\n        var m10 = (this.m10 * this.m23 * this.m32 + this.m12 * this.m20 * this.m33 + this.m13 * this.m22 * this.m30 - this.m10 * this.m22 * this.m33 - this.m12 * this.m23 * this.m30 - this.m13 * this.m20 * this.m32) / det;\n        var m11 = (this.m00 * this.m22 * this.m33 + this.m02 * this.m23 * this.m30 + this.m03 * this.m20 * this.m32 - this.m00 * this.m23 * this.m32 - this.m02 * this.m20 * this.m33 - this.m03 * this.m22 * this.m30) / det;\n        var m12 = (this.m00 * this.m13 * this.m32 + this.m02 * this.m10 * this.m33 + this.m03 * this.m12 * this.m30 - this.m00 * this.m12 * this.m33 - this.m02 * this.m13 * this.m30 - this.m03 * this.m10 * this.m32) / det;\n        var m13 = (this.m00 * this.m12 * this.m23 + this.m02 * this.m13 * this.m20 + this.m03 * this.m10 * this.m22 - this.m00 * this.m13 * this.m22 - this.m02 * this.m10 * this.m23 - this.m03 * this.m12 * this.m20) / det;\n        var m20 = (this.m10 * this.m21 * this.m33 + this.m11 * this.m23 * this.m30 + this.m13 * this.m20 * this.m31 - this.m10 * this.m23 * this.m31 - this.m11 * this.m20 * this.m33 - this.m13 * this.m21 * this.m30) / det;\n        var m21 = (this.m00 * this.m23 * this.m31 + this.m01 * this.m20 * this.m33 + this.m03 * this.m21 * this.m30 - this.m00 * this.m21 * this.m33 - this.m01 * this.m23 * this.m30 - this.m03 * this.m20 * this.m31) / det;\n        var m22 = (this.m00 * this.m11 * this.m33 + this.m01 * this.m13 * this.m30 + this.m03 * this.m10 * this.m31 - this.m00 * this.m13 * this.m31 - this.m01 * this.m10 * this.m33 - this.m03 * this.m11 * this.m30) / det;\n        var m23 = (this.m00 * this.m13 * this.m21 + this.m01 * this.m10 * this.m23 + this.m03 * this.m11 * this.m20 - this.m00 * this.m11 * this.m23 - this.m01 * this.m13 * this.m20 - this.m03 * this.m10 * this.m21) / det;\n        var m30 = (this.m10 * this.m22 * this.m31 + this.m11 * this.m20 * this.m32 + this.m12 * this.m21 * this.m30 - this.m10 * this.m21 * this.m32 - this.m11 * this.m22 * this.m30 - this.m12 * this.m20 * this.m31) / det;\n        var m31 = (this.m00 * this.m21 * this.m32 + this.m01 * this.m22 * this.m30 + this.m02 * this.m20 * this.m31 - this.m00 * this.m22 * this.m31 - this.m01 * this.m20 * this.m32 - this.m02 * this.m21 * this.m30) / det;\n        var m32 = (this.m00 * this.m12 * this.m31 + this.m01 * this.m10 * this.m32 + this.m02 * this.m11 * this.m30 - this.m00 * this.m11 * this.m32 - this.m01 * this.m12 * this.m30 - this.m02 * this.m10 * this.m31) / det;\n        var m33 = (this.m00 * this.m11 * this.m22 + this.m01 * this.m12 * this.m20 + this.m02 * this.m10 * this.m21 - this.m00 * this.m12 * this.m21 - this.m01 * this.m10 * this.m22 - this.m02 * this.m11 * this.m20) / det;\n        return this.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    };\n    /**\n     * multiply zero matrix and zero matrix(static version)\n     */\n    MutableMatrix44.multiply = function (l_m, r_m) {\n        var m00 = l_m.m00 * r_m.m00 + l_m.m01 * r_m.m10 + l_m.m02 * r_m.m20 + l_m.m03 * r_m.m30;\n        var m10 = l_m.m10 * r_m.m00 + l_m.m11 * r_m.m10 + l_m.m12 * r_m.m20 + l_m.m13 * r_m.m30;\n        var m20 = l_m.m20 * r_m.m00 + l_m.m21 * r_m.m10 + l_m.m22 * r_m.m20 + l_m.m23 * r_m.m30;\n        var m30 = l_m.m30 * r_m.m00 + l_m.m31 * r_m.m10 + l_m.m32 * r_m.m20 + l_m.m33 * r_m.m30;\n        var m01 = l_m.m00 * r_m.m01 + l_m.m01 * r_m.m11 + l_m.m02 * r_m.m21 + l_m.m03 * r_m.m31;\n        var m11 = l_m.m10 * r_m.m01 + l_m.m11 * r_m.m11 + l_m.m12 * r_m.m21 + l_m.m13 * r_m.m31;\n        var m21 = l_m.m20 * r_m.m01 + l_m.m21 * r_m.m11 + l_m.m22 * r_m.m21 + l_m.m23 * r_m.m31;\n        var m31 = l_m.m30 * r_m.m01 + l_m.m31 * r_m.m11 + l_m.m32 * r_m.m21 + l_m.m33 * r_m.m31;\n        var m02 = l_m.m00 * r_m.m02 + l_m.m01 * r_m.m12 + l_m.m02 * r_m.m22 + l_m.m03 * r_m.m32;\n        var m12 = l_m.m10 * r_m.m02 + l_m.m11 * r_m.m12 + l_m.m12 * r_m.m22 + l_m.m13 * r_m.m32;\n        var m22 = l_m.m20 * r_m.m02 + l_m.m21 * r_m.m12 + l_m.m22 * r_m.m22 + l_m.m23 * r_m.m32;\n        var m32 = l_m.m30 * r_m.m02 + l_m.m31 * r_m.m12 + l_m.m32 * r_m.m22 + l_m.m33 * r_m.m32;\n        var m03 = l_m.m00 * r_m.m03 + l_m.m01 * r_m.m13 + l_m.m02 * r_m.m23 + l_m.m03 * r_m.m33;\n        var m13 = l_m.m10 * r_m.m03 + l_m.m11 * r_m.m13 + l_m.m12 * r_m.m23 + l_m.m13 * r_m.m33;\n        var m23 = l_m.m20 * r_m.m03 + l_m.m21 * r_m.m13 + l_m.m22 * r_m.m23 + l_m.m23 * r_m.m33;\n        var m33 = l_m.m30 * r_m.m03 + l_m.m31 * r_m.m13 + l_m.m32 * r_m.m23 + l_m.m33 * r_m.m33;\n        return new MutableMatrix44(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    };\n    /**\n     * zero matrix\n     */\n    MutableMatrix44.prototype.zero = function () {\n        this.setComponents(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n        return this;\n    };\n    Object.defineProperty(MutableMatrix44.prototype, \"m00\", {\n        get: function () {\n            return this.v[0];\n        },\n        set: function (val) {\n            this.v[0] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m10\", {\n        get: function () {\n            return this.v[1];\n        },\n        set: function (val) {\n            this.v[1] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m20\", {\n        get: function () {\n            return this.v[2];\n        },\n        set: function (val) {\n            this.v[2] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m30\", {\n        get: function () {\n            return this.v[3];\n        },\n        set: function (val) {\n            this.v[3] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m01\", {\n        get: function () {\n            return this.v[4];\n        },\n        set: function (val) {\n            this.v[4] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m11\", {\n        get: function () {\n            return this.v[5];\n        },\n        set: function (val) {\n            this.v[5] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m21\", {\n        get: function () {\n            return this.v[6];\n        },\n        set: function (val) {\n            this.v[6] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m31\", {\n        get: function () {\n            return this.v[7];\n        },\n        set: function (val) {\n            this.v[7] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m02\", {\n        get: function () {\n            return this.v[8];\n        },\n        set: function (val) {\n            this.v[8] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m12\", {\n        get: function () {\n            return this.v[9];\n        },\n        set: function (val) {\n            this.v[9] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m22\", {\n        get: function () {\n            return this.v[10];\n        },\n        set: function (val) {\n            this.v[10] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m32\", {\n        get: function () {\n            return this.v[11];\n        },\n        set: function (val) {\n            this.v[11] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m03\", {\n        get: function () {\n            return this.v[12];\n        },\n        set: function (val) {\n            this.v[12] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m13\", {\n        get: function () {\n            return this.v[13];\n        },\n        set: function (val) {\n            this.v[13] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m23\", {\n        get: function () {\n            return this.v[14];\n        },\n        set: function (val) {\n            this.v[14] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableMatrix44.prototype, \"m33\", {\n        get: function () {\n            return this.v[15];\n        },\n        set: function (val) {\n            this.v[15] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return MutableMatrix44;\n}(_Matrix44__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (MutableMatrix44);\n\n\n//# sourceURL=webpack:///./src/foundation/math/MutableMatrix44.ts?");

/***/ }),

/***/ "./src/foundation/math/MutableQuaterion.ts":
/*!*************************************************!*\
  !*** ./src/foundation/math/MutableQuaterion.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _Quaternion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar MutableQuaternion = /** @class */ (function (_super) {\n    __extends(MutableQuaternion, _super);\n    function MutableQuaternion(x, y, z, w) {\n        return _super.call(this, x, y, z, w) || this;\n    }\n    MutableQuaternion.dummy = function () {\n        return new MutableQuaternion(null);\n    };\n    MutableQuaternion.prototype.clone = function () {\n        return new MutableQuaternion(this.x, this.y, this.z, this.w);\n    };\n    MutableQuaternion.prototype.axisAngle = function (axisVec3, radian) {\n        var halfAngle = 0.5 * radian;\n        var sin = Math.sin(halfAngle);\n        var axis = _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(axisVec3);\n        this.w = Math.cos(halfAngle);\n        this.x = sin * axis.x;\n        this.y = sin * axis.y;\n        this.z = sin * axis.z;\n        return this;\n    };\n    MutableQuaternion.prototype.add = function (q) {\n        this.x += q.x;\n        this.y += q.y;\n        this.z += q.z;\n        this.w += q.w;\n        return this;\n    };\n    MutableQuaternion.prototype.multiply = function (q) {\n        var result = new _Quaternion__WEBPACK_IMPORTED_MODULE_1__[\"default\"](0, 0, 0, 1);\n        result.v[0] = q.w * this.x + q.z * this.y + q.y * this.z - q.x * this.w;\n        result.v[1] = -q.z * this.x + q.w * this.y + q.x * this.z - q.y * this.w;\n        result.v[2] = q.y * this.x + q.x * this.y + q.w * this.z - q.z * this.w;\n        result.v[3] = -q.x * this.x - q.y * this.y - q.z * this.z - q.w * this.w;\n        this.x = result.x;\n        this.y = result.y;\n        this.z = result.z;\n        this.w = result.w;\n        return this;\n    };\n    MutableQuaternion.prototype.fromMatrix = function (m) {\n        var tr = m.m00 + m.m11 + m.m22;\n        if (tr > 0) {\n            var S = 0.5 / Math.sqrt(tr + 1.0);\n            this.v[0] = (m.m21 - m.m12) * S;\n            this.v[1] = (m.m02 - m.m20) * S;\n            this.v[2] = (m.m10 - m.m01) * S;\n            this.v[3] = 0.25 / S;\n        }\n        else if ((m.m00 > m.m11) && (m.m00 > m.m22)) {\n            var S = Math.sqrt(1.0 + m.m00 - m.m11 - m.m22) * 2;\n            this.v[0] = 0.25 * S;\n            this.v[1] = (m.m01 + m.m10) / S;\n            this.v[2] = (m.m02 + m.m20) / S;\n            this.v[3] = (m.m21 - m.m12) / S;\n        }\n        else if (m.m11 > m.m22) {\n            var S = Math.sqrt(1.0 + m.m11 - m.m00 - m.m22) * 2;\n            this.v[0] = (m.m01 + m.m10) / S;\n            this.v[1] = 0.25 * S;\n            this.v[2] = (m.m12 + m.m21) / S;\n            this.v[3] = (m.m02 - m.m20) / S;\n        }\n        else {\n            var S = Math.sqrt(1.0 + m.m22 - m.m00 - m.m11) * 2;\n            this.v[0] = (m.m02 + m.m20) / S;\n            this.v[1] = (m.m12 + m.m21) / S;\n            this.v[2] = 0.25 * S;\n            this.v[3] = (m.m10 - m.m01) / S;\n        }\n        return this;\n    };\n    Object.defineProperty(MutableQuaternion, \"compositionType\", {\n        get: function () {\n            return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec4;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MutableQuaternion.prototype.setAt = function (i, val) {\n        switch (i % 4) {\n            case 0:\n                this.x = val;\n                break;\n            case 1:\n                this.y = val;\n                break;\n            case 2:\n                this.z = val;\n                break;\n            case 3:\n                this.w = val;\n                break;\n        }\n    };\n    MutableQuaternion.prototype.normalize = function () {\n        var norm = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n        this.x /= norm;\n        this.y /= norm;\n        this.z /= norm;\n        this.w /= norm;\n        return this;\n    };\n    MutableQuaternion.prototype.identity = function () {\n        this.x = 0;\n        this.y = 0;\n        this.x = 0;\n        this.w = 1;\n    };\n    MutableQuaternion.fromMatrix = function (m) {\n        var q = new MutableQuaternion(0, 0, 0, 1);\n        var tr = m.m00 + m.m11 + m.m22;\n        if (tr > 0) {\n            var S = 0.5 / Math.sqrt(tr + 1.0);\n            q.v[3] = 0.25 / S;\n            q.v[0] = (m.m21 - m.m12) * S;\n            q.v[1] = (m.m02 - m.m20) * S;\n            q.v[2] = (m.m10 - m.m01) * S;\n        }\n        else if ((m.m00 > m.m11) && (m.m00 > m.m22)) {\n            var S = Math.sqrt(1.0 + m.m00 - m.m11 - m.m22) * 2;\n            q.v[3] = (m.m21 - m.m12) / S;\n            q.v[0] = 0.25 * S;\n            q.v[1] = (m.m01 + m.m10) / S;\n            q.v[2] = (m.m02 + m.m20) / S;\n        }\n        else if (m.m11 > m.m22) {\n            var S = Math.sqrt(1.0 + m.m11 - m.m00 - m.m22) * 2;\n            q.v[3] = (m.m02 - m.m20) / S;\n            q.v[0] = (m.m01 + m.m10) / S;\n            q.v[1] = 0.25 * S;\n            q.v[2] = (m.m12 + m.m21) / S;\n        }\n        else {\n            var S = Math.sqrt(1.0 + m.m22 - m.m00 - m.m11) * 2;\n            q.v[3] = (m.m10 - m.m01) / S;\n            q.v[0] = (m.m02 + m.m20) / S;\n            q.v[1] = (m.m12 + m.m21) / S;\n            q.v[2] = 0.25 * S;\n        }\n        return q;\n    };\n    Object.defineProperty(MutableQuaternion.prototype, \"x\", {\n        get: function () {\n            return this.v[0];\n        },\n        set: function (x) {\n            this.v[0] = x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableQuaternion.prototype, \"y\", {\n        get: function () {\n            return this.v[1];\n        },\n        set: function (y) {\n            this.v[1] = y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableQuaternion.prototype, \"z\", {\n        get: function () {\n            return this.v[2];\n        },\n        set: function (z) {\n            this.v[2] = z;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableQuaternion.prototype, \"w\", {\n        get: function () {\n            return this.v[3];\n        },\n        set: function (w) {\n            this.v[3] = w;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableQuaternion.prototype, \"raw\", {\n        get: function () {\n            return this.v;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return MutableQuaternion;\n}(_Quaternion__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (MutableQuaternion);\n\n\n//# sourceURL=webpack:///./src/foundation/math/MutableQuaterion.ts?");

/***/ }),

/***/ "./src/foundation/math/MutableRowMajarMatrix44.ts":
/*!********************************************************!*\
  !*** ./src/foundation/math/MutableRowMajarMatrix44.ts ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _RowMajarMatrix44__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RowMajarMatrix44 */ \"./src/foundation/math/RowMajarMatrix44.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar FloatArray = Float32Array;\nvar MutableRowMajarMatrix44 = /** @class */ (function (_super) {\n    __extends(MutableRowMajarMatrix44, _super);\n    function MutableRowMajarMatrix44(m0, m1, m2, m3, m4, m5, m6, m7, m8, m9, m10, m11, m12, m13, m14, m15, notCopyFloatArray) {\n        if (notCopyFloatArray === void 0) { notCopyFloatArray = false; }\n        var _this = this;\n        var _notCopyFloatArray = (arguments.length >= 16) ? notCopyFloatArray : m1;\n        if (arguments.length >= 16) {\n            _this = _super.call(this, m0, m1, m2, m3, m4, m5, m6, m7, m8, m9, m10, m11, m12, m13, m14, m15, _notCopyFloatArray) || this;\n        }\n        else {\n            _this = _super.call(this, m0, _notCopyFloatArray) || this;\n        }\n        return _this;\n    }\n    Object.defineProperty(MutableRowMajarMatrix44, \"compositionType\", {\n        get: function () {\n            return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Mat4;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MutableRowMajarMatrix44.dummy = function () {\n        return new MutableRowMajarMatrix44(null);\n    };\n    MutableRowMajarMatrix44.prototype.setComponents = function (m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n        this.v[0] = m00;\n        this.v[4] = m10;\n        this.v[8] = m20;\n        this.v[12] = m30;\n        this.v[1] = m01;\n        this.v[5] = m11;\n        this.v[9] = m21;\n        this.v[13] = m31;\n        this.v[2] = m02;\n        this.v[6] = m12;\n        this.v[10] = m22;\n        this.v[14] = m32;\n        this.v[3] = m03;\n        this.v[7] = m13;\n        this.v[11] = m23;\n        this.v[15] = m33;\n        return this;\n    };\n    MutableRowMajarMatrix44.prototype.copyComponents = function (mat4) {\n        //this.setComponents.apply(this, mat4.m); // 'm' must be row major array if isColumnMajor is false\n        var m = mat4;\n        this.m00 = m.m00;\n        this.m01 = m.m01;\n        this.m02 = m.m02;\n        this.m03 = m.m03;\n        this.m10 = m.m10;\n        this.m11 = m.m11;\n        this.m12 = m.m12;\n        this.m13 = m.m13;\n        this.m20 = m.m20;\n        this.m21 = m.m21;\n        this.m22 = m.m22;\n        this.m23 = m.m23;\n        this.m30 = m.m30;\n        this.m31 = m.m31;\n        this.m32 = m.m32;\n        this.m33 = m.m33;\n    };\n    /**\n     * to the identity matrix\n     */\n    MutableRowMajarMatrix44.prototype.identity = function () {\n        this.setComponents(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n        return this;\n    };\n    MutableRowMajarMatrix44.prototype.translate = function (vec) {\n        return this.setComponents(1, 0, 0, vec.x, 0, 1, 0, vec.y, 0, 0, 1, vec.z, 0, 0, 0, 1);\n    };\n    MutableRowMajarMatrix44.prototype.putTranslate = function (vec) {\n        this.m03 = vec.x;\n        this.m13 = vec.y;\n        this.m23 = vec.z;\n    };\n    MutableRowMajarMatrix44.prototype.scale = function (vec) {\n        return this.setComponents(vec.x, 0, 0, 0, 0, vec.y, 0, 0, 0, 0, vec.z, 0, 0, 0, 0, 1);\n    };\n    MutableRowMajarMatrix44.prototype.addScale = function (vec) {\n        this.m00 *= vec.x;\n        this.m11 *= vec.y;\n        this.m22 *= vec.z;\n        return this;\n    };\n    /**\n     * Create X oriented Rotation Matrix\n     */\n    MutableRowMajarMatrix44.prototype.rotateX = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return this.setComponents(1, 0, 0, 0, 0, cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1);\n    };\n    /**\n   * Create Y oriented Rotation Matrix\n   */\n    MutableRowMajarMatrix44.prototype.rotateY = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return this.setComponents(cos, 0, sin, 0, 0, 1, 0, 0, -sin, 0, cos, 0, 0, 0, 0, 1);\n    };\n    /**\n     * Create Z oriented Rotation Matrix\n     */\n    MutableRowMajarMatrix44.prototype.rotateZ = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return this.setComponents(cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    };\n    MutableRowMajarMatrix44.prototype.rotateXYZ = function (x, y, z) {\n        var cosX = Math.cos(x);\n        var sinX = Math.sin(x);\n        var cosY = Math.cos(y);\n        var sinY = Math.sin(y);\n        var cosZ = Math.cos(z);\n        var sinZ = Math.sin(z);\n        var xm00 = 1;\n        //const xm01 = 0;\n        //const xm02 = 0;\n        //const xm10 = 0;\n        var xm11 = cosX;\n        var xm12 = -sinX;\n        //const xm20 = 0;\n        var xm21 = sinX;\n        var xm22 = cosX;\n        var ym00 = cosY;\n        //const ym01 = 0;\n        var ym02 = sinY;\n        //const ym10 = 0;\n        var ym11 = 1;\n        //const ym12 = 0;\n        var ym20 = -sinY;\n        //const ym21 = 0;\n        var ym22 = cosY;\n        var zm00 = cosZ;\n        var zm01 = -sinZ;\n        //const zm02 = 0;\n        var zm10 = sinZ;\n        var zm11 = cosZ;\n        //const zm12 = 0;\n        //const zm20 = 0;\n        //const zm21 = 0;\n        var zm22 = 1;\n        var yxm00 = ym00 * xm00;\n        var yxm01 = ym02 * xm21;\n        var yxm02 = ym02 * xm22;\n        //const yxm10 = 0;\n        var yxm11 = ym11 * xm11;\n        var yxm12 = ym11 * xm12;\n        var yxm20 = ym20 * xm00;\n        var yxm21 = ym22 * xm21;\n        var yxm22 = ym22 * xm22;\n        this.v[0] = zm00 * yxm00;\n        this.v[1] = zm00 * yxm01 + zm01 * yxm11;\n        this.v[2] = zm00 * yxm02 + zm01 * yxm12;\n        this.v[3] = 0;\n        this.v[4] = zm10 * yxm00;\n        this.v[5] = zm10 * yxm01 + zm11 * yxm11;\n        this.v[6] = zm10 * yxm02 + zm11 * yxm12;\n        this.v[7] = 0;\n        this.v[8] = zm22 * yxm20;\n        this.v[9] = zm22 * yxm21;\n        this.v[10] = zm22 * yxm22;\n        this.v[11] = 0;\n        this.v[12] = 0;\n        this.v[13] = 0;\n        this.v[14] = 0;\n        this.v[15] = 1;\n        return this;\n        //return new RowMajarMatrix44(Matrix33.rotateXYZ(x, y, z));\n    };\n    /**\n     * Zero Matrix\n     */\n    MutableRowMajarMatrix44.prototype.zero = function () {\n        this.setComponents(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n        return this;\n    };\n    MutableRowMajarMatrix44.prototype._swap = function (l, r) {\n        this.v[r] = [this.v[l], this.v[l] = this.v[r]][0]; // Swap\n    };\n    /**\n     * transpose\n     */\n    MutableRowMajarMatrix44.prototype.transpose = function () {\n        this._swap(1, 4);\n        this._swap(2, 8);\n        this._swap(3, 12);\n        this._swap(6, 9);\n        this._swap(7, 13);\n        this._swap(11, 14);\n        return this;\n    };\n    /**\n     * multiply zero matrix and zero matrix\n     */\n    MutableRowMajarMatrix44.prototype.multiply = function (mat) {\n        var m00 = this.m00 * mat.m00 + this.m01 * mat.m10 + this.m02 * mat.m20 + this.m03 * mat.m30;\n        var m01 = this.m00 * mat.m01 + this.m01 * mat.m11 + this.m02 * mat.m21 + this.m03 * mat.m31;\n        var m02 = this.m00 * mat.m02 + this.m01 * mat.m12 + this.m02 * mat.m22 + this.m03 * mat.m32;\n        var m03 = this.m00 * mat.m03 + this.m01 * mat.m13 + this.m02 * mat.m23 + this.m03 * mat.m33;\n        var m10 = this.m10 * mat.m00 + this.m11 * mat.m10 + this.m12 * mat.m20 + this.m13 * mat.m30;\n        var m11 = this.m10 * mat.m01 + this.m11 * mat.m11 + this.m12 * mat.m21 + this.m13 * mat.m31;\n        var m12 = this.m10 * mat.m02 + this.m11 * mat.m12 + this.m12 * mat.m22 + this.m13 * mat.m32;\n        var m13 = this.m10 * mat.m03 + this.m11 * mat.m13 + this.m12 * mat.m23 + this.m13 * mat.m33;\n        var m20 = this.m20 * mat.m00 + this.m21 * mat.m10 + this.m22 * mat.m20 + this.m23 * mat.m30;\n        var m21 = this.m20 * mat.m01 + this.m21 * mat.m11 + this.m22 * mat.m21 + this.m23 * mat.m31;\n        var m22 = this.m20 * mat.m02 + this.m21 * mat.m12 + this.m22 * mat.m22 + this.m23 * mat.m32;\n        var m23 = this.m20 * mat.m03 + this.m21 * mat.m13 + this.m22 * mat.m23 + this.m23 * mat.m33;\n        var m30 = this.m30 * mat.m00 + this.m31 * mat.m10 + this.m32 * mat.m20 + this.m33 * mat.m30;\n        var m31 = this.m30 * mat.m01 + this.m31 * mat.m11 + this.m32 * mat.m21 + this.m33 * mat.m31;\n        var m32 = this.m30 * mat.m02 + this.m31 * mat.m12 + this.m32 * mat.m22 + this.m33 * mat.m32;\n        var m33 = this.m30 * mat.m03 + this.m31 * mat.m13 + this.m32 * mat.m23 + this.m33 * mat.m33;\n        return this.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    };\n    MutableRowMajarMatrix44.prototype.multiplyByLeft = function (mat) {\n        var m00 = mat.m00 * this.m00 + mat.m01 * this.m10 + mat.m02 * this.m20 + mat.m03 * this.m30;\n        var m01 = mat.m00 * this.m01 + mat.m01 * this.m11 + mat.m02 * this.m21 + mat.m03 * this.m31;\n        var m02 = mat.m00 * this.m02 + mat.m01 * this.m12 + mat.m02 * this.m22 + mat.m03 * this.m32;\n        var m03 = mat.m00 * this.m03 + mat.m01 * this.m13 + mat.m02 * this.m23 + mat.m03 * this.m33;\n        var m10 = mat.m10 * this.m00 + mat.m11 * this.m10 + mat.m12 * this.m20 + mat.m13 * this.m30;\n        var m11 = mat.m10 * this.m01 + mat.m11 * this.m11 + mat.m12 * this.m21 + mat.m13 * this.m31;\n        var m12 = mat.m10 * this.m02 + mat.m11 * this.m12 + mat.m12 * this.m22 + mat.m13 * this.m32;\n        var m13 = mat.m10 * this.m03 + mat.m11 * this.m13 + mat.m12 * this.m23 + mat.m13 * this.m33;\n        var m20 = mat.m20 * this.m00 + mat.m21 * this.m10 + mat.m22 * this.m20 + mat.m23 * this.m30;\n        var m21 = mat.m20 * this.m01 + mat.m21 * this.m11 + mat.m22 * this.m21 + mat.m23 * this.m31;\n        var m22 = mat.m20 * this.m02 + mat.m21 * this.m12 + mat.m22 * this.m22 + mat.m23 * this.m32;\n        var m23 = mat.m20 * this.m03 + mat.m21 * this.m13 + mat.m22 * this.m23 + mat.m23 * this.m33;\n        var m30 = mat.m30 * this.m00 + mat.m31 * this.m10 + mat.m32 * this.m20 + mat.m33 * this.m30;\n        var m31 = mat.m30 * this.m01 + mat.m31 * this.m11 + mat.m32 * this.m21 + mat.m33 * this.m31;\n        var m32 = mat.m30 * this.m02 + mat.m31 * this.m12 + mat.m32 * this.m22 + mat.m33 * this.m32;\n        var m33 = mat.m30 * this.m03 + mat.m31 * this.m13 + mat.m32 * this.m23 + mat.m33 * this.m33;\n        return this.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    };\n    MutableRowMajarMatrix44.prototype.invert = function () {\n        var det = this.determinant();\n        var m00 = (this.m11 * this.m22 * this.m33 + this.m12 * this.m23 * this.m31 + this.m13 * this.m21 * this.m32 - this.m11 * this.m23 * this.m32 - this.m12 * this.m21 * this.m33 - this.m13 * this.m22 * this.m31) / det;\n        var m01 = (this.m01 * this.m23 * this.m32 + this.m02 * this.m21 * this.m33 + this.m03 * this.m22 * this.m31 - this.m01 * this.m22 * this.m33 - this.m02 * this.m23 * this.m31 - this.m03 * this.m21 * this.m32) / det;\n        var m02 = (this.m01 * this.m12 * this.m33 + this.m02 * this.m13 * this.m31 + this.m03 * this.m11 * this.m32 - this.m01 * this.m13 * this.m32 - this.m02 * this.m11 * this.m33 - this.m03 * this.m12 * this.m31) / det;\n        var m03 = (this.m01 * this.m13 * this.m22 + this.m02 * this.m11 * this.m23 + this.m03 * this.m12 * this.m21 - this.m01 * this.m12 * this.m23 - this.m02 * this.m13 * this.m21 - this.m03 * this.m11 * this.m22) / det;\n        var m10 = (this.m10 * this.m23 * this.m32 + this.m12 * this.m20 * this.m33 + this.m13 * this.m22 * this.m30 - this.m10 * this.m22 * this.m33 - this.m12 * this.m23 * this.m30 - this.m13 * this.m20 * this.m32) / det;\n        var m11 = (this.m00 * this.m22 * this.m33 + this.m02 * this.m23 * this.m30 + this.m03 * this.m20 * this.m32 - this.m00 * this.m23 * this.m32 - this.m02 * this.m20 * this.m33 - this.m03 * this.m22 * this.m30) / det;\n        var m12 = (this.m00 * this.m13 * this.m32 + this.m02 * this.m10 * this.m33 + this.m03 * this.m12 * this.m30 - this.m00 * this.m12 * this.m33 - this.m02 * this.m13 * this.m30 - this.m03 * this.m10 * this.m32) / det;\n        var m13 = (this.m00 * this.m12 * this.m23 + this.m02 * this.m13 * this.m20 + this.m03 * this.m10 * this.m22 - this.m00 * this.m13 * this.m22 - this.m02 * this.m10 * this.m23 - this.m03 * this.m12 * this.m20) / det;\n        var m20 = (this.m10 * this.m21 * this.m33 + this.m11 * this.m23 * this.m30 + this.m13 * this.m20 * this.m31 - this.m10 * this.m23 * this.m31 - this.m11 * this.m20 * this.m33 - this.m13 * this.m21 * this.m30) / det;\n        var m21 = (this.m00 * this.m23 * this.m31 + this.m01 * this.m20 * this.m33 + this.m03 * this.m21 * this.m30 - this.m00 * this.m21 * this.m33 - this.m01 * this.m23 * this.m30 - this.m03 * this.m20 * this.m31) / det;\n        var m22 = (this.m00 * this.m11 * this.m33 + this.m01 * this.m13 * this.m30 + this.m03 * this.m10 * this.m31 - this.m00 * this.m13 * this.m31 - this.m01 * this.m10 * this.m33 - this.m03 * this.m11 * this.m30) / det;\n        var m23 = (this.m00 * this.m13 * this.m21 + this.m01 * this.m10 * this.m23 + this.m03 * this.m11 * this.m20 - this.m00 * this.m11 * this.m23 - this.m01 * this.m13 * this.m20 - this.m03 * this.m10 * this.m21) / det;\n        var m30 = (this.m10 * this.m22 * this.m31 + this.m11 * this.m20 * this.m32 + this.m12 * this.m21 * this.m30 - this.m10 * this.m21 * this.m32 - this.m11 * this.m22 * this.m30 - this.m12 * this.m20 * this.m31) / det;\n        var m31 = (this.m00 * this.m21 * this.m32 + this.m01 * this.m22 * this.m30 + this.m02 * this.m20 * this.m31 - this.m00 * this.m22 * this.m31 - this.m01 * this.m20 * this.m32 - this.m02 * this.m21 * this.m30) / det;\n        var m32 = (this.m00 * this.m12 * this.m31 + this.m01 * this.m10 * this.m32 + this.m02 * this.m11 * this.m30 - this.m00 * this.m11 * this.m32 - this.m01 * this.m12 * this.m30 - this.m02 * this.m10 * this.m31) / det;\n        var m33 = (this.m00 * this.m11 * this.m22 + this.m01 * this.m12 * this.m20 + this.m02 * this.m10 * this.m21 - this.m00 * this.m12 * this.m21 - this.m01 * this.m10 * this.m22 - this.m02 * this.m11 * this.m20) / det;\n        return this.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    };\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m00\", {\n        get: function () {\n            return this.v[0];\n        },\n        set: function (val) {\n            this.v[0] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m01\", {\n        get: function () {\n            return this.v[1];\n        },\n        set: function (val) {\n            this.v[1] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m02\", {\n        get: function () {\n            return this.v[2];\n        },\n        set: function (val) {\n            this.v[2] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m03\", {\n        get: function () {\n            return this.v[3];\n        },\n        set: function (val) {\n            this.v[3] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m10\", {\n        get: function () {\n            return this.v[4];\n        },\n        set: function (val) {\n            this.v[4] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m11\", {\n        get: function () {\n            return this.v[5];\n        },\n        set: function (val) {\n            this.v[5] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m12\", {\n        get: function () {\n            return this.v[6];\n        },\n        set: function (val) {\n            this.v[6] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m13\", {\n        get: function () {\n            return this.v[7];\n        },\n        set: function (val) {\n            this.v[7] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m20\", {\n        get: function () {\n            return this.v[8];\n        },\n        set: function (val) {\n            this.v[8] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m21\", {\n        get: function () {\n            return this.v[9];\n        },\n        set: function (val) {\n            this.v[9] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m22\", {\n        get: function () {\n            return this.v[10];\n        },\n        set: function (val) {\n            this.v[10] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m23\", {\n        get: function () {\n            return this.v[11];\n        },\n        set: function (val) {\n            this.v[11] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m30\", {\n        get: function () {\n            return this.v[12];\n        },\n        set: function (val) {\n            this.v[12] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m31\", {\n        get: function () {\n            return this.v[13];\n        },\n        set: function (val) {\n            this.v[13] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m32\", {\n        get: function () {\n            return this.v[14];\n        },\n        set: function (val) {\n            this.v[14] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableRowMajarMatrix44.prototype, \"m33\", {\n        get: function () {\n            return this.v[15];\n        },\n        set: function (val) {\n            this.v[15] = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return MutableRowMajarMatrix44;\n}(_RowMajarMatrix44__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (MutableRowMajarMatrix44);\n\n\n//# sourceURL=webpack:///./src/foundation/math/MutableRowMajarMatrix44.ts?");

/***/ }),

/***/ "./src/foundation/math/MutableVector3.ts":
/*!***********************************************!*\
  !*** ./src/foundation/math/MutableVector3.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar MutableVector3 = /** @class */ (function (_super) {\n    __extends(MutableVector3, _super);\n    function MutableVector3(x, y, z) {\n        return _super.call(this, x, y, z) || this;\n    }\n    Object.defineProperty(MutableVector3, \"compositionType\", {\n        get: function () {\n            return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec3;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MutableVector3.prototype.zero = function () {\n        this.x = 0;\n        this.y = 0;\n        this.z = 0;\n        return this;\n    };\n    MutableVector3.prototype.one = function () {\n        this.x = 1;\n        this.y = 1;\n        this.z = 1;\n        return this;\n    };\n    MutableVector3.prototype.clone = function () {\n        return new MutableVector3(this.x, this.y, this.z);\n    };\n    MutableVector3.one = function () {\n        return new MutableVector3(1, 1, 1);\n    };\n    MutableVector3.dummy = function () {\n        return new MutableVector3(null);\n    };\n    /**\n     * to square length\n     */\n    MutableVector3.prototype.lengthSquared = function () {\n        return this.x * this.x + this.y * this.y + this.z * this.z;\n    };\n    /**\n     * cross product\n     */\n    MutableVector3.prototype.cross = function (v) {\n        var x = this.y * v.z - this.z * v.y;\n        var y = this.z * v.x - this.x * v.z;\n        var z = this.x * v.y - this.y * v.x;\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        return this;\n    };\n    /**\n   * normalize\n   */\n    MutableVector3.prototype.normalize = function () {\n        var length = this.length();\n        this.divide(length);\n        return this;\n    };\n    /**\n   * add value\n   */\n    MutableVector3.prototype.add = function (v) {\n        this.x += v.x;\n        this.y += v.y;\n        this.z += v.z;\n        return this;\n    };\n    /**\n   * subtract\n   */\n    MutableVector3.prototype.subtract = function (v) {\n        this.x -= v.x;\n        this.y -= v.y;\n        this.z -= v.z;\n        return this;\n    };\n    /**\n     * divide\n     */\n    MutableVector3.prototype.divide = function (val) {\n        if (val !== 0) {\n            this.x /= val;\n            this.y /= val;\n            this.z /= val;\n        }\n        else {\n            console.error(\"0 division occured!\");\n            this.x = Infinity;\n            this.y = Infinity;\n            this.z = Infinity;\n        }\n        return this;\n    };\n    /**\n     * multiply\n     */\n    MutableVector3.prototype.multiply = function (val) {\n        this.x *= val;\n        this.y *= val;\n        this.z *= val;\n        return this;\n    };\n    /**\n     * multiply vector\n     */\n    MutableVector3.prototype.multiplyVector = function (vec) {\n        this.x *= vec.x;\n        this.y *= vec.y;\n        this.z *= vec.z;\n        return this;\n    };\n    /**\n   * divide vector\n   */\n    MutableVector3.prototype.divideVector = function (vec3) {\n        this.x /= vec3.x;\n        this.y /= vec3.y;\n        this.z /= vec3.z;\n        return this;\n    };\n    Object.defineProperty(MutableVector3.prototype, \"x\", {\n        get: function () {\n            return this.v[0];\n        },\n        set: function (x) {\n            this.v[0] = x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableVector3.prototype, \"y\", {\n        get: function () {\n            return this.v[1];\n        },\n        set: function (y) {\n            this.v[1] = y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableVector3.prototype, \"z\", {\n        get: function () {\n            return this.v[2];\n        },\n        set: function (z) {\n            this.v[2] = z;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableVector3.prototype, \"raw\", {\n        get: function () {\n            return this.v;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return MutableVector3;\n}(_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (MutableVector3);\n\n\n//# sourceURL=webpack:///./src/foundation/math/MutableVector3.ts?");

/***/ }),

/***/ "./src/foundation/math/MutableVector4.ts":
/*!***********************************************!*\
  !*** ./src/foundation/math/MutableVector4.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Vector4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar MutableVector4 = /** @class */ (function (_super) {\n    __extends(MutableVector4, _super);\n    function MutableVector4(x, y, z, w) {\n        return _super.call(this, x, y, z, w) || this;\n    }\n    Object.defineProperty(MutableVector4, \"compositionType\", {\n        get: function () {\n            return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec4;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MutableVector4.prototype.normalize = function () {\n        var length = this.length();\n        this.divide(length);\n        return this;\n    };\n    MutableVector4.dummy = function () {\n        return new MutableVector4(null);\n    };\n    /**\n     * add value\n     */\n    MutableVector4.prototype.add = function (v) {\n        this.x += v.x;\n        this.y += v.y;\n        this.z += v.z;\n        this.w += v.w;\n        return this;\n    };\n    /**\n   * add value except w component\n   */\n    MutableVector4.prototype.addWithOutW = function (v) {\n        this.x += v.x;\n        this.y += v.y;\n        this.z += v.z;\n        return this;\n    };\n    MutableVector4.prototype.subtract = function (v) {\n        this.x -= v.x;\n        this.y -= v.y;\n        this.z -= v.z;\n        this.w -= v.w;\n        return this;\n    };\n    MutableVector4.prototype.multiply = function (val) {\n        this.x *= val;\n        this.y *= val;\n        this.z *= val;\n        this.w *= val;\n        return this;\n    };\n    MutableVector4.prototype.multiplyVector = function (vec) {\n        this.x *= vec.x;\n        this.y *= vec.y;\n        this.z *= vec.z;\n        this.w *= vec.w;\n        return this;\n    };\n    MutableVector4.prototype.divide = function (val) {\n        if (val !== 0) {\n            this.x /= val;\n            this.y /= val;\n            this.z /= val;\n            this.w /= val;\n        }\n        else {\n            console.error(\"0 division occured!\");\n            this.x = Infinity;\n            this.y = Infinity;\n            this.z = Infinity;\n            this.w = Infinity;\n        }\n        return this;\n    };\n    MutableVector4.prototype.divideVector = function (vec4) {\n        this.x /= vec4.x;\n        this.y /= vec4.y;\n        this.z /= vec4.z;\n        this.w /= vec4.w;\n        return this;\n    };\n    Object.defineProperty(MutableVector4.prototype, \"x\", {\n        get: function () {\n            return this.v[0];\n        },\n        set: function (x) {\n            this.v[0] = x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableVector4.prototype, \"y\", {\n        get: function () {\n            return this.v[1];\n        },\n        set: function (y) {\n            this.v[1] = y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableVector4.prototype, \"z\", {\n        get: function () {\n            return this.v[2];\n        },\n        set: function (z) {\n            this.v[2] = z;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableVector4.prototype, \"w\", {\n        get: function () {\n            return this.v[3];\n        },\n        set: function (w) {\n            this.v[3] = w;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MutableVector4.prototype, \"raw\", {\n        get: function () {\n            return this.v;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // set w(w:number) {\n    //   this.__Error();\n    // }\n    // get w(): number {\n    //   return this.v[3];\n    // }\n    // get raw(): TypedArray {\n    //   this.__Error();\n    //   return new Float32Array(0);\n    // }\n    MutableVector4.prototype.__Error = function () {\n        //console.error('Not avavailabe because this Vector class is immutable.');\n        throw new Error('Not avavailabe because this Vector class is immutable.');\n    };\n    return MutableVector4;\n}(_Vector4__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (MutableVector4);\n\n\n//# sourceURL=webpack:///./src/foundation/math/MutableVector4.ts?");

/***/ }),

/***/ "./src/foundation/math/Quaternion.ts":
/*!*******************************************!*\
  !*** ./src/foundation/math/Quaternion.ts ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _LogQuaternion__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LogQuaternion */ \"./src/foundation/math/LogQuaternion.ts\");\n//import GLBoost from '../../globals';\n\n\n\nvar Quaternion = /** @class */ (function () {\n    function Quaternion(x, y, z, w) {\n        if (ArrayBuffer.isView(x)) {\n            this.v = x;\n            return;\n        }\n        else if (x == null) {\n            this.v = new Float32Array(0);\n        }\n        else {\n            this.v = new Float32Array(4);\n        }\n        if (!(x != null)) {\n            this.v[0] = 0;\n            this.v[1] = 0;\n            this.v[2] = 0;\n            this.v[3] = 1;\n        }\n        else if (x instanceof _LogQuaternion__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            var theta = x.x * x.x + x.y * x.y + x.z * x.z;\n            var sin = Math.sin(theta);\n            this.v[0] = x.x * (sin / theta);\n            this.v[1] = x.y * (sin / theta);\n            this.v[2] = x.z * (sin / theta);\n            this.v[3] = Math.cos(theta);\n        }\n        else if (Array.isArray(x)) {\n            this.v[0] = x[0];\n            this.v[1] = x[1];\n            this.v[2] = x[2];\n            this.v[3] = x[3];\n        }\n        else if (typeof x.w !== 'undefined') {\n            this.v[0] = x.x;\n            this.v[1] = x.y;\n            this.v[2] = x.z;\n            this.v[3] = x.w;\n        }\n        else if (typeof x.z !== 'undefined') {\n            this.v[0] = x.x;\n            this.v[1] = x.y;\n            this.v[2] = x.z;\n            this.v[3] = 1;\n        }\n        else if (typeof x.y !== 'undefined') {\n            this.v[0] = x.x;\n            this.v[1] = x.y;\n            this.v[2] = 0;\n            this.v[3] = 1;\n        }\n        else {\n            this.v[0] = x;\n            this.v[1] = y;\n            this.v[2] = z;\n            this.v[3] = w;\n        }\n    }\n    Quaternion.prototype.isEqual = function (quat) {\n        if (this.x === quat.x && this.y === quat.y && this.z === quat.z && this.w === quat.w) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Object.defineProperty(Quaternion, \"compositionType\", {\n        get: function () {\n            return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec4;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Quaternion.dummy = function () {\n        return new Quaternion(null);\n    };\n    Quaternion.prototype.isDummy = function () {\n        if (this.v.length === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Object.defineProperty(Quaternion.prototype, \"className\", {\n        get: function () {\n            return this.constructor.name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Quaternion.prototype.clone = function () {\n        return new Quaternion(this.x, this.y, this.z, this.w);\n    };\n    Quaternion.invert = function (quat) {\n        quat = new Quaternion(-quat.x, -quat.y, -quat.z, quat.w);\n        var inorm2 = 1.0 / (quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w);\n        quat.v[0] *= inorm2;\n        quat.v[1] *= inorm2;\n        quat.v[2] *= inorm2;\n        quat.v[3] *= inorm2;\n        return quat;\n    };\n    Quaternion.qlerp = function (lhq, rhq, ratio) {\n        var q = new Quaternion(0, 0, 0, 1);\n        var qr = lhq.w * rhq.w + lhq.x * rhq.x + lhq.y * rhq.y + lhq.z * rhq.z;\n        var ss = 1.0 - qr * qr;\n        if (ss === 0.0) {\n            q.v[3] = lhq.w;\n            q.v[0] = lhq.x;\n            q.v[1] = lhq.y;\n            q.v[2] = lhq.z;\n            return q;\n        }\n        else {\n            if (qr > 1) {\n                qr = 0.999;\n            }\n            else if (qr < -1) {\n                qr = -0.999;\n            }\n            var ph = Math.acos(qr);\n            var s2 = void 0;\n            if (qr < 0.0 && ph > Math.PI / 2.0) {\n                qr = -lhq.w * rhq.w - lhq.x * rhq.x - lhq.y * rhq.y - lhq.z * rhq.z;\n                ph = Math.acos(qr);\n                s2 = -1 * Math.sin(ph * ratio) / Math.sin(ph);\n            }\n            else {\n                s2 = Math.sin(ph * ratio) / Math.sin(ph);\n            }\n            var s1 = Math.sin(ph * (1.0 - ratio)) / Math.sin(ph);\n            q.v[0] = lhq.x * s1 + rhq.x * s2;\n            q.v[1] = lhq.y * s1 + rhq.y * s2;\n            q.v[2] = lhq.z * s1 + rhq.z * s2;\n            q.v[3] = lhq.w * s1 + rhq.w * s2;\n            return q;\n        }\n    };\n    Quaternion.qlerpTo = function (lhq, rhq, ratio, outQ) {\n        //    var q = new Quaternion(0, 0, 0, 1);\n        var qr = lhq.w * rhq.w + lhq.x * rhq.x + lhq.y * rhq.y + lhq.z * rhq.z;\n        var ss = 1.0 - qr * qr;\n        if (ss === 0.0) {\n            outQ.v[3] = lhq.w;\n            outQ.v[0] = lhq.x;\n            outQ.v[1] = lhq.y;\n            outQ.v[2] = lhq.z;\n        }\n        else {\n            if (qr > 1) {\n                qr = 0.999;\n            }\n            else if (qr < -1) {\n                qr = -0.999;\n            }\n            var ph = Math.acos(qr);\n            var s2 = void 0;\n            if (qr < 0.0 && ph > Math.PI / 2.0) {\n                qr = -lhq.w * rhq.w - lhq.x * rhq.x - lhq.y * rhq.y - lhq.z * rhq.z;\n                ph = Math.acos(qr);\n                s2 = -1 * Math.sin(ph * ratio) / Math.sin(ph);\n            }\n            else {\n                s2 = Math.sin(ph * ratio) / Math.sin(ph);\n            }\n            var s1 = Math.sin(ph * (1.0 - ratio)) / Math.sin(ph);\n            outQ.v[0] = lhq.x * s1 + rhq.x * s2;\n            outQ.v[1] = lhq.y * s1 + rhq.y * s2;\n            outQ.v[2] = lhq.z * s1 + rhq.z * s2;\n            outQ.v[3] = lhq.w * s1 + rhq.w * s2;\n        }\n    };\n    Quaternion.axisAngle = function (axisVec3, radian) {\n        var halfAngle = 0.5 * radian;\n        var sin = Math.sin(halfAngle);\n        var axis = _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(axisVec3);\n        return new Quaternion(sin * axis.x, sin * axis.y, sin * axis.z, Math.cos(halfAngle));\n    };\n    Quaternion.multiply = function (q1, q2) {\n        var result = new Quaternion(0, 0, 0, 1);\n        result.v[0] = q2.w * q1.x + q2.z * q1.y - q2.y * q1.z + q2.x * q1.w;\n        result.v[1] = -q2.z * q1.x + q2.w * q1.y + q2.x * q1.z + q2.y * q1.w;\n        result.v[2] = q2.y * q1.x - q2.x * q1.y + q2.w * q1.z + q2.z * q1.w;\n        result.v[3] = -q2.x * q1.x - q2.y * q1.y - q2.z * q1.z + q2.w * q1.w;\n        return result;\n    };\n    Quaternion.multiplyNumber = function (q1, val) {\n        return new Quaternion(q1.x * val, q1.y * val, q1.z * val, q1.w * val);\n    };\n    Quaternion.fromMatrix = function (m) {\n        var q = new Quaternion();\n        var tr = m.m00 + m.m11 + m.m22;\n        if (tr > 0) {\n            var S = 0.5 / Math.sqrt(tr + 1.0);\n            q.v[3] = 0.25 / S;\n            q.v[0] = (m.m21 - m.m12) * S;\n            q.v[1] = (m.m02 - m.m20) * S;\n            q.v[2] = (m.m10 - m.m01) * S;\n        }\n        else if ((m.m00 > m.m11) && (m.m00 > m.m22)) {\n            var S = Math.sqrt(1.0 + m.m00 - m.m11 - m.m22) * 2;\n            q.v[3] = (m.m21 - m.m12) / S;\n            q.v[0] = 0.25 * S;\n            q.v[1] = (m.m01 + m.m10) / S;\n            q.v[2] = (m.m02 + m.m20) / S;\n        }\n        else if (m.m11 > m.m22) {\n            var S = Math.sqrt(1.0 + m.m11 - m.m00 - m.m22) * 2;\n            q.v[3] = (m.m02 - m.m20) / S;\n            q.v[0] = (m.m01 + m.m10) / S;\n            q.v[1] = 0.25 * S;\n            q.v[2] = (m.m12 + m.m21) / S;\n        }\n        else {\n            var S = Math.sqrt(1.0 + m.m22 - m.m00 - m.m11) * 2;\n            q.v[3] = (m.m10 - m.m01) / S;\n            q.v[0] = (m.m02 + m.m20) / S;\n            q.v[1] = (m.m12 + m.m21) / S;\n            q.v[2] = 0.25 * S;\n        }\n        return q;\n    };\n    Quaternion.fromPosition = function (vec3) {\n        var q = new Quaternion(vec3.x, vec3.y, vec3.z, 0);\n        return q;\n    };\n    Quaternion.prototype.at = function (i) {\n        switch (i % 4) {\n            case 0: return this.x;\n            case 1: return this.y;\n            case 2: return this.z;\n            case 3: return this.w;\n        }\n    };\n    Quaternion.add = function (lhs, rhs) {\n        return new Quaternion(lhs.x + rhs.x, lhs.y + rhs.y, lhs.z + rhs.z, lhs.w + rhs.w);\n    };\n    Quaternion.subtract = function (lhs, rhs) {\n        return new Quaternion(lhs.x - rhs.x, lhs.y - rhs.y, lhs.z - rhs.z, lhs.w - rhs.w);\n    };\n    Quaternion.prototype.toString = function () {\n        return '(' + this.x + ', ' + this.y + ', ' + this.z + ', ' + this.w + ')';\n    };\n    Object.defineProperty(Quaternion.prototype, \"x\", {\n        get: function () {\n            return this.v[0];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Quaternion.prototype, \"y\", {\n        get: function () {\n            return this.v[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Quaternion.prototype, \"z\", {\n        get: function () {\n            return this.v[2];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Quaternion.prototype, \"w\", {\n        get: function () {\n            return this.v[3];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Quaternion;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (Quaternion);\n\n\n//# sourceURL=webpack:///./src/foundation/math/Quaternion.ts?");

/***/ }),

/***/ "./src/foundation/math/RowMajarMatrix44.ts":
/*!*************************************************!*\
  !*** ./src/foundation/math/RowMajarMatrix44.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _Quaternion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n/* harmony import */ var _Vector4__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n//import GLBoost from '../../globals';\n\n\n\n\nvar FloatArray = Float32Array;\nvar RowMajarMatrix44 = /** @class */ (function () {\n    function RowMajarMatrix44(m0, m1, m2, m3, m4, m5, m6, m7, m8, m9, m10, m11, m12, m13, m14, m15, notCopyFloatArray) {\n        if (notCopyFloatArray === void 0) { notCopyFloatArray = false; }\n        var _notCopyFloatArray = (arguments.length >= 16) ? notCopyFloatArray : m1;\n        var m = m0;\n        if (m == null) {\n            this.v = new FloatArray(0);\n            return;\n        }\n        if (arguments.length >= 16) {\n            var m_1 = arguments;\n            this.v = new FloatArray(16); // Data order is row major\n            this.v[0] = m_1[0];\n            this.v[4] = m_1[4];\n            this.v[8] = m_1[8];\n            this.v[12] = m_1[12];\n            this.v[1] = m_1[1];\n            this.v[5] = m_1[5];\n            this.v[9] = m_1[9];\n            this.v[13] = m_1[13];\n            this.v[2] = m_1[2];\n            this.v[6] = m_1[6];\n            this.v[10] = m_1[10];\n            this.v[14] = m_1[14];\n            this.v[3] = m_1[3];\n            this.v[7] = m_1[7];\n            this.v[11] = m_1[11];\n            this.v[15] = m_1[15];\n        }\n        else if (Array.isArray(m)) {\n            this.v = new FloatArray(16);\n            this.v[0] = m[0];\n            this.v[4] = m[4];\n            this.v[8] = m[8];\n            this.v[12] = m[12];\n            this.v[1] = m[1];\n            this.v[5] = m[5];\n            this.v[9] = m[9];\n            this.v[13] = m[13];\n            this.v[2] = m[2];\n            this.v[6] = m[6];\n            this.v[10] = m[10];\n            this.v[14] = m[14];\n            this.v[3] = m[3];\n            this.v[7] = m[7];\n            this.v[11] = m[11];\n            this.v[15] = m[15];\n        }\n        else if (m instanceof FloatArray) {\n            if (_notCopyFloatArray) {\n                this.v = m;\n            }\n            else {\n                this.v = new FloatArray(16);\n                this.v[0] = m[0];\n                this.v[4] = m[4];\n                this.v[8] = m[8];\n                this.v[12] = m[12];\n                this.v[1] = m[1];\n                this.v[5] = m[5];\n                this.v[9] = m[9];\n                this.v[13] = m[13];\n                this.v[2] = m[2];\n                this.v[6] = m[6];\n                this.v[10] = m[10];\n                this.v[14] = m[14];\n                this.v[3] = m[3];\n                this.v[7] = m[7];\n                this.v[11] = m[11];\n                this.v[15] = m[15];\n            }\n        }\n        else if (!!m && typeof m.m33 !== 'undefined' && typeof m.m22 !== 'undefined') {\n            if (_notCopyFloatArray) {\n                this.v = m.v;\n            }\n            else {\n                this.v = new FloatArray(16);\n                this.v[0] = m.m00;\n                this.v[4] = m.m10;\n                this.v[8] = m.m20;\n                this.v[12] = m.m30;\n                this.v[1] = m.m01;\n                this.v[5] = m.m11;\n                this.v[9] = m.m21;\n                this.v[13] = m.m31;\n                this.v[2] = m.m02;\n                this.v[6] = m.m12;\n                this.v[10] = m.m22;\n                this.v[14] = m.m32;\n                this.v[3] = m.m03;\n                this.v[7] = m.m13;\n                this.v[11] = m.m23;\n                this.v[15] = m.m33;\n            }\n        }\n        else if (!!m && typeof m.m33 === 'undefined' && typeof m.m22 !== 'undefined') {\n            if (_notCopyFloatArray) {\n                this.v = m.v;\n            }\n            else {\n                this.v = new FloatArray(16);\n                this.v[0] = m.m00;\n                this.v[4] = m.m10;\n                this.v[8] = m.m20;\n                this.v[12] = 0;\n                this.v[1] = m.m01;\n                this.v[5] = m.m11;\n                this.v[9] = m.m21;\n                this.v[13] = 0;\n                this.v[2] = m.m02;\n                this.v[6] = m.m12;\n                this.v[10] = m.m22;\n                this.v[14] = 0;\n                this.v[3] = 0;\n                this.v[7] = 0;\n                this.v[11] = 0;\n                this.v[15] = 1;\n            }\n        }\n        else if (!!m && typeof m.className !== 'undefined' && m.className === 'Quaternion') {\n            this.v = new FloatArray(16);\n            var sx = m.x * m.x;\n            var sy = m.y * m.y;\n            var sz = m.z * m.z;\n            var cx = m.y * m.z;\n            var cy = m.x * m.z;\n            var cz = m.x * m.y;\n            var wx = m.w * m.x;\n            var wy = m.w * m.y;\n            var wz = m.w * m.z;\n            this.v[0] = 1.0 - 2.0 * (sy + sz);\n            this.v[1] = 2.0 * (cz - wz);\n            this.v[2] = 2.0 * (cy + wy);\n            this.v[3] = 0;\n            this.v[4] = 2.0 * (cz + wz);\n            this.v[5] = 1.0 - 2.0 * (sx + sz);\n            this.v[6] = 2.0 * (cx - wx);\n            this.v[7] = 0;\n            this.v[8] = 2.0 * (cy - wy);\n            this.v[9] = 2.0 * (cx + wx);\n            this.v[10] = 1.0 - 2.0 * (sx + sy);\n            this.v[11] = 0;\n            this.v[12] = 0;\n            this.v[13] = 0;\n            this.v[14] = 0;\n            this.v[15] = 1;\n        }\n        else {\n            this.v = new FloatArray(16);\n            this.v[0] = 1;\n            this.v[4] = 0;\n            this.v[8] = 0;\n            this.v[12] = 0;\n            this.v[1] = 0;\n            this.v[5] = 1;\n            this.v[9] = 0;\n            this.v[13] = 0;\n            this.v[2] = 0;\n            this.v[6] = 0;\n            this.v[10] = 1;\n            this.v[14] = 0;\n            this.v[3] = 0;\n            this.v[7] = 0;\n            this.v[11] = 0;\n            this.v[15] = 1;\n        }\n    }\n    RowMajarMatrix44.dummy = function () {\n        return new RowMajarMatrix44(null);\n    };\n    Object.defineProperty(RowMajarMatrix44, \"compositionType\", {\n        get: function () {\n            return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Mat4;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RowMajarMatrix44.prototype.isDummy = function () {\n        if (this.v.length === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Object.defineProperty(RowMajarMatrix44.prototype, \"className\", {\n        get: function () {\n            return this.constructor.name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RowMajarMatrix44.prototype.clone = function () {\n        return new RowMajarMatrix44(this.v[0], this.v[1], this.v[2], this.v[3], this.v[4], this.v[5], this.v[6], this.v[7], this.v[8], this.v[9], this.v[10], this.v[11], this.v[12], this.v[13], this.v[14], this.v[15]);\n    };\n    /**\n     * to the identity matrix（static版）\n     */\n    RowMajarMatrix44.identity = function () {\n        return new RowMajarMatrix44(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    };\n    RowMajarMatrix44.prototype.isEqual = function (mat, delta) {\n        if (delta === void 0) { delta = Number.EPSILON; }\n        if (Math.abs(mat.v[0] - this.v[0]) < delta &&\n            Math.abs(mat.v[1] - this.v[1]) < delta &&\n            Math.abs(mat.v[2] - this.v[2]) < delta &&\n            Math.abs(mat.v[3] - this.v[3]) < delta &&\n            Math.abs(mat.v[4] - this.v[4]) < delta &&\n            Math.abs(mat.v[5] - this.v[5]) < delta &&\n            Math.abs(mat.v[6] - this.v[6]) < delta &&\n            Math.abs(mat.v[7] - this.v[7]) < delta &&\n            Math.abs(mat.v[8] - this.v[8]) < delta &&\n            Math.abs(mat.v[9] - this.v[9]) < delta &&\n            Math.abs(mat.v[10] - this.v[10]) < delta &&\n            Math.abs(mat.v[11] - this.v[11]) < delta &&\n            Math.abs(mat.v[12] - this.v[12]) < delta &&\n            Math.abs(mat.v[13] - this.v[13]) < delta &&\n            Math.abs(mat.v[14] - this.v[14]) < delta &&\n            Math.abs(mat.v[15] - this.v[15]) < delta) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    RowMajarMatrix44.prototype.getTranslate = function () {\n        return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.m03, this.m13, this.m23);\n    };\n    RowMajarMatrix44.translate = function (vec) {\n        return new RowMajarMatrix44(1, 0, 0, vec.x, 0, 1, 0, vec.y, 0, 0, 1, vec.z, 0, 0, 0, 1);\n    };\n    RowMajarMatrix44.scale = function (vec) {\n        return new RowMajarMatrix44(vec.x, 0, 0, 0, 0, vec.y, 0, 0, 0, 0, vec.z, 0, 0, 0, 0, 1);\n    };\n    /**\n     * Create X oriented Rotation Matrix\n    */\n    RowMajarMatrix44.rotateX = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new RowMajarMatrix44(1, 0, 0, 0, 0, cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1);\n    };\n    /**\n     * Create Y oriented Rotation Matrix\n     */\n    RowMajarMatrix44.rotateY = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new RowMajarMatrix44(cos, 0, sin, 0, 0, 1, 0, 0, -sin, 0, cos, 0, 0, 0, 0, 1);\n    };\n    /**\n     * Create Z oriented Rotation Matrix\n     */\n    RowMajarMatrix44.rotateZ = function (radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new RowMajarMatrix44(cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    };\n    /**\n     * @return Euler Angles Rotation (x, y, z)\n     */\n    RowMajarMatrix44.prototype.toEulerAngles = function () {\n        var rotate = null;\n        if (Math.abs(this.m20) != 1.0) {\n            var y = -Math.asin(this.m20);\n            var x = Math.atan2(this.m21 / Math.cos(y), this.m22 / Math.cos(y));\n            var z = Math.atan2(this.m10 / Math.cos(y), this.m00 / Math.cos(y));\n            rotate = new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](x, y, z);\n        }\n        else if (this.m20 === -1.0) {\n            rotate = new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](Math.atan2(this.m01, this.m02), Math.PI / 2.0, 0.0);\n        }\n        else {\n            rotate = new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](Math.atan2(-this.m01, -this.m02), -Math.PI / 2.0, 0.0);\n        }\n        return rotate;\n    };\n    RowMajarMatrix44.zero = function () {\n        return new RowMajarMatrix44(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    };\n    RowMajarMatrix44.prototype.raw = function () {\n        return this.v;\n    };\n    RowMajarMatrix44.prototype.flattenAsArray = function () {\n        return [this.v[0], this.v[1], this.v[2], this.v[3],\n            this.v[4], this.v[5], this.v[6], this.v[7],\n            this.v[8], this.v[9], this.v[10], this.v[11],\n            this.v[12], this.v[13], this.v[14], this.v[15]];\n    };\n    /**\n     * transpose(static version)\n     */\n    RowMajarMatrix44.transpose = function (mat) {\n        var mat_t = new RowMajarMatrix44(mat.m00, mat.m10, mat.m20, mat.m30, mat.m01, mat.m11, mat.m21, mat.m31, mat.m02, mat.m12, mat.m22, mat.m32, mat.m03, mat.m13, mat.m23, mat.m33);\n        return mat_t;\n    };\n    RowMajarMatrix44.transposeTo = function (mat, outMat) {\n        outMat.m00 = mat.m00;\n        outMat.m01 = mat.m10;\n        outMat.m02 = mat.m20;\n        outMat.m03 = mat.m30;\n        outMat.m10 = mat.m01;\n        outMat.m11 = mat.m11;\n        outMat.m12 = mat.m21;\n        outMat.m13 = mat.m31;\n        outMat.m20 = mat.m02;\n        outMat.m21 = mat.m12;\n        outMat.m22 = mat.m22;\n        outMat.m23 = mat.m32;\n        outMat.m23 = mat.m32;\n        outMat.m30 = mat.m03;\n        outMat.m31 = mat.m13;\n        outMat.m32 = mat.m23;\n        outMat.m33 = mat.m33;\n    };\n    RowMajarMatrix44.prototype.multiplyVector = function (vec) {\n        var x = this.m00 * vec.x + this.m01 * vec.y + this.m02 * vec.z + this.m03 * vec.w;\n        var y = this.m10 * vec.x + this.m11 * vec.y + this.m12 * vec.z + this.m13 * vec.w;\n        var z = this.m20 * vec.x + this.m21 * vec.y + this.m22 * vec.z + this.m23 * vec.w;\n        var w = this.m30 * vec.x + this.m31 * vec.y + this.m32 * vec.z + this.m33 * vec.w;\n        return new _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"](x, y, z, w);\n    };\n    RowMajarMatrix44.prototype.multiplyVector3 = function (vec) {\n        var x = this.m00 * vec.x + this.m01 * vec.y + this.m02 * vec.z + this.m03 * vec.w;\n        var y = this.m10 * vec.x + this.m11 * vec.y + this.m12 * vec.z + this.m13 * vec.w;\n        var z = this.m20 * vec.x + this.m21 * vec.y + this.m22 * vec.z + this.m23 * vec.w;\n        return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](x, y, z);\n    };\n    RowMajarMatrix44.prototype.multiplyVector3To = function (vec, outVec) {\n        outVec.x = this.m00 * vec.x + this.m01 * vec.y + this.m02 * vec.z + this.m03 * vec.w;\n        outVec.y = this.m10 * vec.x + this.m11 * vec.y + this.m12 * vec.z + this.m13 * vec.w;\n        outVec.z = this.m20 * vec.x + this.m21 * vec.y + this.m22 * vec.z + this.m23 * vec.w;\n    };\n    /**\n     * multiply zero matrix and zero matrix(static version)\n     */\n    RowMajarMatrix44.multiply = function (l_m, r_m) {\n        var m00 = l_m.m00 * r_m.m00 + l_m.m01 * r_m.m10 + l_m.m02 * r_m.m20 + l_m.m03 * r_m.m30;\n        var m10 = l_m.m10 * r_m.m00 + l_m.m11 * r_m.m10 + l_m.m12 * r_m.m20 + l_m.m13 * r_m.m30;\n        var m20 = l_m.m20 * r_m.m00 + l_m.m21 * r_m.m10 + l_m.m22 * r_m.m20 + l_m.m23 * r_m.m30;\n        var m30 = l_m.m30 * r_m.m00 + l_m.m31 * r_m.m10 + l_m.m32 * r_m.m20 + l_m.m33 * r_m.m30;\n        var m01 = l_m.m00 * r_m.m01 + l_m.m01 * r_m.m11 + l_m.m02 * r_m.m21 + l_m.m03 * r_m.m31;\n        var m11 = l_m.m10 * r_m.m01 + l_m.m11 * r_m.m11 + l_m.m12 * r_m.m21 + l_m.m13 * r_m.m31;\n        var m21 = l_m.m20 * r_m.m01 + l_m.m21 * r_m.m11 + l_m.m22 * r_m.m21 + l_m.m23 * r_m.m31;\n        var m31 = l_m.m30 * r_m.m01 + l_m.m31 * r_m.m11 + l_m.m32 * r_m.m21 + l_m.m33 * r_m.m31;\n        var m02 = l_m.m00 * r_m.m02 + l_m.m01 * r_m.m12 + l_m.m02 * r_m.m22 + l_m.m03 * r_m.m32;\n        var m12 = l_m.m10 * r_m.m02 + l_m.m11 * r_m.m12 + l_m.m12 * r_m.m22 + l_m.m13 * r_m.m32;\n        var m22 = l_m.m20 * r_m.m02 + l_m.m21 * r_m.m12 + l_m.m22 * r_m.m22 + l_m.m23 * r_m.m32;\n        var m32 = l_m.m30 * r_m.m02 + l_m.m31 * r_m.m12 + l_m.m32 * r_m.m22 + l_m.m33 * r_m.m32;\n        var m03 = l_m.m00 * r_m.m03 + l_m.m01 * r_m.m13 + l_m.m02 * r_m.m23 + l_m.m03 * r_m.m33;\n        var m13 = l_m.m10 * r_m.m03 + l_m.m11 * r_m.m13 + l_m.m12 * r_m.m23 + l_m.m13 * r_m.m33;\n        var m23 = l_m.m20 * r_m.m03 + l_m.m21 * r_m.m13 + l_m.m22 * r_m.m23 + l_m.m23 * r_m.m33;\n        var m33 = l_m.m30 * r_m.m03 + l_m.m31 * r_m.m13 + l_m.m32 * r_m.m23 + l_m.m33 * r_m.m33;\n        return new RowMajarMatrix44(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    };\n    RowMajarMatrix44.prototype.determinant = function () {\n        return this.m00 * this.m11 * this.m22 * this.m33 + this.m00 * this.m12 * this.m23 * this.m31 + this.m00 * this.m13 * this.m21 * this.m32 +\n            this.m01 * this.m10 * this.m23 * this.m32 + this.m01 * this.m12 * this.m20 * this.m33 + this.m01 * this.m13 * this.m22 * this.m30 +\n            this.m02 * this.m10 * this.m21 * this.m33 + this.m02 * this.m11 * this.m23 * this.m30 + this.m02 * this.m13 * this.m20 * this.m31 +\n            this.m03 * this.m10 * this.m22 * this.m31 + this.m03 * this.m11 * this.m20 * this.m32 + this.m03 * this.m12 * this.m21 * this.m30 -\n            this.m00 * this.m11 * this.m23 * this.m32 - this.m00 * this.m12 * this.m21 * this.m33 - this.m00 * this.m13 * this.m22 * this.m31 -\n            this.m01 * this.m10 * this.m22 * this.m33 - this.m01 * this.m12 * this.m23 * this.m30 - this.m01 * this.m13 * this.m20 * this.m32 -\n            this.m02 * this.m10 * this.m23 * this.m31 - this.m02 * this.m11 * this.m20 * this.m33 - this.m02 * this.m13 * this.m21 * this.m30 -\n            this.m03 * this.m10 * this.m21 * this.m32 - this.m03 * this.m11 * this.m22 * this.m30 - this.m03 * this.m12 * this.m20 * this.m31;\n    };\n    RowMajarMatrix44.determinant = function (mat) {\n        return mat.m00 * mat.m11 * mat.m22 * mat.m33 + mat.m00 * mat.m12 * mat.m23 * mat.m31 + mat.m00 * mat.m13 * mat.m21 * mat.m32 +\n            mat.m01 * mat.m10 * mat.m23 * mat.m32 + mat.m01 * mat.m12 * mat.m20 * mat.m33 + mat.m01 * mat.m13 * mat.m22 * mat.m30 +\n            mat.m02 * mat.m10 * mat.m21 * mat.m33 + mat.m02 * mat.m11 * mat.m23 * mat.m30 + mat.m02 * mat.m13 * mat.m20 * mat.m31 +\n            mat.m03 * mat.m10 * mat.m22 * mat.m31 + mat.m03 * mat.m11 * mat.m20 * mat.m32 + mat.m03 * mat.m12 * mat.m21 * mat.m30 -\n            mat.m00 * mat.m11 * mat.m23 * mat.m32 - mat.m00 * mat.m12 * mat.m21 * mat.m33 - mat.m00 * mat.m13 * mat.m22 * mat.m31 -\n            mat.m01 * mat.m10 * mat.m22 * mat.m33 - mat.m01 * mat.m12 * mat.m23 * mat.m30 - mat.m01 * mat.m13 * mat.m20 * mat.m32 -\n            mat.m02 * mat.m10 * mat.m23 * mat.m31 - mat.m02 * mat.m11 * mat.m20 * mat.m33 - mat.m02 * mat.m13 * mat.m21 * mat.m30 -\n            mat.m03 * mat.m10 * mat.m21 * mat.m32 - mat.m03 * mat.m11 * mat.m22 * mat.m30 - mat.m03 * mat.m12 * mat.m20 * mat.m31;\n    };\n    RowMajarMatrix44.invert = function (mat) {\n        var det = mat.determinant();\n        var m00 = (mat.m11 * mat.m22 * mat.m33 + mat.m12 * mat.m23 * mat.m31 + mat.m13 * mat.m21 * mat.m32 - mat.m11 * mat.m23 * mat.m32 - mat.m12 * mat.m21 * mat.m33 - mat.m13 * mat.m22 * mat.m31) / det;\n        var m01 = (mat.m01 * mat.m23 * mat.m32 + mat.m02 * mat.m21 * mat.m33 + mat.m03 * mat.m22 * mat.m31 - mat.m01 * mat.m22 * mat.m33 - mat.m02 * mat.m23 * mat.m31 - mat.m03 * mat.m21 * mat.m32) / det;\n        var m02 = (mat.m01 * mat.m12 * mat.m33 + mat.m02 * mat.m13 * mat.m31 + mat.m03 * mat.m11 * mat.m32 - mat.m01 * mat.m13 * mat.m32 - mat.m02 * mat.m11 * mat.m33 - mat.m03 * mat.m12 * mat.m31) / det;\n        var m03 = (mat.m01 * mat.m13 * mat.m22 + mat.m02 * mat.m11 * mat.m23 + mat.m03 * mat.m12 * mat.m21 - mat.m01 * mat.m12 * mat.m23 - mat.m02 * mat.m13 * mat.m21 - mat.m03 * mat.m11 * mat.m22) / det;\n        var m10 = (mat.m10 * mat.m23 * mat.m32 + mat.m12 * mat.m20 * mat.m33 + mat.m13 * mat.m22 * mat.m30 - mat.m10 * mat.m22 * mat.m33 - mat.m12 * mat.m23 * mat.m30 - mat.m13 * mat.m20 * mat.m32) / det;\n        var m11 = (mat.m00 * mat.m22 * mat.m33 + mat.m02 * mat.m23 * mat.m30 + mat.m03 * mat.m20 * mat.m32 - mat.m00 * mat.m23 * mat.m32 - mat.m02 * mat.m20 * mat.m33 - mat.m03 * mat.m22 * mat.m30) / det;\n        var m12 = (mat.m00 * mat.m13 * mat.m32 + mat.m02 * mat.m10 * mat.m33 + mat.m03 * mat.m12 * mat.m30 - mat.m00 * mat.m12 * mat.m33 - mat.m02 * mat.m13 * mat.m30 - mat.m03 * mat.m10 * mat.m32) / det;\n        var m13 = (mat.m00 * mat.m12 * mat.m23 + mat.m02 * mat.m13 * mat.m20 + mat.m03 * mat.m10 * mat.m22 - mat.m00 * mat.m13 * mat.m22 - mat.m02 * mat.m10 * mat.m23 - mat.m03 * mat.m12 * mat.m20) / det;\n        var m20 = (mat.m10 * mat.m21 * mat.m33 + mat.m11 * mat.m23 * mat.m30 + mat.m13 * mat.m20 * mat.m31 - mat.m10 * mat.m23 * mat.m31 - mat.m11 * mat.m20 * mat.m33 - mat.m13 * mat.m21 * mat.m30) / det;\n        var m21 = (mat.m00 * mat.m23 * mat.m31 + mat.m01 * mat.m20 * mat.m33 + mat.m03 * mat.m21 * mat.m30 - mat.m00 * mat.m21 * mat.m33 - mat.m01 * mat.m23 * mat.m30 - mat.m03 * mat.m20 * mat.m31) / det;\n        var m22 = (mat.m00 * mat.m11 * mat.m33 + mat.m01 * mat.m13 * mat.m30 + mat.m03 * mat.m10 * mat.m31 - mat.m00 * mat.m13 * mat.m31 - mat.m01 * mat.m10 * mat.m33 - mat.m03 * mat.m11 * mat.m30) / det;\n        var m23 = (mat.m00 * mat.m13 * mat.m21 + mat.m01 * mat.m10 * mat.m23 + mat.m03 * mat.m11 * mat.m20 - mat.m00 * mat.m11 * mat.m23 - mat.m01 * mat.m13 * mat.m20 - mat.m03 * mat.m10 * mat.m21) / det;\n        var m30 = (mat.m10 * mat.m22 * mat.m31 + mat.m11 * mat.m20 * mat.m32 + mat.m12 * mat.m21 * mat.m30 - mat.m10 * mat.m21 * mat.m32 - mat.m11 * mat.m22 * mat.m30 - mat.m12 * mat.m20 * mat.m31) / det;\n        var m31 = (mat.m00 * mat.m21 * mat.m32 + mat.m01 * mat.m22 * mat.m30 + mat.m02 * mat.m20 * mat.m31 - mat.m00 * mat.m22 * mat.m31 - mat.m01 * mat.m20 * mat.m32 - mat.m02 * mat.m21 * mat.m30) / det;\n        var m32 = (mat.m00 * mat.m12 * mat.m31 + mat.m01 * mat.m10 * mat.m32 + mat.m02 * mat.m11 * mat.m30 - mat.m00 * mat.m11 * mat.m32 - mat.m01 * mat.m12 * mat.m30 - mat.m02 * mat.m10 * mat.m31) / det;\n        var m33 = (mat.m00 * mat.m11 * mat.m22 + mat.m01 * mat.m12 * mat.m20 + mat.m02 * mat.m10 * mat.m21 - mat.m00 * mat.m12 * mat.m21 - mat.m01 * mat.m10 * mat.m22 - mat.m02 * mat.m11 * mat.m20) / det;\n        return new RowMajarMatrix44(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    };\n    RowMajarMatrix44.invertTo = function (mat, outMat) {\n        var det = mat.determinant();\n        outMat.m00 = (mat.m11 * mat.m22 * mat.m33 + mat.m12 * mat.m23 * mat.m31 + mat.m13 * mat.m21 * mat.m32 - mat.m11 * mat.m23 * mat.m32 - mat.m12 * mat.m21 * mat.m33 - mat.m13 * mat.m22 * mat.m31) / det;\n        outMat.m01 = (mat.m01 * mat.m23 * mat.m32 + mat.m02 * mat.m21 * mat.m33 + mat.m03 * mat.m22 * mat.m31 - mat.m01 * mat.m22 * mat.m33 - mat.m02 * mat.m23 * mat.m31 - mat.m03 * mat.m21 * mat.m32) / det;\n        outMat.m02 = (mat.m01 * mat.m12 * mat.m33 + mat.m02 * mat.m13 * mat.m31 + mat.m03 * mat.m11 * mat.m32 - mat.m01 * mat.m13 * mat.m32 - mat.m02 * mat.m11 * mat.m33 - mat.m03 * mat.m12 * mat.m31) / det;\n        outMat.m03 = (mat.m01 * mat.m13 * mat.m22 + mat.m02 * mat.m11 * mat.m23 + mat.m03 * mat.m12 * mat.m21 - mat.m01 * mat.m12 * mat.m23 - mat.m02 * mat.m13 * mat.m21 - mat.m03 * mat.m11 * mat.m22) / det;\n        outMat.m10 = (mat.m10 * mat.m23 * mat.m32 + mat.m12 * mat.m20 * mat.m33 + mat.m13 * mat.m22 * mat.m30 - mat.m10 * mat.m22 * mat.m33 - mat.m12 * mat.m23 * mat.m30 - mat.m13 * mat.m20 * mat.m32) / det;\n        outMat.m11 = (mat.m00 * mat.m22 * mat.m33 + mat.m02 * mat.m23 * mat.m30 + mat.m03 * mat.m20 * mat.m32 - mat.m00 * mat.m23 * mat.m32 - mat.m02 * mat.m20 * mat.m33 - mat.m03 * mat.m22 * mat.m30) / det;\n        outMat.m12 = (mat.m00 * mat.m13 * mat.m32 + mat.m02 * mat.m10 * mat.m33 + mat.m03 * mat.m12 * mat.m30 - mat.m00 * mat.m12 * mat.m33 - mat.m02 * mat.m13 * mat.m30 - mat.m03 * mat.m10 * mat.m32) / det;\n        outMat.m13 = (mat.m00 * mat.m12 * mat.m23 + mat.m02 * mat.m13 * mat.m20 + mat.m03 * mat.m10 * mat.m22 - mat.m00 * mat.m13 * mat.m22 - mat.m02 * mat.m10 * mat.m23 - mat.m03 * mat.m12 * mat.m20) / det;\n        outMat.m20 = (mat.m10 * mat.m21 * mat.m33 + mat.m11 * mat.m23 * mat.m30 + mat.m13 * mat.m20 * mat.m31 - mat.m10 * mat.m23 * mat.m31 - mat.m11 * mat.m20 * mat.m33 - mat.m13 * mat.m21 * mat.m30) / det;\n        outMat.m21 = (mat.m00 * mat.m23 * mat.m31 + mat.m01 * mat.m20 * mat.m33 + mat.m03 * mat.m21 * mat.m30 - mat.m00 * mat.m21 * mat.m33 - mat.m01 * mat.m23 * mat.m30 - mat.m03 * mat.m20 * mat.m31) / det;\n        outMat.m22 = (mat.m00 * mat.m11 * mat.m33 + mat.m01 * mat.m13 * mat.m30 + mat.m03 * mat.m10 * mat.m31 - mat.m00 * mat.m13 * mat.m31 - mat.m01 * mat.m10 * mat.m33 - mat.m03 * mat.m11 * mat.m30) / det;\n        outMat.m23 = (mat.m00 * mat.m13 * mat.m21 + mat.m01 * mat.m10 * mat.m23 + mat.m03 * mat.m11 * mat.m20 - mat.m00 * mat.m11 * mat.m23 - mat.m01 * mat.m13 * mat.m20 - mat.m03 * mat.m10 * mat.m21) / det;\n        outMat.m30 = (mat.m10 * mat.m22 * mat.m31 + mat.m11 * mat.m20 * mat.m32 + mat.m12 * mat.m21 * mat.m30 - mat.m10 * mat.m21 * mat.m32 - mat.m11 * mat.m22 * mat.m30 - mat.m12 * mat.m20 * mat.m31) / det;\n        outMat.m31 = (mat.m00 * mat.m21 * mat.m32 + mat.m01 * mat.m22 * mat.m30 + mat.m02 * mat.m20 * mat.m31 - mat.m00 * mat.m22 * mat.m31 - mat.m01 * mat.m20 * mat.m32 - mat.m02 * mat.m21 * mat.m30) / det;\n        outMat.m32 = (mat.m00 * mat.m12 * mat.m31 + mat.m01 * mat.m10 * mat.m32 + mat.m02 * mat.m11 * mat.m30 - mat.m00 * mat.m11 * mat.m32 - mat.m01 * mat.m12 * mat.m30 - mat.m02 * mat.m10 * mat.m31) / det;\n        outMat.m33 = (mat.m00 * mat.m11 * mat.m22 + mat.m01 * mat.m12 * mat.m20 + mat.m02 * mat.m10 * mat.m21 - mat.m00 * mat.m12 * mat.m21 - mat.m01 * mat.m10 * mat.m22 - mat.m02 * mat.m11 * mat.m20) / det;\n    };\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m00\", {\n        get: function () {\n            return this.v[0];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m01\", {\n        get: function () {\n            return this.v[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m02\", {\n        get: function () {\n            return this.v[2];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m03\", {\n        get: function () {\n            return this.v[3];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m10\", {\n        get: function () {\n            return this.v[4];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m11\", {\n        get: function () {\n            return this.v[5];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m12\", {\n        get: function () {\n            return this.v[6];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m13\", {\n        get: function () {\n            return this.v[7];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m20\", {\n        get: function () {\n            return this.v[8];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m21\", {\n        get: function () {\n            return this.v[9];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m22\", {\n        get: function () {\n            return this.v[10];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m23\", {\n        get: function () {\n            return this.v[11];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m30\", {\n        get: function () {\n            return this.v[12];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m31\", {\n        get: function () {\n            return this.v[13];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m32\", {\n        get: function () {\n            return this.v[14];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowMajarMatrix44.prototype, \"m33\", {\n        get: function () {\n            return this.v[15];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RowMajarMatrix44.prototype.toString = function () {\n        return this.m00 + ' ' + this.m01 + ' ' + this.m02 + ' ' + this.m03 + ' \\n' +\n            this.m10 + ' ' + this.m11 + ' ' + this.m12 + ' ' + this.m13 + ' \\n' +\n            this.m20 + ' ' + this.m21 + ' ' + this.m22 + ' ' + this.m23 + ' \\n' +\n            this.m30 + ' ' + this.m31 + ' ' + this.m32 + ' ' + this.m33 + ' \\n';\n    };\n    RowMajarMatrix44.prototype.nearZeroToZero = function (value) {\n        if (Math.abs(value) < 0.00001) {\n            value = 0;\n        }\n        else if (0.99999 < value && value < 1.00001) {\n            value = 1;\n        }\n        else if (-1.00001 < value && value < -0.99999) {\n            value = -1;\n        }\n        return value;\n    };\n    RowMajarMatrix44.prototype.toStringApproximately = function () {\n        return this.nearZeroToZero(this.m00) + ' ' + this.nearZeroToZero(this.m01) + ' ' + this.nearZeroToZero(this.m02) + ' ' + this.nearZeroToZero(this.m03) + ' \\n' +\n            this.nearZeroToZero(this.m10) + ' ' + this.nearZeroToZero(this.m11) + ' ' + this.nearZeroToZero(this.m12) + ' ' + this.nearZeroToZero(this.m13) + ' \\n' +\n            this.nearZeroToZero(this.m20) + ' ' + this.nearZeroToZero(this.m21) + ' ' + this.nearZeroToZero(this.m22) + ' ' + this.nearZeroToZero(this.m23) + ' \\n' +\n            this.nearZeroToZero(this.m30) + ' ' + this.nearZeroToZero(this.m31) + ' ' + this.nearZeroToZero(this.m32) + ' ' + this.nearZeroToZero(this.m33) + ' \\n';\n    };\n    RowMajarMatrix44.prototype.getScale = function () {\n        return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](Math.sqrt(this.m00 * this.m00 + this.m01 * this.m01 + this.m02 * this.m02), Math.sqrt(this.m10 * this.m10 + this.m11 * this.m11 + this.m12 * this.m12), Math.sqrt(this.m20 * this.m20 + this.m21 * this.m21 + this.m22 * this.m22));\n    };\n    RowMajarMatrix44.prototype.getRotate = function () {\n        var quat = _Quaternion__WEBPACK_IMPORTED_MODULE_1__[\"default\"].fromMatrix(this);\n        var rotateMat = new RowMajarMatrix44(quat);\n        return rotateMat;\n    };\n    return RowMajarMatrix44;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (RowMajarMatrix44);\n\n\n//# sourceURL=webpack:///./src/foundation/math/RowMajarMatrix44.ts?");

/***/ }),

/***/ "./src/foundation/math/Vector2.ts":
/*!****************************************!*\
  !*** ./src/foundation/math/Vector2.ts ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar Vector2 = /** @class */ (function () {\n    function Vector2(x, y) {\n        if (ArrayBuffer.isView(x)) {\n            this.v = x;\n            return;\n        }\n        else {\n            this.v = new Float32Array(2);\n        }\n        this.x = x;\n        this.y = y;\n    }\n    Object.defineProperty(Vector2.prototype, \"className\", {\n        get: function () {\n            return this.constructor.name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Vector2.prototype.clone = function () {\n        return new Vector2(this.x, this.y);\n    };\n    Vector2.add = function (lvec, rvec) {\n        return new Vector2(lvec.x + rvec.x, lvec.y + rvec.y);\n    };\n    Vector2.subtract = function (lvec, rvec) {\n        return new Vector2(lvec.x - rvec.x, lvec.y - rvec.y);\n    };\n    Vector2.prototype.multiply = function (val) {\n        this.x *= val;\n        this.y *= val;\n        return this;\n    };\n    Vector2.prototype.isStrictEqual = function (vec) {\n        if (this.x === vec.x && this.y === vec.y) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Vector2.prototype.isEqual = function (vec, delta) {\n        if (delta === void 0) { delta = Number.EPSILON; }\n        if (Math.abs(vec.x - this.x) < delta &&\n            Math.abs(vec.y - this.y) < delta) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Vector2.multiply = function (vec2, val) {\n        return new Vector2(vec2.x * val, vec2.y * val);\n    };\n    Object.defineProperty(Vector2.prototype, \"x\", {\n        get: function () {\n            return this.v[0];\n        },\n        set: function (x) {\n            this.v[0] = x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Vector2.prototype, \"y\", {\n        get: function () {\n            return this.v[1];\n        },\n        set: function (y) {\n            this.v[1] = y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Vector2.prototype, \"raw\", {\n        get: function () {\n            return this.v;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Vector2;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (Vector2);\n\n\n//# sourceURL=webpack:///./src/foundation/math/Vector2.ts?");

/***/ }),

/***/ "./src/foundation/math/Vector3.ts":
/*!****************************************!*\
  !*** ./src/foundation/math/Vector3.ts ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _misc_IsUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/IsUtil */ \"./src/foundation/misc/IsUtil.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n\n\nvar Vector3 = /** @class */ (function () {\n    function Vector3(x, y, z) {\n        if (ArrayBuffer.isView(x)) {\n            this.v = x;\n            return;\n        }\n        else if (x == null) {\n            this.v = new Float32Array(0);\n            return;\n        }\n        else {\n            this.v = new Float32Array(3);\n        }\n        if (_misc_IsUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].not.exist(x)) {\n            this.v[0] = 0;\n            this.v[1] = 0;\n            this.v[2] = 0;\n        }\n        else if (Array.isArray(x)) {\n            this.v[0] = x[0];\n            this.v[1] = x[1];\n            this.v[2] = x[2];\n        }\n        else if (typeof x.w !== 'undefined') {\n            this.v[0] = x.x;\n            this.v[1] = x.y;\n            this.v[2] = x.z;\n        }\n        else if (typeof x.z !== 'undefined') {\n            this.v[0] = x.x;\n            this.v[1] = x.y;\n            this.v[2] = x.z;\n        }\n        else if (typeof x.y !== 'undefined') {\n            this.v[0] = x.x;\n            this.v[1] = x.y;\n            this.v[2] = 0;\n        }\n        else {\n            this.v[0] = x;\n            this.v[1] = y;\n            this.v[2] = z;\n        }\n    }\n    Object.defineProperty(Vector3.prototype, \"className\", {\n        get: function () {\n            return this.constructor.name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Vector3, \"compositionType\", {\n        get: function () {\n            return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec3;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Vector3.prototype.isStrictEqual = function (vec) {\n        if (this.x === vec.x && this.y === vec.y && this.z === vec.z) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Vector3.prototype.isEqual = function (vec, delta) {\n        if (delta === void 0) { delta = Number.EPSILON; }\n        if (Math.abs(vec.x - this.x) < delta &&\n            Math.abs(vec.y - this.y) < delta &&\n            Math.abs(vec.z - this.z) < delta) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * Zero Vector\n     */\n    Vector3.zero = function () {\n        return new this(0, 0, 0);\n    };\n    Vector3.one = function () {\n        return new Vector3(1, 1, 1);\n    };\n    Vector3.dummy = function () {\n        return new Vector3(null);\n    };\n    Vector3.prototype.isDummy = function () {\n        if (this.v.length === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Vector3.prototype.clone = function () {\n        return new Vector3(this.x, this.y, this.z);\n    };\n    Vector3.prototype.length = function () {\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    };\n    Vector3.prototype.copyComponents = function (vec) {\n        this.v[0] = vec.v[0];\n        this.v[1] = vec.v[1];\n        this.v[2] = vec.v[2];\n    };\n    /**\n     * to square length(static verison)\n     */\n    Vector3.lengthSquared = function (vec3) {\n        return vec3.x * vec3.x + vec3.y * vec3.y + vec3.z * vec3.z;\n    };\n    Vector3.prototype.lengthTo = function (vec3) {\n        var deltaX = vec3.x - this.x;\n        var deltaY = vec3.y - this.y;\n        var deltaZ = vec3.z - this.z;\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY + deltaZ * deltaZ);\n    };\n    Vector3.lengthBtw = function (lhv, rhv) {\n        var deltaX = rhv.x - lhv.x;\n        var deltaY = rhv.y - lhv.y;\n        var deltaZ = rhv.z - lhv.z;\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY + deltaZ * deltaZ);\n    };\n    /**\n     * dot product\n     */\n    Vector3.prototype.dotProduct = function (vec3) {\n        return this.x * vec3.x + this.y * vec3.y + this.z * vec3.z;\n    };\n    /**\n     * dot product(static version)\n     */\n    Vector3.dotProduct = function (lv, rv) {\n        return lv.x * rv.x + lv.y * rv.y + lv.z * rv.z;\n    };\n    /**\n    * cross product(static version)\n    */\n    Vector3.cross = function (lv, rv) {\n        var x = lv.y * rv.z - lv.z * rv.y;\n        var y = lv.z * rv.x - lv.x * rv.z;\n        var z = lv.x * rv.y - lv.y * rv.x;\n        return new lv.constructor(x, y, z);\n    };\n    /**\n     * normalize(static version)\n     */\n    Vector3.normalize = function (vec3) {\n        var length = vec3.length();\n        var newVec = new vec3.constructor(vec3.x, vec3.y, vec3.z);\n        newVec = Vector3.divide(newVec, length);\n        return newVec;\n    };\n    /**\n     * add value（static version）\n     */\n    Vector3.add = function (lv, rv) {\n        return new lv.constructor(lv.x + rv.x, lv.y + rv.y, lv.z + rv.z);\n    };\n    /**\n     * subtract(subtract)\n     */\n    Vector3.subtract = function (lv, rv) {\n        return new lv.constructor(lv.x - rv.x, lv.y - rv.y, lv.z - rv.z);\n    };\n    /**\n     * divide(static version)\n     */\n    Vector3.divide = function (vec3, val) {\n        if (val !== 0) {\n            return new vec3.constructor(vec3.x / val, vec3.y / val, vec3.z / val);\n        }\n        else {\n            console.error(\"0 division occured!\");\n            return new vec3.constructor(Infinity, Infinity, Infinity);\n        }\n    };\n    /**\n     * multiply(static version)\n     */\n    Vector3.multiply = function (vec3, val) {\n        return new vec3.constructor(vec3.x * val, vec3.y * val, vec3.z * val);\n    };\n    /**\n     * multiply vector(static version)\n     */\n    Vector3.multiplyVector = function (vec3, vec) {\n        return new vec3.constructor(vec3.x * vec.x, vec3.y * vec.y, vec3.z * vec.z);\n    };\n    Vector3.angleOfVectors = function (lhv, rhv) {\n        var cos_sita = Vector3.dotProduct(lhv, rhv) / (lhv.length() * rhv.length());\n        var sita = Math.acos(cos_sita);\n        return sita;\n    };\n    /**\n     * divide vector(static version)\n     */\n    Vector3.divideVector = function (lvec3, rvec3) {\n        return new lvec3.constructor(lvec3.x / rvec3.x, lvec3.y / rvec3.y, lvec3.z / rvec3.z);\n    };\n    /**\n     * change to string\n     */\n    Vector3.prototype.toString = function () {\n        return '(' + this.x + ', ' + this.y + ', ' + this.z + ')';\n    };\n    Object.defineProperty(Vector3.prototype, \"x\", {\n        get: function () {\n            return this.v[0];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Vector3.prototype, \"y\", {\n        get: function () {\n            return this.v[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Vector3.prototype, \"z\", {\n        get: function () {\n            return this.v[2];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Vector3.prototype, \"w\", {\n        get: function () {\n            return 1;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Vector3.prototype, \"raw\", {\n        get: function () {\n            return this.v;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Vector3;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (Vector3);\n//GLBoost['Vector3'] = Vector3;\n\n\n//# sourceURL=webpack:///./src/foundation/math/Vector3.ts?");

/***/ }),

/***/ "./src/foundation/math/Vector4.ts":
/*!****************************************!*\
  !*** ./src/foundation/math/Vector4.ts ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n\nvar Vector4 = /** @class */ (function () {\n    function Vector4(x, y, z, w) {\n        if (ArrayBuffer.isView(x)) {\n            this.v = x;\n            return;\n        }\n        else if (x == null) {\n            this.v = new Float32Array(0);\n            return;\n        }\n        else {\n            this.v = new Float32Array(4);\n        }\n        if (Array.isArray(x)) {\n            this.v[0] = x[0];\n            this.v[1] = x[1];\n            this.v[2] = x[2];\n            this.v[3] = x[3];\n        }\n        else if (typeof x.w !== 'undefined') {\n            this.v[0] = x.x;\n            this.v[1] = x.y;\n            this.v[2] = x.z;\n            this.v[3] = x.w;\n        }\n        else if (typeof x.z !== 'undefined') {\n            this.v[0] = x.x;\n            this.v[1] = x.y;\n            this.v[2] = x.z;\n            this.v[3] = 1;\n        }\n        else if (typeof x.y !== 'undefined') {\n            this.v[0] = x.x;\n            this.v[1] = x.y;\n            this.v[2] = 0;\n            this.v[3] = 1;\n        }\n        else {\n            this.v[0] = x;\n            this.v[1] = y;\n            this.v[2] = z;\n            this.v[3] = w;\n        }\n    }\n    Object.defineProperty(Vector4.prototype, \"className\", {\n        get: function () {\n            return this.constructor.name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Vector4, \"compositionType\", {\n        get: function () {\n            return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__[\"CompositionType\"].Vec4;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Vector4.dummy = function () {\n        return new Vector4(null);\n    };\n    Vector4.prototype.isDummy = function () {\n        if (this.v.length === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Vector4.prototype.isStrictEqual = function (vec) {\n        if (this.v[0] === vec.v[0] && this.v[1] === vec.v[1] && this.v[2] === vec.v[2] && this.v[3] === vec.v[3]) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Vector4.prototype.isEqual = function (vec, delta) {\n        if (delta === void 0) { delta = Number.EPSILON; }\n        if (Math.abs(vec.v[0] - this.v[0]) < delta &&\n            Math.abs(vec.v[1] - this.v[1]) < delta &&\n            Math.abs(vec.v[2] - this.v[2]) < delta &&\n            Math.abs(vec.v[3] - this.v[3]) < delta) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Vector4.prototype.clone = function () {\n        return new this.constructor(this.x, this.y, this.z, this.w);\n    };\n    /**\n     * Zero Vector\n     */\n    Vector4.zero = function () {\n        return new this(0, 0, 0, 1);\n    };\n    Vector4.prototype.length = function () {\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n    };\n    Vector4.prototype.copyComponents = function (vec) {\n        this.v[0] = vec.v[0];\n        this.v[1] = vec.v[1];\n        this.v[2] = vec.v[2];\n        this.v[3] = vec.v[3];\n    };\n    Vector4.normalize = function (vec4) {\n        var length = vec4.length();\n        var newVec = new Vector4(vec4.x, vec4.y, vec4.z, vec4.w);\n        newVec = Vector4.divide(newVec, length);\n        return newVec;\n    };\n    /**\n     * add value（static version）\n     */\n    Vector4.add = function (lv, rv) {\n        return new lv.constructor(lv.x + rv.x, lv.y + rv.y, lv.z + rv.z, lv.z + rv.z);\n    };\n    Vector4.subtract = function (lv, rv) {\n        return new lv.constructor(lv.x - rv.x, lv.y - rv.y, lv.z - rv.z, lv.w - rv.w);\n    };\n    /**\n     * add value except w component（static version）\n     */\n    Vector4.addWithOutW = function (lv, rv) {\n        return new lv.constructor(lv.x + rv.x, lv.y + rv.y, lv.z + rv.z, lv.z);\n    };\n    Vector4.multiply = function (vec4, val) {\n        return new vec4.constructor(vec4.x * val, vec4.y * val, vec4.z * val, vec4.w * val);\n    };\n    Vector4.multiplyVector = function (vec4, vec) {\n        return new vec4.constructor(vec4.x * vec.x, vec4.y * vec.y, vec4.z * vec.z, vec4.w * vec.w);\n    };\n    Vector4.divide = function (vec4, val) {\n        if (val !== 0) {\n            return new vec4.constructor(vec4.x / val, vec4.y / val, vec4.z / val, vec4.w / val);\n        }\n        else {\n            console.warn(\"0 division occured!\");\n            return new vec4.constructor(Infinity, Infinity, Infinity, Infinity);\n        }\n    };\n    Vector4.divideVector = function (lvec4, rvec4) {\n        return new lvec4.constructor(lvec4.x / rvec4.x, lvec4.y / rvec4.y, lvec4.z / rvec4.z, lvec4.w / rvec4.w);\n    };\n    Vector4.prototype.toString = function () {\n        return '(' + this.x + ', ' + this.y + ', ' + this.z + ', ' + this.w + ')';\n    };\n    Object.defineProperty(Vector4.prototype, \"x\", {\n        get: function () {\n            return this.v[0];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Vector4.prototype, \"y\", {\n        get: function () {\n            return this.v[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Vector4.prototype, \"z\", {\n        get: function () {\n            return this.v[2];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Vector4.prototype, \"w\", {\n        get: function () {\n            return this.v[3];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Vector4;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (Vector4);\n// GLBoost[\"Vector4\"] = Vector4;\n\n\n//# sourceURL=webpack:///./src/foundation/math/Vector4.ts?");

/***/ }),

/***/ "./src/foundation/memory/AccessorBase.ts":
/*!***********************************************!*\
  !*** ./src/foundation/memory/AccessorBase.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Vector2 */ \"./src/foundation/math/Vector2.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _math_Matrix33__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/Matrix33 */ \"./src/foundation/math/Matrix33.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar AccessorBase = /** @class */ (function (_super) {\n    __extends(AccessorBase, _super);\n    function AccessorBase(_a) {\n        var bufferView = _a.bufferView, byteOffset = _a.byteOffset, compositionType = _a.compositionType, componentType = _a.componentType, byteStride = _a.byteStride, count = _a.count, raw = _a.raw, max = _a.max, min = _a.min;\n        var _this = _super.call(this) || this;\n        _this.__compositionType = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Unknown;\n        _this.__componentType = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Unknown;\n        _this.__count = 0;\n        _this.__takenCount = 0;\n        _this.__byteStride = 0;\n        _this.__bufferView = bufferView;\n        _this.__byteOffsetInBuffer = bufferView.byteOffset + byteOffset;\n        _this.__compositionType = compositionType;\n        _this.__componentType = componentType;\n        _this.__count = count;\n        _this.__raw = raw.buffer;\n        if (max != null) {\n            _this.__max = max;\n        }\n        if (min != null) {\n            _this.__min = min;\n        }\n        _this.__byteStride = byteStride;\n        if (_this.__byteStride === 0) {\n            _this.__byteStride = _this.__compositionType.getNumberOfComponents() * _this.__componentType.getSizeInBytes();\n        }\n        _this.prepare();\n        return _this;\n    }\n    AccessorBase.prototype.prepare = function () {\n        var typedArrayClass = this.getTypedArrayClass(this.__componentType);\n        this.__typedArrayClass = typedArrayClass;\n        if (this.__componentType.getSizeInBytes() === 8) {\n            if (this.__byteOffsetInBuffer % 8 !== 0) {\n                console.info('Padding added because of byteOffset of accessor is not 8 bytes aligned despite of Double precision.');\n                this.__byteOffsetInBuffer += 8 - this.__byteOffsetInBuffer % 8;\n            }\n        }\n        //  else if (this.__componentType.getSizeInBytes() === 4) {\n        //   if (this.__byteOffsetInBuffer % 4 !== 0) {\n        //     console.info('Padding added because of byteOffset of accessor is not 4 bytes aligned despite of Double precision.');\n        //     this.__byteOffsetInBuffer += 4 - this.__byteOffsetInBuffer % 4;\n        //   }\n        // }\n        if (this.__bufferView.isSoA) {\n            this.__dataView = new DataView(this.__raw, this.__byteOffsetInBuffer, this.__compositionType.getNumberOfComponents() * this.__componentType.getSizeInBytes() * this.__count);\n        }\n        else {\n            this.__dataView = new DataView(this.__raw, this.__byteOffsetInBuffer);\n        }\n        if (this.__byteOffsetInBuffer % this.__componentType.getSizeInBytes() === 0) {\n            this.__typedArray = new typedArrayClass(this.__raw, this.__byteOffsetInBuffer, this.__compositionType.getNumberOfComponents() * this.__count);\n        }\n        this.__dataViewGetter = this.__dataView[this.getDataViewGetter(this.__componentType)].bind(this.__dataView);\n        this.__dataViewSetter = this.__dataView[this.getDataViewSetter(this.__componentType)].bind(this.__dataView);\n    };\n    AccessorBase.prototype.getTypedArrayClass = function (componentType) {\n        switch (componentType) {\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Byte: return Int8Array;\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsignedByte: return Uint8Array;\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Short: return Int16Array;\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsignedShort: return Uint16Array;\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Int: return Int32Array;\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsingedInt: return Uint32Array;\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Float: return Float32Array;\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Double: return Float64Array;\n            default: console.error('Unexpected ComponentType!');\n        }\n    };\n    AccessorBase.prototype.getDataViewGetter = function (componentType) {\n        switch (componentType) {\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Byte: return 'getInt8';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsignedByte: return 'getUint8';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Short: return 'getInt16';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsignedShort: return 'getUint16';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Int: return 'getInt32';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsingedInt: return 'getUint32';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Float: return 'getFloat32';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Double: return 'getFloat64';\n            default: console.error('Unexpected ComponentType!');\n        }\n    };\n    AccessorBase.prototype.getDataViewSetter = function (componentType) {\n        switch (componentType) {\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Byte: return 'setInt8';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsignedByte: return 'setUint8';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Short: return 'setInt16';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsignedShort: return 'setUint16';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Int: return 'setInt32';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsingedInt: return 'setUint32';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Float: return 'setFloat32';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Double: return 'setFloat64';\n            default: console.error('Unexpected ComponentType!');\n        }\n        return undefined;\n    };\n    AccessorBase.prototype.takeOne = function () {\n        var arrayBufferOfBufferView = this.__raw;\n        // let stride = this.__compositionType.getNumberOfComponents() * this.__componentType.getSizeInBytes();\n        // if (this.__bufferView.isAoS) {\n        //   stride = this.__bufferView.byteStride;\n        // }\n        var subTypedArray = new this.__typedArrayClass(arrayBufferOfBufferView, this.__byteOffsetInBuffer + this.__byteStride * this.__takenCount, this.__compositionType.getNumberOfComponents());\n        this.__takenCount += 1;\n        return subTypedArray;\n    };\n    Object.defineProperty(AccessorBase.prototype, \"numberOfComponents\", {\n        get: function () {\n            return this.__compositionType.getNumberOfComponents();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccessorBase.prototype, \"componentSizeInBytes\", {\n        get: function () {\n            return this.__componentType.getSizeInBytes();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccessorBase.prototype, \"elementSizeInBytes\", {\n        get: function () {\n            return this.numberOfComponents * this.componentSizeInBytes;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccessorBase.prototype, \"elementCount\", {\n        get: function () {\n            return this.__dataView.byteLength / (this.numberOfComponents * this.componentSizeInBytes);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccessorBase.prototype, \"byteLength\", {\n        get: function () {\n            return this.__byteStride * this.__count;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccessorBase.prototype, \"componentType\", {\n        get: function () {\n            return this.__componentType;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccessorBase.prototype, \"compositionType\", {\n        get: function () {\n            return this.__compositionType;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AccessorBase.prototype.getTypedArray = function () {\n        if (this.__bufferView.isAoS) {\n            console.warn('Be careful. this referance bufferView is AoS(Array on Structure), it means Interleaved Data. So you can not access your data properly by this TypedArray.');\n        }\n        return this.__typedArray;\n    };\n    Object.defineProperty(AccessorBase.prototype, \"isAoS\", {\n        get: function () {\n            return this.__bufferView.isAoS;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccessorBase.prototype, \"isSoA\", {\n        get: function () {\n            return this.__bufferView.isSoA;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccessorBase.prototype, \"byteStride\", {\n        get: function () {\n            return this.__byteStride;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AccessorBase.prototype.getScalar = function (i, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        return this.__dataViewGetter(this.__byteStride * index, endian);\n    };\n    AccessorBase.prototype.getScalarAt = function (i, compositionOffset, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        return this.__dataViewGetter(this.__byteStride * index + compositionOffset, endian);\n    };\n    AccessorBase.prototype.getVec2AsArray = function (i, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var byteSize = this.componentSizeInBytes;\n        return [this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian)];\n    };\n    AccessorBase.prototype.getVec3AsArray = function (i, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var byteSize = this.componentSizeInBytes;\n        return [this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian)];\n    };\n    AccessorBase.prototype.getVec4AsArray = function (i, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var byteSize = this.componentSizeInBytes;\n        return [this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian)];\n    };\n    AccessorBase.prototype.getMat3AsArray = function (i, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var byteSize = this.componentSizeInBytes;\n        return [\n            this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian),\n            this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 4 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 5 * byteSize, endian),\n            this.__dataViewGetter(this.__byteStride * index + 6 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 7 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 8 * byteSize, endian),\n        ];\n    };\n    AccessorBase.prototype.getMat4AsArray = function (i, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var byteSize = this.componentSizeInBytes;\n        return [\n            this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian),\n            this.__dataViewGetter(this.__byteStride * index + 4 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 5 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 6 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 7 * byteSize, endian),\n            this.__dataViewGetter(this.__byteStride * index + 8 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 9 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 10 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 11 * byteSize, endian),\n            this.__dataViewGetter(this.__byteStride * index + 12 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 13 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 14 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 15 * byteSize, endian),\n        ];\n    };\n    AccessorBase.prototype.getVec2 = function (i, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var byteSize = this.componentSizeInBytes;\n        return new _math_Vector2__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian));\n    };\n    AccessorBase.prototype.getVec3 = function (i, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var byteSize = this.componentSizeInBytes;\n        return new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian));\n    };\n    AccessorBase.prototype.getVec4 = function (i, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var byteSize = this.componentSizeInBytes;\n        return new _math_Vector4__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian));\n    };\n    AccessorBase.prototype.getMat3 = function (i, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var byteSize = this.componentSizeInBytes;\n        return new _math_Matrix33__WEBPACK_IMPORTED_MODULE_6__[\"default\"](this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 4 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 5 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 6 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 7 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 8 * byteSize, endian));\n    };\n    AccessorBase.prototype.getMat4 = function (i, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var byteSize = this.componentSizeInBytes;\n        return new _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"](this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 4 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 5 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 6 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 7 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 8 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 9 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 10 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 11 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 12 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 13 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 14 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 15 * byteSize, endian));\n    };\n    AccessorBase.prototype.setScalar = function (i, value, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        this.__dataViewSetter(this.__byteStride * index, value, endian);\n    };\n    AccessorBase.prototype.setVec2 = function (i, x, y, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var sizeInBytes = this.componentSizeInBytes;\n        this.__dataViewSetter(this.__byteStride * index, x, endian);\n        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, y, endian);\n    };\n    AccessorBase.prototype.setVec3 = function (i, x, y, z, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var sizeInBytes = this.componentSizeInBytes;\n        this.__dataViewSetter(this.__byteStride * index, x, endian);\n        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, y, endian);\n        this.__dataViewSetter(this.__byteStride * index + 2 * sizeInBytes, z, endian);\n    };\n    AccessorBase.prototype.setVec4 = function (i, x, y, z, w, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var sizeInBytes = this.componentSizeInBytes;\n        this.__dataViewSetter(this.__byteStride * index, x, endian);\n        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, y, endian);\n        this.__dataViewSetter(this.__byteStride * index + 2 * sizeInBytes, z, endian);\n        this.__dataViewSetter(this.__byteStride * index + 3 * sizeInBytes, w, endian);\n    };\n    AccessorBase.prototype.setVec2AsVector = function (i, vec, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var sizeInBytes = this.componentSizeInBytes;\n        this.__dataViewSetter(this.__byteStride * index, vec.x, endian);\n        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, vec.y, endian);\n    };\n    AccessorBase.prototype.setVec3AsVector = function (i, vec, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var sizeInBytes = this.componentSizeInBytes;\n        this.__dataViewSetter(this.__byteStride * index, vec.x, endian);\n        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, vec.y, endian);\n        this.__dataViewSetter(this.__byteStride * index + 2 * sizeInBytes, vec.z, endian);\n    };\n    AccessorBase.prototype.setVec4AsVector = function (i, vec, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        var sizeInBytes = this.componentSizeInBytes;\n        this.__dataViewSetter(this.__byteStride * index, vec.x, endian);\n        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, vec.y, endian);\n        this.__dataViewSetter(this.__byteStride * index + 2 * sizeInBytes, vec.z, endian);\n        this.__dataViewSetter(this.__byteStride * index + 3 * sizeInBytes, vec.w, endian);\n    };\n    AccessorBase.prototype.copyFromTypedArray = function (typedArray) {\n        var componentN = this.numberOfComponents;\n        var setter = this['setVec' + componentN];\n        for (var j = 0; j < (typedArray.byteLength / this.componentSizeInBytes); j++) {\n            var idx = Math.floor(j / componentN);\n            var idxN = idx * componentN;\n            switch (componentN) {\n                case 1:\n                    setter.call(this, idx, typedArray[idxN + 0], {});\n                    break;\n                case 2:\n                    setter.call(this, idx, typedArray[idxN + 0], typedArray[idxN + 1], {});\n                    break;\n                case 3:\n                    setter.call(this, idx, typedArray[idxN + 0], typedArray[idxN + 1], typedArray[idxN + 2], {});\n                    break;\n                case 4:\n                    setter.call(this, idx, typedArray[idxN + 0], typedArray[idxN + 1], typedArray[idxN + 2], typedArray[idxN + 3], {});\n                    break;\n                default: throw new Error('Other than vectors are currently not supported.');\n            }\n        }\n    };\n    AccessorBase.prototype.setScalarAt = function (i, conpositionOffset, value, _a) {\n        var indicesAccessor = _a.indicesAccessor, _b = _a.endian, endian = _b === void 0 ? true : _b;\n        var index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        this.__dataViewSetter(this.__byteStride * index + conpositionOffset, value, endian);\n    };\n    AccessorBase.prototype.setElementFromSameCompositionAccessor = function (i, accessor, secondIdx) {\n        var j = (secondIdx != null) ? secondIdx : i;\n        if (this.compositionType.getNumberOfComponents() === 1) {\n            this.setScalar(i, accessor.getScalar(j, {}), {});\n        }\n        else if (this.compositionType.getNumberOfComponents() === 2) {\n            this.setVec2AsVector(i, accessor.getVec2(j, {}), {});\n        }\n        else if (this.compositionType.getNumberOfComponents() === 3) {\n            this.setVec3AsVector(i, accessor.getVec3(j, {}), {});\n        }\n        else if (this.compositionType.getNumberOfComponents() === 4) {\n            this.setVec4AsVector(i, accessor.getVec4(j, {}), {});\n        }\n    };\n    AccessorBase.prototype.addElementFromSameCompositionAccessor = function (i, accessor, coeff, secondIdx) {\n        var j = (secondIdx != null) ? secondIdx : i;\n        if (this.compositionType.getNumberOfComponents() === 1) {\n            this.setScalar(i, this.getScalar(i, {}) + coeff * accessor.getScalar(j, {}), {});\n        }\n        else if (this.compositionType.getNumberOfComponents() === 2) {\n            this.setVec2AsVector(i, _math_Vector2__WEBPACK_IMPORTED_MODULE_3__[\"default\"].add(this.getVec2(i, {}), _math_Vector2__WEBPACK_IMPORTED_MODULE_3__[\"default\"].multiply(accessor.getVec2(j, {}), coeff)), {});\n        }\n        else if (this.compositionType.getNumberOfComponents() === 3) {\n            this.setVec3AsVector(i, _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].add(this.getVec3(i, {}), _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].multiply(accessor.getVec3(j, {}), coeff)), {});\n        }\n        else if (this.compositionType.getNumberOfComponents() === 4) {\n            this.setVec4AsVector(i, _math_Vector4__WEBPACK_IMPORTED_MODULE_5__[\"default\"].add(this.getVec4(i, {}), _math_Vector4__WEBPACK_IMPORTED_MODULE_5__[\"default\"].multiply(accessor.getVec4(j, {}), coeff)), {});\n        }\n    };\n    Object.defineProperty(AccessorBase.prototype, \"arrayBufferOfBufferView\", {\n        get: function () {\n            return this.__raw;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccessorBase.prototype, \"dataViewOfBufferView\", {\n        get: function () {\n            return this.__dataView;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccessorBase.prototype, \"byteOffsetInBufferView\", {\n        get: function () {\n            return this.__byteOffsetInBuffer - this.__bufferView.byteOffset;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccessorBase.prototype, \"byteOffsetInBuffer\", {\n        get: function () {\n            return this.__byteOffsetInBuffer;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccessorBase.prototype, \"bufferView\", {\n        get: function () {\n            return this.__bufferView;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccessorBase.prototype, \"min\", {\n        get: function () {\n            return this.__min;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccessorBase.prototype, \"max\", {\n        get: function () {\n            return this.__max;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AccessorBase.prototype.calcMinMax = function () {\n        var componentN = this.compositionType.getNumberOfComponents();\n        if (componentN === 4) {\n            var minVec4 = [Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE];\n            var maxVec4 = [-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE];\n            for (var i = 0; i < this.elementCount; i++) {\n                var vec4array = this.getVec4AsArray(i, {});\n                for (var j = 0; j < 4; j++) {\n                    if (vec4array[j] < minVec4[j]) {\n                        minVec4[j] = vec4array[j];\n                    }\n                    if (maxVec4[j] < vec4array[j]) {\n                        maxVec4[j] = vec4array[j];\n                    }\n                }\n            }\n            this.__min = minVec4;\n            this.__max = maxVec4;\n        }\n        else if (componentN === 3) {\n            var minVec3 = [Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE];\n            var maxVec3 = [-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE];\n            for (var i = 0; i < this.elementCount; i++) {\n                var vec3array = this.getVec3AsArray(i, {});\n                for (var j = 0; j < 3; j++) {\n                    if (vec3array[j] < minVec3[j]) {\n                        minVec3[j] = vec3array[j];\n                    }\n                    if (maxVec3[j] < vec3array[j]) {\n                        maxVec3[j] = vec3array[j];\n                    }\n                }\n            }\n            this.__min = minVec3;\n            this.__max = maxVec3;\n        }\n        else if (componentN === 2) {\n            var minVec2 = [Number.MAX_VALUE, Number.MAX_VALUE];\n            var maxVec2 = [-Number.MAX_VALUE, -Number.MAX_VALUE];\n            for (var i = 0; i < this.elementCount; i++) {\n                var vec2array = this.getVec2AsArray(i, {});\n                for (var j = 0; j < 2; j++) {\n                    if (vec2array[j] < minVec2[j]) {\n                        minVec2[j] = vec2array[j];\n                    }\n                    if (maxVec2[j] < vec2array[j]) {\n                        maxVec2[j] = vec2array[j];\n                    }\n                }\n            }\n            this.__min = minVec2;\n            this.__max = maxVec2;\n        }\n        else if (componentN === 1) {\n            var min = Number.MAX_VALUE;\n            var max = -Number.MAX_VALUE;\n            for (var i = 0; i < this.elementCount; i++) {\n                var scalar = this.getScalar(i, {});\n                if (scalar < min) {\n                    min = scalar;\n                }\n                if (max < scalar) {\n                    max = scalar;\n                }\n            }\n            this.__min = min;\n            this.__max = max;\n        }\n    };\n    return AccessorBase;\n}(_core_RnObject__WEBPACK_IMPORTED_MODULE_2__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (AccessorBase);\n\n\n//# sourceURL=webpack:///./src/foundation/memory/AccessorBase.ts?");

/***/ }),

/***/ "./src/foundation/memory/Buffer.ts":
/*!*****************************************!*\
  !*** ./src/foundation/memory/Buffer.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _BufferView__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BufferView */ \"./src/foundation/memory/BufferView.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar Buffer = /** @class */ (function (_super) {\n    __extends(Buffer, _super);\n    function Buffer(_a) {\n        var byteLength = _a.byteLength, arrayBuffer = _a.arrayBuffer, name = _a.name;\n        var _this = _super.call(this) || this;\n        _this.__byteLength = 0;\n        _this.__name = '';\n        _this.__takenBytesIndex = 0;\n        _this.__bufferViews = [];\n        _this.__name = name;\n        _this.__byteLength = byteLength;\n        _this.__raw = arrayBuffer;\n        return _this;\n    }\n    Object.defineProperty(Buffer.prototype, \"name\", {\n        get: function () {\n            return this.__name;\n        },\n        set: function (str) {\n            this.__name = str;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Buffer.prototype.getArrayBuffer = function () {\n        return this.__raw;\n    };\n    Buffer.prototype.takeBufferView = function (_a) {\n        var byteLengthToNeed = _a.byteLengthToNeed, byteStride = _a.byteStride, isAoS = _a.isAoS;\n        if (byteLengthToNeed % 4 !== 0) {\n            console.info('Padding bytes added because byteLengthToNeed must be a multiple of 4.');\n            byteLengthToNeed += 4 - (byteLengthToNeed % 4);\n        }\n        // if (byteStride % 4 !== 0) {\n        //   console.info('Padding bytes added, byteStride must be a multiple of 4.');\n        //   byteStride += 4 - (byteStride % 4);\n        // }\n        var array = new Uint8Array(this.__raw, this.__takenBytesIndex, byteLengthToNeed);\n        var bufferView = new _BufferView__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({ buffer: this, byteOffset: this.__takenBytesIndex, byteLength: byteLengthToNeed, raw: array, isAoS: isAoS });\n        bufferView.byteStride = byteStride;\n        this.__takenBytesIndex += Uint8Array.BYTES_PER_ELEMENT * byteLengthToNeed;\n        this.__bufferViews.push(bufferView);\n        return bufferView;\n    };\n    Buffer.prototype.takeBufferViewWithByteOffset = function (_a) {\n        // if (byteLengthToNeed % 4 !== 0) {\n        //   console.info('Padding bytes added because byteLengthToNeed must be a multiple of 4.');\n        //   byteLengthToNeed += 4 - (byteLengthToNeed % 4);\n        // }\n        // if (byteStride % 4 !== 0) {\n        //   console.info('Padding bytes added, byteStride must be a multiple of 4.');\n        //   byteStride += 4 - (byteStride % 4);\n        // }\n        var byteLengthToNeed = _a.byteLengthToNeed, byteStride = _a.byteStride, byteOffset = _a.byteOffset, isAoS = _a.isAoS;\n        var array = new Uint8Array(this.__raw, byteOffset, byteLengthToNeed);\n        var bufferView = new _BufferView__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({ buffer: this, byteOffset: byteOffset, byteLength: byteLengthToNeed, raw: array, isAoS: isAoS });\n        var takenBytesIndex = Uint8Array.BYTES_PER_ELEMENT * byteLengthToNeed + byteOffset;\n        if (this.__takenBytesIndex < takenBytesIndex) {\n            this.__takenBytesIndex = takenBytesIndex;\n        }\n        bufferView.byteStride = byteStride;\n        this.__bufferViews.push(bufferView);\n        return bufferView;\n    };\n    Buffer.prototype._addTakenByteIndex = function (value) {\n        this.__takenBytesIndex = value;\n    };\n    Object.defineProperty(Buffer.prototype, \"byteLength\", {\n        get: function () {\n            return this.__byteLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Buffer.prototype, \"takenSizeInByte\", {\n        get: function () {\n            return this.__takenBytesIndex;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Buffer;\n}(_core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (Buffer);\n\n\n//# sourceURL=webpack:///./src/foundation/memory/Buffer.ts?");

/***/ }),

/***/ "./src/foundation/memory/BufferView.ts":
/*!*********************************************!*\
  !*** ./src/foundation/memory/BufferView.ts ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _AccessorBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AccessorBase */ \"./src/foundation/memory/AccessorBase.ts\");\n/* harmony import */ var _FlexibleAccessor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FlexibleAccessor */ \"./src/foundation/memory/FlexibleAccessor.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar BufferView = /** @class */ (function (_super) {\n    __extends(BufferView, _super);\n    function BufferView(_a) {\n        var buffer = _a.buffer, byteOffset = _a.byteOffset, byteLength = _a.byteLength, raw = _a.raw, isAoS = _a.isAoS;\n        var _this = _super.call(this) || this;\n        _this.__byteStride = 0;\n        _this.__target = 0;\n        _this.__takenByteIndex = 0;\n        _this.__takenByteOffsetOfFirstElement = 0;\n        _this.__accessors = [];\n        _this.__buffer = buffer;\n        _this.__byteOffset = byteOffset;\n        _this.__byteLength = byteLength;\n        _this.__raw = raw;\n        _this.__isAoS = isAoS;\n        return _this;\n    }\n    Object.defineProperty(BufferView.prototype, \"byteStride\", {\n        get: function () {\n            return this.__byteStride;\n        },\n        set: function (stride) {\n            this.__byteStride = stride;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferView.prototype, \"byteLength\", {\n        get: function () {\n            return this.__byteLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferView.prototype, \"byteOffset\", {\n        get: function () {\n            return this.__byteOffset;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferView.prototype, \"buffer\", {\n        get: function () {\n            return this.__buffer;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferView.prototype, \"isSoA\", {\n        get: function () {\n            return !this.__isAoS;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BufferView.prototype.recheckIsSoA = function () {\n        if (this.__accessors.length <= 1) {\n            return true;\n        }\n        var firstStrideBytes = this.__accessors[0].byteStride;\n        var secondStrideBytes = this.__accessors[1].byteStride;\n        var firstElementSizeInBytes = this.__accessors[0].elementSizeInBytes;\n        var secondElementSizeInBytes = this.__accessors[1].elementSizeInBytes;\n        if (firstStrideBytes === secondStrideBytes &&\n            (firstElementSizeInBytes + secondElementSizeInBytes) < firstElementSizeInBytes) {\n            return true;\n        }\n    };\n    Object.defineProperty(BufferView.prototype, \"isAoS\", {\n        get: function () {\n            return this.__isAoS;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BufferView.prototype.getUint8Array = function () {\n        return this.__raw;\n    };\n    BufferView.prototype.takeAccessor = function (_a) {\n        var compositionType = _a.compositionType, componentType = _a.componentType, count = _a.count, max = _a.max, min = _a.min;\n        var byteStride = this.byteStride;\n        var accessor = this.__takeAccessorInner({ compositionType: compositionType, componentType: componentType, count: count, byteStride: byteStride, accessorClass: _AccessorBase__WEBPACK_IMPORTED_MODULE_1__[\"default\"], max: max, min: min });\n        return accessor;\n    };\n    BufferView.prototype.takeFlexibleAccessor = function (_a) {\n        var compositionType = _a.compositionType, componentType = _a.componentType, count = _a.count, byteStride = _a.byteStride, max = _a.max, min = _a.min;\n        var accessor = this.__takeAccessorInner({ compositionType: compositionType, componentType: componentType, count: count, byteStride: byteStride, accessorClass: _FlexibleAccessor__WEBPACK_IMPORTED_MODULE_2__[\"default\"], max: max, min: min });\n        return accessor;\n    };\n    BufferView.prototype.takeAccessorWithByteOffset = function (_a) {\n        var compositionType = _a.compositionType, componentType = _a.componentType, count = _a.count, byteOffset = _a.byteOffset, max = _a.max, min = _a.min;\n        var byteStride = this.byteStride;\n        var accessor = this.__takeAccessorInnerWithByteOffset({ compositionType: compositionType, componentType: componentType, count: count, byteStride: byteStride, byteOffset: byteOffset, accessorClass: _AccessorBase__WEBPACK_IMPORTED_MODULE_1__[\"default\"], max: max, min: min });\n        return accessor;\n    };\n    BufferView.prototype.takeFlexibleAccessorWithByteOffset = function (_a) {\n        var compositionType = _a.compositionType, componentType = _a.componentType, count = _a.count, byteStride = _a.byteStride, byteOffset = _a.byteOffset, max = _a.max, min = _a.min;\n        var accessor = this.__takeAccessorInnerWithByteOffset({ compositionType: compositionType, componentType: componentType, count: count, byteStride: byteStride, byteOffset: byteOffset, accessorClass: _FlexibleAccessor__WEBPACK_IMPORTED_MODULE_2__[\"default\"], max: max, min: min });\n        return accessor;\n    };\n    BufferView.prototype.__takeAccessorInner = function (_a) {\n        var compositionType = _a.compositionType, componentType = _a.componentType, count = _a.count, byteStride = _a.byteStride, accessorClass = _a.accessorClass, max = _a.max, min = _a.min;\n        var byteOffset = 0;\n        if (this.isSoA) {\n            byteOffset = this.__takenByteIndex;\n            this.__takenByteIndex += compositionType.getNumberOfComponents() * componentType.getSizeInBytes() * count;\n        }\n        else {\n            byteOffset = this.__takenByteIndex;\n            this.__takenByteIndex += compositionType.getNumberOfComponents() * componentType.getSizeInBytes();\n        }\n        if (byteOffset % 4 !== 0) {\n            console.info('Padding bytes added because byteOffset is not 4byte aligned.');\n            byteOffset += 4 - byteOffset % 4;\n        }\n        if (this.__byteOffset % 4 !== 0) {\n            console.info('Padding bytes added because byteOffsetFromBuffer is not 4byte aligned.');\n            this.__byteOffset += 4 - this.__byteOffset % 4;\n            this.buffer._addTakenByteIndex(4 - this.__byteOffset % 4);\n        }\n        var accessor = new accessorClass({\n            bufferView: this, byteOffset: byteOffset, compositionType: compositionType, componentType: componentType, byteStride: byteStride, count: count, raw: this.__raw, max: max, min: min\n        });\n        this.__accessors.push(accessor);\n        return accessor;\n    };\n    BufferView.prototype.__takeAccessorInnerWithByteOffset = function (_a) {\n        // if (byteOffset % 4 !== 0) {\n        //   console.info('Padding bytes added because byteOffset is not 4byte aligned.');\n        //   byteOffset += 4 - byteOffset % 4;\n        // }\n        var compositionType = _a.compositionType, componentType = _a.componentType, count = _a.count, byteStride = _a.byteStride, byteOffset = _a.byteOffset, accessorClass = _a.accessorClass, max = _a.max, min = _a.min;\n        // if (this.__byteOffset % 4 !== 0) {\n        //   console.info('Padding bytes added because byteOffsetFromBuffer is not 4byte aligned.');\n        //   this.__byteOffset += 4 - this.__byteOffset % 4;\n        // this.buffer._addTakenByteIndex(4 - this.__byteOffset % 4);\n        // }\n        var accessor = new accessorClass({\n            bufferView: this, byteOffset: byteOffset, compositionType: compositionType, componentType: componentType, byteStride: byteStride, count: count, raw: this.__raw, max: max, min: min\n        });\n        this.__accessors.push(accessor);\n        return accessor;\n    };\n    return BufferView;\n}(_core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (BufferView);\n\n\n//# sourceURL=webpack:///./src/foundation/memory/BufferView.ts?");

/***/ }),

/***/ "./src/foundation/memory/FlexibleAccessor.ts":
/*!***************************************************!*\
  !*** ./src/foundation/memory/FlexibleAccessor.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _AccessorBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AccessorBase */ \"./src/foundation/memory/AccessorBase.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar FlexibleAccessor = /** @class */ (function (_super) {\n    __extends(FlexibleAccessor, _super);\n    function FlexibleAccessor(_a) {\n        var bufferView = _a.bufferView, byteOffset = _a.byteOffset, compositionType = _a.compositionType, componentType = _a.componentType, byteStride = _a.byteStride, count = _a.count, raw = _a.raw;\n        return _super.call(this, { bufferView: bufferView, byteOffset: byteOffset, compositionType: compositionType, componentType: componentType, byteStride: byteStride, count: count, raw: raw }) || this;\n    }\n    return FlexibleAccessor;\n}(_AccessorBase__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (FlexibleAccessor);\n\n\n//# sourceURL=webpack:///./src/foundation/memory/FlexibleAccessor.ts?");

/***/ }),

/***/ "./src/foundation/misc/DataUtil.ts":
/*!*****************************************!*\
  !*** ./src/foundation/misc/DataUtil.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(process, Buffer) {var DataUtil = /** @class */ (function () {\n    function DataUtil() {\n    }\n    DataUtil.isNode = function () {\n        var isNode = (window === void 0 && typeof process !== \"undefined\" && \"function\" !== \"undefined\");\n        return isNode;\n    };\n    DataUtil.btoa = function (str) {\n        var isNode = DataUtil.isNode();\n        if (isNode) {\n            var buffer = void 0;\n            if (Buffer.isBuffer(str)) {\n                buffer = str;\n            }\n            else {\n                buffer = new Buffer(str.toString(), 'binary');\n            }\n            return buffer.toString('base64');\n        }\n        else {\n            return btoa(str);\n        }\n    };\n    DataUtil.atob = function (str) {\n        var isNode = DataUtil.isNode();\n        if (isNode) {\n            return new Buffer(str, 'base64').toString('binary');\n        }\n        else {\n            return atob(str);\n        }\n    };\n    DataUtil.base64ToArrayBuffer = function (dataUri) {\n        var splittedDataUri = dataUri.split(',');\n        var type = splittedDataUri[0].split(':')[1].split(';')[0];\n        var byteString = DataUtil.atob(splittedDataUri[1]);\n        var byteStringLength = byteString.length;\n        var arrayBuffer = new ArrayBuffer(byteStringLength);\n        var uint8Array = new Uint8Array(arrayBuffer);\n        for (var i = 0; i < byteStringLength; i++) {\n            uint8Array[i] = byteString.charCodeAt(i);\n        }\n        return arrayBuffer;\n    };\n    DataUtil.arrayBufferToString = function (arrayBuffer) {\n        if (typeof TextDecoder !== 'undefined') {\n            var textDecoder = new TextDecoder();\n            return textDecoder.decode(arrayBuffer);\n        }\n        else {\n            var bytes = new Uint8Array(arrayBuffer);\n            var result = \"\";\n            var length_1 = bytes.length;\n            for (var i = 0; i < length_1; i++) {\n                result += String.fromCharCode(bytes[i]);\n            }\n            return result;\n        }\n    };\n    DataUtil.stringToBase64 = function (str) {\n        var b64 = null;\n        b64 = DataUtil.btoa(str);\n        return b64;\n    };\n    DataUtil.UInt8ArrayToDataURL = function (uint8array, width, height) {\n        var canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        var ctx = canvas.getContext(\"2d\");\n        var imageData = ctx.createImageData(width, height);\n        for (var i = 0; i < imageData.data.length; i += 4) {\n            imageData.data[i + 0] = uint8array[(height - Math.floor(i / (4 * width))) * (4 * width) + i % (4 * width) + 0];\n            imageData.data[i + 1] = uint8array[(height - Math.floor(i / (4 * width))) * (4 * width) + i % (4 * width) + 1];\n            imageData.data[i + 2] = uint8array[(height - Math.floor(i / (4 * width))) * (4 * width) + i % (4 * width) + 2];\n            imageData.data[i + 3] = uint8array[(height - Math.floor(i / (4 * width))) * (4 * width) + i % (4 * width) + 3];\n        }\n        ctx.putImageData(imageData, 0, 0);\n        canvas.remove();\n        return canvas.toDataURL(\"image/png\");\n    };\n    DataUtil.loadResourceAsync = function (resourceUri, isBinary, resolveCallback, rejectCallback) {\n        return new Promise(function (resolve, reject) {\n            var isNode = DataUtil.isNode();\n            if (isNode) {\n                // let fs = require('fs');\n                // let args: any[] = [resourceUri];\n                // let func: Function = (err:any, response: any) => {\n                //   if (err) {\n                //     if (rejectCallback) {\n                //       rejectCallback(reject, err);\n                //     }\n                //     return;\n                //   }\n                //   if (isBinary) {\n                //     let buffer = new Buffer(response, 'binary');\n                //     let uint8Buffer = new Uint8Array(buffer);\n                //     response = uint8Buffer.buffer;\n                //   }\n                //   resolveCallback(resolve, response);\n                // };\n                // if (isBinary) {\n                //   args.push(func);\n                // } else {\n                //   args.push('utf8');\n                //   args.push(func);\n                // }\n                // fs.readFile.apply(fs, args);\n            }\n            else {\n                var xmlHttp_1 = new XMLHttpRequest();\n                if (isBinary) {\n                    xmlHttp_1.onload = function (oEvent) {\n                        var response = null;\n                        if (isBinary) {\n                            response = xmlHttp_1.response;\n                        }\n                        else {\n                            response = xmlHttp_1.responseText;\n                        }\n                        resolveCallback(resolve, response);\n                    };\n                    xmlHttp_1.open(\"GET\", resourceUri, true);\n                    xmlHttp_1.responseType = \"arraybuffer\";\n                }\n                else {\n                    xmlHttp_1.onreadystatechange = function () {\n                        if (xmlHttp_1.readyState === 4 && (Math.floor(xmlHttp_1.status / 100) === 2 || xmlHttp_1.status === 0)) {\n                            var response = null;\n                            if (isBinary) {\n                                response = xmlHttp_1.response;\n                            }\n                            else {\n                                response = xmlHttp_1.responseText;\n                            }\n                            resolveCallback(resolve, response);\n                        }\n                        else {\n                            if (rejectCallback) {\n                                rejectCallback(reject, xmlHttp_1.status);\n                            }\n                        }\n                    };\n                    xmlHttp_1.open(\"GET\", resourceUri, true);\n                }\n                xmlHttp_1.send(null);\n            }\n        });\n    };\n    return DataUtil;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (DataUtil);\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/process/browser.js */ \"./node_modules/process/browser.js\"), __webpack_require__(/*! ./../../../node_modules/buffer/index.js */ \"./node_modules/buffer/index.js\").Buffer))\n\n//# sourceURL=webpack:///./src/foundation/misc/DataUtil.ts?");

/***/ }),

/***/ "./src/foundation/misc/EnumIO.ts":
/*!***************************************!*\
  !*** ./src/foundation/misc/EnumIO.ts ***!
  \***************************************/
/*! exports provided: EnumClass, _from, _fromString */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EnumClass\", function() { return EnumClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_from\", function() { return _from; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_fromString\", function() { return _fromString; });\n// This code idea is from https://qiita.com/junkjunctions/items/5a6d8bed8df8eb3acceb\nvar EnumClass = /** @class */ (function () {\n    function EnumClass(_a) {\n        var index = _a.index, str = _a.str;\n        if (EnumClass.__indices.get(this.constructor) == null) {\n            EnumClass.__indices.set(this.constructor, []);\n        }\n        if (EnumClass.__strings.get(this.constructor) == null) {\n            EnumClass.__strings.set(this.constructor, []);\n        }\n        if (EnumClass.__indices.get(this.constructor).indexOf(index) !== -1) {\n            throw new Error('Dont use duplicate index.');\n        }\n        if (EnumClass.__strings.get(this.constructor).indexOf(str) !== -1) {\n            throw new Error('Dont use duplicate str.');\n        }\n        this.index = index;\n        this.str = str;\n        EnumClass.__indices.get(this.constructor).push(index);\n        EnumClass.__strings.get(this.constructor).push(str);\n    }\n    EnumClass.prototype.toString = function () {\n        return this.str;\n    };\n    EnumClass.prototype.toJSON = function () {\n        return this.index;\n    };\n    EnumClass.__indices = new Map();\n    EnumClass.__strings = new Map();\n    return EnumClass;\n}());\n\nfunction _from(_a) {\n    var typeList = _a.typeList, index = _a.index;\n    var match = typeList.find(function (type) { return type.index === index; });\n    if (!match) {\n        throw new Error(\"Invalid PrimitiveMode index: [\" + index + \"]\");\n    }\n    return match;\n}\nfunction _fromString(_a) {\n    var typeList = _a.typeList, str = _a.str;\n    var match = typeList.find(function (type) { return type.str.toLowerCase() === str.toLowerCase(); });\n    if (!match) {\n        throw new Error(\"Invalid PrimitiveMode index: [\" + str + \"]\");\n    }\n    return match;\n}\n\n\n//# sourceURL=webpack:///./src/foundation/misc/EnumIO.ts?");

/***/ }),

/***/ "./src/foundation/misc/IsUtil.ts":
/*!***************************************!*\
  !*** ./src/foundation/misc/IsUtil.ts ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar __read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar IsUtil = {\n    not: {},\n    all: {},\n    any: {},\n    _not: function (fn) {\n        return function () {\n            return !fn.apply(null, __spread(arguments));\n        };\n    },\n    _all: function (fn) {\n        return function () {\n            if (Array.isArray(arguments[0])) {\n                return arguments[0].every(fn);\n            }\n            return __spread(arguments).every(fn);\n        };\n    },\n    _any: function (fn) {\n        return function () {\n            if (Array.isArray(arguments[0])) {\n                return arguments[0].some(fn);\n            }\n            return __spread(arguments).some(fn);\n        };\n    },\n    defined: function (val) {\n        return val !== void 0;\n    },\n    undefined: function (val) {\n        return val === void 0;\n    },\n    null: function (val) {\n        return val === null;\n    },\n    // is NOT null or undefined\n    exist: function (val) {\n        return val != null;\n    },\n    function: function (val) {\n        return typeof val === 'function';\n    }\n};\nvar _loop_1 = function (fn) {\n    if (IsUtil.hasOwnProperty(fn)) {\n        var interfaces = ['not', 'all', 'any'];\n        if (fn.indexOf('_') === -1 && !interfaces.includes(fn)) {\n            interfaces.forEach(function (itf) {\n                var op = '_' + itf;\n                IsUtil[itf][fn] = IsUtil[op](IsUtil[fn]);\n            });\n        }\n    }\n};\nfor (var fn in IsUtil) {\n    _loop_1(fn);\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (IsUtil);\n\n\n//# sourceURL=webpack:///./src/foundation/misc/IsUtil.ts?");

/***/ }),

/***/ "./src/foundation/renderer/CGAPIResourceRepository.ts":
/*!************************************************************!*\
  !*** ./src/foundation/renderer/CGAPIResourceRepository.ts ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _system_ModuleManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system/ModuleManager */ \"./src/foundation/system/ModuleManager.ts\");\n\nvar CGAPIResourceRepository = /** @class */ (function () {\n    function CGAPIResourceRepository() {\n    }\n    CGAPIResourceRepository.getWebGLResourceRepository = function () {\n        var moduleName = 'webgl';\n        var moduleManager = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        var webglModule = moduleManager.getModule(moduleName);\n        var webGLResourceRepository = webglModule.WebGLResourceRepository.getInstance();\n        return webGLResourceRepository;\n    };\n    CGAPIResourceRepository.InvalidCGAPIResourceUid = -1;\n    return CGAPIResourceRepository;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (CGAPIResourceRepository);\n\n\n//# sourceURL=webpack:///./src/foundation/renderer/CGAPIResourceRepository.ts?");

/***/ }),

/***/ "./src/foundation/renderer/Expression.ts":
/*!***********************************************!*\
  !*** ./src/foundation/renderer/Expression.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar Expression = /** @class */ (function (_super) {\n    __extends(Expression, _super);\n    function Expression() {\n        var _this = _super.call(this) || this;\n        _this.__renderPasses = [];\n        return _this;\n    }\n    Expression.prototype.addRenderPasses = function (renderPasses) {\n        this.__renderPasses = this.__renderPasses.concat(renderPasses);\n    };\n    Expression.prototype.clearRenderPasses = function () {\n        this.__renderPasses.length = 0;\n    };\n    Object.defineProperty(Expression.prototype, \"renderPasses\", {\n        get: function () {\n            return this.__renderPasses;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Expression;\n}(_core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (Expression);\n\n\n//# sourceURL=webpack:///./src/foundation/renderer/Expression.ts?");

/***/ }),

/***/ "./src/foundation/renderer/FrameBuffer.ts":
/*!************************************************!*\
  !*** ./src/foundation/renderer/FrameBuffer.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _definitions_RenderBufferTarget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/RenderBufferTarget */ \"./src/foundation/definitions/RenderBufferTarget.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar FrameBuffer = /** @class */ (function (_super) {\n    __extends(FrameBuffer, _super);\n    function FrameBuffer() {\n        var _this = _super.call(this) || this;\n        _this.__colorAttachments = [];\n        _this.cgApiResourceUid = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].InvalidCGAPIResourceUid;\n        _this.width = 0;\n        _this.height = 0;\n        _this.__colorAttachmentMap = new Map();\n        return _this;\n    }\n    Object.defineProperty(FrameBuffer.prototype, \"colorAttachmentsRenderBufferTargets\", {\n        get: function () {\n            return Array.from(this.__colorAttachmentMap.keys());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FrameBuffer.prototype, \"colorAttachments\", {\n        get: function () {\n            return this.__colorAttachments;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FrameBuffer.prototype, \"depthAttachment\", {\n        get: function () {\n            return this.__depthAttachment;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FrameBuffer.prototype, \"stencilAttachement\", {\n        get: function () {\n            return this.__stencilAttachment;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FrameBuffer.prototype, \"depthStancilAttachment\", {\n        get: function () {\n            return this.__depthStencilAttachment;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FrameBuffer.prototype.create = function (width, height) {\n        this.width = width;\n        this.height = height;\n        var webGLResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        this.cgApiResourceUid = webGLResourceRepository.createFrameBufferObject();\n        return this.cgApiResourceUid;\n    };\n    Object.defineProperty(FrameBuffer.prototype, \"framebufferUID\", {\n        get: function () {\n            return this.cgApiResourceUid;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FrameBuffer.prototype.discard = function () {\n        var webGLResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        webGLResourceRepository.deleteFrameBufferObject(this.cgApiResourceUid);\n    };\n    FrameBuffer.prototype.setColorAttachmentAt = function (index, renderable) {\n        if (renderable.width !== this.width || renderable.height !== this.height) {\n            return false;\n        }\n        this.__colorAttachments[index] = renderable;\n        var webglResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        webglResourceRepository.attachColorBufferToFrameBufferObject(this, index, renderable);\n        this.__colorAttachmentMap.set(_definitions_RenderBufferTarget__WEBPACK_IMPORTED_MODULE_2__[\"RenderBufferTarget\"].from(index), renderable);\n        return true;\n    };\n    FrameBuffer.prototype.setDepthAttachment = function (renderable) {\n        if (renderable.width !== this.width || renderable.height !== this.height) {\n            return false;\n        }\n        this.__depthAttachment = renderable;\n        var webglResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        webglResourceRepository.attachDepthBufferToFrameBufferObject(this, renderable);\n        return true;\n    };\n    FrameBuffer.prototype.setStencilAttachment = function (renderable) {\n        if (renderable.width !== this.width || renderable.height !== this.height) {\n            return false;\n        }\n        this.__stencilAttachment = renderable;\n        var webglResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        webglResourceRepository.attachStencilBufferToFrameBufferObject(this, renderable);\n        return true;\n    };\n    FrameBuffer.prototype.setDepthStencilAttachment = function (renderable) {\n        if (renderable.width !== this.width || renderable.height !== this.height) {\n            return false;\n        }\n        this.__depthStencilAttachment = renderable;\n        var webglResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        webglResourceRepository.attachDepthStencilBufferToFrameBufferObject(this, renderable);\n        return true;\n    };\n    return FrameBuffer;\n}(_core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (FrameBuffer);\n\n\n//# sourceURL=webpack:///./src/foundation/renderer/FrameBuffer.ts?");

/***/ }),

/***/ "./src/foundation/renderer/RenderPass.ts":
/*!***********************************************!*\
  !*** ./src/foundation/renderer/RenderPass.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _components_MeshComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (undefined && undefined.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\n\n\n\n\nvar RenderPass = /** @class */ (function (_super) {\n    __extends(RenderPass, _super);\n    function RenderPass() {\n        var _this = _super.call(this) || this;\n        _this.__entities = [];\n        _this.toClearColorBuffer = false;\n        _this.toClearDepthBuffer = true;\n        _this.toClearStencilBuffer = false;\n        _this.clearColor = new _math_Vector4__WEBPACK_IMPORTED_MODULE_3__[\"default\"](1, 1, 1, 1);\n        _this.clearDepth = 1;\n        _this.clearStencil = 0;\n        return _this;\n    }\n    RenderPass.prototype.addEntities = function (entities) {\n        var e_1, _a;\n        try {\n            for (var entities_1 = __values(entities), entities_1_1 = entities_1.next(); !entities_1_1.done; entities_1_1 = entities_1.next()) {\n                var entity = entities_1_1.value;\n                var sceneGraphComponent = entity.getSceneGraph();\n                var collectedSgComponents = _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].flattenHierarchy(sceneGraphComponent, false);\n                var collectedEntities = collectedSgComponents.map(function (sg) { return sg.entity; });\n                // Eliminate duplicates\n                var map = this.__entities.concat(collectedEntities).reduce(function (map, entity) {\n                    map.set(entity.entityUID, entity);\n                    return map;\n                }, new Map());\n                this.__entities = Array.from(map.values());\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (entities_1_1 && !entities_1_1.done && (_a = entities_1.return)) _a.call(entities_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        this.__meshComponents = void 0;\n        this.__collectMeshComponents();\n    };\n    Object.defineProperty(RenderPass.prototype, \"entities\", {\n        get: function () {\n            return this.__entities;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RenderPass.prototype.clearEntities = function () {\n        this.__meshComponents = void 0;\n        this.__entities = [];\n    };\n    RenderPass.prototype.__collectMeshComponents = function () {\n        var _this = this;\n        if (this.__meshComponents == null) {\n            this.__meshComponents = [];\n            this.__entities.filter(function (entity) {\n                var meshComponent = entity.getComponent(_components_MeshComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n                if (meshComponent) {\n                    _this.__meshComponents.push(meshComponent);\n                }\n            });\n        }\n    };\n    Object.defineProperty(RenderPass.prototype, \"meshComponents\", {\n        get: function () {\n            this.__collectMeshComponents();\n            return this.__meshComponents;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RenderPass.prototype.setFramebuffer = function (framebuffer) {\n        this.__frameBuffer = framebuffer;\n        this.setViewport(new _math_Vector4__WEBPACK_IMPORTED_MODULE_3__[\"default\"](0, 0, framebuffer.width, framebuffer.height));\n    };\n    RenderPass.prototype.getFramebuffer = function () {\n        return this.__frameBuffer;\n    };\n    RenderPass.prototype.setViewport = function (vec) {\n        this.__viewport = vec;\n    };\n    RenderPass.prototype.getViewport = function () {\n        return this.__viewport;\n    };\n    return RenderPass;\n}(_core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (RenderPass);\n\n\n//# sourceURL=webpack:///./src/foundation/renderer/RenderPass.ts?");

/***/ }),

/***/ "./src/foundation/system/ModuleManager.ts":
/*!************************************************!*\
  !*** ./src/foundation/system/ModuleManager.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar ModuleManager = /** @class */ (function () {\n    function ModuleManager() {\n        this.__modules = new Map();\n    }\n    ModuleManager.prototype.loadModule = function (moduleName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var module;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(moduleName.toLowerCase() === 'webgl')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, __webpack_require__.e(/*! import() | webgl */ \"webgl\").then(__webpack_require__.bind(null, /*! ../../webgl/main */ \"./src/webgl/main.ts\"))];\n                    case 1:\n                        module = _a.sent();\n                        return [3 /*break*/, 8];\n                    case 2:\n                        if (!(moduleName.toLowerCase() === 'effekseer')) return [3 /*break*/, 4];\n                        return [4 /*yield*/, __webpack_require__.e(/*! import() | effekseer */ \"effekseer\").then(__webpack_require__.bind(null, /*! ../../effekseer/main */ \"./src/effekseer/main.ts\"))];\n                    case 3:\n                        module = _a.sent();\n                        return [3 /*break*/, 8];\n                    case 4:\n                        if (!(moduleName.toLowerCase() === 'sparkgear')) return [3 /*break*/, 6];\n                        return [4 /*yield*/, __webpack_require__.e(/*! import() | sparkgear */ \"sparkgear\").then(__webpack_require__.bind(null, /*! ../../sparkgear/main */ \"./src/sparkgear/main.ts\"))];\n                    case 5:\n                        module = _a.sent();\n                        return [3 /*break*/, 8];\n                    case 6:\n                        if (!(moduleName.toLowerCase() === 'pbr')) return [3 /*break*/, 8];\n                        return [4 /*yield*/, __webpack_require__.e(/*! import() | pbr */ \"pbr\").then(__webpack_require__.bind(null, /*! ../../pbr/main */ \"./src/pbr/main.ts\"))];\n                    case 7:\n                        module = _a.sent();\n                        _a.label = 8;\n                    case 8:\n                        this.__modules.set(moduleName, module);\n                        console.log('Module Loaded:', module);\n                        return [2 /*return*/, module.default];\n                }\n            });\n        });\n    };\n    ModuleManager.prototype.getModule = function (moduleName) {\n        return this.__modules.get(moduleName).default;\n    };\n    ModuleManager.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new ModuleManager();\n        }\n        return this.__instance;\n    };\n    return ModuleManager;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (ModuleManager);\n\n\n//# sourceURL=webpack:///./src/foundation/system/ModuleManager.ts?");

/***/ }),

/***/ "./src/foundation/system/System.ts":
/*!*****************************************!*\
  !*** ./src/foundation/system/System.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/ProcessApproach */ \"./src/foundation/definitions/ProcessApproach.ts\");\n/* harmony import */ var _ModuleManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ModuleManager */ \"./src/foundation/system/ModuleManager.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _renderer_Expression__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../renderer/Expression */ \"./src/foundation/renderer/Expression.ts\");\n/* harmony import */ var _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../renderer/RenderPass */ \"./src/foundation/renderer/RenderPass.ts\");\n/* harmony import */ var _components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/MeshRendererComponent */ \"./src/foundation/components/MeshRendererComponent.ts\");\n/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n\n\n\n\n\n\n\n\n\n\nvar System = /** @class */ (function () {\n    function System() {\n        this.__processStages = [\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].Create,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].Load,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].Mount,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].Logic,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].PreRender,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].Render,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].Unmount,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].Discard\n        ];\n        this.__componentRepository = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\n        this.__entityRepository = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getInstance();\n        this.__processApproach = _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__[\"ProcessApproach\"].None;\n        this.__webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getWebGLResourceRepository();\n        this.__localExpression = new _renderer_Expression__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n        this.__localRenderPass = new _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_6__[\"default\"]();\n        this.__localExpression.addRenderPasses([this.__localRenderPass]);\n    }\n    System.prototype.process = function (expression) {\n        var _this = this;\n        if (this.__processApproach === _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__[\"ProcessApproach\"].None) {\n            throw new Error('Choose a process approach first.');\n        }\n        var exp = expression;\n        if (expression == null) {\n            exp = this.__localExpression;\n            this.__localRenderPass.clearEntities();\n            this.__localRenderPass.addEntities(this.__entityRepository._getEntities());\n            this.__localRenderPass.cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance().getComponent(_components_CameraComponent__WEBPACK_IMPORTED_MODULE_9__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_9__[\"default\"].main);\n        }\n        this.__processStages.forEach(function (stage) {\n            var methodName = stage.getMethodName();\n            var componentTids = _this.__componentRepository.getComponentTIDs();\n            componentTids.forEach(function (componentTid) {\n                var loopN = 1;\n                var renderPass;\n                if (componentTid === _components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"].componentTID) {\n                    loopN = exp.renderPasses.length;\n                }\n                for (var i = 0; i < loopN; i++) {\n                    renderPass = exp.renderPasses[i];\n                    if (componentTid === _components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"].componentTID && (stage == _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].Render)) {\n                        _this.__webglResourceRepository.bindFramebuffer(renderPass.getFramebuffer());\n                        _this.__webglResourceRepository.setViewport(renderPass.getViewport());\n                        _this.__webglResourceRepository.setDrawTargets(renderPass.getFramebuffer());\n                        _this.__webglResourceRepository.clearFrameBuffer(renderPass);\n                    }\n                    var componentClass = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getComponentClass(componentTid);\n                    var componentClass_commonMethod = componentClass['common_' + methodName];\n                    if (componentClass_commonMethod) {\n                        componentClass_commonMethod({ processApproach: _this.__processApproach, renderPass: renderPass });\n                    }\n                    componentClass.updateComponentsOfEachProcessStage(componentClass, stage, _this.__componentRepository, renderPass);\n                    componentClass.process({\n                        componentType: componentClass,\n                        processStage: stage,\n                        processApproach: _this.__processApproach,\n                        componentRepository: _this.__componentRepository,\n                        strategy: _this.__webglStrategy,\n                        renderPass: renderPass\n                    });\n                }\n            });\n        });\n    };\n    System.prototype.setProcessApproachAndCanvas = function (approach, canvas) {\n        var moduleManager = _ModuleManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInstance();\n        var moduleName = 'webgl';\n        var webglModule = moduleManager.getModule(moduleName);\n        this.__webglStrategy = webglModule.getRenderingStrategy(approach);\n        var repo = webglModule.WebGLResourceRepository.getInstance();\n        var gl;\n        if (approach === _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__[\"ProcessApproach\"].DataTextureWebGL2 ||\n            approach === _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__[\"ProcessApproach\"].UBOWebGL2 ||\n            approach === _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__[\"ProcessApproach\"].TransformFeedbackWebGL2) {\n            gl = canvas.getContext('webgl2');\n        }\n        else {\n            gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n        }\n        repo.addWebGLContext(gl, canvas, true);\n        this.__processApproach = approach;\n        return gl;\n    };\n    Object.defineProperty(System.prototype, \"processApproach\", {\n        get: function () {\n            return this.__processApproach;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    System.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new System();\n        }\n        return this.__instance;\n    };\n    return System;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (System);\n\n\n//# sourceURL=webpack:///./src/foundation/system/System.ts?");

/***/ }),

/***/ "./src/foundation/textures/AbstractTexture.ts":
/*!****************************************************!*\
  !*** ./src/foundation/textures/AbstractTexture.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar AbstractTexture = /** @class */ (function (_super) {\n    __extends(AbstractTexture, _super);\n    function AbstractTexture() {\n        var _this = _super.call(this) || this;\n        _this.__width = 0;\n        _this.__height = 0;\n        _this.cgApiResourceUid = -1;\n        _this.__isTextureReady = false;\n        _this.__startedToLoad = false;\n        _this.__name = 'untitled';\n        _this.__textureUid = ++AbstractTexture.__textureUidCount;\n        return _this;\n    }\n    Object.defineProperty(AbstractTexture.prototype, \"textureUID\", {\n        get: function () {\n            return this.__textureUid;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractTexture.prototype, \"width\", {\n        get: function () {\n            return this.__width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractTexture.prototype, \"height\", {\n        get: function () {\n            return this.__height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractTexture.prototype, \"isTextureReady\", {\n        get: function () {\n            return this.__isTextureReady;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractTexture.prototype, \"startedToLoad\", {\n        get: function () {\n            return this.__startedToLoad;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * get a value nearest power of two.\n     *\n     * @param x texture size.\n     * @returns a value nearest power of two.\n     */\n    AbstractTexture.prototype.__getNearestPowerOfTwo = function (x) {\n        return Math.pow(2, Math.round(Math.log(x) / Math.LN2));\n    };\n    Object.defineProperty(AbstractTexture.prototype, \"htmlImageElement\", {\n        get: function () {\n            return this.__htmlImageElement;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractTexture.prototype, \"htmlCanvasElement\", {\n        get: function () {\n            return this.__htmlCanvasElement;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AbstractTexture.prototype, \"uri\", {\n        get: function () {\n            return this.__uri;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AbstractTexture.getRhodoniteTexture = function (textureUid) {\n        return this.__textureMap.get(textureUid);\n    };\n    Object.defineProperty(AbstractTexture.prototype, \"name\", {\n        get: function () {\n            return this.__name;\n        },\n        set: function (name) {\n            this.__name = name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AbstractTexture.InvalidTextureUid = -1;\n    AbstractTexture.__textureUidCount = AbstractTexture.InvalidTextureUid;\n    AbstractTexture.__textureMap = new Map();\n    return AbstractTexture;\n}(_core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (AbstractTexture);\n\n\n//# sourceURL=webpack:///./src/foundation/textures/AbstractTexture.ts?");

/***/ }),

/***/ "./src/foundation/textures/CubeTexture.ts":
/*!************************************************!*\
  !*** ./src/foundation/textures/CubeTexture.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractTexture */ \"./src/foundation/textures/AbstractTexture.ts\");\n/* harmony import */ var _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../webgl/WebGLResourceRepository */ \"./src/webgl/WebGLResourceRepository.ts\");\n/* harmony import */ var _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/HdriFormat */ \"./src/foundation/definitions/HdriFormat.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\nvar CubeTexture = /** @class */ (function (_super) {\n    __extends(CubeTexture, _super);\n    function CubeTexture() {\n        var _this = _super.call(this) || this;\n        _this.mipmapLevelNumber = 1;\n        _this.hdriFormat = _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_2__[\"HdriFormat\"].LDR_SRGB;\n        _this.isNamePosNeg = false;\n        return _this;\n    }\n    CubeTexture.prototype.loadTextureImages = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this.__startedToLoad = true;\n                        _a = this;\n                        return [4 /*yield*/, _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance().createCubeTextureFromFiles(this.baseUriToLoad, this.mipmapLevelNumber, this.isNamePosNeg, this.hdriFormat)];\n                    case 1:\n                        _a.cgApiResourceUid = _b.sent();\n                        this.__isTextureReady = true;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CubeTexture.prototype.loadTextureImagesAsync = function () {\n        var _this = this;\n        this.__startedToLoad = true;\n        _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance().createCubeTextureFromFiles(this.baseUriToLoad, this.mipmapLevelNumber, this.isNamePosNeg, this.hdriFormat).then(function (cubeTextureUid) {\n            _this.cgApiResourceUid = cubeTextureUid;\n        }).then(function () {\n            _this.__isTextureReady = true;\n        });\n    };\n    return CubeTexture;\n}(_AbstractTexture__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (CubeTexture);\n\n\n//# sourceURL=webpack:///./src/foundation/textures/CubeTexture.ts?");

/***/ }),

/***/ "./src/foundation/textures/RenderBuffer.ts":
/*!*************************************************!*\
  !*** ./src/foundation/textures/RenderBuffer.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar RenderBuffer = /** @class */ (function (_super) {\n    __extends(RenderBuffer, _super);\n    function RenderBuffer() {\n        var _this = _super.call(this) || this;\n        _this.width = 0;\n        _this.height = 0;\n        _this.cgApiResourceUid = -1;\n        return _this;\n    }\n    RenderBuffer.prototype.create = function (width, height, internalFormat) {\n        this.width = width;\n        this.height = height;\n        var webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        this.cgApiResourceUid = webglResourceRepository.createRenderBuffer(width, height, internalFormat);\n    };\n    RenderBuffer.prototype.discard = function () {\n        var webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        webglResourceRepository.deleteRenderBuffer(this.cgApiResourceUid);\n    };\n    return RenderBuffer;\n}(_core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (RenderBuffer);\n\n\n//# sourceURL=webpack:///./src/foundation/textures/RenderBuffer.ts?");

/***/ }),

/***/ "./src/foundation/textures/RenderTargetTexture.ts":
/*!********************************************************!*\
  !*** ./src/foundation/textures/RenderTargetTexture.ts ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _system_ModuleManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system/ModuleManager */ \"./src/foundation/system/ModuleManager.ts\");\n/* harmony import */ var _AbstractTexture__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractTexture */ \"./src/foundation/textures/AbstractTexture.ts\");\n/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/TextureParameter */ \"./src/foundation/definitions/TextureParameter.ts\");\n/* harmony import */ var _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/PixelFormat */ \"./src/foundation/definitions/PixelFormat.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar RenderTargetTexture = /** @class */ (function (_super) {\n    __extends(RenderTargetTexture, _super);\n    function RenderTargetTexture() {\n        var _this = _super.call(this) || this;\n        _this.__fbo = -1;\n        return _this;\n    }\n    RenderTargetTexture.prototype.create = function (_a) {\n        var width = _a.width, height = _a.height, _b = _a.level, level = _b === void 0 ? 0 : _b, _c = _a.internalFormat, internalFormat = _c === void 0 ? _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_3__[\"PixelFormat\"].RGBA : _c, _d = _a.format, format = _d === void 0 ? _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_3__[\"PixelFormat\"].RGBA : _d, _e = _a.type, type = _e === void 0 ? _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].UnsignedByte : _e, _f = _a.magFilter, magFilter = _f === void 0 ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Linear : _f, _g = _a.minFilter, minFilter = _g === void 0 ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Linear : _g, _h = _a.wrapS, wrapS = _h === void 0 ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].ClampToEdge : _h, _j = _a.wrapT, wrapT = _j === void 0 ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].ClampToEdge : _j;\n        this.__width = width;\n        this.__height = height;\n        var moduleManager = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        var moduleName = 'webgl';\n        var webglModule = moduleManager.getModule(moduleName);\n        var webGLResourceRepository = webglModule.WebGLResourceRepository.getInstance();\n        var texture = webGLResourceRepository.createRenderTargetTexture({ width: width, height: height, level: level, internalFormat: internalFormat, format: format, type: type, magFilter: magFilter, minFilter: minFilter, wrapS: wrapS, wrapT: wrapT });\n        this.cgApiResourceUid = texture;\n        _AbstractTexture__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__textureMap.set(texture, this);\n    };\n    Object.defineProperty(RenderTargetTexture.prototype, \"fbo\", {\n        get: function () {\n            return this.__fbo;\n        },\n        set: function (fbo) {\n            this.__fbo = fbo;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return RenderTargetTexture;\n}(_AbstractTexture__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (RenderTargetTexture);\n\n\n//# sourceURL=webpack:///./src/foundation/textures/RenderTargetTexture.ts?");

/***/ }),

/***/ "./src/foundation/textures/Texture.ts":
/*!********************************************!*\
  !*** ./src/foundation/textures/Texture.ts ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/PixelFormat */ \"./src/foundation/definitions/PixelFormat.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/TextureParameter */ \"./src/foundation/definitions/TextureParameter.ts\");\n/* harmony import */ var _system_ModuleManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../system/ModuleManager */ \"./src/foundation/system/ModuleManager.ts\");\n/* harmony import */ var _AbstractTexture__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AbstractTexture */ \"./src/foundation/textures/AbstractTexture.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Texture = /** @class */ (function (_super) {\n    __extends(Texture, _super);\n    function Texture() {\n        return _super.call(this) || this;\n    }\n    Texture.prototype.__getResizedCanvas = function (image) {\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = this.__getNearestPowerOfTwo(image.width);\n        canvas.height = this.__getNearestPowerOfTwo(image.height);\n        var ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n        return canvas;\n    };\n    Texture.prototype.generateTextureFromImage = function (image) {\n        this.__startedToLoad = true;\n        this.__htmlImageElement = image;\n        var imgCanvas = this.__getResizedCanvas(image);\n        this.__htmlCanvasElement = imgCanvas;\n        this.__width = imgCanvas.width;\n        this.__height = imgCanvas.height;\n        var moduleManager = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInstance();\n        var moduleName = 'webgl';\n        var webglModule = moduleManager.getModule(moduleName);\n        var texture = webglModule.WebGLResourceRepository.getInstance().createTexture(imgCanvas, {\n            level: 0, internalFormat: _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__[\"PixelFormat\"].RGBA, width: this.__width, height: this.__height,\n            border: 0, format: _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__[\"PixelFormat\"].RGBA, type: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Float, magFilter: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Linear, minFilter: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].LinearMipmapLinear,\n            wrapS: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Repeat, wrapT: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Repeat, generateMipmap: true, anisotropy: true\n        });\n        this.cgApiResourceUid = texture;\n        this.__isTextureReady = true;\n        this.__uri = image.src;\n        _AbstractTexture__WEBPACK_IMPORTED_MODULE_4__[\"default\"].__textureMap.set(texture, this);\n    };\n    Texture.prototype.generateTextureFromUri = function (imageUri) {\n        var _this = this;\n        this.__uri = imageUri;\n        this.__startedToLoad = true;\n        return new Promise(function (resolve, reject) {\n            _this.__img = new Image();\n            if (!imageUri.match(/^data:/)) {\n                _this.__img.crossOrigin = 'Anonymous';\n            }\n            _this.__img.onload = function () {\n                _this.__htmlImageElement = _this.__img;\n                var imgCanvas = _this.__getResizedCanvas(_this.__img);\n                _this.__htmlCanvasElement = imgCanvas;\n                _this.__width = imgCanvas.width;\n                _this.__height = imgCanvas.height;\n                var moduleManager = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInstance();\n                var moduleName = 'webgl';\n                var webglModule = moduleManager.getModule(moduleName);\n                var texture = webglModule.WebGLResourceRepository.getInstance().createTexture(imgCanvas, {\n                    level: 0, internalFormat: _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__[\"PixelFormat\"].RGBA, width: _this.__width, height: _this.__height,\n                    border: 0, format: _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__[\"PixelFormat\"].RGBA, type: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Float, magFilter: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Linear, minFilter: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Linear,\n                    wrapS: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Repeat, wrapT: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Repeat, generateMipmap: true, anisotropy: true\n                });\n                _this.cgApiResourceUid = texture;\n                _this.__isTextureReady = true;\n                _AbstractTexture__WEBPACK_IMPORTED_MODULE_4__[\"default\"].__textureMap.set(texture, _this);\n                resolve();\n            };\n            _this.__img.src = imageUri;\n        });\n    };\n    return Texture;\n}(_AbstractTexture__WEBPACK_IMPORTED_MODULE_4__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (Texture);\n\n\n//# sourceURL=webpack:///./src/foundation/textures/Texture.ts?");

/***/ }),

/***/ "./src/webgl/WebGLContextWrapper.ts":
/*!******************************************!*\
  !*** ./src/webgl/WebGLContextWrapper.ts ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _WebGLExtension__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WebGLExtension */ \"./src/webgl/WebGLExtension.ts\");\n\nvar WebGLContextWrapper = /** @class */ (function () {\n    function WebGLContextWrapper(gl, canvas) {\n        this.__webglVersion = 1;\n        this.width = 0;\n        this.height = 0;\n        this.__extensions = new Map();\n        this.__gl = gl;\n        this.width = canvas.width;\n        this.height = canvas.height;\n        this.canvas = canvas;\n        if (this.__gl.constructor.name === 'WebGL2RenderingContext') {\n            this.__webglVersion = 2;\n        }\n        else {\n            this.webgl1ExtVAO = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].VertexArrayObject);\n            this.webgl1ExtIA = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].InstancedArrays);\n            this.webgl1ExtTF = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].TextureFloat);\n            this.webgl1ExtTHF = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].TextureHalfFloat);\n            this.webgl1ExtTFL = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].TextureFloatLinear);\n            this.webgl1ExtTHFL = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].TextureHalfFloatLinear);\n            this.webgl1ExtTFA = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].TextureFilterAnisotropic);\n            this.webgl1ExtEIUI = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].ElementIndexUint);\n            this.webgl1ExtSTL = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].ShaderTextureLod);\n            this.webgl1ExtDRV = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].ShaderDerivatives);\n            this.webgl1ExtDB = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].DrawBuffers);\n        }\n    }\n    WebGLContextWrapper.prototype.getRawContext = function () {\n        return this.__gl;\n    };\n    WebGLContextWrapper.prototype.isSupportWebGL1Extension = function (webGLExtension) {\n        if (this.__getExtension(webGLExtension)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Object.defineProperty(WebGLContextWrapper.prototype, \"isWebGL2\", {\n        get: function () {\n            if (this.__webglVersion === 2) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WebGLContextWrapper.prototype.createVertexArray = function () {\n        if (this.isWebGL2) {\n            return this.__gl.createVertexArray();\n        }\n        else {\n            if (this.webgl1ExtVAO != null) {\n                return this.webgl1ExtVAO.createVertexArrayOES();\n            }\n        }\n    };\n    WebGLContextWrapper.prototype.bindVertexArray = function (vao) {\n        if (this.isWebGL2) {\n            this.__gl.bindVertexArray(vao);\n        }\n        else {\n            if (this.webgl1ExtVAO != null) {\n                this.webgl1ExtVAO.bindVertexArrayOES(vao);\n            }\n        }\n    };\n    WebGLContextWrapper.prototype.vertexAttribDivisor = function (index, divisor) {\n        if (this.isWebGL2) {\n            this.__gl.vertexAttribDivisor(index, divisor);\n        }\n        else {\n            this.webgl1ExtIA.vertexAttribDivisorANGLE(index, divisor);\n        }\n    };\n    WebGLContextWrapper.prototype.drawElementsInstanced = function (primitiveMode, indexCount, type, offset, instanceCount) {\n        if (this.isWebGL2) {\n            this.__gl.drawElementsInstanced(primitiveMode, indexCount, type, offset, instanceCount);\n        }\n        else {\n            this.webgl1ExtIA.drawElementsInstancedANGLE(primitiveMode, indexCount, type, offset, instanceCount);\n        }\n    };\n    WebGLContextWrapper.prototype.colorAttachiment = function (index) {\n        return this.webgl1ExtDB ?\n            this.webgl1ExtDB[\"COLOR_ATTACHMENT\" + index + \"_WEBGL\"] :\n            this.__gl[\"COLOR_ATTACHMENT\" + index];\n    };\n    WebGLContextWrapper.prototype.drawBuffers = function (buffers) {\n        var gl = this.__gl;\n        if (buffers.length === 0) {\n            return;\n        }\n        var buffer = buffers;\n        if (this.isWebGL2) {\n            gl.drawBuffers(buffers.map(function (buf) { return gl[buf.str]; }));\n            buffer = gl[buffer[0].str];\n        }\n        else if (this.webgl1ExtDB) {\n            this.webgl1ExtDB.drawBuffersWEBGL(buffers.map(function (buf) { return gl[buf.str]; }));\n            buffer = gl[buffer[0].str];\n        }\n        if (buffer === gl.NONE) {\n            gl.colorMask(false, false, false, false);\n        }\n        else {\n            gl.colorMask(true, true, true, true);\n        }\n    };\n    WebGLContextWrapper.prototype.__getExtension = function (extension) {\n        var gl = this.__gl;\n        if (!this.__extensions.has(extension)) {\n            var extObj = gl.getExtension(extension.toString());\n            if (extObj == null) {\n                var text = \"The library does not support this environment because the \" + extension.toString() + \" is not available\";\n                if (console.error != null) {\n                    console.error(text);\n                }\n                else {\n                    console.log(text);\n                }\n            }\n            this.__extensions.set(extension, extObj);\n            return extObj;\n        }\n        return this.__extensions.get(extension);\n    };\n    return WebGLContextWrapper;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (WebGLContextWrapper);\n\n\n//# sourceURL=webpack:///./src/webgl/WebGLContextWrapper.ts?");

/***/ }),

/***/ "./src/webgl/WebGLExtension.ts":
/*!*************************************!*\
  !*** ./src/webgl/WebGLExtension.ts ***!
  \*************************************/
/*! exports provided: WebGLExtension */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WebGLExtension\", function() { return WebGLExtension; });\n/* harmony import */ var _foundation_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar WebGLExtensionClass = /** @class */ (function (_super) {\n    __extends(WebGLExtensionClass, _super);\n    function WebGLExtensionClass(_a) {\n        var index = _a.index, str = _a.str;\n        return _super.call(this, { index: index, str: str }) || this;\n    }\n    return WebGLExtensionClass;\n}(_foundation_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"]));\nvar VertexArrayObject = new WebGLExtensionClass({ index: 1, str: 'OES_vertex_array_object' });\nvar TextureFloat = new WebGLExtensionClass({ index: 2, str: 'OES_texture_float' });\nvar TextureHalfFloat = new WebGLExtensionClass({ index: 3, str: 'OES_texture_half_float' });\nvar TextureFloatLinear = new WebGLExtensionClass({ index: 4, str: 'OES_texture_float_linear' });\nvar TextureHalfFloatLinear = new WebGLExtensionClass({ index: 5, str: 'OES_texture_half_float_linear' });\nvar InstancedArrays = new WebGLExtensionClass({ index: 6, str: 'ANGLE_instanced_arrays' });\nvar TextureFilterAnisotropic = new WebGLExtensionClass({ index: 7, str: 'EXT_texture_filter_anisotropic' });\nvar ElementIndexUint = new WebGLExtensionClass({ index: 8, str: 'OES_element_index_uint' });\nvar ShaderTextureLod = new WebGLExtensionClass({ index: 9, str: 'EXT_shader_texture_lod' });\nvar ShaderDerivatives = new WebGLExtensionClass({ index: 10, str: 'OES_standard_derivatives' });\nvar DrawBuffers = new WebGLExtensionClass({ index: 11, str: 'WEBGL_draw_buffers' });\nvar typeList = [VertexArrayObject, TextureFloat, TextureHalfFloat, TextureFloatLinear,\n    TextureHalfFloatLinear, InstancedArrays, TextureFilterAnisotropic, ElementIndexUint, ShaderTextureLod, ShaderDerivatives, DrawBuffers];\nfunction from(_a) {\n    var index = _a.index;\n    return Object(_foundation_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList: typeList, index: index });\n}\nvar WebGLExtension = Object.freeze({\n    VertexArrayObject: VertexArrayObject, TextureFloat: TextureFloat, TextureHalfFloat: TextureHalfFloat, TextureFloatLinear: TextureFloatLinear, TextureHalfFloatLinear: TextureHalfFloatLinear,\n    InstancedArrays: InstancedArrays, TextureFilterAnisotropic: TextureFilterAnisotropic, ElementIndexUint: ElementIndexUint, ShaderTextureLod: ShaderTextureLod, ShaderDerivatives: ShaderDerivatives, DrawBuffers: DrawBuffers\n});\n\n\n//# sourceURL=webpack:///./src/webgl/WebGLExtension.ts?");

/***/ }),

/***/ "./src/webgl/WebGLResourceRepository.ts":
/*!**********************************************!*\
  !*** ./src/webgl/WebGLResourceRepository.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/definitions/TextureParameter */ \"./src/foundation/definitions/TextureParameter.ts\");\n/* harmony import */ var _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/definitions/PixelFormat */ \"./src/foundation/definitions/PixelFormat.ts\");\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../foundation/definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _WebGLContextWrapper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./WebGLContextWrapper */ \"./src/webgl/WebGLContextWrapper.ts\");\n/* harmony import */ var _foundation_math_MathUtil__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../foundation/math/MathUtil */ \"./src/foundation/math/MathUtil.ts\");\n/* harmony import */ var _foundation_textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../foundation/textures/RenderTargetTexture */ \"./src/foundation/textures/RenderTargetTexture.ts\");\n/* harmony import */ var _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../foundation/definitions/HdriFormat */ \"./src/foundation/definitions/HdriFormat.ts\");\n/* harmony import */ var _foundation_definitions_RenderBufferTarget__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../foundation/definitions/RenderBufferTarget */ \"./src/foundation/definitions/RenderBufferTarget.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (undefined && undefined.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\n\n\n\n\n\n\n\n\n\n\n\nvar WebGLResourceRepository = /** @class */ (function (_super) {\n    __extends(WebGLResourceRepository, _super);\n    function WebGLResourceRepository() {\n        var _this = _super.call(this) || this;\n        _this.__webglContexts = new Map();\n        _this.__resourceCounter = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].InvalidCGAPIResourceUid;\n        _this.__webglResources = new Map();\n        return _this;\n    }\n    WebGLResourceRepository.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new (WebGLResourceRepository)();\n        }\n        return this.__instance;\n    };\n    WebGLResourceRepository.prototype.addWebGLContext = function (gl, canvas, asCurrent) {\n        var glw = new _WebGLContextWrapper__WEBPACK_IMPORTED_MODULE_6__[\"default\"](gl, canvas);\n        this.__webglContexts.set('default', glw);\n        if (asCurrent) {\n            this.__glw = glw;\n        }\n    };\n    Object.defineProperty(WebGLResourceRepository.prototype, \"currentWebGLContextWrapper\", {\n        get: function () {\n            return this.__glw;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WebGLResourceRepository.prototype.getResourceNumber = function () {\n        return ++this.__resourceCounter;\n    };\n    WebGLResourceRepository.prototype.getWebGLResource = function (WebGLResourceHandle) {\n        return this.__webglResources.get(WebGLResourceHandle);\n    };\n    WebGLResourceRepository.prototype.createIndexBuffer = function (accsessor) {\n        var gl = this.__glw.getRawContext();\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        var ibo = gl.createBuffer();\n        var resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, ibo);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n        //    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, accsessor.bufferView.buffer.getArrayBuffer(), gl.STATIC_DRAW);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, accsessor.getTypedArray(), gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n        return resourceHandle;\n    };\n    WebGLResourceRepository.prototype.createVertexBuffer = function (accessor) {\n        var gl = this.__glw.getRawContext();\n        ;\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        var vbo = gl.createBuffer();\n        var resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, vbo);\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n        gl.bufferData(gl.ARRAY_BUFFER, accessor.bufferView.getUint8Array(), gl.STATIC_DRAW);\n        //    gl.bufferData(gl.ARRAY_BUFFER, accessor.getTypedArray(), gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        return resourceHandle;\n    };\n    WebGLResourceRepository.prototype.resendVertexBuffer = function (primitive, vboHandles) {\n        var _this = this;\n        var gl = this.__glw.getRawContext();\n        ;\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        var vbo = gl.createBuffer();\n        var resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, vbo);\n        primitive.attributeAccessors.forEach(function (accessor, i) {\n            var vbo = _this.getWebGLResource(vboHandles[i]);\n            gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n            gl.bufferData(gl.ARRAY_BUFFER, accessor.bufferView.getUint8Array(), gl.STATIC_DRAW);\n            //    gl.bufferData(gl.ARRAY_BUFFER, accessor.getTypedArray(), gl.STATIC_DRAW);\n            gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        });\n    };\n    WebGLResourceRepository.prototype.createVertexArray = function () {\n        var gl = this.__glw;\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        var vao = this.__glw.createVertexArray();\n        var resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, vao);\n        return resourceHandle;\n    };\n    WebGLResourceRepository.prototype.bindTexture2D = function (textureSlotIndex, textureUid) {\n        var gl = this.__glw.getRawContext();\n        gl.activeTexture(gl['TEXTURE' + textureSlotIndex]);\n        var texture = this.getWebGLResource(textureUid);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n    };\n    WebGLResourceRepository.prototype.bindTextureCube = function (textureSlotIndex, textureUid) {\n        var gl = this.__glw.getRawContext();\n        gl.activeTexture(gl['TEXTURE' + textureSlotIndex]);\n        var texture = this.getWebGLResource(textureUid);\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);\n    };\n    WebGLResourceRepository.prototype.createVertexDataResources = function (primitive) {\n        var _this = this;\n        var gl = this.__glw.getRawContext();\n        var vaoHandle = this.createVertexArray();\n        var iboHandle;\n        if (primitive.hasIndices()) {\n            iboHandle = this.createIndexBuffer(primitive.indicesAccessor);\n        }\n        var attributesFlags = [];\n        for (var i = 0; i < _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].AttributeTypeNumber; i++) {\n            attributesFlags[i] = false;\n        }\n        var vboHandles = [];\n        primitive.attributeAccessors.forEach(function (accessor, i) {\n            var vboHandle = _this.createVertexBuffer(accessor);\n            var slotIdx = primitive.attributeSemantics[i].getAttributeSlot();\n            attributesFlags[slotIdx] = true;\n            vboHandles.push(vboHandle);\n        });\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n        return { vaoHandle: vaoHandle, iboHandle: iboHandle, vboHandles: vboHandles, attributesFlags: attributesFlags, setComplete: false };\n    };\n    WebGLResourceRepository.prototype.createShaderProgram = function (_a) {\n        var vertexShaderStr = _a.vertexShaderStr, fragmentShaderStr = _a.fragmentShaderStr, attributeNames = _a.attributeNames, attributeSemantics = _a.attributeSemantics;\n        var gl = this.__glw.getRawContext();\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        gl.shaderSource(vertexShader, vertexShaderStr);\n        gl.compileShader(vertexShader);\n        this.__checkShaderCompileStatus(vertexShader, vertexShaderStr);\n        var shaderProgram = gl.createProgram();\n        gl.attachShader(shaderProgram, vertexShader);\n        var fragmentShader;\n        if (fragmentShaderStr != null) {\n            fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n            gl.shaderSource(fragmentShader, fragmentShaderStr);\n            gl.compileShader(fragmentShader);\n            this.__checkShaderCompileStatus(fragmentShader, fragmentShaderStr);\n            gl.attachShader(shaderProgram, fragmentShader);\n        }\n        attributeNames.forEach(function (attributeName, i) {\n            gl.bindAttribLocation(shaderProgram, attributeSemantics[i].getAttributeSlot(), attributeName);\n        });\n        gl.linkProgram(shaderProgram);\n        var resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, shaderProgram);\n        this.__checkShaderProgramLinkStatus(shaderProgram);\n        gl.deleteShader(vertexShader);\n        if (fragmentShaderStr != null) {\n            gl.deleteShader(fragmentShader);\n        }\n        return resourceHandle;\n    };\n    WebGLResourceRepository.prototype.__addLineNumber = function (shaderString) {\n        var shaderTextLines = shaderString.split(/\\r\\n|\\r|\\n/);\n        var shaderTextWithLineNumber = '';\n        for (var i = 0; i < shaderTextLines.length; i++) {\n            var lineIndex = i + 1;\n            var splitter = ' : ';\n            if (lineIndex < 10) {\n                splitter = '  : ';\n            }\n            else if (lineIndex >= 100) {\n                splitter = ': ';\n            }\n            shaderTextWithLineNumber += lineIndex + splitter + shaderTextLines[i] + '\\n';\n        }\n        return shaderTextWithLineNumber;\n    };\n    WebGLResourceRepository.prototype.__checkShaderCompileStatus = function (shader, shaderText) {\n        var gl = this.__glw.getRawContext();\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n            console.log(this.__addLineNumber(shaderText));\n            throw new Error('An error occurred compiling the shaders:' + gl.getShaderInfoLog(shader));\n        }\n    };\n    WebGLResourceRepository.prototype.__checkShaderProgramLinkStatus = function (shaderProgram) {\n        var gl = this.__glw.getRawContext();\n        // If creating the shader program failed, alert\n        if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n            throw new Error('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram));\n        }\n    };\n    WebGLResourceRepository.prototype.setupUniformLocations = function (shaderProgramUid, dataArray) {\n        var e_1, _a;\n        var gl = this.__glw.getRawContext();\n        var shaderProgram = this.getWebGLResource(shaderProgramUid);\n        try {\n            for (var dataArray_1 = __values(dataArray), dataArray_1_1 = dataArray_1.next(); !dataArray_1_1.done; dataArray_1_1 = dataArray_1.next()) {\n                var data = dataArray_1_1.value;\n                var prefix = '';\n                if (data.prefix != null) {\n                    prefix = data.prefix;\n                }\n                var semanticSingular = void 0;\n                var semanticPlural = void 0;\n                if (data.semantic) {\n                    semanticSingular = data.semantic.singularStr;\n                    semanticPlural = data.semantic.pluralStr;\n                }\n                else {\n                    semanticSingular = data.semanticStr;\n                    semanticPlural = data.semanticStr;\n                }\n                var identifier = semanticSingular;\n                if (data.index != null) {\n                    identifier += '_' + data.index;\n                }\n                if (data.isPlural) {\n                    shaderProgram[identifier] = gl.getUniformLocation(shaderProgram, 'u_' + prefix + semanticPlural);\n                }\n                else {\n                    shaderProgram[identifier] = gl.getUniformLocation(shaderProgram, 'u_' + prefix + semanticSingular);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (dataArray_1_1 && !dataArray_1_1.done && (_a = dataArray_1.return)) _a.call(dataArray_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    WebGLResourceRepository.prototype.__isUniformValueDirty = function (isVector, shaderProgram, identifier, _a, delta) {\n        var x = _a.x, y = _a.y, z = _a.z, w = _a.w;\n        if (delta === void 0) { delta = Number.EPSILON; }\n        var result = false;\n        var value_x = shaderProgram[identifier + '_value_x'];\n        var value_y = shaderProgram[identifier + '_value_y'];\n        var value_z = shaderProgram[identifier + '_value_z'];\n        var value_w = shaderProgram[identifier + '_value_w'];\n        if (isVector) {\n            for (var i = 0; i < x.length; i++) {\n                if (value_x == null) {\n                    result = true;\n                    break;\n                }\n                if (Math.abs(x[i] - value_x) >= delta) {\n                    result = true;\n                    break;\n                }\n            }\n        }\n        else {\n            if (value_x == null) {\n                result = true;\n            }\n            else {\n                var compare = function () {\n                    if (x != null && Math.abs(x - value_x) >= delta) {\n                        return true;\n                    }\n                    if (y != null && Math.abs(y - value_y) >= delta) {\n                        return true;\n                    }\n                    if (z != null && Math.abs(z - value_z) >= delta) {\n                        return true;\n                    }\n                    if (w != null && Math.abs(w - value_w) >= delta) {\n                        return true;\n                    }\n                    return false;\n                };\n                result = compare();\n            }\n        }\n        shaderProgram[identifier + '_value_x'] = x;\n        shaderProgram[identifier + '_value_y'] = y;\n        shaderProgram[identifier + '_value_z'] = z;\n        shaderProgram[identifier + '_value_w'] = w;\n        return result;\n    };\n    WebGLResourceRepository.prototype.setUniformValue = function (shaderProgramUid, uniformSemantic, isMatrix, componentNumber, componentType, isVector, _a, _b, index) {\n        var x = _a.x, y = _a.y, z = _a.z, w = _a.w;\n        var _c = _b.force, force = _c === void 0 ? true : _c, delta = _b.delta;\n        var identifier = (typeof uniformSemantic === 'string') ? uniformSemantic : uniformSemantic.str;\n        if (index != null) {\n            identifier += '_' + index;\n        }\n        var gl = this.__glw.getRawContext();\n        var shaderProgram = this.getWebGLResource(shaderProgramUid);\n        if (shaderProgram[identifier] == null) {\n            return false;\n        }\n        // if (!force && !this.__isUniformValueDirty(isVector, shaderProgram, identifier, {x, y, z, w}, delta)) {\n        //   return false;\n        // }\n        if (isMatrix) {\n            if (componentNumber === 4) {\n                gl.uniformMatrix4fv(shaderProgram[identifier], false, x);\n            }\n            else {\n                gl.uniformMatrix3fv(shaderProgram[identifier], false, x);\n            }\n        }\n        else if (isVector) {\n            var funcName = 'uniform' + componentNumber + componentType + 'v';\n            gl[funcName](shaderProgram[identifier], x);\n        }\n        else {\n            var funcName = 'uniform' + componentNumber + componentType;\n            if (componentNumber === 1) {\n                gl[funcName](shaderProgram[identifier], x);\n            }\n            if (componentNumber === 2) {\n                gl[funcName](shaderProgram[identifier], x, y);\n            }\n            if (componentNumber === 3) {\n                gl[funcName](shaderProgram[identifier], x, y, z);\n            }\n            if (componentNumber === 4) {\n                gl[funcName](shaderProgram[identifier], x, y, z, w);\n            }\n        }\n        return true;\n    };\n    WebGLResourceRepository.prototype.setVertexDataToPipeline = function (_a, primitive, instanceIDBufferUid) {\n        var _this = this;\n        var vaoHandle = _a.vaoHandle, iboHandle = _a.iboHandle, vboHandles = _a.vboHandles;\n        if (instanceIDBufferUid === void 0) { instanceIDBufferUid = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].InvalidCGAPIResourceUid; }\n        var gl = this.__glw.getRawContext();\n        var vao = this.getWebGLResource(vaoHandle);\n        // VAO bind\n        this.__glw.bindVertexArray(vao);\n        // IBO bind\n        if (iboHandle != null) {\n            var ibo = this.getWebGLResource(iboHandle);\n            if (ibo != null) {\n                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n            }\n            else {\n                throw new Error('Nothing Element Array Buffer!');\n            }\n        }\n        // bind vertex attributes to VBO's\n        vboHandles.forEach(function (vboHandle, i) {\n            var vbo = _this.getWebGLResource(vboHandle);\n            if (vbo != null) {\n                gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n            }\n            else {\n                throw new Error('Nothing Element Array Buffer at index ' + i);\n            }\n            gl.enableVertexAttribArray(primitive.attributeSemantics[i].getAttributeSlot());\n            gl.vertexAttribPointer(primitive.attributeSemantics[i].getAttributeSlot(), primitive.attributeCompositionTypes[i].getNumberOfComponents(), primitive.attributeComponentTypes[i].index, false, primitive.attributeAccessors[i].byteStride, primitive.attributeAccessors[i].byteOffsetInBufferView);\n        });\n        /// for InstanceIDBuffer\n        if (instanceIDBufferUid !== _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].InvalidCGAPIResourceUid) {\n            var instanceIDBuffer = this.getWebGLResource(instanceIDBufferUid);\n            if (instanceIDBuffer != null) {\n                gl.bindBuffer(gl.ARRAY_BUFFER, instanceIDBuffer);\n            }\n            else {\n                throw new Error('Nothing Element Array Buffer at index');\n            }\n            gl.enableVertexAttribArray(_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Instance.getAttributeSlot());\n            gl.vertexAttribPointer(_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Instance.getAttributeSlot(), _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar.getNumberOfComponents(), _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float.index, false, 0, 0);\n            this.__glw.vertexAttribDivisor(_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Instance.getAttributeSlot(), 1);\n        }\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        this.__glw.bindVertexArray(null);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    };\n    WebGLResourceRepository.prototype.createTexture = function (data, _a) {\n        var level = _a.level, internalFormat = _a.internalFormat, width = _a.width, height = _a.height, border = _a.border, format = _a.format, type = _a.type, magFilter = _a.magFilter, minFilter = _a.minFilter, wrapS = _a.wrapS, wrapT = _a.wrapT, generateMipmap = _a.generateMipmap, anisotropy = _a.anisotropy;\n        var gl = this.__glw.getRawContext();\n        var texture = gl.createTexture();\n        var resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, texture);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        if (data instanceof HTMLImageElement || data instanceof HTMLCanvasElement) {\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat.index, format.index, type.index, data);\n        }\n        else {\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat.index, width, height, border, format.index, type.index, data);\n        }\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS.index);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT.index);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter.index);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter.index);\n        if (_foundation_math_MathUtil__WEBPACK_IMPORTED_MODULE_7__[\"MathUtil\"].isPowerOfTwoTexture(width, height)) {\n            if (anisotropy && this.__glw.webgl1ExtTFA) {\n                gl.texParameteri(gl.TEXTURE_2D, this.__glw.webgl1ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT, 4);\n            }\n            if (generateMipmap) {\n                gl.generateMipmap(gl.TEXTURE_2D);\n            }\n        }\n        return resourceHandle;\n    };\n    WebGLResourceRepository.prototype.createFrameBufferObject = function () {\n        var gl = this.__glw.getRawContext();\n        var fbo = gl.createFramebuffer();\n        var resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, fbo);\n        return resourceHandle;\n    };\n    WebGLResourceRepository.prototype.attachColorBufferToFrameBufferObject = function (framebuffer, index, renderable) {\n        var gl = this.__glw.getRawContext();\n        var fbo = this.getWebGLResource(framebuffer.framebufferUID);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n        var renderableWebGLResource = this.getWebGLResource(renderable.cgApiResourceUid);\n        var attachimentId = this.__glw.colorAttachiment(index);\n        if (renderable instanceof _foundation_textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_8__[\"default\"]) {\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, attachimentId, gl.TEXTURE_2D, renderableWebGLResource, 0);\n        }\n        else {\n            // It's must be RenderBuffer\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachimentId, gl.RENDERBUFFER, renderableWebGLResource);\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    };\n    WebGLResourceRepository.prototype.attachDepthBufferToFrameBufferObject = function (framebuffer, renderable) {\n        this.__attachDepthOrStencilBufferToFrameBufferObject(framebuffer, renderable, 36096); // gl.DETPH_ATTACHMENT\n    };\n    WebGLResourceRepository.prototype.attachStencilBufferToFrameBufferObject = function (framebuffer, renderable) {\n        this.__attachDepthOrStencilBufferToFrameBufferObject(framebuffer, renderable, 36128); // gl.STENCIL_ATTACHMENT\n    };\n    WebGLResourceRepository.prototype.attachDepthStencilBufferToFrameBufferObject = function (framebuffer, renderable) {\n        this.__attachDepthOrStencilBufferToFrameBufferObject(framebuffer, renderable, 33306); // gl.DEPTH_STENCIL_ATTACHMENT\n    };\n    WebGLResourceRepository.prototype.__attachDepthOrStencilBufferToFrameBufferObject = function (framebuffer, renderable, attachmentType) {\n        var gl = this.__glw.getRawContext();\n        var fbo = this.getWebGLResource(framebuffer.framebufferUID);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n        var renderableWebGLResource = this.getWebGLResource(renderable.cgApiResourceUid);\n        if (renderable instanceof _foundation_textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_8__[\"default\"]) {\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.ATTA, gl.TEXTURE_2D, renderableWebGLResource, 0);\n        }\n        else {\n            // It's must be RenderBuffer\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachmentType, gl.RENDERBUFFER, renderableWebGLResource);\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    };\n    WebGLResourceRepository.prototype.createRenderBuffer = function (width, height, internalFormat) {\n        var gl = this.__glw.getRawContext();\n        var renderBuffer = gl.createRenderbuffer();\n        var resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, renderBuffer);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, renderBuffer);\n        gl.renderbufferStorage(gl.RENDERBUFFER, gl[internalFormat.str], width, height);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        return resourceHandle;\n    };\n    WebGLResourceRepository.prototype.setDrawTargets = function (framebuffer) {\n        if (framebuffer) {\n            this.__glw.drawBuffers(framebuffer.colorAttachmentsRenderBufferTargets);\n        }\n        else {\n            this.__glw.drawBuffers([_foundation_definitions_RenderBufferTarget__WEBPACK_IMPORTED_MODULE_10__[\"RenderBufferTarget\"].Back]);\n        }\n    };\n    WebGLResourceRepository.prototype.bindFramebuffer = function (framebuffer) {\n        var gl = this.__glw.getRawContext();\n        if (framebuffer) {\n            var fboUid = framebuffer.cgApiResourceUid;\n            var fbo = this.getWebGLResource(fboUid);\n            gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n        }\n        else {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        }\n    };\n    WebGLResourceRepository.prototype.unbindFramebuffer = function () {\n        var gl = this.__glw.getRawContext();\n        gl.bindFramebuffer(null);\n    };\n    WebGLResourceRepository.prototype.createRenderTargetTexture = function (_a) {\n        var width = _a.width, height = _a.height, level = _a.level, internalFormat = _a.internalFormat, format = _a.format, type = _a.type, magFilter = _a.magFilter, minFilter = _a.minFilter, wrapS = _a.wrapS, wrapT = _a.wrapT;\n        var gl = this.__glw.getRawContext();\n        var texture = gl.createTexture();\n        var resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, texture);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter.index);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter.index);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS.index);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT.index);\n        if (\n        // if WebGL2\n        this.__glw.isWebGL2 &&\n            // if DEPTH_COMPONENT\n            (internalFormat.index === 6402 || internalFormat.index === 33189 ||\n                internalFormat.index === 33190 || internalFormat.index === 33191)) {\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_COMPARE_MODE, gl.COMPARE_REF_TO_TEXTURE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_COMPARE_FUNC, gl.LESS);\n        }\n        gl.texImage2D(gl.TEXTURE_2D, level, internalFormat.index, width, height, 0, format.index, type.index, null);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        return resourceHandle;\n    };\n    WebGLResourceRepository.prototype.createCubeTexture = function (mipLevelCount, images, width, height) {\n        var gl = this.__glw.getRawContext();\n        var texture = gl.createTexture();\n        var resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, texture);\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        if (mipLevelCount >= 2) {\n            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        }\n        else {\n            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        }\n        var loadImageToGPU = function (image, cubemapSide, i) {\n            if (image.hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_9__[\"HdriFormat\"].HDR) {\n                gl.texImage2D(cubemapSide, i, gl.RGB, image.width, image.height, 0, gl.RGB, gl.FLOAT, image.dataFloat);\n            }\n            else if (image instanceof HTMLImageElement || image instanceof HTMLCanvasElement) {\n                gl.texImage2D(cubemapSide, i, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n            }\n            else {\n                gl.texImage2D(cubemapSide, i, gl.RGBA, width / (i + 1), height / (i + 1), 0, gl.RGBA, gl.UNSIGNED_BYTE, image);\n            }\n        };\n        for (var i = 0; i < images.length; i++) {\n            var image = images[i];\n            loadImageToGPU(image.posX, gl.TEXTURE_CUBE_MAP_POSITIVE_X, i);\n            loadImageToGPU(image.negX, gl.TEXTURE_CUBE_MAP_NEGATIVE_X, i);\n            loadImageToGPU(image.posY, gl.TEXTURE_CUBE_MAP_POSITIVE_Y, i);\n            loadImageToGPU(image.negY, gl.TEXTURE_CUBE_MAP_NEGATIVE_Y, i);\n            loadImageToGPU(image.posZ, gl.TEXTURE_CUBE_MAP_POSITIVE_Z, i);\n            loadImageToGPU(image.negZ, gl.TEXTURE_CUBE_MAP_NEGATIVE_Z, i);\n        }\n        return resourceHandle;\n    };\n    /**\n     * Create Cube Texture from image files.\n     * @param baseUri the base uri to load images;\n     * @param mipLevelCount the number of mip levels (include root level). if no mipmap, the value should be 1;\n     * @returns the WebGLResourceHandle for the generated Cube Texture\n     */\n    WebGLResourceRepository.prototype.createCubeTextureFromFiles = function (baseUri, mipLevelCount, isNamePosNeg, hdriFormat) {\n        return __awaiter(this, void 0, void 0, function () {\n            var gl, imageArgs, width, height, _loop_1, i;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        gl = this.__glw.getRawContext();\n                        imageArgs = [];\n                        width = 0;\n                        height = 0;\n                        _loop_1 = function (i) {\n                            var e_2, _a, loadOneLevel, images, e_3, uri_1, imageObj, _b, _c, image;\n                            return __generator(this, function (_d) {\n                                switch (_d.label) {\n                                    case 0:\n                                        loadOneLevel = function () {\n                                            return new Promise(function (resolve, reject) {\n                                                var loadedCount = 0;\n                                                var images = [];\n                                                var extension = '.jpg';\n                                                if (hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_9__[\"HdriFormat\"].HDR) {\n                                                    extension = '.hdr';\n                                                }\n                                                else if (hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_9__[\"HdriFormat\"].RGBE_PNG) {\n                                                    extension = '.RGBE.PNG';\n                                                }\n                                                var posx = '_right_';\n                                                var negx = '_left_';\n                                                var posy = '_top_';\n                                                var negy = '_bottom_';\n                                                var posz = '_front_';\n                                                var negz = '_back_';\n                                                if (isNamePosNeg) {\n                                                    posx = '_posx_';\n                                                    negx = '_negx_';\n                                                    posy = '_posy_';\n                                                    negy = '_negy_';\n                                                    posz = '_posz_';\n                                                    negz = '_negz_';\n                                                }\n                                                var faces = [\n                                                    [baseUri + posx + i + extension, gl.TEXTURE_CUBE_MAP_POSITIVE_X],\n                                                    [baseUri + negx + i + extension, gl.TEXTURE_CUBE_MAP_NEGATIVE_X],\n                                                    [baseUri + posy + i + extension, gl.TEXTURE_CUBE_MAP_POSITIVE_Y],\n                                                    [baseUri + negy + i + extension, gl.TEXTURE_CUBE_MAP_NEGATIVE_Y],\n                                                    [baseUri + posz + i + extension, gl.TEXTURE_CUBE_MAP_POSITIVE_Z],\n                                                    [baseUri + negz + i + extension, gl.TEXTURE_CUBE_MAP_NEGATIVE_Z]\n                                                ];\n                                                var _loop_2 = function () {\n                                                    var face = faces[j][1];\n                                                    var image;\n                                                    if (hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_9__[\"HdriFormat\"].HDR || hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_9__[\"HdriFormat\"].RGB9_E5_PNG) {\n                                                        image = new HDRImage();\n                                                    }\n                                                    else {\n                                                        image = new Image();\n                                                    }\n                                                    image.hdriFormat = hdriFormat;\n                                                    image.side = face;\n                                                    image.uri = faces[j][0];\n                                                    image.crossOrigin = \"Anonymous\";\n                                                    image.onload = function () {\n                                                        loadedCount++;\n                                                        images.push(image);\n                                                        if (loadedCount === 6) {\n                                                            resolve(images);\n                                                        }\n                                                    };\n                                                    image.onerror = function () {\n                                                        reject(image.uri);\n                                                    };\n                                                    image.src = faces[j][0];\n                                                };\n                                                for (var j = 0; j < faces.length; j++) {\n                                                    _loop_2();\n                                                }\n                                            });\n                                        };\n                                        images = void 0;\n                                        _d.label = 1;\n                                    case 1:\n                                        _d.trys.push([1, 3, , 8]);\n                                        return [4 /*yield*/, loadOneLevel()];\n                                    case 2:\n                                        images = _d.sent();\n                                        return [3 /*break*/, 8];\n                                    case 3:\n                                        e_3 = _d.sent();\n                                        _d.label = 4;\n                                    case 4:\n                                        _d.trys.push([4, 6, , 7]);\n                                        return [4 /*yield*/, loadOneLevel()];\n                                    case 5:\n                                        images = _d.sent();\n                                        return [3 /*break*/, 7];\n                                    case 6:\n                                        uri_1 = _d.sent();\n                                        // Give up\n                                        console.error(\"failed to load \" + uri_1);\n                                        return [3 /*break*/, 7];\n                                    case 7: return [3 /*break*/, 8];\n                                    case 8:\n                                        imageObj = {};\n                                        try {\n                                            for (_b = __values(images), _c = _b.next(); !_c.done; _c = _b.next()) {\n                                                image = _c.value;\n                                                switch (image.side) {\n                                                    case gl.TEXTURE_CUBE_MAP_POSITIVE_X:\n                                                        imageObj.posX = image;\n                                                        break;\n                                                    case gl.TEXTURE_CUBE_MAP_POSITIVE_Y:\n                                                        imageObj.posY = image;\n                                                        break;\n                                                    case gl.TEXTURE_CUBE_MAP_POSITIVE_Z:\n                                                        imageObj.posZ = image;\n                                                        break;\n                                                    case gl.TEXTURE_CUBE_MAP_NEGATIVE_X:\n                                                        imageObj.negX = image;\n                                                        break;\n                                                    case gl.TEXTURE_CUBE_MAP_NEGATIVE_Y:\n                                                        imageObj.negY = image;\n                                                        break;\n                                                    case gl.TEXTURE_CUBE_MAP_NEGATIVE_Z:\n                                                        imageObj.negZ = image;\n                                                        break;\n                                                }\n                                                if (i === 0) {\n                                                    width = image.width;\n                                                    height = image.height;\n                                                }\n                                            }\n                                        }\n                                        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                                        finally {\n                                            try {\n                                                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                                            }\n                                            finally { if (e_2) throw e_2.error; }\n                                        }\n                                        imageArgs.push(imageObj);\n                                        return [2 /*return*/];\n                                }\n                            });\n                        };\n                        i = 0;\n                        _a.label = 1;\n                    case 1:\n                        if (!(i < mipLevelCount)) return [3 /*break*/, 4];\n                        return [5 /*yield**/, _loop_1(i)];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3:\n                        i++;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/, this.createCubeTexture(mipLevelCount, imageArgs, width, height)];\n                }\n            });\n        });\n    };\n    WebGLResourceRepository.prototype.createDummyCubeTexture = function (rgbaStr) {\n        if (rgbaStr === void 0) { rgbaStr = 'rgba(0,0,0,1)'; }\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = 1;\n        canvas.height = 1;\n        var ctx = canvas.getContext('2d');\n        ctx.fillStyle = rgbaStr;\n        ctx.fillRect(0, 0, 1, 1);\n        return this.createCubeTexture(1, [{ posX: canvas, negX: canvas, posY: canvas, negY: canvas, posZ: canvas, negZ: canvas }], 1, 1);\n    };\n    WebGLResourceRepository.prototype.createTextureFromDataUri = function (dataUri, _a) {\n        var level = _a.level, internalFormat = _a.internalFormat, border = _a.border, format = _a.format, type = _a.type, magFilter = _a.magFilter, minFilter = _a.minFilter, wrapS = _a.wrapS, wrapT = _a.wrapT, generateMipmap = _a.generateMipmap, anisotropy = _a.anisotropy;\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_b) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        var img = new Image();\n                        if (!dataUri.match(/^data:/)) {\n                            img.crossOrigin = 'Anonymous';\n                        }\n                        img.onload = function () {\n                            var width = img.width;\n                            var height = img.height;\n                            var texture = _this.createTexture(img, { level: level, internalFormat: internalFormat, width: width, height: height, border: border, format: format, type: type, magFilter: magFilter, minFilter: minFilter, wrapS: wrapS, wrapT: wrapT, generateMipmap: generateMipmap, anisotropy: anisotropy });\n                            resolve(texture);\n                        };\n                        img.src = dataUri;\n                    })];\n            });\n        });\n    };\n    WebGLResourceRepository.prototype.updateTexture = function (textureUid, typedArray, _a) {\n        var level = _a.level, width = _a.width, height = _a.height, format = _a.format, type = _a.type;\n        var gl = this.__glw.getRawContext();\n        ;\n        var texture = this.getWebGLResource(textureUid);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texSubImage2D(gl.TEXTURE_2D, level, 0, 0, width, height, format.index, type.index, typedArray);\n    };\n    WebGLResourceRepository.prototype.deleteFrameBufferObject = function (frameBufferObjectHandle) {\n        var fbo = this.getWebGLResource(frameBufferObjectHandle);\n        var gl = this.__glw.getRawContext();\n        if (fbo != null) {\n            gl.deleteFrameBufferObject(fbo);\n            this.__webglResources.delete(frameBufferObjectHandle);\n        }\n    };\n    WebGLResourceRepository.prototype.deleteRenderBuffer = function (renderBufferUid) {\n        var gl = this.__glw.getRawContext();\n        var renderBuffer = this.getWebGLResource(renderBufferUid);\n        gl.deleteRenderBuffer(renderBuffer);\n        this.__webglResources.delete(renderBufferUid);\n    };\n    WebGLResourceRepository.prototype.deleteTexture = function (textureHandle) {\n        var texture = this.getWebGLResource(textureHandle);\n        var gl = this.__glw.getRawContext();\n        if (texture != null) {\n            gl.deleteTexture(texture);\n            this.__webglResources.delete(textureHandle);\n        }\n    };\n    WebGLResourceRepository.prototype.createDummyTexture = function (rgbaStr) {\n        if (rgbaStr === void 0) { rgbaStr = \"rgba(255,255,255,1)\"; }\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = 1;\n        canvas.height = 1;\n        var ctx = canvas.getContext('2d');\n        ctx.fillStyle = rgbaStr;\n        ctx.fillRect(0, 0, 1, 1);\n        return this.createTexture(canvas, {\n            level: 0, internalFormat: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_3__[\"PixelFormat\"].RGBA, width: 1, height: 1,\n            border: 0, format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_3__[\"PixelFormat\"].RGBA, type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float, magFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Nearest, minFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Nearest,\n            wrapS: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].ClampToEdge, wrapT: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].ClampToEdge, generateMipmap: false, anisotropy: false\n        });\n    };\n    WebGLResourceRepository.prototype.createUniformBuffer = function (bufferView) {\n        var gl = this.__glw.getRawContext();\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        var ubo = gl.createBuffer();\n        var resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, ubo);\n        gl.bindBuffer(gl.UNIFORM_BUFFER, ubo);\n        gl.bufferData(gl.UNIFORM_BUFFER, bufferView, gl.DYNAMIC_DRAW);\n        gl.bindBuffer(gl.UNIFORM_BUFFER, null);\n        return resourceHandle;\n    };\n    WebGLResourceRepository.prototype.updateUniformBuffer = function (uboUid, bufferView) {\n        var gl = this.__glw.getRawContext();\n        var ubo = this.getWebGLResource(uboUid);\n        gl.bindBuffer(gl.UNIFORM_BUFFER, ubo);\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 0, bufferView, 0);\n        gl.bindBuffer(gl.UNIFORM_BUFFER, null);\n    };\n    WebGLResourceRepository.prototype.bindUniformBlock = function (shaderProgramUid, blockName, blockIndex) {\n        var gl = this.__glw.getRawContext();\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        var shaderProgram = this.getWebGLResource(shaderProgramUid);\n        var block = gl.getUniformBlockIndex(shaderProgram, blockName);\n        gl.uniformBlockBinding(shaderProgram, block, blockIndex);\n    };\n    WebGLResourceRepository.prototype.bindUniformBufferBase = function (blockIndex, uboUid) {\n        var gl = this.__glw.getRawContext();\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        var ubo = this.getWebGLResource(uboUid);\n        gl.bindBufferBase(gl.UNIFORM_BUFFER, blockIndex, ubo);\n    };\n    WebGLResourceRepository.prototype.deleteUniformBuffer = function (uboUid) {\n        var gl = this.__glw.getRawContext();\n        if (gl == null) {\n            new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        var ubo = this.getWebGLResource(uboUid);\n        this.__webglResources.delete(uboUid);\n        gl.deleteBuffer(ubo);\n    };\n    WebGLResourceRepository.prototype.createTransformFeedback = function () {\n        var gl = this.__glw.getRawContext();\n        var transformFeedback = gl.createTransformFeedback();\n        var resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, transformFeedback);\n        gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, transformFeedback);\n        return resourceHandle;\n    };\n    WebGLResourceRepository.prototype.deleteTransformFeedback = function (transformFeedbackUid) {\n        var gl = this.__glw.getRawContext();\n        var transformFeedback = this.getWebGLResource(transformFeedbackUid);\n        gl.deleteTransformFeedback(transformFeedback);\n        this.__webglResources.delete(transformFeedbackUid);\n    };\n    WebGLResourceRepository.prototype.setViewport = function (viewport) {\n        var gl = this.__glw.getRawContext();\n        if (viewport) {\n            gl.viewport(viewport.x, viewport.y, viewport.z, viewport.w);\n        }\n        else {\n            gl.viewport(0, 0, this.__glw.width, this.__glw.height);\n        }\n    };\n    WebGLResourceRepository.prototype.clearFrameBuffer = function (renderPass) {\n        var gl = this.__glw.getRawContext();\n        var bufferBit = 0;\n        if (renderPass.toClearColorBuffer) {\n            gl.clearColor(renderPass.clearColor.x, renderPass.clearColor.y, renderPass.clearColor.z, renderPass.clearColor.w);\n            bufferBit |= gl.COLOR_BUFFER_BIT;\n        }\n        if (renderPass.toClearDepthBuffer) {\n            gl.clearDepth(renderPass.clearDepth);\n            bufferBit |= gl.DEPTH_BUFFER_BIT;\n        }\n        if (renderPass.toClearStencilBuffer) {\n            gl.clearStencil(renderPass.clearStencil);\n            bufferBit |= gl.STENCIL_BUFFER_BIT;\n        }\n        if (bufferBit !== 0) {\n            gl.clear(bufferBit);\n        }\n    };\n    return WebGLResourceRepository;\n}(_foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (WebGLResourceRepository);\n\n\n//# sourceURL=webpack:///./src/webgl/WebGLResourceRepository.ts?");

/***/ }),

/***/ "./src/webgl/shaders/ClassicShader.ts":
/*!********************************************!*\
  !*** ./src/webgl/shaders/ClassicShader.ts ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GLSLShader */ \"./src/webgl/shaders/GLSLShader.ts\");\n/* harmony import */ var _foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../foundation/definitions/ShaderNode */ \"./src/foundation/definitions/ShaderNode.ts\");\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar ClassicShader = /** @class */ (function (_super) {\n    __extends(ClassicShader, _super);\n    function ClassicShader() {\n        var _this = _super.call(this) || this;\n        _this.vertexShaderBody = \"\\n  mat4 worldMatrix = getMatrix(a_instanceID);\\n  mat4 viewMatrix = getViewMatrix(a_instanceID);\\n  mat4 projectionMatrix = getProjectionMatrix(a_instanceID);\\n  mat3 normalMatrix = getNormalMatrix(a_instanceID);\\n\\n  // Skeletal\\n  bool isSkinning;\\n  skinning(isSkinning, normalMatrix, normalMatrix);\\n\\n  v_color = a_color;\\n  v_normal_inWorld = normalMatrix * a_normal;\\n  v_texcoord = a_texcoord;\\n\\n  vec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\\n  float distanceFromCamera = length(position_inWorld.xyz - u_viewPosition);\\n  vec3 pointDistanceAttenuation = getPointDistanceAttenuation(a_instanceID);\\n  float distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\\n  float maxPointSize = getPointSize(a_instanceID);\\n  gl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\\n\\n//  v_color = vec3(u_boneMatrices[int(a_joint.x)][1].xyz);\\n  \";\n        _this.attributeNames = ['a_position', 'a_color', 'a_normal', 'a_texcoord', 'a_joint', 'a_weight', 'a_instanceID'];\n        _this.attributeSemantics = [_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Position, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Color0,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Normal, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Texcoord0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Joints0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Weights0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Instance];\n        return _this;\n    }\n    ClassicShader.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new ClassicShader();\n        }\n        return this.__instance;\n    };\n    Object.defineProperty(ClassicShader.prototype, \"vertexShaderDefinitions\", {\n        get: function () {\n            var _version = this.glsl_versionText;\n            var _in = this.glsl_vertex_in;\n            var _out = this.glsl_vertex_out;\n            return \"\\n\" + _in + \" vec3 a_position;\\n\" + _in + \" vec3 a_color;\\n\" + _in + \" vec3 a_normal;\\n\" + _in + \" float a_instanceID;\\n\" + _in + \" vec2 a_texcoord;\\n\" + _in + \" vec4 a_joint;\\n\" + _in + \" vec4 a_weight;\\n\" + _out + \" vec3 v_color;\\n\" + _out + \" vec3 v_normal_inWorld;\\n\" + _out + \" vec4 v_position_inWorld;\\n\" + _out + \" vec2 v_texcoord;\\n\\nuniform vec3 u_viewPosition;\\n\" + this.toNormalMatrix + \"\\n\\n\" + this.getSkinMatrix + \"\\n\\n\" + this.processSkinning + \"\\n\\n\" + this.pointSize + \"\\n\\n\" + this.pointDistanceAttenuation + \"\\n\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ;\n    Object.defineProperty(ClassicShader.prototype, \"fragmentShaderSimple\", {\n        get: function () {\n            var _version = this.glsl_versionText;\n            var _in = this.glsl_fragment_in;\n            var _def_rt0 = this.glsl_rt0;\n            var _def_fragColor = this.glsl_fragColor;\n            var _texture = this.glsl_texture;\n            return _version + \"\\nprecision highp float;\\n\\nstruct Material {\\n  vec4 diffuseColorFactor;\\n};\\nuniform sampler2D u_diffuseColorTexture;\\nuniform Material u_material;\\n\\nuniform int u_shadingModel;\\nuniform float u_shininess;\\n\\nstruct Light {\\n  vec4 lightPosition;\\n  vec4 lightDirection;\\n  vec4 lightIntensity;\\n};\\nuniform Light u_lights[\" + _foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].maxLightNumberInShader + \"];\\nuniform int u_lightNumber;\\nuniform vec3 u_viewPosition;\\n\\n\" + _in + \" vec3 v_color;\\n\" + _in + \" vec3 v_normal_inWorld;\\n\" + _in + \" vec4 v_position_inWorld;\\n\" + _in + \" vec2 v_texcoord;\\n\" + _def_rt0 + \"\\nvoid main ()\\n{\\n\\n  // Normal\\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\\n\\n  // diffuseColor\\n  vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\\n  float alpha = 1.0;\\n  if (v_color != diffuseColor && u_material.diffuseColorFactor.rgb != diffuseColor) {\\n    diffuseColor = v_color * u_material.diffuseColorFactor.rgb;\\n    alpha = u_material.diffuseColorFactor.a;\\n  } else if (v_color == diffuseColor) {\\n    diffuseColor = u_material.diffuseColorFactor.rgb;\\n    alpha = u_material.diffuseColorFactor.a;\\n  } else if (u_material.diffuseColorFactor.rgb == diffuseColor) {\\n    diffuseColor = v_color;\\n  } else {\\n    diffuseColor = vec3(1.0, 1.0, 1.0);\\n  }\\n\\n  // diffuseColorTexture\\n  vec4 textureColor = \" + _texture + \"(u_diffuseColorTexture, v_texcoord);\\n  if (textureColor.r > 0.05) {\\n    diffuseColor *= textureColor.rgb;\\n  }\\n\\n  // Lighting\\n  vec3 shadingColor = vec3(0.0, 0.0, 0.0);\\n  if (u_shadingModel > 0) {\\n\\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\\n    vec3 specular = vec3(0.0, 0.0, 0.0);\\n    for (int i = 0; i < \" + _foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].maxLightNumberInShader + \"; i++) {\\n      if (i >= u_lightNumber) {\\n        break;\\n      }\\n\\n      vec3 lightDirection = u_lights[i].lightDirection.xyz;\\n      float lightType = u_lights[i].lightPosition.w;\\n      float spotCosCutoff = u_lights[i].lightDirection.w;\\n      float spotExponent = u_lights[i].lightIntensity.w;\\n\\n      if (0.75 < lightType) { // is pointlight or spotlight\\n        lightDirection = normalize(u_lights[i].lightPosition.xyz - v_position_inWorld.xyz);\\n      }\\n      float spotEffect = 1.0;\\n      if (lightType > 1.75) { // is spotlight\\n        spotEffect = dot(u_lights[i].lightDirection.xyz, lightDirection);\\n        if (spotEffect > spotCosCutoff) {\\n          spotEffect = pow(spotEffect, spotExponent);\\n        } else {\\n          spotEffect = 0.0;\\n        }\\n      }\\n\\n      vec3 incidentLight = spotEffect * u_lights[i].lightIntensity.xyz;\\n//      incidentLight *= M_PI;\\n\\n\\n\\n      diffuse += diffuseColor * max(0.0, dot(normal_inWorld, lightDirection)) * incidentLight;\\n\\n      if (u_shadingModel == 2) {// BLINN\\n        // ViewDirection\\n        vec3 viewDirection = normalize(u_viewPosition - v_position_inWorld.xyz);\\n        vec3 halfVector = normalize(lightDirection + viewDirection);\\n        specular += pow(max(0.0, dot(halfVector, normal_inWorld)), u_shininess);\\n      } else if (u_shadingModel == 3) { // PHONG\\n        vec3 viewDirection = normalize(u_viewPosition - v_position_inWorld.xyz);\\n        vec3 R = reflect(lightDirection, normal_inWorld);\\n        specular += pow(max(0.0, dot(R, viewDirection)), u_shininess);\\n      }\\n\\n    }\\n\\n    shadingColor = diffuse + specular;\\n  } else {\\n    shadingColor = diffuseColor;\\n  }\\n\\n  rt0 = vec4(shadingColor, alpha);\\n  //rt0 = vec4(u_lightNumber, 0.0, 0.0, 1.0);\\n\\n\\n  \" + _def_fragColor + \"\\n}\\n\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ClassicShader.prototype, \"pixelShaderDefinitions\", {\n        get: function () {\n            return '';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ClassicShader.prototype, \"pixelShaderBody\", {\n        get: function () {\n            return this.fragmentShaderSimple;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ClassicShader.prototype, \"attributeCompositions\", {\n        get: function () {\n            return [_foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec2, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec4, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec4, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ClassicShader.materialElement = _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_3__[\"ShaderNode\"].ClassicShading;\n    return ClassicShader;\n}(_GLSLShader__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (ClassicShader);\n\n\n//# sourceURL=webpack:///./src/webgl/shaders/ClassicShader.ts?");

/***/ }),

/***/ "./src/webgl/shaders/EnvCostantShader.ts":
/*!***********************************************!*\
  !*** ./src/webgl/shaders/EnvCostantShader.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GLSLShader */ \"./src/webgl/shaders/GLSLShader.ts\");\n/* harmony import */ var _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/definitions/ShaderNode */ \"./src/foundation/definitions/ShaderNode.ts\");\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar EnvConstantShader = /** @class */ (function (_super) {\n    __extends(EnvConstantShader, _super);\n    function EnvConstantShader() {\n        var _this = _super.call(this) || this;\n        _this.vertexShaderBody = \"\\n  mat4 worldMatrix = getMatrix(a_instanceID);\\n  mat4 viewMatrix = getViewMatrix(a_instanceID);\\n  mat4 projectionMatrix = getProjectionMatrix(a_instanceID);\\n  mat3 normalMatrix = getNormalMatrix(a_instanceID);\\n\\n  gl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\\n\\n  v_color = a_color;\\n  v_normal_inWorld = normalMatrix * a_normal;\\n  v_position_inLocal = a_position;\\n  v_texcoord = a_texcoord;\\n\\n  \";\n        _this.attributeNames = ['a_position', 'a_color', 'a_normal', 'a_texcoord', 'a_instanceID'];\n        _this.attributeSemantics = [_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Position, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Color0,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Normal, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Texcoord0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Instance];\n        return _this;\n    }\n    EnvConstantShader.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new EnvConstantShader();\n        }\n        return this.__instance;\n    };\n    Object.defineProperty(EnvConstantShader.prototype, \"vertexShaderDefinitions\", {\n        get: function () {\n            var _version = this.glsl_versionText;\n            var _in = this.glsl_vertex_in;\n            var _out = this.glsl_vertex_out;\n            return \"\\n\" + _in + \" vec3 a_position;\\n\" + _in + \" vec3 a_color;\\n\" + _in + \" vec3 a_normal;\\n\" + _in + \" float a_instanceID;\\n\" + _in + \" vec2 a_texcoord;\\n\" + _in + \" vec4 a_joint;\\n\" + _in + \" vec4 a_weight;\\n\" + _out + \" vec3 v_color;\\n\" + _out + \" vec3 v_normal_inWorld;\\n\" + _out + \" vec3 v_position_inLocal;\\n\" + _out + \" vec2 v_texcoord;\\n\\n\" + this.toNormalMatrix + \"\\n\\n\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ;\n    Object.defineProperty(EnvConstantShader.prototype, \"fragmentShaderSimple\", {\n        get: function () {\n            var _version = this.glsl_versionText;\n            var _in = this.glsl_fragment_in;\n            var _def_rt0 = this.glsl_rt0;\n            var _def_fragColor = this.glsl_fragColor;\n            var _texture = this.glsl_texture;\n            return _version + \"\\nprecision highp float;\\n\\nstruct Material {\\n  vec4 diffuseColorFactor;\\n};\\nuniform samplerCube u_colorEnvTexture;\\nuniform Material u_material;\\n\\nuniform int u_shadingModel;\\n\\nuniform vec3 u_viewPosition;\\n\\nvec3 linearToSrgb(vec3 linearColor) {\\n  return pow(linearColor, vec3(1.0/2.2));\\n}\\n\\n\" + _in + \" vec3 v_color;\\n\" + _in + \" vec3 v_normal_inWorld;\\n\" + _in + \" vec3 v_position_inLocal;\\n\" + _in + \" vec2 v_texcoord;\\n\" + _def_rt0 + \"\\nvoid main ()\\n{\\n\\n  // Normal\\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\\n\\n  // diffuseColor\\n  vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\\n  float alpha = 1.0;\\n  if (v_color != diffuseColor && u_material.diffuseColorFactor.rgb != diffuseColor) {\\n    diffuseColor = v_color * u_material.diffuseColorFactor.rgb;\\n    alpha = u_material.diffuseColorFactor.a;\\n  } else if (v_color == diffuseColor) {\\n    diffuseColor = u_material.diffuseColorFactor.rgb;\\n    alpha = u_material.diffuseColorFactor.a;\\n  } else if (u_material.diffuseColorFactor.rgb == diffuseColor) {\\n    diffuseColor = v_color;\\n  } else {\\n    diffuseColor = vec3(1.0, 1.0, 1.0);\\n  }\\n\\n  // diffuseColorTexture\\n\\n  // adapt OpenGL (RenderMan) Cubemap convension\\n  float rot = 3.1415;\\n  mat3 rotEnvMatrix = mat3(cos(rot), 0.0, -sin(rot), 0.0, 1.0, 0.0, sin(rot), 0.0, cos(rot));\\n  vec3 envNormal = normalize(rotEnvMatrix * v_position_inLocal);\\n  envNormal.x *= -1.0;\\n\\n  vec4 textureColor = textureCube(u_colorEnvTexture, envNormal);\\n  diffuseColor *= textureColor.rgb;\\n\\n  diffuseColor = linearToSrgb(diffuseColor);\\n\\n  rt0 = vec4(diffuseColor, alpha);\\n\\n  \" + _def_fragColor + \"\\n}\\n\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EnvConstantShader.prototype, \"pixelShaderDefinitions\", {\n        get: function () {\n            return '';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EnvConstantShader.prototype, \"pixelShaderBody\", {\n        get: function () {\n            return this.fragmentShaderSimple;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EnvConstantShader.prototype, \"attributeCompositions\", {\n        get: function () {\n            return [_foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec2, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Scalar];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EnvConstantShader.materialElement = _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_2__[\"ShaderNode\"].ClassicShading;\n    return EnvConstantShader;\n}(_GLSLShader__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (EnvConstantShader);\n\n\n//# sourceURL=webpack:///./src/webgl/shaders/EnvCostantShader.ts?");

/***/ }),

/***/ "./src/webgl/shaders/FXAA3Quality.ts":
/*!*******************************************!*\
  !*** ./src/webgl/shaders/FXAA3Quality.ts ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GLSLShader */ \"./src/webgl/shaders/GLSLShader.ts\");\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n/**\n * This class contains source code provided by NVIDIA Corporation.\n * FXAA antialiasing is developed by NVIDIA.\n * The codes of this class is modified from original code to work on WebGL1 and this library.\n * The modification for GLSL 100 is referred from Three.js, https://github.com/mrdoob/three.js/blob/5ba4c25bcb74577e1b1e14906f345135610a94f3/examples/js/shaders/FXAAShader.js\n * The original FXAA code is https://github.com/NVIDIAGameWorks/GraphicsSamples/blob/80e8ba8f5e8935821513207033490735dd3279d8/samples/es3-kepler/FXAA/FXAA3_11.h\n */\nvar FXAA3QualityShader = /** @class */ (function (_super) {\n    __extends(FXAA3QualityShader, _super);\n    function FXAA3QualityShader() {\n        var _this = _super.call(this) || this;\n        _this.vertexShaderBody = \"\\n  mat4 worldMatrix = getMatrix(a_instanceID);\\n  mat4 viewMatrix = getViewMatrix(a_instanceID);\\n  mat4 projectionMatrix = getProjectionMatrix(a_instanceID);\\n\\n  v_texcoord = a_texcoord;\\n  vec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\\n  gl_Position = projectionMatrix * viewMatrix * position_inWorld;\\n  \";\n        _this.attributeNames = ['a_position', 'a_texcoord', 'a_instanceID'];\n        _this.attributeSemantics = [_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Position, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Texcoord0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Instance];\n        return _this;\n    }\n    FXAA3QualityShader.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new FXAA3QualityShader();\n        }\n        return this.__instance;\n    };\n    Object.defineProperty(FXAA3QualityShader.prototype, \"vertexShaderDefinitions\", {\n        get: function () {\n            var _version = this.glsl_versionText;\n            var _in = this.glsl_vertex_in;\n            var _out = this.glsl_vertex_out;\n            return \"\\n\" + _in + \" float a_instanceID;\\n\" + _in + \" vec3 a_position;\\n\" + _in + \" vec2 a_texcoord;\\n\" + _out + \" vec2 v_texcoord;\\n\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ;\n    Object.defineProperty(FXAA3QualityShader.prototype, \"fragmentShaderSimple\", {\n        get: function () {\n            var _version = this.glsl_versionText;\n            var _in = this.glsl_fragment_in;\n            var _def_rt0 = this.glsl_rt0;\n            var _def_fragColor = this.glsl_fragColor;\n            var _texture = this.glsl_texture;\n            //----------------------------------------------------------------------------------\n            // File:        es3-kepler\\FXAA/FXAA3_11.h\n            // SDK Version: v3.00\n            // Email:       gameworks@nvidia.com\n            // Site:        http://developer.nvidia.com/\n            //\n            // Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n            //\n            // Redistribution and use in source and binary forms, with or without\n            // modification, are permitted provided that the following conditions\n            // are met:\n            //  * Redistributions of source code must retain the above copyright\n            //    notice, this list of conditions and the following disclaimer.\n            //  * Redistributions in binary form must reproduce the above copyright\n            //    notice, this list of conditions and the following disclaimer in the\n            //    documentation and/or other materials provided with the distribution.\n            //  * Neither the name of NVIDIA CORPORATION nor the names of its\n            //    contributors may be used to endorse or promote products derived\n            //    from this software without specific prior written permission.\n            //\n            // THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY\n            // EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n            // IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n            // PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n            // CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n            // EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n            // PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n            // PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n            // OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n            // (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n            // OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n            //\n            //----------------------------------------------------------------------------------\n            /*============================================================================\n                                NVIDIA FXAA 3.11 by TIMOTHY LOTTES\n            ============================================================================*/\n            return _version + \"precision highp float;\\n\\nuniform sampler2D u_baseColorTexture;\\nuniform vec2 u_screenInfo;\\n\\n#define FXAA_PC 1\\n#define FXAA_QUALITY_PRESET 12\\n#define FXAA_GREEN_AS_LUMA 1\\n#define FXAA_GLSL_100 1\\n\\n/*============================================================================\\n                             INTEGRATION KNOBS\\n============================================================================*/\\n//\\n// FXAA_PS3 and FXAA_360 choose the console algorithm (FXAA3 CONSOLE).\\n// FXAA_360_OPT is a prototype for the new optimized 360 version.\\n//\\n// 1 = Use API.\\n// 0 = Don't use API.\\n//\\n/*--------------------------------------------------------------------------*/\\n#ifndef FXAA_PS3\\n    #define FXAA_PS3 0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#ifndef FXAA_360\\n    #define FXAA_360 0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#ifndef FXAA_360_OPT\\n    #define FXAA_360_OPT 0\\n#endif\\n/*==========================================================================*/\\n#ifndef FXAA_PC\\n    //\\n    // FXAA Quality\\n    // The high quality PC algorithm.\\n    //\\n    #define FXAA_PC 0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#ifndef FXAA_PC_CONSOLE\\n    //\\n    // The console algorithm for PC is included\\n    // for developers targeting really low spec machines.\\n    // Likely better to just run FXAA_PC, and use a really low preset.\\n    //\\n    #define FXAA_PC_CONSOLE 0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#ifndef FXAA_GLSL_120\\n    #define FXAA_GLSL_120 0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#ifndef FXAA_GLSL_130\\n    #define FXAA_GLSL_130 0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#ifndef FXAA_HLSL_3\\n    #define FXAA_HLSL_3 0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#ifndef FXAA_HLSL_4\\n    #define FXAA_HLSL_4 0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#ifndef FXAA_HLSL_5\\n    #define FXAA_HLSL_5 0\\n#endif\\n/*==========================================================================*/\\n#ifndef FXAA_GREEN_AS_LUMA\\n    //\\n    // For those using non-linear color,\\n    // and either not able to get luma in alpha, or not wanting to,\\n    // this enables FXAA to run using green as a proxy for luma.\\n    // So with this enabled, no need to pack luma in alpha.\\n    //\\n    // This will turn off AA on anything which lacks some amount of green.\\n    // Pure red and blue or combination of only R and B, will get no AA.\\n    //\\n    // Might want to lower the settings for both,\\n    //    fxaaConsoleEdgeThresholdMin\\n    //    fxaaQualityEdgeThresholdMin\\n    // In order to insure AA does not get turned off on colors \\n    // which contain a minor amount of green.\\n    //\\n    // 1 = On.\\n    // 0 = Off.\\n    //\\n    #define FXAA_GREEN_AS_LUMA 0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#ifndef FXAA_EARLY_EXIT\\n    //\\n    // Controls algorithm's early exit path.\\n    // On PS3 turning this ON adds 2 cycles to the shader.\\n    // On 360 turning this OFF adds 10ths of a millisecond to the shader.\\n    // Turning this off on console will result in a more blurry image.\\n    // So this defaults to on.\\n    //\\n    // 1 = On.\\n    // 0 = Off.\\n    //\\n    #define FXAA_EARLY_EXIT 1\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#ifndef FXAA_DISCARD\\n    //\\n    // Only valid for PC OpenGL currently.\\n    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.\\n    //\\n    // 1 = Use discard on pixels which don't need AA.\\n    //     For APIs which enable concurrent TEX+ROP from same surface.\\n    // 0 = Return unchanged color on pixels which don't need AA.\\n    //\\n    #define FXAA_DISCARD 0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#ifndef FXAA_FAST_PIXEL_OFFSET\\n    //\\n    // Used for GLSL 120 only.\\n    //\\n    // 1 = GL API supports fast pixel offsets\\n    // 0 = do not use fast pixel offsets\\n    //\\n    #ifdef GL_EXT_gpu_shader4\\n        #define FXAA_FAST_PIXEL_OFFSET 1\\n    #endif\\n    #ifdef GL_NV_gpu_shader5\\n        #define FXAA_FAST_PIXEL_OFFSET 1\\n    #endif\\n    #ifdef GL_ARB_gpu_shader5\\n        #define FXAA_FAST_PIXEL_OFFSET 1\\n    #endif\\n    #ifndef FXAA_FAST_PIXEL_OFFSET\\n        #define FXAA_FAST_PIXEL_OFFSET 0\\n    #endif\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#ifndef FXAA_GATHER4_ALPHA\\n    //\\n    // 1 = API supports gather4 on alpha channel.\\n    // 0 = API does not support gather4 on alpha channel.\\n    //\\n    #if (FXAA_HLSL_5 == 1)\\n        #define FXAA_GATHER4_ALPHA 1\\n    #endif\\n    #ifdef GL_ARB_gpu_shader5\\n        #define FXAA_GATHER4_ALPHA 1\\n    #endif\\n    #ifdef GL_NV_gpu_shader5\\n        #define FXAA_GATHER4_ALPHA 1\\n    #endif\\n    #ifndef FXAA_GATHER4_ALPHA\\n        #define FXAA_GATHER4_ALPHA 0\\n    #endif\\n#endif\\n\\n/*============================================================================\\n                      FXAA CONSOLE PS3 - TUNING KNOBS\\n============================================================================*/\\n#ifndef FXAA_CONSOLE__PS3_EDGE_SHARPNESS\\n    //\\n    // Consoles the sharpness of edges on PS3 only.\\n    // Non-PS3 tuning is done with shader input.\\n    //\\n    // Due to the PS3 being ALU bound,\\n    // there are only two safe values here: 4 and 8.\\n    // These options use the shaders ability to a free *|/ by 2|4|8.\\n    //\\n    // 8.0 is sharper\\n    // 4.0 is softer\\n    // 2.0 is really soft (good for vector graphics inputs)\\n    //\\n    #if 1\\n        #define FXAA_CONSOLE__PS3_EDGE_SHARPNESS 8.0\\n    #endif\\n    #if 0\\n        #define FXAA_CONSOLE__PS3_EDGE_SHARPNESS 4.0\\n    #endif\\n    #if 0\\n        #define FXAA_CONSOLE__PS3_EDGE_SHARPNESS 2.0\\n    #endif\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#ifndef FXAA_CONSOLE__PS3_EDGE_THRESHOLD\\n    //\\n    // Only effects PS3.\\n    // Non-PS3 tuning is done with shader input.\\n    //\\n    // The minimum amount of local contrast required to apply algorithm.\\n    // The console setting has a different mapping than the quality setting.\\n    //\\n    // This only applies when FXAA_EARLY_EXIT is 1.\\n    //\\n    // Due to the PS3 being ALU bound,\\n    // there are only two safe values here: 0.25 and 0.125.\\n    // These options use the shaders ability to a free *|/ by 2|4|8.\\n    //\\n    // 0.125 leaves less aliasing, but is softer\\n    // 0.25 leaves more aliasing, and is sharper\\n    //\\n    #if 1\\n        #define FXAA_CONSOLE__PS3_EDGE_THRESHOLD 0.125\\n    #else\\n        #define FXAA_CONSOLE__PS3_EDGE_THRESHOLD 0.25\\n    #endif\\n#endif\\n\\n/*============================================================================\\n                        FXAA QUALITY - TUNING KNOBS\\n------------------------------------------------------------------------------\\nNOTE the other tuning knobs are now in the shader function inputs!\\n============================================================================*/\\n#ifndef FXAA_QUALITY__PRESET\\n    //\\n    // Choose the quality preset.\\n    // This needs to be compiled into the shader as it effects code.\\n    // Best option to include multiple presets is to \\n    // in each shader define the preset, then include this file.\\n    // \\n    // OPTIONS\\n    // -----------------------------------------------------------------------\\n    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)\\n    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\\n    // 39       - no dither, very expensive \\n    //\\n    // NOTES\\n    // -----------------------------------------------------------------------\\n    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\\n    // 13 = about same speed as FXAA 3.9 and better than 12\\n    // 23 = closest to FXAA 3.9 visually and performance wise\\n    //  _ = the lowest digit is directly related to performance\\n    // _  = the highest digit is directly related to style\\n    // \\n    #define FXAA_QUALITY__PRESET 12\\n#endif\\n\\n\\n/*============================================================================\\n                           FXAA QUALITY - PRESETS\\n============================================================================*/\\n\\n/*============================================================================\\n                     FXAA QUALITY - MEDIUM DITHER PRESETS\\n============================================================================*/\\n#if (FXAA_QUALITY__PRESET == 10)\\n    #define FXAA_QUALITY__PS 3\\n    #define FXAA_QUALITY__P0 1.5\\n    #define FXAA_QUALITY__P1 3.0\\n    #define FXAA_QUALITY__P2 12.0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_QUALITY__PRESET == 11)\\n    #define FXAA_QUALITY__PS 4\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.5\\n    #define FXAA_QUALITY__P2 3.0\\n    #define FXAA_QUALITY__P3 12.0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_QUALITY__PRESET == 12)\\n    #define FXAA_QUALITY__PS 5\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.5\\n    #define FXAA_QUALITY__P2 2.0\\n    #define FXAA_QUALITY__P3 4.0\\n    #define FXAA_QUALITY__P4 12.0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_QUALITY__PRESET == 13)\\n    #define FXAA_QUALITY__PS 6\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.5\\n    #define FXAA_QUALITY__P2 2.0\\n    #define FXAA_QUALITY__P3 2.0\\n    #define FXAA_QUALITY__P4 4.0\\n    #define FXAA_QUALITY__P5 12.0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_QUALITY__PRESET == 14)\\n    #define FXAA_QUALITY__PS 7\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.5\\n    #define FXAA_QUALITY__P2 2.0\\n    #define FXAA_QUALITY__P3 2.0\\n    #define FXAA_QUALITY__P4 2.0\\n    #define FXAA_QUALITY__P5 4.0\\n    #define FXAA_QUALITY__P6 12.0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_QUALITY__PRESET == 15)\\n    #define FXAA_QUALITY__PS 8\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.5\\n    #define FXAA_QUALITY__P2 2.0\\n    #define FXAA_QUALITY__P3 2.0\\n    #define FXAA_QUALITY__P4 2.0\\n    #define FXAA_QUALITY__P5 2.0\\n    #define FXAA_QUALITY__P6 4.0\\n    #define FXAA_QUALITY__P7 12.0\\n#endif\\n\\n/*============================================================================\\n                     FXAA QUALITY - LOW DITHER PRESETS\\n============================================================================*/\\n#if (FXAA_QUALITY__PRESET == 20)\\n    #define FXAA_QUALITY__PS 3\\n    #define FXAA_QUALITY__P0 1.5\\n    #define FXAA_QUALITY__P1 2.0\\n    #define FXAA_QUALITY__P2 8.0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_QUALITY__PRESET == 21)\\n    #define FXAA_QUALITY__PS 4\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.5\\n    #define FXAA_QUALITY__P2 2.0\\n    #define FXAA_QUALITY__P3 8.0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_QUALITY__PRESET == 22)\\n    #define FXAA_QUALITY__PS 5\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.5\\n    #define FXAA_QUALITY__P2 2.0\\n    #define FXAA_QUALITY__P3 2.0\\n    #define FXAA_QUALITY__P4 8.0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_QUALITY__PRESET == 23)\\n    #define FXAA_QUALITY__PS 6\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.5\\n    #define FXAA_QUALITY__P2 2.0\\n    #define FXAA_QUALITY__P3 2.0\\n    #define FXAA_QUALITY__P4 2.0\\n    #define FXAA_QUALITY__P5 8.0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_QUALITY__PRESET == 24)\\n    #define FXAA_QUALITY__PS 7\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.5\\n    #define FXAA_QUALITY__P2 2.0\\n    #define FXAA_QUALITY__P3 2.0\\n    #define FXAA_QUALITY__P4 2.0\\n    #define FXAA_QUALITY__P5 3.0\\n    #define FXAA_QUALITY__P6 8.0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_QUALITY__PRESET == 25)\\n    #define FXAA_QUALITY__PS 8\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.5\\n    #define FXAA_QUALITY__P2 2.0\\n    #define FXAA_QUALITY__P3 2.0\\n    #define FXAA_QUALITY__P4 2.0\\n    #define FXAA_QUALITY__P5 2.0\\n    #define FXAA_QUALITY__P6 4.0\\n    #define FXAA_QUALITY__P7 8.0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_QUALITY__PRESET == 26)\\n    #define FXAA_QUALITY__PS 9\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.5\\n    #define FXAA_QUALITY__P2 2.0\\n    #define FXAA_QUALITY__P3 2.0\\n    #define FXAA_QUALITY__P4 2.0\\n    #define FXAA_QUALITY__P5 2.0\\n    #define FXAA_QUALITY__P6 2.0\\n    #define FXAA_QUALITY__P7 4.0\\n    #define FXAA_QUALITY__P8 8.0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_QUALITY__PRESET == 27)\\n    #define FXAA_QUALITY__PS 10\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.5\\n    #define FXAA_QUALITY__P2 2.0\\n    #define FXAA_QUALITY__P3 2.0\\n    #define FXAA_QUALITY__P4 2.0\\n    #define FXAA_QUALITY__P5 2.0\\n    #define FXAA_QUALITY__P6 2.0\\n    #define FXAA_QUALITY__P7 2.0\\n    #define FXAA_QUALITY__P8 4.0\\n    #define FXAA_QUALITY__P9 8.0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_QUALITY__PRESET == 28)\\n    #define FXAA_QUALITY__PS 11\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.5\\n    #define FXAA_QUALITY__P2 2.0\\n    #define FXAA_QUALITY__P3 2.0\\n    #define FXAA_QUALITY__P4 2.0\\n    #define FXAA_QUALITY__P5 2.0\\n    #define FXAA_QUALITY__P6 2.0\\n    #define FXAA_QUALITY__P7 2.0\\n    #define FXAA_QUALITY__P8 2.0\\n    #define FXAA_QUALITY__P9 4.0\\n    #define FXAA_QUALITY__P10 8.0\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_QUALITY__PRESET == 29)\\n    #define FXAA_QUALITY__PS 12\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.5\\n    #define FXAA_QUALITY__P2 2.0\\n    #define FXAA_QUALITY__P3 2.0\\n    #define FXAA_QUALITY__P4 2.0\\n    #define FXAA_QUALITY__P5 2.0\\n    #define FXAA_QUALITY__P6 2.0\\n    #define FXAA_QUALITY__P7 2.0\\n    #define FXAA_QUALITY__P8 2.0\\n    #define FXAA_QUALITY__P9 2.0\\n    #define FXAA_QUALITY__P10 4.0\\n    #define FXAA_QUALITY__P11 8.0\\n#endif\\n\\n/*============================================================================\\n                     FXAA QUALITY - EXTREME QUALITY\\n============================================================================*/\\n#if (FXAA_QUALITY__PRESET == 39)\\n    #define FXAA_QUALITY__PS 12\\n    #define FXAA_QUALITY__P0 1.0\\n    #define FXAA_QUALITY__P1 1.0\\n    #define FXAA_QUALITY__P2 1.0\\n    #define FXAA_QUALITY__P3 1.0\\n    #define FXAA_QUALITY__P4 1.0\\n    #define FXAA_QUALITY__P5 1.5\\n    #define FXAA_QUALITY__P6 2.0\\n    #define FXAA_QUALITY__P7 2.0\\n    #define FXAA_QUALITY__P8 2.0\\n    #define FXAA_QUALITY__P9 2.0\\n    #define FXAA_QUALITY__P10 4.0\\n    #define FXAA_QUALITY__P11 8.0\\n#endif\\n\\n\\n\\n/*============================================================================\\n                                API PORTING\\n============================================================================*/\\n#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)\\n    #define FxaaBool bool\\n    #define FxaaDiscard discard\\n    #define FxaaFloat float\\n    #define FxaaFloat2 vec2\\n    #define FxaaFloat3 vec3\\n    #define FxaaFloat4 vec4\\n    #define FxaaHalf float\\n    #define FxaaHalf2 vec2\\n    #define FxaaHalf3 vec3\\n    #define FxaaHalf4 vec4\\n    #define FxaaInt2 ivec2\\n    #define FxaaSat(x) clamp(x, 0.0, 1.0)\\n    #define FxaaTex sampler2D\\n#else\\n    #define FxaaBool bool\\n    #define FxaaDiscard clip(-1)\\n    #define FxaaFloat float\\n    #define FxaaFloat2 float2\\n    #define FxaaFloat3 float3\\n    #define FxaaFloat4 float4\\n    #define FxaaHalf half\\n    #define FxaaHalf2 half2\\n    #define FxaaHalf3 half3\\n    #define FxaaHalf4 half4\\n    #define FxaaSat(x) saturate(x)\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_GLSL_100 == 1)\\n    #define FxaaTexTop(t, p) texture2D(t, p, 0.0)\\n    #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_GLSL_120 == 1)\\n    // Requires,\\n    //  #version 120\\n    // And at least,\\n    //  #extension GL_EXT_gpu_shader4 : enable\\n    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)\\n    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\\n    #if (FXAA_FAST_PIXEL_OFFSET == 1)\\n        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)\\n    #else\\n        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\\n    #endif\\n    #if (FXAA_GATHER4_ALPHA == 1)\\n        // use #extension GL_ARB_gpu_shader5 : enable\\n        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\\n        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\\n        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)\\n        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\\n    #endif\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_GLSL_130 == 1)\\n    // Requires \\\"#version 130\\\" or better\\n    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)\\n    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)\\n    #if (FXAA_GATHER4_ALPHA == 1)\\n        // use #extension GL_ARB_gpu_shader5 : enable\\n        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\\n        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\\n        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)\\n        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\\n    #endif\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_HLSL_3 == 1) || (FXAA_360 == 1) || (FXAA_PS3 == 1)\\n    #define FxaaInt2 float2\\n    #define FxaaTex sampler2D\\n    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))\\n    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_HLSL_4 == 1)\\n    #define FxaaInt2 int2\\n    struct FxaaTex { SamplerState smpl; Texture2D tex; };\\n    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\\n    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\\n#endif\\n/*--------------------------------------------------------------------------*/\\n#if (FXAA_HLSL_5 == 1)\\n    #define FxaaInt2 int2\\n    struct FxaaTex { SamplerState smpl; Texture2D tex; };\\n    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\\n    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\\n    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)\\n    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)\\n    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)\\n    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)\\n#endif\\n\\n\\n/*============================================================================\\n                   GREEN AS LUMA OPTION SUPPORT FUNCTION\\n============================================================================*/\\n#if (FXAA_GREEN_AS_LUMA == 0)\\n    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }\\n#else\\n    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\\n#endif    \\n\\n\\n\\n\\n/*============================================================================\\n                             FXAA3 QUALITY - PC\\n============================================================================*/\\n#if (FXAA_PC == 1)\\n/*--------------------------------------------------------------------------*/\\nFxaaFloat4 FxaaPixelShader(\\n    //\\n    // Use noperspective interpolation here (turn off perspective interpolation).\\n    // {xy} = center of pixel\\n    FxaaFloat2 pos,\\n    //\\n    // Used only for FXAA Console, and not used on the 360 version.\\n    // Use noperspective interpolation here (turn off perspective interpolation).\\n    // {xy__} = upper left of pixel\\n    // {__zw} = lower right of pixel\\n    FxaaFloat4 fxaaConsolePosPos,\\n    //\\n    // Input color texture.\\n    // {rgb_} = color in linear or perceptual color space\\n    // if (FXAA_GREEN_AS_LUMA == 0)\\n    //     {___a} = luma in perceptual color space (not linear)\\n    FxaaTex tex,\\n    //\\n    // Only used on the optimized 360 version of FXAA Console.\\n    // For everything but 360, just use the same input here as for \\\"tex\\\".\\n    // For 360, same texture, just alias with a 2nd sampler.\\n    // This sampler needs to have an exponent bias of -1.\\n    FxaaTex fxaaConsole360TexExpBiasNegOne,\\n    //\\n    // Only used on the optimized 360 version of FXAA Console.\\n    // For everything but 360, just use the same input here as for \\\"tex\\\".\\n    // For 360, same texture, just alias with a 3nd sampler.\\n    // This sampler needs to have an exponent bias of -2.\\n    FxaaTex fxaaConsole360TexExpBiasNegTwo,\\n    //\\n    // Only used on FXAA Quality.\\n    // This must be from a constant/uniform.\\n    // {x_} = 1.0/screenWidthInPixels\\n    // {_y} = 1.0/screenHeightInPixels\\n    FxaaFloat2 fxaaQualityRcpFrame,\\n    //\\n    // Only used on FXAA Console.\\n    // This must be from a constant/uniform.\\n    // This effects sub-pixel AA quality and inversely sharpness.\\n    //   Where N ranges between,\\n    //     N = 0.50 (default)\\n    //     N = 0.33 (sharper)\\n    // {x___} = -N/screenWidthInPixels  \\n    // {_y__} = -N/screenHeightInPixels\\n    // {__z_} =  N/screenWidthInPixels  \\n    // {___w} =  N/screenHeightInPixels \\n    FxaaFloat4 fxaaConsoleRcpFrameOpt,\\n    //\\n    // Only used on FXAA Console.\\n    // Not used on 360, but used on PS3 and PC.\\n    // This must be from a constant/uniform.\\n    // {x___} = -2.0/screenWidthInPixels  \\n    // {_y__} = -2.0/screenHeightInPixels\\n    // {__z_} =  2.0/screenWidthInPixels  \\n    // {___w} =  2.0/screenHeightInPixels \\n    FxaaFloat4 fxaaConsoleRcpFrameOpt2,\\n    //\\n    // Only used on FXAA Console.\\n    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.\\n    // This must be from a constant/uniform.\\n    // {x___} =  8.0/screenWidthInPixels  \\n    // {_y__} =  8.0/screenHeightInPixels\\n    // {__z_} = -4.0/screenWidthInPixels  \\n    // {___w} = -4.0/screenHeightInPixels \\n    FxaaFloat4 fxaaConsole360RcpFrameOpt2,\\n    //\\n    // Only used on FXAA Quality.\\n    // This used to be the FXAA_QUALITY__SUBPIX define.\\n    // It is here now to allow easier tuning.\\n    // Choose the amount of sub-pixel aliasing removal.\\n    // This can effect sharpness.\\n    //   1.00 - upper limit (softer)\\n    //   0.75 - default amount of filtering\\n    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)\\n    //   0.25 - almost off\\n    //   0.00 - completely off\\n    FxaaFloat fxaaQualitySubpix,\\n    //\\n    // Only used on FXAA Quality.\\n    // This used to be the FXAA_QUALITY__EDGE_THRESHOLD define.\\n    // It is here now to allow easier tuning.\\n    // The minimum amount of local contrast required to apply algorithm.\\n    //   0.333 - too little (faster)\\n    //   0.250 - low quality\\n    //   0.166 - default\\n    //   0.125 - high quality \\n    //   0.063 - overkill (slower)\\n    FxaaFloat fxaaQualityEdgeThreshold,\\n    //\\n    // Only used on FXAA Quality.\\n    // This used to be the FXAA_QUALITY__EDGE_THRESHOLD_MIN define.\\n    // It is here now to allow easier tuning.\\n    // Trims the algorithm from processing darks.\\n    //   0.0833 - upper limit (default, the start of visible unfiltered edges)\\n    //   0.0625 - high quality (faster)\\n    //   0.0312 - visible limit (slower)\\n    // Special notes when using FXAA_GREEN_AS_LUMA,\\n    //   Likely want to set this to zero.\\n    //   As colors that are mostly not-green\\n    //   will appear very dark in the green channel!\\n    //   Tune by looking at mostly non-green content,\\n    //   then start at zero and increase until aliasing is a problem.\\n    FxaaFloat fxaaQualityEdgeThresholdMin,\\n    // \\n    // Only used on FXAA Console.\\n    // This used to be the FXAA_CONSOLE__EDGE_SHARPNESS define.\\n    // It is here now to allow easier tuning.\\n    // This does not effect PS3, as this needs to be compiled in.\\n    //   Use FXAA_CONSOLE__PS3_EDGE_SHARPNESS for PS3.\\n    //   Due to the PS3 being ALU bound,\\n    //   there are only three safe values here: 2 and 4 and 8.\\n    //   These options use the shaders ability to a free *|/ by 2|4|8.\\n    // For all other platforms can be a non-power of two.\\n    //   8.0 is sharper (default!!!)\\n    //   4.0 is softer\\n    //   2.0 is really soft (good only for vector graphics inputs)\\n    FxaaFloat fxaaConsoleEdgeSharpness,\\n    //\\n    // Only used on FXAA Console.\\n    // This used to be the FXAA_CONSOLE__EDGE_THRESHOLD define.\\n    // It is here now to allow easier tuning.\\n    // This does not effect PS3, as this needs to be compiled in.\\n    //   Use FXAA_CONSOLE__PS3_EDGE_THRESHOLD for PS3.\\n    //   Due to the PS3 being ALU bound,\\n    //   there are only two safe values here: 1/4 and 1/8.\\n    //   These options use the shaders ability to a free *|/ by 2|4|8.\\n    // The console setting has a different mapping than the quality setting.\\n    // Other platforms can use other values.\\n    //   0.125 leaves less aliasing, but is softer (default!!!)\\n    //   0.25 leaves more aliasing, and is sharper\\n    FxaaFloat fxaaConsoleEdgeThreshold,\\n    //\\n    // Only used on FXAA Console.\\n    // This used to be the FXAA_CONSOLE__EDGE_THRESHOLD_MIN define.\\n    // It is here now to allow easier tuning.\\n    // Trims the algorithm from processing darks.\\n    // The console setting has a different mapping than the quality setting.\\n    // This only applies when FXAA_EARLY_EXIT is 1.\\n    // This does not apply to PS3, \\n    // PS3 was simplified to avoid more shader instructions.\\n    //   0.06 - faster but more aliasing in darks\\n    //   0.05 - default\\n    //   0.04 - slower and less aliasing in darks\\n    // Special notes when using FXAA_GREEN_AS_LUMA,\\n    //   Likely want to set this to zero.\\n    //   As colors that are mostly not-green\\n    //   will appear very dark in the green channel!\\n    //   Tune by looking at mostly non-green content,\\n    //   then start at zero and increase until aliasing is a problem.\\n    FxaaFloat fxaaConsoleEdgeThresholdMin,\\n    //    \\n    // Extra constants for 360 FXAA Console only.\\n    // Use zeros or anything else for other platforms.\\n    // These must be in physical constant registers and NOT immedates.\\n    // Immedates will result in compiler un-optimizing.\\n    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)\\n    FxaaFloat4 fxaaConsole360ConstDir\\n) {\\n/*--------------------------------------------------------------------------*/\\n    FxaaFloat2 posM;\\n    posM.x = pos.x;\\n    posM.y = pos.y;\\n    #if (FXAA_GATHER4_ALPHA == 1)\\n        #if (FXAA_DISCARD == 0)\\n            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\\n            #if (FXAA_GREEN_AS_LUMA == 0)\\n                #define lumaM rgbyM.w\\n            #else\\n                #define lumaM rgbyM.y\\n            #endif\\n        #endif\\n        #if (FXAA_GREEN_AS_LUMA == 0)\\n            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);\\n            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));\\n        #else\\n            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);\\n            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));\\n        #endif\\n        #if (FXAA_DISCARD == 1)\\n            #define lumaM luma4A.w\\n        #endif\\n        #define lumaE luma4A.z\\n        #define lumaS luma4A.x\\n        #define lumaSE luma4A.y\\n        #define lumaNW luma4B.w\\n        #define lumaN luma4B.z\\n        #define lumaW luma4B.x\\n    #else\\n        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\\n        #if (FXAA_GREEN_AS_LUMA == 0)\\n            #define lumaM rgbyM.w\\n        #else\\n            #define lumaM rgbyM.y\\n        #endif\\n        #if (FXAA_GLSL_100 == 1)\\n            FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));\\n            FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));\\n            FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));\\n            FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));\\n        #else\\n            FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\\n            FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\\n            FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\\n            FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\\n        #endif\\n    #endif\\n/*--------------------------------------------------------------------------*/\\n    FxaaFloat maxSM = max(lumaS, lumaM);\\n    FxaaFloat minSM = min(lumaS, lumaM);\\n    FxaaFloat maxESM = max(lumaE, maxSM);\\n    FxaaFloat minESM = min(lumaE, minSM);\\n    FxaaFloat maxWN = max(lumaN, lumaW);\\n    FxaaFloat minWN = min(lumaN, lumaW);\\n    FxaaFloat rangeMax = max(maxWN, maxESM);\\n    FxaaFloat rangeMin = min(minWN, minESM);\\n    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\\n    FxaaFloat range = rangeMax - rangeMin;\\n    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\\n    FxaaBool earlyExit = range < rangeMaxClamped;\\n/*--------------------------------------------------------------------------*/\\n    if(earlyExit)\\n        #if (FXAA_DISCARD == 1)\\n            FxaaDiscard;\\n        #else\\n            return rgbyM;\\n        #endif\\n/*--------------------------------------------------------------------------*/\\n    #if (FXAA_GATHER4_ALPHA == 0)\\n        #if (FXAA_GLSL_100 == 1)\\n            FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));\\n            FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));\\n            FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));\\n            FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));\\n        #else\\n            FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\\n            FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\\n            FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\\n            FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\\n        #endif\\n    #else\\n        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\\n        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\\n    #endif\\n/*--------------------------------------------------------------------------*/\\n    FxaaFloat lumaNS = lumaN + lumaS;\\n    FxaaFloat lumaWE = lumaW + lumaE;\\n    FxaaFloat subpixRcpRange = 1.0/range;\\n    FxaaFloat subpixNSWE = lumaNS + lumaWE;\\n    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\\n    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\\n/*--------------------------------------------------------------------------*/\\n    FxaaFloat lumaNESE = lumaNE + lumaSE;\\n    FxaaFloat lumaNWNE = lumaNW + lumaNE;\\n    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\\n    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\\n/*--------------------------------------------------------------------------*/\\n    FxaaFloat lumaNWSW = lumaNW + lumaSW;\\n    FxaaFloat lumaSWSE = lumaSW + lumaSE;\\n    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\\n    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\\n    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\\n    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\\n    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\\n    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\\n/*--------------------------------------------------------------------------*/\\n    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\\n    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\\n    FxaaBool horzSpan = edgeHorz >= edgeVert;\\n    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\\n/*--------------------------------------------------------------------------*/\\n    if(!horzSpan) lumaN = lumaW;\\n    if(!horzSpan) lumaS = lumaE;\\n    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\\n    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\\n/*--------------------------------------------------------------------------*/\\n    FxaaFloat gradientN = lumaN - lumaM;\\n    FxaaFloat gradientS = lumaS - lumaM;\\n    FxaaFloat lumaNN = lumaN + lumaM;\\n    FxaaFloat lumaSS = lumaS + lumaM;\\n    FxaaBool pairN = abs(gradientN) >= abs(gradientS);\\n    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\\n    if(pairN) lengthSign = -lengthSign;\\n    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\\n/*--------------------------------------------------------------------------*/\\n    FxaaFloat2 posB;\\n    posB.x = posM.x;\\n    posB.y = posM.y;\\n    FxaaFloat2 offNP;\\n    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\\n    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\\n    if(!horzSpan) posB.x += lengthSign * 0.5;\\n    if( horzSpan) posB.y += lengthSign * 0.5;\\n/*--------------------------------------------------------------------------*/\\n    FxaaFloat2 posN;\\n    posN.x = posB.x - offNP.x * FXAA_QUALITY__P0;\\n    posN.y = posB.y - offNP.y * FXAA_QUALITY__P0;\\n    FxaaFloat2 posP;\\n    posP.x = posB.x + offNP.x * FXAA_QUALITY__P0;\\n    posP.y = posB.y + offNP.y * FXAA_QUALITY__P0;\\n    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\\n    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\\n    FxaaFloat subpixE = subpixC * subpixC;\\n    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\\n/*--------------------------------------------------------------------------*/\\n    if(!pairN) lumaNN = lumaSS;\\n    FxaaFloat gradientScaled = gradient * 1.0/4.0;\\n    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\\n    FxaaFloat subpixF = subpixD * subpixE;\\n    FxaaBool lumaMLTZero = lumaMM < 0.0;\\n/*--------------------------------------------------------------------------*/\\n    lumaEndN -= lumaNN * 0.5;\\n    lumaEndP -= lumaNN * 0.5;\\n    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\\n    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\\n    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY__P1;\\n    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY__P1;\\n    FxaaBool doneNP = (!doneN) || (!doneP);\\n    if(!doneP) posP.x += offNP.x * FXAA_QUALITY__P1;\\n    if(!doneP) posP.y += offNP.y * FXAA_QUALITY__P1;\\n/*--------------------------------------------------------------------------*/\\n    if(doneNP) {\\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\\n        doneN = abs(lumaEndN) >= gradientScaled;\\n        doneP = abs(lumaEndP) >= gradientScaled;\\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY__P2;\\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY__P2;\\n        doneNP = (!doneN) || (!doneP);\\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY__P2;\\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY__P2;\\n/*--------------------------------------------------------------------------*/\\n        #if (FXAA_QUALITY__PS > 3)\\n        if(doneNP) {\\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\\n            doneN = abs(lumaEndN) >= gradientScaled;\\n            doneP = abs(lumaEndP) >= gradientScaled;\\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY__P3;\\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY__P3;\\n            doneNP = (!doneN) || (!doneP);\\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY__P3;\\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY__P3;\\n/*--------------------------------------------------------------------------*/\\n            #if (FXAA_QUALITY__PS > 4)\\n            if(doneNP) {\\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\\n                doneN = abs(lumaEndN) >= gradientScaled;\\n                doneP = abs(lumaEndP) >= gradientScaled;\\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY__P4;\\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY__P4;\\n                doneNP = (!doneN) || (!doneP);\\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY__P4;\\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY__P4;\\n/*--------------------------------------------------------------------------*/\\n                #if (FXAA_QUALITY__PS > 5)\\n                if(doneNP) {\\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\\n                    doneN = abs(lumaEndN) >= gradientScaled;\\n                    doneP = abs(lumaEndP) >= gradientScaled;\\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY__P5;\\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY__P5;\\n                    doneNP = (!doneN) || (!doneP);\\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY__P5;\\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY__P5;\\n/*--------------------------------------------------------------------------*/\\n                    #if (FXAA_QUALITY__PS > 6)\\n                    if(doneNP) {\\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\\n                        doneN = abs(lumaEndN) >= gradientScaled;\\n                        doneP = abs(lumaEndP) >= gradientScaled;\\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY__P6;\\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY__P6;\\n                        doneNP = (!doneN) || (!doneP);\\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY__P6;\\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY__P6;\\n/*--------------------------------------------------------------------------*/\\n                        #if (FXAA_QUALITY__PS > 7)\\n                        if(doneNP) {\\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\\n                            doneN = abs(lumaEndN) >= gradientScaled;\\n                            doneP = abs(lumaEndP) >= gradientScaled;\\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY__P7;\\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY__P7;\\n                            doneNP = (!doneN) || (!doneP);\\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY__P7;\\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY__P7;\\n/*--------------------------------------------------------------------------*/\\n    #if (FXAA_QUALITY__PS > 8)\\n    if(doneNP) {\\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\\n        doneN = abs(lumaEndN) >= gradientScaled;\\n        doneP = abs(lumaEndP) >= gradientScaled;\\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY__P8;\\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY__P8;\\n        doneNP = (!doneN) || (!doneP);\\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY__P8;\\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY__P8;\\n/*--------------------------------------------------------------------------*/\\n        #if (FXAA_QUALITY__PS > 9)\\n        if(doneNP) {\\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\\n            doneN = abs(lumaEndN) >= gradientScaled;\\n            doneP = abs(lumaEndP) >= gradientScaled;\\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY__P9;\\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY__P9;\\n            doneNP = (!doneN) || (!doneP);\\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY__P9;\\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY__P9;\\n/*--------------------------------------------------------------------------*/\\n            #if (FXAA_QUALITY__PS > 10)\\n            if(doneNP) {\\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\\n                doneN = abs(lumaEndN) >= gradientScaled;\\n                doneP = abs(lumaEndP) >= gradientScaled;\\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY__P10;\\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY__P10;\\n                doneNP = (!doneN) || (!doneP);\\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY__P10;\\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY__P10;\\n/*--------------------------------------------------------------------------*/\\n                #if (FXAA_QUALITY__PS > 11)\\n                if(doneNP) {\\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\\n                    doneN = abs(lumaEndN) >= gradientScaled;\\n                    doneP = abs(lumaEndP) >= gradientScaled;\\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY__P11;\\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY__P11;\\n                    doneNP = (!doneN) || (!doneP);\\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY__P11;\\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY__P11;\\n/*--------------------------------------------------------------------------*/\\n                    #if (FXAA_QUALITY__PS > 12)\\n                    if(doneNP) {\\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\\n                        doneN = abs(lumaEndN) >= gradientScaled;\\n                        doneP = abs(lumaEndP) >= gradientScaled;\\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY__P12;\\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY__P12;\\n                        doneNP = (!doneN) || (!doneP);\\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY__P12;\\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY__P12;\\n/*--------------------------------------------------------------------------*/\\n                    }\\n                    #endif\\n/*--------------------------------------------------------------------------*/\\n                }\\n                #endif\\n/*--------------------------------------------------------------------------*/\\n            }\\n            #endif\\n/*--------------------------------------------------------------------------*/\\n        }\\n        #endif\\n/*--------------------------------------------------------------------------*/\\n    }\\n    #endif\\n/*--------------------------------------------------------------------------*/\\n                        }\\n                        #endif\\n/*--------------------------------------------------------------------------*/\\n                    }\\n                    #endif\\n/*--------------------------------------------------------------------------*/\\n                }\\n                #endif\\n/*--------------------------------------------------------------------------*/\\n            }\\n            #endif\\n/*--------------------------------------------------------------------------*/\\n        }\\n        #endif\\n/*--------------------------------------------------------------------------*/\\n    }\\n/*--------------------------------------------------------------------------*/\\n    FxaaFloat dstN = posM.x - posN.x;\\n    FxaaFloat dstP = posP.x - posM.x;\\n    if(!horzSpan) dstN = posM.y - posN.y;\\n    if(!horzSpan) dstP = posP.y - posM.y;\\n/*--------------------------------------------------------------------------*/\\n    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\\n    FxaaFloat spanLength = (dstP + dstN);\\n    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\\n    FxaaFloat spanLengthRcp = 1.0/spanLength;\\n/*--------------------------------------------------------------------------*/\\n    FxaaBool directionN = dstN < dstP;\\n    FxaaFloat dst = min(dstN, dstP);\\n    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\\n    FxaaFloat subpixG = subpixF * subpixF;\\n    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\\n    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\\n/*--------------------------------------------------------------------------*/\\n    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\\n    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\\n    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\\n    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\\n    #if (FXAA_DISCARD == 1)\\n        return FxaaTexTop(tex, posM);\\n    #else\\n        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\\n    #endif\\n}\\n/*==========================================================================*/\\n#endif\\n\\n\\n\" + _in + \" vec2 v_texcoord;\\n\" + _def_rt0 + \"\\nvoid main() {\\n\\n    rt0 = FxaaPixelShader(\\n            v_texcoord,\\n            vec4(0.0),\\n            u_baseColorTexture,\\n            u_baseColorTexture,\\n            u_baseColorTexture,\\n            1.0/u_screenInfo,\\n            vec4(0.0),\\n            vec4(0.0),\\n            vec4(0.0),\\n            0.75,\\n            0.166,\\n            0.0833,\\n            0.0,\\n            0.0,\\n            0.0,\\n            vec4(0.0)\\n          );\\n    rt0.a = 1.0;\\n    \" + _def_fragColor + \"\\n}\\n\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FXAA3QualityShader.prototype, \"pixelShaderDefinitions\", {\n        get: function () {\n            return \"\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FXAA3QualityShader.prototype, \"pixelShaderBody\", {\n        get: function () {\n            return this.fragmentShaderSimple;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FXAA3QualityShader.prototype, \"attributeCompositions\", {\n        get: function () {\n            return [_foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec2, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return FXAA3QualityShader;\n}(_GLSLShader__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (FXAA3QualityShader);\n\n\n//# sourceURL=webpack:///./src/webgl/shaders/FXAA3Quality.ts?");

/***/ }),

/***/ "./src/webgl/shaders/GLSLShader.ts":
/*!*****************************************!*\
  !*** ./src/webgl/shaders/GLSLShader.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../WebGLResourceRepository */ \"./src/webgl/WebGLResourceRepository.ts\");\n/* harmony import */ var _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n\n\n\nvar GLSLShader = /** @class */ (function () {\n    function GLSLShader() {\n        this.__webglResourceRepository = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\n    }\n    Object.defineProperty(GLSLShader.prototype, \"glsl_rt0\", {\n        get: function () {\n            var repo = this.__webglResourceRepository;\n            if (repo.currentWebGLContextWrapper.isWebGL2) {\n                return 'layout(location = 0) out vec4 rt0;\\n';\n            }\n            else {\n                return 'vec4 rt0;\\n';\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"glsl_fragColor\", {\n        get: function () {\n            var repo = this.__webglResourceRepository;\n            if (repo.currentWebGLContextWrapper != null && repo.currentWebGLContextWrapper.isWebGL2) {\n                return '';\n            }\n            else {\n                return 'gl_FragColor = rt0;\\n';\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"glsl_vertex_in\", {\n        get: function () {\n            var repo = this.__webglResourceRepository;\n            if (repo.currentWebGLContextWrapper.isWebGL2) {\n                return 'in';\n            }\n            else {\n                return 'attribute';\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"glsl_fragment_in\", {\n        get: function () {\n            var repo = this.__webglResourceRepository;\n            if (repo.currentWebGLContextWrapper.isWebGL2) {\n                return 'in';\n            }\n            else {\n                return 'varying';\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"glsl_vertex_out\", {\n        get: function () {\n            var repo = this.__webglResourceRepository;\n            if (repo.currentWebGLContextWrapper.isWebGL2) {\n                return 'out';\n            }\n            else {\n                return 'varying';\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"glsl_texture\", {\n        get: function () {\n            var repo = this.__webglResourceRepository;\n            if (repo.currentWebGLContextWrapper.isWebGL2) {\n                return 'texture';\n            }\n            else {\n                return 'texture2D';\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"glsl_versionText\", {\n        get: function () {\n            var repo = this.__webglResourceRepository;\n            if (repo.currentWebGLContextWrapper != null && repo.currentWebGLContextWrapper.isWebGL2) {\n                return '#version 300 es\\n';\n            }\n            else {\n                return '';\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"glslBegin\", {\n        get: function () {\n            var _version = this.glsl_versionText;\n            return _version + \"\\n    precision highp float;\\n    \";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"glslMainBegin\", {\n        get: function () {\n            return \"\\n    void main() {\\n    \";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"glslMainEnd\", {\n        get: function () {\n            return \"\\n    }\\n    \";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"glsl1ShaderTextureLodExt\", {\n        get: function () {\n            var ext = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance().currentWebGLContextWrapper.webgl1ExtSTL;\n            return (ext != null) ? '#extension GL_EXT_shader_texture_lod : require' : '';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"glsl1ShaderDerivativeExt\", {\n        get: function () {\n            var ext = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance().currentWebGLContextWrapper.webgl1ExtDRV;\n            return (ext != null) ? '#extension GL_OES_standard_derivatives : require' : '';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"toNormalMatrix\", {\n        get: function () {\n            return \"\\n    mat3 toNormalMatrix(mat4 m) {\\n      float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\\n      a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\\n      a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\\n      a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\\n\\n      float b00 = a00 * a11 - a01 * a10,\\n      b01 = a00 * a12 - a02 * a10,\\n      b02 = a00 * a13 - a03 * a10,\\n      b03 = a01 * a12 - a02 * a11,\\n      b04 = a01 * a13 - a03 * a11,\\n      b05 = a02 * a13 - a03 * a12,\\n      b06 = a20 * a31 - a21 * a30,\\n      b07 = a20 * a32 - a22 * a30,\\n      b08 = a20 * a33 - a23 * a30,\\n      b09 = a21 * a32 - a22 * a31,\\n      b10 = a21 * a33 - a23 * a31,\\n      b11 = a22 * a33 - a23 * a32;\\n\\n      float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\\n\\n      return mat3(\\n        a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\\n        a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\\n        a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\\n    }\\n    \";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"getSkinMatrix\", {\n        get: function () {\n            return \"\\n    //uniform mat4 u_boneMatrices[100];\\n    uniform vec4 u_boneCompressedChanks[90];\\n    uniform vec4 u_boneCompressedInfo;\\n\\n    mat4 createMatrixFromQuaternionTransformUniformScale( vec4 quaternion, vec4 translationScale ) {\\n      vec4 q = quaternion;\\n      vec3 t = translationScale.xyz;\\n      float scale = translationScale.w;\\n\\n      float sx = q.x * q.x;\\n      float sy = q.y * q.y;\\n      float sz = q.z * q.z;\\n      float cx = q.y * q.z;\\n      float cy = q.x * q.z;\\n      float cz = q.x * q.y;\\n      float wx = q.w * q.x;\\n      float wy = q.w * q.y;\\n      float wz = q.w * q.z;\\n\\n      mat4 mat = mat4(\\n        1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\\n        2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\\n        2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\\n        t.x, t.y, t.z, 1.0\\n      );\\n\\n      mat4 uniformScaleMat = mat4(\\n        scale, 0.0, 0.0, 0.0,\\n        0.0, scale, 0.0, 0.0,\\n        0.0, 0.0, scale, 0.0,\\n        0.0, 0.0, 0.0, 1.0\\n      );\\n\\n      return mat*uniformScaleMat;\\n    }\\n\\n    vec4 unpackedVec2ToNormalizedVec4(vec2 vec_xy, float criteria){\\n\\n      float r;\\n      float g;\\n      float b;\\n      float a;\\n\\n      float ix = floor(vec_xy.x * criteria);\\n      float v1x = ix / criteria;\\n      float v1y = ix - floor(v1x) * criteria;\\n\\n      r = ( v1x + 1.0 ) / (criteria-1.0);\\n      g = ( v1y + 1.0 ) / (criteria-1.0);\\n\\n      float iy = floor( vec_xy.y * criteria);\\n      float v2x = iy / criteria;\\n      float v2y = iy - floor(v2x) * criteria;\\n\\n      b = ( v2x + 1.0 ) / (criteria-1.0);\\n      a = ( v2y + 1.0 ) / (criteria-1.0);\\n\\n      r -= 1.0/criteria;\\n      g -= 1.0/criteria;\\n      b -= 1.0/criteria;\\n      a -= 1.0/criteria;\\n\\n      r = r*2.0-1.0;\\n      g = g*2.0-1.0;\\n      b = b*2.0-1.0;\\n      a = a*2.0-1.0;\\n\\n      return vec4(r, g, b, a);\\n    }\\n\\n\\n    mat4 getSkinMatrix() {\\n\\n      vec2 criteria = vec2(4096.0, 4096.0);\\n      mat4 skinMat = a_weight.x * createMatrixFromQuaternionTransformUniformScale(\\n        unpackedVec2ToNormalizedVec4(u_boneCompressedChanks[int(a_joint.x)].xy, criteria.x),\\n        unpackedVec2ToNormalizedVec4(u_boneCompressedChanks[int(a_joint.x)].zw, criteria.y)*u_boneCompressedInfo);\\n      skinMat += a_weight.y * createMatrixFromQuaternionTransformUniformScale(\\n        unpackedVec2ToNormalizedVec4(u_boneCompressedChanks[int(a_joint.y)].xy, criteria.x),\\n        unpackedVec2ToNormalizedVec4(u_boneCompressedChanks[int(a_joint.y)].zw, criteria.y)*u_boneCompressedInfo);\\n      skinMat += a_weight.z * createMatrixFromQuaternionTransformUniformScale(\\n        unpackedVec2ToNormalizedVec4(u_boneCompressedChanks[int(a_joint.z)].xy, criteria.x),\\n        unpackedVec2ToNormalizedVec4(u_boneCompressedChanks[int(a_joint.z)].zw, criteria.y)*u_boneCompressedInfo);\\n      skinMat += a_weight.w * createMatrixFromQuaternionTransformUniformScale(\\n        unpackedVec2ToNormalizedVec4(u_boneCompressedChanks[int(a_joint.w)].xy, criteria.x),\\n        unpackedVec2ToNormalizedVec4(u_boneCompressedChanks[int(a_joint.w)].zw, criteria.y)*u_boneCompressedInfo);\\n\\n      // mat4 skinMat = a_weight.x * u_boneMatrices[int(a_joint.x)];\\n      // skinMat += a_weight.y * u_boneMatrices[int(a_joint.y)];\\n      // skinMat += a_weight.z * u_boneMatrices[int(a_joint.z)];\\n      // skinMat += a_weight.w * u_boneMatrices[int(a_joint.w)];\\n\\n      return skinMat;\\n    }\\n    \";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"processSkinning\", {\n        get: function () {\n            return \"\\n    uniform int u_skinningMode;\\n\\n    bool skinning(\\n      out bool isSkinning,\\n      in mat3 inNormalMatrix,\\n      out mat3 outNormalMatrix\\n      )\\n    {\\n      mat4 worldMatrix = getMatrix(a_instanceID);\\n      mat4 viewMatrix = getViewMatrix(a_instanceID);\\n      mat4 projectionMatrix = getProjectionMatrix(a_instanceID);\\n\\n      // Skeletal\\n      isSkinning = false;\\n      if (u_skinningMode == 1) {\\n        mat4 skinMat = getSkinMatrix();\\n        v_position_inWorld = skinMat * vec4(a_position, 1.0);\\n        outNormalMatrix = toNormalMatrix(skinMat);\\n        v_normal_inWorld = normalize(outNormalMatrix * a_normal);\\n        gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\\n        isSkinning = true;\\n      } else {\\n        v_position_inWorld = worldMatrix * vec4(a_position, 1.0);\\n        gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\\n        outNormalMatrix = inNormalMatrix;\\n        v_normal_inWorld = normalize(inNormalMatrix * a_normal);\\n      }\\n\\n      return isSkinning;\\n    }\\n\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"pointSize\", {\n        get: function () {\n            return \"\\n    uniform float u_pointSize;\\n\\n    float getPointSize(float instanceId) {\\n      return u_pointSize;\\n    }\\n    \";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"pointDistanceAttenuation\", {\n        get: function () {\n            return \"\\n    uniform vec3 u_pointDistanceAttenuation;\\n\\n    vec3 getPointDistanceAttenuation(float instanceId) {\\n      return u_pointDistanceAttenuation;\\n    }\\n    \";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"pbrUniformDefinition\", {\n        get: function () {\n            var shaderText = '';\n            shaderText += 'uniform vec2 uMetallicRoughnessFactors;\\n';\n            shaderText += 'uniform vec3 uBaseColorFactor;\\n';\n            shaderText += 'uniform vec2 uOcclusionFactors;';\n            shaderText += 'uniform vec3 uEmissiveFactor;';\n            shaderText += 'uniform sampler2D uMetallicRoughnessTexture;\\n';\n            var occlusionTexture = true; //material.getTextureFromPurpose(GLBoost.TEXTURE_PURPOSE_OCCLUSION);\n            if (occlusionTexture) {\n                shaderText += 'uniform sampler2D uOcclusionTexture;\\n';\n            }\n            var emissiveTexture = true; //material.getTextureFromPurpose(GLBoost.TEXTURE_PURPOSE_EMISSIVE);\n            if (emissiveTexture) {\n                shaderText += 'uniform sampler2D uEmissiveTexture;\\n';\n            }\n            var diffuseEnvCubeTexture = true; //material.getTextureFromPurpose(GLBoost.TEXTURE_PURPOSE_IBL_DIFFUSE_ENV_CUBE);\n            if (diffuseEnvCubeTexture) {\n                shaderText += 'uniform sampler2D u_brdfLutTexture;\\n';\n                shaderText += 'uniform samplerCube uDiffuseEnvTexture;\\n';\n                shaderText += 'uniform samplerCube uSpecularEnvTexture;\\n';\n                shaderText += 'uniform vec4 uIBLParameters;\\n'; // Ka * amount of ambient lights\n            }\n            shaderText += 'uniform vec4 ambient;\\n'; // Ka * amount of ambient lights\n            return shaderText;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GLSLShader.prototype, \"pbrMethodDefinition\", {\n        get: function () {\n            return \"\\n    const float M_PI = 3.141592653589793;\\n    const float c_MinRoughness = 0.04;\\n\\n    float angular_n_h(float NH) {\\n      return acos(NH);\\n    }\\n\\n    float sqr(float x) {\\n      return x*x;\\n    }\\n\\n    float d_phong(float NH, float c1) {\\n      return pow(\\n        cos(acos(NH))\\n        , c1\\n      );\\n    }\\n\\n    // GGX NDF\\n    float d_ggx(float NH, float alphaRoughness) {\\n      float roughnessSqr = alphaRoughness * alphaRoughness;\\n      float f = (roughnessSqr - 1.0) * NH * NH + 1.0;\\n      return roughnessSqr / (M_PI * f * f);\\n    }\\n\\n    float d_torrance_reiz(float NH, float c3) {\\n      float CosSquared = NH*NH;\\n      float TanSquared = (1.0 - CosSquared)/CosSquared;\\n      //return (1.0/M_PI) * sqr(c3/(CosSquared * (c3*c3 + TanSquared)));  // gamma = 2, aka GGX\\n      return (1.0/sqrt(M_PI)) * (sqr(c3)/(CosSquared * (c3*c3 + TanSquared))); // gamma = 1, D_Berry\\n    }\\n\\n    float d_beckmann(float NH, float m) {\\n      float co = 1.0 / (4.0 * m * m * NH * NH * NH * NH);\\n      float expx = exp((NH * NH - 1.0) / (m * m * NH * NH));\\n      return co * expx;\\n    }\\n\\n    // the same as glTF WebGL sample\\n    // https://github.com/KhronosGroup/glTF-WebGL-PBR/blob/88eda8c5358efe03128b72b6c5f5f6e5b6d023e1/shaders/pbr-frag.glsl#L188\\n    // That is, Unreal Engine based approach, but modified to use alphaRoughness (squared artist's roughness parameter),\\n    // and based on 'Separable Masking and Shadowing' approximation (propesed by Christophe Schlick)\\n    // https://www.cs.virginia.edu/~jdl/bib/appearance/analytic%20models/schlick94b.pdf\\n    float g_shielding(float NL, float NV, float alphaRoughness) {\\n      float r = alphaRoughness;\\n\\n      // Local Shadowing using \\\"Schlick-Smith\\\" Masking Function\\n      float localShadowing = 2.0 * NL / (NL + sqrt(r * r + (1.0 - r * r) * (NL * NL)));\\n\\n      // Local Masking using \\\"Schlick-Smith\\\" Masking Function\\n      float localMasking = 2.0 * NV / (NV + sqrt(r * r + (1.0 - r * r) * (NV * NV)));\\n\\n      return localShadowing * localMasking;\\n    }\\n\\n    // The code from https://google.github.io/filament/Filament.html#listing_approximatedspecularv\\n    // The idea is from [Heitz14] Eric Heitz. 2014. Understanding the Masking-Shadowing Function in Microfacet-Based BRDFs.\\n    float v_SmithGGXCorrelated(float NL, float NV, float alphaRoughness) {\\n      float a2 = alphaRoughness * alphaRoughness;\\n      float GGXV = NL * sqrt(NV * NV * (1.0 - a2) + a2);\\n      float GGXL = NV * sqrt(NL * NL * (1.0 - a2) + a2);\\n      return 0.5 / (GGXV + GGXL);\\n    }\\n\\n    float v_SmithGGXCorrelatedFast(float NL, float NV, float alphaRoughness) {\\n      float a = alphaRoughness;\\n      float GGXV = NL * (NV * (1.0 - a) + a);\\n      float GGXL = NV * (NL * (1.0 - a) + a);\\n      return 0.5 / (GGXV + GGXL);\\n    }\\n\\n    // The Schlick Approximation to Fresnel\\n    vec3 fresnel(vec3 f0, float VH) {\\n      return vec3(f0) + (vec3(1.0) - f0) * pow(1.0 - VH, 5.0);\\n    }\\n\\n    vec3 cook_torrance_specular_brdf(float NH, float NL, float NV, vec3 F, float alphaRoughness) {\\n      float D = d_ggx(NH, alphaRoughness);\\n      float V = v_SmithGGXCorrelated(NL, NV, alphaRoughness);\\n      return vec3(D)*vec3(V)*F;\\n//      float G = g_shielding(NL, NV, alphaRoughness);\\n//      return vec3(D)*vec3(G)*F/vec3(4.0*NL*NV);\\n\\n    }\\n\\n    vec3 diffuse_brdf(vec3 albedo)\\n    {\\n      return albedo / M_PI;\\n    }\\n\\n    vec3 srgbToLinear(vec3 srgbColor) {\\n      return pow(srgbColor, vec3(2.2));\\n    }\\n\\n    float srgbToLinear(float value) {\\n      return pow(value, 2.2);\\n    }\\n\\n    vec3 linearToSrgb(vec3 linearColor) {\\n      return pow(linearColor, vec3(1.0/2.2));\\n    }\\n\\n    float linearToSrgb(float value) {\\n      return pow(value, 1.0/2.2);\\n    }\\n\\n    vec3 fresnelSchlickRoughness(vec3 F0, float cosTheta, float roughness)\\n    {\\n      return F0 + (max(vec3(1.0 - roughness), F0) - F0) * pow(1.0 - cosTheta, 5.0);\\n    }\\n\\n    \";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    GLSLShader.getStringFromShaderAnyDataType = function (data) {\n        if (data instanceof _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemanticsClass\"]) {\n            return 'u_' + data.singularStr;\n        }\n        else if (data instanceof _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttributeClass\"]) {\n            return data.shaderStr;\n        }\n        else {\n            return data;\n        }\n    };\n    return GLSLShader;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (GLSLShader);\n\n\n//# sourceURL=webpack:///./src/webgl/shaders/GLSLShader.ts?");

/***/ }),

/***/ "./src/webgl/shaders/GcsPBRShader.ts":
/*!*******************************************!*\
  !*** ./src/webgl/shaders/GcsPBRShader.ts ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GLSLShader */ \"./src/webgl/shaders/GLSLShader.ts\");\n/* harmony import */ var _foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../foundation/definitions/ShaderNode */ \"./src/foundation/definitions/ShaderNode.ts\");\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar GcsPBRShader = /** @class */ (function (_super) {\n    __extends(GcsPBRShader, _super);\n    function GcsPBRShader() {\n        var _this = _super.call(this) || this;\n        _this.vertexShaderBody = \"\\n\\n  mat4 worldMatrix = getMatrix(a_instanceID);\\n  mat4 viewMatrix = getViewMatrix(a_instanceID);\\n  mat4 projectionMatrix = getProjectionMatrix(a_instanceID);\\n  mat3 normalMatrix = getNormalMatrix(a_instanceID);\\n\\n  v_color = a_color;\\n\\n  // Skeletal\\n  bool isSkinning;\\n  skinning(isSkinning, normalMatrix, normalMatrix);\\n\\n  v_faceNormal_inWorld = normalMatrix * a_faceNormal;\\n  v_texcoord = a_texcoord;\\n\\n  if (abs(length(a_normal)) > 0.01) {\\n    // if normal exist\\n    vec3 tangent_inWorld;\\n    if (!isSkinning) {\\n      tangent_inWorld = normalMatrix * a_tangent;\\n      v_position_inWorld = worldMatrix * vec4(a_position, 1.0);\\n    }\\n\\n    v_binormal_inWorld = cross(v_normal_inWorld, tangent_inWorld);\\n    v_tangent_inWorld = cross(v_binormal_inWorld, v_normal_inWorld);\\n  }\\n  v_baryCentricCoord = a_baryCentricCoord;\\n\\n  vec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\\n  float distanceFromCamera = length(position_inWorld.xyz - u_viewPosition);\\n  vec3 pointDistanceAttenuation = getPointDistanceAttenuation(a_instanceID);\\n  float distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\\n  float maxPointSize = getPointSize(a_instanceID);\\n  gl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\\n\\n//  v_color = vec3(u_boneMatrices[int(a_joint.x)][1].xyz);\\n\\n  \";\n        _this.attributeNames = ['a_position', 'a_color', 'a_normal', 'a_faceNormal', 'a_texcoord', 'a_tangent', 'a_joint', 'a_weight', 'a_baryCentricCoord', 'a_instanceID'];\n        _this.attributeSemantics = [_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Position, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Color0,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Normal, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].FaceNormal, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Texcoord0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Tangent, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Joints0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Weights0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].BaryCentricCoord, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Instance];\n        return _this;\n    }\n    GcsPBRShader.getInstance = function () {\n        if (!this.__instance) {\n            this.__instance = new GcsPBRShader();\n        }\n        return this.__instance;\n    };\n    Object.defineProperty(GcsPBRShader.prototype, \"vertexShaderDefinitions\", {\n        get: function () {\n            var _version = this.glsl_versionText;\n            var _in = this.glsl_vertex_in;\n            var _out = this.glsl_vertex_out;\n            return \"\\n\" + _in + \" vec3 a_position;\\n\" + _in + \" vec3 a_color;\\n\" + _in + \" vec3 a_normal;\\n\" + _in + \" vec3 a_faceNormal;\\n\" + _in + \" vec3 a_tangent;\\n\" + _in + \" float a_instanceID;\\n\" + _in + \" vec2 a_texcoord;\\n\" + _in + \" vec4 a_joint;\\n\" + _in + \" vec4 a_weight;\\n\" + _in + \" vec3 a_baryCentricCoord;\\n\" + _out + \" vec3 v_color;\\n\" + _out + \" vec3 v_normal_inWorld;\\n\" + _out + \" vec3 v_faceNormal_inWorld;\\n\" + _out + \" vec3 v_tangent_inWorld;\\n\" + _out + \" vec3 v_binormal_inWorld;\\n\" + _out + \" vec4 v_position_inWorld;\\n\" + _out + \" vec2 v_texcoord;\\n\" + _out + \" vec3 v_baryCentricCoord;\\nuniform vec3 u_viewPosition;\\n\\n\" + this.toNormalMatrix + \"\\n\\n\" + this.getSkinMatrix + \"\\n\\n\" + this.processSkinning + \"\\n\\n\" + this.pointSize + \"\\n\\n\" + this.pointDistanceAttenuation + \"\\n\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ;\n    Object.defineProperty(GcsPBRShader.prototype, \"fragmentShaderSimple\", {\n        get: function () {\n            var _version = this.glsl_versionText;\n            var _in = this.glsl_fragment_in;\n            var _def_rt0 = this.glsl_rt0;\n            var _def_fragColor = this.glsl_fragColor;\n            var _texture = this.glsl_texture;\n            var accessSpecularIBLTexture;\n            var repo = this.__webglResourceRepository;\n            if (repo.currentWebGLContextWrapper.webgl1ExtSTL) {\n                accessSpecularIBLTexture = \"vec4 specularTexel = textureCubeLodEXT(u_specularEnvTexture, vec3(-reflection.x, reflection.y, reflection.z), lod);\";\n            }\n            else {\n                accessSpecularIBLTexture = \"vec4 specularTexel = textureCube(u_specularEnvTexture, vec3(-reflection.x, reflection.y, reflection.z));\";\n            }\n            return _version + \"\\n\" + this.glsl1ShaderTextureLodExt + \"\\n\" + this.glsl1ShaderDerivativeExt + \"\\nprecision highp float;\\n\\nstruct Material {\\n  vec4 baseColorFactor;\\n  vec2 metallicRoughnessFactor;\\n};\\n\\n\\nuniform sampler2D u_baseColorTexture;\\nuniform sampler2D u_normalTexture;\\nuniform sampler2D u_occlusionTexture;\\nuniform sampler2D u_emissiveTexture;\\nuniform sampler2D u_metallicRoughnessTexture;\\n\\nuniform Material u_material;\\n\\nstruct Light {\\n  vec4 lightPosition;\\n  vec4 lightDirection;\\n  vec4 lightIntensity;\\n};\\nuniform Light u_lights[\" + _foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].maxLightNumberInShader + \"];\\nuniform int u_lightNumber;\\n\\nuniform vec3 u_viewPosition;\\n\\nuniform samplerCube u_diffuseEnvTexture;\\nuniform samplerCube u_specularEnvTexture;\\nuniform vec4 u_iblParameter;\\n\\nuniform vec3 u_wireframe;\\n\\n\" + _in + \" vec3 v_color;\\n\" + _in + \" vec3 v_normal_inWorld;\\n\" + _in + \" vec3 v_faceNormal_inWorld;\\n\" + _in + \" vec3 v_tangent_inWorld;\\n\" + _in + \" vec3 v_binormal_inWorld;\\n\" + _in + \" vec4 v_position_inWorld;\\n\" + _in + \" vec2 v_texcoord;\\n\" + _in + \" vec3 v_baryCentricCoord;\\n\" + _def_rt0 + \"\\n\\n\" + this.pbrUniformDefinition + \"\\n\\n\" + this.pbrMethodDefinition + \"\\n\\nuniform ivec2 u_hdriFormat;\\nvec3 IBLContribution(vec3 n, float NV, vec3 reflection, vec3 albedo, vec3 F0, float userRoughness, vec3 F)\\n{\\n  float mipCount = u_iblParameter.x;\\n  float lod = (userRoughness * mipCount);\\n\\n  vec3 brdf = texture2D(u_brdfLutTexture, vec2(NV, 1.0 - userRoughness)).rgb;\\n  vec4 diffuseTexel = textureCube(u_diffuseEnvTexture, vec3(-n.x, n.y, n.z));\\n  vec3 diffuseLight;\\n  if (u_hdriFormat.x == 0) { // LDR_SRGB\\n    diffuseLight = srgbToLinear(diffuseTexel.rgb);\\n  } else if (u_hdriFormat.x == 3) { // RGBE\\n    diffuseLight = diffuseTexel.rgb * pow(2.0, diffuseTexel.a*255.0-128.0);\\n  } else {\\n    diffuseLight = diffuseTexel.rgb;\\n  }\\n\\n  \" + accessSpecularIBLTexture + \"\\n\\n  vec3 specularLight;\\n  if (u_hdriFormat.y == 0) { // LDR_SRGB\\n    specularLight = srgbToLinear(specularTexel.rgb);\\n  } else if (u_hdriFormat.y == 3) { // RGBE\\n    specularLight = specularTexel.rgb * pow(2.0, specularTexel.a*255.0-128.0);\\n  } else {\\n    specularLight = specularTexel.rgb;\\n  }\\n\\n  vec3 kS = fresnelSchlickRoughness(F0, NV, userRoughness);\\n  vec3 kD = 1.0 - kS;\\n  vec3 diffuse = diffuseLight * albedo * kD;\\n  vec3 specular = specularLight * (F0 * brdf.x + brdf.y);\\n\\n  float IBLDiffuseContribution = u_iblParameter.y;\\n  float IBLSpecularContribution = u_iblParameter.z;\\n  diffuse *= IBLDiffuseContribution;\\n  specular *= IBLSpecularContribution;\\n  return diffuse + specular;\\n}\\n\\nfloat edge_ratio(vec3 bary3, float wireframeWidthInner, float wireframeWidthRelativeScale) {\\n  vec3 d = fwidth(bary3);\\n  vec3 x = bary3+vec3(1.0 - wireframeWidthInner)*d;\\n  vec3 a3 = smoothstep(vec3(0.0), d, x);\\n  float factor = min(min(a3.x, a3.y), a3.z);\\n\\n  return clamp((1.0 - factor), 0.0, 1.0);\\n}\\n\\nvoid main ()\\n{\\n\\n  // Normal\\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\\n  float rot = u_iblParameter.w + 3.1415;\\n  mat3 rotEnvMatrix = mat3(cos(rot), 0.0, -sin(rot), 0.0, 1.0, 0.0, sin(rot), 0.0, cos(rot));\\n  vec3 normal_forEnv = rotEnvMatrix * normal_inWorld;\\n\\n  if (abs(length(v_tangent_inWorld)) > 0.01) {\\n    vec3 normal = \" + _texture + \"(u_normalTexture, v_texcoord).xyz*2.0 - 1.0;\\n      vec3 tangent_inWorld = normalize(v_tangent_inWorld);\\n      vec3 binormal_inWorld = normalize(v_binormal_inWorld);\\n      normal_inWorld = normalize(normal_inWorld);\\n\\n      mat3 tbnMat_tangent_to_world = mat3(\\n        tangent_inWorld.x, tangent_inWorld.y, tangent_inWorld.z,\\n        binormal_inWorld.x, binormal_inWorld.y, binormal_inWorld.z,\\n        normal_inWorld.x, normal_inWorld.y, normal_inWorld.z\\n      );\\n\\n      normal = normalize(tbnMat_tangent_to_world * normal);\\n      normal_inWorld = normal;\\n  }\\n\\n\\n\\n  // BaseColorFactor\\n  vec3 baseColor = vec3(0.0, 0.0, 0.0);\\n  float alpha = 1.0;\\n  if (v_color != baseColor && u_material.baseColorFactor.rgb != baseColor) {\\n    baseColor = v_color * u_material.baseColorFactor.rgb;\\n    alpha = u_material.baseColorFactor.a;\\n  } else if (v_color == baseColor) {\\n    baseColor = u_material.baseColorFactor.rgb;\\n    alpha = u_material.baseColorFactor.a;\\n  } else if (u_material.baseColorFactor.rgb == baseColor) {\\n    baseColor = v_color;\\n  } else {\\n    baseColor = vec3(1.0, 1.0, 1.0);\\n  }\\n\\n\\n  // BaseColor (take account for BaseColorTexture)\\n  vec4 textureColor = \" + _texture + \"(u_baseColorTexture, v_texcoord);\\n  // if (length(textureColor) > 0.01) {\\n    baseColor *= srgbToLinear(textureColor.rgb);\\n    alpha *= textureColor.a;\\n  // }\\n\\n  // Metallic & Roughness\\n  float userRoughness = u_material.metallicRoughnessFactor.y;\\n  float metallic = u_material.metallicRoughnessFactor.x;\\n\\n  vec4 ormTexel = texture2D(u_metallicRoughnessTexture, v_texcoord);\\n  userRoughness = ormTexel.g * userRoughness;\\n  metallic = ormTexel.b * metallic;\\n\\n  userRoughness = clamp(userRoughness, c_MinRoughness, 1.0);\\n  metallic = clamp(metallic, 0.0, 1.0);\\n  float alphaRoughness = userRoughness * userRoughness;\\n\\n  // F0\\n  vec3 diffuseMatAverageF0 = vec3(0.04);\\n  vec3 F0 = mix(diffuseMatAverageF0, baseColor.rgb, metallic);\\n\\n  // Albedo\\n  vec3 albedo = baseColor.rgb * (vec3(1.0) - diffuseMatAverageF0);\\n  albedo.rgb *= (1.0 - metallic);\\n\\n  // ViewDirection\\n  vec3 viewDirection = normalize(u_viewPosition - v_position_inWorld.xyz);\\n\\n  // NV\\n  float NV = clamp(abs(dot(normal_inWorld, viewDirection)), 0.0, 1.0);\\n\\n  rt0 = vec4(0.0, 0.0, 0.0, alpha);\\n\\n  // Lighting\\n  if (length(normal_inWorld) > 0.02) {\\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\\n    for (int i = 0; i < \" + _foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].maxLightNumberInShader + \"; i++) {\\n      if (i >= u_lightNumber) {\\n        break;\\n      }\\n\\n      // Light\\n      vec3 lightDirection = u_lights[i].lightDirection.xyz;\\n      float lightType = u_lights[i].lightPosition.w;\\n      float spotCosCutoff = u_lights[i].lightDirection.w;\\n      float spotExponent = u_lights[i].lightIntensity.w;\\n\\n      if (0.75 < lightType) { // is pointlight or spotlight\\n        lightDirection = normalize(u_lights[i].lightPosition.xyz - v_position_inWorld.xyz);\\n      }\\n      float spotEffect = 1.0;\\n      if (lightType > 1.75) { // is spotlight\\n        spotEffect = dot(u_lights[i].lightDirection.xyz, lightDirection);\\n        if (spotEffect > spotCosCutoff) {\\n          spotEffect = pow(spotEffect, spotExponent);\\n        } else {\\n          spotEffect = 0.0;\\n        }\\n      }\\n      //diffuse += 1.0 * max(0.0, dot(normal_inWorld, lightDirection)) * spotEffect * u_lights[i].lightIntensity.xyz;\\n\\n      // IncidentLight\\n      vec3 incidentLight = spotEffect * u_lights[i].lightIntensity.xyz;\\n      incidentLight *= M_PI;\\n\\n      // Fresnel\\n      vec3 halfVector = normalize(lightDirection + viewDirection);\\n      float VH = clamp(dot(viewDirection, halfVector), 0.0, 1.0);\\n      vec3 F = fresnel(F0, VH);\\n\\n      // Diffuse\\n      vec3 diffuseContrib = (vec3(1.0) - F) * diffuse_brdf(albedo);\\n\\n      // Specular\\n      float NL = clamp(dot(normal_inWorld, lightDirection), 0.0, 1.0);\\n      float NH = clamp(dot(normal_inWorld, halfVector), 0.0, 1.0);\\n      vec3 specularContrib = cook_torrance_specular_brdf(NH, NL, NV, F, alphaRoughness);\\n      vec3 diffuseAndSpecular = (diffuseContrib + specularContrib) * vec3(NL) * incidentLight.rgb;\\n\\n      rt0.xyz += diffuseAndSpecular;\\n//      rt0.xyz += specularContrib * vec3(NL) * incidentLight.rgb;\\n  //    rt0.xyz += diffuseContrib * vec3(NL) * incidentLight.rgb;\\n  //    rt0.xyz += (vec3(1.0) - F) * diffuse_brdf(albedo);//diffuseContrib;//vec3(NL) * incidentLight.rgb;\\n    }\\n\\n    vec3 reflection = rotEnvMatrix * reflect(-viewDirection, normal_inWorld);\\n\\n    vec3 F = fresnel(F0, NV);\\n    vec3 ibl = IBLContribution(normal_forEnv, NV, reflection, albedo, F0, userRoughness, F);\\n    float occlusion = texture2D(u_occlusionTexture, v_texcoord).r;\\n\\n    // Occlution to Indirect Lights\\n    rt0.xyz += ibl * occlusion;\\n\\n  } else {\\n    rt0 = vec4(baseColor, alpha);\\n  }\\n\\n  // Emissive\\n  vec3 emissive = srgbToLinear(texture2D(u_emissiveTexture, v_texcoord).xyz);\\n\\n  rt0.xyz += emissive;\\n\\n  rt0.xyz = linearToSrgb(rt0.xyz);\\n\\n\\n  // Wireframe\\n  float threshold = 0.001;\\n  float wireframeWidthInner = u_wireframe.z;\\n  float wireframeWidthRelativeScale = 1.0;\\n  if (u_wireframe.x > 0.5 && u_wireframe.y < 0.5) {\\n    rt0.a = 0.0;\\n  }\\n  vec4 wireframeResult = rt0;\\n  vec4 wireframeColor = vec4(0.2, 0.75, 0.0, 1.0);\\n  float edgeRatio = edge_ratio(v_baryCentricCoord, wireframeWidthInner, wireframeWidthRelativeScale);\\n  float edgeRatioModified = mix(step(threshold, edgeRatio), clamp(edgeRatio*4.0, 0.0, 1.0), wireframeWidthInner / wireframeWidthRelativeScale/4.0);\\n  // if r0.a is 0.0, it is wireframe not on shaded\\n  wireframeResult.rgb = wireframeColor.rgb * edgeRatioModified + rt0.rgb * (1.0 - edgeRatioModified);\\n  wireframeResult.a = max(rt0.a, wireframeColor.a * mix(edgeRatioModified, pow(edgeRatioModified, 100.0), wireframeWidthInner / wireframeWidthRelativeScale/1.0));\\n\\n  if (u_wireframe.x > 0.5) {\\n    rt0 = wireframeResult;\\n    if (u_wireframe.y < 0.5 && rt0.a == 0.0) {\\n      discard;\\n    }\\n  }\\n\\n  \" + _def_fragColor + \"\\n}\\n\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GcsPBRShader.prototype, \"pixelShaderDefinitions\", {\n        get: function () {\n            return '';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GcsPBRShader.prototype, \"pixelShaderBody\", {\n        get: function () {\n            return this.fragmentShaderSimple;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GcsPBRShader.prototype, \"attributeCompositions\", {\n        get: function () {\n            return [_foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec2, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec4, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec4, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    GcsPBRShader.materialElement = _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_3__[\"ShaderNode\"].PBRShading;\n    return GcsPBRShader;\n}(_GLSLShader__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (GcsPBRShader);\n\n\n//# sourceURL=webpack:///./src/webgl/shaders/GcsPBRShader.ts?");

/***/ })

/******/ });
/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 	};
/******/
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"main": 0
/******/ 	};
/******/
/******/
/******/
/******/ 	// script path function
/******/ 	function jsonpScriptSrc(chunkId) {
/******/ 		return __webpack_require__.p + "rhodonite-" + ({}[chunkId]||chunkId) + ".js"
/******/ 	}
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/ 	// The chunk loading function for additional chunks
/******/ 	// Since all referenced chunks are already included
/******/ 	// in this file, this function is empty here.
/******/ 	__webpack_require__.e = function requireEnsure() {
/******/ 		return Promise.resolve();
/******/ 	};
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/dist/";
/******/
/******/ 	// on error function for async loading
/******/ 	__webpack_require__.oe = function(err) { console.error(err); throw err; };
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/rhodonite.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/base64-js/index.js":
/*!*****************************************!*\
  !*** ./node_modules/base64-js/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n\n\n//# sourceURL=webpack:///./node_modules/base64-js/index.js?");

/***/ }),

/***/ "./node_modules/buffer/index.js":
/*!**************************************!*\
  !*** ./node_modules/buffer/index.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n\n\nvar base64 = __webpack_require__(/*! base64-js */ \"./node_modules/base64-js/index.js\")\nvar ieee754 = __webpack_require__(/*! ieee754 */ \"./node_modules/ieee754/index.js\")\nvar isArray = __webpack_require__(/*! isarray */ \"./node_modules/isarray/index.js\")\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack:///./node_modules/buffer/index.js?");

/***/ }),

/***/ "./node_modules/ieee754/index.js":
/*!***************************************!*\
  !*** ./node_modules/ieee754/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n\n//# sourceURL=webpack:///./node_modules/ieee754/index.js?");

/***/ }),

/***/ "./node_modules/isarray/index.js":
/*!***************************************!*\
  !*** ./node_modules/isarray/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n\n//# sourceURL=webpack:///./node_modules/isarray/index.js?");

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n//# sourceURL=webpack:///./node_modules/process/browser.js?");

/***/ }),

/***/ "./node_modules/shaderity/dist/index.js":
/*!**********************************************!*\
  !*** ./node_modules/shaderity/dist/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Reflection {\n    constructor() {\n        this.attributes = [];\n        this.varyings = [];\n        this.uniforms = [];\n    }\n    get attributesNames() {\n        return this.attributes.map((attribute) => { return attribute.name; });\n    }\n    get attributesSemantics() {\n        return this.attributes.map((attribute) => { return attribute.semantic; });\n    }\n    get attributesTypes() {\n        return this.attributes.map((attribute) => { return attribute.type; });\n    }\n}\nexports.Reflection = Reflection;\n;\nclass Shaderity {\n    constructor() {\n        this.__attributeSemanticsMap = new Map();\n        this.__uniformSemanticsMap = new Map();\n        this.__attributeSemanticsMap.set('position', 'POSITION');\n        this.__attributeSemanticsMap.set('color', 'COLOR_0');\n        this.__attributeSemanticsMap.set('texcoord', 'TEXCOORD_0');\n        this.__attributeSemanticsMap.set('normal', 'NORMAL');\n        this.__attributeSemanticsMap.set('tangent', 'TANGENT');\n        this.__attributeSemanticsMap.set('joint', 'JOINTS_0');\n        this.__attributeSemanticsMap.set('bone', 'JOINTS_0');\n        this.__attributeSemanticsMap.set('weight', 'WEIGHTS_0');\n        this.__uniformSemanticsMap.set('worldmatrix', 'WorldMatrix');\n        this.__uniformSemanticsMap.set('normalmatrix', 'NormalMatrix');\n        this.__uniformSemanticsMap.set('viewmatrix', 'ViewMatrix');\n        this.__uniformSemanticsMap.set('projectionmatrix', 'ProjectionMatrix');\n        this.__uniformSemanticsMap.set('modelviewmatrix', 'ModelViewMatrix');\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new Shaderity();\n        }\n        return this.__instance;\n    }\n    addAttributeSemanticsMap(map) {\n        this.__attributeSemanticsMap = new Map([...this.__attributeSemanticsMap, ...map]);\n    }\n    addUniformSemanticsMap(map) {\n        this.__uniformSemanticsMap = new Map([...this.__uniformSemanticsMap, ...map]);\n    }\n    isVertexShader(obj) {\n        if (obj.shaderStage === 'vertex') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    isFragmentShader(obj) {\n        if (obj.shaderStage === 'fragment' || obj.shaderStage === 'pixel') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    isPixelShader(obj) {\n        return this.isFragmentShader(obj);\n    }\n    _replaceRow(inout_splitedSource, inReg, inAsES1) {\n        for (let i = 0; i < inout_splitedSource.length; i++) {\n            inout_splitedSource[i] = inout_splitedSource[i].replace(inReg, inAsES1);\n        }\n    }\n    _convertIn(obj, inout_splitedSource) {\n        const inReg = /^in[\\t ]+/g;\n        let inAsES1 = 'attribute ';\n        if (this.isFragmentShader(obj)) {\n            inAsES1 = 'varying ';\n        }\n        this._replaceRow(inout_splitedSource, inReg, inAsES1);\n        return inout_splitedSource;\n    }\n    _convertOut(obj, inout_splitedSource) {\n        const inReg = /^out[\\t ]+/g;\n        let inAsES1 = 'varying ';\n        this._replaceRow(inout_splitedSource, inReg, inAsES1);\n        return inout_splitedSource;\n    }\n    _createUniformSamplerMap(obj, inout_splitedSource) {\n        const uniformSamplerMap = new Map();\n        for (let i = 0; i < inout_splitedSource.length; i++) {\n            const row = inout_splitedSource[i];\n            const match = row.match(/uniform[\\t ]+(sampler\\w+)[\\t ]+(\\w+)/);\n            if (match) {\n                const samplerType = match[1];\n                const name = match[2];\n                uniformSamplerMap.set(name, samplerType);\n            }\n        }\n        return uniformSamplerMap;\n    }\n    _convertAttribute(obj, inout_splitedSource) {\n        const inReg = /^attribute[\\t ]+/g;\n        let inAsES3 = 'in ';\n        this._replaceRow(inout_splitedSource, inReg, inAsES3);\n        return inout_splitedSource;\n    }\n    _convertVarying(obj, inout_splitedSource) {\n        const inReg = /^varying[\\t ]+/g;\n        let inAsES3 = 'out ';\n        if (this.isFragmentShader(obj)) {\n            inAsES3 = 'in ';\n        }\n        this._replaceRow(inout_splitedSource, inReg, inAsES3);\n        return inout_splitedSource;\n    }\n    _regSymbols() {\n        return `[!\"#$%&'()\\*\\+\\-\\.,\\/:;<=>?@\\[\\\\\\]^` + '`{|}~\\t\\n ]';\n    }\n    _convertTexture2D(obj, inout_splitedSource) {\n        const sbl = this._regSymbols();\n        const reg = new RegExp(`(${sbl}+)(texture2D)(${sbl}+)`, 'g');\n        let inAsES3 = 'texture';\n        this._replaceRow(inout_splitedSource, reg, '$1' + inAsES3 + '$3');\n        return inout_splitedSource;\n    }\n    _convertTextureCube(obj, inout_splitedSource) {\n        const sbl = this._regSymbols();\n        const reg = new RegExp(`(${sbl}+)(textureCube)(${sbl}+)`, 'g');\n        let inAsES3 = 'texture';\n        this._replaceRow(inout_splitedSource, reg, '$1' + inAsES3 + '$3');\n        return inout_splitedSource;\n    }\n    _convertTexture2DProd(obj, inout_splitedSource) {\n        const sbl = this._regSymbols();\n        const reg = new RegExp(`(${sbl}+)(texture2DProj)(${sbl}+)`, 'g');\n        let inAsES3 = 'textureProj';\n        this._replaceRow(inout_splitedSource, reg, '$1' + inAsES3 + '$3');\n        return inout_splitedSource;\n    }\n    copyShaderityObject(obj) {\n        const copiedObj = {\n            code: obj.code,\n            shaderStage: obj.shaderStage\n        };\n        return copiedObj;\n    }\n    _convertTextureFunctionToES1(inout_splitedSource, uniformSamplerMap) {\n        const sbl = this._regSymbols();\n        for (let i = 0; i < inout_splitedSource.length; i++) {\n            const row = inout_splitedSource[i];\n            let reg = new RegExp(`(${sbl}+)(textureProj)(${sbl}+)`, 'g');\n            let match = row.match(/textureProj[\\t ]*\\([\\t ]*(\\w+),/);\n            if (match) {\n                const name = match[1];\n                const samplerType = uniformSamplerMap.get(name);\n                if (samplerType != null) {\n                    let textureFunc = '';\n                    switch (samplerType) {\n                        case 'sampler2D':\n                            textureFunc = 'texture2DProj';\n                            break;\n                        case 'sampler3D':\n                            textureFunc = 'texture3DProj';\n                            break;\n                        default: console.log('not found');\n                    }\n                    inout_splitedSource[i] = inout_splitedSource[i].replace(reg, '$1' + textureFunc + '$3');\n                }\n                continue;\n            }\n            reg = new RegExp(`(${sbl}+)(texture)(${sbl}+)`, 'g');\n            match = row.match(/texture[\\t ]*\\([\\t ]*(\\w+),/);\n            if (match) {\n                const name = match[1];\n                const samplerType = uniformSamplerMap.get(name);\n                if (samplerType != null) {\n                    let textureFunc = '';\n                    switch (samplerType) {\n                        case 'sampler2D':\n                            textureFunc = 'texture2D';\n                            break;\n                        case 'sampler3D':\n                            textureFunc = 'texture3D';\n                            break;\n                        case 'samplerCube':\n                            textureFunc = 'textureCube';\n                            break;\n                        default: console.log('not found');\n                    }\n                    inout_splitedSource[i] = inout_splitedSource[i].replace(reg, '$1' + textureFunc + '$3');\n                }\n            }\n        }\n        return inout_splitedSource;\n    }\n    transformToGLSLES1(obj) {\n        const copy = this.copyShaderityObject(obj);\n        let splited = this._splitShaderCode(obj.code);\n        this._convertIn(obj, splited);\n        this._convertOut(obj, splited);\n        const uniformSamplerMap = this._createUniformSamplerMap(obj, splited);\n        splited = this._convertTextureFunctionToES1(splited, uniformSamplerMap);\n        copy.code = this._joinSplitedRow(splited);\n        return copy;\n    }\n    transformToGLSLES3(obj) {\n        const copy = this.copyShaderityObject(obj);\n        let splited = this._splitShaderCode(obj.code);\n        this._convertAttribute(obj, splited);\n        this._convertVarying(obj, splited);\n        this._convertTexture2D(obj, splited);\n        this._convertTextureCube(obj, splited);\n        this._convertTexture2DProd(obj, splited);\n        copy.code = this._joinSplitedRow(splited);\n        return copy;\n    }\n    transformTo(version, obj) {\n        if (version.match(/webgl2|es3/i)) {\n            return this.transformToGLSLES3(obj);\n        }\n        else if (version.match(/webgl1|es1/i)) {\n            return this.transformToGLSLES1(obj);\n        }\n        else {\n            console.error('Invalid Version');\n            return obj;\n        }\n    }\n    _splitShaderCode(source) {\n        return source.split(/\\r\\n|\\n/);\n    }\n    _joinSplitedRow(splitedRow) {\n        return splitedRow.join('\\n');\n    }\n    /**\n     * Fill arguments into template shader text in ShaderityObject.\n     * @param obj a shaderity object\n     * @returns a copied and processed shaderity object\n     */\n    fillTemplate(obj, arg) {\n        const copy = this.copyShaderityObject(obj);\n        const templateString = obj.code.replace(/\\/\\*[\\t ]*shaderity:[\\t ]*(\\${[\\t ]*)(\\S+)([\\t ]*})[\\t ]*\\*\\//g, `$1this.$2$3`);\n        const fillTemplate = function (templateString, arg) {\n            return new Function(\"return `\" + templateString + \"`;\").call(arg);\n        };\n        copy.code = fillTemplate(templateString, arg);\n        return copy;\n    }\n    insertDefinition(obj, definition) {\n        const copy = this.copyShaderityObject(obj);\n        let splited = this._splitShaderCode(obj.code);\n        const defStr = definition.replace(/#define[\\t ]+/, '');\n        splited.unshift(`#define ${defStr}`);\n        copy.code = this._joinSplitedRow(splited);\n        return copy;\n    }\n    reflect(obj) {\n        let splited = this._splitShaderCode(obj.code);\n        const reflection = new Reflection();\n        const varTypes = /[\\t ]+(float|int|vec2|vec3|vec4|mat2|mat3|mat4|ivec2|ivec3|ivec4)[\\t ]+(\\w+);/;\n        const varTypes2 = /[\\t ]+(float|int|vec2|vec3|vec4|mat2|mat3|mat4|ivec2|ivec3|ivec4|sampler2D|samplerCube|sampler3D)[\\t ]+(\\w+);/;\n        const semanticRegExp = /<.*semantic[\\t ]*=[\\t ]*(\\w+).*>/;\n        for (let row of splited) {\n            if (obj.shaderStage === 'vertex') {\n                const attributeMatch = row.match(/(attribute|in)[\\t ]+.+;/);\n                if (attributeMatch) {\n                    const reflectionAttribute = {\n                        name: '',\n                        type: 'float',\n                        semantic: 'UNKNOWN'\n                    };\n                    const match = row.match(varTypes);\n                    if (match) {\n                        const type = match[1];\n                        reflectionAttribute.type = type;\n                        const name = match[2];\n                        reflectionAttribute.name = name;\n                        const match2 = row.match(semanticRegExp);\n                        if (match2) {\n                            reflectionAttribute.semantic = match2[1];\n                        }\n                        else {\n                            for (let [key, value] of this.__attributeSemanticsMap) {\n                                if (name.match(new RegExp(key, 'i'))) {\n                                    reflectionAttribute.semantic = value;\n                                }\n                            }\n                        }\n                    }\n                    reflection.attributes.push(reflectionAttribute);\n                    continue;\n                }\n            }\n            let varyingMatch;\n            if (obj.shaderStage === 'vertex') {\n                varyingMatch = row.match(/(varying|out)[\\t ]+.+;/);\n            }\n            else {\n                varyingMatch = row.match(/(varying|in)[\\t ]+.+;/);\n            }\n            if (varyingMatch) {\n                const reflectionVarying = {\n                    name: '',\n                    type: 'float',\n                    inout: 'in'\n                };\n                const match = row.match(varTypes);\n                if (match) {\n                    const type = match[1];\n                    reflectionVarying.type = type;\n                    const name = match[2];\n                    reflectionVarying.name = name;\n                    reflectionVarying.inout = (obj.shaderStage === 'vertex') ? 'out' : 'in';\n                }\n                reflection.varyings.push(reflectionVarying);\n                continue;\n            }\n            const uniformMatch = row.match(/uniform[\\t ]+/);\n            if (uniformMatch) {\n                const reflectionUniform = {\n                    name: '',\n                    type: 'float',\n                    semantic: 'UNKNOWN'\n                };\n                const match = row.match(varTypes2);\n                if (match) {\n                    const type = match[1];\n                    reflectionUniform.type = type;\n                    const name = match[2];\n                    reflectionUniform.name = name;\n                    const match2 = row.match(semanticRegExp);\n                    if (match2) {\n                        reflectionUniform.semantic = match2[1];\n                    }\n                    else {\n                        for (let [key, value] of this.__uniformSemanticsMap) {\n                            if (name.match(new RegExp(key, 'i'))) {\n                                reflectionUniform.semantic = value;\n                            }\n                        }\n                    }\n                }\n                reflection.uniforms.push(reflectionUniform);\n                continue;\n            }\n        }\n        return reflection;\n    }\n    _defineGLSLES3() {\n    }\n}\nexports.default = Shaderity;\n\n\n//# sourceURL=webpack:///./node_modules/shaderity/dist/index.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n//# sourceURL=webpack:///(webpack)/buildin/global.js?");

/***/ }),

/***/ "./src/effekseer/EffekseerComponent.ts":
/*!*********************************************!*\
  !*** ./src/effekseer/EffekseerComponent.ts ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EffekseerComponent; });\n/* harmony import */ var _foundation_core_Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _foundation_components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/components/SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _foundation_math_Matrix44__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _foundation_components_TransformComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation/components/TransformComponent */ \"./src/foundation/components/TransformComponent.ts\");\n/* harmony import */ var _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../foundation/components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../foundation/core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../foundation/components/WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../foundation/renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n\n\n\n\n\n\n\n\n\nclass EffekseerComponent extends _foundation_core_Component__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(entityUid, componentSid, entityRepository) {\n        super(entityUid, componentSid, entityRepository);\n        this.__speed = 1;\n        this.playJustAfterLoaded = false;\n        this.isLoop = false;\n    }\n    $create() {\n        this.__sceneGraphComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _foundation_components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n        this.__transformComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _foundation_components_TransformComponent__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\n        this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__[\"ProcessStage\"].Load);\n    }\n    static get componentTID() {\n        return _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__[\"WellKnownComponentTIDs\"].EffekseerComponentTID;\n    }\n    static common_$load() {\n        if (EffekseerComponent.__isInitialized) {\n            return;\n        }\n        const webGLResourceRepository = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getWebGLResourceRepository();\n        const glw = webGLResourceRepository.currentWebGLContextWrapper;\n        if (glw) {\n            effekseer.init(glw.getRawContext());\n            EffekseerComponent.__isInitialized = true;\n        }\n    }\n    $load() {\n        if (this.__effect == null) {\n            this.__effect = effekseer.loadEffect(this.uri, () => {\n                if (this.playJustAfterLoaded) {\n                    if (this.isLoop) {\n                        this.__timer = setInterval(() => { this.play(); }, 500);\n                    }\n                    else {\n                        this.play();\n                    }\n                }\n            });\n        }\n        this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__[\"ProcessStage\"].PreRender);\n    }\n    cancelLoop() {\n        clearInterval(this.__timer);\n    }\n    play() {\n        const __play = () => {\n            // Play the loaded effect\n            this.__handle = effekseer.play(this.__effect);\n        };\n        if (this.isLoop) {\n            this.__timer = setInterval(__play, 200);\n        }\n        else {\n            __play();\n        }\n    }\n    static common_$logic() {\n        effekseer.update();\n    }\n    $prerender() {\n        if (this.__handle != null) {\n            const worldMatrix = new _foundation_math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this.__sceneGraphComponent.worldMatrixInner);\n            this.__handle.setMatrix(worldMatrix.v);\n            this.__handle.setSpeed(this.__speed);\n        }\n    }\n    static common_$render() {\n        const cameraComponent = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getInstance().getComponent(_foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_5__[\"default\"], _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].main);\n        let viewMatrix = EffekseerComponent.__tmp_indentityMatrix;\n        let projectionMatrix = EffekseerComponent.__tmp_indentityMatrix;\n        if (cameraComponent) {\n            viewMatrix = cameraComponent.viewMatrix;\n            projectionMatrix = cameraComponent.projectionMatrix;\n        }\n        effekseer.setProjectionMatrix(projectionMatrix.v);\n        effekseer.setCameraMatrix(viewMatrix.v);\n        effekseer.draw();\n    }\n    set playSpeed(val) {\n        if (this.__handle) {\n            this.__handle.setSpeed(val);\n        }\n        this.__speed = val;\n    }\n    get playSpeed() {\n        return this.__speed;\n    }\n    set translate(vec) {\n        if (this.__handle) {\n            this.__handle.setLocation(vec.x, vec.y, vec.z);\n        }\n        this.__transformComponent.translate = vec;\n    }\n    get translate() {\n        return this.__transformComponent.translate;\n    }\n    set rotate(vec) {\n        if (this.__handle) {\n            this.__handle.setRotation(vec.x, vec.y, vec.z);\n        }\n        this.__transformComponent.rotate = vec;\n    }\n    get rotate() {\n        return this.__transformComponent.rotate;\n    }\n    set scale(vec) {\n        if (this.__handle) {\n            this.__handle.setScale(vec.x, vec.y, vec.z);\n        }\n        this.__transformComponent.scale = vec;\n    }\n    get scale() {\n        return this.__transformComponent.scale;\n    }\n}\nEffekseerComponent.__isInitialized = false;\nEffekseerComponent.__tmp_indentityMatrix = _foundation_math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"].identity();\n_foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].registerComponentClass(EffekseerComponent);\n\n\n//# sourceURL=webpack:///./src/effekseer/EffekseerComponent.ts?");

/***/ }),

/***/ "./src/effekseer/main.ts":
/*!*******************************!*\
  !*** ./src/effekseer/main.ts ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _EffekseerComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EffekseerComponent */ \"./src/effekseer/EffekseerComponent.ts\");\n/* harmony import */ var _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/core/EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _foundation_components_TransformComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/components/TransformComponent */ \"./src/foundation/components/TransformComponent.ts\");\n/* harmony import */ var _foundation_components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/components/SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n\n\n\n\nconst createEffekseerEntity = function () {\n    const entityRepository = _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\n    const entity = entityRepository.createEntity([_foundation_components_TransformComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"], _foundation_components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _EffekseerComponent__WEBPACK_IMPORTED_MODULE_0__[\"default\"]]);\n    return entity;\n};\nconst Effekseer = Object.freeze({\n    EffekseerComponent: _EffekseerComponent__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n    createEffekseerEntity\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (Effekseer);\n\n\n//# sourceURL=webpack:///./src/effekseer/main.ts?");

/***/ }),

/***/ "./src/foundation/cameras/OrbitCameraController.ts":
/*!*********************************************************!*\
  !*** ./src/foundation/cameras/OrbitCameraController.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return OrbitCameraController; });\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/MathUtil */ \"./src/foundation/math/MathUtil.ts\");\n/* harmony import */ var _math_Matrix33__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Matrix33 */ \"./src/foundation/math/Matrix33.ts\");\n/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/MutableMatrix33 */ \"./src/foundation/math/MutableMatrix33.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n\n\n\n\n\n\nclass OrbitCameraController {\n    constructor() {\n        this.__isKeyUp = true;\n        this.__originalY = -1;\n        this.__originalX = -1;\n        this.__buttonNumber = 0;\n        this.__mouse_translate_y = 0;\n        this.__mouse_translate_x = 0;\n        this.__efficiency = 1;\n        this.__lengthOfCenterToEye = 1;\n        this.__foyvBias = 1.0;\n        this.__scaleOfTranslation = 2.8;\n        this.__mouseTranslateVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\n        this.__newEyeToCenterVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\n        this.__newUpVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\n        this.__newTangentVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\n        this.__verticalAngleThreshold = 0;\n        this.__verticalAngleOfVectors = 0;\n        this.__isForceGrab = false;\n        this.__isSymmetryMode = true;\n        this.__doResetWhenCameraSettingChanged = false;\n        this.__rot_bgn_x = 0;\n        this.__rot_bgn_y = 0;\n        this.__rot_x = 0;\n        this.__rot_y = 0;\n        this.__dolly = 0.5;\n        this.__dollyScale = 2.0;\n        this.__eyeVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\n        this.__centerVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\n        this.__upVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\n        this.__shiftCameraTo = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\n        this.__lengthCenterToCorner = 0.5;\n        this.__lengthCameraToObject = 1;\n        this.__scaleOfLengthCameraToCenter = 1;\n        this.__zFarAdjustingFactorBasedOnAABB = 2.0;\n        this.__scaleOfZNearAndZFar = 5000;\n        this.__doPreventDefault = true;\n        this.moveSpeed = 1;\n        this.__pinchInOutControl = false;\n        this.__pinchInOutOriginalDistance = null;\n        this.__resetDollyTouchTime = 0;\n        this.__controllerTranslate = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\n        this.__mouseDownFunc = this.__mouseDown.bind(this);\n        this.__mouseUpFunc = this.__mouseUp.bind(this);\n        this.__mouseMoveFunc = this.__mouseMove.bind(this);\n        this.__touchDownFunc = this.__touchDown.bind(this);\n        this.__touchUpFunc = this.__touchUp.bind(this);\n        this.__touchMoveFunc = this.__touchMove.bind(this);\n        this.__pinchInOutFunc = this.__pinchInOut.bind(this);\n        this.__pinchInOutEndFunc = this.__pinchInOutEnd.bind(this);\n        this.__mouseWheelFunc = this.__mouseWheel.bind(this);\n        this.__mouseDblClickFunc = this.__mouseDblClick.bind(this);\n        this.__contextMenuFunc = this.__contextMenu.bind(this);\n        this.__resetDollyAndPositionFunc = this.__resetDollyAndPosition.bind(this);\n        this.registerEventListeners();\n    }\n    set zFarAdjustingFactorBasedOnAABB(value) {\n        this.__zFarAdjustingFactorBasedOnAABB = value;\n    }\n    get zFarAdjustingFactorBasedOnAABB() {\n        return this.__zFarAdjustingFactorBasedOnAABB;\n    }\n    setTarget(targetEntity) {\n        this.__targetEntity = targetEntity;\n    }\n    getTarget() {\n        return this.__targetEntity;\n    }\n    set doPreventDefault(flag) {\n        this.__doPreventDefault = flag;\n    }\n    get doPreventDefault() {\n        return this.__doPreventDefault;\n    }\n    __mouseDown(e) {\n        this.__tryToPreventDefault(e);\n        if (!this.__isKeyUp)\n            return;\n        this.__originalX = e.clientX;\n        this.__originalY = e.clientY;\n        this.__rot_bgn_x = this.__rot_x;\n        this.__rot_bgn_y = this.__rot_y;\n        this.__isKeyUp = false;\n        // if (typeof e.buttons !== \"undefined\") {\n        //        this.updateCamera();\n        // }\n    }\n    __mouseMove(e) {\n        this.__tryToPreventDefault(e);\n        if (this.__isKeyUp)\n            return;\n        if (this.__buttonNumber === 0) {\n            this.__buttonNumber = e.buttons;\n        }\n        const currentMouseX = e.clientX;\n        const currentMouseY = e.clientY;\n        switch (this.__buttonNumber) {\n            case 1: // left\n                this.__rotateControl(this.__originalX, this.__originalY, currentMouseX, currentMouseY);\n                this.__rot_bgn_x = this.__rot_x;\n                this.__rot_bgn_y = this.__rot_y;\n                break;\n            case 2: // right\n                this.__zoomControl(this.__originalX, currentMouseX);\n                break;\n            case 4: // center\n                this.__parallelTranslateControl(this.__originalX, this.__originalY, currentMouseX, currentMouseY);\n                break;\n            default:\n                return;\n        }\n        this.__originalX = currentMouseX;\n        this.__originalY = currentMouseY;\n    }\n    ;\n    __mouseUp(e) {\n        if (e.buttons !== 0)\n            return;\n        this.__buttonNumber = 0;\n        this.__originalX = -1;\n        this.__originalY = -1;\n        this.__isKeyUp = true;\n    }\n    __touchDown(e) {\n        this.__tryToPreventDefault(e);\n        if (e.touches.length === 1) {\n            this.__originalX = e.touches[0].clientX;\n            this.__originalY = e.touches[0].clientY;\n            this.__rot_bgn_x = this.__rot_x;\n            this.__rot_bgn_y = this.__rot_y;\n        }\n        else {\n            this.__originalX = (e.touches[0].clientX + e.touches[1].clientX) * 0.5;\n            this.__originalY = (e.touches[0].clientY + e.touches[1].clientY) * 0.5;\n        }\n        this.__isKeyUp = false;\n    }\n    __touchMove(e) {\n        this.__tryToPreventDefault(e);\n        if (this.__isKeyUp)\n            return;\n        let currentTouchX = e.touches[0].clientX;\n        let currentTouchY = e.touches[0].clientY;\n        if (e.touches.length === 1) {\n            currentTouchX = e.touches[0].clientX;\n            currentTouchY = e.touches[0].clientY;\n            this.__rotateControl(this.__originalX, this.__originalY, currentTouchX, currentTouchY);\n            this.__rot_bgn_x = this.__rot_x;\n            this.__rot_bgn_y = this.__rot_y;\n        }\n        else {\n            currentTouchX = (e.touches[0].clientX + e.touches[1].clientX) * 0.5;\n            currentTouchY = (e.touches[0].clientY + e.touches[1].clientY) * 0.5;\n            this.__parallelTranslateControl(this.__originalX, this.__originalY, currentTouchX, currentTouchY);\n        }\n        this.__originalX = currentTouchX;\n        this.__originalY = currentTouchY;\n    }\n    __touchUp(e) {\n        const touchNumber = e.touches.length;\n        if (touchNumber === 0) {\n            this.__originalX = -1;\n            this.__originalY = -1;\n            this.__isKeyUp = true;\n        }\n        else if (touchNumber === 1) {\n            this.__originalX = e.touches[0].clientX;\n            this.__originalY = e.touches[0].clientY;\n            this.__rot_bgn_x = this.__rot_x;\n            this.__rot_bgn_y = this.__rot_y;\n        }\n        else {\n            this.__originalX = (e.touches[0].clientX + e.touches[1].clientX) * 0.5;\n            this.__originalY = (e.touches[0].clientY + e.touches[1].clientY) * 0.5;\n        }\n    }\n    set maximumY(maximum_y) {\n        this.__maximum_y = maximum_y;\n    }\n    set minimumY(minimum_y) {\n        this.__minimum_y = minimum_y;\n    }\n    __rotateControl(originalX, originalY, currentX, currentY) {\n        // calc rotation angle\n        let delta_x = (currentX - originalX) * this.__efficiency * 0.3;\n        let delta_y = (currentY - originalY) * this.__efficiency * 0.3;\n        this.__rot_x = this.__rot_bgn_x - delta_x;\n        this.__rot_y = this.__rot_bgn_y - delta_y;\n        // check if rotation angle is within range\n        // if (\n        //   this.__verticalAngleThreshold - this.__verticalAngleOfVectors < this.__rot_y\n        // ) {\n        //          this._rot_y -= this._rot_y - (this._verticalAngleThreshold - this._verticalAngleOfVectors);\n        // }\n        // if (\n        //   this.__rot_y < -this.__verticalAngleThreshold + this.__verticalAngleOfVectors\n        // ) {\n        //         this._rot_y += this._rot_y - (this._verticalAngleThreshold - this._verticalAngleOfVectors);\n        // }\n        if (this.__maximum_y != null && this.__rot_y > this.__maximum_y) {\n            this.__rot_y = this.__maximum_y;\n        }\n        if (this.__minimum_y != null && this.__rot_y < this.__minimum_y) {\n            this.__rot_y = this.__minimum_y;\n        }\n    }\n    __zoomControl(originalValue, currentValue) {\n        this.dolly -= ((currentValue - originalValue) / 1000) * this.__efficiency;\n    }\n    __parallelTranslateControl(originalX, originalY, currentX, currentY) {\n        this.__mouse_translate_y = ((currentY - originalY) / 1000) * this.__efficiency;\n        this.__mouse_translate_x = ((currentX - originalX) / 1000) * this.__efficiency;\n        const scale = this.__lengthOfCenterToEye * this.__foyvBias * this.__scaleOfTranslation;\n        this.__mouseTranslateVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(this.__mouseTranslateVec, _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].normalize(this.__newUpVec).multiply(this.__mouse_translate_y).multiply(scale));\n        this.__mouseTranslateVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(this.__mouseTranslateVec, _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].normalize(this.__newTangentVec).multiply(this.__mouse_translate_x).multiply(scale));\n    }\n    __getTouchesDistance(e) {\n        const touches = e.touches;\n        const x1 = touches[0].clientX;\n        const y1 = touches[0].clientY;\n        const x2 = touches[1].clientX;\n        const y2 = touches[1].clientY;\n        return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    }\n    __pinchInOut(e) {\n        if (e.touches.length < 2)\n            return;\n        if (this.__pinchInOutOriginalDistance == null) {\n            this.__pinchInOutOriginalDistance = this.__getTouchesDistance(e);\n            return;\n        }\n        const currentDistance = this.__getTouchesDistance(e);\n        const originalDistance = this.__pinchInOutOriginalDistance;\n        if (!this.__pinchInOutControl) {\n            if (Math.abs(currentDistance - originalDistance) > 35.0) {\n                this.__pinchInOutOriginalDistance = currentDistance;\n                this.__pinchInOutControl = true;\n            }\n            return;\n        }\n        const ratio = originalDistance / currentDistance;\n        this.dolly *= Math.pow(ratio * this.__efficiency, 2.2 / 15.0);\n        this.__pinchInOutOriginalDistance = currentDistance;\n    }\n    __pinchInOutEnd(e) {\n        if (e.touches.length < 2) {\n            this.__pinchInOutControl = false;\n            this.__pinchInOutOriginalDistance = null;\n        }\n    }\n    __tryToPreventDefault(evt) {\n        if (this.__doPreventDefault) {\n            evt.preventDefault();\n        }\n    }\n    __mouseWheel(evt) {\n        this.__tryToPreventDefault(evt);\n        this.dolly += Math.sign(evt.deltaY) / 200;\n    }\n    ;\n    __contextMenu(evt) {\n        this.__tryToPreventDefault(evt);\n    }\n    ;\n    set dolly(value) {\n        value = Math.min(value, 1);\n        value = Math.max(value, 0.0001);\n        let gamma = Math.pow(value, 5);\n        gamma = Math.max(gamma, 0.0001);\n        this.__dolly = gamma;\n    }\n    get dolly() {\n        return Math.pow(this.__dolly, 1 / 5);\n    }\n    __mouseDblClick(evt) {\n        if (evt.shiftKey) {\n            this.__mouseTranslateVec = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](0, 0, 0);\n        }\n        else if (evt.ctrlKey) {\n            this.__rot_y = 0;\n            this.__rot_x = 0;\n            this.__rot_bgn_y = 0;\n            this.__rot_bgn_x = 0;\n        }\n    }\n    ;\n    __resetDollyAndPosition(e) {\n        if (e.touches.length > 1)\n            return;\n        const currentTime = new Date().getTime();\n        if (currentTime - this.__resetDollyTouchTime < 300) {\n            this.dolly = Math.pow(0.5, 1.0 / 2.2);\n            this.__mouseTranslateVec = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](0, 0, 0);\n            this.__rot_x = 0;\n            this.__rot_y = 0;\n        }\n        else {\n            this.__resetDollyTouchTime = currentTime;\n        }\n    }\n    registerEventListeners(eventTargetDom = document) {\n        this._eventTargetDom = eventTargetDom;\n        if (eventTargetDom) {\n            if (\"ontouchend\" in document) {\n                eventTargetDom.addEventListener(\"touchstart\", this.__touchDownFunc, { passive: !this.__doPreventDefault });\n                eventTargetDom.addEventListener(\"touchmove\", this.__touchMoveFunc, { passive: !this.__doPreventDefault });\n                eventTargetDom.addEventListener(\"touchend\", this.__touchUpFunc, { passive: !this.__doPreventDefault });\n                eventTargetDom.addEventListener(\"touchmove\", this.__pinchInOutFunc, { passive: !this.__doPreventDefault });\n                eventTargetDom.addEventListener(\"touchend\", this.__pinchInOutEndFunc, { passive: !this.__doPreventDefault });\n                eventTargetDom.addEventListener(\"touchstart\", this.__resetDollyAndPositionFunc, { passive: !this.__doPreventDefault });\n            }\n            else {\n                eventTargetDom.addEventListener(\"mousedown\", this.__mouseDownFunc, { passive: !this.__doPreventDefault });\n                eventTargetDom.addEventListener(\"mouseup\", this.__mouseUpFunc, { passive: !this.__doPreventDefault });\n                eventTargetDom.addEventListener(\"mousemove\", this.__mouseMoveFunc, { passive: !this.__doPreventDefault });\n                eventTargetDom.addEventListener(\"contextmenu\", (e) => { e.preventDefault(); });\n            }\n            if (window.WheelEvent) {\n                eventTargetDom.addEventListener(\"wheel\", this.__mouseWheelFunc, { passive: !this.__doPreventDefault });\n            }\n            eventTargetDom.addEventListener(\"contextmenu\", this.__contextMenuFunc, { passive: !this.__doPreventDefault });\n            eventTargetDom.addEventListener(\"dblclick\", this.__mouseDblClickFunc, { passive: !this.__doPreventDefault });\n        }\n    }\n    unregisterEventListeners() {\n        const eventTargetDom = this._eventTargetDom;\n        if (eventTargetDom) {\n            if (\"ontouchend\" in document) {\n                eventTargetDom.removeEventListener(\"touchstart\", this.__touchDownFunc);\n                eventTargetDom.removeEventListener(\"touchmove\", this.__touchMoveFunc);\n                eventTargetDom.removeEventListener(\"touchend\", this.__touchUpFunc);\n                eventTargetDom.removeEventListener(\"touchmove\", this.__pinchInOutFunc);\n                eventTargetDom.removeEventListener(\"touchend\", this.__pinchInOutEndFunc);\n                eventTargetDom.removeEventListener(\"touchstart\", this.__resetDollyAndPositionFunc);\n            }\n            else {\n                eventTargetDom.removeEventListener(\"mousedown\", this.__mouseDownFunc);\n                eventTargetDom.removeEventListener(\"mouseup\", this.__mouseUpFunc);\n                eventTargetDom.removeEventListener(\"mousemove\", this.__mouseMoveFunc);\n                eventTargetDom.removeEventListener(\"contextmenu\", (e) => { e.preventDefault(); });\n            }\n            if (window.WheelEvent) {\n                eventTargetDom.removeEventListener(\"wheel\", this.__mouseWheelFunc);\n            }\n            eventTargetDom.removeEventListener(\"contextmenu\", this.__contextMenuFunc);\n            eventTargetDom.removeEventListener(\"dblclick\", this.__mouseDblClickFunc);\n        }\n    }\n    __getFovyFromCamera(camera) {\n        if (camera.fovy) {\n            return camera.fovy;\n        }\n        else {\n            return _math_MathUtil__WEBPACK_IMPORTED_MODULE_2__[\"MathUtil\"].radianToDegree(2 * Math.atan(Math.abs(camera.top - camera.bottom) / (2 * camera.zNear)));\n        }\n    }\n    logic(cameraComponent) {\n        const data0 = this.__updateTargeting(cameraComponent);\n        const eye = data0.newEyeVec;\n        const center = data0.newCenterVec;\n        const up = data0.newUpVec;\n        const data = this.__convert(cameraComponent, eye, center, up);\n        const cc = cameraComponent;\n        cc.eyeInner = data.newEyeVec;\n        cc.directionInner = data.newCenterVec;\n        cc.upInner = data.newUpVec;\n        cc.zNearInner = data.newZNear;\n        cc.zFarInner = data.newZFar;\n        cc.leftInner = data.newLeft;\n        cc.rightInner = data.newRight;\n        cc.topInner = data.newTop;\n        cc.bottomInner = data.newBottom;\n        cc.fovyInner = data.fovy;\n    }\n    __convert(camera, eye, center, up) {\n        let newEyeVec = null;\n        let newCenterVec;\n        let newUpVec = null;\n        if (this.__isKeyUp || !this.__isForceGrab) {\n            this.__eyeVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(eye, this.__shiftCameraTo);\n            this.__centerVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(center, this.__shiftCameraTo);\n            this.__upVec = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](up);\n        }\n        let fovy = this.__getFovyFromCamera(camera);\n        const centerToEyeVec = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this.__eyeVec).subtract(this.__centerVec);\n        centerToEyeVec.multiply((this.__dolly * this.__dollyScale) / Math.tan(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__[\"MathUtil\"].degreeToRadian(fovy / 2.0)));\n        this.__lengthOfCenterToEye = centerToEyeVec.length();\n        if (this.__isSymmetryMode) {\n            let horizontalAngleOfVectors = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].angleOfVectors(new _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](centerToEyeVec.x, 0, centerToEyeVec.z), new _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](0, 0, 1));\n            let horizontalSign = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cross(new _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](centerToEyeVec.x, 0, centerToEyeVec.z), new _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](0, 0, 1)).y;\n            if (horizontalSign >= 0) {\n                horizontalSign = 1;\n            }\n            else {\n                horizontalSign = -1;\n            }\n            horizontalAngleOfVectors *= horizontalSign;\n            let rotateM_Reset = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"].rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__[\"MathUtil\"].degreeToRadian(horizontalAngleOfVectors));\n            let rotateM_X = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"].rotateX(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__[\"MathUtil\"].degreeToRadian(this.__rot_y));\n            let rotateM_Y = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"].rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__[\"MathUtil\"].degreeToRadian(this.__rot_x));\n            let rotateM_Revert = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"].rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__[\"MathUtil\"].degreeToRadian(-horizontalAngleOfVectors));\n            let rotateM = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"].multiply(rotateM_Revert, _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"].multiply(rotateM_Y, _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"].multiply(rotateM_X, rotateM_Reset)));\n            newUpVec = rotateM.multiplyVector(this.__upVec);\n            this.__newUpVec = newUpVec;\n            newEyeVec = rotateM.multiplyVector(centerToEyeVec).add(this.__centerVec);\n            newCenterVec = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this.__centerVec);\n            this.__newEyeToCenterVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(newCenterVec, newEyeVec);\n            this.__newTangentVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cross(this.__newUpVec, this.__newEyeToCenterVec);\n            newEyeVec.add(this.__mouseTranslateVec);\n            newCenterVec.add(this.__mouseTranslateVec);\n            let horizonResetVec = rotateM_Reset.multiplyVector(centerToEyeVec);\n            this.__verticalAngleOfVectors = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].angleOfVectors(horizonResetVec, new _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](0, 0, 1));\n            let verticalSign = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cross(horizonResetVec, new _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](0, 0, 1)).x;\n            if (verticalSign >= 0) {\n                verticalSign = 1;\n            }\n            else {\n                verticalSign = -1;\n            }\n            //this._verticalAngleOfVectors *= verticalSign;\n        }\n        else {\n            let rotateM_X = _math_Matrix33__WEBPACK_IMPORTED_MODULE_3__[\"default\"].rotateX(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__[\"MathUtil\"].degreeToRadian(this.__rot_y));\n            let rotateM_Y = _math_Matrix33__WEBPACK_IMPORTED_MODULE_3__[\"default\"].rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__[\"MathUtil\"].degreeToRadian(this.__rot_x));\n            let rotateM = _math_Matrix33__WEBPACK_IMPORTED_MODULE_3__[\"default\"].multiply(rotateM_Y, rotateM_X);\n            newUpVec = rotateM.multiplyVector(this.__upVec);\n            this.__newUpVec = newUpVec;\n            newEyeVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(rotateM.multiplyVector(centerToEyeVec), this.__centerVec);\n            newCenterVec = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this.__centerVec);\n            this.__newEyeToCenterVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(newCenterVec, newEyeVec);\n            this.__newTangentVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cross(this.__newUpVec, this.__newEyeToCenterVec);\n            newEyeVec.add(this.__mouseTranslateVec);\n            newCenterVec.add(this.__mouseTranslateVec);\n        }\n        const newCenterToEyeLength = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].lengthBtw(newEyeVec, newCenterVec);\n        let newLeft = camera.left;\n        let newRight = camera.right;\n        let newTop = camera.top;\n        let newBottom = camera.bottom;\n        let newZNear = camera.zNear;\n        let newZFar = camera.zFar;\n        let ratio = 1;\n        if (this.__targetEntity) {\n            newZFar =\n                camera.zNear + _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(newCenterVec, newEyeVec).length();\n            newZFar +=\n                this.__getTargetAABB().lengthCenterToCorner *\n                    this.__zFarAdjustingFactorBasedOnAABB;\n        }\n        if (typeof newLeft !== \"undefined\") {\n            if (typeof this.__lengthCenterToCorner !== \"undefined\") {\n                //let aabb = this.__getTargetAABB();\n                ratio = newZFar / camera.zNear;\n                const minRatio = this.__scaleOfZNearAndZFar;\n                ratio /= minRatio;\n                let scale = ratio;\n                newLeft *= scale;\n                newRight *= scale;\n                newTop *= scale;\n                newBottom *= scale;\n                //        newZFar *= scale;\n                newZNear *= scale;\n            }\n        }\n        this.__foyvBias = Math.tan(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__[\"MathUtil\"].degreeToRadian(fovy / 2.0));\n        return {\n            newEyeVec,\n            newCenterVec,\n            newUpVec,\n            newZNear,\n            newZFar,\n            newLeft,\n            newRight,\n            newTop,\n            newBottom,\n            fovy\n        };\n    }\n    __getTargetAABB() {\n        return this.__targetEntity.getSceneGraph().worldAABB;\n    }\n    __updateTargeting(camera) {\n        const eyeVec = camera.eye;\n        const centerVec = camera.direction;\n        const upVec = camera._up;\n        const fovy = camera.fovy;\n        if (this.__targetEntity == null) {\n            return { newEyeVec: eyeVec, newCenterVec: centerVec, newUpVec: upVec };\n        }\n        let targetAABB = this.__getTargetAABB();\n        const cameraZNearPlaneHeight = camera.top - camera.bottom;\n        this.__lengthCenterToCorner = targetAABB.lengthCenterToCorner;\n        this.__lengthCameraToObject =\n            (targetAABB.lengthCenterToCorner / Math.sin((fovy * Math.PI) / 180 / 2)) *\n                this.__scaleOfLengthCameraToCenter;\n        let newCenterVec = targetAABB.centerPoint;\n        let centerToCameraVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(eyeVec, centerVec);\n        let centerToCameraVecNormalized = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(centerToCameraVec);\n        let newEyeVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(centerToCameraVecNormalized, this.__lengthCameraToObject), newCenterVec);\n        let newUpVec = null;\n        if (camera.entity.getSceneGraph()) {\n            const sg = camera.entity.getSceneGraph();\n            let mat = _math_Matrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"].invert(sg.worldMatrixInner);\n            mat.multiplyVector3To(newEyeVec, OrbitCameraController.returnVector3Eye);\n            newEyeVec = OrbitCameraController.returnVector3Eye;\n            mat.multiplyVector3To(newCenterVec, OrbitCameraController.returnVector3Center);\n            newCenterVec = OrbitCameraController.returnVector3Center;\n            mat.multiplyVector3To(upVec, OrbitCameraController.returnVector3Up);\n            newUpVec = OrbitCameraController.returnVector3Up;\n        }\n        else {\n            newUpVec = upVec;\n        }\n        return { newEyeVec, newCenterVec, newUpVec };\n    }\n    set scaleOfZNearAndZFar(value) {\n        this.__scaleOfZNearAndZFar = value;\n    }\n    get scaleOfZNearAndZFar() {\n        return this.__scaleOfZNearAndZFar;\n    }\n}\nOrbitCameraController.returnVector3Eye = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\nOrbitCameraController.returnVector3Center = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\nOrbitCameraController.returnVector3Up = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\n\n\n//# sourceURL=webpack:///./src/foundation/cameras/OrbitCameraController.ts?");

/***/ }),

/***/ "./src/foundation/cameras/WalkThroughCameraController.ts":
/*!***************************************************************!*\
  !*** ./src/foundation/cameras/WalkThroughCameraController.ts ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return WalkThroughCameraController; });\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_Matrix33__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/Matrix33 */ \"./src/foundation/math/Matrix33.ts\");\n/* harmony import */ var _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/MathClassUtil */ \"./src/foundation/math/MathClassUtil.ts\");\n/* harmony import */ var _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc/MiscUtil */ \"./src/foundation/misc/MiscUtil.ts\");\n/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/MathUtil */ \"./src/foundation/math/MathUtil.ts\");\n\n\n\n\n\n\nclass WalkThroughCameraController {\n    constructor(options = {\n        eventTargetDom: document,\n        verticalSpeed: 1,\n        horizontalSpeed: 1,\n        turnSpeed: 0.25,\n        mouseWheelSpeedScale: 1,\n        inverseVerticalRotating: false,\n        inverseHorizontalRotating: false\n    }) {\n        this._isKeyDown = false;\n        this._isMouseDrag = false;\n        this._lastKeyCode = -1;\n        this._currentDir = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 0, -1);\n        this._currentPos = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 0, 0);\n        this._currentCenter = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 0, -1);\n        this._newDir = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 0, -1);\n        this._isMouseDown = false;\n        this._clickedMouseXOnCanvas = -1;\n        this._clickedMouseYOnCanvas = -1;\n        this._draggedMouseXOnCanvas = -1;\n        this._draggedMouseYOnCanvas = -1;\n        this._deltaMouseXOnCanvas = -1;\n        this._deltaMouseYOnCanvas = -1;\n        this._mouseXAdjustScale = 1;\n        this._mouseYAdjustScale = 1;\n        this._deltaY = -1;\n        this._deltaX = -1;\n        this._mouseUpBind = this._mouseUp.bind(this);\n        this._mouseDownBind = this._mouseDown.bind(this);\n        this._mouseMoveBind = this._mouseMove.bind(this);\n        this._mouseWheelBind = this._mouseWheel.bind(this);\n        this._horizontalSpeed = options.horizontalSpeed;\n        this._verticalSpeed = options.verticalSpeed;\n        this._turnSpeed = options.turnSpeed;\n        this._mouseXAdjustScale = this._turnSpeed;\n        this._mouseYAdjustScale = this._turnSpeed;\n        this._mouseWheelSpeedScale = options.mouseWheelSpeedScale;\n        this._inverseVerticalRotating = options.inverseVerticalRotating;\n        this._inverseHorizontalRotating = options.inverseHorizontalRotating;\n        this.reset();\n        this._onKeydown = e => {\n            this._isKeyDown = true;\n            this._lastKeyCode = e.keyCode;\n        };\n        this._onKeyup = e => {\n            this._isKeyDown = false;\n            this._lastKeyCode = -1;\n        };\n        const eventTargetDom = options.eventTargetDom;\n        this.registerEventListeners(eventTargetDom);\n    }\n    registerEventListeners(eventTargetDom = document) {\n        this._eventTargetDom = eventTargetDom;\n        if (eventTargetDom) {\n            document.addEventListener(\"keydown\", this._onKeydown);\n            document.addEventListener(\"keyup\", this._onKeyup);\n            if (\"ontouchend\" in document) {\n                eventTargetDom.addEventListener(\"touchstart\", this._mouseDownBind);\n                document.addEventListener(\"touchend\", this._mouseUpBind);\n                eventTargetDom.addEventListener(\"touchmove\", this._mouseMoveBind);\n            }\n            if (\"onmouseup\" in document) {\n                eventTargetDom.addEventListener(\"mousedown\", this._mouseDownBind);\n                document.addEventListener(\"mouseup\", this._mouseUpBind);\n                eventTargetDom.addEventListener(\"mousemove\", this._mouseMoveBind);\n            }\n            if (\"onwheel\" in document) {\n                eventTargetDom.addEventListener(\"wheel\", this._mouseWheelBind);\n            }\n        }\n    }\n    unregisterEventListeners() {\n        const eventTargetDom = this._eventTargetDom;\n        if (eventTargetDom) {\n            document.removeEventListener(\"keydown\", this._onKeydown);\n            document.removeEventListener(\"keyup\", this._onKeyup);\n            if (\"ontouchend\" in document) {\n                eventTargetDom.removeEventListener(\"touchstart\", this._mouseDown.bind(this));\n                document.removeEventListener(\"touchend\", this._mouseUpBind);\n                eventTargetDom\n                    .removeEventListener(\"touchmove\", this._mouseMoveBind);\n            }\n            if (\"onmouseup\" in document) {\n                eventTargetDom.removeEventListener(\"mousedown\", this._mouseDownBind);\n                document.removeEventListener(\"mouseup\", this._mouseUpBind);\n                eventTargetDom.removeEventListener(\"mousemove\", this._mouseMoveBind);\n            }\n            if (\"onwheel\" in document) {\n                eventTargetDom.removeEventListener(\"wheel\", this._mouseWheelBind);\n            }\n        }\n    }\n    _mouseWheel(e) {\n        if (this._currentDir === null) {\n            return;\n        }\n        let delta = -1 * Math.sign(e.deltaY) * this._mouseWheelSpeedScale * this._horizontalSpeed;\n        const horizontalDir = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this._currentDir.x, 0, this._currentDir.z).normalize();\n        this._currentPos.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(horizontalDir, delta));\n        this._currentCenter.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(horizontalDir, delta));\n    }\n    _mouseDown(evt) {\n        _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_3__[\"MiscUtil\"].preventDefaultForDesktopOnly(evt);\n        evt.stopPropagation();\n        this._isMouseDown = true;\n        let rect = evt.target.getBoundingClientRect();\n        this._clickedMouseXOnCanvas = evt.clientX - rect.left;\n        this._clickedMouseYOnCanvas = evt.clientY - rect.top;\n        return false;\n    }\n    _mouseMove(evt) {\n        _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_3__[\"MiscUtil\"].preventDefaultForDesktopOnly(evt);\n        if (!this._isMouseDown) {\n            return;\n        }\n        evt.stopPropagation();\n        let rect = evt.target.getBoundingClientRect();\n        this._draggedMouseXOnCanvas = evt.clientX - rect.left;\n        this._draggedMouseYOnCanvas = evt.clientY - rect.top;\n        this._deltaMouseXOnCanvas =\n            this._draggedMouseXOnCanvas - this._clickedMouseXOnCanvas;\n        this._deltaMouseYOnCanvas =\n            this._draggedMouseYOnCanvas - this._clickedMouseYOnCanvas;\n        this._isMouseDrag = true;\n    }\n    _mouseUp(evt) {\n        this._isMouseDown = false;\n        this._isMouseDrag = false;\n        let rect = evt.target.getBoundingClientRect();\n        this._clickedMouseXOnCanvas = evt.clientX - rect.left;\n        this._clickedMouseYOnCanvas = evt.clientY - rect.top;\n    }\n    tryReset() { }\n    reset() {\n        this._isKeyDown = false;\n        this._lastKeyCode = -1;\n        this._currentPos = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 0, 0);\n        this._currentCenter = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 0, -1);\n        this._currentDir = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 0, -1);\n        this._isMouseDown = false;\n        this._isMouseDrag = false;\n        this._draggedMouseXOnCanvas = -1;\n        this._draggedMouseYOnCanvas = -1;\n        this._deltaMouseXOnCanvas = -1;\n        this._deltaMouseYOnCanvas = -1;\n        this._mouseXAdjustScale = this._turnSpeed;\n        this._mouseYAdjustScale = this._turnSpeed;\n        this._deltaY = 0;\n        this._deltaX = 0;\n        this._newDir = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 0, -1);\n    }\n    logic(cameraComponent) {\n        const data = this.__convert(cameraComponent);\n        const cc = cameraComponent;\n        cc.eyeInner = data.newEyeVec;\n        cc.directionInner = data.newCenterVec;\n        cc.upInner = data.newUpVec;\n        cc.zNearInner = data.newZNear;\n        cc.zFarInner = data.newZFar;\n        cc.leftInner = data.newLeft;\n        cc.rightInner = data.newRight;\n        cc.topInner = data.newTop;\n        cc.bottomInner = data.newBottom;\n        cc.fovyInner = data.fovy;\n    }\n    __convert(camera) {\n        if (this._currentPos === null) {\n            this._currentPos = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](camera.eye.clone());\n        }\n        const sg = camera.entity.getSceneGraph();\n        const mat = sg.worldMatrixInner;\n        const center = mat.multiplyVector3(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].zero());\n        if (this._currentCenter === null) {\n            this._currentCenter = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](center);\n        }\n        if (this._currentDir === null) {\n            this._currentDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](center), camera.eye).normalize();\n        }\n        let newEyeToCenter = null;\n        const t = this._deltaY / 90;\n        this._newDir.x = this._currentDir.x * (1 - t);\n        this._newDir.y = t;\n        this._newDir.z = this._currentDir.z * (1 - t);\n        this._newDir.normalize();\n        switch (this._lastKeyCode) {\n            case 87: // w key\n            case 38: // arrow upper key\n                {\n                    const horizontalDir = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this._currentDir.x, 0, this._currentDir.z).normalize();\n                    this._currentPos.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(horizontalDir, this._horizontalSpeed));\n                    this._currentCenter.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(horizontalDir, this._horizontalSpeed));\n                }\n                break;\n            case 65: // a key\n            case 37: // arrow left key\n                {\n                    const horizontalDir = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this._currentDir.x, 0, this._currentDir.z).normalize();\n                    const leftDir = _math_Matrix33__WEBPACK_IMPORTED_MODULE_1__[\"default\"].rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_5__[\"MathUtil\"].degreeToRadian(90)).multiplyVector(horizontalDir);\n                    this._currentPos.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(leftDir, this._horizontalSpeed));\n                    this._currentCenter.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(leftDir, this._horizontalSpeed));\n                }\n                break;\n            case 83: // s key\n            case 40: // arrow down key\n                {\n                    const horizontalDir = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this._currentDir.x, 0, this._currentDir.z).normalize();\n                    this._currentPos.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(horizontalDir, -this._horizontalSpeed));\n                    this._currentCenter.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(horizontalDir, -this._horizontalSpeed));\n                }\n                break;\n            case 68: // d key\n            case 39: // arrow right key\n                {\n                    const horizontalDir = new _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this._currentDir.x, 0, this._currentDir.z).normalize();\n                    const rightDir = _math_Matrix33__WEBPACK_IMPORTED_MODULE_1__[\"default\"].rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_5__[\"MathUtil\"].degreeToRadian(-90)).multiplyVector(horizontalDir);\n                    this._currentPos.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(rightDir, this._horizontalSpeed));\n                    this._currentCenter.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(rightDir, this._horizontalSpeed));\n                }\n                break;\n            case 81: // q key\n                {\n                    this._currentPos.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(this._newDir, -this._horizontalSpeed));\n                    this._currentCenter.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(this._newDir, -this._horizontalSpeed));\n                }\n                break;\n            case 69: // e key\n                {\n                    this._currentPos.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(this._newDir, this._horizontalSpeed));\n                    this._currentCenter.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(this._newDir, this._horizontalSpeed));\n                }\n                break;\n            case 82: // r key\n                this._currentPos.add(new _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](0, this._verticalSpeed, 0));\n                this._currentCenter.add(new _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](0, this._verticalSpeed, 0));\n                break;\n            case 70: // f key\n                this._currentPos.add(new _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](0, -this._verticalSpeed, 0));\n                this._currentCenter.add(new _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](0, -this._verticalSpeed, 0));\n                break;\n        }\n        if (this._isMouseDrag) {\n            if (this._inverseHorizontalRotating) {\n                this._deltaX = this._deltaMouseXOnCanvas * this._mouseXAdjustScale;\n            }\n            else {\n                this._deltaX = -this._deltaMouseXOnCanvas * this._mouseXAdjustScale;\n            }\n            if (this._inverseVerticalRotating) {\n                this._deltaY += this._deltaMouseYOnCanvas * this._mouseYAdjustScale;\n            }\n            else {\n                this._deltaY += -this._deltaMouseYOnCanvas * this._mouseYAdjustScale;\n            }\n            this._deltaY = Math.max(-120, Math.min(50, this._deltaY));\n            this._currentDir = _math_Matrix33__WEBPACK_IMPORTED_MODULE_1__[\"default\"].rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_5__[\"MathUtil\"].degreeToRadian(this._deltaX)).multiplyVector(this._currentDir);\n            newEyeToCenter = _math_Matrix33__WEBPACK_IMPORTED_MODULE_1__[\"default\"].rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_5__[\"MathUtil\"].degreeToRadian(this._deltaX)).multiplyVector(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(this._currentCenter, this._currentPos));\n            newEyeToCenter.x = newEyeToCenter.x * (1 - t);\n            newEyeToCenter.y = t;\n            newEyeToCenter.z = newEyeToCenter.z * (1 - t);\n            newEyeToCenter.normalize();\n            this._currentCenter = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(this._currentPos, newEyeToCenter);\n            this._clickedMouseXOnCanvas = this._draggedMouseXOnCanvas;\n            this._clickedMouseYOnCanvas = this._draggedMouseYOnCanvas;\n            this._deltaMouseXOnCanvas = 0;\n            this._deltaMouseYOnCanvas = 0;\n        }\n        let newLeft = camera.left;\n        let newRight = camera.right;\n        let newTop = camera.top;\n        let newBottom = camera.bottom;\n        return {\n            newEyeVec: this._currentPos,\n            newCenterVec: this._currentCenter,\n            newUpVec: camera.up.clone(),\n            newZNear: camera.zNear,\n            newZFar: camera.zFar,\n            newLeft,\n            newRight,\n            newTop,\n            newBottom,\n            fovy: camera.fovy\n        };\n    }\n    getDirection() {\n        return this._currentCenter !== null ? this._newDir.clone() : null;\n    }\n    set horizontalSpeed(value) {\n        this._horizontalSpeed = value;\n    }\n    get horizontalSpeed() {\n        return this._horizontalSpeed;\n    }\n    set verticalSpeed(value) {\n        this._verticalSpeed = value;\n    }\n    get verticalSpeed() {\n        return this._verticalSpeed;\n    }\n    setTarget(targetEntity) {\n        const speed = targetEntity.getSceneGraph().worldAABB.lengthCenterToCorner / 10;\n        this.verticalSpeed = speed;\n        this.horizontalSpeed = speed;\n    }\n    get allInfo() {\n        const info = {};\n        info.verticalSpeed = this.verticalSpeed;\n        info.horizontalSpeed = this.horizontalSpeed;\n        info._turnSpeed = this._turnSpeed;\n        if (this._currentPos) {\n            info._currentPos = this._currentPos.clone();\n        }\n        if (this._currentCenter) {\n            info._currentCenter = this._currentCenter.clone();\n        }\n        if (this._currentDir) {\n            info._currentDir = this._currentDir.clone();\n        }\n        info._deltaY = this._deltaY;\n        info._newDir = this._newDir.clone();\n        return info;\n    }\n    set allInfo(arg) {\n        let json = arg;\n        if (typeof arg === \"string\") {\n            json = JSON.parse(arg);\n        }\n        for (let key in json) {\n            if (json.hasOwnProperty(key) && key in this) {\n                if (key === \"quaternion\") {\n                    this[key] = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_2__[\"default\"].cloneOfMathObjects(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_2__[\"default\"].arrayToQuaternion(json[key]));\n                }\n                else {\n                    this[key] = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_2__[\"default\"].cloneOfMathObjects(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_2__[\"default\"].arrayToVectorOrMatrix(json[key]));\n                }\n            }\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/cameras/WalkThroughCameraController.ts?");

/***/ }),

/***/ "./src/foundation/components/AnimationComponent.ts":
/*!*********************************************************!*\
  !*** ./src/foundation/components/AnimationComponent.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AnimationComponent; });\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _definitions_Animation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/Animation */ \"./src/foundation/definitions/Animation.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _math_Quaternion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n/* harmony import */ var _TransformComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./TransformComponent */ \"./src/foundation/components/TransformComponent.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n/* harmony import */ var _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/MutableQuaterion */ \"./src/foundation/math/MutableQuaterion.ts\");\n/* harmony import */ var _MeshComponent__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../math/MathClassUtil */ \"./src/foundation/math/MathClassUtil.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass AnimationComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(entityUid, componentSid, entityRepository) {\n        super(entityUid, componentSid, entityRepository);\n        this.__animationLine = {};\n        this.__backupDefaultValues = {};\n        this.__currentProcessStage = _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__[\"ProcessStage\"].Create;\n    }\n    static get componentTID() {\n        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__[\"WellKnownComponentTIDs\"].AnimationComponentTID;\n    }\n    setAnimation(animationAttributeName, animationInputArray, animationOutputArray, interpolation) {\n        const line = {\n            input: animationInputArray,\n            output: animationOutputArray,\n            inTangent: [],\n            outTangent: [],\n            outputAttributeName: animationAttributeName,\n            outputCompositionType: animationOutputArray[0].compositionType,\n            interpolationMethod: interpolation\n        };\n        this.__animationLine[animationAttributeName] = line;\n    }\n    static lerp(start, end, ratio, compositionType) {\n        if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar) {\n            return start * (1 - ratio) + end * ratio;\n        }\n        else {\n            if (start instanceof _math_Quaternion__WEBPACK_IMPORTED_MODULE_5__[\"default\"]) {\n                _math_Quaternion__WEBPACK_IMPORTED_MODULE_5__[\"default\"].qlerpTo(start, end, ratio, AnimationComponent.returnQuaternion);\n                // Quaternion.lerpTo(start, end, ratio, AnimationComponent.returnQuaternion); // This is faster and enough approximation\n                return AnimationComponent.returnQuaternion;\n            }\n            else if (start instanceof _math_Vector3__WEBPACK_IMPORTED_MODULE_8__[\"default\"]) {\n                this.returnVector3.x = start.x * (1 - ratio) + end.x * ratio;\n                this.returnVector3.y = start.y * (1 - ratio) + end.y * ratio;\n                this.returnVector3.z = start.z * (1 - ratio) + end.z * ratio;\n                return this.returnVector3;\n            }\n            else {\n                const returnArray = [];\n                for (let i = 0; i < start.length; i++) {\n                    returnArray[i] = start[i] * (1 - ratio) + end[i] * ratio;\n                }\n                return returnArray;\n            }\n        }\n    }\n    static cubicSpline(start, end, inTangent, outTangent, ratio, deltaInput, compositionType) {\n        const ratio2 = ratio * ratio;\n        const ratio3 = ratio2 * ratio;\n        if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar) {\n            return (2 * ratio3 - 3 * ratio2 + 1) * start +\n                (ratio3 - 2 * ratio2 + ratio) * inTangent +\n                (-2 * ratio3 + 3 * ratio2) * end +\n                (ratio3 - ratio2) * outTangent;\n        }\n        else {\n            if (start instanceof _math_Vector3__WEBPACK_IMPORTED_MODULE_8__[\"default\"]) {\n                this.returnVector3.x = (2 * ratio3 - 3 * ratio2 + 1) * start.x +\n                    (ratio3 - 2 * ratio2 + ratio) * inTangent.x +\n                    (-2 * ratio3 + 3 * ratio2) * end.x +\n                    (ratio3 - ratio2) * outTangent.x;\n                this.returnVector3.y = (2 * ratio3 - 3 * ratio2 + 1) * start.y +\n                    (ratio3 - 2 * ratio2 + ratio) * inTangent.y +\n                    (-2 * ratio3 + 3 * ratio2) * end.y +\n                    (ratio3 - ratio2) * outTangent.y;\n                this.returnVector3.z = (2 * ratio3 - 3 * ratio2 + 1) * start.z +\n                    (ratio3 - 2 * ratio2 + ratio) * inTangent.z +\n                    (-2 * ratio3 + 3 * ratio2) * end.z +\n                    (ratio3 - ratio2) * outTangent.z;\n                return this.returnVector3;\n            }\n            else if (start instanceof _math_Quaternion__WEBPACK_IMPORTED_MODULE_5__[\"default\"]) {\n                this.returnQuaternion.x = (2 * ratio3 - 3 * ratio2 + 1) * start.x +\n                    (ratio3 - 2 * ratio2 + ratio) * inTangent.x +\n                    (-2 * ratio3 + 3 * ratio2) * end.x +\n                    (ratio3 - ratio2) * outTangent.x;\n                this.returnQuaternion.y = (2 * ratio3 - 3 * ratio2 + 1) * start.y +\n                    (ratio3 - 2 * ratio2 + ratio) * inTangent.y +\n                    (-2 * ratio3 + 3 * ratio2) * end.y +\n                    (ratio3 - ratio2) * outTangent.y;\n                this.returnQuaternion.z = (2 * ratio3 - 3 * ratio2 + 1) * start.z +\n                    (ratio3 - 2 * ratio2 + ratio) * inTangent.z +\n                    (-2 * ratio3 + 3 * ratio2) * end.z +\n                    (ratio3 - ratio2) * outTangent.z;\n                this.returnQuaternion.w = (2 * ratio3 - 3 * ratio2 + 1) * start.w +\n                    (ratio3 - 2 * ratio2 + ratio) * inTangent.w +\n                    (-2 * ratio3 + 3 * ratio2) * end.w +\n                    (ratio3 - ratio2) * outTangent.w;\n                return this.returnQuaternion;\n            }\n            else {\n                const returnArray = [];\n                for (let j = 0; j < start.length; j++) {\n                    returnArray[j] = (2 * ratio3 - 3 * ratio2 + 1) * start.x +\n                        (ratio3 - 2 * ratio2 + ratio) * inTangent[j] +\n                        (-2 * ratio3 + 3 * ratio2) * end.x +\n                        (ratio3 - ratio2) * outTangent[j];\n                }\n                return returnArray;\n            }\n        }\n    }\n    static __isClamped(idx, inputArray) {\n        if (idx < 0) {\n            return true;\n        }\n        if (idx >= inputArray.length) {\n            return true;\n        }\n        return false;\n    }\n    static binarySearch(inputArray, input) {\n        let low = 0;\n        let high = inputArray.length - 1;\n        let mid = 0;\n        let retVal = 0;\n        while (low < high) {\n            mid = low + ((high - low) >> 1);\n            const value = inputArray[mid];\n            if (value === input) {\n                return mid;\n            }\n            else if (value > input) {\n                high = mid - 1;\n                retVal = high;\n            }\n            else {\n                low = mid + 1;\n                retVal = mid;\n            }\n        }\n        return retVal;\n    }\n    static interpolationSearch(inputArray, value) {\n        let mid = 0;\n        let lower = 0;\n        let upper = inputArray.length - 1;\n        while (lower <= upper) {\n            mid = Math.floor(lower + ((value - inputArray[lower]) * (upper - lower)) / (inputArray[upper] - inputArray[lower]));\n            if (mid < lower || upper < mid) {\n                break;\n            }\n            if (inputArray[mid] === value) {\n                return mid;\n            }\n            else if (inputArray[mid] < value) {\n                lower = mid + 1;\n            }\n            else {\n                upper = mid - 1;\n            }\n        }\n        return mid;\n    }\n    static bruteForceSearch(inputArray, input) {\n        for (let i = 0; i < inputArray.length; i++) {\n            if (inputArray[i] <= input && input < inputArray[i + 1]) {\n                return i;\n            }\n        }\n        return inputArray.length - 1;\n    }\n    static interpolate(line, input) {\n        const inputArray = line.input;\n        const outputArray = line.output;\n        const compositionType = line.outputCompositionType;\n        const method = (line.interpolationMethod != null) ? line.interpolationMethod : _definitions_Animation__WEBPACK_IMPORTED_MODULE_3__[\"Animation\"].Linear;\n        if (method === _definitions_Animation__WEBPACK_IMPORTED_MODULE_3__[\"Animation\"].CubicSpline) {\n            for (let i = 0; i < inputArray.length - 1; i++) {\n                if (inputArray[i] <= input && input < inputArray[i + 1]) {\n                    const i_minus_b = AnimationComponent.__isClamped(i - 1, inputArray);\n                    const i_plus_b = AnimationComponent.__isClamped(i + 1, inputArray);\n                    const i_pp_b = AnimationComponent.__isClamped(i + 2, inputArray);\n                    let m_i = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].initWithScalar(outputArray[0], 0);\n                    if (!i_minus_b) {\n                        m_i = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].multiplyNumber(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].add(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].divideNumber(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(outputArray[i + 1], outputArray[i]), _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(inputArray[i + 1], inputArray[i])), _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].divideNumber(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(outputArray[i], outputArray[i - 1]), _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(inputArray[i], inputArray[i - 1]))), 1 / 2);\n                    }\n                    let m_iplus = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].initWithScalar(outputArray[0], 0);\n                    if (!(i_plus_b || i_pp_b)) {\n                        m_iplus = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].multiplyNumber(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].add(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].divideNumber(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(outputArray[i + 2], outputArray[i + 1]), _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(inputArray[i + 2], inputArray[i + 1])), _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].divideNumber(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(outputArray[i + 1], outputArray[i]), _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_12__[\"default\"].subtract(inputArray[i + 1], inputArray[i]))), 1 / 2);\n                    }\n                    let ratio = (input - inputArray[i]) / (inputArray[i + 1] - inputArray[i]);\n                    let resultValue = this.cubicSpline(outputArray[i], outputArray[i + 1], m_i, m_iplus, ratio, inputArray[i + 1] - inputArray[i], compositionType);\n                    return resultValue;\n                }\n            }\n        }\n        else {\n            if (input < inputArray[0]) {\n                return outputArray[0]; // out of range!\n            }\n            if (inputArray[inputArray.length - 1] <= input) {\n                return outputArray[outputArray.length - 1]; // out of range!\n            }\n            if (method === _definitions_Animation__WEBPACK_IMPORTED_MODULE_3__[\"Animation\"].Linear) {\n                const j = Math.max(this.bruteForceSearch(inputArray, input), 0);\n                // const j = Math.max(this.interpolationSearch(inputArray, input), 0);\n                // const j = Math.max(this.binarySearch(inputArray, input), 0);\n                if (inputArray[j + 1] != null) {\n                    let ratio = (input - inputArray[j]) / (inputArray[j + 1] - inputArray[j]);\n                    let resultValue = this.lerp(outputArray[j], outputArray[j + 1], ratio, compositionType);\n                    return resultValue;\n                }\n                else {\n                    return outputArray[outputArray.length - 1]; // out of range!\n                }\n            }\n            else if (method === _definitions_Animation__WEBPACK_IMPORTED_MODULE_3__[\"Animation\"].Step) {\n                for (let i = 0; i < inputArray.length; i++) {\n                    if (typeof inputArray[i + 1] === \"undefined\") {\n                        break;\n                    }\n                    if (inputArray[i] <= input && input < inputArray[i + 1]) {\n                        return outputArray[i];\n                    }\n                }\n            }\n        }\n        return outputArray[0]; // out of range!\n    }\n    getStartInputValueOfAnimation() {\n        let latestInputValue = Number.MAX_VALUE;\n        for (let attributeName in this.__animationLine) {\n            let inputValueArray = this.__animationLine[attributeName].input;\n            let inputLatestValueAtThisAttribute = inputValueArray[0];\n            if (inputLatestValueAtThisAttribute < latestInputValue) {\n                latestInputValue = inputLatestValueAtThisAttribute;\n                if (latestInputValue < AnimationComponent.__startInputValueOfAllComponent) {\n                    AnimationComponent.__startInputValueOfAllComponent = latestInputValue;\n                }\n            }\n        }\n        return latestInputValue;\n    }\n    getEndInputValueOfAnimation() {\n        let latestInputValue = -Number.MAX_VALUE;\n        for (let attributeName in this.__animationLine) {\n            let inputValueArray = this.__animationLine[attributeName].input;\n            let inputLatestValueAtThisAttribute = inputValueArray[inputValueArray.length - 1];\n            if (inputLatestValueAtThisAttribute > latestInputValue) {\n                latestInputValue = inputLatestValueAtThisAttribute;\n                if (latestInputValue > AnimationComponent.__endInputValueOfAllComponent) {\n                    AnimationComponent.__endInputValueOfAllComponent = latestInputValue;\n                }\n            }\n        }\n        return latestInputValue;\n    }\n    static get startInputValue() {\n        const components = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance().getComponentsWithType(AnimationComponent);\n        components.forEach(component => {\n            component.getStartInputValueOfAnimation();\n        });\n        return AnimationComponent.__startInputValueOfAllComponent;\n    }\n    static get endInputValue() {\n        const components = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance().getComponentsWithType(AnimationComponent);\n        components.forEach(component => {\n            component.getEndInputValueOfAnimation();\n        });\n        return AnimationComponent.__endInputValueOfAllComponent;\n    }\n    $create() {\n        this.__transformComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _TransformComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n        this.__meshComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _MeshComponent__WEBPACK_IMPORTED_MODULE_11__[\"default\"]);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__[\"ProcessStage\"].Logic);\n    }\n    $logic() {\n        for (let attributeName in this.__animationLine) {\n            if (this.__backupDefaultValues[attributeName] == null) {\n                if (attributeName === 'weights') {\n                    this.__backupDefaultValues[attributeName] = this.__meshComponent[attributeName];\n                }\n                else {\n                    this.__backupDefaultValues[attributeName] = this.__transformComponent[attributeName];\n                }\n            }\n            if (AnimationComponent.isAnimating) {\n                const line = this.__animationLine[attributeName];\n                let value = AnimationComponent.interpolate(line, AnimationComponent.globalTime);\n                if (attributeName === 'weights') {\n                    this.__meshComponent[attributeName] = value;\n                }\n                else {\n                    this.__transformComponent[attributeName] = value;\n                }\n            }\n            else {\n                if (attributeName === 'weights') {\n                    this.__meshComponent[attributeName] = this.__backupDefaultValues[attributeName];\n                }\n                else {\n                    this.__transformComponent[attributeName] = this.__backupDefaultValues[attributeName];\n                }\n            }\n        }\n    }\n}\nAnimationComponent.globalTime = 0;\nAnimationComponent.isAnimating = true;\nAnimationComponent.__startInputValueOfAllComponent = Number.MAX_VALUE;\nAnimationComponent.__endInputValueOfAllComponent = -Number.MAX_VALUE;\nAnimationComponent.returnVector3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_9__[\"default\"].zero();\nAnimationComponent.returnQuaternion = new _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_10__[\"default\"]([0, 0, 0, 1]);\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerComponentClass(AnimationComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/AnimationComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/BlendShapeComponent.ts":
/*!**********************************************************!*\
  !*** ./src/foundation/components/BlendShapeComponent.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return BlendShapeComponent; });\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _MeshComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n\n\n\n\n\n\n\n\n// import AnimationComponent from './AnimationComponent';\nclass BlendShapeComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor(entityUid, componentSid, entityComponent) {\n        super(entityUid, componentSid, entityComponent);\n        this.__weights = [];\n        this._dummy = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dummy();\n        this.__targetNames = [];\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__[\"BufferUse\"].CPUGeneric, 'dummy', _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, [0, 0, 0]);\n        this.submitToAllocation(this.maxNumberOfComponent);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_6__[\"ProcessStage\"].Create);\n    }\n    static get componentTID() {\n        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_4__[\"WellKnownComponentTIDs\"].BlendShapeComponentTID;\n    }\n    $create() {\n        this.__meshComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _MeshComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"]);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_6__[\"ProcessStage\"].Logic);\n    }\n    $logic() {\n    }\n    set weights(weights) {\n        this.__weights = weights;\n        if (this.__meshComponent) {\n            this.__meshComponent.weights = weights;\n        }\n    }\n    get weights() {\n        return this.__weights;\n    }\n    set targetNames(names) {\n        this.__targetNames = names;\n    }\n    get targetNames() {\n        return this.__targetNames;\n    }\n}\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__[\"default\"].registerComponentClass(BlendShapeComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/BlendShapeComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/CameraComponent.ts":
/*!******************************************************!*\
  !*** ./src/foundation/components/CameraComponent.ts ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CameraComponent; });\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _definitions_CameraType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/CameraType */ \"./src/foundation/definitions/CameraType.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../math/MutableVector4 */ \"./src/foundation/math/MutableVector4.ts\");\n/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n/* harmony import */ var _geometry_Frustum__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../geometry/Frustum */ \"./src/foundation/geometry/Frustum.ts\");\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../core/GlobalDataRepository */ \"./src/foundation/core/GlobalDataRepository.ts\");\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../math/MathUtil */ \"./src/foundation/math/MathUtil.ts\");\n/* harmony import */ var _CameraControllerComponent__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./CameraControllerComponent */ \"./src/foundation/components/CameraControllerComponent.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass CameraComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor(entityUid, componentSid, entityRepository) {\n        super(entityUid, componentSid, entityRepository);\n        this._eye = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].zero();\n        this._eyeInner = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        this._direction = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        this._directionInner = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        this._up = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        this._upInner = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        this._filmWidth = 36; // mili meter\n        this._filmHeight = 24; // mili meter\n        this._focalLength = 20;\n        // x: left, y:right, z:top, w: bottom\n        this._corner = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__[\"default\"].dummy();\n        this._cornerInner = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__[\"default\"].dummy();\n        // x: zNear, y: zFar,\n        // if perspective, z: fovy, w: aspect\n        // if ortho, z: xmag, w: ymag\n        this._parameters = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__[\"default\"].dummy();\n        this._parametersInner = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__[\"default\"].dummy();\n        this.__type = _definitions_CameraType__WEBPACK_IMPORTED_MODULE_4__[\"CameraType\"].Perspective;\n        this._projectionMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__[\"default\"].dummy();\n        this.__isProjectionMatrixUpToDate = false;\n        this._viewMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__[\"default\"].dummy();\n        this.__isViewMatrixUpToDate = false;\n        this._tmp_f = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        this._tmp_s = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        this._tmp_u = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        this.__frustum = new _geometry_Frustum__WEBPACK_IMPORTED_MODULE_13__[\"default\"]();\n        this.maxNumberOfComponent = Math.max(10, Math.floor(_core_Config__WEBPACK_IMPORTED_MODULE_14__[\"default\"].maxEntityNumber / 100));\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__[\"BufferUse\"].CPUGeneric, 'eyeInner', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__[\"ComponentType\"].Float, [0, 0, 0]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__[\"BufferUse\"].CPUGeneric, 'direction', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__[\"ComponentType\"].Float, [0, 0, -1]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__[\"BufferUse\"].CPUGeneric, 'up', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__[\"ComponentType\"].Float, [0, 1, 0]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__[\"BufferUse\"].CPUGeneric, 'directionInner', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__[\"ComponentType\"].Float, [0, 0, -1]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__[\"BufferUse\"].CPUGeneric, 'upInner', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__[\"ComponentType\"].Float, [0, 1, 0]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__[\"BufferUse\"].CPUGeneric, 'corner', _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__[\"ComponentType\"].Float, [-1, 1, 1, -1]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__[\"BufferUse\"].CPUGeneric, 'cornerInner', _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__[\"ComponentType\"].Float, [-1, 1, 1, -1]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__[\"BufferUse\"].CPUGeneric, 'parameters', _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__[\"ComponentType\"].Float, [0.1, 10000, 90, 1]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__[\"BufferUse\"].CPUGeneric, 'parametersInner', _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__[\"ComponentType\"].Float, [0.1, 10000, 90, 1]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__[\"BufferUse\"].CPUGeneric, 'projectionMatrix', _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__[\"ComponentType\"].Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__[\"BufferUse\"].CPUGeneric, 'viewMatrix', _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__[\"ComponentType\"].Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__[\"BufferUse\"].CPUGeneric, 'tmp_f', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__[\"ComponentType\"].Float, [0, 0, 0]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__[\"BufferUse\"].CPUGeneric, 'tmp_s', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__[\"ComponentType\"].Float, [0, 0, 0]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__[\"BufferUse\"].CPUGeneric, 'tmp_u', _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__[\"ComponentType\"].Float, [0, 0, 0]);\n        this.submitToAllocation(_core_Config__WEBPACK_IMPORTED_MODULE_14__[\"default\"].maxCameraNumber);\n        this.__sceneGraphComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_10__[\"ProcessStage\"].PreRender);\n        const globalDataRepository = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_15__[\"default\"].getInstance();\n        globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__[\"ShaderSemantics\"].ViewMatrix);\n        globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__[\"ShaderSemantics\"].ProjectionMatrix);\n        globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__[\"ShaderSemantics\"].ViewPosition);\n        this.setFovyAndChangeFocalLength(90);\n        CameraComponent.main = componentSid;\n    }\n    static set main(componentSID) {\n        this.__main = componentSID;\n    }\n    static get main() {\n        return this.__main;\n    }\n    set type(type) {\n        this.__type = type;\n        if (type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_4__[\"CameraType\"].Orthographic) {\n            this._parameters.z = 1;\n            this._parameters.w = 1;\n            this._parametersInner.z = 1;\n            this._parametersInner.w = 1;\n        }\n        else {\n            this.setFovyAndChangeFocalLength(90);\n            this._parameters.w = 1;\n            this._parametersInner.z = 90;\n            this._parametersInner.w = 1;\n        }\n    }\n    get type() {\n        return this.__type;\n    }\n    get eye() {\n        return _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].zero();\n    }\n    get eyeInner() {\n        return this._eyeInner;\n    }\n    set eyeInner(vec) {\n        this._eyeInner = vec;\n    }\n    set upInner(vec) {\n        this._upInner.copyComponents(vec);\n    }\n    set up(vec) {\n        this._up.copyComponents(vec);\n    }\n    get up() {\n        return this._up.clone();\n    }\n    get upInner() {\n        return this._upInner;\n    }\n    set direction(vec) {\n        const oldDirection = this._direction;\n        const newDirection = vec;\n        const oldUp = this._up;\n        let newUpNonNomalize;\n        if (_math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].cross(newDirection, oldUp).isEqual(_math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].zero())) {\n            const relativeXaxis = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].cross(oldDirection, oldUp);\n            newUpNonNomalize = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].cross(relativeXaxis, newDirection);\n        }\n        else {\n            const newDirectionComponentInOldUp = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].multiply(newDirection, newDirection.dotProduct(oldUp));\n            newUpNonNomalize = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subtract(oldUp, newDirectionComponentInOldUp);\n        }\n        this._up = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].normalize(newUpNonNomalize);\n        this._direction.copyComponents(newDirection);\n    }\n    set directionInner(vec) {\n        this._directionInner.copyComponents(vec);\n    }\n    get direction() {\n        return this._direction.clone();\n    }\n    get directionInner() {\n        return this._directionInner;\n    }\n    set corner(vec) {\n        this._corner.copyComponents(vec);\n    }\n    get corner() {\n        return this._corner.clone();\n    }\n    set left(value) {\n        this._corner.x = value;\n    }\n    set leftInner(value) {\n        this._cornerInner.x = value;\n    }\n    get left() {\n        return this._corner.x;\n    }\n    set right(value) {\n        this._corner.y = value;\n    }\n    set rightInner(value) {\n        this._cornerInner.y = value;\n    }\n    get right() {\n        return this._corner.y;\n    }\n    set top(value) {\n        this._corner.z = value;\n    }\n    set topInner(value) {\n        this._cornerInner.z = value;\n    }\n    get top() {\n        return this._corner.z;\n    }\n    set bottom(value) {\n        this._corner.w = value;\n    }\n    set bottomInner(value) {\n        this._cornerInner.w = value;\n    }\n    get bottom() {\n        return this._corner.w;\n    }\n    set cornerInner(vec) {\n        this._corner = new _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__[\"default\"](vec);\n    }\n    get cornerInner() {\n        return this._corner;\n    }\n    // set parameters(vec: Vector4) {\n    //   this._parameters.copyComponents(vec);\n    // }\n    set parametersInner(vec) {\n        this._parametersInner.copyComponents(vec);\n    }\n    get parameters() {\n        return this._parameters.clone();\n    }\n    set zNear(val) {\n        this._parameters.x = val;\n    }\n    set zNearInner(val) {\n        this._parametersInner.x = val;\n    }\n    get zNearInner() {\n        return this._parametersInner.x;\n    }\n    get zNear() {\n        return this._parameters.x;\n    }\n    set focalLength(val) {\n        this._focalLength = val;\n        this._parameters.z = 2 * _math_MathUtil__WEBPACK_IMPORTED_MODULE_17__[\"MathUtil\"].radianToDegree(Math.atan(this._filmHeight / (val * 2)));\n    }\n    get focalLength() {\n        return this._focalLength;\n    }\n    set zFar(val) {\n        this._parameters.y = val;\n    }\n    set zFarInner(val) {\n        this._parametersInner.y = val;\n    }\n    get zFarInner() {\n        return this._parametersInner.y;\n    }\n    get zFar() {\n        return this._parameters.y;\n    }\n    setFovyAndChangeFilmSize(degree) {\n        this._parameters.z = degree;\n        this._filmHeight = 2 * this.focalLength * Math.tan(_math_MathUtil__WEBPACK_IMPORTED_MODULE_17__[\"MathUtil\"].degreeToRadian(degree) / 2);\n        this._filmWidth = this._filmHeight * this.aspect;\n    }\n    setFovyAndChangeFocalLength(degree) {\n        this._parameters.z = degree;\n        this._focalLength = this._filmHeight / 2 / Math.tan(_math_MathUtil__WEBPACK_IMPORTED_MODULE_17__[\"MathUtil\"].degreeToRadian(degree) / 2);\n    }\n    get fovy() {\n        return this._parameters.z;\n    }\n    set fovyInner(val) {\n        this._parametersInner.z = val;\n    }\n    set aspect(val) {\n        this._parameters.w = val;\n        this._filmWidth = this._filmHeight * val;\n    }\n    get aspect() {\n        return this._parameters.w;\n    }\n    set xMag(val) {\n        this._parameters.z = val;\n    }\n    get xMag() {\n        return this._parameters.z;\n    }\n    set yMag(val) {\n        this._parameters.w = val;\n    }\n    get yMag() {\n        return this._parameters.w;\n    }\n    static get componentTID() {\n        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__[\"WellKnownComponentTIDs\"].CameraComponentTID;\n    }\n    $logic() {\n        const cameraControllerComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _CameraControllerComponent__WEBPACK_IMPORTED_MODULE_18__[\"default\"]);\n        if (cameraControllerComponent == null) {\n            this.eyeInner = this.eye;\n            this.directionInner = this.direction;\n            this.upInner = this.up;\n            this.cornerInner = this.corner;\n            this.parametersInner = this.parameters;\n        }\n        else {\n            this._parametersInner.w = this.parameters.w;\n        }\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_10__[\"ProcessStage\"].PreRender);\n    }\n    calcProjectionMatrix() {\n        const zNear = this._parametersInner.x;\n        const zFar = this._parametersInner.y;\n        if (this.type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_4__[\"CameraType\"].Perspective) {\n            const fovy = this._parametersInner.z;\n            const aspect = this._parametersInner.w;\n            var yscale = 1.0 / Math.tan((0.5 * fovy * Math.PI) / 180);\n            var xscale = yscale / aspect;\n            this._projectionMatrix.setComponents(xscale, 0, 0, 0, 0, yscale, 0, 0, 0, 0, -(zFar + zNear) / (zFar - zNear), -(2.0 * zFar * zNear) / (zFar - zNear), 0, 0, -1, 0);\n        }\n        else if (this.type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_4__[\"CameraType\"].Orthographic) {\n            const xmag = this._parametersInner.z;\n            const ymag = this._parametersInner.w;\n            this._projectionMatrix.setComponents(1 / xmag, 0.0, 0.0, 0, 0.0, 1 / ymag, 0.0, 0, 0.0, 0.0, -2 / (zFar - zNear), -(zFar + zNear) / (zFar - zNear), 0.0, 0.0, 0.0, 1.0);\n        }\n        else {\n            const left = this._cornerInner.x;\n            const right = this._cornerInner.y;\n            const top = this._cornerInner.z;\n            const bottom = this._cornerInner.w;\n            this._projectionMatrix.setComponents(2 * zNear / (right - left), 0.0, (right + left) / (right - left), 0.0, 0.0, 2 * zNear / (top - bottom), (top + bottom) / (top - bottom), 0.0, 0.0, 0.0, -(zFar + zNear) / (zFar - zNear), -1 * 2 * zFar * zNear / (zFar - zNear), 0.0, 0.0, -1.0, 0.0);\n        }\n        return this._projectionMatrix;\n    }\n    get projectionMatrix() {\n        return this._projectionMatrix;\n    }\n    calcViewMatrix() {\n        const eye = this.eyeInner;\n        const f = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].normalize(_math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subtract(this._directionInner, eye));\n        const s = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].normalize(_math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].cross(f, this._upInner));\n        const u = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].cross(s, f);\n        this._viewMatrix.setComponents(s.x, s.y, s.z, -_math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dotProduct(s, eye), u.x, u.y, u.z, -_math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dotProduct(u, eye), -f.x, -f.y, -f.z, _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dotProduct(f, eye), 0, 0, 0, 1);\n        _math_Matrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"].invertTo(this.__sceneGraphComponent.worldMatrixInner, CameraComponent.invertedMatrix44);\n        const invertWorldMatrix = CameraComponent.invertedMatrix44;\n        this._viewMatrix.multiply(invertWorldMatrix);\n        return this._viewMatrix;\n    }\n    get viewMatrix() {\n        return this._viewMatrix;\n    }\n    get viewProjectionMatrix() {\n        return _math_Matrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"].multiply(this._projectionMatrix, this._viewMatrix);\n    }\n    $create({ strategy }) {\n        if (this.__sceneGraphComponent != null) {\n            return;\n        }\n        this.__sceneGraphComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_10__[\"ProcessStage\"].Logic);\n    }\n    $prerender() {\n        this.calcProjectionMatrix();\n        this.calcViewMatrix();\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_10__[\"ProcessStage\"].Logic);\n    }\n    setValuesToGlobalDataRepository() {\n        CameraComponent.__globalDataRepository.setValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__[\"ShaderSemantics\"].ViewMatrix, this.componentSID, this.viewMatrix);\n        CameraComponent.__globalDataRepository.setValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__[\"ShaderSemantics\"].ProjectionMatrix, this.componentSID, this.projectionMatrix);\n        CameraComponent.__globalDataRepository.setValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__[\"ShaderSemantics\"].ViewPosition, this.componentSID, this.worldPosition);\n    }\n    get worldPosition() {\n        this.__sceneGraphComponent.worldMatrixInner.multiplyVector3To(this.eyeInner, CameraComponent.returnVector3);\n        return CameraComponent.returnVector3;\n    }\n    updateFrustum() {\n        this.__frustum.update(this.viewMatrix, this.projectionMatrix);\n    }\n    get frustum() {\n        return this.__frustum;\n    }\n}\nCameraComponent.__main = -1;\nCameraComponent.invertedMatrix44 = new _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__[\"default\"]([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nCameraComponent.returnVector3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__[\"default\"].zero();\nCameraComponent.__globalDataRepository = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_15__[\"default\"].getInstance();\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].registerComponentClass(CameraComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/CameraComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/CameraControllerComponent.ts":
/*!****************************************************************!*\
  !*** ./src/foundation/components/CameraControllerComponent.ts ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CameraControllerComponent; });\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _CameraComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _cameras_OrbitCameraController__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../cameras/OrbitCameraController */ \"./src/foundation/cameras/OrbitCameraController.ts\");\n/* harmony import */ var _cameras_WalkThroughCameraController__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../cameras/WalkThroughCameraController */ \"./src/foundation/cameras/WalkThroughCameraController.ts\");\n/* harmony import */ var _definitions_CameraControllerType__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../definitions/CameraControllerType */ \"./src/foundation/definitions/CameraControllerType.ts\");\n\n\n\n\n\n\n\n\nclass CameraControllerComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(entityUid, componentSid, entityRepository) {\n        super(entityUid, componentSid, entityRepository);\n        this.__cameraController = new _cameras_OrbitCameraController__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n    }\n    set type(type) {\n        this.__cameraController.unregisterEventListeners();\n        if (type === _definitions_CameraControllerType__WEBPACK_IMPORTED_MODULE_7__[\"CameraControllerType\"].Orbit) {\n            this.__cameraController = new _cameras_OrbitCameraController__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n        }\n        else if (type === _definitions_CameraControllerType__WEBPACK_IMPORTED_MODULE_7__[\"CameraControllerType\"].WalkThrough) {\n            this.__cameraController = new _cameras_WalkThroughCameraController__WEBPACK_IMPORTED_MODULE_6__[\"default\"]();\n        }\n        else {\n            console.warn('Not support type!');\n        }\n    }\n    $create() {\n        this.__cameraComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _CameraComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__[\"ProcessStage\"].Logic);\n    }\n    $logic() {\n        if (this.__cameraController) {\n            this.__cameraController.logic(this.__cameraComponent);\n        }\n    }\n    get controller() {\n        return this.__cameraController;\n    }\n    static get componentTID() {\n        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_4__[\"WellKnownComponentTIDs\"].CameraControllerComponentTID;\n    }\n}\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_3__[\"default\"].registerComponentClass(CameraControllerComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/CameraControllerComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/LightComponent.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/components/LightComponent.ts ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return LightComponent; });\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _definitions_LightType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/LightType */ \"./src/foundation/definitions/LightType.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/GlobalDataRepository */ \"./src/foundation/core/GlobalDataRepository.ts\");\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/MutableVector4 */ \"./src/foundation/math/MutableVector4.ts\");\n/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../math/VectorN */ \"./src/foundation/math/VectorN.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\nclass LightComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor(entityUid, componentSid, entityRepository) {\n        super(entityUid, componentSid, entityRepository);\n        this.type = _definitions_LightType__WEBPACK_IMPORTED_MODULE_3__[\"LightType\"].Point;\n        this.__intensity = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](1, 1, 1);\n        this.__initialdirection = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 1, 0);\n        this.__direction = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 1, 0);\n        this.spotExponent = 1.0;\n        this.spotCutoff = 30; // in degree\n        this.range = -1;\n        this.maxNumberOfComponent = Math.max(10, Math.floor(_core_Config__WEBPACK_IMPORTED_MODULE_7__[\"default\"].maxEntityNumber / 100));\n    }\n    static get componentTID() {\n        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__[\"WellKnownComponentTIDs\"].LightComponentTID;\n    }\n    $create() {\n        this.__sceneGraphComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_5__[\"default\"]);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_6__[\"ProcessStage\"].Load);\n    }\n    $load() {\n        const lightComponents = LightComponent.__componentRepository.getComponentsWithType(LightComponent);\n        const currentComponentSIDs = LightComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__[\"ShaderSemantics\"].CurrentComponentSIDs, 0);\n        currentComponentSIDs.v[_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__[\"WellKnownComponentTIDs\"].LightComponentTID] = lightComponents.length;\n        LightComponent.__lightPositioins = LightComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__[\"ShaderSemantics\"].LightPosition, 0);\n        LightComponent.__lightDirections = LightComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__[\"ShaderSemantics\"].LightDirection, 0);\n        LightComponent.__lightIntensities = LightComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__[\"ShaderSemantics\"].LightIntensity, 0);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_6__[\"ProcessStage\"].Logic);\n    }\n    $logic() {\n        this.__direction = this.__sceneGraphComponent.normalMatrixInner.multiplyVector(this.__initialdirection);\n        LightComponent.__lightDirections.v[4 * this.componentSID + 0] = this.__direction.x;\n        LightComponent.__lightDirections.v[4 * this.componentSID + 1] = this.__direction.y;\n        LightComponent.__lightDirections.v[4 * this.componentSID + 2] = this.__direction.z;\n        LightComponent.__lightDirections.v[4 * this.componentSID + 3] = 0;\n        const lightPosition = this.__sceneGraphComponent.worldPosition;\n        LightComponent.__lightPositioins.v[4 * this.componentSID + 0] = lightPosition.x;\n        LightComponent.__lightPositioins.v[4 * this.componentSID + 1] = lightPosition.y;\n        LightComponent.__lightPositioins.v[4 * this.componentSID + 2] = lightPosition.z;\n        LightComponent.__lightPositioins.v[4 * this.componentSID + 3] = this.type.index;\n        LightComponent.__lightIntensities.v[4 * this.componentSID + 0] = this.__intensity.x;\n        LightComponent.__lightIntensities.v[4 * this.componentSID + 1] = this.__intensity.y;\n        LightComponent.__lightIntensities.v[4 * this.componentSID + 2] = this.__intensity.z;\n        LightComponent.__lightIntensities.v[4 * this.componentSID + 3] = 0;\n    }\n    get direction() {\n        return this.__direction;\n    }\n    set intensity(value) {\n        this.__intensity = value;\n    }\n    get intensity() {\n        return this.__intensity;\n    }\n}\nLightComponent.__componentRepository = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\nLightComponent.__globalDataRepository = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getInstance();\nLightComponent.__tmp_vec4 = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_10__[\"default\"].zero();\nLightComponent.__lightPositioins = new _math_VectorN__WEBPACK_IMPORTED_MODULE_11__[\"default\"](new Float32Array(0));\nLightComponent.__lightDirections = new _math_VectorN__WEBPACK_IMPORTED_MODULE_11__[\"default\"](new Float32Array(0));\nLightComponent.__lightIntensities = new _math_VectorN__WEBPACK_IMPORTED_MODULE_11__[\"default\"](new Float32Array(0));\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].registerComponentClass(LightComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/LightComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/MeshComponent.ts":
/*!****************************************************!*\
  !*** ./src/foundation/components/MeshComponent.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MeshComponent; });\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _core_Entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/Entity */ \"./src/foundation/core/Entity.ts\");\n/* harmony import */ var _BlendShapeComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./BlendShapeComponent */ \"./src/foundation/components/BlendShapeComponent.ts\");\n/* harmony import */ var _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../math/MathClassUtil */ \"./src/foundation/math/MathClassUtil.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\nclass MeshComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor(entityUid, componentSid, entityRepository) {\n        super(entityUid, componentSid, entityRepository);\n        this.__viewDepth = -Number.MAX_VALUE;\n        this.isPickable = true;\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Create);\n    }\n    static get componentTID() {\n        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__[\"WellKnownComponentTIDs\"].MeshComponentTID;\n    }\n    setMesh(mesh) {\n        this.__mesh = mesh;\n        mesh._attatchedEntityUID = this.entityUID;\n    }\n    unsetMesh() {\n        if (this.__mesh == null) {\n            return false;\n        }\n        this.__mesh._attatchedEntityUID = _core_Entity__WEBPACK_IMPORTED_MODULE_6__[\"default\"].invalidEntityUID;\n        this.__mesh = void 0;\n        return true;\n    }\n    get mesh() {\n        return this.__mesh;\n    }\n    $create() {\n        this.__blendShapeComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _BlendShapeComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"]);\n        this.__sceneGraphComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_8__[\"default\"]);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Load);\n    }\n    $load() {\n        if (this.__mesh == null) {\n            return;\n        }\n        //    this.__mesh!.makeVerticesSepareted();\n        this.__mesh.__calcTangents();\n        this.__mesh._calcArenbergInverseMatrices();\n        // this.__mesh.__initMorphPrimitives();\n        // this.__mesh!.__calcFaceNormals();\n        if (this.__blendShapeComponent && this.__blendShapeComponent.weights.length > 0) {\n            this.__mesh.__calcBaryCentricCoord();\n        }\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Logic);\n    }\n    $logic() {\n        if (this.__mesh == null) {\n            return;\n        }\n        // this.__mesh.__calcMorphPrimitives();\n    }\n    set weights(value) {\n        if (this.__mesh == null) {\n            return;\n        }\n        //    this.__mesh!.makeVerticesSepareted();\n        this.__mesh.weights = value;\n    }\n    calcViewDepth(cameraComponent) {\n        const viewMatrix = cameraComponent.viewMatrix;\n        const centerPosition_inLocal = new _math_Vector4__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.__mesh.AABB.centerPoint);\n        const centerPosition_inView = viewMatrix.multiplyVector(centerPosition_inLocal);\n        this.__viewDepth = centerPosition_inView.z;\n        return this.__viewDepth;\n    }\n    get viewDepth() {\n        return this.__viewDepth;\n    }\n    static alertNoMeshSet(meshComponent) {\n        console.debug('No mesh is set on this MeshComponent:' + meshComponent.componentSID);\n    }\n    castRay(srcPointInWorld, directionInWorld, dotThreshold = 0) {\n        if (this.__mesh) {\n            let srcPointInLocal = srcPointInWorld;\n            let directionInLocal = directionInWorld;\n            if (this.__sceneGraphComponent) {\n                const invWorldMatrix = _math_Matrix44__WEBPACK_IMPORTED_MODULE_9__[\"default\"].invert(this.__sceneGraphComponent.worldMatrixInner);\n                srcPointInLocal = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](invWorldMatrix.multiplyVector(new _math_Vector4__WEBPACK_IMPORTED_MODULE_5__[\"default\"](srcPointInWorld)));\n                const distVecInWorld = _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].add(srcPointInWorld, directionInWorld);\n                const distVecInLocal = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](invWorldMatrix.multiplyVector(new _math_Vector4__WEBPACK_IMPORTED_MODULE_5__[\"default\"](distVecInWorld)));\n                directionInLocal = _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].normalize(_math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].subtract(distVecInLocal, srcPointInLocal));\n                const { t, intersectedPosition } = this.__mesh.castRay(srcPointInLocal, directionInLocal, dotThreshold);\n                let intersectPositionInWorld = null;\n                if (t >= 0) {\n                    intersectPositionInWorld = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this.__sceneGraphComponent.worldMatrixInner.multiplyVector(new _math_Vector4__WEBPACK_IMPORTED_MODULE_5__[\"default\"](intersectedPosition)));\n                }\n                return { t, intersectedPositionInWorld: intersectPositionInWorld };\n            }\n        }\n        return { t: -1, intersectedPositionInWorld: undefined };\n    }\n    castRayFromScreen(x, y, camera, viewport, dotThreshold = 0) {\n        if (this.__mesh) {\n            if (this.__sceneGraphComponent) {\n                const invPVW = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].multiply(camera.projectionMatrix, _math_Matrix44__WEBPACK_IMPORTED_MODULE_9__[\"default\"].multiply(camera.viewMatrix, this.__sceneGraphComponent.worldMatrixInner)).invert();\n                const srcPointInLocal = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_11__[\"default\"].unProject(new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](x, y, 0), invPVW, viewport);\n                const distVecInLocal = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_11__[\"default\"].unProject(new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](x, y, 1), invPVW, viewport);\n                const directionInLocal = _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].normalize(_math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].subtract(distVecInLocal, srcPointInLocal));\n                const { t, intersectedPosition } = this.__mesh.castRay(srcPointInLocal, directionInLocal, dotThreshold);\n                let intersectPositionInWorld = null;\n                if (t >= 0) {\n                    intersectPositionInWorld = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this.__sceneGraphComponent.worldMatrixInner.multiplyVector(new _math_Vector4__WEBPACK_IMPORTED_MODULE_5__[\"default\"](intersectedPosition)));\n                }\n                return { t, intersectedPositionInWorld: intersectPositionInWorld };\n            }\n        }\n        return { t: -1, intersectedPositionInWorld: undefined };\n    }\n}\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].registerComponentClass(MeshComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/MeshComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/MeshRendererComponent.ts":
/*!************************************************************!*\
  !*** ./src/foundation/components/MeshRendererComponent.ts ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MeshRendererComponent; });\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _MeshComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _CameraComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _system_ModuleManager__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../system/ModuleManager */ \"./src/foundation/system/ModuleManager.ts\");\n/* harmony import */ var _definitions_visibility__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../definitions/visibility */ \"./src/foundation/definitions/visibility.ts\");\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _materials_AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../materials/AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass MeshRendererComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor(entityUid, componentSid, entityRepository) {\n        super(entityUid, componentSid, entityRepository);\n        this.diffuseCubeMapContribution = 1.0;\n        this.specularCubeMapContribution = 1.0;\n        this.rotationOfCubeMap = 0;\n        this._readyForRendering = false;\n        this.__sceneGraphComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\n        const componentRepository = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        const cameraComponents = componentRepository.getComponentsWithType(_CameraComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n        if (cameraComponents) {\n            MeshRendererComponent.__cameraComponent = cameraComponents[0];\n        }\n    }\n    static get componentTID() {\n        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__[\"WellKnownComponentTIDs\"].MeshRendererComponentTID;\n    }\n    static get firstTranparentIndex() {\n        return MeshRendererComponent.__firstTransparentIndex;\n    }\n    static get lastTransparentIndex() {\n        return MeshRendererComponent.__lastTransparentIndex;\n    }\n    $create({ processApproach }) {\n        if (this.__meshComponent != null) {\n            return;\n        }\n        this.__meshComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _MeshComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n        const moduleManager = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_14__[\"default\"].getInstance();\n        const moduleName = 'webgl';\n        const webglModule = moduleManager.getModule(moduleName);\n        this.__webglRenderingStrategy = webglModule.getRenderingStrategy(processApproach);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Load);\n    }\n    $load() {\n        this.__webglRenderingStrategy.$load(this.__meshComponent);\n        if (this.diffuseCubeMap && !this.diffuseCubeMap.startedToLoad) {\n            this.diffuseCubeMap.loadTextureImagesAsync();\n        }\n        if (this.specularCubeMap && !this.specularCubeMap.startedToLoad) {\n            this.specularCubeMap.loadTextureImagesAsync();\n        }\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].PreRender);\n    }\n    $prerender() {\n        this.__webglRenderingStrategy.$prerender(this.__meshComponent, this, MeshRendererComponent.__instanceIDBufferUid);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Render);\n    }\n    $render({ i, renderPass, renderPassTickCount }) {\n        if (this.__webglRenderingStrategy.$render == null) {\n            return;\n        }\n        const entity = this.__entityRepository.getEntity(this.__entityUid);\n        this.__webglRenderingStrategy.$render(i, this.__meshComponent, this.__sceneGraphComponent.worldMatrixInner, this.__sceneGraphComponent.normalMatrixInner, entity, renderPass, renderPassTickCount, this.diffuseCubeMap, this.specularCubeMap);\n        if (this.__meshComponent.mesh) {\n            if (this.__meshComponent.mesh.weights.length > 0) {\n                this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].PreRender);\n            }\n        }\n        else {\n            _MeshComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"].alertNoMeshSet(this.__meshComponent);\n        }\n    }\n    static common_$load({ processApproach }) {\n        const moduleManager = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_14__[\"default\"].getInstance();\n        const moduleName = 'webgl';\n        const webglModule = moduleManager.getModule(moduleName);\n        MeshRendererComponent.__staticWebglModule = webglModule;\n        // Strategy\n        MeshRendererComponent.__webGLStrategy = webglModule.getRenderingStrategy(processApproach);\n        // ResourceRepository\n        MeshRendererComponent.__webglResourceRepository = webglModule.WebGLResourceRepository.getInstance();\n        _materials_AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_17__[\"default\"].initDefaultTextures();\n    }\n    static common_$prerender() {\n        const gl = MeshRendererComponent.__webglResourceRepository.currentWebGLContextWrapper;\n        if (gl == null) {\n            throw new Error('No WebGLRenderingContext!');\n        }\n        MeshRendererComponent.__webGLStrategy.common_$prerender();\n        if (MeshRendererComponent.__isReady()) {\n            return 0;\n        }\n        MeshRendererComponent.__instanceIDBufferUid = MeshRendererComponent.__setupInstanceIDBuffer();\n        return MeshRendererComponent.__instanceIDBufferUid;\n    }\n    static __isReady() {\n        if (MeshRendererComponent.__instanceIDBufferUid !== _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__[\"default\"].InvalidCGAPIResourceUid) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    static __setupInstanceIDBuffer() {\n        if (MeshRendererComponent.__instanceIdAccessor == null) {\n            const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_11__[\"BufferUse\"].CPUGeneric);\n            const count = _core_Config__WEBPACK_IMPORTED_MODULE_10__[\"default\"].maxEntityNumber;\n            const bufferView = buffer.takeBufferView({ byteLengthToNeed: 4 /*byte*/ * count, byteStride: 0, isAoS: false });\n            MeshRendererComponent.__instanceIdAccessor = bufferView.takeAccessor({ compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_12__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_13__[\"ComponentType\"].Float, count: count });\n        }\n        const meshComponents = MeshRendererComponent.__componentRepository.getComponentsWithType(_MeshComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n        if (meshComponents == null) {\n            return _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__[\"default\"].InvalidCGAPIResourceUid;\n        }\n        for (var i = 0; i < meshComponents.length; i++) {\n            MeshRendererComponent.__instanceIdAccessor.setScalar(i, meshComponents[i].entityUID, {});\n        }\n        return MeshRendererComponent.__webglResourceRepository.createVertexBuffer(MeshRendererComponent.__instanceIdAccessor);\n    }\n    static common_$render({ renderPass, processStage, renderPassTickCount }) {\n        MeshRendererComponent.__cameraComponent = renderPass.cameraComponent;\n        if (MeshRendererComponent.__cameraComponent == null) {\n            MeshRendererComponent.__cameraComponent = MeshRendererComponent.__componentRepository.getComponent(_CameraComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"], _CameraComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].main);\n        }\n        let viewMatrix = MeshRendererComponent.__tmp_indentityMatrix;\n        let projectionMatrix = MeshRendererComponent.__tmp_indentityMatrix;\n        if (MeshRendererComponent.__cameraComponent) {\n            viewMatrix = MeshRendererComponent.__cameraComponent.viewMatrix;\n            projectionMatrix = MeshRendererComponent.__cameraComponent.projectionMatrix;\n        }\n        const meshComponentSids = _core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__componentsOfProcessStages.get(processStage);\n        const meshComponents = MeshRendererComponent.__componentRepository._getComponents(_MeshComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n        MeshRendererComponent.__webGLStrategy.common_$render(meshComponentSids, meshComponents, viewMatrix, projectionMatrix, renderPass, renderPassTickCount);\n    }\n    static sort_$render(renderPass) {\n        if (MeshRendererComponent.__manualTransparentSids == null) {\n            const sortedMeshComponentSids = MeshRendererComponent.sort_$render_inner(void 0, renderPass);\n            // const sortedMeshComponentSids = MeshRendererComponent.sort_$render_inner();\n            return sortedMeshComponentSids;\n        }\n        else {\n            const sortedMeshComponentSids = MeshRendererComponent.sort_$render_inner(MeshRendererComponent.__manualTransparentSids, renderPass);\n            // const sortedMeshComponentSids = MeshRendererComponent.sort_$render_inner(MeshRendererComponent.__manualTransparentSids);\n            return sortedMeshComponentSids;\n        }\n        return [];\n    }\n    static sort_$render_inner(transparentMeshComponentSids_ = [], renderPass) {\n        const sceneGraphComponents = renderPass.sceneTopLevelGraphComponents;\n        let meshComponents = [];\n        const componentRepository = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        let cameraComponent = renderPass.cameraComponent;\n        if (cameraComponent == null) {\n            cameraComponent = componentRepository.getComponent(_CameraComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"], _CameraComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].main);\n        }\n        if (cameraComponent && MeshRendererComponent.isViewFrustumCullingEnabled) {\n            cameraComponent.updateFrustum();\n            const frustum = cameraComponent.frustum;\n            const frustumCullingRecursively = (sg) => {\n                const result = frustum.culling(sg);\n                if (result === _definitions_visibility__WEBPACK_IMPORTED_MODULE_15__[\"Visibility\"].Visible) {\n                    const sgs = _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_4__[\"default\"].flattenHierarchy(sg, false);\n                    for (let sg of sgs) {\n                        const mesh = sg.entity.getMesh();\n                        if (mesh) {\n                            meshComponents.push(mesh);\n                        }\n                    }\n                }\n                else if (result === _definitions_visibility__WEBPACK_IMPORTED_MODULE_15__[\"Visibility\"].Neutral) {\n                    const children = sg.children;\n                    const mesh = sg.entity.getMesh();\n                    if (mesh) {\n                        meshComponents.push(mesh);\n                    }\n                    for (let child of children) {\n                        frustumCullingRecursively(child);\n                    }\n                }\n            };\n            for (let tlsg of sceneGraphComponents) {\n                frustumCullingRecursively(tlsg);\n            }\n        }\n        else {\n            meshComponents = renderPass.meshComponents;\n        }\n        meshComponents = Array.from(new Set(meshComponents));\n        const opaqueAndTransparentPartiallyMeshComponentSids = [];\n        const transparentPartiallyMeshComponents = [];\n        const transparentCompletelyMeshComponents = [];\n        for (let i = 0; i < meshComponents.length; i++) {\n            if (!meshComponents[i].entity.getSceneGraph().isVisible) {\n                continue;\n            }\n            const meshRendererComponent = meshComponents[i].entity.getMeshRenderer();\n            if (meshRendererComponent.currentProcessStage === _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Render) {\n                const meshComponent = meshComponents[i];\n                if (meshComponent.mesh) {\n                    if (transparentMeshComponentSids_.length === 0 && meshComponent.mesh.isBlendPartially()) {\n                        transparentPartiallyMeshComponents.push(meshComponent);\n                        opaqueAndTransparentPartiallyMeshComponentSids.push(meshComponent.componentSID);\n                    }\n                    else if (transparentMeshComponentSids_.length === 0 && meshComponent.mesh.isAllBlend()) {\n                        transparentCompletelyMeshComponents.push(meshComponent);\n                    }\n                    if (meshComponent.mesh.isOpaque()) {\n                        opaqueAndTransparentPartiallyMeshComponentSids.push(meshComponent.componentSID);\n                    }\n                    else {\n                        if (cameraComponent) {\n                            meshComponent.calcViewDepth(cameraComponent);\n                        }\n                    }\n                }\n                else {\n                    _MeshComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"].alertNoMeshSet(meshComponent);\n                }\n            }\n        }\n        // Sort transparent meshes\n        const transparentPartiallyOrAllMeshComponents = transparentPartiallyMeshComponents.concat(transparentCompletelyMeshComponents);\n        transparentPartiallyOrAllMeshComponents.sort(function (a, b) {\n            if (a.viewDepth < b.viewDepth)\n                return -1;\n            if (a.viewDepth > b.viewDepth)\n                return 1;\n            return 0;\n        });\n        let transparentMeshComponentSids;\n        if (transparentMeshComponentSids_.length === 0) {\n            transparentMeshComponentSids = transparentPartiallyOrAllMeshComponents.map((meshComponent) => {\n                return meshComponent.componentSID;\n            });\n        }\n        else {\n            transparentMeshComponentSids = transparentMeshComponentSids_;\n        }\n        MeshRendererComponent.__firstTransparentIndex = opaqueAndTransparentPartiallyMeshComponentSids.length;\n        // Concat opaque and transparent meshes\n        const sortedMeshComponentSids = opaqueAndTransparentPartiallyMeshComponentSids.concat(transparentMeshComponentSids);\n        MeshRendererComponent.__lastTransparentIndex = sortedMeshComponentSids.length - 1;\n        // Add terminator\n        sortedMeshComponentSids.push(_core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"].invalidComponentSID);\n        return sortedMeshComponentSids;\n    }\n    static set manualTransparentSids(sids) {\n        MeshRendererComponent.__manualTransparentSids = sids;\n    }\n    static set manualTransparentEntityNames(names) {\n        MeshRendererComponent.__manualTransparentSids = [];\n        for (let name of names) {\n            const entity = _core_RnObject__WEBPACK_IMPORTED_MODULE_16__[\"default\"].getRnObjectByName(name);\n            if (entity) {\n                const meshComponent = entity.getMesh();\n                if (meshComponent) {\n                    const mesh = meshComponent.mesh;\n                    if (mesh) {\n                        if (!mesh.isOpaque()) {\n                            MeshRendererComponent.__manualTransparentSids.push(meshComponent.componentSID);\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\nMeshRendererComponent.__shaderProgramHandleOfPrimitiveObjectUids = new Map();\nMeshRendererComponent.__componentRepository = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\nMeshRendererComponent.__instanceIDBufferUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__[\"default\"].InvalidCGAPIResourceUid;\nMeshRendererComponent.__tmp_indentityMatrix = _math_Matrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"].identity();\nMeshRendererComponent.__firstTransparentIndex = -1;\nMeshRendererComponent.__lastTransparentIndex = -1;\nMeshRendererComponent.isViewFrustumCullingEnabled = true;\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].registerComponentClass(MeshRendererComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/MeshRendererComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/PhysicsComponent.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/components/PhysicsComponent.ts ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return PhysicsComponent; });\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../physics/VRMSpringBonePhysicsStrategy */ \"./src/foundation/physics/VRMSpringBonePhysicsStrategy.ts\");\n\n\n\n\n\n\n\n\nclass PhysicsComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor(entityUid, componentSid, entityComponent) {\n        super(entityUid, componentSid, entityComponent);\n        this.__weights = [];\n        this._dummy = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dummy();\n        this.__strategy = new _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_7__[\"default\"]();\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__[\"BufferUse\"].CPUGeneric, 'dummy', _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, [0, 0, 0]);\n        this.submitToAllocation(this.maxNumberOfComponent);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_6__[\"ProcessStage\"].Create);\n    }\n    static get componentTID() {\n        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_4__[\"WellKnownComponentTIDs\"].PhysicsComponentTID;\n    }\n    $create() {\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_6__[\"ProcessStage\"].Logic);\n    }\n    $logic() {\n    }\n    static common_$logic() {\n        _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_7__[\"default\"].update();\n    }\n    get strategy() {\n        return this.__strategy;\n    }\n}\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__[\"default\"].registerComponentClass(PhysicsComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/PhysicsComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/SceneGraphComponent.ts":
/*!**********************************************************!*\
  !*** ./src/foundation/components/SceneGraphComponent.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SceneGraphComponent; });\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../math/MutableMatrix33 */ \"./src/foundation/math/MutableMatrix33.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_AABB__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/AABB */ \"./src/foundation/math/AABB.ts\");\n/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n/* harmony import */ var _AnimationComponent__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./AnimationComponent */ \"./src/foundation/components/AnimationComponent.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass SceneGraphComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor(entityUid, componentSid, entityRepository) {\n        super(entityUid, componentSid, entityRepository);\n        this.__children = [];\n        this._worldMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"].dummy();\n        this._normalMatrix = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__[\"default\"].dummy();\n        this.__isWorldMatrixUpToDate = false;\n        this.__isNormalMatrixUpToDate = false;\n        this.__tmpMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"].identity();\n        this.__worldAABB = new _math_AABB__WEBPACK_IMPORTED_MODULE_10__[\"default\"]();\n        this.__isWorldAABBDirty = true;\n        this.isVisible = true;\n        // Skeletal\n        this.isRootJoint = false;\n        this.jointIndex = -1;\n        const thisClass = SceneGraphComponent;\n        SceneGraphComponent.__sceneGraphs.push(this);\n        //    this.__currentProcessStage = ProcessStage.Logic;\n        this.isAbleToBeParent = false;\n        this.beAbleToBeParent(true);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__[\"BufferUse\"].GPUInstanceData, 'worldMatrix', _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__[\"BufferUse\"].GPUInstanceData, 'normalMatrix', _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, [1, 0, 0, 0, 1, 0, 0, 0, 1]);\n        this.submitToAllocation(this.maxNumberOfComponent);\n    }\n    static getTopLevelComponents() {\n        return SceneGraphComponent.__sceneGraphs.filter((sg) => {\n            return sg.isTopLevel;\n        });\n    }\n    isJoint() {\n        if (this.jointIndex >= 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    static get componentTID() {\n        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_4__[\"WellKnownComponentTIDs\"].SceneGraphComponentTID;\n    }\n    beAbleToBeParent(flag) {\n        this.isAbleToBeParent = flag;\n    }\n    setWorldMatrixDirty() {\n        this.__isWorldMatrixUpToDate = false;\n        this.__isNormalMatrixUpToDate = false;\n        // SceneGraphComponent._isAllUpdate = false;\n        this.__isWorldAABBDirty = true;\n        this.children.forEach((child) => {\n            child.setWorldMatrixDirty();\n        });\n    }\n    addChild(sg) {\n        if (this.__children != null) {\n            sg.__parent = this;\n            this.__children.push(sg);\n        }\n        else {\n            console.error('This is not allowed to have children.');\n        }\n    }\n    applyFunctionRecursively(func, args) {\n        for (let child of this.__children) {\n            func(child, args);\n            child.applyFunctionRecursively(func, args);\n        }\n    }\n    get isTopLevel() {\n        return this.__parent == null;\n    }\n    get children() {\n        return this.__children;\n    }\n    get parent() {\n        return this.__parent;\n    }\n    get worldMatrixInner() {\n        if (!this.__isWorldMatrixUpToDate) {\n            // this._worldMatrix.identity();\n            this._worldMatrix.copyComponents(this.calcWorldMatrixRecursively(false)); //this.isJoint()));\n            this.__isWorldMatrixUpToDate = true;\n        }\n        return this._worldMatrix;\n    }\n    get worldMatrix() {\n        return this.worldMatrixInner.clone();\n    }\n    get normalMatrixInner() {\n        if (!this.__isNormalMatrixUpToDate) {\n            _math_Matrix44__WEBPACK_IMPORTED_MODULE_2__[\"default\"].invertTo(this.worldMatrixInner, SceneGraphComponent.invertedMatrix44);\n            this._normalMatrix.copyComponents(SceneGraphComponent.invertedMatrix44.transpose());\n            this.__isNormalMatrixUpToDate = true;\n        }\n        return this._normalMatrix;\n    }\n    get normalMatrix() {\n        return this.normalMatrixInner.clone();\n    }\n    $create() {\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_6__[\"ProcessStage\"].Load);\n    }\n    $load() {\n        this.__animationComponent = this.entity.getComponent(_AnimationComponent__WEBPACK_IMPORTED_MODULE_12__[\"default\"]);\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_6__[\"ProcessStage\"].Logic);\n    }\n    $logic() {\n        //    this._worldMatrix.copyComponents(this.calcWorldMatrixRecursively(false));//this.isJoint()));\n        //    const world = this.worldMatrixInner;\n        this._worldMatrix.copyComponents(this.calcWorldMatrixRecursively(false)); //this.isJoint()));\n        const normal = this.normalMatrixInner;\n        //    const normal = this.normalMatrixInner;\n        // console.log(normal.toString());\n    }\n    static common_$prerender() {\n        // SceneGraphComponent._isAllUpdate = true;\n    }\n    isWorldMatrixUpToDateRecursively() {\n        if (this.__isWorldMatrixUpToDate) {\n            if (this.__parent) {\n                let result = this.__parent.isWorldMatrixUpToDateRecursively();\n                return result;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    }\n    calcWorldMatrixRecursively(isJointMode) {\n        const entity = this.__entityRepository.getEntity(this.__entityUid);\n        const transform = entity.getTransform();\n        if (this.__isWorldMatrixUpToDate) {\n            return this._worldMatrix;\n        }\n        else {\n            const matrix = transform.matrixInner;\n            if (this.__parent == null || (isJointMode && this.__parent != null && !this.__parent.isJoint())) {\n                return matrix;\n            }\n            this.__tmpMatrix.copyComponents(matrix);\n            const matrixFromAncestorToParent = this.__parent.calcWorldMatrixRecursively(isJointMode);\n            this.__tmpMatrix.multiplyByLeft(matrixFromAncestorToParent);\n        }\n        return this.__tmpMatrix;\n    }\n    /**\n     * Collects children and itself from specified sceneGraphComponent.\n     * @param sceneGraphComponent collects children and itself from the sceneGraphComponent\n     * @param isJointMode collects joints only\n     */\n    static flattenHierarchy(sceneGraphComponent, isJointMode) {\n        const results = [];\n        if (!isJointMode || sceneGraphComponent.isJoint()) {\n            results.push(sceneGraphComponent);\n        }\n        if (sceneGraphComponent.isAbleToBeParent) {\n            const children = sceneGraphComponent.children;\n            for (let i = 0; i < children.length; i++) {\n                const hitChildren = this.flattenHierarchy(children[i], isJointMode);\n                Array.prototype.push.apply(results, hitChildren);\n            }\n        }\n        return results;\n    }\n    get worldPosition() {\n        const zeroVector = SceneGraphComponent.__originVector3;\n        this.worldMatrixInner.multiplyVector3To(zeroVector, SceneGraphComponent.returnVector3);\n        return SceneGraphComponent.returnVector3;\n    }\n    getWorldPositionOf(localPosition) {\n        return this.worldMatrixInner.multiplyVector3(localPosition);\n    }\n    getLocalPositionOf(worldPosition) {\n        return _math_Matrix44__WEBPACK_IMPORTED_MODULE_2__[\"default\"].invert(this.worldMatrixInner).multiplyVector3(worldPosition);\n    }\n    calcWorldAABB() {\n        const that = this;\n        this.__worldAABB.initialize();\n        var aabb = (function mergeAABBRecursively(elem, flg) {\n            const meshComponent = elem.entity.getMesh();\n            if (meshComponent != null && meshComponent.mesh != null) {\n                _math_AABB__WEBPACK_IMPORTED_MODULE_10__[\"default\"].multiplyMatrixTo(elem.worldMatrixInner, meshComponent.mesh.AABB, elem.__worldAABB);\n            }\n            var children = elem.children;\n            for (let i = 0; i < children.length; i++) {\n                var aabb = mergeAABBRecursively(children[i], true);\n                if (flg && elem.__animationComponent == null) {\n                    elem.worldAABB.mergeAABB(aabb);\n                }\n                else {\n                    elem.__worldAABB.mergeAABB(aabb);\n                }\n            }\n            return elem.__worldAABB;\n        })(this, false);\n        this.__worldAABB.mergeAABB(aabb);\n        return this.__worldAABB;\n    }\n    get worldAABB() {\n        if (this.__isWorldAABBDirty) {\n            this.calcWorldAABB();\n            this.__isWorldAABBDirty = false;\n        }\n        return this.__worldAABB;\n    }\n    setVisibilityRecursively(flag) {\n        this.isVisible = flag;\n        for (let child of this.__children) {\n            child.setVisibilityRecursively(flag);\n        }\n    }\n    castRay(srcPointInWorld, directionInWorld, dotThreshold = 0, ignoreMeshComponents = []) {\n        const collectedSgComponents = SceneGraphComponent.flattenHierarchy(this, false);\n        const meshComponents = [];\n        collectedSgComponents.filter((sg) => {\n            const mesh = sg.entity.getMesh();\n            if (mesh) {\n                meshComponents.push(mesh);\n            }\n        });\n        let rayDistance = Number.MAX_VALUE;\n        let intersectedPosition = null;\n        let selectedMeshComponent = null;\n        for (let meshComponent of meshComponents) {\n            if (!meshComponent.entity.getSceneGraph().isVisible) {\n                continue;\n            }\n            if (!meshComponent.isPickable) {\n                continue;\n            }\n            if (ignoreMeshComponents.indexOf(meshComponent) !== -1) {\n                continue;\n            }\n            let { t, intersectedPositionInWorld } = meshComponent.castRay(srcPointInWorld, directionInWorld, dotThreshold);\n            if (t < rayDistance) {\n                rayDistance = t;\n                intersectedPositionInWorld = intersectedPositionInWorld;\n                selectedMeshComponent = meshComponent;\n            }\n        }\n        if (rayDistance === Number.MAX_VALUE) {\n            rayDistance = -1;\n        }\n        return { intersectedPosition, rayDistance, selectedMeshComponent };\n    }\n    castRayFromScreen(x, y, camera, viewport, dotThreshold = 0, ignoreMeshComponents = []) {\n        const collectedSgComponents = SceneGraphComponent.flattenHierarchy(this, false);\n        const meshComponents = [];\n        collectedSgComponents.filter((sg) => {\n            const mesh = sg.entity.getMesh();\n            if (mesh) {\n                meshComponents.push(mesh);\n            }\n        });\n        let rayDistance = Number.MAX_VALUE;\n        let intersectedPosition = null;\n        let selectedMeshComponent = null;\n        for (let meshComponent of meshComponents) {\n            if (!meshComponent.entity.getSceneGraph().isVisible) {\n                continue;\n            }\n            if (!meshComponent.isPickable) {\n                continue;\n            }\n            if (ignoreMeshComponents.indexOf(meshComponent) !== -1) {\n                continue;\n            }\n            let { t, intersectedPositionInWorld } = meshComponent.castRayFromScreen(x, y, camera, viewport, dotThreshold);\n            if (t < rayDistance) {\n                rayDistance = t;\n                intersectedPositionInWorld = intersectedPositionInWorld;\n                selectedMeshComponent = meshComponent;\n            }\n        }\n        if (rayDistance === Number.MAX_VALUE) {\n            rayDistance = -1;\n        }\n        return { intersectedPosition, rayDistance, selectedMeshComponent };\n    }\n}\nSceneGraphComponent.__sceneGraphs = [];\nSceneGraphComponent._isAllUpdate = false;\nSceneGraphComponent.__originVector3 = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__[\"default\"].zero();\nSceneGraphComponent.returnVector3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_11__[\"default\"].zero();\nSceneGraphComponent.invertedMatrix44 = new _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"]([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].registerComponentClass(SceneGraphComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/SceneGraphComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/SkeletalComponent.ts":
/*!********************************************************!*\
  !*** ./src/foundation/components/SkeletalComponent.ts ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SkeletalComponent; });\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n/* harmony import */ var _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/MutableQuaterion */ \"./src/foundation/math/MutableQuaterion.ts\");\n/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/MutableVector4 */ \"./src/foundation/math/MutableVector4.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../core/GlobalDataRepository */ \"./src/foundation/core/GlobalDataRepository.ts\");\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../core/Config */ \"./src/foundation/core/Config.ts\");\n\n\n\n\n\n\n\n\n\n\n\nclass SkeletalComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor(entityUid, componentSid, entityRepository) {\n        super(entityUid, componentSid, entityRepository);\n        this._jointIndices = [];\n        this.__joints = [];\n        this._inverseBindMatrices = [];\n        this.isSkinning = true;\n        this.isOptimizingMode = true;\n        this.__boneCompressedInfo = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_6__[\"default\"].zero();\n        this.__qArray = new Float32Array(0);\n        this.__tArray = new Float32Array(0);\n        if (SkeletalComponent.__tookGlobalDataNum < _core_Config__WEBPACK_IMPORTED_MODULE_10__[\"default\"].maxSkeletonNumber) {\n            SkeletalComponent.__globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__[\"ShaderSemantics\"].BoneQuaternion);\n            SkeletalComponent.__globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__[\"ShaderSemantics\"].BoneTranslateScale);\n            SkeletalComponent.__tookGlobalDataNum++;\n        }\n        else {\n            console.warn('The actual number of Skeleton generated exceeds Config.maxSkeletonNumber.');\n        }\n    }\n    static get componentTID() {\n        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__[\"WellKnownComponentTIDs\"].SkeletalComponentTID;\n    }\n    set joints(joints) {\n        this.__joints = joints;\n        let index = 0;\n        if (this.componentSID < _core_Config__WEBPACK_IMPORTED_MODULE_10__[\"default\"].maxSkeletonNumber) {\n            index = this.componentSID;\n        }\n        this.__qArray = SkeletalComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__[\"ShaderSemantics\"].BoneQuaternion, index).v;\n        this.__tArray = SkeletalComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__[\"ShaderSemantics\"].BoneTranslateScale, index).v;\n    }\n    $create() {\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Load);\n    }\n    $load() {\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Logic);\n    }\n    $logic({ processApproach }) {\n        const meshComponent = this.entity.getMesh();\n        const maxPrimitive = meshComponent.mesh.getPrimitiveNumber();\n        if (this.isSkinning) {\n            for (let i = 0; i < this.__joints.length; i++) {\n                const joint = this.__joints[i];\n                let globalJointTransform = null;\n                let inverseBindMatrix = this._inverseBindMatrices[i];\n                globalJointTransform = joint.worldMatrixInner;\n                SkeletalComponent.__tmp_mat4.identity();\n                _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"].multiplyTo(SkeletalComponent.__tmp_mat4, globalJointTransform, SkeletalComponent.__tmp2_mat4);\n                _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"].multiplyTo(SkeletalComponent.__tmp2_mat4, inverseBindMatrix, SkeletalComponent.__tmp_mat4);\n                if (this._bindShapeMatrix) {\n                    _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"].multiplyTo(SkeletalComponent.__tmp_mat4, this._bindShapeMatrix, SkeletalComponent.__tmp2_mat4); // only for glTF1\n                    SkeletalComponent.__tmp_mat4.copyComponents(SkeletalComponent.__tmp2_mat4);\n                }\n                let m = SkeletalComponent.__tmp_mat4;\n                SkeletalComponent.__scaleVec3.x = Math.sqrt(m.m00 * m.m00 + m.m01 * m.m01 + m.m02 * m.m02);\n                SkeletalComponent.__scaleVec3.y = Math.sqrt(m.m10 * m.m10 + m.m11 * m.m11 + m.m12 * m.m12);\n                SkeletalComponent.__scaleVec3.z = Math.sqrt(m.m20 * m.m20 + m.m21 * m.m21 + m.m22 * m.m22);\n                m.m00 /= SkeletalComponent.__scaleVec3.x;\n                m.m01 /= SkeletalComponent.__scaleVec3.x;\n                m.m02 /= SkeletalComponent.__scaleVec3.x;\n                m.m10 /= SkeletalComponent.__scaleVec3.y;\n                m.m11 /= SkeletalComponent.__scaleVec3.y;\n                m.m12 /= SkeletalComponent.__scaleVec3.y;\n                m.m20 /= SkeletalComponent.__scaleVec3.z;\n                m.m21 /= SkeletalComponent.__scaleVec3.z;\n                m.m22 /= SkeletalComponent.__scaleVec3.z;\n                let q = (_math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_5__[\"default\"].fromMatrix(m));\n                this.__qArray[i * 4 + 0] = q.x;\n                this.__qArray[i * 4 + 1] = q.y;\n                this.__qArray[i * 4 + 2] = q.z;\n                this.__qArray[i * 4 + 3] = q.w;\n                const t = m.getTranslate();\n                this.__tArray[i * 4 + 0] = t.x;\n                this.__tArray[i * 4 + 1] = t.y;\n                this.__tArray[i * 4 + 2] = t.z;\n                this.__tArray[i * 4 + 3] = Math.max(SkeletalComponent.__scaleVec3.x, SkeletalComponent.__scaleVec3.y, SkeletalComponent.__scaleVec3.z);\n            }\n            // if (processApproach === ProcessApproach.FastestWebGL1) {\n            //   for (let j=0; j<maxPrimitive; j++) {\n            //     const primitive = meshComponent.mesh!.getPrimitiveAt(j);\n            //     primitive.material!.setParameter(ShaderSemantics.SkinningMode, this.componentSID);\n            //   }\n            // }\n        }\n        else {\n            // if (processApproach === ProcessApproach.FastestWebGL1) {\n            //   for (let j=0; j<maxPrimitive; j++) {\n            //     const primitive = meshComponent.mesh!.getPrimitiveAt(j);\n            //     primitive.material!.setParameter(ShaderSemantics.SkinningMode, -1);\n            //   }\n            // }\n        }\n    }\n    get jointMatrices() {\n        return this.__jointMatrices;\n    }\n    get jointQuaternionArray() {\n        return this.__qArray;\n    }\n    get jointTranslateScaleArray() {\n        return this.__tArray;\n    }\n    get jointCompressedInfo() {\n        return this.__boneCompressedInfo;\n    }\n}\nSkeletalComponent.__scaleVec3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].zero();\nSkeletalComponent.__tmp_mat4 = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"].identity();\nSkeletalComponent.__tmp2_mat4 = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"].identity();\nSkeletalComponent.__globalDataRepository = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getInstance();\nSkeletalComponent.__tookGlobalDataNum = 0;\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].registerComponentClass(SkeletalComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/SkeletalComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/TransformComponent.ts":
/*!*********************************************************!*\
  !*** ./src/foundation/components/TransformComponent.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return TransformComponent; });\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_Quaternion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n/* harmony import */ var _math_Matrix33__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/Matrix33 */ \"./src/foundation/math/Matrix33.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../math/MutableQuaterion */ \"./src/foundation/math/MutableQuaterion.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../math/MutableMatrix33 */ \"./src/foundation/math/MutableMatrix33.ts\");\n/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import AnimationComponent from './AnimationComponent';\nclass TransformComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_4__[\"default\"] {\n    constructor(entityUid, componentSid, entityComponent) {\n        super(entityUid, componentSid, entityComponent);\n        this._translate = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dummy();\n        this._rotate = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dummy();\n        this._scale = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dummy();\n        this._quaternion = _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_11__[\"default\"].dummy();\n        this._matrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].dummy();\n        this._invMatrix = _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dummy();\n        this._normalMatrix = _math_Matrix33__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dummy();\n        this.__toUpdateAllTransform = true;\n        this._updateCount = 0;\n        this.__updateCountAtLastLogic = 0;\n        // dependencies\n        this._dependentAnimationComponentId = 0;\n        const thisClass = TransformComponent;\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'translate', _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, [0, 0, 0]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'rotate', _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, [0, 0, 0]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'scale', _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, [1, 1, 1]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'quaternion', _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_11__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, [0, 0, 0, 1]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'matrix', _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'invMatrix', _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].CPUGeneric, 'normalMatrix', _math_Matrix33__WEBPACK_IMPORTED_MODULE_2__[\"default\"], _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, [1, 0, 0, 0, 1, 0, 0, 0, 1]);\n        this.submitToAllocation(this.maxNumberOfComponent);\n        this._is_translate_updated = true;\n        this._is_euler_angles_updated = true;\n        this._is_scale_updated = true;\n        this._is_quaternion_updated = true;\n        this._is_trs_matrix_updated = true;\n        this._is_inverse_trs_matrix_updated = true;\n        this._is_normal_trs_matrix_updated = true;\n        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_12__[\"ProcessStage\"].Logic);\n    }\n    static get renderedPropertyCount() {\n        return null;\n    }\n    static get componentTID() {\n        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__[\"WellKnownComponentTIDs\"].TransformComponentTID;\n    }\n    $logic() {\n        if (this.__updateCountAtLastLogic !== this._updateCount) {\n            const sceneGraphComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_9__[\"default\"]);\n            sceneGraphComponent.setWorldMatrixDirty();\n            this.__updateCountAtLastLogic = this._updateCount;\n        }\n    }\n    set toUpdateAllTransform(flag) {\n        this.__toUpdateAllTransform = flag;\n    }\n    get toUpdateAllTransform() {\n        return this.__toUpdateAllTransform;\n    }\n    _needUpdate() {\n        this._updateCount++;\n    }\n    set translate(vec) {\n        this._translate.v[0] = vec.v[0];\n        this._translate.v[1] = vec.v[1];\n        this._translate.v[2] = vec.v[2];\n        this._is_translate_updated = true;\n        this._is_trs_matrix_updated = false;\n        this._is_inverse_trs_matrix_updated = false;\n        this._is_normal_trs_matrix_updated = false;\n        this.__updateTransform();\n    }\n    get translate() {\n        return this.translateInner.clone();\n    }\n    get translateInner() {\n        if (this._is_translate_updated) {\n            return this._translate;\n        }\n        else if (this._is_trs_matrix_updated) {\n            this._translate.v[0] = this._matrix.m03;\n            this._translate.v[1] = this._matrix.m13;\n            this._translate.v[2] = this._matrix.m23;\n            this._is_translate_updated = true;\n        }\n        return this._translate;\n    }\n    set rotate(vec) {\n        this._rotate.v[0] = vec.v[0];\n        this._rotate.v[1] = vec.v[1];\n        this._rotate.v[2] = vec.v[2];\n        this._is_euler_angles_updated = true;\n        this._is_quaternion_updated = false;\n        this._is_trs_matrix_updated = false;\n        this._is_inverse_trs_matrix_updated = false;\n        this._is_normal_trs_matrix_updated = false;\n        this.__updateTransform();\n    }\n    get rotate() {\n        return this.rotateInner.clone();\n    }\n    get rotateInner() {\n        if (this._is_euler_angles_updated) {\n            return this._rotate;\n        }\n        else if (this._is_trs_matrix_updated) {\n            this._rotate = this._matrix.toEulerAngles();\n        }\n        else if (this._is_quaternion_updated) {\n            this._rotate = (new _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this._quaternion)).toEulerAngles();\n        }\n        this._is_euler_angles_updated = true;\n        return this._rotate;\n    }\n    set scale(vec) {\n        this._scale.v[0] = vec.v[0];\n        this._scale.v[1] = vec.v[1];\n        this._scale.v[2] = vec.v[2];\n        this._is_scale_updated = true;\n        this._is_trs_matrix_updated = false;\n        this._is_inverse_trs_matrix_updated = false;\n        this._is_normal_trs_matrix_updated = false;\n        this.__updateTransform();\n    }\n    get scale() {\n        return this.scaleInner.clone();\n    }\n    get scaleInner() {\n        if (this._is_scale_updated) {\n            return this._scale;\n        }\n        else if (this._is_trs_matrix_updated) {\n            let m = this._matrix;\n            this._scale.v[0] = Math.sqrt(m.m00 * m.m00 + m.m01 * m.m01 + m.m02 * m.m02);\n            this._scale.v[1] = Math.sqrt(m.m10 * m.m10 + m.m11 * m.m11 + m.m12 * m.m12);\n            this._scale.v[2] = Math.sqrt(m.m20 * m.m20 + m.m21 * m.m21 + m.m22 * m.m22);\n            this._is_scale_updated = true;\n        }\n        return this._scale;\n    }\n    set quaternion(quat) {\n        this._quaternion.v[0] = quat.v[0];\n        this._quaternion.v[1] = quat.v[1];\n        this._quaternion.v[2] = quat.v[2];\n        this._quaternion.v[3] = quat.v[3];\n        this._is_quaternion_updated = true;\n        this._is_euler_angles_updated = false;\n        this._is_trs_matrix_updated = false;\n        this._is_inverse_trs_matrix_updated = false;\n        this._is_normal_trs_matrix_updated = false;\n        this.__updateTransform();\n    }\n    get quaternion() {\n        return this.quaternionInner.clone();\n    }\n    get quaternionInner() {\n        if (this._is_quaternion_updated) {\n            return this._quaternion;\n        }\n        else if (!this._is_quaternion_updated) {\n            if (this._is_trs_matrix_updated) {\n                this._is_quaternion_updated = true;\n                this._quaternion.fromMatrix(this._matrix);\n                return this._quaternion;\n            }\n            else if (this._is_euler_angles_updated) {\n                TransformComponent.__tmpMat_quaternionInner.rotateXYZ(this._rotate.x, this._rotate.y, this._rotate.z);\n                this._is_quaternion_updated = true;\n                this._quaternion.fromMatrix(TransformComponent.__tmpMat_quaternionInner);\n                return this._quaternion;\n            }\n        }\n        return this._quaternion;\n    }\n    set matrix(mat) {\n        this._matrix = new _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"](mat, true);\n        this._is_trs_matrix_updated = true;\n        this._is_translate_updated = false;\n        this._is_euler_angles_updated = false;\n        this._is_quaternion_updated = false;\n        this._is_scale_updated = false;\n        this._is_inverse_trs_matrix_updated = false;\n        this._is_normal_trs_matrix_updated = false;\n        this.__updateTransform();\n    }\n    get matrix() {\n        return this.matrixInner.clone();\n    }\n    get matrixInner() {\n        if (this._is_trs_matrix_updated) {\n            return this._matrix;\n        }\n        // Clear and set Scale\n        const scale = this.scaleInner;\n        const n00 = scale.v[0];\n        // const n01 = 0;\n        // const n02 = 0;\n        // const n03 = 0;\n        // const n10 = 0;\n        const n11 = scale.v[1];\n        // const n12 = 0;\n        // const n13 = 0;\n        // const n20 = 0;\n        // const n21 = 0;\n        const n22 = scale.v[2];\n        // const n23 = 0;\n        // const n30 = 0;\n        // const n31 = 0;\n        // const n32 = 0;\n        // const n33 = 1;\n        const q = this.quaternionInner;\n        const sx = q.v[0] * q.v[0];\n        const sy = q.v[1] * q.v[1];\n        const sz = q.v[2] * q.v[2];\n        const cx = q.v[1] * q.v[2];\n        const cy = q.v[0] * q.v[2];\n        const cz = q.v[0] * q.v[1];\n        const wx = q.v[3] * q.v[0];\n        const wy = q.v[3] * q.v[1];\n        const wz = q.v[3] * q.v[2];\n        const m00 = 1.0 - 2.0 * (sy + sz);\n        const m01 = 2.0 * (cz - wz);\n        const m02 = 2.0 * (cy + wy);\n        // const m03 = 0.0;\n        const m10 = 2.0 * (cz + wz);\n        const m11 = 1.0 - 2.0 * (sx + sz);\n        const m12 = 2.0 * (cx - wx);\n        // const m13 = 0.0;\n        const m20 = 2.0 * (cy - wy);\n        const m21 = 2.0 * (cx + wx);\n        const m22 = 1.0 - 2.0 * (sx + sy);\n        // const m23 = 0.0;\n        // const m30 = 0.0;\n        // const m31 = 0.0;\n        // const m32 = 0.0;\n        // const m33 = 1.0;\n        const translate = this.translateInner;\n        // TranslateMatrix * RotateMatrix * ScaleMatrix\n        this._matrix.m00 = m00 * n00;\n        this._matrix.m01 = m01 * n11;\n        this._matrix.m02 = m02 * n22;\n        this._matrix.m03 = translate.v[0];\n        this._matrix.m10 = m10 * n00;\n        this._matrix.m11 = m11 * n11;\n        this._matrix.m12 = m12 * n22;\n        this._matrix.m13 = translate.v[1];\n        this._matrix.m20 = m20 * n00;\n        this._matrix.m21 = m21 * n11;\n        this._matrix.m22 = m22 * n22;\n        this._matrix.m23 = translate.v[2];\n        this._matrix.m30 = 0;\n        this._matrix.m31 = 0;\n        this._matrix.m32 = 0;\n        this._matrix.m33 = 1;\n        // const rotateMatrix = new Matrix44(this.quaternion);\n        // const matrix = MutableMatrix44.multiply(rotateMatrix, Matrix44.scale(this.scale));\n        // matrix.m03 = this.translate.x;\n        // matrix.m13 = this.translate.y;\n        // matrix.m23 = this.translate.z;\n        //this._matrix.copyComponents(matrix);\n        this._is_trs_matrix_updated = true;\n        return this._matrix;\n    }\n    get inverseMatrix() {\n        return this.inverseMatrixInner.clone();\n    }\n    get inverseMatrixInner() {\n        if (!this._is_inverse_trs_matrix_updated) {\n            this._invMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].invert(this.matrixInner);\n            this._is_inverse_trs_matrix_updated = true;\n        }\n        return this._invMatrix;\n    }\n    get normalMatrix() {\n        return this.normalMatrixInner.clone();\n    }\n    get normalMatrixInner() {\n        if (!this._is_normal_trs_matrix_updated) {\n            _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"].invertTo(this.matrixInner, TransformComponent.invertedMatrix44);\n            const mat = TransformComponent.invertedMatrix44.transpose();\n            TransformComponent.returnMatrix33.m00 = mat.m00;\n            TransformComponent.returnMatrix33.m01 = mat.m01;\n            TransformComponent.returnMatrix33.m02 = mat.m02;\n            TransformComponent.returnMatrix33.m10 = mat.m10;\n            TransformComponent.returnMatrix33.m11 = mat.m11;\n            TransformComponent.returnMatrix33.m12 = mat.m12;\n            TransformComponent.returnMatrix33.m20 = mat.m20;\n            TransformComponent.returnMatrix33.m21 = mat.m21;\n            TransformComponent.returnMatrix33.m22 = mat.m22;\n            this._normalMatrix = TransformComponent.returnMatrix33;\n            this._is_normal_trs_matrix_updated = true;\n        }\n        return this._normalMatrix;\n    }\n    /**\n     * Set multiple transform information at once. By using this method,\n     * we reduce the cost of automatically updating other transform components inside this class.\n     * This method may be useful for animation processing and so on.\n     *\n     * The transform components of these arguments must not be mutually discrepant.\n     * for example. The transform components of matrix argument (translate, rotate/quaternion, scale)\n     * must be equal to translate, rotate, scale, quaternion arguments.\n     * And both rotate and quaternion arguments must be same rotation.\n     * If there is an argument passed with null or undefined, it is interpreted as unchanged.\n     *\n     * @param {*} translate\n     * @param {*} rotate\n     * @param {*} scale\n     * @param {*} quaternion\n     * @param {*} matrix\n     */\n    setTransform(translate, rotate, scale, quaternion, matrix) {\n        this._is_trs_matrix_updated = false;\n        this._is_inverse_trs_matrix_updated = false;\n        this._is_normal_trs_matrix_updated = false;\n        // Matrix\n        if (matrix != null) {\n            this._matrix = new _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"](matrix);\n            this._is_trs_matrix_updated = true;\n            this._is_translate_updated = false;\n            this._is_euler_angles_updated = false;\n            this._is_quaternion_updated = false;\n            this._is_scale_updated = false;\n        }\n        // Translate\n        if (translate != null) {\n            this._translate = translate.clone();\n            this._is_translate_updated = true;\n        }\n        // Roatation\n        if (rotate != null && quaternion != null) {\n            this._rotate = rotate.clone();\n            this._quaternion = new _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_11__[\"default\"](quaternion);\n            this._is_euler_angles_updated = true;\n            this._is_quaternion_updated = true;\n        }\n        else if (rotate != null) {\n            this._rotate = rotate.clone();\n            this._is_euler_angles_updated = true;\n            this._is_quaternion_updated = false;\n        }\n        else if (quaternion != null) {\n            this._quaternion = new _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_11__[\"default\"](quaternion);\n            this._is_euler_angles_updated = false;\n            this._is_quaternion_updated = true;\n        }\n        // Scale\n        if (scale != null) {\n            this._scale = scale.clone();\n            this._is_scale_updated = true;\n        }\n        this.__updateTransform();\n    }\n    __updateTransform() {\n        if (this.__toUpdateAllTransform) {\n            this.__updateRotation();\n            this.__updateTranslate();\n            this.__updateScale();\n        }\n        //this.__updateMatrix();\n        this._needUpdate();\n    }\n    __updateRotation() {\n        if (this._is_euler_angles_updated && !this._is_quaternion_updated) {\n            TransformComponent.__tmpMat_updateRotation.rotateXYZ(this._rotate.x, this._rotate.y, this._rotate.z);\n            this._quaternion.fromMatrix(TransformComponent.__tmpMat_updateRotation);\n            this._is_quaternion_updated = true;\n        }\n        else if (!this._is_euler_angles_updated && this._is_quaternion_updated) {\n            this._quaternion.toEulerAngleTo(this._rotate);\n            this._is_euler_angles_updated = true;\n        }\n        else if (!this._is_euler_angles_updated && !this._is_quaternion_updated && this._is_trs_matrix_updated) {\n            const m = this._matrix;\n            this._quaternion.fromMatrix(m);\n            this._is_quaternion_updated = true;\n            this._rotate = m.toEulerAngles();\n            this._is_euler_angles_updated = true;\n        }\n    }\n    __updateTranslate() {\n        if (!this._is_translate_updated && this._is_trs_matrix_updated) {\n            const m = this._matrix;\n            this._translate.v[0] = m.m03;\n            this._translate.v[1] = m.m13;\n            this._translate.v[2] = m.m23;\n            this._is_translate_updated = true;\n        }\n    }\n    __updateScale() {\n        if (!this._is_scale_updated && this._is_trs_matrix_updated) {\n            const m = this._matrix;\n            this._scale.v[0] = Math.sqrt(m.m00 * m.m00 + m.m01 * m.m01 + m.m02 * m.m02);\n            this._scale.v[1] = Math.sqrt(m.m10 * m.m10 + m.m11 * m.m11 + m.m12 * m.m12);\n            this._scale.v[2] = Math.sqrt(m.m20 * m.m20 + m.m21 * m.m21 + m.m22 * m.m22);\n            this._is_scale_updated = true;\n        }\n    }\n    __updateMatrix() {\n        if (!this._is_trs_matrix_updated && this._is_translate_updated && this._is_quaternion_updated && this._is_scale_updated) {\n            const rotationMatrix = new _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this._quaternion);\n            let scale = this._scale;\n            this._matrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].multiply(rotationMatrix, _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"].scale(scale));\n            let translateVec = this._translate;\n            this._matrix.m03 = translateVec.x;\n            this._matrix.m13 = translateVec.y;\n            this._matrix.m23 = translateVec.z;\n            this._is_trs_matrix_updated = true;\n        }\n    }\n    setPropertiesFromJson(arg) {\n        let json = arg;\n        if (typeof arg === \"string\") {\n            json = JSON.parse(arg);\n        }\n        for (let key in json) {\n            if (json.hasOwnProperty(key) && key in this) {\n                if (key === \"quaternion\") {\n                    this[key] = new _math_Quaternion__WEBPACK_IMPORTED_MODULE_1__[\"default\"](json[key]);\n                }\n                else if (key === 'matrix') {\n                    this[key] = new _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"](json[key]);\n                }\n                else {\n                    this[key] = new _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](json[key]);\n                }\n            }\n        }\n    }\n    setRotationFromNewUpAndFront(UpVec, FrontVec) {\n        let yDir = UpVec;\n        let xDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cross(yDir, FrontVec);\n        let zDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cross(xDir, yDir);\n        let rotateMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].identity();\n        rotateMatrix.m00 = xDir.x;\n        rotateMatrix.m10 = xDir.y;\n        rotateMatrix.m20 = xDir.z;\n        rotateMatrix.m01 = yDir.x;\n        rotateMatrix.m11 = yDir.y;\n        rotateMatrix.m21 = yDir.z;\n        rotateMatrix.m02 = zDir.x;\n        rotateMatrix.m12 = zDir.y;\n        rotateMatrix.m22 = zDir.z;\n        this.rotateMatrix44 = rotateMatrix;\n    }\n    headToDirection(fromVec, toVec) {\n        const fromDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(fromVec);\n        const toDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(toVec);\n        const rotationDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cross(fromDir, toDir);\n        const cosTheta = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dotProduct(fromDir, toDir);\n        let theta = Math.acos(cosTheta);\n        this.quaternion = _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_11__[\"default\"].axisAngle(rotationDir, theta);\n    }\n    set rotateMatrix44(rotateMatrix) {\n        this.quaternion = _math_MutableQuaterion__WEBPACK_IMPORTED_MODULE_11__[\"default\"].fromMatrix(rotateMatrix);\n    }\n    get rotateMatrix44() {\n        return new _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this.quaternion);\n    }\n}\nTransformComponent.__tmpMat_updateRotation = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].identity();\nTransformComponent.__tmpMat_quaternionInner = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].identity();\nTransformComponent.returnMatrix33 = new _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_13__[\"default\"]([0, 0, 0, 0, 0, 0, 0, 0, 0]);\nTransformComponent.invertedMatrix44 = new _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"]([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nTransformComponent.updateRotationMatrix44 = new _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"]([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nTransformComponent.updateRotationVector3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_14__[\"default\"].zero();\n_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].registerComponentClass(TransformComponent);\n\n\n//# sourceURL=webpack:///./src/foundation/components/TransformComponent.ts?");

/***/ }),

/***/ "./src/foundation/components/WellKnownComponentTIDs.ts":
/*!*************************************************************!*\
  !*** ./src/foundation/components/WellKnownComponentTIDs.ts ***!
  \*************************************************************/
/*! exports provided: WellKnownComponentTIDs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WellKnownComponentTIDs\", function() { return WellKnownComponentTIDs; });\n// const MaterialSID = 0\nconst AnimationComponentTID = 1;\nconst TransformComponentTID = 2;\nconst SceneGraphComponentTID = 3;\nconst MeshComponentTID = 4;\nconst MeshRendererComponentTID = 5;\nconst CameraControllerComponentTID = 6;\nconst CameraComponentTID = 7;\nconst LightComponentTID = 8;\nconst SkeletalComponentTID = 9;\nconst BlendShapeComponentTID = 10;\nconst PhysicsComponentTID = 11;\nconst SparkGearComponentTID = 12;\nconst EffekseerComponentTID = 13;\nconst maxWellKnownTidNumber = 13;\nconst WellKnownComponentTIDs = Object.freeze({\n    AnimationComponentTID,\n    TransformComponentTID,\n    SceneGraphComponentTID,\n    MeshComponentTID,\n    MeshRendererComponentTID,\n    CameraControllerComponentTID,\n    CameraComponentTID,\n    LightComponentTID,\n    SkeletalComponentTID,\n    BlendShapeComponentTID,\n    PhysicsComponentTID,\n    SparkGearComponentTID,\n    EffekseerComponentTID,\n    maxWellKnownTidNumber\n});\n\n\n//# sourceURL=webpack:///./src/foundation/components/WellKnownComponentTIDs.ts?");

/***/ }),

/***/ "./src/foundation/core/Component.ts":
/*!******************************************!*\
  !*** ./src/foundation/core/Component.ts ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Component; });\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _EntityRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _ComponentRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _RnObject__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./RnObject */ \"./src/foundation/core/RnObject.ts\");\n\n\n\n\n\n\n\n\n/**\n * Component is a functional unit that can be added to an Entity instance.\n */\nclass Component extends _RnObject__WEBPACK_IMPORTED_MODULE_7__[\"default\"] {\n    /**\n     * The constructor of the Component class.\n     * When creating an Component, use the createComponent method of the ComponentRepository class\n     * instead of directly calling this constructor.\n     * @param entityUid Unique ID of the corresponding entity\n     * @param componentSid Scoped ID of the Component\n     * @param entityRepository The instance of the EntityRepository class (Dependency Injection)\n     */\n    constructor(entityUid, componentSid, entityRepository) {\n        super();\n        this.__currentProcessStage = _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Create;\n        this.__byteOffsetOfThisComponent = -1;\n        this.__maxComponentNumber = _Config__WEBPACK_IMPORTED_MODULE_5__[\"default\"].maxEntityNumber;\n        this.__entityUid = entityUid;\n        this._component_sid = componentSid;\n        this.__isAlive = true;\n        const stages = [\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Create,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Load,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Mount,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Logic,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].PreRender,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Render,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Unmount,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__[\"ProcessStage\"].Discard\n        ];\n        stages.forEach(stage => {\n            if (this.isExistProcessStageMethod(stage)) {\n                if (Component.__componentsOfProcessStages.get(stage) == null) {\n                    Component.__componentsOfProcessStages.set(stage, new Int32Array(_Config__WEBPACK_IMPORTED_MODULE_5__[\"default\"].maxEntityNumber));\n                    // Component.__dirtyOfArrayOfProcessStages.set(stage, false);\n                    Component.__lengthOfArrayOfProcessStages.set(stage, 0);\n                }\n            }\n        });\n        this.__memoryManager = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        this.__entityRepository = entityRepository;\n    }\n    set maxNumberOfComponent(value) {\n        this.__maxComponentNumber = value;\n    }\n    get maxNumberOfComponent() {\n        return this.__maxComponentNumber;\n    }\n    /**\n     * Move to the other stages of process\n     * @param processStage stage of component's process\n     */\n    moveStageTo(processStage) {\n        // Component.__dirtyOfArrayOfProcessStages.set(this.__currentProcessStage, false);\n        // Component.__dirtyOfArrayOfProcessStages.set(processStage, true);\n        this.__currentProcessStage = processStage;\n    }\n    /**\n     * Get the Type ID of the Component\n     */\n    static get componentTID() {\n        return 0;\n    }\n    /**\n     * Get the Scoped ID of the Component\n     */\n    get componentSID() {\n        return this._component_sid;\n    }\n    /**\n     * Get the unique ID of the entity corresponding to the component.\n     */\n    get entityUID() {\n        return this.__entityUid;\n    }\n    /**\n     * Get the current process stage of the component.\n     */\n    get currentProcessStage() {\n        return this.__currentProcessStage;\n    }\n    /**\n     * Get true or false whether the specified ProcessStage exists in Component.\n     */\n    static isExistProcessStageMethod(componentType, processStage, componentRepository) {\n        const component = componentRepository.getComponent(componentType, 0);\n        if (component == null) {\n            return false;\n        }\n        if (component[processStage.methodName] == null) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Get true or false whether the specified ProcessStage exists in Component.\n     */\n    isExistProcessStageMethod(processStage) {\n        if (this[processStage.methodName] == null) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Process the components\n     * @param param0 params\n     */\n    static process({ componentType, processStage, processApproach, componentRepository, strategy, renderPass, renderPassTickCount }) {\n        if (!Component.isExistProcessStageMethod(componentType, processStage, componentRepository)) {\n            return;\n        }\n        const methodName = processStage.methodName;\n        const array = this.__componentsOfProcessStages.get(processStage);\n        const components = componentRepository._getComponents(componentType);\n        for (let i = 0; i < array.length; ++i) {\n            const componentSid = array[i];\n            if (componentSid === Component.invalidComponentSID) {\n                return;\n            }\n            const component = components[componentSid];\n            component[methodName]({\n                i,\n                processStage,\n                processApproach,\n                strategy,\n                renderPass,\n                renderPassTickCount\n            });\n        }\n    }\n    /**\n     * Update all components at each process stage.\n     */\n    static updateComponentsOfEachProcessStage(componentClass, processStage, componentRepository, renderPass) {\n        if (!Component.isExistProcessStageMethod(componentClass, processStage, componentRepository)) {\n            return;\n        }\n        const dirty = Component.__componentsOfProcessStages.get(processStage);\n        if (dirty) {\n            const method = componentClass['sort_' + processStage.methodName];\n            const components = componentRepository.getComponentsWithType(componentClass);\n            const array = Component.__componentsOfProcessStages.get(processStage);\n            let sids = [];\n            if (method != null) {\n                sids = method(renderPass);\n                for (let i = 0; i < sids.length; i++) {\n                    array[i] = sids[i];\n                }\n            }\n            if (sids.length === 0) {\n                let count = 0;\n                for (let i = 0; i < components.length; ++i) {\n                    const component = components[i];\n                    if (processStage === component.__currentProcessStage) {\n                        array[count++] = i;\n                    }\n                }\n                array[count] = Component.invalidComponentSID;\n            }\n        }\n    }\n    /**\n     * get byte length of sum of member fields in the component class\n     */\n    static getByteLengthSumOfMembers(bufferUse, componentClass) {\n        const byteLengthSumOfMembers = this.__byteLengthSumOfMembers.get(componentClass);\n        return byteLengthSumOfMembers.get(bufferUse);\n    }\n    static setupBufferView() {\n    }\n    /**\n     * register a dependency for the other components.\n     */\n    registerDependency(component, isMust) {\n    }\n    /**\n     * take a buffer view from the buffer.\n     */\n    static takeBufferView(bufferUse, componentClass, byteLengthSumOfMembers, count) {\n        const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance().getBuffer(bufferUse);\n        if (!this.__bufferViews.has(componentClass)) {\n            this.__bufferViews.set(componentClass, new Map());\n        }\n        const bufferViews = this.__bufferViews.get(componentClass);\n        if (!bufferViews.has(bufferUse)) {\n            const bufferView = buffer.takeBufferView({ byteLengthToNeed: byteLengthSumOfMembers * count, byteStride: 0, isAoS: false, byteAlign: 16 });\n            bufferViews.set(bufferUse, bufferView);\n            return bufferView;\n        }\n        return void 0;\n    }\n    /**\n     * take one memory area for the specified member for all same type of the component instances.\n     */\n    takeOne(memberName, dataClassType, initValues) {\n        if (!this['_' + memberName].isDummy()) {\n            return;\n        }\n        let taken = Component.__accessors.get(this.constructor).get(memberName).takeOne();\n        if (dataClassType === _math_Matrix44__WEBPACK_IMPORTED_MODULE_2__[\"default\"] || dataClassType === _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_6__[\"default\"]) {\n            this['_' + memberName] = new dataClassType(taken, false, true);\n        }\n        else {\n            this['_' + memberName] = new dataClassType(taken, false, true);\n        }\n        for (let i = 0; i < this['_' + memberName].v.length; ++i) {\n            this['_' + memberName].v[i] = initValues[i];\n        }\n        return null;\n    }\n    /**\n     * get the taken accessor for the member field.\n     */\n    static getAccessor(memberName, componentClass) {\n        return this.__accessors.get(componentClass).get(memberName);\n    }\n    /**\n     * take one accessor for the member field.\n     */\n    static takeAccessor(bufferUse, memberName, componentClass, compositionType, componentType, count) {\n        if (!this.__accessors.has(componentClass)) {\n            this.__accessors.set(componentClass, new Map());\n        }\n        const accessors = this.__accessors.get(componentClass);\n        if (!accessors.has(memberName)) {\n            const bufferViews = this.__bufferViews.get(componentClass);\n            const bytes = compositionType.getNumberOfComponents() * componentType.getSizeInBytes();\n            let alignedBytes = bytes;\n            if (bytes % 16 !== 0) {\n                alignedBytes += 16 - bytes % 16;\n            }\n            const accessor = bufferViews.get(bufferUse).takeFlexibleAccessor({ compositionType: compositionType, componentType, count: count, byteStride: alignedBytes, byteAlign: 16 });\n            accessors.set(memberName, accessor);\n            return accessor;\n        }\n        else {\n            return void 0;\n        }\n    }\n    static getByteOffsetOfThisComponentTypeInBuffer(bufferUse, componentClass) {\n        return this.__bufferViews.get(componentClass).get(bufferUse).byteOffsetInBuffer;\n    }\n    static getByteOffsetOfFirstOfThisMemberInBuffer(memberName, componentClass) {\n        return this.__accessors.get(componentClass).get(memberName).byteOffsetInBuffer;\n    }\n    static getByteOffsetOfFirstOfThisMemberInBufferView(memberName, componentClass) {\n        return this.__accessors.get(componentClass).get(memberName).byteOffsetInBufferView;\n    }\n    static getCompositionTypeOfMember(memberName, componentClass) {\n        const memberInfoArray = this.__memberInfo.get(componentClass);\n        const info = memberInfoArray.find(info => {\n            return info.memberName === memberName;\n        });\n        if (info != null) {\n            return info.compositionType;\n        }\n        else {\n            return null;\n        }\n    }\n    static getComponentTypeOfMember(memberName, componentClass) {\n        const memberInfoArray = this.__memberInfo.get(componentClass);\n        const info = memberInfoArray.find(info => {\n            return info.memberName === memberName;\n        });\n        if (info != null) {\n            return info.componentType;\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * Register a member field of component class for memory allocation.\n     * @param bufferUse purpose type of buffer use\n     * @param memberName the name of member field\n     * @param dataClassType a class of data\n     * @param componentType a type of number\n     * @param initValues a initial value\n     */\n    registerMember(bufferUse, memberName, dataClassType, componentType, initValues) {\n        if (!Component.__memberInfo.has(this.constructor)) {\n            Component.__memberInfo.set(this.constructor, []);\n        }\n        const memberInfoArray = Component.__memberInfo.get(this.constructor);\n        memberInfoArray.push({\n            bufferUse: bufferUse, memberName: memberName, dataClassType: dataClassType,\n            compositionType: dataClassType.compositionType, componentType: componentType, initValues: initValues\n        });\n    }\n    /**\n     * Allocate memory of self member fields\n     * @param count a number of entities to need allocate\n     */\n    submitToAllocation(count) {\n        const componentClass = this.constructor;\n        const memberInfoArray = Component.__memberInfo.get(componentClass);\n        if (this._component_sid === 0) {\n            if (!Component.__members.has(componentClass)) {\n                Component.__members.set(componentClass, new Map());\n            }\n            const member = Component.__members.get(componentClass);\n            memberInfoArray.forEach(info => {\n                member.set(info.bufferUse, []);\n            });\n            memberInfoArray.forEach(info => {\n                member.get(info.bufferUse).push(info);\n            });\n            // take a BufferView for all entities for each member fields.\n            for (let bufferUse of member.keys()) {\n                const infoArray = member.get(bufferUse);\n                if (!Component.__byteLengthSumOfMembers.has(componentClass)) {\n                    Component.__byteLengthSumOfMembers.set(componentClass, new Map());\n                }\n                let byteLengthSumOfMembers = Component.__byteLengthSumOfMembers.get(componentClass);\n                if (!byteLengthSumOfMembers.has(bufferUse)) {\n                    byteLengthSumOfMembers.set(bufferUse, 0);\n                }\n                infoArray.forEach(info => {\n                    byteLengthSumOfMembers.set(bufferUse, byteLengthSumOfMembers.get(bufferUse) +\n                        info.compositionType.getNumberOfComponents() * info.componentType.getSizeInBytes());\n                });\n                if (infoArray.length > 0) {\n                    const bufferView = Component.takeBufferView(bufferUse, componentClass, byteLengthSumOfMembers.get(bufferUse), count);\n                    this.__byteOffsetOfThisComponent = bufferView.byteOffsetInBuffer;\n                }\n            }\n            // take a Accessor for all entities for each member fields (same as BufferView)\n            for (let bufferUse of member.keys()) {\n                const infoArray = member.get(bufferUse);\n                infoArray.forEach(info => {\n                    const accessor = Component.takeAccessor(info.bufferUse, info.memberName, componentClass, info.compositionType, info.componentType, count);\n                    this['_byteOffsetOfAccessorInBuffer_' + info.memberName] = accessor.byteOffsetInBuffer;\n                    this['_byteOffsetOfAccessorInComponent_' + info.memberName] = accessor.byteOffsetInBufferView;\n                });\n            }\n        }\n        const member = Component.__members.get(componentClass);\n        // take a field value allocation for each entity for each member field\n        for (let bufferUse of member.keys()) {\n            const infoArray = member.get(bufferUse);\n            infoArray.forEach(info => {\n                this.takeOne(info.memberName, info.dataClassType, info.initValues);\n            });\n        }\n    }\n    get entity() {\n        return this.__entityRepository.getEntity(this.__entityUid);\n    }\n    static getDataByteInfoInner(component, memberName) {\n        const data = component['_' + memberName];\n        const typedArray = data.v;\n        const byteOffsetInBuffer = typedArray.byteOffset;\n        const byteLength = typedArray.byteLength;\n        const componentNumber = typedArray.length;\n        const locationOffsetInBuffer = byteOffsetInBuffer / 4 / 4; // 4byte is the size of Float32Array, and texel fetch is 4 components unit.\n        const byteOffsetInThisComponent = this['_byteOffsetOfAccessorInComponent_' + memberName] + component.componentSID * componentNumber * 4;\n        const locationOffsetInThisComponent = this['_byteOffsetOfAccessorInComponent_' + memberName] + component.componentSID * componentNumber;\n        const thisComponentByteOffsetInBuffer = component.__byteOffsetOfThisComponent;\n        const thisComponentLocationOffsetInBuffer = component.__byteOffsetOfThisComponent / 4 / 4;\n        return {\n            byteLength,\n            byteOffsetInBuffer,\n            byteOffsetInThisComponent,\n            locationOffsetInBuffer,\n            locationOffsetInThisComponent,\n            thisComponentByteOffsetInBuffer,\n            thisComponentLocationOffsetInBuffer,\n            componentNumber\n        };\n    }\n    getDataByteInfo(memberName) {\n        return Component.getDataByteInfoInner(this, memberName);\n    }\n    static getDataByteInfoByComponentSID(componentType, componentSID, memberName) {\n        const component = _ComponentRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance().getComponent(componentType, componentSID);\n        if (component) {\n            return Component.getDataByteInfoInner(component, memberName);\n        }\n        return void 0;\n    }\n    static getDataByteInfoByEntityUID(componentType, entityUID, memberName) {\n        const component = _EntityRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance().getComponentOfEntity(entityUID, componentType);\n        if (component) {\n            return Component.getDataByteInfoInner(component, memberName);\n        }\n        return void 0;\n    }\n    static getLocationOffsetOfMemberOfComponent(componentType, memberName) {\n        const component = _ComponentRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance().getComponent(componentType, 0);\n        return component['_byteOffsetOfAccessorInBuffer_' + memberName] / 4 / 4;\n    }\n}\nComponent.invalidComponentSID = -1;\nComponent.__componentsOfProcessStages = new Map();\nComponent.__lengthOfArrayOfProcessStages = new Map();\n// protected static __dirtyOfArrayOfProcessStages: Map<ProcessStageEnum, boolean> = new Map();\nComponent.__bufferViews = new Map();\nComponent.__accessors = new Map();\nComponent.__byteLengthSumOfMembers = new Map();\nComponent.__memberInfo = new Map();\nComponent.__members = new Map();\n\n\n//# sourceURL=webpack:///./src/foundation/core/Component.ts?");

/***/ }),

/***/ "./src/foundation/core/ComponentRepository.ts":
/*!****************************************************!*\
  !*** ./src/foundation/core/ComponentRepository.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ComponentRepository; });\n/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _misc_IsUtil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/IsUtil */ \"./src/foundation/misc/IsUtil.ts\");\n/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Config */ \"./src/foundation/core/Config.ts\");\n\n\n\n/**\n * The class that generates and manages all kinds of components.\n */\nclass ComponentRepository {\n    constructor() {\n        this.__component_sid_count_map = new Map();\n        this.__components = new Map();\n    }\n    static registerComponentClass(componentClass) {\n        const thisClass = ComponentRepository;\n        thisClass.__componentClasses.set(componentClass.componentTID, componentClass);\n    }\n    static unregisterComponentClass(componentTID) {\n        const thisClass = ComponentRepository;\n        thisClass.__componentClasses.delete(componentTID);\n    }\n    /**\n     * Gets the singleton instance of the ComponentRepository.\n     */\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new ComponentRepository();\n        }\n        return this.__instance;\n    }\n    /**\n     * Gets the class object of the component corresponding to specified ComponentTID.\n     * @param componentTid The componentTID to get the class object.\n     */\n    static getComponentClass(componentTid) {\n        return this.__componentClasses.get(componentTid);\n    }\n    /**\n     * Creates an instance of the component for the entity.\n     * @param componentTid The componentTID to create the instance.\n     * @param entityUid The entityUID of the entity.\n     * @param entityRepository the reference of the entityRepository.\n     */\n    createComponent(componentTid, entityUid, entityRepository) {\n        const thisClass = ComponentRepository;\n        const componentClass = thisClass.__componentClasses.get(componentTid);\n        if (componentClass != null) {\n            let component_sid_count = this.__component_sid_count_map.get(componentTid);\n            if (!_misc_IsUtil__WEBPACK_IMPORTED_MODULE_1__[\"default\"].exist(component_sid_count)) {\n                this.__component_sid_count_map.set(componentTid, 0);\n                component_sid_count = _Component__WEBPACK_IMPORTED_MODULE_0__[\"default\"].invalidComponentSID;\n            }\n            this.__component_sid_count_map.set(componentTid, ++component_sid_count);\n            const component = new componentClass(entityUid, component_sid_count, entityRepository);\n            if (!this.__components.has(componentTid)) {\n                this.__components.set(componentTid, []);\n            }\n            const array = this.__components.get(componentTid);\n            if (array != null) {\n                array[component.componentSID] = component;\n                return component;\n            }\n        }\n        return null;\n    }\n    /**\n     * Get the instance of the component corresponding to the component class and componentSID.\n     * @param componentClass The class object to get the component.\n     * @param componentSid The componentSID to get the component.\n     */\n    getComponent(componentClass, componentSid) {\n        return this.getComponentFromComponentTID(componentClass.componentTID, componentSid);\n    }\n    /**\n     * Get the instance of the component corresponding to the componentTID and componentSID.\n     * @param componentTid The componentTID to get the component.\n     * @param componentSid The componentSID to get the component.\n     */\n    getComponentFromComponentTID(componentTid, componentSid) {\n        const map = this.__components.get(componentTid);\n        if (map != null) {\n            const component = map[componentSid];\n            if (component != null) {\n                return map[componentSid];\n            }\n            else {\n                return null;\n            }\n        }\n        return null;\n    }\n    /**\n     * @private\n     * Gets an array of components corresponding to the class object of the component.\n     * @param componentClass The class object of the component.\n     */\n    _getComponents(componentClass) {\n        return this.__components.get(componentClass.componentTID);\n    }\n    static getMemoryBeginIndex(componentTid) {\n        let memoryBeginIndex = 0;\n        for (let i = 0; i < componentTid; i++) {\n            const componentClass = ComponentRepository.__componentClasses.get(i);\n            if (componentClass != null) {\n                const sizeOfComponent = componentClass.sizeOfThisComponent;\n                const maxEntityNumber = _Config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].maxEntityNumber;\n                memoryBeginIndex += sizeOfComponent * maxEntityNumber;\n            }\n        }\n        return memoryBeginIndex;\n    }\n    /**\n     * Gets an array of components corresponding to the class object of the component.\n     * @param componentType The class object of the component.\n     */\n    getComponentsWithType(componentType) {\n        const components = this.__components.get(componentType.componentTID);\n        if (components == null) {\n            return [];\n        }\n        return components;\n    }\n    /**\n     * Gets all componentTIDs.\n     */\n    getComponentTIDs() {\n        const indices = [];\n        for (let type of this.__components.keys()) {\n            indices.push(type);\n        }\n        indices.sort(function (a, b) {\n            if (a < b)\n                return -1;\n            if (a > b)\n                return 1;\n            return 0;\n        });\n        return indices;\n    }\n}\nComponentRepository.__componentClasses = new Map();\n\n\n//# sourceURL=webpack:///./src/foundation/core/ComponentRepository.ts?");

/***/ }),

/***/ "./src/foundation/core/Config.ts":
/*!***************************************!*\
  !*** ./src/foundation/core/Config.ts ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nlet maxEntityNumber = 5000;\nlet maxLightNumberInShader = 4;\nlet maxVertexMorphNumberInShader = 41;\nlet maxMaterialInstanceForEachType = 500;\nlet maxSkeletonNumber = 16;\nlet maxCameraNumber = 15;\nlet maxSizeLimitOfNonCompressedTexture = 512;\nlet maxSkeletalBoneNumber = 250;\nlet dataTextureWidth = Math.pow(2, 11);\nlet dataTextureHeight = Math.pow(2, 11);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({ maxEntityNumber, maxLightNumberInShader, maxVertexMorphNumberInShader, maxMaterialInstanceForEachType,\n    maxSkeletonNumber, maxCameraNumber, maxSizeLimitOfNonCompressedTexture, maxSkeletalBoneNumber, dataTextureWidth, dataTextureHeight });\n\n\n//# sourceURL=webpack:///./src/foundation/core/Config.ts?");

/***/ }),

/***/ "./src/foundation/core/Entity.ts":
/*!***************************************!*\
  !*** ./src/foundation/core/Entity.ts ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Entity; });\n/* harmony import */ var _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _RnObject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RnObject */ \"./src/foundation/core/RnObject.ts\");\n\n\n/**\n * The Rhodonite Entity Class which are an entities that exists in space.\n * Entities can acquire various functions by having components on themselves.\n */\nclass Entity extends _RnObject__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    /**\n     * The constructor of the Entity class.\n     * When creating an Entity, use the createEntity method of the EntityRepository class\n     * instead of directly calling this constructor.\n     * @param entityUID The unique ID of the entity\n     * @param isAlive Whether this entity alive or not\n     * @param entityComponent The instance of EntityComponent (Dependency Injection)\n     */\n    constructor(entityUID, isAlive) {\n        super();\n        this.__components = []; // index is ComponentTID\n        this.__entity_uid = entityUID;\n        this.__isAlive = isAlive;\n    }\n    /**\n     * Get Unique ID of the entity.\n     */\n    get entityUID() {\n        return this.__entity_uid;\n    }\n    /**\n     * @private\n     * Sets a component to this entity.\n     * @param component The component to set.\n     */\n    _setComponent(component) {\n        this.__components[component.constructor.componentTID] = component;\n    }\n    /**\n     * Get the component of the specified type that the entity has\n     * @param componentType\n     */\n    getComponent(componentType) {\n        return this.__components[componentType.componentTID];\n    }\n    /**\n     * Gets the component corresponding to the ComponentTID.\n     * @param componentTID The ComponentTID to get the component.\n     */\n    getComponentByComponentTID(componentTID) {\n        return this.__components[componentTID];\n    }\n    /**\n     * Get the TransformComponent of the entity.\n     * It's a shortcut method of getComponent(TransformComponent).\n     */\n    getTransform() {\n        if (this.__transformComponent == null) {\n            this.__transformComponent = this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_0__[\"WellKnownComponentTIDs\"].TransformComponentTID);\n        }\n        return this.__transformComponent;\n    }\n    /**\n     * Get the SceneGraphComponent of the entity.\n     * It's a shortcut method of getComponent(SceneGraphComponent).\n     */\n    getSceneGraph() {\n        if (this.__sceneGraphComponent == null) {\n            this.__sceneGraphComponent = this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_0__[\"WellKnownComponentTIDs\"].SceneGraphComponentTID);\n        }\n        return this.__sceneGraphComponent;\n    }\n    getSkeletal() {\n        if (this.__skeletalComponent == null) {\n            this.__skeletalComponent = this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_0__[\"WellKnownComponentTIDs\"].SkeletalComponentTID);\n        }\n        return this.__skeletalComponent;\n    }\n    getMesh() {\n        if (this.__meshComponent == null) {\n            this.__meshComponent = this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_0__[\"WellKnownComponentTIDs\"].MeshComponentTID);\n        }\n        return this.__meshComponent;\n    }\n    getMeshRenderer() {\n        if (this.__meshRendererComponent == null) {\n            this.__meshRendererComponent = this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_0__[\"WellKnownComponentTIDs\"].MeshRendererComponentTID);\n        }\n        return this.__meshRendererComponent;\n    }\n    getCamera() {\n        if (this.__cameraComponent == null) {\n            this.__cameraComponent = this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_0__[\"WellKnownComponentTIDs\"].CameraComponentTID);\n        }\n        return this.__cameraComponent;\n    }\n    getBlendShape() {\n        if (this.__blendShapeComponent == null) {\n            this.__blendShapeComponent = this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_0__[\"WellKnownComponentTIDs\"].BlendShapeComponentTID);\n        }\n        return this.__blendShapeComponent;\n    }\n    getPhysics() {\n        if (this.__physicsComponent == null) {\n            this.__physicsComponent = this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_0__[\"WellKnownComponentTIDs\"].PhysicsComponentTID);\n        }\n        return this.__physicsComponent;\n    }\n}\nEntity.invalidEntityUID = -1;\n\n\n//# sourceURL=webpack:///./src/foundation/core/Entity.ts?");

/***/ }),

/***/ "./src/foundation/core/EntityRepository.ts":
/*!*************************************************!*\
  !*** ./src/foundation/core/EntityRepository.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EntityRepository; });\n/* harmony import */ var _Entity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Entity */ \"./src/foundation/core/Entity.ts\");\n/* harmony import */ var _ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n\n\nclass EntityRepository {\n    constructor() {\n        this.__entity_uid_count = _Entity__WEBPACK_IMPORTED_MODULE_0__[\"default\"].invalidEntityUID;\n        this.__entities = [];\n        this._components = [];\n        this.__componentRepository = _ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new EntityRepository();\n        }\n        return this.__instance;\n    }\n    /**\n     * Creates an entity which has the given types of the components\n     * @param componentClasses The class objects of the components.\n     */\n    createEntity(componentClasses) {\n        const entity = new _Entity__WEBPACK_IMPORTED_MODULE_0__[\"default\"](++this.__entity_uid_count, true);\n        this.__entities[this.__entity_uid_count] = entity;\n        return this.addComponentsToEntity(componentClasses, entity.entityUID);\n    }\n    /**\n     * Add components to the entity.\n     * @param componentClasses The class objects to set to the entity.\n     * @param entityUid The entityUID of the entity.\n     */\n    addComponentsToEntity(componentClasses, entityUid) {\n        const entity = this.getEntity(entityUid);\n        for (let componentClass of componentClasses) {\n            const component = this.__componentRepository.createComponent(componentClass.componentTID, entityUid, this);\n            let map = this._components[entity.entityUID];\n            if (map == null) {\n                map = new Map();\n                this._components[entity.entityUID] = map;\n            }\n            if (component != null) {\n                map.set(componentClass.componentTID, component);\n                entity._setComponent(component);\n            }\n        }\n        return entity;\n    }\n    /**\n     * Remove components from the entity.\n     * @param componentClasses The class object of the components to remove.\n     * @param entityUid The entityUID of the entity.\n     */\n    removeComponentsFromEntity(componentClasses, entityUid) {\n        const entity = this.getEntity(entityUid);\n        for (let componentClass of componentClasses) {\n            let map = this._components[entity.entityUID];\n            if (map == null) {\n                map = new Map();\n                this._components[entity.entityUID] = map;\n            }\n            map.delete(componentClass.componentTID);\n        }\n        return entity;\n    }\n    /**\n     * Gets the entity corresponding to the entityUID.\n     * @param entityUid The entityUID of the entity.\n     */\n    getEntity(entityUid) {\n        return this.__entities[entityUid];\n    }\n    /**\n     * Gets the specified component from the entity.\n     * @param entityUid The entity to get the component from.\n     * @param componentType The class object of the component to get.\n     */\n    getComponentOfEntity(entityUid, componentType) {\n        const entity = this._components[entityUid];\n        let component = null;\n        if (entity != null) {\n            component = entity.get(componentType.componentTID);\n            if (component != null) {\n                return component;\n            }\n            else {\n                return null;\n            }\n        }\n        return component;\n    }\n    /**\n     * Search entities by the given tags.\n     * @param tags The tags to search\n     */\n    searchByTags(tags) {\n        const matchEntites = [];\n        for (let entity of this.__entities) {\n            if (entity.matchTags(tags)) {\n                matchEntites.push(entity);\n            }\n        }\n        return matchEntites;\n    }\n    /**\n     * Gets entity by the unique name.\n     * @param uniqueName The unique name of the entity.\n     */\n    getEntityByUniqueName(uniqueName) {\n        for (let entity of this.__entities) {\n            if (entity.uniqueName === uniqueName) {\n                return entity;\n            }\n        }\n        return void 0;\n    }\n    /**\n     * @private\n     * Gets all entities.\n     */\n    _getEntities() {\n        return this.__entities.concat();\n    }\n    /**\n     * Gets the number of all entities.\n     */\n    getEntitiesNumber() {\n        return this.__entities.length;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/core/EntityRepository.ts?");

/***/ }),

/***/ "./src/foundation/core/GlobalDataRepository.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/core/GlobalDataRepository.ts ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GlobalDataRepository; });\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _MemoryManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _materials_Material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../materials/Material */ \"./src/foundation/materials/Material.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/MathClassUtil */ \"./src/foundation/math/MathClassUtil.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/ShaderType */ \"./src/foundation/definitions/ShaderType.ts\");\n/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../math/VectorN */ \"./src/foundation/math/VectorN.ts\");\n/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../definitions/ShaderVariableUpdateInterval */ \"./src/foundation/definitions/ShaderVariableUpdateInterval.ts\");\n/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../math/Scalar */ \"./src/foundation/math/Scalar.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../components/WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The class which manages global data.\n */\nclass GlobalDataRepository {\n    constructor() {\n        this.__fields = new Map();\n    }\n    initialize() {\n        // CurrentComponentSIDs\n        const currentComponentSIDsInfo = { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].CurrentComponentSIDs, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].ScalarArray, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float, maxIndex: _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_15__[\"WellKnownComponentTIDs\"].maxWellKnownTidNumber,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexAndPixelShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, needUniformInFastest: true, initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__[\"default\"](new Float32Array(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_15__[\"WellKnownComponentTIDs\"].maxWellKnownTidNumber)) };\n        this.registerProperty(currentComponentSIDsInfo, 1);\n        this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].CurrentComponentSIDs);\n        // Camera\n        const viewMatrixInfo = { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].ViewMatrix, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Mat4, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, initialValue: _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_14__[\"default\"].identity() };\n        const projectionMatrixInfo = { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].ProjectionMatrix, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Mat4, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, initialValue: _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_14__[\"default\"].identity() };\n        const viewPositionInfo = { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].ViewPosition, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexAndPixelShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_13__[\"default\"](0, 0, 1)\n        };\n        this.registerProperty(viewMatrixInfo, _Config__WEBPACK_IMPORTED_MODULE_11__[\"default\"].maxCameraNumber);\n        this.registerProperty(projectionMatrixInfo, _Config__WEBPACK_IMPORTED_MODULE_11__[\"default\"].maxCameraNumber);\n        this.registerProperty(viewPositionInfo, _Config__WEBPACK_IMPORTED_MODULE_11__[\"default\"].maxCameraNumber);\n        // Skinning\n        const boneQuaternionInfo = { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].BoneQuaternion, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec4Array, maxIndex: _Config__WEBPACK_IMPORTED_MODULE_11__[\"default\"].maxSkeletalBoneNumber, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: true, initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__[\"default\"](new Float32Array(0)) };\n        const boneTranslateScaleInfo = { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].BoneTranslateScale, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec4Array, maxIndex: _Config__WEBPACK_IMPORTED_MODULE_11__[\"default\"].maxSkeletalBoneNumber, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float, soloDatum: true,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__[\"default\"](new Float32Array(0)) };\n        const skeletalComponentSIDInfo = { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].SkinningMode, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Int,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexAndPixelShader, min: 0, max: 1, isSystem: true, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__[\"ShaderVariableUpdateInterval\"].EveryTime, initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_12__[\"default\"](-1) };\n        this.registerProperty(boneQuaternionInfo, _Config__WEBPACK_IMPORTED_MODULE_11__[\"default\"].maxSkeletonNumber);\n        this.registerProperty(boneTranslateScaleInfo, _Config__WEBPACK_IMPORTED_MODULE_11__[\"default\"].maxSkeletonNumber);\n        this.registerProperty(skeletalComponentSIDInfo, 1);\n        this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].SkinningMode);\n        // Lighting\n        const lightPositionInfo = { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].LightPosition, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec4Array, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float, stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, maxIndex: _Config__WEBPACK_IMPORTED_MODULE_11__[\"default\"].maxLightNumberInShader,\n            min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__[\"ShaderVariableUpdateInterval\"].EveryTime, initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__[\"default\"](new Float32Array(_Config__WEBPACK_IMPORTED_MODULE_11__[\"default\"].maxLightNumberInShader)) };\n        const lightDirectionInfo = { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].LightDirection, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec4Array, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float, stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, maxIndex: _Config__WEBPACK_IMPORTED_MODULE_11__[\"default\"].maxLightNumberInShader,\n            min: -1, max: 1, isSystem: true, initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__[\"default\"](new Float32Array(_Config__WEBPACK_IMPORTED_MODULE_11__[\"default\"].maxLightNumberInShader)), updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__[\"ShaderVariableUpdateInterval\"].EveryTime };\n        const lightIntensityInfo = { semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].LightIntensity, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec4Array, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float, stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, maxIndex: _Config__WEBPACK_IMPORTED_MODULE_11__[\"default\"].maxLightNumberInShader,\n            min: 0, max: 10, isSystem: true, initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__[\"default\"](new Float32Array(_Config__WEBPACK_IMPORTED_MODULE_11__[\"default\"].maxLightNumberInShader)), updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__[\"ShaderVariableUpdateInterval\"].EveryTime };\n        this.registerProperty(lightPositionInfo, 1);\n        this.registerProperty(lightDirectionInfo, 1);\n        this.registerProperty(lightIntensityInfo, 1);\n        this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].LightDirection);\n        this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].LightIntensity);\n        this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].LightPosition);\n        const lightNumberInfo = {\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].LightNumber,\n            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Scalar,\n            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Int,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexAndPixelShader,\n            min: 0,\n            max: Number.MAX_SAFE_INTEGER,\n            isSystem: true,\n            updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_12__[\"default\"](0),\n        };\n        this.registerProperty(lightNumberInfo, 1);\n        this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].LightNumber);\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new GlobalDataRepository();\n        }\n        return this.__instance;\n    }\n    registerProperty(semanticInfo, maxCount) {\n        const propertyIndex = _materials_Material__WEBPACK_IMPORTED_MODULE_4__[\"default\"]._getPropertyIndex(semanticInfo);\n        const buffer = _MemoryManager__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__[\"BufferUse\"].GPUInstanceData);\n        const alignedByteLength = _materials_Material__WEBPACK_IMPORTED_MODULE_4__[\"default\"]._calcAlignedByteLength(semanticInfo);\n        const bufferView = buffer.takeBufferView({\n            byteLengthToNeed: alignedByteLength * maxCount,\n            byteStride: 0,\n            byteAlign: 16,\n            isAoS: false\n        });\n        let maxArrayLength = semanticInfo.maxIndex;\n        if (_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].isArray(semanticInfo.compositionType) && maxArrayLength == null) {\n            maxArrayLength = 100;\n        }\n        const accessor = bufferView.takeFlexibleAccessor({\n            compositionType: semanticInfo.compositionType,\n            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float,\n            count: maxCount,\n            byteStride: alignedByteLength,\n            arrayLength: maxArrayLength,\n            byteAlign: 16\n        });\n        const globalPropertyStruct = {\n            shaderSemanticsInfo: semanticInfo,\n            values: [],\n            maxCount: maxCount,\n            accessor: accessor\n        };\n        this.__fields.set(propertyIndex, globalPropertyStruct);\n    }\n    takeOne(shaderSemantic, arrayIndex) {\n        const propertyIndex = _materials_Material__WEBPACK_IMPORTED_MODULE_4__[\"default\"]._getPropertyIndex2(shaderSemantic, arrayIndex);\n        const globalPropertyStruct = this.__fields.get(propertyIndex);\n        if (globalPropertyStruct) {\n            const semanticInfo = globalPropertyStruct.shaderSemanticsInfo;\n            const typedArray = globalPropertyStruct.accessor.takeOne();\n            const countIndex = globalPropertyStruct.values.length;\n            const valueObj = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_6__[\"default\"].initWithFloat32Array(semanticInfo.initialValue, semanticInfo.initialValue, typedArray, semanticInfo.compositionType);\n            globalPropertyStruct.values[countIndex] = valueObj;\n            return valueObj;\n        }\n        return void 0;\n    }\n    setValue(shaderSemantic, countIndex, value, arrayIndex) {\n        const propertyIndex = _materials_Material__WEBPACK_IMPORTED_MODULE_4__[\"default\"]._getPropertyIndex2(shaderSemantic, arrayIndex);\n        const globalPropertyStruct = this.__fields.get(propertyIndex);\n        if (globalPropertyStruct) {\n            const valueObj = globalPropertyStruct.values[countIndex];\n            _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_6__[\"default\"]._setForce(valueObj, value);\n        }\n    }\n    getValue(shaderSemantic, countIndex, arrayIndex) {\n        const propertyIndex = _materials_Material__WEBPACK_IMPORTED_MODULE_4__[\"default\"]._getPropertyIndex2(shaderSemantic, arrayIndex);\n        const globalPropertyStruct = this.__fields.get(propertyIndex);\n        if (globalPropertyStruct) {\n            const valueObj = globalPropertyStruct.values[countIndex];\n            return valueObj;\n        }\n        return void 0;\n    }\n    getGlobalPropertyStruct(propertyIndex) {\n        return this.__fields.get(propertyIndex);\n    }\n    setUniformLocations(shaderProgramUid) {\n        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getWebGLResourceRepository();\n        const semanticsInfoArray = [];\n        this.__fields.forEach((globalPropertyStruct, key) => {\n            const semanticInfo = globalPropertyStruct.shaderSemanticsInfo;\n            semanticsInfoArray.push(semanticInfo);\n        });\n        webglResourceRepository.setupUniformLocations(shaderProgramUid, semanticsInfoArray);\n    }\n    setUniformValues(shaderProgram) {\n        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getWebGLResourceRepository();\n        this.__fields.forEach((globalPropertyStruct, key) => {\n            const info = globalPropertyStruct.shaderSemanticsInfo;\n            const values = globalPropertyStruct.values;\n            for (let i = 0; i < values.length; i++) {\n                webglResourceRepository.setUniformValue(shaderProgram, info.semantic.str, true, values[i], info.index);\n            }\n        });\n    }\n    // getLocationOffsetOfProperty(propertyIndex: Index, countIndex: Index) {\n    //   const globalPropertyStruct = this.__fields.get(propertyIndex);\n    //   if (globalPropertyStruct) {\n    //     const value = globalPropertyStruct.values[countIndex];\n    //     return (value.v as Float32Array).byteOffset / 4 / 4;\n    //   }\n    //   return void 0;\n    // }\n    getLocationOffsetOfProperty(propertyIndex) {\n        const globalPropertyStruct = this.__fields.get(propertyIndex);\n        if (globalPropertyStruct) {\n            return globalPropertyStruct.accessor.byteOffsetInBuffer / 4 / 4;\n        }\n        return void 0;\n    }\n    getCurrentDataNumberOfTheProperty(propertyIndex) {\n        const globalPropertyStruct = this.__fields.get(propertyIndex);\n        if (globalPropertyStruct) {\n            return globalPropertyStruct.values.length;\n        }\n        return 0;\n    }\n    addPropertiesStr(vertexPropertiesStr, pixelPropertiesStr, propertySetter) {\n        this.__fields.forEach((globalPropertyStruct, propertyIndex) => {\n            const info = globalPropertyStruct.shaderSemanticsInfo;\n            if (info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader || info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexAndPixelShader) {\n                vertexPropertiesStr += propertySetter('', info, propertyIndex, true);\n            }\n            if (info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader || info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexAndPixelShader) {\n                pixelPropertiesStr += propertySetter('', info, propertyIndex, true);\n            }\n        });\n        return [vertexPropertiesStr, pixelPropertiesStr];\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/core/GlobalDataRepository.ts?");

/***/ }),

/***/ "./src/foundation/core/MemoryManager.ts":
/*!**********************************************!*\
  !*** ./src/foundation/core/MemoryManager.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MemoryManager; });\n/* harmony import */ var _memory_Buffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../memory/Buffer */ \"./src/foundation/memory/Buffer.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Config */ \"./src/foundation/core/Config.ts\");\n\n\n\n/**\n * Usage\n * const mm = MemoryManager.getInstance();\n * this.translate = new Vector3(\n *   mm.assignMem(componentUID, propetyId, entityUID, isRendered)\n * );\n */\nclass MemoryManager {\n    constructor(cpuGeneric, gpuInstanceData, gpuVertexData, UBOGeneric) {\n        //__entityMaxCount: number;\n        this.__buffers = {};\n        this.__buffersOnDemand = new Map();\n        // BufferForCPU\n        {\n            let memorySize = MemoryManager.bufferWidthLength * MemoryManager.bufferHeightLength /*width*height*/ * 4 /*rgba*/ * 8 /*byte*/ * cpuGeneric;\n            const arrayBuffer = new ArrayBuffer(this.__makeMultipleOf4byteSize(memorySize));\n            const buffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n                byteLength: arrayBuffer.byteLength,\n                buffer: arrayBuffer,\n                name: _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__[\"BufferUse\"].CPUGeneric.toString()\n            });\n            this.__buffers[buffer.name] = buffer;\n        }\n        // BufferForGPUInstanceData\n        {\n            let memorySize = MemoryManager.bufferWidthLength * MemoryManager.bufferHeightLength /*width*height*/ * 4 /*rgba*/ * 8 /*byte*/ * gpuInstanceData;\n            const arrayBuffer = new ArrayBuffer(this.__makeMultipleOf4byteSize(memorySize));\n            const buffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n                byteLength: arrayBuffer.byteLength,\n                buffer: arrayBuffer,\n                name: _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__[\"BufferUse\"].GPUInstanceData.toString()\n            });\n            this.__buffers[buffer.name] = buffer;\n        }\n        // BufferForGPUVertexData\n        {\n            let memorySize = MemoryManager.bufferWidthLength * MemoryManager.bufferHeightLength /*width*height*/ * 4 /*rgba*/ * 8 /*byte*/ * gpuVertexData;\n            const arrayBuffer = new ArrayBuffer(this.__makeMultipleOf4byteSize(memorySize));\n            const buffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n                byteLength: arrayBuffer.byteLength,\n                buffer: arrayBuffer,\n                name: _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__[\"BufferUse\"].GPUVertexData.toString()\n            });\n            this.__buffers[buffer.name] = buffer;\n        }\n        // // BufferForUBO\n        // {\n        //   let memorySize = MemoryManager.bufferWidthLength * MemoryManager.bufferHeightLength/*width*height*/ * 4/*rgba*/ * 8/*byte*/ * UBOGeneric;\n        //   const arrayBuffer = new ArrayBuffer(this.__makeMultipleOf4byteSize(memorySize));\n        //   const buffer = new Buffer({\n        //     byteLength: arrayBuffer.byteLength,\n        //     arrayBuffer: arrayBuffer,\n        //     name: BufferUse.UBOGeneric.toString()\n        //   });\n        //   this.__buffers[buffer.name] = buffer;\n        // }\n    }\n    static createInstanceIfNotCreated(cpuGeneric, gpuInstanceData, gpuVertexData, UBOGeneric) {\n        if (!this.__instance) {\n            this.__instance = new MemoryManager(cpuGeneric, gpuInstanceData, gpuVertexData, UBOGeneric);\n            return this.__instance;\n        }\n        return this.__instance;\n    }\n    __makeMultipleOf4byteSize(memorySize) {\n        return memorySize + 4 - memorySize % 4;\n    }\n    static getInstance() {\n        return this.__instance;\n    }\n    getBuffer(bufferUse) {\n        return this.__buffers[bufferUse.toString()];\n    }\n    createBufferOnDemand(size, object) {\n        const arrayBuffer = new ArrayBuffer(size);\n        const buffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n            byteLength: arrayBuffer.byteLength,\n            buffer: arrayBuffer,\n            name: _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__[\"BufferUse\"].UBOGeneric.toString()\n        });\n        this.__buffersOnDemand.set(object.objectUID, buffer);\n        return buffer;\n    }\n    getBufferOnDemand(object) {\n        return this.__buffersOnDemand.get(object.objectUID);\n    }\n    static get bufferWidthLength() {\n        return _Config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dataTextureWidth;\n    }\n    static get bufferHeightLength() {\n        return _Config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dataTextureHeight;\n    }\n    printMemoryUsage() {\n        const cpuGeneric = this.__buffers[_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__[\"BufferUse\"].CPUGeneric.toString()];\n        const gpuInstanceData = this.__buffers[_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__[\"BufferUse\"].GPUInstanceData.toString()];\n        const gpuVertexData = this.__buffers[_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__[\"BufferUse\"].GPUVertexData.toString()];\n        const uboGeneric = this.__buffers[_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__[\"BufferUse\"].UBOGeneric.toString()];\n        console.log(`Memory Usage in Memory Manager:`);\n        console.log(`CPUGeneric: ${cpuGeneric.takenSizeInByte} byte of ${cpuGeneric.byteLength} bytes. (${cpuGeneric.takenSizeInByte / cpuGeneric.byteLength * 100} %) `);\n        console.log(`GPUInstanceData: ${gpuInstanceData.takenSizeInByte} byte of ${gpuInstanceData.byteLength} bytes. (${gpuInstanceData.takenSizeInByte / gpuInstanceData.byteLength * 100} %) `);\n        console.log(`GPUVertexData: ${gpuVertexData.takenSizeInByte} byte of ${gpuVertexData.byteLength} bytes. (${gpuVertexData.takenSizeInByte / gpuVertexData.byteLength * 100} %) `);\n        console.log(`UBOGeneric: ${uboGeneric.takenSizeInByte} byte of ${uboGeneric.byteLength} bytes. (${uboGeneric.takenSizeInByte / uboGeneric.byteLength * 100} %) `);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/core/MemoryManager.ts?");

/***/ }),

/***/ "./src/foundation/core/RnObject.ts":
/*!*****************************************!*\
  !*** ./src/foundation/core/RnObject.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return RnObject; });\n/**\n * The root class of the objects in Rhodonite\n */\nclass RnObject {\n    constructor() {\n        this.__objectUid = RnObject.InvalidObjectUID;\n        this.__tags = {}; // Tag string allows alphabet, digit and underscore (_) only\n        this.__conbinedTagString = ''; // Tag string allows alphabet, digit and underscore (_) only\n        this.__objectUid = RnObject.currentMaxObjectCount++;\n        RnObject.__objects[this.__objectUid] = this;\n        this.__uniqueName = 'entity_of_uid_' + this.__objectUid;\n        RnObject.__uniqueNames[this.__objectUid] = this.__uniqueName;\n        RnObject.__objectsByNameMap.set(this.__uniqueName, this);\n    }\n    searchByTag(tag, value) {\n        for (let obj of RnObject.__objects) {\n            if (obj.getTagValue(tag) === value) {\n                return obj;\n            }\n        }\n        return void 0;\n    }\n    /**\n     * Gets the objectUID of the object.\n     */\n    get objectUID() {\n        return this.__objectUid;\n    }\n    /**\n     * Gets the object by corresponding to the objectUID.\n     * @param objectUid The objectUID of the object.\n     */\n    static getRnObject(objectUid) {\n        return RnObject.__objects[objectUid];\n    }\n    /**\n     * Gets the object by the unique name.\n     * @param uniqueName The unique name of the object.\n     */\n    static getRnObjectByName(uniqueName) {\n        return RnObject.__objectsByNameMap.get(uniqueName);\n    }\n    /**\n     * Try to set a unique name of the entity.\n     * @param name\n     * @param toAddNameIfConflict If true, force to add name string to the current unique name string. If false, give up to change name.\n     */\n    tryToSetUniqueName(name, toAddNameIfConflict) {\n        if (RnObject.__uniqueNames.indexOf(name) !== -1) {\n            // Conflict\n            if (toAddNameIfConflict) {\n                const newName = name + '_(' + this.__uniqueName + ')';\n                if (RnObject.__uniqueNames.indexOf(newName) === -1) {\n                    this.__uniqueName = newName;\n                    RnObject.__uniqueNames[this.__objectUid] = this.__uniqueName;\n                    RnObject.__objectsByNameMap.set(this.__uniqueName, this);\n                    return true;\n                }\n            }\n            return false;\n        }\n        else {\n            this.__uniqueName = name;\n            RnObject.__uniqueNames[this.__objectUid] = this.__uniqueName;\n            RnObject.__objectsByNameMap.set(this.__uniqueName, this);\n            return true;\n        }\n    }\n    /**\n     * Validate the string of tags.\n     * @param val The string to be validated\n     */\n    validateTagString(val) {\n        var reg = new RegExp(/[!\"#$%&'()\\*\\+\\-\\s\\.,\\/:;<=>?@\\[\\\\\\]^`{|}~]/g);\n        if (reg.test(val)) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Tries to set tag (name and value).\n     * @param tagName The tag name.\n     * @param tagValue Tha value of the tag.\n     */\n    tryToSetTag(tag) {\n        if (this.validateTagString(tag.tag)) {\n            if (this.hasTag(tag.tag)) {\n                this.removeTag(tag.tag);\n            }\n            this.__tags[tag.tag] = tag.value;\n            this.__conbinedTagString += `${tag.tag}:${tag.value}` + ' ';\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Gets the value of the tag.\n     * @param tagName The tag name.\n     */\n    getTagValue(tagName) {\n        return this.__tags[tagName];\n    }\n    /**\n     * Gets the tag object.\n     * @param tagName The tag name.\n     */\n    getTag(tagName) {\n        const tag = {\n            tag: tagName,\n            value: this.__tags[tagName]\n        };\n        return tag;\n    }\n    /**\n     * Gets the boolean value whether this object has the tag or not.\n     * @param tagName The tag name.\n     */\n    hasTag(tagName) {\n        if (this.__tags[tagName] != null) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    /**\n     * Remove the tag.\n     * @param tagName The tag name.\n     */\n    removeTag(tagName) {\n        const strToDelete = `${tagName}:${this.__tags[tagName]}` + ' ';\n        this.__conbinedTagString.replace(this.__conbinedTagString, \"\");\n        delete this.__tags[tagName];\n    }\n    /**\n     * Confirms the matching of the tag name and tag value.\n     * @param tagName The tag name.\n     * @param tagValue The tag value.\n     */\n    matchTag(tagName, tagValue) {\n        if (this.__tags[tagName] === tagValue) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    /**\n     * Comfirm that this object's tags includes given an array of string.\n     * @param stringArray an array of string.\n     */\n    matchTagsAsFreeStrings(stringArray) {\n        let regExpStr = '^';\n        for (let i = 0; i < stringArray.length; i++) {\n            regExpStr += `(?=.*${stringArray[i]})`;\n        }\n        var reg = new RegExp(regExpStr);\n        if (reg.test(this.__conbinedTagString)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    /**\n     * Comfirm that this object's tags includes given set of tags.\n     * @param tags The set of tags.\n     */\n    matchTags(tags) {\n        let regExpStr = '^';\n        for (let tagName in tags) {\n            regExpStr += `(?=.*${[tagName]}:${tags[tagName]})`;\n        }\n        var reg = new RegExp(regExpStr);\n        if (reg.test(this.__conbinedTagString)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    /**\n     * Get the unique name of the entity.\n     */\n    get uniqueName() {\n        return this.__uniqueName;\n    }\n    /**\n     * @private\n     */\n    static _reset() {\n        this.currentMaxObjectCount = 0;\n        this.__uniqueNames = [];\n        this.__objectsByNameMap = new Map();\n        this.__objects = [];\n    }\n}\nRnObject.InvalidObjectUID = -1;\nRnObject.currentMaxObjectCount = 0;\nRnObject.__uniqueNames = [];\nRnObject.__objectsByNameMap = new Map();\nRnObject.__objects = [];\n\n\n//# sourceURL=webpack:///./src/foundation/core/RnObject.ts?");

/***/ }),

/***/ "./src/foundation/definitions/AlphaMode.ts":
/*!*************************************************!*\
  !*** ./src/foundation/definitions/AlphaMode.ts ***!
  \*************************************************/
/*! exports provided: AlphaMode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlphaMode\", function() { return AlphaMode; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass AlphaModeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst Opaque = new AlphaModeClass({ index: 0, str: 'OPAQUE' });\nconst Mask = new AlphaModeClass({ index: 1, str: 'MASK' });\nconst Blend = new AlphaModeClass({ index: 2, str: 'BLEND' });\nconst typeList = [Opaque, Mask, Blend];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nconst AlphaMode = Object.freeze({ Opaque, Mask, Blend, from, fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/AlphaMode.ts?");

/***/ }),

/***/ "./src/foundation/definitions/Animation.ts":
/*!*************************************************!*\
  !*** ./src/foundation/definitions/Animation.ts ***!
  \*************************************************/
/*! exports provided: Animation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Animation\", function() { return Animation; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass AnimationClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst Linear = new AnimationClass({ index: 0, str: 'Linear' });\nconst Step = new AnimationClass({ index: 1, str: 'Step' });\nconst CubicSpline = new AnimationClass({ index: 2, str: 'CubicSpline' });\nconst typeList = [Linear, Step, CubicSpline];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nconst Animation = Object.freeze({ Linear, Step, CubicSpline, from, fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/Animation.ts?");

/***/ }),

/***/ "./src/foundation/definitions/BufferUse.ts":
/*!*************************************************!*\
  !*** ./src/foundation/definitions/BufferUse.ts ***!
  \*************************************************/
/*! exports provided: BufferUse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BufferUse\", function() { return BufferUse; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass BufferUseClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst GPUInstanceData = new BufferUseClass({ index: 0, str: 'GPUInstanceData' });\nconst GPUVertexData = new BufferUseClass({ index: 1, str: 'GPUVertexData' });\nconst UBOGeneric = new BufferUseClass({ index: 2, str: 'UBOGeneric' });\nconst CPUGeneric = new BufferUseClass({ index: 3, str: 'CPUGeneric' });\nconst typeList = [GPUInstanceData, GPUVertexData, UBOGeneric, CPUGeneric];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nconst BufferUse = Object.freeze({ GPUInstanceData, GPUVertexData, UBOGeneric, CPUGeneric, from, fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/BufferUse.ts?");

/***/ }),

/***/ "./src/foundation/definitions/CameraControllerType.ts":
/*!************************************************************!*\
  !*** ./src/foundation/definitions/CameraControllerType.ts ***!
  \************************************************************/
/*! exports provided: CameraControllerType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CameraControllerType\", function() { return CameraControllerType; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass CameraControllerTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst Orbit = new CameraControllerTypeClass({ index: 0, str: 'Orbit' });\nconst WalkThrough = new CameraControllerTypeClass({ index: 1, str: 'WalkThrough' });\nconst typeList = [Orbit, WalkThrough];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nconst CameraControllerType = Object.freeze({ Orbit, WalkThrough, from, fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/CameraControllerType.ts?");

/***/ }),

/***/ "./src/foundation/definitions/CameraType.ts":
/*!**************************************************!*\
  !*** ./src/foundation/definitions/CameraType.ts ***!
  \**************************************************/
/*! exports provided: CameraType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CameraType\", function() { return CameraType; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass CameraTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst Perspective = new CameraTypeClass({ index: 0, str: 'Perspective' });\nconst Orthographic = new CameraTypeClass({ index: 1, str: 'Orthographic' });\nconst Frustom = new CameraTypeClass({ index: 2, str: 'Frustom' });\nconst typeList = [Perspective, Orthographic, Frustom];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nconst CameraType = Object.freeze({ Perspective, Orthographic, Frustom, from, fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/CameraType.ts?");

/***/ }),

/***/ "./src/foundation/definitions/ComponentType.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/definitions/ComponentType.ts ***!
  \*****************************************************/
/*! exports provided: ComponentType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ComponentType\", function() { return ComponentType; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass ComponentTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str, sizeInBytes }) {\n        super({ index, str });\n        this.__sizeInBytes = sizeInBytes;\n    }\n    getSizeInBytes() {\n        return this.__sizeInBytes;\n    }\n}\nconst Unknown = new ComponentTypeClass({ index: 5119, str: 'UNKNOWN', sizeInBytes: 0 });\nconst Byte = new ComponentTypeClass({ index: 5120, str: 'BYTE', sizeInBytes: 1 });\nconst UnsignedByte = new ComponentTypeClass({ index: 5121, str: 'UNSIGNED_BYTE', sizeInBytes: 1 });\nconst Short = new ComponentTypeClass({ index: 5122, str: 'SHORT', sizeInBytes: 2 });\nconst UnsignedShort = new ComponentTypeClass({ index: 5123, str: 'UNSIGNED_SHORT', sizeInBytes: 2 });\nconst Int = new ComponentTypeClass({ index: 5124, str: 'INT', sizeInBytes: 4 });\nconst UnsingedInt = new ComponentTypeClass({ index: 5125, str: 'UNSIGNED_INT', sizeInBytes: 4 });\nconst Float = new ComponentTypeClass({ index: 5126, str: 'FLOAT', sizeInBytes: 4 });\nconst Double = new ComponentTypeClass({ index: 5127, str: 'DOUBLE', sizeInBytes: 8 });\nconst Bool = new ComponentTypeClass({ index: 35670, str: 'BOOL', sizeInBytes: 1 });\nconst HalfFloat = new ComponentTypeClass({ index: 0x8D61, str: 'HALF_FLOAT_OES', sizeInBytes: 2 });\nconst typeList = [Unknown, Byte, UnsignedByte, Short, UnsignedShort, Int, UnsingedInt, Float, Double, HalfFloat];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nfunction fromTypedArray(typedArray) {\n    if (typedArray instanceof Int8Array) {\n        return Byte;\n    }\n    else if (typedArray instanceof Uint8Array || typedArray instanceof Uint8ClampedArray) {\n        return UnsignedByte;\n    }\n    else if (typedArray instanceof Int16Array) {\n        return Short;\n    }\n    else if (typedArray instanceof Uint16Array) {\n        return UnsignedShort;\n    }\n    else if (typedArray instanceof Int32Array) {\n        return Int;\n    }\n    else if (typedArray instanceof Uint32Array) {\n        return UnsingedInt;\n    }\n    else if (typedArray instanceof Float32Array) {\n        return Float;\n    }\n    else if (typedArray instanceof Float64Array) {\n        return Double;\n    }\n    return Unknown;\n}\nfunction fromGlslString(str_) {\n    let str = str_;\n    switch (str_) {\n        case 'int':\n            str = 'INT';\n            break;\n        case 'float':\n            str = 'FLOAT';\n            break;\n        case 'vec2':\n            str = 'FLOAT';\n            break;\n        case 'vec3':\n            str = 'FLOAT';\n            break;\n        case 'vec4':\n            str = 'FLOAT';\n            break;\n        case 'mat2':\n            str = 'FLOAT';\n            break;\n        case 'mat3':\n            str = 'FLOAT';\n            break;\n        case 'mat4':\n            str = 'FLOAT';\n            break;\n        case 'ivec2':\n            str = 'INT';\n            break;\n        case 'ivec3':\n            str = 'INT';\n            break;\n        case 'ivec4':\n            str = 'INT';\n            break;\n    }\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nconst ComponentType = Object.freeze({ Unknown, Byte, UnsignedByte, Short, UnsignedShort, Int, UnsingedInt, Float, Double, Bool, HalfFloat, from, fromTypedArray, fromString, fromGlslString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/ComponentType.ts?");

/***/ }),

/***/ "./src/foundation/definitions/CompositionType.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/definitions/CompositionType.ts ***!
  \*******************************************************/
/*! exports provided: CompositionType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CompositionType\", function() { return CompositionType; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n/* harmony import */ var _ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n\n\nclass CompositionTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str, glslStr, hlslStr, numberOfComponents }) {\n        super({ index, str });\n        this.__numberOfComponents = 0;\n        this.__numberOfComponents = numberOfComponents;\n        this.__glslStr = glslStr;\n        this.__hlslStr = hlslStr;\n    }\n    getNumberOfComponents() {\n        return this.__numberOfComponents;\n    }\n    getGlslStr(componentType) {\n        if (componentType === _ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Float || componentType === _ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Double || this === CompositionType.Texture2D || this === CompositionType.TextureCube) {\n            return this.__glslStr;\n        }\n        else if (componentType === _ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Byte || componentType === _ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Short || componentType === _ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Int) {\n            if (this === CompositionType.Scalar) {\n                return 'int';\n            }\n            else {\n                return 'i' + this.__glslStr;\n            }\n        }\n        else if (componentType === _ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Bool) {\n            return 'bool';\n        }\n        return 'unknown';\n    }\n}\nconst Unknown = new CompositionTypeClass({ index: -1, str: 'UNKNOWN', glslStr: 'unknown', hlslStr: 'unknown', numberOfComponents: 0 });\nconst Scalar = new CompositionTypeClass({ index: 0, str: 'SCALAR', glslStr: 'float', hlslStr: 'float', numberOfComponents: 1 });\nconst Vec2 = new CompositionTypeClass({ index: 1, str: 'VEC2', glslStr: 'vec2', hlslStr: 'float2', numberOfComponents: 2 });\nconst Vec3 = new CompositionTypeClass({ index: 2, str: 'VEC3', glslStr: 'vec3', hlslStr: 'float3', numberOfComponents: 3 });\nconst Vec4 = new CompositionTypeClass({ index: 3, str: 'VEC4', glslStr: 'vec4', hlslStr: 'float4', numberOfComponents: 4 });\nconst Mat2 = new CompositionTypeClass({ index: 4, str: 'MAT2', glslStr: 'mat2', hlslStr: 'float2x2', numberOfComponents: 4 });\nconst Mat3 = new CompositionTypeClass({ index: 5, str: 'MAT3', glslStr: 'mat3', hlslStr: 'float3x3', numberOfComponents: 9 });\nconst Mat4 = new CompositionTypeClass({ index: 6, str: 'MAT4', glslStr: 'mat4', hlslStr: 'float4x4', numberOfComponents: 16 });\nconst Texture2D = new CompositionTypeClass({ index: 7, str: 'TEXTURE_2D', glslStr: 'sampler2D', hlslStr: 'Texture2D', numberOfComponents: 1 });\nconst TextureCube = new CompositionTypeClass({ index: 8, str: 'TEXTURE_CUBE_MAP', glslStr: 'samplerCube', hlslStr: 'TextureCube', numberOfComponents: 1 });\nconst ScalarArray = new CompositionTypeClass({ index: 9, str: 'SCALAR_ARRAY', glslStr: 'float', hlslStr: 'float', numberOfComponents: 1 });\nconst Vec2Array = new CompositionTypeClass({ index: 10, str: 'VEC2_ARRAY', glslStr: 'vec2', hlslStr: 'float2', numberOfComponents: 2 });\nconst Vec3Array = new CompositionTypeClass({ index: 11, str: 'VEC3_ARRAY', glslStr: 'vec3', hlslStr: 'float3', numberOfComponents: 3 });\nconst Vec4Array = new CompositionTypeClass({ index: 12, str: 'VEC4_ARRAY', glslStr: 'vec4', hlslStr: 'float4', numberOfComponents: 4 });\nconst typeList = [Unknown, Scalar, Vec2, Vec3, Vec4, Mat2, Mat3, Mat4, Texture2D, TextureCube, ScalarArray, Vec2Array, Vec3Array, Vec4Array];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nfunction fromGlslString(str_) {\n    let str = str_;\n    switch (str_) {\n        case 'int':\n            str = 'scalar';\n            break;\n        case 'float':\n            str = 'scalar';\n            break;\n        case 'ivec2':\n            str = 'vec2';\n            break;\n        case 'ivec3':\n            str = 'vec3';\n            break;\n        case 'ivec4':\n            str = 'vec4';\n            break;\n    }\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nfunction isArray(compositionType) {\n    if (compositionType === ScalarArray || compositionType === Vec2Array || compositionType === Vec3Array || compositionType === Vec4Array) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nconst CompositionType = Object.freeze({ Unknown, Scalar, Vec2, Vec3, Vec4, Mat2, Mat3, Mat4, Texture2D, TextureCube, ScalarArray, Vec2Array, Vec3Array, Vec4Array, from, fromString, fromGlslString, isArray });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/CompositionType.ts?");

/***/ }),

/***/ "./src/foundation/definitions/HdriFormat.ts":
/*!**************************************************!*\
  !*** ./src/foundation/definitions/HdriFormat.ts ***!
  \**************************************************/
/*! exports provided: HdriFormat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HdriFormat\", function() { return HdriFormat; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass HdriFormatClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst LDR_SRGB = new HdriFormatClass({ index: 0, str: '.ldr_srgb' });\nconst LDR_LINEAR = new HdriFormatClass({ index: 1, str: '.ldr_linear' });\nconst HDR = new HdriFormatClass({ index: 2, str: '.hdr' });\nconst RGBE_PNG = new HdriFormatClass({ index: 3, str: '.rgbe.png' });\nconst RGB9_E5_PNG = new HdriFormatClass({ index: 4, str: '.rgb9_e5.png' });\nconst OpenEXR = new HdriFormatClass({ index: 5, str: '.exr' });\nconst typeList = [LDR_SRGB, LDR_LINEAR, HDR, RGBE_PNG, RGB9_E5_PNG, OpenEXR];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nconst HdriFormat = Object.freeze({ LDR_SRGB, LDR_LINEAR, HDR, RGBE_PNG, RGB9_E5_PNG, OpenEXR });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/HdriFormat.ts?");

/***/ }),

/***/ "./src/foundation/definitions/LightType.ts":
/*!*************************************************!*\
  !*** ./src/foundation/definitions/LightType.ts ***!
  \*************************************************/
/*! exports provided: LightType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LightType\", function() { return LightType; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass LightTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst Directional = new LightTypeClass({ index: 0, str: 'Directional' });\nconst Point = new LightTypeClass({ index: 1, str: 'Point' });\nconst Spot = new LightTypeClass({ index: 2, str: 'Spot' });\nconst Ambient = new LightTypeClass({ index: 3, str: 'Ambient' });\nconst typeList = [Point, Directional, Spot, Ambient];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nconst LightType = Object.freeze({ Point, Directional, Spot, Ambient, from, fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/LightType.ts?");

/***/ }),

/***/ "./src/foundation/definitions/PixelFormat.ts":
/*!***************************************************!*\
  !*** ./src/foundation/definitions/PixelFormat.ts ***!
  \***************************************************/
/*! exports provided: PixelFormat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PixelFormat\", function() { return PixelFormat; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass PixelFormatClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst DepthComponent = new PixelFormatClass({ index: 0x1902, str: 'DEPTH_COMPONENT' });\nconst Alpha = new PixelFormatClass({ index: 0x1906, str: 'ALPHA' });\nconst RGB = new PixelFormatClass({ index: 0x1907, str: 'RGB' });\nconst RGBA = new PixelFormatClass({ index: 0x1908, str: 'RGBA' });\nconst Luminance = new PixelFormatClass({ index: 0x1909, str: 'LUMINANCE' });\nconst LuminanceAlpha = new PixelFormatClass({ index: 0x190A, str: 'LUMINANCE_ALPHA' });\nconst typeList = [DepthComponent, Alpha, RGB, RGBA, Luminance, LuminanceAlpha];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nconst PixelFormat = Object.freeze({ DepthComponent, Alpha, RGB, RGBA, Luminance, LuminanceAlpha });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/PixelFormat.ts?");

/***/ }),

/***/ "./src/foundation/definitions/PrimitiveMode.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/definitions/PrimitiveMode.ts ***!
  \*****************************************************/
/*! exports provided: PrimitiveMode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PrimitiveMode\", function() { return PrimitiveMode; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass PrimitiveModeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst Unknown = new PrimitiveModeClass({ index: -1, str: 'UNKNOWN' });\nconst Points = new PrimitiveModeClass({ index: 0, str: 'POINTS' });\nconst Lines = new PrimitiveModeClass({ index: 1, str: 'LINES' });\nconst LineLoop = new PrimitiveModeClass({ index: 2, str: 'LINE_LOOP' });\nconst LineStrip = new PrimitiveModeClass({ index: 3, str: 'LINE_STRIP' });\nconst Triangles = new PrimitiveModeClass({ index: 4, str: 'TRIANGLES' });\nconst TriangleStrip = new PrimitiveModeClass({ index: 5, str: 'TRIANGLE_STRIP' });\nconst TriangleFan = new PrimitiveModeClass({ index: 6, str: 'TRIANGLE_FAN' });\nconst typeList = [Unknown, Points, Lines, LineLoop, LineStrip, Triangles, TriangleStrip, TriangleFan];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nconst PrimitiveMode = Object.freeze({ Unknown, Points, Lines, LineLoop, LineStrip, Triangles, TriangleStrip, TriangleFan, from });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/PrimitiveMode.ts?");

/***/ }),

/***/ "./src/foundation/definitions/ProcessApproach.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/definitions/ProcessApproach.ts ***!
  \*******************************************************/
/*! exports provided: ProcessApproach */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ProcessApproach\", function() { return ProcessApproach; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass ProcessApproachClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst None = new ProcessApproachClass({ index: 0, str: 'NONE' });\nconst UniformWebGL1 = new ProcessApproachClass({ index: 1, str: 'UNIFORM_WEBGL1' });\nconst UniformWebGL2 = new ProcessApproachClass({ index: 2, str: 'UNIFORM_WEBGL2' });\nconst DataTextureWebGL1 = new ProcessApproachClass({ index: 3, str: 'DATA_TEXTURE_WEBGL1' });\nconst DataTextureWebGL2 = new ProcessApproachClass({ index: 4, str: 'DATA_TEXTURE_WEBGL2' });\nconst UBOWebGL2 = new ProcessApproachClass({ index: 5, str: 'UBO_WEBGL2' });\nconst TransformFeedbackWebGL2 = new ProcessApproachClass({ index: 6, str: 'TRNASFORM_FEEDBACK_WEBGL2' });\nconst FastestWebGL1 = new ProcessApproachClass({ index: 7, str: 'FASTEST_WEBGL1' });\nconst typeList = [None, UniformWebGL1, UniformWebGL2, DataTextureWebGL1, DataTextureWebGL2, UBOWebGL2, TransformFeedbackWebGL2, FastestWebGL1];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nconst ProcessApproach = Object.freeze({ None, UniformWebGL1, UniformWebGL2, DataTextureWebGL1, DataTextureWebGL2, UBOWebGL2, TransformFeedbackWebGL2, FastestWebGL1 });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/ProcessApproach.ts?");

/***/ }),

/***/ "./src/foundation/definitions/ProcessStage.ts":
/*!****************************************************!*\
  !*** ./src/foundation/definitions/ProcessStage.ts ***!
  \****************************************************/
/*! exports provided: ProcessStage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ProcessStage\", function() { return ProcessStage; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass ProcessStageClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str, methodName }) {\n        super({ index, str });\n        this.methodName = methodName;\n    }\n}\nconst Unknown = new ProcessStageClass({ index: -1, str: 'UNKNOWN', methodName: '$unknown' });\nconst Create = new ProcessStageClass({ index: 0, str: 'CREATE', methodName: '$create' });\nconst Load = new ProcessStageClass({ index: 1, str: 'LOAD', methodName: '$load' });\nconst Mount = new ProcessStageClass({ index: 2, str: 'MOUNT', methodName: '$mount' });\nconst Logic = new ProcessStageClass({ index: 3, str: 'LOGIC', methodName: '$logic' });\nconst PreRender = new ProcessStageClass({ index: 4, str: 'PRE_RENDER', methodName: '$prerender' });\nconst Render = new ProcessStageClass({ index: 5, str: 'RENDER', methodName: '$render' });\nconst Unmount = new ProcessStageClass({ index: 6, str: 'UNMOUNT', methodName: '$unmount' });\nconst Discard = new ProcessStageClass({ index: 7, str: 'DISCARD', methodName: '$discard' });\nconst typeList = [Unknown, Create, Load, Mount, Logic, PreRender, Render, Unmount, Discard];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nconst ProcessStage = Object.freeze({ Unknown, Create, Load, Mount, Logic, PreRender, Render, Unmount, Discard, from });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/ProcessStage.ts?");

/***/ }),

/***/ "./src/foundation/definitions/RenderBufferTarget.ts":
/*!**********************************************************!*\
  !*** ./src/foundation/definitions/RenderBufferTarget.ts ***!
  \**********************************************************/
/*! exports provided: RenderBufferTarget */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RenderBufferTarget\", function() { return RenderBufferTarget; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass RenderBufferTargetClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst None = new RenderBufferTargetClass({ index: -2, str: 'NONE' });\nconst Back = new RenderBufferTargetClass({ index: -1, str: 'BACK' });\nconst ColorAttachment0 = new RenderBufferTargetClass({ index: 0, str: 'COLOR_ATTACHMENT0' });\nconst ColorAttachment1 = new RenderBufferTargetClass({ index: 1, str: 'COLOR_ATTACHMENT1' });\nconst ColorAttachment2 = new RenderBufferTargetClass({ index: 2, str: 'COLOR_ATTACHMENT2' });\nconst ColorAttachment3 = new RenderBufferTargetClass({ index: 3, str: 'COLOR_ATTACHMENT3' });\nconst ColorAttachment4 = new RenderBufferTargetClass({ index: 4, str: 'COLOR_ATTACHMENT4' });\nconst ColorAttachment5 = new RenderBufferTargetClass({ index: 5, str: 'COLOR_ATTACHMENT5' });\nconst ColorAttachment6 = new RenderBufferTargetClass({ index: 6, str: 'COLOR_ATTACHMENT6' });\nconst ColorAttachment7 = new RenderBufferTargetClass({ index: 7, str: 'COLOR_ATTACHMENT7' });\nconst ColorAttachment8 = new RenderBufferTargetClass({ index: 8, str: 'COLOR_ATTACHMENT8' });\nconst ColorAttachment9 = new RenderBufferTargetClass({ index: 9, str: 'COLOR_ATTACHMENT9' });\nconst ColorAttachment10 = new RenderBufferTargetClass({ index: 10, str: 'COLOR_ATTACHMENT10' });\nconst ColorAttachment11 = new RenderBufferTargetClass({ index: 11, str: 'COLOR_ATTACHMENT11' });\nconst ColorAttachment12 = new RenderBufferTargetClass({ index: 12, str: 'COLOR_ATTACHMENT12' });\nconst ColorAttachment13 = new RenderBufferTargetClass({ index: 13, str: 'COLOR_ATTACHMENT13' });\nconst ColorAttachment14 = new RenderBufferTargetClass({ index: 14, str: 'COLOR_ATTACHMENT14' });\nconst ColorAttachment15 = new RenderBufferTargetClass({ index: 15, str: 'COLOR_ATTACHMENT15' });\nconst typeList = [None, Back, ColorAttachment0, ColorAttachment1, ColorAttachment2, ColorAttachment3, ColorAttachment4,\n    ColorAttachment5, ColorAttachment6, ColorAttachment7, ColorAttachment8, ColorAttachment9, ColorAttachment10,\n    ColorAttachment11, ColorAttachment12, ColorAttachment13, ColorAttachment14, ColorAttachment15];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nconst RenderBufferTarget = Object.freeze({ None, Back, ColorAttachment0, ColorAttachment1, ColorAttachment2, ColorAttachment3, ColorAttachment4,\n    ColorAttachment5, ColorAttachment6, ColorAttachment7, ColorAttachment8, ColorAttachment9, ColorAttachment10,\n    ColorAttachment11, ColorAttachment12, ColorAttachment13, ColorAttachment14, ColorAttachment15, from });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/RenderBufferTarget.ts?");

/***/ }),

/***/ "./src/foundation/definitions/ShaderNode.ts":
/*!**************************************************!*\
  !*** ./src/foundation/definitions/ShaderNode.ts ***!
  \**************************************************/
/*! exports provided: ShaderNode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShaderNode\", function() { return ShaderNode; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass ShaderNodeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst ClassicShading = new ShaderNodeClass({ index: 0, str: 'ClassicShading' });\nconst PBRShading = new ShaderNodeClass({ index: 1, str: 'PBRShading' });\nconst Lerp = new ShaderNodeClass({ index: 2, str: 'Lerp' });\nconst Add = new ShaderNodeClass({ index: 3, str: 'Add' });\nconst typeList = [ClassicShading, PBRShading];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nconst ShaderNode = Object.freeze({ ClassicShading, PBRShading, from, fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/ShaderNode.ts?");

/***/ }),

/***/ "./src/foundation/definitions/ShaderSemantics.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/definitions/ShaderSemantics.ts ***!
  \*******************************************************/
/*! exports provided: ShaderSemanticsClass, ShaderSemantics */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShaderSemanticsClass\", function() { return ShaderSemanticsClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShaderSemantics\", function() { return ShaderSemantics; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n/* harmony import */ var _CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n\n\nclass ShaderSemanticsClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ str }) {\n        super({ index: ++ShaderSemanticsClass.__indexCount * ShaderSemanticsClass._scale, str, noCheckStrUnique: true });\n        ShaderSemanticsClass.__classes[this.index] = this;\n    }\n    static getShaderSemanticByIndex(index) {\n        return this.__classes[Math.abs(index) - Math.abs(index) % this._scale];\n    }\n    static isNonArrayShaderSemanticIndex(index) {\n        if (index >= this._scale) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    static isArrayAndZeroIndexShaderSemanticIndex(index) {\n        if (index < 0 && Math.abs(index) % ShaderSemanticsClass._scale === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    static isArrayAndNonZeroIndexShaderSemanticIndex(index) {\n        if (index < 0 && Math.abs(index) % ShaderSemanticsClass._scale !== 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n}\nShaderSemanticsClass.__indexCount = -1;\nShaderSemanticsClass._scale = 10000;\nShaderSemanticsClass.__classes = [];\nconst WorldMatrix = new ShaderSemanticsClass({ str: 'worldMatrix' });\nconst ViewMatrix = new ShaderSemanticsClass({ str: 'viewMatrix' });\nconst ProjectionMatrix = new ShaderSemanticsClass({ str: 'projectionMatrix' });\nconst NormalMatrix = new ShaderSemanticsClass({ str: 'normalMatrix' });\nconst BoneMatrix = new ShaderSemanticsClass({ str: 'boneMatrix' });\nconst BaseColorFactor = new ShaderSemanticsClass({ str: 'baseColorFactor' });\nconst BaseColorTexture = new ShaderSemanticsClass({ str: 'baseColorTexture' });\nconst NormalTexture = new ShaderSemanticsClass({ str: 'normalTexture' });\nconst MetallicRoughnessTexture = new ShaderSemanticsClass({ str: 'metallicRoughnessTexture' });\nconst OcclusionTexture = new ShaderSemanticsClass({ str: 'occlusionTexture' });\nconst EmissiveTexture = new ShaderSemanticsClass({ str: 'emissiveTexture' });\nconst LightNumber = new ShaderSemanticsClass({ str: 'lightNumber' });\nconst LightPosition = new ShaderSemanticsClass({ str: 'lightPosition' });\nconst LightDirection = new ShaderSemanticsClass({ str: 'lightDirection' });\nconst LightIntensity = new ShaderSemanticsClass({ str: 'lightIntensity' });\nconst MetallicRoughnessFactor = new ShaderSemanticsClass({ str: 'metallicRoughnessFactor' });\nconst BrdfLutTexture = new ShaderSemanticsClass({ str: 'brdfLutTexture' });\nconst DiffuseEnvTexture = new ShaderSemanticsClass({ str: 'diffuseEnvTexture' });\nconst SpecularEnvTexture = new ShaderSemanticsClass({ str: 'specularEnvTexture' });\nconst IBLParameter = new ShaderSemanticsClass({ str: 'iblParameter' });\nconst ViewPosition = new ShaderSemanticsClass({ str: 'viewPosition' });\nconst Wireframe = new ShaderSemanticsClass({ str: 'wireframe' });\nconst DiffuseColorFactor = new ShaderSemanticsClass({ str: 'diffuseColorFactor' });\nconst DiffuseColorTexture = new ShaderSemanticsClass({ str: 'diffuseColorTexture' });\nconst SpecularColorFactor = new ShaderSemanticsClass({ str: 'specularColorFactor' });\nconst SpecularColorTexture = new ShaderSemanticsClass({ str: 'specularColorTexture' });\nconst Shininess = new ShaderSemanticsClass({ str: 'shininess' });\nconst ShadingModel = new ShaderSemanticsClass({ str: 'shadingModel' });\nconst SkinningMode = new ShaderSemanticsClass({ str: 'skinningMode' });\nconst GeneralTexture = new ShaderSemanticsClass({ str: 'generalTexture' });\nconst VertexAttributesExistenceArray = new ShaderSemanticsClass({ str: 'vertexAttributesExistenceArray' });\nconst BoneQuaternion = new ShaderSemanticsClass({ str: 'boneQuaternion' });\nconst BoneTranslateScale = new ShaderSemanticsClass({ str: 'boneTranslateScale' });\nconst BoneCompressedChank = new ShaderSemanticsClass({ str: 'boneCompressedChank' });\nconst BoneCompressedInfo = new ShaderSemanticsClass({ str: 'boneCompressedInfo' });\nconst PointSize = new ShaderSemanticsClass({ str: 'pointSize' });\nconst ColorEnvTexture = new ShaderSemanticsClass({ str: 'colorEnvTexture' });\nconst PointDistanceAttenuation = new ShaderSemanticsClass({ str: 'pointDistanceAttenuation' });\nconst HDRIFormat = new ShaderSemanticsClass({ str: 'hdriFormat' });\nconst ScreenInfo = new ShaderSemanticsClass({ str: 'screenInfo' });\nconst DepthTexture = new ShaderSemanticsClass({ str: 'depthTexture' });\nconst LightViewProjectionMatrix = new ShaderSemanticsClass({ str: 'lightViewProjectionMatrix' });\nconst Anisotropy = new ShaderSemanticsClass({ str: 'anisotropy' });\nconst ClearCoatParameter = new ShaderSemanticsClass({ str: 'clearcoatParameter' });\nconst SheenParameter = new ShaderSemanticsClass({ str: 'sheenParameter' });\nconst SpecularGlossinessFactor = new ShaderSemanticsClass({ str: 'specularGlossinessFactor' });\nconst SpecularGlossinessTexture = new ShaderSemanticsClass({ str: 'specularGlossinessTexture' });\nconst EntityUID = new ShaderSemanticsClass({ str: 'entityUID' });\nconst MorphTargetNumber = new ShaderSemanticsClass({ str: 'morphTargetNumber' });\nconst DataTextureMorphOffsetPosition = new ShaderSemanticsClass({ str: 'dataTextureMorphOffsetPosition' });\nconst MorphWeights = new ShaderSemanticsClass({ str: 'morphWeights' });\nconst CurrentComponentSIDs = new ShaderSemanticsClass({ str: 'currentComponentSIDs' });\nconst typeList = [WorldMatrix, ViewMatrix, ProjectionMatrix, NormalMatrix, BoneMatrix, BaseColorFactor, BaseColorTexture,\n    NormalTexture, MetallicRoughnessTexture, OcclusionTexture, EmissiveTexture, LightNumber, LightPosition, LightDirection, LightIntensity,\n    MetallicRoughnessFactor, BrdfLutTexture, DiffuseEnvTexture, SpecularEnvTexture, IBLParameter, ViewPosition, Wireframe,\n    DiffuseColorFactor, DiffuseColorTexture, SpecularColorFactor, SpecularColorTexture, Shininess, ShadingModel, SkinningMode, GeneralTexture,\n    VertexAttributesExistenceArray, BoneQuaternion, BoneTranslateScale, BoneCompressedChank, BoneCompressedInfo, PointSize, ColorEnvTexture, PointDistanceAttenuation, HDRIFormat,\n    ScreenInfo, DepthTexture, LightViewProjectionMatrix, Anisotropy, ClearCoatParameter, SheenParameter, SpecularGlossinessFactor, SpecularGlossinessTexture,\n    EntityUID, MorphTargetNumber, DataTextureMorphOffsetPosition, MorphWeights, CurrentComponentSIDs];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nfunction fullSemanticStr(info) {\n    let prefix = '';\n    if (info.prefix != null) {\n        prefix = info.prefix;\n    }\n    return prefix + info.semantic.str;\n}\nconst getShaderProperty = (materialTypeName, info, propertyIndex, isGlobalData) => {\n    if (info.isComponentData) {\n        return '';\n    }\n    const returnType = info.compositionType.getGlslStr(info.componentType);\n    let variableName = ShaderSemantics.fullSemanticStr(info);\n    // definition of uniform variable\n    const varType = info.compositionType.getGlslStr(info.componentType);\n    let varIndexStr = '';\n    if (info.maxIndex) {\n        varIndexStr = `[${info.maxIndex}]`;\n    }\n    let varDef = `  uniform ${varType} u_${variableName}${varIndexStr};\\n`;\n    // inner contents of 'get_' shader function\n    let str = '';\n    if (propertyIndex < 0 || _CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].isArray(info.compositionType)) {\n        if (Math.abs(propertyIndex) % ShaderSemanticsClass._scale !== 0 && !_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].isArray(info.compositionType)) {\n            return '';\n        }\n        if (variableName.match(/\\[.+?\\]/)) {\n            variableName = variableName.replace(/\\[.+?\\]/g, `[i]`);\n        }\n        else {\n            variableName += '[i]';\n        }\n        str += `\n    ${returnType} val;\n    for (int i=0; i<${info.maxIndex}; i++) {\n      if (i == index) {\n        val = u_${variableName};\n        break;\n      }\n    }\n    return val;\n    `;\n    }\n    else {\n        str += `return u_${variableName};`;\n    }\n    let funcDef = '';\n    const isTexture = info.compositionType === _CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Texture2D || info.compositionType === _CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].TextureCube;\n    if (!isTexture) {\n        funcDef = `\n  ${returnType} get_${info.semantic.str}(float instanceId, int index) {\n    ${str}\n  }\n`;\n    }\n    return `${varDef}${funcDef}`;\n};\nconst ShaderSemantics = Object.freeze({\n    WorldMatrix, ViewMatrix, ProjectionMatrix, NormalMatrix, BoneMatrix, BaseColorFactor, BaseColorTexture,\n    NormalTexture, MetallicRoughnessTexture, OcclusionTexture, EmissiveTexture, LightNumber, LightPosition, LightDirection, LightIntensity,\n    MetallicRoughnessFactor, BrdfLutTexture, DiffuseEnvTexture, SpecularEnvTexture, IBLParameter, ViewPosition, Wireframe,\n    DiffuseColorFactor, DiffuseColorTexture, SpecularColorFactor, SpecularColorTexture, Shininess, ShadingModel, SkinningMode, GeneralTexture,\n    VertexAttributesExistenceArray, BoneQuaternion, BoneTranslateScale, BoneCompressedChank, BoneCompressedInfo, PointSize, ColorEnvTexture, PointDistanceAttenuation,\n    HDRIFormat, ScreenInfo, DepthTexture, LightViewProjectionMatrix, Anisotropy, ClearCoatParameter, SheenParameter, SpecularGlossinessFactor, SpecularGlossinessTexture,\n    from, fromString, fullSemanticStr, getShaderProperty, EntityUID, MorphTargetNumber, DataTextureMorphOffsetPosition, MorphWeights, CurrentComponentSIDs\n});\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/ShaderSemantics.ts?");

/***/ }),

/***/ "./src/foundation/definitions/ShaderType.ts":
/*!**************************************************!*\
  !*** ./src/foundation/definitions/ShaderType.ts ***!
  \**************************************************/
/*! exports provided: ShaderType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShaderType\", function() { return ShaderType; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass ShaderTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst VertexShader = new ShaderTypeClass({ index: 1, str: 'VertexShader' });\nconst PixelShader = new ShaderTypeClass({ index: 2, str: 'PixelShader' });\nconst VertexAndPixelShader = new ShaderTypeClass({ index: 3, str: 'VertexAndPixelShader' });\nconst ComputeShader = new ShaderTypeClass({ index: 4, str: 'ComputeShader' });\nconst typeList = [VertexShader, PixelShader, VertexAndPixelShader, ComputeShader];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nconst ShaderType = Object.freeze({ VertexShader, PixelShader, VertexAndPixelShader, ComputeShader, from, fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/ShaderType.ts?");

/***/ }),

/***/ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts":
/*!********************************************************************!*\
  !*** ./src/foundation/definitions/ShaderVariableUpdateInterval.ts ***!
  \********************************************************************/
/*! exports provided: ShaderVariableUpdateInterval */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShaderVariableUpdateInterval\", function() { return ShaderVariableUpdateInterval; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass ShaderVariableUpdateIntervalClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst FirstTimeOnly = new ShaderVariableUpdateIntervalClass({ index: 0, str: 'FirstTimeOnly' });\nconst EveryTime = new ShaderVariableUpdateIntervalClass({ index: 1, str: 'EveryTime' });\nconst RenderPass = new ShaderVariableUpdateIntervalClass({ index: 2, str: 'RenderPass' });\nconst typeList = [FirstTimeOnly, EveryTime, RenderPass];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nconst ShaderVariableUpdateInterval = Object.freeze({ FirstTimeOnly, EveryTime, RenderPass, from, fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/ShaderVariableUpdateInterval.ts?");

/***/ }),

/***/ "./src/foundation/definitions/ShadingModel.ts":
/*!****************************************************!*\
  !*** ./src/foundation/definitions/ShadingModel.ts ***!
  \****************************************************/
/*! exports provided: ShadingModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShadingModel\", function() { return ShadingModel; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass ShadingModelClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst Unknown = new ShadingModelClass({ index: -1, str: 'UNKNOWN' });\nconst Constant = new ShadingModelClass({ index: 0, str: 'CONSTANT' });\nconst Lambert = new ShadingModelClass({ index: 1, str: 'LAMBERT' });\nconst BlinnPhong = new ShadingModelClass({ index: 2, str: 'BLINN' });\nconst Phong = new ShadingModelClass({ index: 3, str: 'PHONG' });\nconst typeList = [Unknown, Constant, Lambert, BlinnPhong, Phong];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nconst ShadingModel = Object.freeze({ Unknown, Constant, Lambert, BlinnPhong, Phong, from });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/ShadingModel.ts?");

/***/ }),

/***/ "./src/foundation/definitions/TextureParameter.ts":
/*!********************************************************!*\
  !*** ./src/foundation/definitions/TextureParameter.ts ***!
  \********************************************************/
/*! exports provided: TextureParameter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TextureParameter\", function() { return TextureParameter; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass TextureParameterClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst Nearest = new TextureParameterClass({ index: 0x2600, str: 'NEAREST' });\nconst Linear = new TextureParameterClass({ index: 0x2601, str: 'LINEAR' });\nconst LinearMipmapLinear = new TextureParameterClass({ index: 0x2703, str: 'LINEAR_MIPMAP_LINEAR' });\nconst TextureMagFilter = new TextureParameterClass({ index: 0x2800, str: 'TEXTURE_MAG_FILTER' });\nconst TextureMinFilter = new TextureParameterClass({ index: 0x2801, str: 'TEXTURE_MIN_FILTER' });\nconst TextureWrapS = new TextureParameterClass({ index: 0x2802, str: 'TEXTURE_WRAP_S' });\nconst TextureWrapT = new TextureParameterClass({ index: 0x2803, str: 'TEXTURE_WRAP_T' });\nconst Texture2D = new TextureParameterClass({ index: 0x0DE1, str: 'TEXTURE_2D' });\nconst Texture = new TextureParameterClass({ index: 0x1702, str: 'TEXTURE' });\nconst Texture0 = new TextureParameterClass({ index: 0x84C0, str: 'TEXTURE0' });\nconst Texture1 = new TextureParameterClass({ index: 0x84C1, str: 'TEXTURE1' });\nconst ActiveTexture = new TextureParameterClass({ index: 0x84E0, str: 'ACTIVE_TEXTURE' });\nconst Repeat = new TextureParameterClass({ index: 0x2901, str: 'REPEAT' });\nconst ClampToEdge = new TextureParameterClass({ index: 0x812F, str: 'CLAMP_TO_EDGE' });\nconst RGB8 = new TextureParameterClass({ index: 0x8051, str: 'RGB8' });\nconst RGBA8 = new TextureParameterClass({ index: 0x8058, str: 'RGBA8' });\nconst RGB10_A2 = new TextureParameterClass({ index: 0x8059, str: 'RGB10_A2' });\nconst RGB16F = new TextureParameterClass({ index: 0x881B, str: 'RGB16F' });\nconst RGB32F = new TextureParameterClass({ index: 0x8815, str: 'RGB32F' });\nconst RGBA16F = new TextureParameterClass({ index: 0x881A, str: 'RGBA16F' });\nconst RGBA32F = new TextureParameterClass({ index: 0x8814, str: 'RGBA32F' });\nconst Depth16 = new TextureParameterClass({ index: 0x81A5, str: 'DEPTH_COMPONENT16' });\nconst Depth24 = new TextureParameterClass({ index: 0x81A6, str: 'DEPTH_COMPONENT24' });\nconst Depth32F = new TextureParameterClass({ index: 0x8CAC, str: 'DEPTH_COMPONENT32F' });\nconst Depth24Stencil8 = new TextureParameterClass({ index: 0x88F0, str: 'DEPTH24_STENCIL8' });\nconst Depth32FStencil8 = new TextureParameterClass({ index: 0x8CAD, str: 'DEPTH32F_STENCIL8' });\nconst typeList = [Nearest, Linear, LinearMipmapLinear, TextureMagFilter, TextureMinFilter, TextureWrapS, TextureWrapT, Texture2D, Texture, Texture0, Texture1, ActiveTexture,\n    Repeat, ClampToEdge, RGB8, RGBA8, RGB10_A2, RGB16F, RGB32F, RGBA16F, RGBA32F, Depth16, Depth24, Depth32F, Depth24Stencil8, Depth32FStencil8];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nconst TextureParameter = Object.freeze({ Nearest, Linear, LinearMipmapLinear, TextureMagFilter, TextureMinFilter, TextureWrapS, TextureWrapT, Texture2D, Texture,\n    Texture0, Texture1, ActiveTexture, Repeat, ClampToEdge, RGB8, RGBA8, RGB10_A2, RGB16F, RGB32F, RGBA16F, RGBA32F, Depth16, Depth24, Depth32F, Depth24Stencil8, Depth32FStencil8 });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/TextureParameter.ts?");

/***/ }),

/***/ "./src/foundation/definitions/VertexAttribute.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/definitions/VertexAttribute.ts ***!
  \*******************************************************/
/*! exports provided: VertexAttributeClass, VertexAttribute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VertexAttributeClass\", function() { return VertexAttributeClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VertexAttribute\", function() { return VertexAttribute; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass VertexAttributeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str, shaderStr, attributeSlot }) {\n        super({ index, str });\n        this.__attributeSlot = attributeSlot;\n        this.__shaderStr = shaderStr;\n    }\n    getAttributeSlot() {\n        return this.__attributeSlot;\n    }\n    get shaderStr() {\n        return this.__shaderStr;\n    }\n}\nconst Unknown = new VertexAttributeClass({ index: -1, str: 'UNKNOWN', shaderStr: 'a_unknown', attributeSlot: -1 });\nconst Position = new VertexAttributeClass({ index: 0, str: 'POSITION', shaderStr: 'a_position', attributeSlot: 0 });\nconst Normal = new VertexAttributeClass({ index: 1, str: 'NORMAL', shaderStr: 'a_normal', attributeSlot: 1 });\nconst Tangent = new VertexAttributeClass({ index: 2, str: 'TANGENT', shaderStr: 'a_tangent', attributeSlot: 2 });\nconst Texcoord0 = new VertexAttributeClass({ index: 3, str: 'TEXCOORD_0', shaderStr: 'a_texcoord_0', attributeSlot: 3 });\nconst Texcoord1 = new VertexAttributeClass({ index: 4, str: 'TEXCOORD_1', shaderStr: 'a_texcoord_1', attributeSlot: 4 });\nconst Color0 = new VertexAttributeClass({ index: 5, str: 'COLOR_0', shaderStr: 'a_color_0', attributeSlot: 5 });\nconst Joints0 = new VertexAttributeClass({ index: 6, str: 'JOINTS_0', shaderStr: 'a_joints_0', attributeSlot: 6 });\nconst Weights0 = new VertexAttributeClass({ index: 7, str: 'WEIGHTS_0', shaderStr: 'a_weights_0', attributeSlot: 7 });\nconst Instance = new VertexAttributeClass({ index: 8, str: 'INSTANCE', shaderStr: 'a_instance', attributeSlot: 8 });\nconst FaceNormal = new VertexAttributeClass({ index: 9, str: 'FACE_NORMAL', shaderStr: 'a_faceNormal', attributeSlot: 9 });\nconst BaryCentricCoord = new VertexAttributeClass({ index: 10, str: 'BARY_CENTRIC_COORD', shaderStr: 'a_baryCentricCoord', attributeSlot: 10 });\nconst typeList = [Unknown, Position, Normal, Tangent, Texcoord0, Texcoord1, Color0, Joints0, Weights0, Instance, FaceNormal, BaryCentricCoord];\nconst AttributeTypeNumber = 11;\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nfunction fromString(str) {\n    let newStr = str;\n    if (str === 'COLOR') {\n        newStr = 'COLOR_0';\n    }\n    else if (str === 'TEXCOORD') {\n        newStr = 'TEXCOORD_0';\n    }\n    else if (str === 'JOINTS') {\n        newStr = 'JOINTS_0';\n    }\n    else if (str === 'WEIGHTS') {\n        newStr = 'WEIGHTS_0';\n    }\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str: newStr });\n}\nconst VertexAttribute = Object.freeze({\n    Unknown, Position, Normal, Tangent, Texcoord0, Texcoord1, Color0, Joints0, Weights0, Instance, FaceNormal, BaryCentricCoord, AttributeTypeNumber: AttributeTypeNumber, from, fromString\n});\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/VertexAttribute.ts?");

/***/ }),

/***/ "./src/foundation/definitions/visibility.ts":
/*!**************************************************!*\
  !*** ./src/foundation/definitions/visibility.ts ***!
  \**************************************************/
/*! exports provided: Visibility */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Visibility\", function() { return Visibility; });\n/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass VisibilityClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst Neutral = new VisibilityClass({ index: 0, str: 'Neutral' });\nconst Visible = new VisibilityClass({ index: 1, str: 'Visible' });\nconst Invisible = new VisibilityClass({ index: -1, str: 'Invisible' });\nconst typeList = [Visible, Invisible, Neutral];\nfunction from(index) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nfunction fromString(str) {\n    return Object(_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_fromString\"])({ typeList, str });\n}\nconst Visibility = Object.freeze({ Visible, Invisible, Neutral, from, fromString });\n\n\n//# sourceURL=webpack:///./src/foundation/definitions/visibility.ts?");

/***/ }),

/***/ "./src/foundation/exporter/Gltf2Exporter.ts":
/*!**************************************************!*\
  !*** ./src/foundation/exporter/Gltf2Exporter.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Gltf2Exporter; });\n/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n\n\n/**\n * The glTF2 format Exporter class.\n */\nclass Gltf2Exporter {\n    constructor() {\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new Gltf2Exporter();\n        }\n        return this.__instance;\n    }\n    /**\n     * Exports All scene data in the rhodonite system as glTF2 format.\n     * @param filename\n     */\n    export(filename) {\n        const entities = Gltf2Exporter.__entityRepository._getEntities();\n        const json = {\n            \"asset\": {\n                \"version\": \"2.0\",\n                \"generator\": `Rhodonite (${window['Rn'].VERSION})`\n            }\n        };\n        const fileName = filename ? filename : 'Rhodonite_' + (new Date()).getTime();\n        json.buffers = [{\n                'uri': fileName + '.bin'\n            }];\n        json.bufferViews = [];\n        json.accessors = [];\n        json.materials = [{\n                \"pbrMetallicRoughness\": {\n                    \"baseColorFactor\": [\n                        1.0,\n                        1.0,\n                        1.0,\n                        1.0\n                    ]\n                }\n            }];\n        this.countMeshes(json, entities);\n        this.createNodes(json, entities);\n        this.createMeshBinaryMetaData(json, entities);\n        this.createMeshes(json, entities);\n        this.createMaterials(json, entities);\n        const arraybuffer = this.createWriteBinary(json, entities);\n        this.download(json, fileName, arraybuffer);\n    }\n    createWriteBinary(json, entities) {\n        const buffer = new ArrayBuffer(json.buffers[0].byteLength);\n        const dataView = new DataView(buffer);\n        for (let i = 0; i < json.accessors.length; i++) {\n            const accessor = json.accessors[i];\n            const rnAccessor = accessor.accessor;\n            const compositionType = rnAccessor.compositionType;\n            const componentType = rnAccessor.componentType;\n            const dataViewSetter = rnAccessor.getDataViewSetter(componentType);\n            const attributeCount = accessor.count;\n            const bufferview = json.bufferViews[accessor.bufferView];\n            const bufferViewByteOffset = bufferview.byteOffset;\n            for (let k = 0; k < attributeCount; k++) {\n                if (compositionType.getNumberOfComponents() === 1) {\n                    const byteIndex = componentType.getSizeInBytes() * k;\n                    const value = rnAccessor.getScalar(k, {});\n                    dataView[dataViewSetter](bufferViewByteOffset + byteIndex, value, true);\n                }\n                else if (compositionType.getNumberOfComponents() === 2) {\n                    const array = rnAccessor.getVec2AsArray(k, {});\n                    for (let l = 0; l < 2; l++) {\n                        dataView[dataViewSetter](bufferViewByteOffset + componentType.getSizeInBytes() * (k * 2 + l), array[l], true);\n                    }\n                }\n                else if (compositionType.getNumberOfComponents() === 3) {\n                    const array = rnAccessor.getVec3AsArray(k, {});\n                    for (let l = 0; l < 3; l++) {\n                        dataView[dataViewSetter](bufferViewByteOffset + componentType.getSizeInBytes() * (k * 3 + l), array[l], true);\n                    }\n                }\n                else if (compositionType.getNumberOfComponents() === 4) {\n                    const array = rnAccessor.getVec4AsArray(k, {});\n                    for (let l = 0; l < 4; l++) {\n                        dataView[dataViewSetter](bufferViewByteOffset + componentType.getSizeInBytes() * (k * 4 + l), array[l], true);\n                    }\n                }\n            }\n            accessor.accessor = void 0;\n        }\n        return buffer;\n    }\n    countMeshes(json, entities) {\n        let count = 0;\n        json.meshes = [];\n        for (let i = 0; i < entities.length; i++) {\n            const entity = entities[i];\n            const meshComponent = entity.getMesh();\n            if (meshComponent) {\n                entity.gltfMeshIndex = count++;\n            }\n        }\n    }\n    createMeshes(json, entities) {\n        let count = 0;\n        json.meshes = [];\n        for (let i = 0; i < entities.length; i++) {\n            const entity = entities[i];\n            const meshComponent = entity.getMesh();\n            if (meshComponent && meshComponent.mesh) {\n                json.meshes[count] = {};\n                const mesh = json.meshes[count];\n                mesh.primitives = [];\n                const primitiveCount = meshComponent.mesh.getPrimitiveNumber();\n                for (let j = 0; j < primitiveCount; j++) {\n                    mesh.primitives[j] = {};\n                    const primitive = mesh.primitives[j];\n                    const rnPrimitive = meshComponent.mesh.getPrimitiveAt(j);\n                    const indicesAccessor = rnPrimitive.indicesAccessor;\n                    if (indicesAccessor) {\n                        primitive.indices = indicesAccessor.gltfAccessorIndex;\n                        primitive.mode = rnPrimitive.primitiveMode.index;\n                    }\n                    const attributeAccessors = rnPrimitive.attributeAccessors;\n                    primitive.attributes = {};\n                    const attributes = primitive.attributes;\n                    for (let k = 0; k < attributeAccessors.length; k++) {\n                        const attributeAccessor = attributeAccessors[k];\n                        attributes[rnPrimitive.attributeSemantics[k].str] = attributeAccessor.gltfAccessorIndex;\n                    }\n                    primitive.material = 0;\n                }\n                entity.gltfMeshIndex = count++;\n            }\n        }\n    }\n    createMaterials(json, entities) {\n        let countMesh = 0;\n        let countMaterial = 0;\n        let countTexture = 0;\n        let countImage = 0;\n        json.materials = [];\n        json.textures = [];\n        json.samplers = [];\n        json.images = [];\n        json.samplers[0] = {\n            \"magFilter\": 9729,\n            \"minFilter\": 9987,\n            \"wrapS\": 10497,\n            \"wrapT\": 10497\n        };\n        for (let i = 0; i < entities.length; i++) {\n            const entity = entities[i];\n            const meshComponent = entity.getMesh();\n            if (meshComponent && meshComponent.mesh) {\n                const mesh = json.meshes[countMesh++];\n                const primitiveCount = meshComponent.mesh.getPrimitiveNumber();\n                for (let j = 0; j < primitiveCount; j++) {\n                    const rnPrimitive = meshComponent.mesh.getPrimitiveAt(j);\n                    const primitive = mesh.primitives[j];\n                    const rnMaterial = rnPrimitive.material;\n                    const material = {\n                        \"pbrMetallicRoughness\": {}\n                    };\n                    let colorParam;\n                    let metallic = 1.0;\n                    let roughness = 1.0;\n                    if (rnMaterial != null) {\n                        colorParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__[\"ShaderSemantics\"].BaseColorFactor);\n                        if (colorParam == null) {\n                            colorParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__[\"ShaderSemantics\"].DiffuseColorFactor);\n                        }\n                        else {\n                            metallic = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__[\"ShaderSemantics\"].MetallicRoughnessFactor).x;\n                            roughness = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__[\"ShaderSemantics\"].MetallicRoughnessFactor).y;\n                        }\n                    }\n                    if (colorParam) {\n                        material.pbrMetallicRoughness.baseColorFactor = Array.prototype.slice.call(colorParam.v);\n                    }\n                    material.pbrMetallicRoughness.metallicFactor = metallic;\n                    material.pbrMetallicRoughness.roughnessFactor = roughness;\n                    if (rnMaterial) {\n                        material.alphaMode = rnMaterial.alphaMode.str;\n                        const processTexture = (rnTexture) => {\n                            if (rnTexture && rnTexture.width > 1 && rnTexture.height > 1) {\n                                let imageIndex = countImage;\n                                let match = false;\n                                for (let k = 0; k < json.images.length; k++) {\n                                    const image = json.images[k];\n                                    if (image.uri === rnTexture.name) {\n                                        imageIndex = k;\n                                        match = true;\n                                    }\n                                }\n                                if (!match) {\n                                    json.images[countImage++] = {\n                                        uri: (rnTexture.name) ? rnTexture.name : rnTexture.uniqueName\n                                    };\n                                    const htmlCanvasElement = rnTexture.htmlCanvasElement;\n                                    if (htmlCanvasElement) {\n                                        const blob = htmlCanvasElement.toBlob((blob) => {\n                                            setTimeout(function () {\n                                                var a = document.createElement('a');\n                                                const e = document.createEvent('MouseEvent');\n                                                e.initEvent(\"click\", true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);\n                                                a.href = URL.createObjectURL(blob);\n                                                a.download = rnTexture.name;\n                                                a.dispatchEvent(e);\n                                            }, Math.random() * 10000);\n                                        });\n                                    }\n                                }\n                                json.textures[countTexture] = {\n                                    sampler: 0,\n                                    source: imageIndex\n                                };\n                                return countTexture++;\n                            }\n                            return void 0;\n                        };\n                        let textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__[\"ShaderSemantics\"].BaseColorTexture);\n                        let rnTexture;\n                        let textureIndex;\n                        if (textureParam != null) {\n                            rnTexture = (textureParam[1]);\n                            textureIndex = processTexture(rnTexture);\n                            if (textureIndex != null) {\n                                material.pbrMetallicRoughness.baseColorTexture = { index: textureIndex };\n                            }\n                        }\n                        else {\n                            textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__[\"ShaderSemantics\"].DiffuseColorTexture);\n                            if (textureParam != null) {\n                                let rnTexture = (textureParam[1]);\n                                let textureIndex = processTexture(rnTexture);\n                                if (textureIndex != null) {\n                                    material.pbrMetallicRoughness.diffuseColorTexture = { index: textureIndex };\n                                }\n                            }\n                        }\n                        textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__[\"ShaderSemantics\"].MetallicRoughnessTexture);\n                        if (textureParam) {\n                            rnTexture = (textureParam[1]);\n                            textureIndex = processTexture(rnTexture);\n                            if (textureIndex != null) {\n                                material.pbrMetallicRoughness.metallicRoughnessTexture = { index: textureIndex };\n                            }\n                        }\n                        textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__[\"ShaderSemantics\"].NormalTexture);\n                        if (textureParam) {\n                            rnTexture = (textureParam[1]);\n                            textureIndex = processTexture(rnTexture);\n                            if (textureIndex != null) {\n                                material.normalTexture = { index: textureIndex };\n                            }\n                        }\n                        textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__[\"ShaderSemantics\"].OcclusionTexture);\n                        if (textureParam) {\n                            rnTexture = (textureParam[1]);\n                            textureIndex = processTexture(rnTexture);\n                            if (textureIndex != null) {\n                                material.occlusionTexture = { index: textureIndex };\n                            }\n                        }\n                        textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__[\"ShaderSemantics\"].EmissiveTexture);\n                        if (textureParam) {\n                            rnTexture = (textureParam[1]);\n                            textureIndex = processTexture(rnTexture);\n                            if (textureIndex != null) {\n                                material.emissiveTexture = { index: textureIndex };\n                            }\n                        }\n                    }\n                    json.materials.push(material);\n                    primitive.material = countMaterial++;\n                }\n            }\n        }\n    }\n    createNodes(json, entities) {\n        json.nodes = [];\n        json.scenes = [{ 'nodes': [] }];\n        const scene = json.scenes[0];\n        const nodes = json.nodes;\n        for (let i = 0; i < entities.length; i++) {\n            const entity = entities[i];\n            entity.gltfNodeIndex = i;\n        }\n        for (let i = 0; i < entities.length; i++) {\n            const entity = entities[i];\n            nodes[i] = {};\n            const node = nodes[i];\n            // node.name\n            node.name = entity.uniqueName;\n            // node.children\n            node.children = [];\n            const sceneGraphComponent = entity.getSceneGraph();\n            const children = sceneGraphComponent.children;\n            for (let j = 0; j < children.length; j++) {\n                const child = children[j];\n                node.children.push(child.entity.gltfNodeIndex);\n            }\n            // matrix\n            node.matrix = Array.prototype.slice.call(entity.getTransform().matrix.v);\n            // mesh\n            node.mesh = entity.gltfMeshIndex;\n            if (sceneGraphComponent.parent == null) {\n                scene.nodes.push(i);\n            }\n        }\n    }\n    createMeshBinaryMetaData(json, entities) {\n        let count = 0;\n        let bufferByteLength = 0;\n        for (let i = 0; i < entities.length; i++) {\n            const entity = entities[i];\n            const meshComponent = entity.getMesh();\n            if (meshComponent && meshComponent.mesh) {\n                const primitiveCount = meshComponent.mesh.getPrimitiveNumber();\n                for (let j = 0; j < primitiveCount; j++) {\n                    const primitive = meshComponent.mesh.getPrimitiveAt(j);\n                    const indicesAccessor = primitive.indicesAccessor;\n                    if (indicesAccessor) {\n                        // BufferView\n                        let match = false;\n                        for (let k = 0; k < json.bufferViews.length; k++) {\n                            const bufferview = json.bufferViews[k];\n                            if (bufferview.rnAccessor === indicesAccessor) {\n                                match = true;\n                                indicesAccessor.gltfAccessorIndex = k;\n                            }\n                        }\n                        if (!match) {\n                            json.bufferViews[count] = {};\n                            const bufferview = json.bufferViews[count];\n                            bufferview.rnAccessor = indicesAccessor;\n                            bufferview.buffer = 0;\n                            bufferview.byteLength = indicesAccessor.byteLength;\n                            bufferview.byteOffset = bufferByteLength;\n                            bufferview.target = 34963;\n                            // Accessor\n                            json.accessors[count] = {};\n                            const accessor = json.accessors[count];\n                            accessor.bufferView = count;\n                            accessor.byteOffset = 0; //indicesAccessor.byteOffsetInBufferView;\n                            accessor.componentType = 5123;\n                            accessor.count = indicesAccessor.elementCount;\n                            indicesAccessor.calcMinMax();\n                            accessor.max = [indicesAccessor.max];\n                            accessor.min = [indicesAccessor.min];\n                            accessor.type = 'SCALAR';\n                            bufferByteLength += indicesAccessor.byteLength;\n                            indicesAccessor.gltfAccessorIndex = count;\n                            count++;\n                            accessor.accessor = indicesAccessor;\n                        }\n                    }\n                    const attributeAccessors = primitive.attributeAccessors;\n                    for (let j = 0; j < attributeAccessors.length; j++) {\n                        const attributeAccessor = attributeAccessors[j];\n                        let match = false;\n                        for (let k = 0; k < json.bufferViews.length; k++) {\n                            const bufferview = json.bufferViews[k];\n                            if (bufferview.rnAccessor === attributeAccessor) {\n                                match = true;\n                                attributeAccessor.gltfAccessorIndex = k;\n                            }\n                        }\n                        if (!match) {\n                            // BufferView\n                            json.bufferViews[count] = {};\n                            const bufferview = json.bufferViews[count];\n                            bufferview.rnAccessor = attributeAccessor;\n                            bufferview.buffer = 0;\n                            bufferview.byteLength = attributeAccessors[j].byteLength;\n                            bufferview.byteOffset = bufferByteLength;\n                            bufferview.target = 34962;\n                            // Accessor\n                            json.accessors[count] = {};\n                            const accessor = json.accessors[count];\n                            accessor.bufferView = count;\n                            accessor.byteOffset = 0; //attributeAccessor.byteOffsetInBufferView;\n                            accessor.componentType = 5126;\n                            accessor.count = attributeAccessor.elementCount;\n                            attributeAccessor.calcMinMax();\n                            accessor.max = Array.prototype.slice.call(attributeAccessor.max);\n                            accessor.min = Array.prototype.slice.call(attributeAccessor.min);\n                            accessor.type = 'VEC' + accessor.max.length;\n                            bufferByteLength += attributeAccessor.byteLength;\n                            attributeAccessor.gltfAccessorIndex = count;\n                            count++;\n                            accessor.accessor = attributeAccessor;\n                        }\n                    }\n                }\n            }\n        }\n        json.bufferViews.forEach((bufferView) => {\n            bufferView.rnAccessor = void 0;\n        });\n        const buffer = json.buffers[0];\n        buffer.byteLength = bufferByteLength;\n    }\n    download(json, filename, arraybuffer) {\n        let a = document.createElement('a');\n        let e = document.createEvent('MouseEvent');\n        a.download = filename + '.gltf';\n        a.href = \"data:application/octet-stream,\" + encodeURIComponent(JSON.stringify(json));\n        e.initEvent(\"click\", true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);\n        a.dispatchEvent(e);\n        a = document.createElement('a');\n        e = document.createEvent('MouseEvent');\n        e.initEvent(\"click\", true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);\n        var blob = new Blob([arraybuffer], { type: \"octet/stream\" }), url = window.URL.createObjectURL(blob);\n        a.download = filename + '.bin';\n        a.href = url;\n        a.dispatchEvent(e);\n    }\n}\nGltf2Exporter.__entityRepository = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n\n\n//# sourceURL=webpack:///./src/foundation/exporter/Gltf2Exporter.ts?");

/***/ }),

/***/ "./src/foundation/geometry/Frustum.ts":
/*!********************************************!*\
  !*** ./src/foundation/geometry/Frustum.ts ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Frustum; });\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/MutableVector4 */ \"./src/foundation/math/MutableVector4.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/visibility */ \"./src/foundation/definitions/visibility.ts\");\n\n\n\n\n\n/**\n * The view frustum class.\n */\nclass Frustum {\n    constructor() {\n        this.top = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].zero();\n        this.bottom = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].zero();\n        this.right = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].zero();\n        this.left = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].zero();\n        this.zNear = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].zero();\n        this.zFar = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].zero();\n        this.__updated = false;\n        this.__vp = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\n    }\n    /**\n     * Updates this view frustum data from the view and projection matrices.\n     * @param viewMatrix The view matrix.\n     * @param projectionMatrix The projection matrix.\n     */\n    update(viewMatrix, projectionMatrix) {\n        _math_Matrix44__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiplyTo(projectionMatrix, viewMatrix, this.__vp);\n        this.zNear.x = this.__vp.m20 + this.__vp.m30;\n        this.zNear.y = this.__vp.m21 + this.__vp.m31;\n        this.zNear.z = this.__vp.m22 + this.__vp.m32;\n        this.zNear.w = this.__vp.m23 + this.__vp.m33;\n        this.zNear.normalize3();\n        this.zFar.x = -this.__vp.m20 + this.__vp.m30;\n        this.zFar.y = -this.__vp.m21 + this.__vp.m31;\n        this.zFar.z = -this.__vp.m22 + this.__vp.m32;\n        this.zFar.w = -this.__vp.m23 + this.__vp.m33;\n        this.zFar.normalize3();\n        this.bottom.x = this.__vp.m10 + this.__vp.m30;\n        this.bottom.y = this.__vp.m11 + this.__vp.m31;\n        this.bottom.z = this.__vp.m12 + this.__vp.m32;\n        this.bottom.w = this.__vp.m13 + this.__vp.m33;\n        this.bottom.normalize3();\n        this.top.x = -this.__vp.m10 + this.__vp.m30;\n        this.top.y = -this.__vp.m11 + this.__vp.m31;\n        this.top.z = -this.__vp.m12 + this.__vp.m32;\n        this.top.w = -this.__vp.m13 + this.__vp.m33;\n        this.top.normalize3();\n        this.left.x = this.__vp.m00 + this.__vp.m30;\n        this.left.y = this.__vp.m01 + this.__vp.m31;\n        this.left.z = this.__vp.m02 + this.__vp.m32;\n        this.left.w = this.__vp.m03 + this.__vp.m33;\n        this.left.normalize3();\n        this.right.x = -this.__vp.m00 + this.__vp.m30;\n        this.right.y = -this.__vp.m01 + this.__vp.m31;\n        this.right.z = -this.__vp.m02 + this.__vp.m32;\n        this.right.w = -this.__vp.m03 + this.__vp.m33;\n        this.right.normalize3();\n    }\n    /**\n     * Do clipping test (Inside / outside / neutral) of the plane of the view frustum.\n     * @param plane The plane of the view frustum.\n     * @param point The point to test.\n     * @param bias The bias value.\n     */\n    clipping(plane, point, bias) {\n        const dot = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dotProduct(plane, point);\n        const d = dot + plane.w;\n        if (d + bias < 0) {\n            return _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Invisible; // outside completly\n        }\n        else if (d - bias > 0) {\n            return _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Visible; // inside completly\n        }\n        else {\n            return _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Neutral; // neutral\n        }\n    }\n    /**\n     * Do culling test (Inside / outside / neutral) of the entity against to the view frustum.\n     * @param sg The SceneGraphComponent object of the entity.\n     */\n    culling(sg) {\n        const aabb = sg.worldAABB;\n        const center = aabb.centerPoint;\n        const centerToCorner = aabb.lengthCenterToCorner;\n        const right = this.clipping(this.right, center, centerToCorner);\n        const left = this.clipping(this.left, center, centerToCorner);\n        if (right === _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Invisible && left === _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Visible || right === _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Visible && left === _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Invisible) {\n            return _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Invisible;\n        }\n        const zNear = this.clipping(this.zNear, center, centerToCorner);\n        const zFar = this.clipping(this.zFar, center, centerToCorner);\n        if (zNear === _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Invisible && zFar === _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Visible || zNear === _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Visible && zFar === _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Invisible) {\n            return _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Invisible;\n        }\n        const top = this.clipping(this.top, center, centerToCorner);\n        const bottom = this.clipping(this.bottom, center, centerToCorner);\n        if (top === _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Invisible && bottom === _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Visible || top === _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Visible && bottom === _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Invisible) {\n            return _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Invisible;\n        }\n        const sum = top.index + bottom.index + right.index + left.index + zNear.index + zFar.index;\n        if (sum === 6) {\n            return _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Visible;\n        }\n        return _definitions_visibility__WEBPACK_IMPORTED_MODULE_4__[\"Visibility\"].Neutral;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/geometry/Frustum.ts?");

/***/ }),

/***/ "./src/foundation/geometry/Mesh.ts":
/*!*****************************************!*\
  !*** ./src/foundation/geometry/Mesh.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Mesh; });\n/* harmony import */ var _Primitive__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Primitive */ \"./src/foundation/geometry/Primitive.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ \"./src/foundation/definitions/PrimitiveMode.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_AABB__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../math/AABB */ \"./src/foundation/math/AABB.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _core_Entity__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../core/Entity */ \"./src/foundation/core/Entity.ts\");\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The Mesh class.\n * This mesh object has primitives (geometries) or a reference of 'original mesh'.\n * If the latter, this mesh object is an 'instanced mesh', which has no primitives.\n * Instanced meshes refer original mesh's primitives when drawing.\n */\nclass Mesh {\n    constructor() {\n        this.__instanceIdx = 0;\n        this.__primitives = [];\n        this.__opaquePrimitives = [];\n        this.__transparentPrimitives = [];\n        this.weights = [];\n        this.__morphPrimitives = [];\n        this.__localAABB = new _math_AABB__WEBPACK_IMPORTED_MODULE_8__[\"default\"]();\n        this.__vaoUids = [];\n        this.__variationVBOUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_9__[\"default\"].InvalidCGAPIResourceUid;\n        this.__instances = [];\n        this._attatchedEntityUID = _core_Entity__WEBPACK_IMPORTED_MODULE_10__[\"default\"].invalidEntityUID;\n        this.__instancesDirty = true;\n        this.tangentCalculationMode = 1; // 0: Off, 1: auto, 2: force calculation\n        this.isPrecomputeForRayCastPickingEnable = false;\n        this.__meshUID = ++Mesh.__mesh_uid_count;\n    }\n    /**\n     * Gets original (Non instanced) meshes.\n     */\n    static get originalMeshes() {\n        return this.__originalMeshes;\n    }\n    get variationVBOUid() {\n        if (this.isInstanceMesh()) {\n            return this.__instanceOf.variationVBOUid;\n        }\n        else {\n            return this.__variationVBOUid;\n        }\n    }\n    getVaoUids(index) {\n        if (this.isInstanceMesh()) {\n            return this.__instanceOf.getVaoUids(index);\n        }\n        else {\n            return this.__vaoUids[index];\n        }\n    }\n    /**\n     * @private\n     * Adds the other mesh to this mesh as instanced meshes.\n     * @param mesh The other mesh.\n     */\n    _addMeshToInstanceArray(mesh) {\n        this.__instances.push(mesh);\n        this.__instancesDirty = true;\n    }\n    /**\n     * Adds primitive.\n     * @param primitive The primitive object.\n     */\n    addPrimitive(primitive) {\n        this.__instanceOf = void 0;\n        this.__instanceIdx = 0;\n        if (primitive.material == null || !primitive.material.isBlend()) {\n            this.__opaquePrimitives.push(primitive);\n        }\n        else {\n            this.__transparentPrimitives.push(primitive);\n        }\n        this.__primitives = this.__opaquePrimitives.concat(this.__transparentPrimitives);\n        Mesh.__originalMeshes.push(this);\n    }\n    /**\n     * Sets mesh.\n     * @param mesh The mesh.\n     */\n    setMesh(mesh) {\n        if (mesh.isInstanceMesh()) {\n            console.error(`Don't set InstanceMesh.`);\n            return false;\n        }\n        this.__primitives.length = 0;\n        this.__instanceOf = mesh;\n        mesh._addMeshToInstanceArray(this);\n        this.__instanceIdx = mesh.instanceIndex + 1;\n        // Remove this from original meshe list\n        Mesh.__originalMeshes = Mesh.__originalMeshes.filter(mesh => mesh !== this);\n        return true;\n    }\n    /**\n     * Gets true if these primitives are all 'Blend' type\n     */\n    isAllBlend() {\n        if (this.isInstanceMesh()) {\n            return this.__instanceOf.isAllBlend();\n        }\n        else {\n            if (this.__transparentPrimitives.length > 0 && this.__opaquePrimitives.length === 0) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n    }\n    /**\n     * Gets true if some primitives are 'Blend' type\n     */\n    isBlendPartially() {\n        if (this.isInstanceMesh()) {\n            return this.__instanceOf.isBlendPartially();\n        }\n        else {\n            if (this.__transparentPrimitives.length > 0 && this.__opaquePrimitives.length > 0) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n    }\n    /**\n     * Gets true if these primitives are all 'Opaque' type\n     */\n    isOpaque() {\n        if (this.isInstanceMesh()) {\n            return this.__instanceOf.isOpaque();\n        }\n        else {\n            if (this.__transparentPrimitives.length === 0 && this.__opaquePrimitives.length > 0) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n    }\n    isFirstOpaquePrimitiveAt(index) {\n        if (this.isFirstOpaquePrimitiveAt(index)) {\n            return this.__instanceOf.isFirstOpaquePrimitiveAt(index);\n        }\n        else {\n            if (this.__opaquePrimitives.length > 0) {\n                if (index === 0) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            }\n            else {\n                return false;\n            }\n        }\n    }\n    isFirstTransparentPrimitiveAt(index) {\n        if (this.isFirstOpaquePrimitiveAt(index)) {\n            return this.__instanceOf.isFirstTransparentPrimitiveAt(index);\n        }\n        else {\n            if (this.__transparentPrimitives.length > 0) {\n                if (this.__opaquePrimitives.length === index) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            }\n            else {\n                return false;\n            }\n        }\n    }\n    __calcFaceNormalFor3Vertices(i, pos0, pos1, pos2, normalAccessor, indicesAccessor) {\n        // Calc normal\n        const ax = pos1.x - pos0.x;\n        const ay = pos1.y - pos0.y;\n        const az = pos1.z - pos0.z;\n        const bx = pos2.x - pos0.x;\n        const by = pos2.y - pos0.y;\n        const bz = pos2.z - pos0.z;\n        let nx = ay * bz - az * by;\n        let ny = az * bx - ax * bz;\n        let nz = ax * by - ay * bx;\n        let da = Math.sqrt(nx * nx + ny * ny + nz * nz);\n        if (da <= 1e-6) {\n            da = 0.0001;\n        }\n        da = 1.0 / da;\n        nx *= da;\n        ny *= da;\n        nz *= da;\n        const faceNormal = new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](nx, ny, nz);\n        normalAccessor.setVec3(i, faceNormal.x, faceNormal.y, faceNormal.z, { indicesAccessor });\n        normalAccessor.setVec3(i + 1, faceNormal.x, faceNormal.y, faceNormal.z, { indicesAccessor });\n        normalAccessor.setVec3(i + 2, faceNormal.x, faceNormal.y, faceNormal.z, { indicesAccessor });\n    }\n    __calcTangents() {\n        if (this.tangentCalculationMode === 0) {\n            return;\n        }\n        for (let primitive of this.__primitives) {\n            const tangentIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Tangent);\n            if (tangentIdx !== -1 && this.tangentCalculationMode === 1) {\n                continue;\n            }\n            const texcoordIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Texcoord0);\n            const normalIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Normal);\n            if (texcoordIdx !== -1 && normalIdx !== -1) {\n                const positionIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Position);\n                const positionAccessor = primitive.attributeAccessors[positionIdx];\n                const texcoordAccessor = primitive.attributeAccessors[texcoordIdx];\n                const normalAccessor = primitive.attributeAccessors[normalIdx];\n                const indicesAccessor = primitive.indicesAccessor;\n                let incrementNum = 3; // PrimitiveMode.Triangles\n                if (primitive.primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_2__[\"PrimitiveMode\"].TriangleStrip ||\n                    primitive.primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_2__[\"PrimitiveMode\"].TriangleFan) {\n                    incrementNum = 1;\n                }\n                const vertexNum = primitive.getVertexCountAsIndicesBased();\n                const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_4__[\"BufferUse\"].CPUGeneric);\n                const tangentAttributeByteSize = positionAccessor.byteLength * 4 / 3;\n                const tangentBufferView = buffer.takeBufferView({ byteLengthToNeed: tangentAttributeByteSize, byteStride: 0, isAoS: false });\n                const tangentAccessor = tangentBufferView.takeAccessor({ compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Vec4, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float, count: positionAccessor.elementCount });\n                for (let i = 0; i < vertexNum - 2; i += incrementNum) {\n                    const pos0 = positionAccessor.getVec3(i, { indicesAccessor });\n                    const pos1 = positionAccessor.getVec3(i + 1, { indicesAccessor });\n                    const pos2 = positionAccessor.getVec3(i + 2, { indicesAccessor });\n                    const uv0 = texcoordAccessor.getVec2(i, { indicesAccessor });\n                    const uv1 = texcoordAccessor.getVec2(i + 1, { indicesAccessor });\n                    const uv2 = texcoordAccessor.getVec2(i + 2, { indicesAccessor });\n                    const norm0 = normalAccessor.getVec3(i, { indicesAccessor });\n                    const norm1 = normalAccessor.getVec3(i + 1, { indicesAccessor });\n                    const norm2 = normalAccessor.getVec3(i + 2, { indicesAccessor });\n                    this.__calcTangentFor3Vertices(i, pos0, pos1, pos2, uv0, uv1, uv2, norm0, norm1, norm2, tangentAccessor, indicesAccessor);\n                }\n                primitive.setVertexAttribute(tangentAccessor, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Tangent);\n            }\n        }\n    }\n    __calcTangentFor3Vertices(i, pos0, pos1, pos2, uv0, uv1, uv2, norm0, norm1, norm2, tangentAccessor, indicesAccessor) {\n        const tan0Vec3 = this.__calcTangentPerVertex(pos0, pos1, pos2, uv0, uv1, uv2, norm0, norm1, norm2);\n        const tan1Vec3 = this.__calcTangentPerVertex(pos1, pos2, pos0, uv1, uv2, uv0, norm0, norm1, norm2);\n        const tan2Vec3 = this.__calcTangentPerVertex(pos2, pos0, pos1, uv2, uv0, uv1, norm0, norm1, norm2);\n        tangentAccessor.setVec4(i, tan0Vec3.x, tan0Vec3.y, tan0Vec3.z, 1, { indicesAccessor });\n        tangentAccessor.setVec4(i + 1, tan1Vec3.x, tan1Vec3.y, tan1Vec3.z, 1, { indicesAccessor });\n        tangentAccessor.setVec4(i + 2, tan2Vec3.x, tan2Vec3.y, tan2Vec3.z, 1, { indicesAccessor });\n    }\n    __calcTangentPerVertex(pos0Vec3, pos1Vec3, pos2Vec3, uv0Vec2, uv1Vec2, uv2Vec2, norm0Vec3, norm1Vec3, norm2Vec3) {\n        let cp0 = [\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos0Vec3.x, uv0Vec2.x, uv0Vec2.y),\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos0Vec3.y, uv0Vec2.x, uv0Vec2.y),\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos0Vec3.z, uv0Vec2.x, uv0Vec2.y)\n        ];\n        let cp1 = [\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos1Vec3.x, uv1Vec2.x, uv1Vec2.y),\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos1Vec3.y, uv1Vec2.x, uv1Vec2.y),\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos1Vec3.z, uv1Vec2.x, uv1Vec2.y)\n        ];\n        let cp2 = [\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos2Vec3.x, uv2Vec2.x, uv2Vec2.y),\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos2Vec3.y, uv2Vec2.x, uv2Vec2.y),\n            new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos2Vec3.z, uv2Vec2.x, uv2Vec2.y)\n        ];\n        let u = [];\n        let v = [];\n        for (let i = 0; i < 3; i++) {\n            let v1 = _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"].subtract(cp1[i], cp0[i]);\n            let v2 = _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"].subtract(cp2[i], cp1[i]);\n            let abc = _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"].cross(v1, v2);\n            let validate = Math.abs(abc.x) < Number.EPSILON;\n            if (validate) {\n                console.assert(validate, \"Polygons or polygons on UV are degenerate!\");\n                return new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](0, 0, 0);\n            }\n            u[i] = -abc.y / abc.x;\n            v[i] = -abc.z / abc.x;\n        }\n        if (u[0] * u[0] + u[1] * u[1] + u[2] * u[2] < Number.EPSILON) {\n            const tangent = _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"].cross(norm0Vec3, new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](pos1Vec3));\n            u[0] = tangent.x;\n            u[1] = tangent.y;\n            u[2] = tangent.z;\n        }\n        return _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"].normalize(new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](u[0], u[1], u[2]));\n    }\n    __calcArenbergInverseMatrices() {\n        for (let primitive of this.__primitives) {\n            primitive._calcArenbergInverseMatrices();\n        }\n    }\n    getPrimitiveAt(i) {\n        if (this.isInstanceMesh()) {\n            return this.__instanceOf.getPrimitiveAt(i);\n        }\n        else {\n            // if (this.weights.length > 0) {\n            // return this.__morphPrimitives[i];\n            // } else {\n            return this.__primitives[i];\n            // }\n        }\n    }\n    getPrimitiveNumber() {\n        if (this.isInstanceMesh()) {\n            return this.__instanceOf.getPrimitiveNumber();\n        }\n        else {\n            return this.__primitives.length;\n        }\n    }\n    __calcFaceNormals() {\n        for (let primitive of this.__primitives) {\n            const positionIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Position);\n            const positionAccessor = primitive.attributeAccessors[positionIdx];\n            const indicesAccessor = primitive.indicesAccessor;\n            let incrementNum = 3; // PrimitiveMode.Triangles\n            if (primitive.primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_2__[\"PrimitiveMode\"].TriangleStrip ||\n                primitive.primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_2__[\"PrimitiveMode\"].TriangleFan) {\n                incrementNum = 1;\n            }\n            const vertexNum = primitive.getVertexCountAsIndicesBased();\n            const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_4__[\"BufferUse\"].CPUGeneric);\n            const normalAttributeByteSize = positionAccessor.byteLength;\n            const normalBufferView = buffer.takeBufferView({ byteLengthToNeed: normalAttributeByteSize, byteStride: 0, isAoS: false });\n            const normalAccessor = normalBufferView.takeAccessor({ compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Vec3, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float, count: positionAccessor.elementCount });\n            for (let i = 0; i < vertexNum - 2; i += incrementNum) {\n                const pos0 = positionAccessor.getVec3(i, { indicesAccessor });\n                const pos1 = positionAccessor.getVec3(i + 1, { indicesAccessor });\n                const pos2 = positionAccessor.getVec3(i + 2, { indicesAccessor });\n                this.__calcFaceNormalFor3Vertices(i, pos0, pos1, pos2, normalAccessor, indicesAccessor);\n            }\n            primitive.setVertexAttribute(normalAccessor, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].FaceNormal);\n        }\n    }\n    makeVerticesSepareted() {\n        for (let primitive of this.__primitives) {\n            if (primitive.hasIndices()) {\n                const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_4__[\"BufferUse\"].CPUGeneric);\n                const vertexCount = primitive.getVertexCountAsIndicesBased();\n                const indexAccessor = primitive.indicesAccessor;\n                for (let i in primitive.attributeAccessors) {\n                    const attributeAccessor = primitive.attributeAccessors[i];\n                    const elementSizeInBytes = attributeAccessor.elementSizeInBytes;\n                    const bufferView = buffer.takeBufferView({ byteLengthToNeed: elementSizeInBytes * vertexCount, byteStride: 0, isAoS: false });\n                    const newAccessor = bufferView.takeAccessor({ compositionType: attributeAccessor.compositionType, componentType: attributeAccessor.componentType, count: vertexCount });\n                    for (let j = 0; j < vertexCount; j++) {\n                        const idx = indexAccessor.getScalar(j, {});\n                        newAccessor.setElementFromSameCompositionAccessor(j, attributeAccessor, idx);\n                    }\n                    primitive.setVertexAttribute(newAccessor, primitive.attributeSemantics[i]);\n                }\n                const indicesAccessor = primitive.indicesAccessor;\n                const elementSizeInBytes = indicesAccessor.elementSizeInBytes;\n                const bufferView = buffer.takeBufferView({ byteLengthToNeed: elementSizeInBytes * vertexCount, byteStride: 0, isAoS: false });\n                const newAccessor = bufferView.takeAccessor({ compositionType: indicesAccessor.compositionType, componentType: indicesAccessor.componentType, count: vertexCount });\n                for (let j = 0; j < vertexCount; j++) {\n                    //const idx = indexAccessor!.getScalar(j, {});\n                    newAccessor.setScalar(j, j, {});\n                }\n                primitive.setIndices(newAccessor);\n            }\n        }\n    }\n    __calcBaryCentricCoord() {\n        for (let primitive_i in this.__primitives) {\n            let primitive = this.__primitives[primitive_i];\n            const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_4__[\"BufferUse\"].CPUGeneric);\n            const positionIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Position);\n            const positionAccessor = primitive.attributeAccessors[positionIdx];\n            const indicesAccessor = primitive.indicesAccessor;\n            const vertexNum = positionAccessor.elementCount;\n            let num = vertexNum;\n            const baryCentricCoordAttributeByteSize = num * 4 /* vec4 */ * 4 /* bytes */;\n            const baryCentricCoordBufferView = buffer.takeBufferView({ byteLengthToNeed: baryCentricCoordAttributeByteSize, byteStride: 0, isAoS: false });\n            const baryCentricCoordAccessor = baryCentricCoordBufferView.takeAccessor({ compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Vec4, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float, count: num });\n            for (let ver_i = 0; ver_i < num; ver_i++) {\n                let idx = ver_i;\n                // if (indicesAccessor) {\n                //   idx = indicesAccessor!.getScalar(ver_i, {});\n                // }\n                baryCentricCoordAccessor.setVec4(ver_i, ver_i % 3 === 0 ? 1 : 0, // 1 0 0  1 0 0  1 0 0,\n                ver_i % 3 === 1 ? 1 : 0, // 0 1 0  0 1 0  0 1 0,\n                ver_i % 3 === 2 ? 1 : 0, // 0 0 1  0 0 1  0 0 1,\n                ver_i, {});\n            }\n            primitive.setVertexAttribute(baryCentricCoordAccessor, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].BaryCentricCoord);\n        }\n    }\n    __initMorphPrimitives() {\n        if (this.weights.length === 0) {\n            return;\n        }\n        const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_4__[\"BufferUse\"].CPUGeneric);\n        for (let i = 0; i < this.__primitives.length; i++) {\n            const primitive = this.__primitives[i];\n            if (this.__morphPrimitives[i] == null) {\n                const target = primitive.targets[0];\n                const map = new Map();\n                target.forEach((accessor, semantic) => {\n                    const bufferView = buffer.takeBufferView({ byteLengthToNeed: accessor.byteLength, byteStride: 0, isAoS: false });\n                    const morphAccessor = bufferView.takeAccessor({ compositionType: accessor.compositionType, componentType: accessor.componentType, count: accessor.elementCount });\n                    map.set(semantic, morphAccessor);\n                });\n                const morphPrimitive = new _Primitive__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n                morphPrimitive.setData(map, primitive.primitiveMode, primitive.material, primitive.indicesAccessor);\n                morphPrimitive.setTargets(primitive.targets);\n                this.__morphPrimitives[i] = morphPrimitive;\n            }\n        }\n    }\n    __calcMorphPrimitives() {\n        if (this.weights.length === 0) {\n            return;\n        }\n        for (let i = 0; i < this.__primitives.length; i++) {\n            const morphPrimitive = this.__morphPrimitives[i];\n            const primitive = this.__primitives[i];\n            const target0Attributes = primitive.targets[0];\n            target0Attributes.forEach((accessor, semantic) => {\n                const morphAccessor = morphPrimitive.getAttribute(semantic);\n                const elementCount = morphAccessor.elementCount;\n                for (let j = 0; j < elementCount; j++) {\n                    morphAccessor.setElementFromSameCompositionAccessor(j, primitive.getAttribute(semantic));\n                }\n            });\n            // primitive.targets.forEach((targetAttributes, k)=>{\n            //   targetAttributes.forEach((accessor, semantic) => {\n            //     const morphAccessor = morphPrimitive.getAttribute(semantic)!;\n            //     const elementCount = morphAccessor.elementCount;\n            //     for (let j = 0; j < elementCount; j++) {\n            //       morphAccessor.addElementFromSameCompositionAccessor(j, accessor, this.weights[k]);\n            //     }\n            //   });\n            // });\n        }\n    }\n    /**\n     * Gets AABB in local space.\n     */\n    get AABB() {\n        if (this.__localAABB.isVanilla()) {\n            for (let primitive of this.__primitives) {\n                this.__localAABB.mergeAABB(primitive.AABB);\n            }\n        }\n        return this.__localAABB;\n    }\n    get instanceIndex() {\n        return this.__instanceIdx;\n    }\n    isInstanceMesh() {\n        if (this.__instanceOf != null) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    isOriginalMesh() {\n        return !this.isInstanceMesh();\n    }\n    get meshUID() {\n        return this.__meshUID;\n    }\n    updateVariationVBO() {\n        if (this.isInstanceMesh()) {\n            return this.__instanceOf.updateVariationVBO();\n        }\n        else {\n            if (!this.__instancesDirty) {\n                return false;\n            }\n            const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getWebGLResourceRepository();\n            this.__primitives.forEach((prim, i) => {\n                this.__vaoUids[i] = webglResourceRepository.createVertexArray();\n            });\n            if (this.__variationVBOUid != _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_9__[\"default\"].InvalidCGAPIResourceUid) {\n                webglResourceRepository.deleteVertexBuffer(this.__variationVBOUid);\n            }\n            const instanceNum = this.__instances.length;\n            const entityUIDs = new Float32Array(instanceNum + 1); // instances and original\n            entityUIDs[0] = this._attatchedEntityUID;\n            for (var i = 0; i < instanceNum; i++) {\n                entityUIDs[i + 1] = this.__instances[i]._attatchedEntityUID;\n            }\n            this.__variationVBOUid = webglResourceRepository.createVertexBufferFromTypedArray(entityUIDs);\n            this.__instancesDirty = false;\n            return true;\n        }\n    }\n    deleteVariationVBO() {\n        if (this.isInstanceMesh()) {\n            return this.__instanceOf.updateVariationVBO();\n        }\n        else {\n            const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getWebGLResourceRepository();\n            if (this.__variationVBOUid !== _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_9__[\"default\"].InvalidCGAPIResourceUid) {\n                webglResourceRepository.deleteVertexBuffer(this.__variationVBOUid);\n                this.__vaoUids.forEach((vaoUid) => {\n                    webglResourceRepository.deleteVertexArray(vaoUid);\n                });\n                return true;\n            }\n        }\n        return false;\n    }\n    get instanceCountIncludeOriginal() {\n        return this.__instances.length + 1;\n    }\n    castRay(srcPointInLocal, directionInLocal, dotThreshold = 0) {\n        let finalShortestIntersectedPosVec3;\n        let finalShortestT = Number.MAX_VALUE;\n        for (let primitive of this.__primitives) {\n            const { currentShortestIntersectedPosVec3, currentShortestT } = primitive.castRay(srcPointInLocal, directionInLocal, true, true, dotThreshold);\n            if (currentShortestT != null && currentShortestT < finalShortestT) {\n                finalShortestT = currentShortestT;\n                finalShortestIntersectedPosVec3 = currentShortestIntersectedPosVec3;\n            }\n        }\n        if (finalShortestT === Number.MAX_VALUE) {\n            finalShortestT === -1;\n        }\n        return { t: finalShortestT, intersectedPosition: finalShortestIntersectedPosVec3 };\n    }\n    _calcArenbergInverseMatrices() {\n        if (this.isPrecomputeForRayCastPickingEnable) {\n            for (let primitive of this.__primitives) {\n                primitive._calcArenbergInverseMatrices();\n            }\n        }\n    }\n}\nMesh.invalidateMeshUID = -1;\nMesh.__mesh_uid_count = Mesh.invalidateMeshUID;\nMesh.__originalMeshes = [];\n\n\n//# sourceURL=webpack:///./src/foundation/geometry/Mesh.ts?");

/***/ }),

/***/ "./src/foundation/geometry/Plane.ts":
/*!******************************************!*\
  !*** ./src/foundation/geometry/Plane.ts ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Plane; });\n/* harmony import */ var _Primitive__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Primitive */ \"./src/foundation/geometry/Primitive.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ \"./src/foundation/definitions/PrimitiveMode.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n\n\n\n\n\n\nclass Plane extends _Primitive__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor() {\n        super();\n    }\n    generate({ width, height, uSpan, vSpan, isUVRepeat = false, material }) {\n        var positions = [];\n        for (let i = 0; i <= vSpan; i++) {\n            for (let j = 0; j <= uSpan; j++) {\n                positions.push((j / uSpan - 1 / 2) * width);\n                positions.push(0);\n                positions.push((i / vSpan - 1 / 2) * height);\n            }\n        }\n        var indices = [];\n        for (let i = 0; i < vSpan; i++) {\n            let degenerate_left_index = 0;\n            let degenerate_right_index = 0;\n            for (let j = 0; j <= uSpan; j++) {\n                indices.push(i * (uSpan + 1) + j);\n                indices.push((i + 1) * (uSpan + 1) + j);\n                if (j === 0) {\n                    degenerate_left_index = (i + 1) * (uSpan + 1) + j;\n                }\n                else if (j === uSpan) {\n                    degenerate_right_index = (i + 1) * (uSpan + 1) + j;\n                }\n            }\n            indices.push(degenerate_right_index);\n            indices.push(degenerate_left_index);\n        }\n        var normals = [];\n        for (let i = 0; i <= vSpan; i++) {\n            for (let j = 0; j <= uSpan; j++) {\n                normals.push(0);\n                normals.push(1);\n                normals.push(0);\n            }\n        }\n        var texcoords = [];\n        for (let i = 0; i <= vSpan; i++) {\n            for (let j = 0; j <= uSpan; j++) {\n                if (isUVRepeat) {\n                    texcoords.push(j);\n                    texcoords.push(i);\n                }\n                else {\n                    texcoords.push(j / uSpan);\n                    texcoords.push(i / vSpan);\n                }\n            }\n        }\n        // Check Size\n        const attributeCompositionTypes = [_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec3, _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec3, _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec2];\n        const attributeSemantics = [_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Position, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Normal, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Texcoord0];\n        const primitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_3__[\"PrimitiveMode\"].TriangleStrip;\n        const attributes = [new Float32Array(positions), new Float32Array(normals), new Float32Array(texcoords)];\n        let sumOfAttributesByteSize = 0;\n        attributes.forEach(attribute => {\n            sumOfAttributesByteSize += attribute.byteLength;\n        });\n        const indexSizeInByte = indices.length * 2;\n        // Create Buffer\n        const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance().createBufferOnDemand(indexSizeInByte + sumOfAttributesByteSize, this);\n        // Index Buffer\n        const indicesBufferView = buffer.takeBufferView({ byteLengthToNeed: indexSizeInByte /*byte*/, byteStride: 0, isAoS: false });\n        const indicesAccessor = indicesBufferView.takeAccessor({\n            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Scalar,\n            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].UnsignedShort,\n            count: indices.length\n        });\n        for (let i = 0; i < indices.length; i++) {\n            indicesAccessor.setScalar(i, indices[i], {});\n        }\n        // VertexBuffer\n        const attributesBufferView = buffer.takeBufferView({ byteLengthToNeed: sumOfAttributesByteSize, byteStride: 0, isAoS: false });\n        const attributeAccessors = [];\n        const attributeComponentTypes = [];\n        attributes.forEach((attribute, i) => {\n            attributeComponentTypes[i] = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].fromTypedArray(attributes[i]);\n            const accessor = attributesBufferView.takeAccessor({\n                compositionType: attributeCompositionTypes[i],\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].fromTypedArray(attributes[i]),\n                count: attribute.byteLength / attributeCompositionTypes[i].getNumberOfComponents() / attributeComponentTypes[i].getSizeInBytes()\n            });\n            accessor.copyFromTypedArray(attribute);\n            attributeAccessors.push(accessor);\n        });\n        const attributeMap = new Map();\n        for (let i = 0; i < attributeSemantics.length; i++) {\n            attributeMap.set(attributeSemantics[i], attributeAccessors[i]);\n        }\n        this.setData(attributeMap, primitiveMode, material, indicesAccessor);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/geometry/Plane.ts?");

/***/ }),

/***/ "./src/foundation/geometry/Primitive.ts":
/*!**********************************************!*\
  !*** ./src/foundation/geometry/Primitive.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Primitive; });\n/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ \"./src/foundation/definitions/PrimitiveMode.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _math_AABB__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/AABB */ \"./src/foundation/math/AABB.ts\");\n/* harmony import */ var _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../helpers/MaterialHelper */ \"./src/foundation/helpers/MaterialHelper.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/MutableMatrix33 */ \"./src/foundation/math/MutableMatrix33.ts\");\n\n\n\n\n\n\n\n\n\n\n\nclass Primitive extends _core_RnObject__WEBPACK_IMPORTED_MODULE_2__[\"default\"] {\n    constructor() {\n        super();\n        this.__mode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].Unknown;\n        this.material = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_7__[\"default\"].createEmptyMaterial();\n        this.__attributes = new Map();\n        this.__primitiveUid = -1; // start ID from zero\n        this.__aabb = new _math_AABB__WEBPACK_IMPORTED_MODULE_6__[\"default\"]();\n        this.__targets = [];\n        this.__inverseArenbergMatrix = [];\n        this.__arenberg3rdPosition = [];\n    }\n    setData(attributes, mode, material, indicesAccessor) {\n        this.__indices = indicesAccessor;\n        this.__attributes = attributes;\n        if (material != null) {\n            this.material = material;\n        }\n        else {\n            this.material = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_7__[\"default\"].createClassicUberMaterial({ isSkinning: true, isLighting: true });\n        }\n        this.__mode = mode;\n        this.__primitiveUid = Primitive.__primitiveCount++;\n        // if (Primitive.__headerAccessor == null) {\n        //   // primitive 0\n        //   // prim0.indices.byteOffset, prim0.indices.componentSizeInByte, prim0.indices.indicesLength, null\n        //   //   prim0.attrb0.byteOffset, prim0.attrib0.byteStride, prim0.attrib0.compopisionN, prim0.attrib0.componentSizeInByte\n        //   //   prim0.attrb1.byteOffset, prim0.attrib1.byteStride, prim0.attrib1.compopisionN, prim0.attrib1.componentSizeInByte\n        //   //   ...\n        //   //   prim0.attrb7.byteOffset, prim0.attrib7.byteStride, prim0.attrib7.compopisionN, prim0.attrib7.componentSizeInByte\n        //   // primitive 1\n        //   // prim1.indices.byteOffset, prim1.indices.componentSizeInByte, prim0.indices.indicesLength, null\n        //   //   prim1.attrb0.byteOffset, prim1.attrib0.byteStride, prim1.attrib0.compopisionN, prim1.attrib0.componentSizeInByte\n        //   //   prim1.attrb1.byteOffset, prim1.attrib1.byteStride, prim1.attrib1.compopisionN, prim1.attrib1.componentSizeInByte\n        //   //   ...\n        //   //   prim1.attrb7.byteOffset, prim1.attrib7.byteStride, prim1.attrib7.compopisionN, prim1.attrib7.componentSizeInByte\n        //   const buffer = MemoryManager.getInstance().getBuffer(BufferUse.UBOGeneric);\n        //   const bufferView = buffer.takeBufferView({byteLengthToNeed: ((1*4) + (8*4)) * 4/*byte*/ * Primitive.maxPrimitiveCount, byteStride: 64, isAoS:false });\n        //   Primitive.__headerAccessor = bufferView.takeAccessor(\n        //     {compositionType: CompositionType.Vec4, componentType: ComponentType.Float, count: 9 * Primitive.maxPrimitiveCount})\n        // }\n        // const attributeNumOfPrimitive = 1/*indices*/ + 8/*vertexAttributes*/;\n        // if (this.indicesAccessor != null) {\n        //   Primitive.__headerAccessor.setVec4(attributeNumOfPrimitive * this.__primitiveUid + 0 /* 0 means indices */,\n        //     this.indicesAccessor.byteOffsetInBuffer, this.indicesAccessor.componentSizeInBytes, this.indicesAccessor.byteLength / this.indicesAccessor.componentSizeInBytes, -1 );\n        // } else {\n        //   Primitive.__headerAccessor.setVec4(attributeNumOfPrimitive * this.__primitiveUid + 0 /* 0 means indices */, -1, -1, -1, -1 );\n        // }\n        // this.attributeAccessors.forEach((attributeAccessor, i)=>{\n        //   Primitive.__headerAccessor!.setVec4(attributeNumOfPrimitive * this.__primitiveUid + i,\n        //     attributeAccessor.byteOffsetInBuffer, attributeAccessor.byteStride, attributeAccessor.numberOfComponents, attributeAccessor.componentSizeInBytes);\n        // });\n    }\n    static get maxPrimitiveCount() {\n        return 500;\n    }\n    static get headerAccessor() {\n        return this.__headerAccessor;\n    }\n    static createPrimitive({ indices, attributeCompositionTypes, attributeSemantics, attributes, material, primitiveMode }) {\n        let sumOfAttributesByteSize = 0;\n        attributes.forEach(attribute => {\n            sumOfAttributesByteSize += attribute.byteLength;\n        });\n        let bufferSize = sumOfAttributesByteSize;\n        if (indices != null) {\n            bufferSize += indices.byteLength;\n        }\n        const primitive = new Primitive();\n        const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance().createBufferOnDemand(bufferSize, primitive);\n        let indicesComponentType;\n        let indicesBufferView;\n        let indicesAccessor;\n        if (indices != null) {\n            indicesComponentType = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].fromTypedArray(indices);\n            indicesBufferView = buffer.takeBufferView({ byteLengthToNeed: indices.byteLength, byteStride: 0, isAoS: false });\n            indicesAccessor = indicesBufferView.takeAccessor({\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_5__[\"CompositionType\"].Scalar,\n                componentType: indicesComponentType,\n                count: indices.byteLength / indicesComponentType.getSizeInBytes()\n            });\n            // copy indices\n            for (let i = 0; i < indices.byteLength / indicesAccessor.componentSizeInBytes; i++) {\n                indicesAccessor.setScalar(i, indices[i], {});\n            }\n        }\n        const attributesBufferView = buffer.takeBufferView({ byteLengthToNeed: sumOfAttributesByteSize, byteStride: 0, isAoS: false });\n        const attributeAccessors = [];\n        const attributeComponentTypes = [];\n        attributes.forEach((attribute, i) => {\n            attributeComponentTypes[i] = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].fromTypedArray(attributes[i]);\n            const accessor = attributesBufferView.takeAccessor({\n                compositionType: attributeCompositionTypes[i],\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].fromTypedArray(attributes[i]),\n                count: attribute.byteLength / attributeCompositionTypes[i].getNumberOfComponents() / attributeComponentTypes[i].getSizeInBytes()\n            });\n            accessor.copyFromTypedArray(attribute);\n            attributeAccessors.push(accessor);\n        });\n        const attributeMap = new Map();\n        for (let i = 0; i < attributeSemantics.length; i++) {\n            attributeMap.set(attributeSemantics[i], attributeAccessors[i]);\n        }\n        primitive.setData(attributeMap, primitiveMode, material, indicesAccessor);\n        return primitive;\n    }\n    get indicesAccessor() {\n        return this.__indices;\n    }\n    getVertexCountAsIndicesBased() {\n        if (this.indicesAccessor) {\n            return this.indicesAccessor.elementCount;\n        }\n        else {\n            return this.getVertexCountAsVerticesBased();\n        }\n    }\n    getVertexCountAsVerticesBased() {\n        const positionAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Position);\n        return positionAccessor.elementCount;\n    }\n    getTriangleCountAsIndicesBased() {\n        if (this.indicesAccessor) {\n            switch (this.__mode) {\n                case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].Triangles:\n                    return this.indicesAccessor.elementCount / 3;\n                case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].TriangleStrip:\n                    return this.indicesAccessor.elementCount - 2;\n                case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].TriangleFan:\n                    return this.indicesAccessor.elementCount - 2;\n                default:\n                    return 0;\n            }\n        }\n        else {\n            return this.getTriangleCountAsVerticesBased();\n        }\n    }\n    getTriangleCountAsVerticesBased() {\n        const positionAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Position);\n        switch (this.__mode) {\n            case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].Triangles:\n                return positionAccessor.elementCount / 3;\n            case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].TriangleStrip:\n                return positionAccessor.elementCount - 2;\n            case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].TriangleFan:\n                return positionAccessor.elementCount - 2;\n            default:\n                return 0;\n        }\n    }\n    hasIndices() {\n        return this.__indices != null;\n    }\n    get attributeAccessors() {\n        const accessors = [];\n        this.__attributes.forEach((accessor, semantic) => {\n            accessors.push(accessor);\n        });\n        return accessors;\n    }\n    getAttribute(semantic) {\n        return this.__attributes.get(semantic);\n    }\n    get attributeSemantics() {\n        const semantics = [];\n        this.__attributes.forEach((accessor, semantic) => {\n            semantics.push(semantic);\n        });\n        return semantics;\n    }\n    get attributeEntries() {\n        return this.__attributes.entries();\n    }\n    get attributeCompositionTypes() {\n        const types = [];\n        this.__attributes.forEach((accessor, semantic) => {\n            types.push(accessor.compositionType);\n        });\n        return types;\n    }\n    get attributeComponentTypes() {\n        const types = [];\n        this.__attributes.forEach((accessor, semantic) => {\n            types.push(accessor.componentType);\n        });\n        return types;\n    }\n    get primitiveMode() {\n        return this.__mode;\n    }\n    get primitiveUid() {\n        return this.__primitiveUid;\n    }\n    get AABB() {\n        if (this.__aabb.isVanilla()) {\n            const positionAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Position);\n            if (positionAccessor.min == null || positionAccessor.max == null) {\n                positionAccessor.calcMinMax();\n            }\n            this.__aabb.minPoint = positionAccessor.min;\n            this.__aabb.maxPoint = positionAccessor.max;\n        }\n        return this.__aabb;\n    }\n    setVertexAttribute(accessor, vertexSemantics) {\n        this.__attributes.set(vertexSemantics, accessor);\n    }\n    removeIndices() {\n        this.__indices = undefined;\n    }\n    setIndices(accessor) {\n        this.__indices = accessor;\n    }\n    setTargets(targets) {\n        this.__targets = targets;\n    }\n    get targets() {\n        return this.__targets;\n    }\n    isBlend() {\n        if (this.material == null || !this.material.isBlend()) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n    isOpaque() {\n        return !this.isBlend();\n    }\n    create3DAPIVertexData() {\n        if (this.__vertexHandles != null) {\n            return false;\n        }\n        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getWebGLResourceRepository();\n        this.__vertexHandles = webglResourceRepository.createVertexBufferAndIndexBuffer(this);\n        return true;\n    }\n    delete3DAPIVertexData() {\n        if (this.__vertexHandles == null) {\n            return false;\n        }\n        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getWebGLResourceRepository();\n        webglResourceRepository.deleteVertexDataResources(this.__vertexHandles);\n        return true;\n    }\n    get vertexHandles() {\n        return this.__vertexHandles;\n    }\n    castRay(origVec3, dirVec3, isFrontFacePickable, isBackFacePickable, dotThreshold) {\n        let currentShortestT = Number.MAX_VALUE;\n        let currentShortestIntersectedPosVec3 = null;\n        const positionAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Position);\n        // const positionElementNumPerVertex = this._vertices.components.position;\n        let incrementNum = 3; // gl.TRIANGLES\n        if (this.__mode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].TriangleStrip) {\n            // gl.TRIANGLE_STRIP\n            incrementNum = 1;\n        }\n        const posComponentN = positionAccessor.numberOfComponents;\n        if (!this.hasIndices()) {\n            for (let i = 0; i < positionAccessor.elementCount; i++) {\n                const j = i * incrementNum;\n                let pos0IndexBase = j;\n                let pos1IndexBase = (j + 1);\n                let pos2IndexBase = (j + 2);\n                const result = this.__castRayInner(origVec3, dirVec3, j, pos0IndexBase, pos1IndexBase, pos2IndexBase, isFrontFacePickable, isBackFacePickable, dotThreshold);\n                if (result === null) {\n                    continue;\n                }\n                const t = result[0];\n                if (result[0] < currentShortestT) {\n                    currentShortestT = t;\n                    currentShortestIntersectedPosVec3 = result[1];\n                }\n            }\n        }\n        else {\n            for (let j = 0; j < this.__indices.elementCount; j++) {\n                const k = j * incrementNum;\n                if (k + 2 > this.__indices.elementCount - 1) {\n                    break;\n                }\n                let pos0IndexBase = this.__indices.getScalar(k, {});\n                let pos1IndexBase = this.__indices.getScalar(k + 1, {});\n                let pos2IndexBase = this.__indices.getScalar(k + 2, {});\n                const result = this.__castRayInner(origVec3, dirVec3, this.__indices.getScalar(k, {}), pos0IndexBase, pos1IndexBase, pos2IndexBase, isFrontFacePickable, isBackFacePickable, dotThreshold);\n                if (result === null) {\n                    continue;\n                }\n                const t = result[0];\n                if (result[0] < currentShortestT) {\n                    currentShortestT = t;\n                    currentShortestIntersectedPosVec3 = result[1];\n                }\n            }\n        }\n        return { currentShortestIntersectedPosVec3, currentShortestT };\n    }\n    __castRayInner(origVec3, dirVec3, i, pos0IndexBase, pos1IndexBase, pos2IndexBase, isFrontFacePickable, isBackFacePickable, dotThreshold) {\n        if (!this.__arenberg3rdPosition[i]) {\n            return null;\n        }\n        const faceNormalAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].FaceNormal);\n        if (faceNormalAccessor) {\n            const faceNormal = faceNormalAccessor.getVec3(i, {});\n            if (faceNormal.dotProduct(dirVec3) < dotThreshold && !isFrontFacePickable) {\n                return null;\n            }\n            if (faceNormal.dotProduct(dirVec3) > -dotThreshold && !isBackFacePickable) {\n                return null;\n            }\n        }\n        const vec3 = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__[\"default\"].subtract(origVec3, this.__arenberg3rdPosition[i]);\n        const convertedOrigVec3 = this.__inverseArenbergMatrix[i].multiplyVector(vec3);\n        const convertedDirVec3 = this.__inverseArenbergMatrix[i].multiplyVector(dirVec3);\n        if (convertedDirVec3.z >= -1e-6 && convertedDirVec3.z <= 1e-6) {\n            return null;\n        }\n        const t = -convertedOrigVec3.z / convertedDirVec3.z;\n        if (t <= 1e-5) {\n            return null;\n        }\n        const u = convertedOrigVec3.x + t * convertedDirVec3.x;\n        const v = convertedOrigVec3.y + t * convertedDirVec3.y;\n        if (u < 0.0 || v < 0.0 || u + v > 1.0) {\n            return null;\n        }\n        const fDat = 1.0 - u - v;\n        const positionAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Position);\n        const pos0Vec3 = positionAccessor.getVec3(pos0IndexBase, {});\n        const pos1Vec3 = positionAccessor.getVec3(pos1IndexBase, {});\n        const pos2Vec3 = positionAccessor.getVec3(pos2IndexBase, {});\n        const pos0 = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__[\"default\"].multiply(pos0Vec3, u);\n        const pos1 = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__[\"default\"].multiply(pos1Vec3, v);\n        const pos2 = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__[\"default\"].multiply(pos2Vec3, fDat);\n        const intersectedPosVec3 = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__[\"default\"].add(_math_Vector3__WEBPACK_IMPORTED_MODULE_9__[\"default\"].add(pos0, pos1), pos2);\n        return [t, intersectedPosVec3];\n    }\n    _calcArenbergInverseMatrices() {\n        const positionAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Position);\n        const positionElementNumPerVertex = positionAccessor.numberOfComponents;\n        let incrementNum = 3; // gl.TRIANGLES\n        if (this.__mode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__[\"PrimitiveMode\"].TriangleStrip) {\n            // gl.TRIANGLE_STRIP\n            incrementNum = 1;\n        }\n        this.__inverseArenbergMatrix = [];\n        this.__arenberg3rdPosition = [];\n        if (!this.hasIndices()) {\n            for (let i = 0; i < positionAccessor.elementCount - 2; i += incrementNum) {\n                let pos0IndexBase = i;\n                let pos1IndexBase = (i + 1);\n                let pos2IndexBase = (i + 2);\n                this._calcArenbergMatrixFor3Vertices(i, pos0IndexBase, pos1IndexBase, pos2IndexBase, incrementNum);\n            }\n        }\n        else {\n            for (let j = 0; j < this.__indices.elementCount - 2; j += incrementNum) {\n                if (j + 2 > this.__indices.elementCount - 1) {\n                    break;\n                }\n                let pos0IndexBase = this.__indices.getScalar(j, {});\n                let pos1IndexBase = this.__indices.getScalar(j + 1, {});\n                let pos2IndexBase = this.__indices.getScalar(j + 2, {});\n                this._calcArenbergMatrixFor3Vertices(j, pos0IndexBase, pos1IndexBase, pos2IndexBase, incrementNum);\n            }\n        }\n    }\n    _calcArenbergMatrixFor3Vertices(i, pos0IndexBase, pos1IndexBase, pos2IndexBase, incrementNum) {\n        const positionAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Position);\n        const pos0Vec3 = positionAccessor.getVec3(pos0IndexBase, {});\n        const pos1Vec3 = positionAccessor.getVec3(pos1IndexBase, {});\n        const pos2Vec3 = positionAccessor.getVec3(pos2IndexBase, {});\n        const ax = pos0Vec3.x - pos2Vec3.x;\n        const ay = pos0Vec3.y - pos2Vec3.y;\n        const az = pos0Vec3.z - pos2Vec3.z;\n        const bx = pos1Vec3.x - pos2Vec3.x;\n        const by = pos1Vec3.y - pos2Vec3.y;\n        const bz = pos1Vec3.z - pos2Vec3.z;\n        let nx = ay * bz - az * by;\n        let ny = az * bx - ax * bz;\n        let nz = ax * by - ay * bx;\n        let da = Math.sqrt(nx * nx + ny * ny + nz * nz);\n        if (da <= 1e-6) {\n            da = 0.0001;\n        }\n        da = 1.0 / da;\n        nx *= da;\n        ny *= da;\n        nz *= da;\n        const arenbergMatrix = new _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_10__[\"default\"](pos0Vec3.x - pos2Vec3.x, pos1Vec3.x - pos2Vec3.x, nx - pos2Vec3.x, pos0Vec3.y - pos2Vec3.y, pos1Vec3.y - pos2Vec3.y, ny - pos2Vec3.y, pos0Vec3.z - pos2Vec3.z, pos1Vec3.z - pos2Vec3.z, nz - pos2Vec3.z);\n        const inverseArenbergMatrix = arenbergMatrix.invert();\n        let arenberg0IndexBase = i;\n        // let arenberg1IndexBase = i + 1;\n        // let arenberg2IndexBase = i + 2;\n        if (this.hasIndices()) {\n            arenberg0IndexBase = this.__indices.getScalar(i, {});\n            // arenberg1IndexBase = this.__indices!.getScalar(i + 1, {});\n            // arenberg2IndexBase = this.__indices!.getScalar(i + 2, {});\n        }\n        //    const triangleIdx = i/incrementNum;\n        this.__inverseArenbergMatrix[arenberg0IndexBase] = inverseArenbergMatrix;\n        this.__arenberg3rdPosition[arenberg0IndexBase] = pos2Vec3;\n    }\n}\nPrimitive.__primitiveCount = 0;\n\n\n//# sourceURL=webpack:///./src/foundation/geometry/Primitive.ts?");

/***/ }),

/***/ "./src/foundation/geometry/Sphere.ts":
/*!*******************************************!*\
  !*** ./src/foundation/geometry/Sphere.ts ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Sphere; });\n/* harmony import */ var _Primitive__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Primitive */ \"./src/foundation/geometry/Primitive.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ \"./src/foundation/definitions/PrimitiveMode.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n\n\n\n\n\n\n\nclass Sphere extends _Primitive__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor() {\n        super();\n    }\n    generate({ radius, widthSegments, heightSegments, material }) {\n        var positions = [];\n        var texcoords = [];\n        var normals = [];\n        let shiftValue = 0.00001; // for avoid Singular point\n        for (var latNumber = 0; latNumber <= heightSegments; latNumber++) {\n            var theta = latNumber * Math.PI / heightSegments + shiftValue;\n            var sinTheta = Math.sin(theta);\n            var cosTheta = Math.cos(theta);\n            for (var longNumber = 0; longNumber <= widthSegments; longNumber++) {\n                var phi = longNumber * 2 * Math.PI / widthSegments;\n                var sinPhi = Math.sin(phi);\n                var cosPhi = Math.cos(phi);\n                var x = radius * cosPhi * sinTheta;\n                var y = radius * cosTheta;\n                var z = radius * sinPhi * sinTheta;\n                var position = new _math_Vector3__WEBPACK_IMPORTED_MODULE_6__[\"default\"](x, y, z);\n                positions.push(x);\n                positions.push(y);\n                positions.push(z);\n                var u = 1 - (longNumber / widthSegments);\n                var v = latNumber / heightSegments;\n                texcoords.push(u);\n                texcoords.push(v);\n                const normal = _math_Vector3__WEBPACK_IMPORTED_MODULE_6__[\"default\"].normalize(position);\n                normals.push(normal.x);\n                normals.push(normal.y);\n                normals.push(normal.z);\n            }\n        }\n        // first    first+1\n        //    +-------+\n        //    |     / |\n        //    |   /   |\n        //    | /     |\n        //    +-------+\n        // second   second+1\n        //\n        var indices = [];\n        for (var latNumber = 0; latNumber < heightSegments; latNumber++) {\n            for (var longNumber = 0; longNumber < widthSegments; longNumber++) {\n                var first = (latNumber * (widthSegments + 1)) + longNumber;\n                var second = first + widthSegments + 1;\n                indices.push(first + 1);\n                indices.push(second);\n                indices.push(first);\n                indices.push(first + 1);\n                indices.push(second + 1);\n                indices.push(second);\n            }\n        }\n        const attributeCompositionTypes = [_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec3, _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec3, _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec2];\n        const attributeSemantics = [_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Position, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Normal, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Texcoord0];\n        const primitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_3__[\"PrimitiveMode\"].Triangles;\n        const attributes = [new Float32Array(positions), new Float32Array(normals), new Float32Array(texcoords)];\n        let sumOfAttributesByteSize = 0;\n        attributes.forEach(attribute => {\n            sumOfAttributesByteSize += attribute.byteLength;\n        });\n        const indexSizeInByte = indices.length * 2;\n        const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance().createBufferOnDemand(indexSizeInByte + sumOfAttributesByteSize, this);\n        const indicesBufferView = buffer.takeBufferView({ byteLengthToNeed: indexSizeInByte /*byte*/, byteStride: 0, isAoS: false });\n        const indicesAccessor = indicesBufferView.takeAccessor({\n            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Scalar,\n            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].UnsignedShort,\n            count: indices.length\n        });\n        for (let i = 0; i < indices.length; i++) {\n            indicesAccessor.setScalar(i, indices[i], {});\n        }\n        const attributesBufferView = buffer.takeBufferView({ byteLengthToNeed: sumOfAttributesByteSize, byteStride: 0, isAoS: false });\n        const attributeAccessors = [];\n        const attributeComponentTypes = [];\n        attributes.forEach((attribute, i) => {\n            attributeComponentTypes[i] = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].fromTypedArray(attributes[i]);\n            const accessor = attributesBufferView.takeAccessor({\n                compositionType: attributeCompositionTypes[i],\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].fromTypedArray(attributes[i]),\n                count: attribute.byteLength / attributeCompositionTypes[i].getNumberOfComponents() / attributeComponentTypes[i].getSizeInBytes()\n            });\n            accessor.copyFromTypedArray(attribute);\n            attributeAccessors.push(accessor);\n        });\n        const attributeMap = new Map();\n        for (let i = 0; i < attributeSemantics.length; i++) {\n            attributeMap.set(attributeSemantics[i], attributeAccessors[i]);\n        }\n        this.setData(attributeMap, primitiveMode, material, indicesAccessor);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/geometry/Sphere.ts?");

/***/ }),

/***/ "./src/foundation/helpers/EntityHelper.ts":
/*!************************************************!*\
  !*** ./src/foundation/helpers/EntityHelper.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _components_TransformComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/TransformComponent */ \"./src/foundation/components/TransformComponent.ts\");\n/* harmony import */ var _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _components_MeshComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/MeshRendererComponent */ \"./src/foundation/components/MeshRendererComponent.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _components_CameraControllerComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/CameraControllerComponent */ \"./src/foundation/components/CameraControllerComponent.ts\");\n\n\n\n\n\n\n\nfunction createGroupEntity() {\n    return _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance().createEntity([_components_TransformComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]]);\n}\nfunction createMeshEntity() {\n    return _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance().createEntity([_components_TransformComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"], _components_MeshComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_4__[\"default\"]]);\n}\nfunction createCameraEntity() {\n    return _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance().createEntity([_components_TransformComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_5__[\"default\"]]);\n}\nfunction createCameraWithControllerEntity() {\n    return _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance().createEntity([_components_TransformComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_5__[\"default\"], _components_CameraControllerComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"]]);\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object.freeze({ createGroupEntity, createMeshEntity, createCameraEntity, createCameraWithControllerEntity }));\n\n\n//# sourceURL=webpack:///./src/foundation/helpers/EntityHelper.ts?");

/***/ }),

/***/ "./src/foundation/helpers/MaterialHelper.ts":
/*!**************************************************!*\
  !*** ./src/foundation/helpers/MaterialHelper.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _materials_Material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../materials/Material */ \"./src/foundation/materials/Material.ts\");\n/* harmony import */ var _materials_PbrShadingMaterialNode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../materials/PbrShadingMaterialNode */ \"./src/foundation/materials/PbrShadingMaterialNode.ts\");\n/* harmony import */ var _materials_ClassicShadingSingleMaterialNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../materials/ClassicShadingSingleMaterialNode */ \"./src/foundation/materials/ClassicShadingSingleMaterialNode.ts\");\n/* harmony import */ var _materials_EnvConstantSingleMaterialNode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../materials/EnvConstantSingleMaterialNode */ \"./src/foundation/materials/EnvConstantSingleMaterialNode.ts\");\n/* harmony import */ var _materials_FXAA3QualitySingleMaterialNode__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../materials/FXAA3QualitySingleMaterialNode */ \"./src/foundation/materials/FXAA3QualitySingleMaterialNode.ts\");\n/* harmony import */ var _materials_DepthEncodeSingleMaterialNode__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../materials/DepthEncodeSingleMaterialNode */ \"./src/foundation/materials/DepthEncodeSingleMaterialNode.ts\");\n/* harmony import */ var _materials_ShadowMapDecodeClassicSingleMaterialNode__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../materials/ShadowMapDecodeClassicSingleMaterialNode */ \"./src/foundation/materials/ShadowMapDecodeClassicSingleMaterialNode.ts\");\n/* harmony import */ var _materials_GammaCorrectionSingleMaterialNode__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../materials/GammaCorrectionSingleMaterialNode */ \"./src/foundation/materials/GammaCorrectionSingleMaterialNode.ts\");\n/* harmony import */ var _materials_EntityUIDOutputSingleMaterialNode__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../materials/EntityUIDOutputSingleMaterialNode */ \"./src/foundation/materials/EntityUIDOutputSingleMaterialNode.ts\");\n/* harmony import */ var _materials_MToonSingleMaterialNode__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../materials/MToonSingleMaterialNode */ \"./src/foundation/materials/MToonSingleMaterialNode.ts\");\n\n\n\n\n\n\n\n\n\n\n\nfunction createMaterial(materialName, materialNodes, maxInstancesNumber) {\n    const isRegistMaterialType = _materials_Material__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isRegistedMaterialType(materialName);\n    if (!isRegistMaterialType) {\n        _materials_Material__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerMaterial(materialName, materialNodes, maxInstancesNumber);\n    }\n    const material = _materials_Material__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createMaterial(materialName, materialNodes);\n    return material;\n}\nfunction createEmptyMaterial() {\n    const materialName = 'Empty';\n    const material = createMaterial(materialName, [], _core_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].maxMaterialInstanceForEachType);\n    return material;\n}\nfunction createPbrUberMaterial({ additionalName = '', isMorphing = false, isSkinning = false, isLighting = false, maxInstancesNumber = _core_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].maxMaterialInstanceForEachType } = {}) {\n    const materialName = 'PbrUber'\n        + `_${additionalName}_`\n        + (isMorphing ? '+morphing' : '')\n        + (isSkinning ? '+skinning' : '')\n        + (isLighting ? '' : '-lighting');\n    const materialNode = new _materials_PbrShadingMaterialNode__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({ isMorphing, isSkinning, isLighting });\n    materialNode.isSingleOperation = true;\n    const material = createMaterial(materialName, [materialNode], maxInstancesNumber);\n    return material;\n}\nfunction createClassicUberMaterial({ additionalName = '', isSkinning = false, isLighting = false, maxInstancesNumber = _core_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].maxMaterialInstanceForEachType } = {}) {\n    const materialName = 'ClassicUber'\n        + `_${additionalName}_`\n        + (isSkinning ? '+skinning' : '')\n        + (isLighting ? '' : '-lighting');\n    const materialNode = new _materials_ClassicShadingSingleMaterialNode__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({ isSkinning: isSkinning, isLighting: isLighting });\n    materialNode.isSingleOperation = true;\n    const material = createMaterial(materialName, [materialNode], maxInstancesNumber);\n    return material;\n}\nfunction createEnvConstantMaterial({ additionalName = '', maxInstancesNumber = 10 } = {}) {\n    const materialName = 'EnvConstant' + `_${additionalName}`;\n    const materialNode = new _materials_EnvConstantSingleMaterialNode__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\n    materialNode.isSingleOperation = true;\n    const material = createMaterial(materialName, [materialNode], maxInstancesNumber);\n    return material;\n}\nfunction createFXAA3QualityMaterial({ additionalName = '', maxInstancesNumber = 1 } = {}) {\n    const materialName = 'FXAA3Quality' + `_${additionalName}`;\n    const materialNode = new _materials_FXAA3QualitySingleMaterialNode__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n    materialNode.isSingleOperation = true;\n    const material = createMaterial(materialName, [materialNode], maxInstancesNumber);\n    return material;\n}\nfunction createDepthEncodeMaterial({ additionalName = '', isSkinning = false, maxInstancesNumber = 10 } = {}) {\n    const materialName = 'DepthEncode'\n        + `_${additionalName}_`\n        + (isSkinning ? '+skinning' : '');\n    const materialNode = new _materials_DepthEncodeSingleMaterialNode__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({ isSkinning: isSkinning });\n    materialNode.isSingleOperation = true;\n    const material = createMaterial(materialName, [materialNode], maxInstancesNumber);\n    return material;\n}\nfunction createShadowMapDecodeClassicSingleMaterial(depthEncodeRenderPass, { additionalName = '', isMorphing = false, isSkinning = false, isLighting = true, colorAttachmentsNumber = 0, maxInstancesNumber = 20 } = {}) {\n    const materialName = 'ShadowMapDecodeClassic'\n        + `_${additionalName}_`\n        + (isSkinning ? '+skinning' : '')\n        + (isLighting ? '' : '-lighting');\n    const materialNode = new _materials_ShadowMapDecodeClassicSingleMaterialNode__WEBPACK_IMPORTED_MODULE_7__[\"default\"](depthEncodeRenderPass, { isMorphing: isMorphing, isSkinning: isSkinning, isLighting: isLighting, colorAttachmentsNumber: colorAttachmentsNumber });\n    materialNode.isSingleOperation = true;\n    const material = createMaterial(materialName, [materialNode], maxInstancesNumber);\n    return material;\n}\nfunction createGammaCorrectionMaterial({ additionalName = '', maxInstancesNumber = 1 } = {}) {\n    const materialName = 'GammaCorrection' + `_${additionalName}`;\n    const materialNode = new _materials_GammaCorrectionSingleMaterialNode__WEBPACK_IMPORTED_MODULE_8__[\"default\"]();\n    materialNode.isSingleOperation = true;\n    const material = createMaterial(materialName, [materialNode], maxInstancesNumber);\n    return material;\n}\nfunction createEntityUIDOutputMaterial({ additionalName = '', maxInstancesNumber = 10 } = {}) {\n    const materialName = 'EntityUIDOutput' + `_${additionalName}`;\n    const materialNode = new _materials_EntityUIDOutputSingleMaterialNode__WEBPACK_IMPORTED_MODULE_9__[\"default\"]();\n    materialNode.isSingleOperation = true;\n    const material = createMaterial(materialName, [materialNode], maxInstancesNumber);\n    return material;\n}\nfunction createMToonMaterial({ additionalName = '', isMorphing = false, isSkinning = false, isLighting = false, isOutline = false, materialProperties = undefined, textures = undefined, debugMode = undefined, maxInstancesNumber = _core_Config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].maxMaterialInstanceForEachType } = {}) {\n    const materialName = 'MToon'\n        + `_${additionalName}_`\n        + (isMorphing ? '+morphing' : '')\n        + (isSkinning ? '+skinning' : '')\n        + (isLighting ? '-lighting' : '')\n        + (isOutline ? '-outline' : '');\n    const materialNode = new _materials_MToonSingleMaterialNode__WEBPACK_IMPORTED_MODULE_10__[\"default\"](isOutline, materialProperties, textures, isMorphing, isSkinning, isLighting, debugMode);\n    materialNode.isSingleOperation = true;\n    const material = createMaterial(materialName, [materialNode], maxInstancesNumber);\n    materialNode.setMaterialParameters(material, isOutline);\n    return material;\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object.freeze({\n    createEmptyMaterial, createPbrUberMaterial, createClassicUberMaterial, createEnvConstantMaterial, createFXAA3QualityMaterial, createDepthEncodeMaterial,\n    createShadowMapDecodeClassicSingleMaterial, createGammaCorrectionMaterial, createEntityUIDOutputMaterial, createMToonMaterial,\n}));\n\n\n//# sourceURL=webpack:///./src/foundation/helpers/MaterialHelper.ts?");

/***/ }),

/***/ "./src/foundation/helpers/RenderableHelper.ts":
/*!****************************************************!*\
  !*** ./src/foundation/helpers/RenderableHelper.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _renderer_FrameBuffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../renderer/FrameBuffer */ \"./src/foundation/renderer/FrameBuffer.ts\");\n/* harmony import */ var _textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../textures/RenderTargetTexture */ \"./src/foundation/textures/RenderTargetTexture.ts\");\n/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/TextureParameter */ \"./src/foundation/definitions/TextureParameter.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/PixelFormat */ \"./src/foundation/definitions/PixelFormat.ts\");\n/* harmony import */ var _textures_RenderBuffer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../textures/RenderBuffer */ \"./src/foundation/textures/RenderBuffer.ts\");\n\n\n\n\n\n\nfunction createTexturesForRenderTarget(width, height, textureNum, { level = 0, internalFormat = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_4__[\"PixelFormat\"].RGBA, format = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_4__[\"PixelFormat\"].RGBA, type = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].UnsignedByte, magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Linear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].ClampToEdge, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].ClampToEdge }) {\n    const frameBuffer = new _renderer_FrameBuffer__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n    frameBuffer.create(width, height);\n    for (let i = 0; i < textureNum; i++) {\n        const renderTargetTexture = new _textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n        renderTargetTexture.create({ width, height, level, internalFormat, format, type, magFilter, minFilter, wrapS, wrapT });\n        frameBuffer.setColorAttachmentAt(i, renderTargetTexture);\n    }\n    const renderBuffer = new _textures_RenderBuffer__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n    renderBuffer.create(width, height, _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Depth16);\n    frameBuffer.setDepthAttachment(renderBuffer);\n    return frameBuffer;\n}\n/*\nfunction createTexturesForRenderTarget(width: number, height:number, textureNum:number,\n  {\n    level = 0,\n    internalFormat = PixelFormat.RGBA,\n    format = PixelFormat.RGBA,\n    type = ComponentType.UnsignedByte,\n    magFilter = TextureParameter.Linear,\n    minFilter = TextureParameter.Linear,\n    wrapS = TextureParameter.ClampToEdge,\n    wrapT = TextureParameter.ClampToEdge\n  }) {\n  const frameBuffer = new FrameBuffer();\n  frameBuffer.create(width, height);\n\n  for (let i=0; i<textureNum; i++) {\n    const renderTargetTexture = new RenderTargetTexture();\n    renderTargetTexture.create({width, height, level, internalFormat, format, type, magFilter, minFilter, wrapS, wrapT});\n    frameBuffer.setColorAttachmentAt(i, renderTargetTexture);\n  }\n\n\n\n  let format = gl.DEPTH_COMPONENT;\n  let internalFormat = gl.DEPTH_COMPONENT;\n  let type = gl.UNSIGNED_INT;\n  if (GLBoost.isThisGLVersion_2(gl)) {\n    type = gl.UNSIGNED_INT;\n    format = gl.DEPTH_COMPONENT;\n    internalFormat = gl.DEPTH_COMPONENT24;\n  } else if (glem.extDepthTex) {\n    type = glem.extDepthTex.UNSIGNED_INT_24_8_WEBGL;\n    format = gl.DEPTH_STENCIL;\n    internalFormat = gl.DEPTH_STENCIL;\n  }\n\n  const depthTexture = new RenderTargetTexture();\n  depthTexture.create({width: width, height: height, level: 0, internalFormat: TextureParameter.Depth16, format: TextureParameter.Depth16,\n     type: ComponentType.Float, magFilter: TextureParameter.Linear, minFilter: TextureParameter.Linear, wrapS: TextureParameter.ClampToEdge, wrapT: TextureParameter.ClampToEdge});\n\n  frameBuffer.setDepthAttachment(depthTexture);\n\n  return frameBuffer;\n}\n*/\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object.freeze({ createTexturesForRenderTarget }));\n\n\n//# sourceURL=webpack:///./src/foundation/helpers/RenderableHelper.ts?");

/***/ }),

/***/ "./src/foundation/importer/AnimationAssigner.ts":
/*!******************************************************!*\
  !*** ./src/foundation/importer/AnimationAssigner.ts ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AnimationAssigner; });\n/* harmony import */ var _ModelConverter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ModelConverter */ \"./src/foundation/importer/ModelConverter.ts\");\n/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _components_AnimationComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/AnimationComponent */ \"./src/foundation/components/AnimationComponent.ts\");\n/* harmony import */ var _definitions_Animation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/Animation */ \"./src/foundation/definitions/Animation.ts\");\n\n\n\n\nclass AnimationAssigner {\n    constructor() {\n    }\n    assignAnimation(rootEntity, gltfModel, vrmModel, isSameSkeleton = false) {\n        this.__setupAnimationForSameSkeleton(rootEntity, gltfModel, vrmModel, isSameSkeleton);\n        return rootEntity;\n    }\n    /**\n     * The static method to get singleton instance of this class.\n     * @return The singleton instance of ModelConverter class\n     */\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new AnimationAssigner();\n        }\n        return this.__instance;\n    }\n    __getCorrespondingEntity(rootEntity, gltfModel, vrmModel, nodeIndex, isSameSkeleton) {\n        if (isSameSkeleton) {\n            const rnEntities = rootEntity.getTagValue('rnEntitiesByNames');\n            const node = gltfModel.nodes[nodeIndex];\n            let rnEntity = rnEntities.get(node.name);\n            return rnEntity;\n        }\n        else {\n            const humanBones = vrmModel.extensions.VRM.humanoid.humanBones;\n            const srcMapNodeIdName = new Map();\n            for (let bone of humanBones) {\n                srcMapNodeIdName.set(bone.node, bone.bone);\n            }\n            const dstMapNameNodeId = rootEntity.getTagValue('humanoid_map_name_nodeId');\n            const humanoidBoneName = srcMapNodeIdName.get(nodeIndex);\n            const dstBoneNodeId = dstMapNameNodeId.get(humanoidBoneName);\n            if (dstBoneNodeId != null) {\n                const rnEntities = rootEntity.getTagValue('rnEntities');\n                return rnEntities[dstBoneNodeId];\n            }\n            else {\n                return void 0;\n            }\n        }\n    }\n    __isHips(rootEntity, vrmModel, nodeIndex) {\n        const humanBones = vrmModel.extensions.VRM.humanoid.humanBones;\n        const srcMapNodeIdName = new Map();\n        for (let bone of humanBones) {\n            srcMapNodeIdName.set(bone.node, bone.bone);\n        }\n        const dstMapNameNodeId = rootEntity.getTagValue('humanoid_map_name_nodeId');\n        const humanoidBoneName = srcMapNodeIdName.get(nodeIndex);\n        if (humanoidBoneName === 'hips') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    __setupAnimationForSameSkeleton(rootEntity, gltfModel, vrmModel, isSameSkeleton) {\n        if (gltfModel.animations) {\n            const modelConverter = _ModelConverter__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n            for (let animation of gltfModel.animations) {\n                for (let sampler of animation.samplers) {\n                    modelConverter._accessBinaryWithAccessor(sampler.input);\n                    modelConverter._accessBinaryWithAccessor(sampler.output);\n                }\n            }\n        }\n        const entityRepository = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\n        if (gltfModel.animations) {\n            for (let animation of gltfModel.animations) {\n                for (let channel of animation.channels) {\n                    const animInputArray = channel.sampler.input.extras.typedDataArray;\n                    const animOutputArray = channel.sampler.output.extras.typedDataArray;\n                    const interpolation = (channel.sampler.interpolation != null) ? channel.sampler.interpolation : 'LINEAR';\n                    let animationAttributeName = '';\n                    if (channel.target.path === 'translation') {\n                        animationAttributeName = 'translate';\n                    }\n                    else if (channel.target.path === 'rotation') {\n                        animationAttributeName = 'quaternion';\n                    }\n                    else {\n                        animationAttributeName = channel.target.path;\n                    }\n                    const rnEntity = this.__getCorrespondingEntity(rootEntity, gltfModel, vrmModel, channel.target.nodeIndex, isSameSkeleton);\n                    if (rnEntity) {\n                        entityRepository.addComponentsToEntity([_components_AnimationComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]], rnEntity.entityUID);\n                        const animationComponent = rnEntity.getComponent(_components_AnimationComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n                        if (animationComponent) {\n                            if (animationAttributeName === 'quaternion') {\n                                animationComponent.setAnimation(animationAttributeName, animInputArray, animOutputArray, _definitions_Animation__WEBPACK_IMPORTED_MODULE_3__[\"Animation\"].fromString(interpolation));\n                            }\n                            else if (animationAttributeName === 'translate' && this.__isHips(rootEntity, vrmModel, channel.target.nodeIndex)) {\n                                animationComponent.setAnimation(animationAttributeName, animInputArray, animOutputArray, _definitions_Animation__WEBPACK_IMPORTED_MODULE_3__[\"Animation\"].fromString(interpolation));\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/importer/AnimationAssigner.ts?");

/***/ }),

/***/ "./src/foundation/importer/DrcPointCloudImporter.ts":
/*!**********************************************************!*\
  !*** ./src/foundation/importer/DrcPointCloudImporter.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return DrcPointCloudImporter; });\n/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/DataUtil */ \"./src/foundation/misc/DataUtil.ts\");\n/* harmony import */ var _geometry_Primitive__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geometry/Primitive */ \"./src/foundation/geometry/Primitive.ts\");\n/* harmony import */ var _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/MaterialHelper */ \"./src/foundation/helpers/MaterialHelper.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ \"./src/foundation/definitions/PrimitiveMode.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _misc_RnPromise__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../misc/RnPromise */ \"./src/foundation/misc/RnPromise.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\n\n\n\n\n/**\n * The draco Importer class.\n */\nclass DrcPointCloudImporter {\n    constructor() {\n    }\n    /**\n     * Import Draco file of point cloud type.\n     * WEIGHTS_0 and JOINTS_0 attribute and all the mesh type and is not support yet.\n     * @param uri - uri of glTF file\n     * @param options - options for loading process\n     * @returns a glTF2 based JSON pre-processed\n     */\n    importPointCloud(uri, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let defaultOptions = {\n                files: {\n                //        \"foo.gltf\": content of file as ArrayBuffer,\n                //        \"foo.bin\": content of file as ArrayBuffer,\n                //        \"boo.png\": content of file as ArrayBuffer\n                },\n                loaderExtension: null,\n                defaultMaterialHelperName: null,\n                defaultMaterialHelperArgumentArray: [],\n                statesOfElements: [\n                    {\n                        targets: [],\n                        states: {\n                            enable: [\n                            // 3042,  // BLEND\n                            ],\n                            functions: {\n                            //\"blendFuncSeparate\": [1, 0, 1, 0],\n                            }\n                        },\n                        isTransparent: true,\n                        opacity: 1.0,\n                        isTextureImageToLoadPreMultipliedAlpha: false,\n                    }\n                ],\n                tangentCalculationMode: 1,\n                isPrecomputeForRayCastPickingEnable: false,\n                extendedJson: void 0 //   URI string / JSON Object / ArrayBuffer\n            };\n            if (options && options.files) {\n                for (let fileName in options.files) {\n                    const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getExtension(fileName);\n                    if (fileExtension === 'drc') {\n                        return yield this.__decodeDraco(options.files[fileName], defaultOptions, options, void 0).catch((err) => {\n                            console.log('this.__decodeDraco error', err);\n                        });\n                    }\n                }\n            }\n            let response;\n            try {\n                response = yield fetch(uri);\n            }\n            catch (err) {\n                throw new Error('importPointCloud' + err);\n            }\n            ;\n            const arrayBuffer = yield response.arrayBuffer();\n            return yield this.__decodeDraco(arrayBuffer, defaultOptions, options, uri).catch((err) => {\n                console.log('this.__decodeDraco error', err);\n            });\n        });\n    }\n    __loadFromArrayBuffer(arrayBuffer, defaultOptions, options, uri) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const dataView = new DataView(arrayBuffer, 0, 20);\n            const isLittleEndian = true;\n            // Magic field\n            const magic = dataView.getUint32(0, isLittleEndian);\n            let result;\n            // 0x46546C67 is 'glTF' in ASCII codes.\n            if (magic !== 0x46546C67) {\n                //const json = await response.json();\n                const gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(arrayBuffer);\n                const json = JSON.parse(gotText);\n                result = yield this._loadAsTextJson(json, options, defaultOptions, uri).catch((err) => {\n                    console.log('this.__loadAsTextJson error', err);\n                });\n            }\n            else {\n                result = yield this._loadAsBinaryJson(dataView, isLittleEndian, arrayBuffer, options, defaultOptions, uri).catch((err) => {\n                    console.log('this.__loadAsBinaryJson error', err);\n                });\n            }\n            return result;\n        });\n    }\n    _getOptions(defaultOptions, json, options) {\n        if (json.asset && json.asset.extras && json.asset.extras.rnLoaderOptions) {\n            for (let optionName in json.asset.extras.rnLoaderOptions) {\n                defaultOptions[optionName] = json.asset.extras.rnLoaderOptions[optionName];\n            }\n        }\n        for (let optionName in options) {\n            defaultOptions[optionName] = options[optionName];\n        }\n        if (options && options.loaderExtension && typeof options.loaderExtension === \"string\") {\n            if (Rn[options.loaderExtension] != null) {\n                defaultOptions.loaderExtension = Rn[options.loaderExtension].getInstance();\n            }\n            else {\n                console.error(`${options.loaderExtension} not found!`);\n                defaultOptions.loaderExtension = void 0;\n            }\n        }\n        return defaultOptions;\n    }\n    _loadAsBinaryJson(dataView, isLittleEndian, arrayBuffer, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let gltfVer = dataView.getUint32(4, isLittleEndian);\n            if (gltfVer !== 2) {\n                throw new Error('invalid version field in this binary glTF file.');\n            }\n            let lengthOfThisFile = dataView.getUint32(8, isLittleEndian);\n            let lengthOfJSonChunkData = dataView.getUint32(12, isLittleEndian);\n            let chunkType = dataView.getUint32(16, isLittleEndian);\n            // 0x4E4F534A means JSON format (0x4E4F534A is 'JSON' in ASCII codes)\n            if (chunkType !== 0x4E4F534A) {\n                throw new Error('invalid chunkType of chunk0 in this binary glTF file.');\n            }\n            let uint8ArrayJSonContent = new Uint8Array(arrayBuffer, 20, lengthOfJSonChunkData);\n            let gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].uint8ArrayToString(uint8ArrayJSonContent);\n            let gltfJson = JSON.parse(gotText);\n            options = this._getOptions(defaultOptions, gltfJson, options);\n            let uint8array = new Uint8Array(arrayBuffer, 20 + lengthOfJSonChunkData + 8);\n            let basePath = null;\n            if (uri) {\n                //Set the location of glb file as basePath\n                basePath = uri.substring(0, uri.lastIndexOf('/')) + '/';\n            }\n            if (gltfJson.asset.extras === undefined) {\n                gltfJson.asset.extras = { fileType: \"glTF\", version: \"2\" };\n            }\n            this._mergeExtendedJson(gltfJson, options.extendedJson);\n            gltfJson.asset.extras.basePath = basePath;\n            gltfJson.asset.extras.rnLoaderOptions = options;\n            try {\n                yield this._loadInner(uint8array, basePath, gltfJson, options);\n            }\n            catch (err) {\n                console.log(\"this._loadInner error in _loadAsBinaryJson\", err);\n            }\n            return gltfJson;\n        });\n    }\n    _loadAsTextJson(gltfJson, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let basePath;\n            if (uri) {\n                //Set the location of gltf file as basePath\n                basePath = uri.substring(0, uri.lastIndexOf('/')) + '/';\n            }\n            if (gltfJson.asset.extras === undefined) {\n                gltfJson.asset.extras = { fileType: \"glTF\", version: \"2\" };\n            }\n            options = this._getOptions(defaultOptions, gltfJson, options);\n            this._mergeExtendedJson(gltfJson, options.extendedJson);\n            gltfJson.asset.extras.basePath = basePath;\n            gltfJson.asset.extras.rnLoaderOptions = options;\n            try {\n                yield this._loadInner(undefined, basePath, gltfJson, options);\n            }\n            catch (err) {\n                console.log('this._loadInner error in _loadAsTextJson', err);\n            }\n            return gltfJson;\n        });\n    }\n    _loadInner(uint8array, basePath, gltfJson, options) {\n        let promises = [];\n        let resources = {\n            shaders: [],\n            buffers: [],\n            images: []\n        };\n        promises.push(this._loadResources(uint8array, basePath, gltfJson, options, resources));\n        promises.push(new Promise((resolve, reject) => {\n            this._loadJsonContent(gltfJson, options);\n            resolve();\n        }));\n        return Promise.all(promises);\n    }\n    _loadJsonContent(gltfJson, options) {\n        // Scene\n        this._loadDependenciesOfScenes(gltfJson);\n        // Node\n        this._loadDependenciesOfNodes(gltfJson);\n        // Mesh\n        this._loadDependenciesOfMeshes(gltfJson);\n        // Material\n        this._loadDependenciesOfMaterials(gltfJson);\n        // Texture\n        this._loadDependenciesOfTextures(gltfJson);\n        // Joint\n        this._loadDependenciesOfJoints(gltfJson);\n        // Animation\n        this._loadDependenciesOfAnimations(gltfJson);\n        // Accessor\n        this._loadDependenciesOfAccessors(gltfJson);\n        // BufferView\n        this._loadDependenciesOfBufferViews(gltfJson);\n        if (gltfJson.asset === void 0) {\n            gltfJson.asset = {};\n        }\n        if (gltfJson.asset.extras === void 0) {\n            gltfJson.asset.extras = {};\n        }\n    }\n    _loadDependenciesOfScenes(gltfJson) {\n        for (let scene of gltfJson.scenes) {\n            scene.nodesIndices = scene.nodes.concat();\n            for (let i in scene.nodesIndices) {\n                scene.nodes[i] = gltfJson.nodes[scene.nodes[i]];\n            }\n        }\n    }\n    _loadDependenciesOfNodes(gltfJson) {\n        for (let node of gltfJson.nodes) {\n            // Hierarchy\n            if (node.children) {\n                node.childrenIndices = node.children.concat();\n                node.children = [];\n                for (let i in node.childrenIndices) {\n                    node.children[i] = gltfJson.nodes[node.childrenIndices[i]];\n                }\n            }\n            // Mesh\n            if (node.mesh !== void 0 && gltfJson.meshes !== void 0) {\n                node.meshIndex = node.mesh;\n                node.mesh = gltfJson.meshes[node.meshIndex];\n            }\n            // Skin\n            if (node.skin !== void 0 && gltfJson.skins !== void 0) {\n                node.skinIndex = node.skin;\n                node.skin = gltfJson.skins[node.skinIndex];\n                if (node.mesh.extras === void 0) {\n                    node.mesh.extras = {};\n                }\n                node.mesh.extras._skin = node.skin;\n            }\n            // Camera\n            if (node.camera !== void 0 && gltfJson.cameras !== void 0) {\n                node.cameraIndex = node.camera;\n                node.camera = gltfJson.cameras[node.cameraIndex];\n            }\n            // Lights\n            if (node.extensions !== void 0 && gltfJson.extensions !== void 0 && gltfJson.extensions.KHR_lights_punctual !== void 0) {\n                node.extensions.KHR_lights_punctual.lightIndex = node.extensions.KHR_lights_punctual.light;\n                node.extensions.KHR_lights_punctual.light = gltfJson.extensions.KHR_lights_punctual.lights[node.extensions.KHR_lights_punctual.lightIndex];\n            }\n        }\n    }\n    _loadDependenciesOfMeshes(gltfJson) {\n        // Mesh\n        for (let mesh of gltfJson.meshes) {\n            for (let primitive of mesh.primitives) {\n                if (primitive.material !== void 0) {\n                    primitive.materialIndex = primitive.material;\n                    primitive.material = gltfJson.materials[primitive.materialIndex];\n                }\n                primitive.attributesIndex = Object.assign({}, primitive.attributes);\n                for (let attributeName in primitive.attributesIndex) {\n                    if (primitive.attributesIndex[attributeName] >= 0) {\n                        let accessor = gltfJson.accessors[primitive.attributesIndex[attributeName]];\n                        accessor.extras = {\n                            toGetAsTypedArray: true,\n                            attributeName: attributeName\n                        };\n                        primitive.attributes[attributeName] = accessor;\n                    }\n                    else {\n                        primitive.attributes[attributeName] = void 0;\n                    }\n                }\n                if (primitive.indices != null) {\n                    primitive.indicesIndex = primitive.indices;\n                    primitive.indices = gltfJson.accessors[primitive.indicesIndex];\n                }\n                if (primitive.targets != null) {\n                    primitive.targetIndices = primitive.targets;\n                    primitive.targets = [];\n                    for (let target of primitive.targetIndices) {\n                        const attributes = {};\n                        for (let attributeName in target) {\n                            if (target[attributeName] >= 0) {\n                                let accessor = gltfJson.accessors[target[attributeName]];\n                                accessor.extras = {\n                                    toGetAsTypedArray: true,\n                                    attributeName: attributeName\n                                };\n                                attributes[attributeName] = accessor;\n                            }\n                            else {\n                                attributes[attributeName] = void 0;\n                            }\n                        }\n                        primitive.targets.push(attributes);\n                    }\n                }\n            }\n        }\n    }\n    _checkRnGltfLoaderOptionsExist(gltfModel) {\n        if (gltfModel.asset.extras && gltfModel.asset.extras.rnLoaderOptions) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    _loadDependenciesOfMaterials(gltfJson) {\n        if (!gltfJson.textures)\n            gltfJson.textures = [];\n        // Material\n        if (gltfJson.materials) {\n            for (let material of gltfJson.materials) {\n                if (material.pbrMetallicRoughness) {\n                    let baseColorTexture = material.pbrMetallicRoughness.baseColorTexture;\n                    if (baseColorTexture !== void 0) {\n                        baseColorTexture.texture = gltfJson.textures[baseColorTexture.index];\n                    }\n                    let metallicRoughnessTexture = material.pbrMetallicRoughness.metallicRoughnessTexture;\n                    if (metallicRoughnessTexture !== void 0) {\n                        metallicRoughnessTexture.texture = gltfJson.textures[metallicRoughnessTexture.index];\n                    }\n                }\n                let normalTexture = material.normalTexture;\n                if (normalTexture !== void 0) {\n                    normalTexture.texture = gltfJson.textures[normalTexture.index];\n                }\n                const occlusionTexture = material.occlusionTexture;\n                if (occlusionTexture !== void 0) {\n                    occlusionTexture.texture = gltfJson.textures[occlusionTexture.index];\n                }\n                const emissiveTexture = material.emissiveTexture;\n                if (emissiveTexture !== void 0) {\n                    emissiveTexture.texture = gltfJson.textures[emissiveTexture.index];\n                }\n                if (material.extensions && material.extensions.ZOZO_materials_pbrMultiLayer) {\n                    const zMaterial = material.extensions.ZOZO_materials_pbrMultiLayer;\n                    let diffuseTexture = zMaterial.diffuseTexture;\n                    if (diffuseTexture !== void 0) {\n                        diffuseTexture.texture = gltfJson.textures[diffuseTexture.index];\n                    }\n                    let specularGlossinessTexture = zMaterial.specularGlossinessTexture;\n                    if (specularGlossinessTexture !== void 0) {\n                        specularGlossinessTexture.texture = gltfJson.textures[specularGlossinessTexture.index];\n                    }\n                }\n                if (this._checkRnGltfLoaderOptionsExist(gltfJson) &&\n                    gltfJson.asset.extras.rnLoaderOptions.loaderExtension &&\n                    gltfJson.asset.extras.rnLoaderOptions.loaderExtension.setTextures) {\n                    gltfJson.asset.extras.rnLoaderOptions.loaderExtension.setTextures(gltfJson, material);\n                }\n            }\n        }\n    }\n    _loadDependenciesOfTextures(gltfJson) {\n        // Texture\n        if (gltfJson.textures) {\n            for (let texture of gltfJson.textures) {\n                if (texture.sampler !== void 0) {\n                    texture.samplerIndex = texture.sampler;\n                    texture.sampler = gltfJson.samplers[texture.samplerIndex];\n                }\n                if (texture.source !== void 0) {\n                    texture.sourceIndex = texture.source;\n                    texture.image = gltfJson.images[texture.sourceIndex];\n                }\n            }\n        }\n    }\n    _loadDependenciesOfJoints(gltfJson) {\n        if (gltfJson.skins) {\n            for (let skin of gltfJson.skins) {\n                skin.skeletonIndex = skin.skeleton;\n                skin.skeleton = gltfJson.nodes[skin.skeletonIndex];\n                skin.inverseBindMatricesIndex = skin.inverseBindMatrices;\n                skin.inverseBindMatrices = gltfJson.accessors[skin.inverseBindMatricesIndex];\n                if (skin.skeleton == null) {\n                    skin.skeletonIndex = skin.joints[0];\n                    skin.skeleton = gltfJson.nodes[skin.skeletonIndex];\n                }\n                skin.jointsIndices = skin.joints;\n                skin.joints = [];\n                for (let jointIndex of skin.jointsIndices) {\n                    skin.joints.push(gltfJson.nodes[jointIndex]);\n                }\n            }\n        }\n    }\n    _loadDependenciesOfAnimations(gltfJson) {\n        if (gltfJson.animations) {\n            for (let animation of gltfJson.animations) {\n                for (let channel of animation.channels) {\n                    channel.samplerIndex = channel.sampler;\n                    channel.sampler = animation.samplers[channel.samplerIndex];\n                    channel.target.nodeIndex = channel.target.node;\n                    channel.target.node = gltfJson.nodes[channel.target.nodeIndex];\n                }\n                for (let channel of animation.channels) {\n                    channel.sampler.inputIndex = channel.sampler.input;\n                    channel.sampler.outputIndex = channel.sampler.output;\n                    channel.sampler.input = gltfJson.accessors[channel.sampler.inputIndex];\n                    channel.sampler.output = gltfJson.accessors[channel.sampler.outputIndex];\n                    if (channel.sampler.output.extras === void 0) {\n                        channel.sampler.output.extras = {};\n                    }\n                    if (channel.target.path === 'rotation') {\n                        channel.sampler.output.extras.quaternionIfVec4 = true;\n                    }\n                    if (channel.target.path === 'weights') {\n                        const weightCount = channel.sampler.output.count / channel.sampler.input.count;\n                        channel.sampler.output.extras.weightCount = weightCount;\n                    }\n                }\n            }\n        }\n    }\n    _loadDependenciesOfAccessors(gltfJson) {\n        // Accessor\n        for (let accessor of gltfJson.accessors) {\n            if (accessor.bufferView == null) {\n                accessor.bufferView = 0;\n            }\n            accessor.bufferViewIndex = accessor.bufferView;\n            accessor.bufferView = gltfJson.bufferViews[accessor.bufferViewIndex];\n        }\n    }\n    _loadDependenciesOfBufferViews(gltfJson) {\n        // BufferView\n        for (let bufferView of gltfJson.bufferViews) {\n            if (bufferView.buffer !== void 0) {\n                bufferView.bufferIndex = bufferView.buffer;\n                bufferView.buffer = gltfJson.buffers[bufferView.bufferIndex];\n            }\n        }\n    }\n    _mergeExtendedJson(gltfJson, extendedData) {\n        let extendedJson = null;\n        if (extendedData instanceof ArrayBuffer) {\n            const extendedJsonStr = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(extendedData);\n            extendedJson = JSON.parse(extendedJsonStr);\n        }\n        else if (typeof extendedData === 'string') {\n            extendedJson = JSON.parse(extendedData);\n            extendedJson = extendedJson;\n        }\n        else if (typeof extendedData === 'object') {\n            extendedJson = extendedData;\n        }\n        else {\n        }\n        Object.assign(gltfJson, extendedJson);\n    }\n    _loadResources(uint8Array, basePath, gltfJson, options, resources) {\n        let promisesToLoadResources = [];\n        // Shaders Async load\n        // for (let _i in gltfJson.shaders) {\n        //   const i = _i as any as number;\n        //   resources.shaders[i] = {};\n        //   let shaderJson = gltfJson.shaders[i];\n        //   let shaderType = shaderJson.type;\n        //   if (typeof shaderJson.extensions !== 'undefined' && typeof shaderJson.extensions.KHR_binary_glTF !== 'undefined') {\n        //     resources.shaders[i].shaderText = this._accessBinaryAsShader(shaderJson.extensions.KHR_binary_glTF.bufferView, gltfJson, arrayBufferBinary);\n        //     resources.shaders[i].shaderType = shaderType;\n        //     continue;\n        //   }\n        //   let shaderUri = shaderJson.uri;\n        //   if (options.files) {\n        //     const splitted = shaderUri.split('/');\n        //     const filename = splitted[splitted.length - 1];\n        //     if (options.files[filename]) {\n        //       const arrayBuffer = options.files[filename];\n        //       resources.shaders[i].shaderText = DataUtil.arrayBufferToString(arrayBuffer);\n        //       resources.shaders[i].shaderType = shaderType;\n        //       continue;\n        //     }\n        //   }\n        //   if (shaderUri.match(/^data:/)) {\n        //     promisesToLoadResources.push(\n        //       new Promise((resolve, rejected) => {\n        //         let arrayBuffer = DataUtil.dataUriToArrayBuffer(shaderUri);\n        //         resources.shaders[i].shaderText = DataUtil.arrayBufferToString(arrayBuffer);\n        //         resources.shaders[i].shaderType = shaderType;\n        //         resolve();\n        //       })\n        //     );\n        //   } else {\n        //     shaderUri = basePath + shaderUri;\n        //     promisesToLoadResources.push(\n        //       DataUtil.loadResourceAsync(shaderUri, false,\n        //         (resolve:Function, response:any)=>{\n        //           resources.shaders[i].shaderText = response;\n        //           resources.shaders[i].shaderType = shaderType;\n        //           resolve(gltfJson);\n        //         },\n        //         (reject:Function, error:any)=>{\n        //         }\n        //       )\n        //     );\n        //   }\n        // }\n        // Buffers Async load\n        let rnpArrayBuffer;\n        for (let i in gltfJson.buffers) {\n            let bufferInfo = gltfJson.buffers[i];\n            let splitted;\n            let filename;\n            if (bufferInfo.uri) {\n                splitted = bufferInfo.uri.split('/');\n                filename = splitted[splitted.length - 1];\n            }\n            if (typeof bufferInfo.uri === 'undefined') {\n                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_6__[\"default\"]((resolve, rejected) => {\n                    resources.buffers[i] = uint8Array;\n                    bufferInfo.buffer = uint8Array;\n                    resolve(uint8Array);\n                });\n            }\n            else if (bufferInfo.uri.match(/^data:application\\/(.*);base64,/)) {\n                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_6__[\"default\"]((resolve, rejected) => {\n                    let arrayBuffer = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dataUriToArrayBuffer(bufferInfo.uri);\n                    resources.buffers[i] = new Uint8Array(arrayBuffer);\n                    bufferInfo.buffer = new Uint8Array(arrayBuffer);\n                    resolve(arrayBuffer);\n                });\n            }\n            else if (options.files && options.files[filename]) {\n                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_6__[\"default\"]((resolve, rejected) => {\n                    const arrayBuffer = options.files[filename];\n                    resources.buffers[i] = new Uint8Array(arrayBuffer);\n                    bufferInfo.buffer = new Uint8Array(arrayBuffer);\n                    resolve(arrayBuffer);\n                });\n            }\n            else {\n                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_6__[\"default\"](_misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].loadResourceAsync(basePath + bufferInfo.uri, true, (resolve, response) => {\n                    resources.buffers[i] = new Uint8Array(response);\n                    bufferInfo.buffer = new Uint8Array(response);\n                    resolve(response);\n                }, (reject, error) => {\n                }));\n            }\n            bufferInfo.bufferPromise = rnpArrayBuffer;\n            promisesToLoadResources.push(rnpArrayBuffer);\n        }\n        // Textures Async load\n        for (let _i in gltfJson.images) {\n            const i = _i;\n            let imageJson = gltfJson.images[i];\n            //let imageJson = gltfJson.images[textureJson.source];\n            //let samplerJson = gltfJson.samplers[textureJson.sampler];\n            let imageUri;\n            if (typeof imageJson.uri === 'undefined') {\n                let arrayBuffer = uint8Array;\n                if (uint8Array == null) {\n                    const bufferView = gltfJson.bufferViews[imageJson.bufferView];\n                    arrayBuffer = bufferView.buffer.buffer;\n                }\n                const imageUint8Array = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createUint8ArrayFromBufferViewInfo(gltfJson, imageJson.bufferView, uint8Array);\n                imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createBlobImageUriFromUint8Array(imageUint8Array, imageJson.mimeType);\n            }\n            else {\n                let imageFileStr = imageJson.uri;\n                const splitted = imageFileStr.split('/');\n                const filename = splitted[splitted.length - 1];\n                if (options.files && options.files[filename]) {\n                    const arrayBuffer = options.files[filename];\n                    imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createBlobImageUriFromUint8Array(new Uint8Array(arrayBuffer), imageJson.mimeType);\n                }\n                else if (imageFileStr.match(/^data:/)) {\n                    imageUri = imageFileStr;\n                }\n                else {\n                    imageUri = basePath + imageFileStr;\n                }\n            }\n            // if (options.extensionLoader && options.extensionLoader.setUVTransformToTexture) {\n            //   options.extensionLoader.setUVTransformToTexture(texture, samplerJson);\n            //\n            const promise = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createImageFromUri(imageUri, imageJson.mimeType).then(function (image) {\n                image.crossOrigin = 'Anonymous';\n                resources.images[i] = image;\n                imageJson.image = image;\n            });\n            promisesToLoadResources.push(promise);\n        }\n        if (options.defaultTextures) {\n            const basePath = options.defaultTextures.basePath;\n            const textureInfos = options.defaultTextures.textureInfos;\n            for (let textureInfo of textureInfos) {\n                const fileName = textureInfo.fileName;\n                const uri = basePath + fileName;\n                const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getExtension(fileName);\n                const mimeType = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getMimeTypeFromExtension(fileExtension);\n                const promise = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createImageFromUri(uri, mimeType).then(function (image) {\n                    image.crossOrigin = 'Anonymous';\n                    textureInfo.image = { image: image };\n                });\n                promisesToLoadResources.push(promise);\n            }\n        }\n        return Promise.all(promisesToLoadResources).catch((err) => {\n            console.log('Promise.all error', err);\n        });\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new DrcPointCloudImporter();\n        }\n        return this.__instance;\n    }\n    __decodeDraco(arrayBuffer, defaultOptions, options, uri) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let gotText;\n            let gltfJson;\n            yield this.__decodeBuffer(arrayBuffer).then((json) => __awaiter(this, void 0, void 0, function* () {\n                gotText = JSON.stringify(json);\n                gltfJson = JSON.parse(gotText);\n            }));\n            return yield this._loadAsTextJson(gltfJson, options, defaultOptions, uri).catch((err) => {\n                console.log('this.__loadAsTextJson error', err);\n            });\n        });\n    }\n    __decodeBuffer(arrayBuffer) {\n        const draco = new DracoDecoderModule();\n        const decoder = new draco.Decoder();\n        const dracoGeometry = this.__getGeometryFromDracoBuffer(draco, decoder, arrayBuffer);\n        if (dracoGeometry == null) {\n            throw new Error('invalid dracoGeometry.');\n        }\n        if (dracoGeometry.geometryType !== draco.POINT_CLOUD) {\n            throw new Error('invalid geometryType of drc file.');\n        }\n        const posAttId = decoder.GetAttributeId(dracoGeometry, draco.POSITION);\n        if (posAttId === -1) {\n            draco.destroy(decoder);\n            draco.destroy(dracoGeometry);\n            throw new Error('Draco: No position attribute found.');\n        }\n        const geometryAttributes = ['POSITION', 'NORMAL', 'COLOR', 'TEX_COORD', 'GENERIC'];\n        const numPoints = dracoGeometry.num_points();\n        const attributeDataAll = [];\n        const attributeComponents = [];\n        let bufferLength = 0;\n        for (let i = 0; i < geometryAttributes.length; i++) {\n            const attId = decoder.GetAttributeId(dracoGeometry, draco[geometryAttributes[i]]);\n            if (attId === -1) {\n                geometryAttributes.splice(i, 1);\n                i--;\n                continue;\n            }\n            const attribute = decoder.GetAttribute(dracoGeometry, attId);\n            const attributeData = new draco.DracoFloat32Array();\n            decoder.GetAttributeFloatForAllPoints(dracoGeometry, attribute, attributeData);\n            attributeDataAll[i] = attributeData;\n            let numComponent = attribute.num_components();\n            attributeComponents[i] = numComponent;\n            if (geometryAttributes[i] === 'COLOR') {\n                bufferLength += numPoints * 4;\n            }\n            else {\n                bufferLength += numPoints * numComponent;\n            }\n        }\n        const buffer = new Float32Array(bufferLength);\n        for (let i = 0, currentBufferindex = 0; i < geometryAttributes.length; i++) {\n            if (geometryAttributes[i] === 'COLOR' && attributeComponents[i] === 3) {\n                for (var j = 0; j < numPoints; currentBufferindex += 4, j += 3) {\n                    buffer[currentBufferindex] = attributeDataAll[i].GetValue(j);\n                    buffer[currentBufferindex + 1] = attributeDataAll[i].GetValue(j + 1);\n                    buffer[currentBufferindex + 2] = attributeDataAll[i].GetValue(j + 2);\n                    buffer[currentBufferindex + 3] = 1.0; // alpha value\n                }\n            }\n            else if (geometryAttributes[i] === 'TEX_COORD') {\n                for (var j = 0; j < numPoints; currentBufferindex += 2, j++) {\n                    buffer[currentBufferindex] = attributeDataAll[i].GetValue(2 * j);\n                    buffer[currentBufferindex + 1] = 1.0 - attributeDataAll[i].GetValue(2 * j + 1);\n                }\n            }\n            else {\n                for (var j = 0; j < numPoints * attributeComponents[i]; currentBufferindex++, j++) {\n                    buffer[currentBufferindex] = attributeDataAll[i].GetValue(j);\n                }\n            }\n            draco.destroy(attributeDataAll[i]);\n        }\n        draco.destroy(decoder);\n        draco.destroy(dracoGeometry);\n        return this.__decodedBufferToJSON(buffer, numPoints, geometryAttributes, attributeComponents);\n    }\n    __decodedBufferToJSON(buffer, numPoints, geometryAttributes, attributeComponents) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let json = {\n                \"asset\": {\n                    version: \"2.0\"\n                },\n                \"nodes\": [\n                    {\n                        \"name\": \"Node\",\n                        \"mesh\": 0\n                    }\n                ],\n                \"scenes\": [\n                    {\n                        \"nodes\": [\n                            0\n                        ]\n                    }\n                ]\n            };\n            const mimeType = 'application/octet-stream';\n            yield this.__convertBufferToURI(buffer.buffer, mimeType).then((uri) => {\n                json[\"buffers\"] = [\n                    {\n                        \"name\": \"input\",\n                        \"byteLength\": buffer.byteLength,\n                        \"uri\": uri\n                    }\n                ];\n            }).catch((err) => {\n                console.log('this.__convertBufferToURI error:', err);\n            });\n            const accessors = [];\n            const bufferViews = [];\n            let byteOffsetOfBufferView = 0;\n            for (let i = 0, currentIndexOfBufferView = 0; i < geometryAttributes.length; currentIndexOfBufferView++) {\n                const currentComponent = attributeComponents[i];\n                const type = \"VEC\" + currentComponent;\n                let byteOffsetOfAccessor = 0;\n                while (i < geometryAttributes.length && currentComponent === attributeComponents[i]) {\n                    accessors.push({\n                        \"name\": \"point-cloud_\" + geometryAttributes[i].toLowerCase() + \"s\",\n                        \"componentType\": 5126,\n                        \"count\": numPoints,\n                        \"type\": type,\n                        \"bufferView\": currentIndexOfBufferView,\n                        \"byteOffset\": byteOffsetOfAccessor\n                    });\n                    if (geometryAttributes[i] === 'COLOR') {\n                        byteOffsetOfAccessor += numPoints * 4 * 4;\n                    }\n                    else {\n                        byteOffsetOfAccessor += numPoints * attributeComponents[i] * 4;\n                    }\n                    i++;\n                }\n                bufferViews[currentIndexOfBufferView] = {\n                    \"name\": \"bufferView_\" + currentIndexOfBufferView,\n                    \"buffer\": 0,\n                    \"byteLength\": byteOffsetOfAccessor,\n                    \"byteOffset\": byteOffsetOfBufferView,\n                    \"byteStride\": currentComponent * 4,\n                    \"target\": 34962 // gl.ARRAY_BUFFER\n                };\n                byteOffsetOfBufferView += byteOffsetOfAccessor;\n            }\n            json[\"accessors\"] = accessors;\n            json[\"bufferViews\"] = bufferViews;\n            const mesh = {\n                \"name\": \"Node-Mesh\",\n                \"primitives\": [\n                    {\n                        \"mode\": 0\n                    }\n                ]\n            };\n            const attributes = {};\n            for (let i = 0; i < geometryAttributes.length; i++) {\n                if (geometryAttributes[i] === 'TEX_COORD') {\n                    attributes['TEXCOORD_0'] = i;\n                }\n                else if (geometryAttributes[i] === 'GENERIC') {\n                    attributes['TANGENT'] = i;\n                }\n                else {\n                    attributes[geometryAttributes[i]] = i;\n                }\n            }\n            mesh.primitives[0].attributes = attributes;\n            json[\"meshes\"] = [mesh];\n            return new Promise((resolve, reject) => {\n                resolve(json);\n            });\n        });\n    }\n    __convertBufferToURI(arrayBuffer, mimeType) {\n        return new Promise((resolve, reject) => {\n            var blob = new Blob([arrayBuffer], { type: mimeType });\n            var fr = new FileReader();\n            fr.onload = (event) => {\n                resolve(fr.result);\n            };\n            fr.onerror = (event) => {\n                reject(fr.error);\n            };\n            fr.readAsDataURL(blob);\n        });\n    }\n    /**\n     * Import Draco file of point cloud type.\n     * WEIGHTS_0 and JOINTS_0 attribute and all the mesh type and is not support yet.\n     * @param uri - uri of glTF file\n     * @param options - options for loading process\n     * @returns a primitive of Rhodonite object\n     */\n    importPointCloudToPrimitive(uri, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const defaultOptions = {\n                files: {},\n                loaderExtension: null,\n                defaultMaterialHelperName: null,\n                defaultMaterialHelperArgumentArray: [],\n                statesOfElements: [\n                    {\n                        targets: [],\n                        states: {\n                            enable: [],\n                            functions: {}\n                        },\n                        isTransparent: true,\n                        opacity: 1.0,\n                        isTextureImageToLoadPreMultipliedAlpha: false,\n                    }\n                ],\n                extendedJson: void 0\n            };\n            if (options && options.files) {\n                for (let fileName in options.files) {\n                    const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getExtension(fileName);\n                    if (fileExtension === 'gltf' || fileExtension === 'glb') {\n                        return yield this.__loadFromArrayBuffer(options.files[fileName], defaultOptions, options, void 0).catch((err) => {\n                            console.log('this.__loadFromArrayBuffer error', err);\n                        });\n                    }\n                }\n            }\n            let response;\n            try {\n                response = yield fetch(uri);\n            }\n            catch (err) {\n                console.log('this.__loadFromArrayBuffer', err);\n            }\n            ;\n            const arrayBuffer = yield response.arrayBuffer();\n            return this.__decodeDracoDirect(arrayBuffer, options);\n        });\n    }\n    // tangent is not available\n    __decodeDracoDirect(arrayBuffer, options) {\n        const draco = new DracoDecoderModule();\n        const decoder = new draco.Decoder();\n        const dracoGeometry = this.__getGeometryFromDracoBuffer(draco, decoder, arrayBuffer);\n        if (dracoGeometry == null) {\n            throw new Error('invalid dracoGeometry.');\n        }\n        if (dracoGeometry.geometryType !== draco.POINT_CLOUD) {\n            throw new Error('invalid geometryType of drc file.');\n        }\n        const attributeCompositionTypes = [];\n        const attributeSemantics = [];\n        const attributes = [];\n        this.__getPositions(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes);\n        this.__getColors(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes);\n        this.__getNormals(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes);\n        this.__getTextureCoords(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes);\n        const primitive = _geometry_Primitive__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createPrimitive({\n            attributeCompositionTypes: attributeCompositionTypes,\n            attributeSemantics: attributeSemantics,\n            attributes: attributes,\n            material: _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createClassicUberMaterial({ isSkinning: false, isLighting: true }),\n            primitiveMode: _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_4__[\"PrimitiveMode\"].Points\n        });\n        draco.destroy(decoder);\n        draco.destroy(dracoGeometry);\n        return new Promise((resolve, reject) => {\n            resolve(primitive);\n        });\n    }\n    __getGeometryFromDracoBuffer(draco, decoder, arrayBuffer) {\n        const buffer = new draco.DecoderBuffer();\n        buffer.Init(new Int8Array(arrayBuffer), arrayBuffer.byteLength);\n        const geometryType = decoder.GetEncodedGeometryType(buffer);\n        let dracoGeometry;\n        let decodingStatus;\n        if (geometryType === draco.TRIANGULAR_MESH) {\n            dracoGeometry = new draco.Mesh();\n            decodingStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);\n        }\n        else if (geometryType === draco.POINT_CLOUD) {\n            dracoGeometry = new draco.PointCloud();\n            decodingStatus = decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n        }\n        else {\n            const errorMsg = 'Unknown geometry type.';\n            console.error(errorMsg);\n        }\n        dracoGeometry.geometryType = geometryType; // store\n        if (!decodingStatus.ok() || dracoGeometry.ptr == 0) {\n            let errorMsg = 'Decoding failed: ';\n            errorMsg += decodingStatus.error_msg();\n            console.error(errorMsg);\n            draco.destroy(decoder);\n            draco.destroy(dracoGeometry);\n            return void 0;\n        }\n        draco.destroy(buffer);\n        return dracoGeometry;\n    }\n    __getPositions(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes) {\n        const posAttId = decoder.GetAttributeId(dracoGeometry, draco.POSITION);\n        if (posAttId === -1) {\n            draco.destroy(decoder);\n            draco.destroy(dracoGeometry);\n            throw new Error('Draco: No position attribute found.');\n        }\n        const posAttribute = decoder.GetAttribute(dracoGeometry, posAttId);\n        const posAttributeData = new draco.DracoFloat32Array();\n        decoder.GetAttributeFloatForAllPoints(dracoGeometry, posAttribute, posAttributeData);\n        const numPoints = dracoGeometry.num_points();\n        const numVertces = numPoints * 3;\n        const positions = new Float32Array(numVertces);\n        for (var i = 0; i < numVertces; i += 1) {\n            positions[i] = posAttributeData.GetValue(i); // XYZ XYZ\n        }\n        attributeCompositionTypes.push(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3);\n        attributeSemantics.push(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_5__[\"VertexAttribute\"].Position);\n        attributes.push(positions);\n        draco.destroy(posAttributeData);\n        return positions;\n    }\n    __getColors(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes) {\n        // Get color attributes if exists.\n        const colorAttId = decoder.GetAttributeId(dracoGeometry, draco.COLOR);\n        if (colorAttId === -1) {\n            return null;\n        }\n        else {\n            //console.log('Loaded color attribute.');\n            const colAttribute = decoder.GetAttribute(dracoGeometry, colorAttId);\n            const colAttributeData = new draco.DracoFloat32Array();\n            decoder.GetAttributeFloatForAllPoints(dracoGeometry, colAttribute, colAttributeData);\n            const numPoints = dracoGeometry.num_points();\n            const numComponents = colAttribute.num_components();\n            const numVertces = numPoints * 4;\n            const colors = new Float32Array(numVertces);\n            for (let i = 0; i < numVertces; i += numComponents) {\n                colors[i] = colAttributeData.GetValue(i);\n                colors[i + 1] = colAttributeData.GetValue(i + 1);\n                colors[i + 2] = colAttributeData.GetValue(i + 2);\n                if (numComponents == 4) {\n                    colors[i + 3] = colAttributeData.GetValue(i + 3);\n                }\n                else {\n                    colors[i + 3] = 1.0;\n                }\n            }\n            attributeCompositionTypes.push(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3);\n            attributeSemantics.push(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_5__[\"VertexAttribute\"].Color0);\n            attributes.push(colors);\n            draco.destroy(colAttributeData);\n            return colors;\n        }\n    }\n    __getNormals(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes) {\n        // Get normal attributes if exists.\n        const normalAttId = decoder.GetAttributeId(dracoGeometry, draco.NORMAL);\n        if (normalAttId === -1) {\n            return null;\n        }\n        else {\n            //console.log('Loaded normal attribute.');\n            const norAttribute = decoder.GetAttribute(dracoGeometry, normalAttId);\n            const norAttributeData = new draco.DracoFloat32Array();\n            decoder.GetAttributeFloatForAllPoints(dracoGeometry, norAttribute, norAttributeData);\n            const numPoints = dracoGeometry.num_points();\n            const numVertces = numPoints * 3;\n            const normals = new Float32Array(numVertces);\n            for (var i = 0; i < numVertces; i += 1) {\n                normals[i] = norAttributeData.GetValue(i); // XYZ XYZ\n            }\n            attributeCompositionTypes.push(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3);\n            attributeSemantics.push(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_5__[\"VertexAttribute\"].Normal);\n            attributes.push(normals);\n            draco.destroy(norAttributeData);\n            return normals;\n        }\n    }\n    __getTextureCoords(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes) {\n        // Get texture coordinate attributes if exists.\n        const texCoordAttId = decoder.GetAttributeId(dracoGeometry, draco.TEX_COORD);\n        if (texCoordAttId === -1) {\n            return null;\n        }\n        else {\n            const texCoordAttribute = decoder.GetAttribute(dracoGeometry, texCoordAttId);\n            const texCoordAttributeData = new draco.DracoFloat32Array();\n            decoder.GetAttributeFloatForAllPoints(dracoGeometry, texCoordAttribute, texCoordAttributeData);\n            const numPoints = dracoGeometry.num_points();\n            const numVertces = numPoints * 2;\n            const texCoords = new Float32Array(numVertces);\n            for (var i = 0; i < numVertces; i += 1) {\n                texCoords[i] = texCoordAttributeData.GetValue(i); // XYZ XYZ\n            }\n            attributeCompositionTypes.push(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec2);\n            attributeSemantics.push(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_5__[\"VertexAttribute\"].Texcoord0);\n            attributes.push(texCoords);\n            draco.destroy(texCoordAttributeData);\n            return texCoords;\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/importer/DrcPointCloudImporter.ts?");

/***/ }),

/***/ "./src/foundation/importer/FormatDetector.ts":
/*!***************************************************!*\
  !*** ./src/foundation/importer/FormatDetector.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return detectFormat; });\n/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/DataUtil */ \"./src/foundation/misc/DataUtil.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\nfunction detectFormat(uri, files) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (files) {\n            for (let fileName in files) {\n                const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getExtension(fileName);\n                if (fileExtension === 'gltf' || fileExtension === 'glb') {\n                    return new Promise((resolve, reject) => {\n                        checkArrayBufferOfGltf(files[fileName], resolve);\n                    });\n                }\n                else if (fileExtension === 'drc') {\n                    return new Promise((resolve, reject) => {\n                        resolve('Draco');\n                    });\n                }\n                else if (fileExtension === 'vrm') {\n                    return new Promise((resolve, reject) => {\n                        resolve('VRM');\n                    });\n                }\n            }\n        }\n        const splitted = uri.split('.');\n        const fileExtension = splitted[splitted.length - 1];\n        if (fileExtension === 'efk') {\n            return new Promise((resolve, reject) => {\n                resolve('Effekseer');\n            });\n        }\n        else if (fileExtension === 'drc') {\n            return new Promise((resolve, reject) => {\n                resolve('Draco');\n            });\n        }\n        else if (fileExtension === 'vrm') {\n            return new Promise((resolve, reject) => {\n                resolve('VRM');\n            });\n        }\n        // glTF\n        return _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].loadResourceAsync(uri, true, (resolve, response) => {\n            const arrayBuffer = response;\n            checkArrayBufferOfGltf(arrayBuffer, resolve);\n        }, (rejects, status) => {\n            console.log(status);\n        });\n    });\n}\nfunction checkArrayBufferOfGltf(arrayBuffer, resolve) {\n    const isLittleEndian = true;\n    const dataView = new DataView(arrayBuffer, 0, 20);\n    // Magic field\n    const magic = dataView.getUint32(0, isLittleEndian);\n    // 0x46546C67 is 'glTF' in ASCII codes.\n    if (magic !== 0x46546C67) {\n        // It must be normal glTF (NOT binary) file...\n        let gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(arrayBuffer);\n        let gltfJson = JSON.parse(gotText);\n        let glTFVer = checkGLTFVersion(gltfJson);\n        resolve(\"glTF\" + glTFVer);\n        return;\n    }\n    let glTFVer = dataView.getUint32(4, isLittleEndian);\n    resolve(\"glTF\" + glTFVer);\n}\nfunction checkGLTFVersion(gltfJson) {\n    let glTFVer = 1.0;\n    if (gltfJson.asset && gltfJson.asset.version) {\n        glTFVer = parseFloat(gltfJson.asset.version);\n    }\n    return glTFVer;\n}\n\n\n//# sourceURL=webpack:///./src/foundation/importer/FormatDetector.ts?");

/***/ }),

/***/ "./src/foundation/importer/Gltf1Importer.ts":
/*!**************************************************!*\
  !*** ./src/foundation/importer/Gltf1Importer.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Gltf1Importer; });\n/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/DataUtil */ \"./src/foundation/misc/DataUtil.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\nclass Gltf1Importer {\n    constructor() {\n    }\n    /**\n     * the method to load glTF1 file.\n     * @param uri - uri of glTF file\n     * @param options - options for loading process\n     * @returns a glTF2 based JSON pre-processed\n     */\n    import(uri, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let defaultOptions = {\n                files: {\n                //        \"foo.gltf\": content of file as ArrayBuffer,\n                //        \"foo.bin\": content of file as ArrayBuffer,\n                //        \"boo.png\": content of file as ArrayBuffer\n                },\n                loaderExtension: null,\n                defaultMaterialHelperName: null,\n                defaultMaterialHelperArgumentArray: [],\n                statesOfElements: [\n                    {\n                        targets: [],\n                        states: {\n                            enable: [\n                            // 3042,  // BLEND\n                            ],\n                            functions: {\n                            //\"blendFuncSeparate\": [1, 0, 1, 0],\n                            }\n                        },\n                        isTransparent: true,\n                        opacity: 1.0,\n                        isTextureImageToLoadPreMultipliedAlpha: false,\n                    }\n                ],\n                extendedJson: void 0 //   URI string / JSON Object / ArrayBuffer\n            };\n            if (options && options.files) {\n                for (let fileName in options.files) {\n                    const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getExtension(fileName);\n                    if (fileExtension === 'gltf' || fileExtension === 'glb') {\n                        return yield this.__loadFromArrayBuffer(options.files[fileName], defaultOptions, options, void 0);\n                    }\n                }\n            }\n            const response = yield fetch(uri);\n            const arrayBuffer = yield response.arrayBuffer();\n            return yield this.__loadFromArrayBuffer(arrayBuffer, defaultOptions, options, uri);\n        });\n    }\n    __loadFromArrayBuffer(arrayBuffer, defaultOptions, options, uri) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const dataView = new DataView(arrayBuffer, 0, 20);\n            const isLittleEndian = true;\n            // Magic field\n            const magic = dataView.getUint32(0, isLittleEndian);\n            let result;\n            // 0x46546C67 is 'glTF' in ASCII codes.\n            if (magic !== 0x46546C67) {\n                //const json = await response.json();\n                const gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(arrayBuffer);\n                const json = JSON.parse(gotText);\n                result = yield this._loadAsTextJson(json, options, defaultOptions, uri);\n            }\n            else {\n                result = yield this._loadAsBinaryJson(dataView, isLittleEndian, arrayBuffer, options, defaultOptions, uri);\n            }\n            return result;\n        });\n    }\n    _getOptions(defaultOptions, json, options) {\n        if (json.asset && json.asset.extras && json.asset.extras.rnLoaderOptions) {\n            for (let optionName in json.asset.extras.rnLoaderOptions) {\n                defaultOptions[optionName] = json.asset.extras.rnLoaderOptions[optionName];\n            }\n        }\n        for (let optionName in options) {\n            defaultOptions[optionName] = options[optionName];\n        }\n        if (options && options.loaderExtension && typeof options.loaderExtension === \"string\") {\n            if (Rn[options.loaderExtension] != null) {\n                defaultOptions.loaderExtension = Rn[options.loaderExtension].getInstance();\n            }\n            else {\n                console.error(`${options.loaderExtension} not found!`);\n                defaultOptions.loaderExtension = void 0;\n            }\n        }\n        return defaultOptions;\n    }\n    _loadAsBinaryJson(dataView, isLittleEndian, arrayBuffer, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let gltfVer = dataView.getUint32(4, isLittleEndian);\n            if (gltfVer !== 1) {\n                throw new Error('invalid version field in this binary glTF file.');\n            }\n            let lengthOfThisFile = dataView.getUint32(8, isLittleEndian);\n            let lengthOfJSonChunkData = dataView.getUint32(12, isLittleEndian);\n            let chunkType = dataView.getUint32(16, isLittleEndian);\n            // 0 means JSON format\n            if (chunkType !== 0) {\n                throw new Error('invalid chunkType of chunk0 in this binary glTF file.');\n            }\n            let uint8ArrayJSonContent = new Uint8Array(arrayBuffer, 20, lengthOfJSonChunkData);\n            let gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].uint8ArrayToString(uint8ArrayJSonContent);\n            let gltfJson = JSON.parse(gotText);\n            options = this._getOptions(defaultOptions, gltfJson, options);\n            let uint8array = new Uint8Array(arrayBuffer, 20 + lengthOfJSonChunkData);\n            let basePath = null;\n            if (uri) {\n                //Set the location of glb file as basePath\n                basePath = uri.substring(0, uri.lastIndexOf('/')) + '/';\n            }\n            if (gltfJson.asset === undefined) {\n                gltfJson.asset = {};\n            }\n            if (gltfJson.asset.extras === undefined) {\n                gltfJson.asset.extras = { fileType: \"glTF\", version: \"1\" };\n            }\n            this._mergeExtendedJson(gltfJson, options.extendedJson);\n            gltfJson.asset.extras.basePath = basePath;\n            gltfJson.asset.extras.rnLoaderOptions = options;\n            const result = yield this._loadInner(uint8array, basePath, gltfJson, options);\n            return result[0][0];\n        });\n    }\n    _loadAsTextJson(gltfJson, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let basePath;\n            if (uri) {\n                //Set the location of gltf file as basePath\n                basePath = uri.substring(0, uri.lastIndexOf('/')) + '/';\n            }\n            if (gltfJson.asset === undefined) {\n                gltfJson.asset = {};\n            }\n            if (gltfJson.asset.extras === undefined) {\n                gltfJson.asset.extras = { fileType: \"glTF\", version: \"1\" };\n            }\n            options = this._getOptions(defaultOptions, gltfJson, options);\n            this._mergeExtendedJson(gltfJson, options.extendedJson);\n            gltfJson.asset.extras.basePath = basePath;\n            gltfJson.asset.extras.rnLoaderOptions = options;\n            const result = yield this._loadInner(undefined, basePath, gltfJson, options);\n            return result[0][0];\n        });\n    }\n    _loadInner(uint8array, basePath, gltfJson, options) {\n        let promises = [];\n        let resources = {\n            shaders: [],\n            buffers: [],\n            images: []\n        };\n        promises.push(this._loadResources(uint8array, basePath, gltfJson, options, resources));\n        promises.push(new Promise((resolve, reject) => {\n            this._loadJsonContent(gltfJson, options);\n            resolve();\n        }));\n        return Promise.all(promises);\n    }\n    _loadJsonContent(gltfJson, options) {\n        this._convertToGltf2LikeStructure(gltfJson);\n        // Scene\n        this._loadDependenciesOfScenes(gltfJson);\n        // Node\n        this._loadDependenciesOfNodes(gltfJson);\n        // Mesh\n        this._loadDependenciesOfMeshes(gltfJson);\n        // Material\n        this._loadDependenciesOfMaterials(gltfJson);\n        // Texture\n        this._loadDependenciesOfTextures(gltfJson);\n        // Joint\n        this._loadDependenciesOfJoints(gltfJson);\n        // Animation\n        this._loadDependenciesOfAnimations(gltfJson);\n        // Accessor\n        this._loadDependenciesOfAccessors(gltfJson);\n        // BufferView\n        this._loadDependenciesOfBufferViews(gltfJson);\n    }\n    _convertToGltf2LikeStructure(gltfJson) {\n        gltfJson.bufferDic = gltfJson.buffers;\n        gltfJson.buffers = [];\n        for (let bufferName in gltfJson.bufferDic) {\n            gltfJson.buffers.push(gltfJson.bufferDic[bufferName]);\n        }\n        gltfJson.sceneDic = gltfJson.scenes;\n        gltfJson.scenes = [];\n        for (let sceneName in gltfJson.sceneDic) {\n            gltfJson.scenes.push(gltfJson.sceneDic[sceneName]);\n        }\n        gltfJson.meshDic = gltfJson.meshes;\n        {\n            let count = 0;\n            gltfJson.nodeDic = gltfJson.nodes;\n            gltfJson.nodes = [];\n            gltfJson.nodesIndices = [];\n            for (let nodeName in gltfJson.nodeDic) {\n                gltfJson.nodesIndices.push(count);\n                const node = gltfJson.nodeDic[nodeName];\n                node._index = count++;\n                gltfJson.nodes.push(node);\n            }\n        }\n        gltfJson.skinDic = gltfJson.skins;\n        gltfJson.skins = [];\n        for (let skinName in gltfJson.skinDic) {\n            gltfJson.skins.push(gltfJson.skinDic[skinName]);\n        }\n        gltfJson.materialDic = gltfJson.materials;\n        gltfJson.cameraDic = gltfJson.cameras;\n        gltfJson.shaderDic = gltfJson.shaders;\n        gltfJson.imageDic = gltfJson.images;\n        gltfJson.animationDic = gltfJson.animations;\n        gltfJson.animations = [];\n        for (let animationName in gltfJson.animationDic) {\n            gltfJson.animations.push(gltfJson.animationDic[animationName]);\n        }\n        gltfJson.textureDic = gltfJson.textures;\n        gltfJson.samplerDic = gltfJson.samplers;\n        gltfJson.accessorDic = gltfJson.accessors;\n        gltfJson.bufferViewDic = gltfJson.bufferViews;\n    }\n    _loadDependenciesOfScenes(gltfJson) {\n        for (let sceneName in gltfJson.sceneDic) {\n            const scene = gltfJson.sceneDic[sceneName];\n            scene.nodeNames = scene.nodes;\n            scene.nodes = [];\n            scene.nodesIndices = [];\n            for (let name of scene.nodeNames) {\n                scene.nodes.push(gltfJson.nodeDic[name]);\n                // calc index of 'name' in gltfJson.nodeDic enumerate\n                let count = 0;\n                for (let nodeName in gltfJson.nodeDic) {\n                    if (nodeName === name) {\n                        break;\n                    }\n                    count++;\n                }\n                scene.nodesIndices.push(count);\n            }\n        }\n    }\n    _loadDependenciesOfNodes(gltfJson) {\n        for (let node of gltfJson.nodes) {\n            //const node = (gltfJson.nodeDic as any)[nodeName];\n            // Hierarchy\n            if (node.children) {\n                node.childrenNames = node.children.concat();\n                node.children = [];\n                node.childrenIndices = [];\n                for (let name of node.childrenNames) {\n                    const childNode = gltfJson.nodeDic[name];\n                    node.children.push(childNode);\n                    node.childrenIndices.push(childNode._index);\n                }\n            }\n            // Mesh\n            if (node.meshes !== void 0 && gltfJson.meshes !== void 0) {\n                node.meshNames = node.meshes;\n                node.meshes = [];\n                for (let name of node.meshNames) {\n                    node.meshes.push(gltfJson.meshDic[name]);\n                }\n                node.mesh = node.meshes[1];\n                if (node.meshes == null || node.meshes.length === 0) {\n                    node.mesh = node.meshes[0];\n                }\n                else {\n                    const mergedMesh = {\n                        name: '',\n                        primitives: []\n                    };\n                    for (let i = 0; i < node.meshes.length; i++) {\n                        mergedMesh.name += '_' + node.meshes[i].name;\n                        Array.prototype.push.apply(mergedMesh.primitives, node.meshes[i].primitives);\n                    }\n                    mergedMesh.name += '_merged';\n                    node.mesh = mergedMesh;\n                    node.meshes = void 0;\n                }\n            }\n            // Skin\n            if (node.skin !== void 0 && gltfJson.skins !== void 0) {\n                if (typeof node.skin === 'string') {\n                    node.skinName = node.skin;\n                    node.skin = gltfJson.skinDic[node.skinName];\n                }\n                // if (node.mesh.extras === void 0) {\n                //   node.mesh.extras = {};\n                // }\n                //node.mesh.extras._skin = node.skin;\n            }\n            // Camera\n            if (node.camera !== void 0 && gltfJson.cameras !== void 0) {\n                node.cameraName = node.camera;\n                node.camera = gltfJson.cameraDic[node.cameraName];\n            }\n        }\n    }\n    _loadDependenciesOfMeshes(gltfJson) {\n        // Mesh\n        for (let meshName in gltfJson.meshDic) {\n            const mesh = gltfJson.meshDic[meshName];\n            for (let primitive of mesh.primitives) {\n                if (primitive.material !== void 0) {\n                    primitive.materialName = primitive.material;\n                    primitive.material = gltfJson.materialDic[primitive.materialName];\n                }\n                primitive.attributeNames = Object.assign({}, primitive.attributes);\n                primitive.attributes = [];\n                for (let attributeName in primitive.attributeNames) {\n                    if (primitive.attributeNames[attributeName] != null) {\n                        const accessorName = primitive.attributeNames[attributeName];\n                        let accessor = gltfJson.accessorDic[accessorName];\n                        if (attributeName === 'JOINT') {\n                            attributeName = 'JOINTS_0';\n                            delete primitive.attributes['JOINT'];\n                        }\n                        else if (attributeName === 'WEIGHT') {\n                            attributeName = 'WEIGHTS_0';\n                            delete primitive.attributes['WEIGHT'];\n                        }\n                        accessor.extras = {\n                            toGetAsTypedArray: true,\n                            attributeName: attributeName\n                        };\n                        primitive.attributes.push(accessor);\n                    }\n                    else {\n                        //primitive.attributes[attributeName] = void 0;\n                    }\n                }\n                if (primitive.indices !== void 0) {\n                    primitive.indicesName = primitive.indices;\n                    primitive.indices = gltfJson.accessorDic[primitive.indicesName];\n                }\n            }\n        }\n    }\n    _isKHRMaterialsCommon(materialJson) {\n        if (typeof materialJson.extensions !== 'undefined' && typeof materialJson.extensions.KHR_materials_common !== 'undefined') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    _loadDependenciesOfMaterials(gltfJson) {\n        // Material\n        if (gltfJson.materials) {\n            for (let materialStr in gltfJson.materials) {\n                let material = gltfJson.materials[materialStr];\n                const origMaterial = material;\n                if (this._isKHRMaterialsCommon(material)) {\n                    material = material.extensions.KHR_materials_common;\n                }\n                const setParameters = (values, isParameter) => {\n                    for (let valueName in values) {\n                        let value = null;\n                        if (isParameter) {\n                            value = values[valueName].value;\n                            if (typeof value === 'undefined') {\n                                continue;\n                            }\n                        }\n                        else {\n                            value = values[valueName];\n                        }\n                        if (typeof value === 'string') {\n                            let textureStr = value;\n                            let texturePurpose;\n                            if (valueName === 'diffuse' || (material.technique === \"CONSTANT\" && valueName === 'ambient')) {\n                                origMaterial.diffuseColorTexture = {};\n                                origMaterial.diffuseColorTexture.texture = gltfJson.textures[value];\n                            }\n                            else if (valueName === 'emission' && textureStr.match(/_normal$/)) {\n                                origMaterial.emissionTexture = {};\n                                origMaterial.emissionTexture.texture = gltfJson.textures[value];\n                            }\n                            origMaterial.extras = {};\n                            origMaterial.extras.technique = material.technique;\n                        }\n                        else {\n                            if (valueName === 'diffuse') {\n                                origMaterial.diffuseColorFactor = value;\n                            }\n                        }\n                    }\n                };\n                setParameters(material.values, false);\n                if (material.technique && gltfJson.techniques) {\n                    if (typeof gltfJson.techniques[material.technique] !== \"undefined\") {\n                        setParameters(gltfJson.techniques[material.technique].parameters, true);\n                    }\n                }\n            }\n        }\n    }\n    _loadDependenciesOfTextures(gltfJson) {\n        // Texture\n        if (gltfJson.textures) {\n            for (let textureName in gltfJson.textureDic) {\n                const texture = gltfJson.textureDic[textureName];\n                if (texture.sampler !== void 0) {\n                    texture.samplerName = texture.sampler;\n                    texture.sampler = gltfJson.samplerDic[texture.samplerName];\n                }\n                if (texture.source !== void 0) {\n                    texture.sourceName = texture.source;\n                    texture.image = gltfJson.imageDic[texture.sourceName];\n                }\n            }\n        }\n    }\n    _loadDependenciesOfJoints(gltfJson) {\n        if (gltfJson.skins) {\n            for (let skinName in gltfJson.skinDic) {\n                const skin = gltfJson.skinDic[skinName];\n                skin.joints = [];\n                skin.jointsIndices = [];\n                for (let jointName of skin.jointNames) {\n                    const joint = gltfJson.nodeDic[jointName];\n                    skin.joints.push(joint);\n                    skin.jointsIndices.push(joint._index);\n                }\n                skin.skeletonNames = skin.skeletons;\n                if (skin.skeletonNames) {\n                    for (let name of skin.skeletonNames) {\n                        skin.skeleton = skin.skeletons.push(gltfJson.nodeDic[name]);\n                    }\n                }\n                else {\n                    skin.skeleton = skin.joints[0];\n                }\n                skin.skeletonIndex = skin.skeleton._index;\n                skin.inverseBindMatricesName = skin.inverseBindMatrices;\n                skin.inverseBindMatrices = gltfJson.accessorDic[skin.inverseBindMatricesName];\n                skin.joints_tmp = skin.joints;\n                skin.joints = [];\n                for (let joint of skin.joints_tmp) {\n                    skin.joints.push(gltfJson.nodeDic[joint.name]);\n                }\n                skin.joints_tmp = void 0;\n            }\n        }\n    }\n    _loadDependenciesOfAnimations(gltfJson) {\n        if (gltfJson.animations) {\n            for (let animationName in gltfJson.animationDic) {\n                const animation = gltfJson.animationDic[animationName];\n                animation.samplerDic = animation.samplers;\n                animation.samplers = [];\n                for (let channel of animation.channels) {\n                    channel.sampler = animation.samplerDic[channel.sampler];\n                    channel.target.node = gltfJson.nodeDic[channel.target.id];\n                    channel.target.nodeIndex = channel.target.node._index;\n                    channel.sampler.input = gltfJson.accessors[animation.parameters['TIME']];\n                    channel.sampler.output = gltfJson.accessors[animation.parameters[channel.target.path]];\n                    animation.samplers.push(channel.sampler);\n                    if (channel.target.path === 'rotation') {\n                        if (channel.sampler.output.extras === void 0) {\n                            channel.sampler.output.extras = {};\n                        }\n                        channel.sampler.output.extras.quaternionIfVec4 = true;\n                    }\n                }\n                animation.channelDic = animation.channels;\n                animation.channels = [];\n                for (let channel of animation.channelDic) {\n                    animation.channels.push(channel);\n                }\n            }\n        }\n    }\n    _loadDependenciesOfAccessors(gltfJson) {\n        // Accessor\n        for (let accessorName in gltfJson.accessorDic) {\n            const accessor = gltfJson.accessorDic[accessorName];\n            if (accessor.bufferView !== void 0) {\n                accessor.bufferViewName = accessor.bufferView;\n                accessor.bufferView = gltfJson.bufferViewDic[accessor.bufferViewName];\n            }\n        }\n    }\n    _loadDependenciesOfBufferViews(gltfJson) {\n        // BufferView\n        for (let bufferViewName in gltfJson.bufferViewDic) {\n            const bufferView = gltfJson.bufferViewDic[bufferViewName];\n            if (bufferView.buffer !== void 0) {\n                bufferView.bufferName = bufferView.buffer;\n                bufferView.buffer = gltfJson.bufferDic[bufferView.bufferName];\n                let bufferIdx = 0;\n                for (let bufferName in gltfJson.bufferDic) {\n                    if (bufferName === bufferView.bufferName) {\n                        bufferView.bufferIndex = bufferIdx;\n                    }\n                    bufferIdx++;\n                }\n            }\n        }\n    }\n    _mergeExtendedJson(gltfJson, extendedData) {\n        let extendedJson = null;\n        if (extendedData instanceof ArrayBuffer) {\n            const extendedJsonStr = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(extendedData);\n            extendedJson = JSON.parse(extendedJsonStr);\n        }\n        else if (typeof extendedData === 'string') {\n            extendedJson = JSON.parse(extendedData);\n            extendedJson = extendedJson;\n        }\n        else if (typeof extendedData === 'object') {\n            extendedJson = extendedData;\n        }\n        else {\n        }\n        Object.assign(gltfJson, extendedJson);\n    }\n    _loadResources(uint8Array, basePath, gltfJson, options, resources) {\n        let promisesToLoadResources = [];\n        // Shaders Async load\n        // for (let _i in gltfJson.shaders) {\n        //   const i = _i as any as number;\n        //   resources.shaders[i] = {};\n        //   let shaderJson = gltfJson.shaders[i];\n        //   let shaderType = shaderJson.type;\n        //   if (typeof shaderJson.extensions !== 'undefined' && typeof shaderJson.extensions.KHR_binary_glTF !== 'undefined') {\n        //     resources.shaders[i].shaderText = this._accessBinaryAsShader(shaderJson.extensions.KHR_binary_glTF.bufferView, gltfJson, arrayBufferBinary);\n        //     resources.shaders[i].shaderType = shaderType;\n        //     continue;\n        //   }\n        //   let shaderUri = shaderJson.uri;\n        //   if (options.files) {\n        //     const splitted = shaderUri.split('/');\n        //     const filename = splitted[splitted.length - 1];\n        //     if (options.files[filename]) {\n        //       const arrayBuffer = options.files[filename];\n        //       resources.shaders[i].shaderText = DataUtil.arrayBufferToString(arrayBuffer);\n        //       resources.shaders[i].shaderType = shaderType;\n        //       continue;\n        //     }\n        //   }\n        //   if (shaderUri.match(/^data:/)) {\n        //     promisesToLoadResources.push(\n        //       new Promise((resolve, rejected) => {\n        //         let arrayBuffer = DataUtil.dataUriToArrayBuffer(shaderUri);\n        //         resources.shaders[i].shaderText = DataUtil.arrayBufferToString(arrayBuffer);\n        //         resources.shaders[i].shaderType = shaderType;\n        //         resolve();\n        //       })\n        //     );\n        //   } else {\n        //     shaderUri = basePath + shaderUri;\n        //     promisesToLoadResources.push(\n        //       DataUtil.loadResourceAsync(shaderUri, false,\n        //         (resolve:Function, response:any)=>{\n        //           resources.shaders[i].shaderText = response;\n        //           resources.shaders[i].shaderType = shaderType;\n        //           resolve(gltfJson);\n        //         },\n        //         (reject:Function, error:any)=>{\n        //         }\n        //       )\n        //     );\n        //   }\n        // }\n        // Buffers Async load\n        for (let i in gltfJson.buffers) {\n            let bufferInfo = gltfJson.buffers[i];\n            let splitted;\n            let filename;\n            if (bufferInfo.uri) {\n                splitted = bufferInfo.uri.split('/');\n                filename = splitted[splitted.length - 1];\n            }\n            if (typeof bufferInfo.uri === 'undefined') {\n                promisesToLoadResources.push(new Promise((resolve, rejected) => {\n                    resources.buffers[i] = uint8Array;\n                    bufferInfo.buffer = uint8Array;\n                    resolve(gltfJson);\n                }));\n            }\n            else if (bufferInfo.uri === '' || bufferInfo.uri === 'data:,') {\n                promisesToLoadResources.push(new Promise((resolve, rejected) => {\n                    resources.buffers[i] = uint8Array;\n                    bufferInfo.buffer = uint8Array;\n                    resolve(gltfJson);\n                }));\n            }\n            else if (bufferInfo.uri.match(/^data:application\\/(.*);base64,/)) {\n                promisesToLoadResources.push(new Promise((resolve, rejected) => {\n                    let arrayBuffer = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dataUriToArrayBuffer(bufferInfo.uri);\n                    resources.buffers[i] = new Uint8Array(arrayBuffer);\n                    bufferInfo.buffer = new Uint8Array(arrayBuffer);\n                    resolve(gltfJson);\n                }));\n            }\n            else if (options.files && options.files[filename]) {\n                promisesToLoadResources.push(new Promise((resolve, rejected) => {\n                    const arrayBuffer = options.files[filename];\n                    resources.buffers[i] = new Uint8Array(arrayBuffer);\n                    bufferInfo.buffer = new Uint8Array(arrayBuffer);\n                    resolve(gltfJson);\n                }));\n            }\n            else {\n                promisesToLoadResources.push(_misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].loadResourceAsync(basePath + bufferInfo.uri, true, (resolve, response) => {\n                    resources.buffers[i] = new Uint8Array(response);\n                    bufferInfo.buffer = new Uint8Array(response);\n                    resolve(gltfJson);\n                }, (reject, error) => {\n                }));\n            }\n        }\n        // Textures Async load\n        for (let _i in gltfJson.images) {\n            const i = _i;\n            let imageJson = gltfJson.images[i];\n            //let imageJson = gltfJson.images[textureJson.source];\n            //let samplerJson = gltfJson.samplers[textureJson.sampler];\n            let imageUri;\n            if (typeof imageJson.extensions !== 'undefined' && typeof imageJson.extensions.KHR_binary_glTF !== 'undefined') {\n                const imageUint8Array = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createUint8ArrayFromBufferViewInfo(gltfJson, imageJson.extensions.KHR_binary_glTF.bufferView, uint8Array);\n                imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createBlobImageUriFromUint8Array(imageUint8Array, imageJson.extensions.KHR_binary_glTF.mimeType);\n            }\n            else if (typeof imageJson.uri === 'undefined') {\n                const imageUint8Array = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createUint8ArrayFromBufferViewInfo(gltfJson, imageJson.bufferView, uint8Array);\n                imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createBlobImageUriFromUint8Array(imageUint8Array, imageJson.mimeType);\n            }\n            else {\n                let imageFileStr = imageJson.uri;\n                const splitted = imageFileStr.split('/');\n                const filename = splitted[splitted.length - 1];\n                if (options.files && options.files[filename]) {\n                    const arrayBuffer = options.files[filename];\n                    imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createBlobImageUriFromUint8Array(new Uint8Array(arrayBuffer), imageJson.mimeType);\n                }\n                else if (imageFileStr.match(/^data:/)) {\n                    imageUri = imageFileStr;\n                }\n                else {\n                    imageUri = basePath + imageFileStr;\n                }\n            }\n            const promise = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createImageFromUri(imageUri, imageJson.mimeType).then(function (image) {\n                image.crossOrigin = 'Anonymous';\n                resources.images[i] = image;\n                imageJson.image = image;\n            });\n            promisesToLoadResources.push(promise);\n        }\n        if (options.defaultTextures) {\n            const basePath = options.defaultTextures.basePath;\n            const textureInfos = options.defaultTextures.textureInfos;\n            for (let textureInfo of textureInfos) {\n                const fileName = textureInfo.fileName;\n                const uri = basePath + fileName;\n                const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getExtension(fileName);\n                const mimeType = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getMimeTypeFromExtension(fileExtension);\n                const promise = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createImageFromUri(uri, mimeType).then(function (image) {\n                    image.crossOrigin = 'Anonymous';\n                    textureInfo.image = { image: image };\n                });\n                promisesToLoadResources.push(promise);\n            }\n        }\n        return Promise.all(promisesToLoadResources);\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new Gltf1Importer();\n        }\n        return this.__instance;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/importer/Gltf1Importer.ts?");

/***/ }),

/***/ "./src/foundation/importer/Gltf2Importer.ts":
/*!**************************************************!*\
  !*** ./src/foundation/importer/Gltf2Importer.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Gltf2Importer; });\n/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/DataUtil */ \"./src/foundation/misc/DataUtil.ts\");\n/* harmony import */ var _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/RnPromise */ \"./src/foundation/misc/RnPromise.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n/**\n * The glTF2 Importer class.\n */\nclass Gltf2Importer {\n    constructor() {\n    }\n    /**\n     * Import glTF2 file or arraybuffers.\n     * @param uri - uri of glTF file\n     * @param options - options for loading process\n     * @returns a glTF2 based JSON pre-processed\n     */\n    import(uri, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let defaultOptions = {\n                files: {\n                //        \"foo.gltf\": content of file as ArrayBuffer,\n                //        \"foo.bin\": content of file as ArrayBuffer,\n                //        \"boo.png\": content of file as ArrayBuffer\n                },\n                loaderExtension: null,\n                defaultMaterialHelperName: null,\n                defaultMaterialHelperArgumentArray: [],\n                statesOfElements: [\n                    {\n                        targets: [],\n                        states: {\n                            enable: [\n                            // 3042,  // BLEND\n                            ],\n                            functions: {\n                            //\"blendFuncSeparate\": [1, 0, 1, 0],\n                            }\n                        },\n                        isTransparent: true,\n                        opacity: 1.0,\n                        isTextureImageToLoadPreMultipliedAlpha: false,\n                    }\n                ],\n                tangentCalculationMode: 1,\n                isPrecomputeForRayCastPickingEnable: false,\n                extendedJson: void 0 //   URI string / JSON Object / ArrayBuffer\n            };\n            if (options && options.files) {\n                for (let fileName in options.files) {\n                    const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getExtension(fileName);\n                    if (fileExtension === 'gltf' || fileExtension === 'glb') {\n                        return yield this.__loadFromArrayBuffer(options.files[fileName], defaultOptions, options, void 0).catch((err) => {\n                            console.log('this.__loadFromArrayBuffer error', err);\n                        });\n                    }\n                }\n            }\n            let response;\n            try {\n                response = yield fetch(uri);\n            }\n            catch (err) {\n                throw new Error('import' + err);\n            }\n            ;\n            const arrayBuffer = yield response.arrayBuffer();\n            return yield this.__loadFromArrayBuffer(arrayBuffer, defaultOptions, options, uri).catch((err) => {\n                console.log('this.__loadFromArrayBuffer error', err);\n            });\n            ;\n        });\n    }\n    __loadFromArrayBuffer(arrayBuffer, defaultOptions, options, uri) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const dataView = new DataView(arrayBuffer, 0, 20);\n            const isLittleEndian = true;\n            // Magic field\n            const magic = dataView.getUint32(0, isLittleEndian);\n            let result;\n            // 0x46546C67 is 'glTF' in ASCII codes.\n            if (magic !== 0x46546C67) {\n                //const json = await response.json();\n                const gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(arrayBuffer);\n                const json = JSON.parse(gotText);\n                result = yield this._loadAsTextJson(json, options, defaultOptions, uri).catch((err) => {\n                    console.log('this.__loadAsTextJson error', err);\n                });\n            }\n            else {\n                result = yield this._loadAsBinaryJson(dataView, isLittleEndian, arrayBuffer, options, defaultOptions, uri).catch((err) => {\n                    console.log('this.__loadAsBinaryJson error', err);\n                });\n            }\n            return result;\n        });\n    }\n    _getOptions(defaultOptions, json, options) {\n        if (json.asset && json.asset.extras && json.asset.extras.rnLoaderOptions) {\n            for (let optionName in json.asset.extras.rnLoaderOptions) {\n                defaultOptions[optionName] = json.asset.extras.rnLoaderOptions[optionName];\n            }\n        }\n        for (let optionName in options) {\n            defaultOptions[optionName] = options[optionName];\n        }\n        if (options && options.loaderExtension && typeof options.loaderExtension === \"string\") {\n            if (Rn[options.loaderExtension] != null) {\n                defaultOptions.loaderExtension = Rn[options.loaderExtension].getInstance();\n            }\n            else {\n                console.error(`${options.loaderExtension} not found!`);\n                defaultOptions.loaderExtension = void 0;\n            }\n        }\n        return defaultOptions;\n    }\n    _loadAsBinaryJson(dataView, isLittleEndian, arrayBuffer, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let gltfVer = dataView.getUint32(4, isLittleEndian);\n            if (gltfVer !== 2) {\n                throw new Error('invalid version field in this binary glTF file.');\n            }\n            let lengthOfThisFile = dataView.getUint32(8, isLittleEndian);\n            let lengthOfJSonChunkData = dataView.getUint32(12, isLittleEndian);\n            let chunkType = dataView.getUint32(16, isLittleEndian);\n            // 0x4E4F534A means JSON format (0x4E4F534A is 'JSON' in ASCII codes)\n            if (chunkType !== 0x4E4F534A) {\n                throw new Error('invalid chunkType of chunk0 in this binary glTF file.');\n            }\n            let uint8ArrayJSonContent = new Uint8Array(arrayBuffer, 20, lengthOfJSonChunkData);\n            let gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].uint8ArrayToString(uint8ArrayJSonContent);\n            let gltfJson = JSON.parse(gotText);\n            options = this._getOptions(defaultOptions, gltfJson, options);\n            let uint8array = new Uint8Array(arrayBuffer, 20 + lengthOfJSonChunkData + 8);\n            let basePath = null;\n            if (uri) {\n                //Set the location of glb file as basePath\n                basePath = uri.substring(0, uri.lastIndexOf('/')) + '/';\n            }\n            if (gltfJson.asset.extras === undefined) {\n                gltfJson.asset.extras = { fileType: \"glTF\", version: \"2\" };\n            }\n            this._mergeExtendedJson(gltfJson, options.extendedJson);\n            gltfJson.asset.extras.basePath = basePath;\n            gltfJson.asset.extras.rnLoaderOptions = options;\n            try {\n                yield this._loadInner(uint8array, basePath, gltfJson, options);\n            }\n            catch (err) {\n                console.log(\"this._loadInner error in _loadAsBinaryJson\", err);\n            }\n            return gltfJson;\n        });\n    }\n    _loadAsTextJson(gltfJson, options, defaultOptions, uri) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let basePath;\n            if (uri) {\n                //Set the location of gltf file as basePath\n                basePath = uri.substring(0, uri.lastIndexOf('/')) + '/';\n            }\n            if (gltfJson.asset.extras === undefined) {\n                gltfJson.asset.extras = { fileType: \"glTF\", version: \"2\" };\n            }\n            options = this._getOptions(defaultOptions, gltfJson, options);\n            this._mergeExtendedJson(gltfJson, options.extendedJson);\n            gltfJson.asset.extras.basePath = basePath;\n            gltfJson.asset.extras.rnLoaderOptions = options;\n            try {\n                yield this._loadInner(undefined, basePath, gltfJson, options);\n            }\n            catch (err) {\n                console.log('this._loadInner error in _loadAsTextJson', err);\n            }\n            return gltfJson;\n        });\n    }\n    _loadInner(uint8array, basePath, gltfJson, options) {\n        let promises = [];\n        let resources = {\n            shaders: [],\n            buffers: [],\n            images: []\n        };\n        promises.push(this._loadResources(uint8array, basePath, gltfJson, options, resources));\n        promises.push(new Promise((resolve, reject) => {\n            this._loadJsonContent(gltfJson, options);\n            resolve();\n        }));\n        return Promise.all(promises);\n    }\n    _loadJsonContent(gltfJson, options) {\n        // Scene\n        this._loadDependenciesOfScenes(gltfJson);\n        // Node\n        this._loadDependenciesOfNodes(gltfJson);\n        // Mesh\n        this._loadDependenciesOfMeshes(gltfJson);\n        // Material\n        this._loadDependenciesOfMaterials(gltfJson);\n        // Texture\n        this._loadDependenciesOfTextures(gltfJson);\n        // Joint\n        this._loadDependenciesOfJoints(gltfJson);\n        // Animation\n        this._loadDependenciesOfAnimations(gltfJson);\n        // Accessor\n        this._loadDependenciesOfAccessors(gltfJson);\n        // BufferView\n        this._loadDependenciesOfBufferViews(gltfJson);\n        if (gltfJson.asset === void 0) {\n            gltfJson.asset = {};\n        }\n        if (gltfJson.asset.extras === void 0) {\n            gltfJson.asset.extras = {};\n        }\n    }\n    _loadDependenciesOfScenes(gltfJson) {\n        for (let scene of gltfJson.scenes) {\n            scene.nodesIndices = scene.nodes.concat();\n            for (let i in scene.nodesIndices) {\n                scene.nodes[i] = gltfJson.nodes[scene.nodes[i]];\n            }\n        }\n    }\n    _loadDependenciesOfNodes(gltfJson) {\n        for (let node of gltfJson.nodes) {\n            // Hierarchy\n            if (node.children) {\n                node.childrenIndices = node.children.concat();\n                node.children = [];\n                for (let i in node.childrenIndices) {\n                    node.children[i] = gltfJson.nodes[node.childrenIndices[i]];\n                }\n            }\n            // Mesh\n            if (node.mesh !== void 0 && gltfJson.meshes !== void 0) {\n                node.meshIndex = node.mesh;\n                node.mesh = gltfJson.meshes[node.meshIndex];\n            }\n            // Skin\n            if (node.skin !== void 0 && gltfJson.skins !== void 0) {\n                node.skinIndex = node.skin;\n                node.skin = gltfJson.skins[node.skinIndex];\n                if (node.mesh.extras === void 0) {\n                    node.mesh.extras = {};\n                }\n                node.mesh.extras._skin = node.skin;\n            }\n            // Camera\n            if (node.camera !== void 0 && gltfJson.cameras !== void 0) {\n                node.cameraIndex = node.camera;\n                node.camera = gltfJson.cameras[node.cameraIndex];\n            }\n            // Lights\n            if (node.extensions !== void 0 && gltfJson.extensions !== void 0 && gltfJson.extensions.KHR_lights_punctual !== void 0) {\n                node.extensions.KHR_lights_punctual.lightIndex = node.extensions.KHR_lights_punctual.light;\n                node.extensions.KHR_lights_punctual.light = gltfJson.extensions.KHR_lights_punctual.lights[node.extensions.KHR_lights_punctual.lightIndex];\n            }\n        }\n    }\n    _loadDependenciesOfMeshes(gltfJson) {\n        // Mesh\n        for (let mesh of gltfJson.meshes) {\n            for (let primitive of mesh.primitives) {\n                if (primitive.material !== void 0) {\n                    primitive.materialIndex = primitive.material;\n                    primitive.material = gltfJson.materials[primitive.materialIndex];\n                }\n                primitive.attributesIndex = Object.assign({}, primitive.attributes);\n                for (let attributeName in primitive.attributesIndex) {\n                    if (primitive.attributesIndex[attributeName] >= 0) {\n                        let accessor = gltfJson.accessors[primitive.attributesIndex[attributeName]];\n                        accessor.extras = {\n                            toGetAsTypedArray: true,\n                            attributeName: attributeName\n                        };\n                        primitive.attributes[attributeName] = accessor;\n                    }\n                    else {\n                        primitive.attributes[attributeName] = void 0;\n                    }\n                }\n                if (primitive.indices != null) {\n                    primitive.indicesIndex = primitive.indices;\n                    primitive.indices = gltfJson.accessors[primitive.indicesIndex];\n                }\n                if (primitive.targets != null) {\n                    primitive.targetIndices = primitive.targets;\n                    primitive.targets = [];\n                    for (let target of primitive.targetIndices) {\n                        const attributes = {};\n                        for (let attributeName in target) {\n                            if (target[attributeName] >= 0) {\n                                let accessor = gltfJson.accessors[target[attributeName]];\n                                accessor.extras = {\n                                    toGetAsTypedArray: true,\n                                    attributeName: attributeName\n                                };\n                                attributes[attributeName] = accessor;\n                            }\n                            else {\n                                attributes[attributeName] = void 0;\n                            }\n                        }\n                        primitive.targets.push(attributes);\n                    }\n                }\n            }\n        }\n    }\n    _checkRnGltfLoaderOptionsExist(gltfModel) {\n        if (gltfModel.asset.extras && gltfModel.asset.extras.rnLoaderOptions) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    _loadDependenciesOfMaterials(gltfJson) {\n        if (!gltfJson.textures)\n            gltfJson.textures = [];\n        // Material\n        if (gltfJson.materials) {\n            for (let material of gltfJson.materials) {\n                if (material.pbrMetallicRoughness) {\n                    let baseColorTexture = material.pbrMetallicRoughness.baseColorTexture;\n                    if (baseColorTexture !== void 0) {\n                        baseColorTexture.texture = gltfJson.textures[baseColorTexture.index];\n                    }\n                    let metallicRoughnessTexture = material.pbrMetallicRoughness.metallicRoughnessTexture;\n                    if (metallicRoughnessTexture !== void 0) {\n                        metallicRoughnessTexture.texture = gltfJson.textures[metallicRoughnessTexture.index];\n                    }\n                }\n                let normalTexture = material.normalTexture;\n                if (normalTexture !== void 0) {\n                    normalTexture.texture = gltfJson.textures[normalTexture.index];\n                }\n                const occlusionTexture = material.occlusionTexture;\n                if (occlusionTexture !== void 0) {\n                    occlusionTexture.texture = gltfJson.textures[occlusionTexture.index];\n                }\n                const emissiveTexture = material.emissiveTexture;\n                if (emissiveTexture !== void 0) {\n                    emissiveTexture.texture = gltfJson.textures[emissiveTexture.index];\n                }\n                if (material.extensions && material.extensions.ZOZO_materials_pbrMultiLayer) {\n                    const zMaterial = material.extensions.ZOZO_materials_pbrMultiLayer;\n                    let diffuseTexture = zMaterial.diffuseTexture;\n                    if (diffuseTexture !== void 0) {\n                        diffuseTexture.texture = gltfJson.textures[diffuseTexture.index];\n                    }\n                    let specularGlossinessTexture = zMaterial.specularGlossinessTexture;\n                    if (specularGlossinessTexture !== void 0) {\n                        specularGlossinessTexture.texture = gltfJson.textures[specularGlossinessTexture.index];\n                    }\n                }\n                if (this._checkRnGltfLoaderOptionsExist(gltfJson) &&\n                    gltfJson.asset.extras.rnLoaderOptions.loaderExtension &&\n                    gltfJson.asset.extras.rnLoaderOptions.loaderExtension.setTextures) {\n                    gltfJson.asset.extras.rnLoaderOptions.loaderExtension.setTextures(gltfJson, material);\n                }\n            }\n        }\n    }\n    _loadDependenciesOfTextures(gltfJson) {\n        // Texture\n        if (gltfJson.textures) {\n            for (let texture of gltfJson.textures) {\n                if (texture.sampler !== void 0) {\n                    texture.samplerIndex = texture.sampler;\n                    texture.sampler = gltfJson.samplers[texture.samplerIndex];\n                }\n                if (texture.source !== void 0) {\n                    texture.sourceIndex = texture.source;\n                    texture.image = gltfJson.images[texture.sourceIndex];\n                }\n            }\n        }\n    }\n    _loadDependenciesOfJoints(gltfJson) {\n        if (gltfJson.skins) {\n            for (let skin of gltfJson.skins) {\n                skin.skeletonIndex = skin.skeleton;\n                skin.skeleton = gltfJson.nodes[skin.skeletonIndex];\n                skin.inverseBindMatricesIndex = skin.inverseBindMatrices;\n                skin.inverseBindMatrices = gltfJson.accessors[skin.inverseBindMatricesIndex];\n                if (skin.skeleton == null) {\n                    skin.skeletonIndex = skin.joints[0];\n                    skin.skeleton = gltfJson.nodes[skin.skeletonIndex];\n                }\n                skin.jointsIndices = skin.joints;\n                skin.joints = [];\n                for (let jointIndex of skin.jointsIndices) {\n                    skin.joints.push(gltfJson.nodes[jointIndex]);\n                }\n            }\n        }\n    }\n    _loadDependenciesOfAnimations(gltfJson) {\n        if (gltfJson.animations) {\n            for (let animation of gltfJson.animations) {\n                for (let channel of animation.channels) {\n                    channel.samplerIndex = channel.sampler;\n                    channel.sampler = animation.samplers[channel.samplerIndex];\n                    channel.target.nodeIndex = channel.target.node;\n                    channel.target.node = gltfJson.nodes[channel.target.nodeIndex];\n                }\n                for (let channel of animation.channels) {\n                    channel.sampler.inputIndex = channel.sampler.input;\n                    channel.sampler.outputIndex = channel.sampler.output;\n                    channel.sampler.input = gltfJson.accessors[channel.sampler.inputIndex];\n                    channel.sampler.output = gltfJson.accessors[channel.sampler.outputIndex];\n                    if (channel.sampler.output.extras === void 0) {\n                        channel.sampler.output.extras = {};\n                    }\n                    if (channel.target.path === 'rotation') {\n                        channel.sampler.output.extras.quaternionIfVec4 = true;\n                    }\n                    if (channel.target.path === 'weights') {\n                        const weightCount = channel.sampler.output.count / channel.sampler.input.count;\n                        channel.sampler.output.extras.weightCount = weightCount;\n                    }\n                }\n            }\n        }\n    }\n    _loadDependenciesOfAccessors(gltfJson) {\n        // Accessor\n        for (let accessor of gltfJson.accessors) {\n            if (accessor.bufferView == null) {\n                accessor.bufferView = 0;\n            }\n            accessor.bufferViewIndex = accessor.bufferView;\n            accessor.bufferView = gltfJson.bufferViews[accessor.bufferViewIndex];\n        }\n    }\n    _loadDependenciesOfBufferViews(gltfJson) {\n        // BufferView\n        for (let bufferView of gltfJson.bufferViews) {\n            if (bufferView.buffer !== void 0) {\n                bufferView.bufferIndex = bufferView.buffer;\n                bufferView.buffer = gltfJson.buffers[bufferView.bufferIndex];\n            }\n        }\n    }\n    _mergeExtendedJson(gltfJson, extendedData) {\n        let extendedJson = null;\n        if (extendedData instanceof ArrayBuffer) {\n            const extendedJsonStr = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].arrayBufferToString(extendedData);\n            extendedJson = JSON.parse(extendedJsonStr);\n        }\n        else if (typeof extendedData === 'string') {\n            extendedJson = JSON.parse(extendedData);\n            extendedJson = extendedJson;\n        }\n        else if (typeof extendedData === 'object') {\n            extendedJson = extendedData;\n        }\n        else {\n        }\n        Object.assign(gltfJson, extendedJson);\n    }\n    _loadResources(uint8Array, basePath, gltfJson, options, resources) {\n        let promisesToLoadResources = [];\n        // Shaders Async load\n        // for (let _i in gltfJson.shaders) {\n        //   const i = _i as any as number;\n        //   resources.shaders[i] = {};\n        //   let shaderJson = gltfJson.shaders[i];\n        //   let shaderType = shaderJson.type;\n        //   if (typeof shaderJson.extensions !== 'undefined' && typeof shaderJson.extensions.KHR_binary_glTF !== 'undefined') {\n        //     resources.shaders[i].shaderText = this._accessBinaryAsShader(shaderJson.extensions.KHR_binary_glTF.bufferView, gltfJson, arrayBufferBinary);\n        //     resources.shaders[i].shaderType = shaderType;\n        //     continue;\n        //   }\n        //   let shaderUri = shaderJson.uri;\n        //   if (options.files) {\n        //     const splitted = shaderUri.split('/');\n        //     const filename = splitted[splitted.length - 1];\n        //     if (options.files[filename]) {\n        //       const arrayBuffer = options.files[filename];\n        //       resources.shaders[i].shaderText = DataUtil.arrayBufferToString(arrayBuffer);\n        //       resources.shaders[i].shaderType = shaderType;\n        //       continue;\n        //     }\n        //   }\n        //   if (shaderUri.match(/^data:/)) {\n        //     promisesToLoadResources.push(\n        //       new Promise((resolve, rejected) => {\n        //         let arrayBuffer = DataUtil.dataUriToArrayBuffer(shaderUri);\n        //         resources.shaders[i].shaderText = DataUtil.arrayBufferToString(arrayBuffer);\n        //         resources.shaders[i].shaderType = shaderType;\n        //         resolve();\n        //       })\n        //     );\n        //   } else {\n        //     shaderUri = basePath + shaderUri;\n        //     promisesToLoadResources.push(\n        //       DataUtil.loadResourceAsync(shaderUri, false,\n        //         (resolve:Function, response:any)=>{\n        //           resources.shaders[i].shaderText = response;\n        //           resources.shaders[i].shaderType = shaderType;\n        //           resolve(gltfJson);\n        //         },\n        //         (reject:Function, error:any)=>{\n        //         }\n        //       )\n        //     );\n        //   }\n        // }\n        // Buffers Async load\n        let rnpArrayBuffer;\n        for (let i in gltfJson.buffers) {\n            let bufferInfo = gltfJson.buffers[i];\n            let splitted;\n            let filename;\n            if (bufferInfo.uri) {\n                splitted = bufferInfo.uri.split('/');\n                filename = splitted[splitted.length - 1];\n            }\n            if (typeof bufferInfo.uri === 'undefined') {\n                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__[\"default\"]((resolve, rejected) => {\n                    resources.buffers[i] = uint8Array;\n                    bufferInfo.buffer = uint8Array;\n                    resolve(uint8Array);\n                });\n            }\n            else if (bufferInfo.uri.match(/^data:application\\/(.*);base64,/)) {\n                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__[\"default\"]((resolve, rejected) => {\n                    let arrayBuffer = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dataUriToArrayBuffer(bufferInfo.uri);\n                    resources.buffers[i] = new Uint8Array(arrayBuffer);\n                    bufferInfo.buffer = new Uint8Array(arrayBuffer);\n                    resolve(arrayBuffer);\n                });\n            }\n            else if (options.files && options.files[filename]) {\n                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__[\"default\"]((resolve, rejected) => {\n                    const arrayBuffer = options.files[filename];\n                    resources.buffers[i] = new Uint8Array(arrayBuffer);\n                    bufferInfo.buffer = new Uint8Array(arrayBuffer);\n                    resolve(arrayBuffer);\n                });\n            }\n            else {\n                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__[\"default\"](_misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].loadResourceAsync(basePath + bufferInfo.uri, true, (resolve, response) => {\n                    resources.buffers[i] = new Uint8Array(response);\n                    bufferInfo.buffer = new Uint8Array(response);\n                    resolve(response);\n                }, (reject, error) => {\n                }));\n            }\n            bufferInfo.bufferPromise = rnpArrayBuffer;\n            promisesToLoadResources.push(rnpArrayBuffer);\n        }\n        // Textures Async load\n        for (let _i in gltfJson.images) {\n            const i = _i;\n            let imageJson = gltfJson.images[i];\n            //let imageJson = gltfJson.images[textureJson.source];\n            //let samplerJson = gltfJson.samplers[textureJson.sampler];\n            let imageUri;\n            if (typeof imageJson.uri === 'undefined') {\n                let arrayBuffer = uint8Array;\n                if (uint8Array == null) {\n                    const bufferView = gltfJson.bufferViews[imageJson.bufferView];\n                    arrayBuffer = bufferView.buffer.buffer;\n                }\n                const imageUint8Array = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createUint8ArrayFromBufferViewInfo(gltfJson, imageJson.bufferView, uint8Array);\n                imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createBlobImageUriFromUint8Array(imageUint8Array, imageJson.mimeType);\n            }\n            else {\n                let imageFileStr = imageJson.uri;\n                const splitted = imageFileStr.split('/');\n                const filename = splitted[splitted.length - 1];\n                if (options.files && options.files[filename]) {\n                    const arrayBuffer = options.files[filename];\n                    imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createBlobImageUriFromUint8Array(new Uint8Array(arrayBuffer), imageJson.mimeType);\n                }\n                else if (imageFileStr.match(/^data:/)) {\n                    imageUri = imageFileStr;\n                }\n                else {\n                    imageUri = basePath + imageFileStr;\n                }\n            }\n            // if (options.extensionLoader && options.extensionLoader.setUVTransformToTexture) {\n            //   options.extensionLoader.setUVTransformToTexture(texture, samplerJson);\n            //\n            const promise = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createImageFromUri(imageUri, imageJson.mimeType).then(function (image) {\n                image.crossOrigin = 'Anonymous';\n                resources.images[i] = image;\n                imageJson.image = image;\n            });\n            promisesToLoadResources.push(promise);\n        }\n        if (options.defaultTextures) {\n            const basePath = options.defaultTextures.basePath;\n            const textureInfos = options.defaultTextures.textureInfos;\n            for (let textureInfo of textureInfos) {\n                const fileName = textureInfo.fileName;\n                const uri = basePath + fileName;\n                const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getExtension(fileName);\n                const mimeType = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getMimeTypeFromExtension(fileExtension);\n                const promise = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createImageFromUri(uri, mimeType).then(function (image) {\n                    image.crossOrigin = 'Anonymous';\n                    textureInfo.image = { image: image };\n                });\n                promisesToLoadResources.push(promise);\n            }\n        }\n        return Promise.all(promisesToLoadResources).catch((err) => {\n            console.log('Promise.all error', err);\n        });\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new Gltf2Importer();\n        }\n        return this.__instance;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/importer/Gltf2Importer.ts?");

/***/ }),

/***/ "./src/foundation/importer/GltfImporter.ts":
/*!*************************************************!*\
  !*** ./src/foundation/importer/GltfImporter.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GltfImporter; });\n/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _FormatDetector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FormatDetector */ \"./src/foundation/importer/FormatDetector.ts\");\n/* harmony import */ var _Gltf2Importer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Gltf2Importer */ \"./src/foundation/importer/Gltf2Importer.ts\");\n/* harmony import */ var _ModelConverter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ModelConverter */ \"./src/foundation/importer/ModelConverter.ts\");\n/* harmony import */ var _components_PhysicsComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/PhysicsComponent */ \"./src/foundation/components/PhysicsComponent.ts\");\n/* harmony import */ var _physics_SphereCollider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../physics/SphereCollider */ \"./src/foundation/physics/SphereCollider.ts\");\n/* harmony import */ var _textures_Texture__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../textures/Texture */ \"./src/foundation/textures/Texture.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _physics_VRMColliderGroup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../physics/VRMColliderGroup */ \"./src/foundation/physics/VRMColliderGroup.ts\");\n/* harmony import */ var _physics_VRMSpringBoneGroup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../physics/VRMSpringBoneGroup */ \"./src/foundation/physics/VRMSpringBoneGroup.ts\");\n/* harmony import */ var _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../physics/VRMSpringBonePhysicsStrategy */ \"./src/foundation/physics/VRMSpringBonePhysicsStrategy.ts\");\n/* harmony import */ var _Gltf1Importer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Gltf1Importer */ \"./src/foundation/importer/Gltf1Importer.ts\");\n/* harmony import */ var _DrcPointCloudImporter__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./DrcPointCloudImporter */ \"./src/foundation/importer/DrcPointCloudImporter.ts\");\n/* harmony import */ var _renderer_Expression__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../renderer/Expression */ \"./src/foundation/renderer/Expression.ts\");\n/* harmony import */ var _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../renderer/RenderPass */ \"./src/foundation/renderer/RenderPass.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Importer class which can import GLTF and VRM.\n */\nclass GltfImporter {\n    constructor() { }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new GltfImporter();\n        }\n        return this.__instance;\n    }\n    /**\n     * For VRM file only\n     * Generate JSON.\n     */\n    importJsonOfVRM(uri, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            options = this.__getOptions(options);\n            const gltf2Importer = _Gltf2Importer__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getInstance();\n            return gltf2Importer.import(uri, options);\n        });\n    }\n    /**\n     * Import GLTF or VRM file.\n     */\n    import(uri, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const renderPasses = yield this.__importModel(uri, options);\n            if (options && options.cameraComponent) {\n                for (let renderPass of renderPasses) {\n                    renderPass.cameraComponent = options.cameraComponent;\n                }\n            }\n            const expression = new _renderer_Expression__WEBPACK_IMPORTED_MODULE_13__[\"default\"]();\n            expression.addRenderPasses(renderPasses);\n            return expression;\n        });\n    }\n    __importModel(uri, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let fileType;\n            if (options != null && options.files != null) {\n                fileType = (yield Object(_FormatDetector__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(uri, options.files));\n            }\n            else {\n                fileType = (yield Object(_FormatDetector__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(uri));\n            }\n            let importer, gltfModel, renderPasses;\n            switch (fileType) {\n                case 'glTF1':\n                    importer = _Gltf1Importer__WEBPACK_IMPORTED_MODULE_11__[\"default\"].getInstance();\n                    gltfModel = yield importer.import(uri, options);\n                    renderPasses = this.__setupRenderPasses(gltfModel);\n                    break;\n                case 'glTF2':\n                    importer = _Gltf2Importer__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getInstance();\n                    gltfModel = yield importer.import(uri, options);\n                    renderPasses = this.__setupRenderPasses(gltfModel);\n                    break;\n                case 'Draco':\n                    importer = _DrcPointCloudImporter__WEBPACK_IMPORTED_MODULE_12__[\"default\"].getInstance();\n                    gltfModel = yield importer.importPointCloud(uri, options);\n                    renderPasses = this.__setupRenderPasses(gltfModel);\n                    break;\n                case 'VRM':\n                    renderPasses = yield this.__importVRM(uri, options);\n                    break;\n                default:\n                    renderPasses = [];\n                    console.error('detect invalid format');\n            }\n            return renderPasses;\n        });\n    }\n    __setupRenderPasses(gltfModel) {\n        const modelConverter = _ModelConverter__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInstance();\n        const rootGroup = modelConverter.convertToRhodoniteObject(gltfModel);\n        const renderPass = new _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_14__[\"default\"]();\n        renderPass.addEntities([rootGroup]);\n        return [renderPass];\n    }\n    __importVRM(uri, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            options = this.__getOptions(options);\n            const gltf2Importer = _Gltf2Importer__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getInstance();\n            const gltfModel = yield gltf2Importer.import(uri, options);\n            const defaultMaterialHelperArgumentArray = gltfModel.asset.extras.rnLoaderOptions.defaultMaterialHelperArgumentArray;\n            gltfModel.extensions.VRM.rnExtension = {\n                defaultMorphingIsTrue: defaultMaterialHelperArgumentArray[0].isMorphing === true,\n                defaultSkinningIsTrue: defaultMaterialHelperArgumentArray[0].isSkinning === true\n            };\n            const textures = this.__createTextures(gltfModel);\n            defaultMaterialHelperArgumentArray[0].textures = textures;\n            this.__initializeMaterialProperties(gltfModel, textures.length);\n            const renderPassMain = new _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_14__[\"default\"]();\n            // setup renderPasses and rootGroup\n            let renderPasses;\n            let rootGroup;\n            const modelConverter = _ModelConverter__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInstance();\n            const existOutline = this.__existOutlineMaterial(gltfModel.extensions.VRM);\n            if (!existOutline) {\n                rootGroup = modelConverter.convertToRhodoniteObject(gltfModel);\n                renderPasses = [renderPassMain];\n            }\n            else {\n                const renderPassOutline = new _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_14__[\"default\"]();\n                renderPassOutline.toClearColorBuffer = false;\n                renderPassOutline.toClearDepthBuffer = false;\n                gltfModel.extensions.VRM.rnExtension.renderPassOutline = renderPassOutline;\n                rootGroup = modelConverter.convertToRhodoniteObject(gltfModel);\n                renderPassOutline.addEntities([rootGroup]);\n                renderPasses = [renderPassMain, renderPassOutline];\n            }\n            renderPassMain.addEntities([rootGroup]);\n            this.readSpringBone(rootGroup, gltfModel);\n            this.readVRMHumanoidInfo(rootGroup, gltfModel);\n            return renderPasses;\n        });\n    }\n    __getOptions(options) {\n        if (options != null) {\n            for (let file in options.files) {\n                const fileName = file.split('.vrm')[0];\n                if (fileName) {\n                    const arraybuffer = options.files[file];\n                    options.files[fileName + '.glb'] = arraybuffer;\n                    delete options.files[file];\n                }\n            }\n            //set default values\n            options.isImportVRM = true;\n            if (options.defaultMaterialHelperArgumentArray == null) {\n                options.defaultMaterialHelperArgumentArray = [{}];\n            }\n            if (options.defaultMaterialHelperArgumentArray[0].isLighting == null) {\n                options.defaultMaterialHelperArgumentArray[0].isLighting = true;\n            }\n            if (options.defaultMaterialHelperArgumentArray[0].isMorphing == null) {\n                options.defaultMaterialHelperArgumentArray[0].isMorphing = true;\n            }\n            if (options.defaultMaterialHelperArgumentArray[0].isSkinning == null) {\n                options.defaultMaterialHelperArgumentArray[0].isSkinning = true;\n            }\n            if (options.defaultMaterialHelperArgumentArray[0].isMorphing === false) {\n                options.maxMorphTargetNumber = 0;\n            }\n        }\n        else {\n            options = {\n                files: {},\n                loaderExtension: null,\n                defaultMaterialHelperName: null,\n                defaultMaterialHelperArgumentArray: [{ isLighting: true, isMorphing: true, isSkinning: true }],\n                statesOfElements: [\n                    {\n                        targets: [],\n                        states: {\n                            enable: [],\n                            functions: {}\n                        },\n                        isTransparent: true,\n                        opacity: 1.0,\n                        isTextureImageToLoadPreMultipliedAlpha: false,\n                    }\n                ],\n                isImportVRM: true,\n            };\n        }\n        return options;\n    }\n    readVRMHumanoidInfo(rootEntity, gltfModel) {\n        const humanBones = gltfModel.extensions.VRM.humanoid.humanBones;\n        const mapNameNodeId = new Map();\n        for (let bone of humanBones) {\n            mapNameNodeId.set(bone.bone, bone.node);\n        }\n        rootEntity.tryToSetTag({\n            tag: 'humanoid_map_name_nodeId',\n            value: mapNameNodeId\n        });\n    }\n    readSpringBone(rootEntity, gltfModel) {\n        const entityRepository = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        const boneGroups = [];\n        for (let boneGroup of gltfModel.extensions.VRM.secondaryAnimation.boneGroups) {\n            const vrmSpringBoneGroup = new _physics_VRMSpringBoneGroup__WEBPACK_IMPORTED_MODULE_9__[\"default\"]();\n            vrmSpringBoneGroup.tryToSetUniqueName(boneGroup.comment, true);\n            vrmSpringBoneGroup.dragForce = boneGroup.dragForce;\n            vrmSpringBoneGroup.stiffnessForce = boneGroup.stiffiness;\n            vrmSpringBoneGroup.gravityPower = boneGroup.gravityPower;\n            vrmSpringBoneGroup.gravityDir = new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](boneGroup.gravityDir.x, boneGroup.gravityDir.y, boneGroup.gravityDir.z);\n            vrmSpringBoneGroup.colliderGroupIndices = boneGroup.colliderGroups;\n            vrmSpringBoneGroup.hitRadius = boneGroup.hitRadius;\n            for (let idxOfArray in boneGroup.bones) {\n                const boneNodeIndex = boneGroup.bones[idxOfArray];\n                const entity = gltfModel.asset.extras.rnEntities[boneNodeIndex];\n                vrmSpringBoneGroup.rootBones.push(entity.getSceneGraph());\n                // const boneNodeIndex = boneGroup.bones[idxOfArray];\n                // const entity = gltfModel.asset.extras!.rnEntities![boneNodeIndex];\n                // entityRepository.addComponentsToEntity([PhysicsComponent], entity.entityUID);\n            }\n            boneGroups.push(vrmSpringBoneGroup);\n        }\n        _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_10__[\"default\"].setBoneGroups(boneGroups);\n        for (let boneGroup of boneGroups) {\n            for (let sg of boneGroup.rootBones) {\n                this.addPhysicsComponentRecursively(entityRepository, sg);\n            }\n        }\n        const colliderGroups = [];\n        for (let colliderGroupIdx in gltfModel.extensions.VRM.secondaryAnimation.colliderGroups) {\n            const colliderGroup = gltfModel.extensions.VRM.secondaryAnimation.colliderGroups[colliderGroupIdx];\n            const vrmColliderGroup = new _physics_VRMColliderGroup__WEBPACK_IMPORTED_MODULE_8__[\"default\"]();\n            colliderGroups.push(vrmColliderGroup);\n            const colliders = [];\n            for (let collider of colliderGroup.colliders) {\n                const sphereCollider = new _physics_SphereCollider__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n                sphereCollider.position = new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](collider.offset.x, collider.offset.y, collider.offset.z);\n                sphereCollider.radius = collider.radius;\n                colliders.push(sphereCollider);\n            }\n            vrmColliderGroup.colliders = colliders;\n            const baseSg = gltfModel.asset.extras.rnEntities[colliderGroup.node].getSceneGraph();\n            vrmColliderGroup.baseSceneGraph = baseSg;\n            _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_10__[\"default\"].addColliderGroup(parseInt(colliderGroupIdx), vrmColliderGroup);\n        }\n    }\n    addPhysicsComponentRecursively(entityRepository, sg) {\n        const entity = sg.entity;\n        entityRepository.addComponentsToEntity([_components_PhysicsComponent__WEBPACK_IMPORTED_MODULE_4__[\"default\"]], entity.entityUID);\n        _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_10__[\"default\"].initialize(sg);\n        if (sg.children.length > 0) {\n            for (let child of sg.children) {\n                this.addPhysicsComponentRecursively(entityRepository, child);\n            }\n        }\n    }\n    __createTextures(gltfModel) {\n        if (!gltfModel.textures)\n            gltfModel.textures = [];\n        const gltfTextures = gltfModel.textures;\n        const rnTextures = [];\n        for (let i = 0; i < gltfTextures.length; i++) {\n            const rnTexture = _ModelConverter__WEBPACK_IMPORTED_MODULE_3__[\"default\"]._createTexture({ texture: gltfTextures[i] }, gltfModel);\n            rnTextures[i] = rnTexture;\n        }\n        const dummyWhiteTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_6__[\"default\"]();\n        dummyWhiteTexture.generate1x1TextureFrom();\n        rnTextures.push(dummyWhiteTexture);\n        const dummyBlackTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_6__[\"default\"]();\n        dummyBlackTexture.generate1x1TextureFrom(\"rgba(0, 0, 0, 1)\");\n        rnTextures.push(dummyBlackTexture);\n        return rnTextures;\n    }\n    __existOutlineMaterial(extensionsVRM) {\n        const materialProperties = extensionsVRM.materialProperties;\n        if (materialProperties != null) {\n            for (let materialProperty of materialProperties) {\n                if (materialProperty.floatProperties._OutlineWidthMode !== 0) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    __initializeMaterialProperties(gltfModel, texturesLength) {\n        const materialProperties = gltfModel.extensions.VRM.materialProperties;\n        for (let materialProperty of materialProperties) {\n            if (materialProperty.shader === \"VRM/MToon\") {\n                this.__initializeMToonMaterialProperties(gltfModel, texturesLength);\n                break;\n            }\n        }\n    }\n    __initializeMToonMaterialProperties(gltfModel, texturesLength) {\n        const materialProperties = gltfModel.extensions.VRM.materialProperties;\n        const dummyWhiteTextureNumber = texturesLength - 2;\n        const dummyBlackTextureNumber = texturesLength - 1;\n        for (let i = 0; i < materialProperties.length; i++) {\n            const floatProperties = materialProperties[i].floatProperties;\n            this.__initializeForUndefinedProperty(floatProperties, \"_BlendMode\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_BumpScale\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_CullMode\", 2.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_Cutoff\", 0.5);\n            this.__initializeForUndefinedProperty(floatProperties, \"_DebugMode\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_DstBlend\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_IndirectLightIntensity\", 0.1);\n            this.__initializeForUndefinedProperty(floatProperties, \"_LightColorAttenuation\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_OutlineColorMode\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_OutlineCullMode\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_OutlineLightingMix\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_OutlineScaledMaxDistance\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_OutlineWidth\", 0.5);\n            this.__initializeForUndefinedProperty(floatProperties, \"_OutlineWidthMode\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_ReceiveShadowRate\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_RimFresnelPower\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_RimLift\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_RimLightingMix\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_ShadeShift\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_ShadeToony\", 0.9);\n            this.__initializeForUndefinedProperty(floatProperties, \"_ShadingGradeRate\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_SrcBlend\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_ZWrite\", 1.0);\n            // this.__initializeForUndefinedProperty(floatProperties,\"_UvAnimScrollX\", 0.0);\n            // this.__initializeForUndefinedProperty(floatProperties,\"_UvAnimScrollY\", 0.0);\n            // this.__initializeForUndefinedProperty(floatProperties,\"_UvAnimRotation\", 0.0);\n            const vectorProperties = materialProperties[i].vectorProperties;\n            this.__initializeForUndefinedProperty(vectorProperties, \"_Color\", [1, 1, 1, 1]);\n            this.__initializeForUndefinedProperty(vectorProperties, \"_EmissionColor\", [0, 0, 0]);\n            this.__initializeForUndefinedProperty(vectorProperties, \"_OutlineColor\", [0, 0, 0, 1]);\n            this.__initializeForUndefinedProperty(vectorProperties, \"_ShadeColor\", [0.97, 0.81, 0.86, 1]);\n            this.__initializeForUndefinedProperty(vectorProperties, \"_RimColor\", [0, 0, 0]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_BumpMap\", [0, 0, 1, 1]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_EmissionMap\", [0, 0, 1, 1]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_MainTex\", [0, 0, 1, 1]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_OutlineWidthTexture\", [0, 0, 1, 1]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_ReceiveShadowTexture\", [0, 0, 1, 1]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_ShadeTexture\", [0, 0, 1, 1]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_ShadingGradeTexture\", [0, 0, 1, 1]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_SphereAdd\", [0, 0, 1, 1]);\n            // set num of texture array\n            const textureProperties = materialProperties[i].textureProperties;\n            this.__initializeForUndefinedProperty(textureProperties, \"_BumpMap\", dummyWhiteTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_EmissionMap\", dummyBlackTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_MainTex\", dummyWhiteTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_OutlineWidthTexture\", dummyWhiteTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_ReceiveShadowTexture\", dummyWhiteTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_RimTexture\", dummyBlackTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_ShadeTexture\", dummyWhiteTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_ShadingGradeTexture\", dummyWhiteTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_SphereAdd\", dummyBlackTextureNumber);\n            // this.__initializeForUndefinedProperty(textureProperties, \"_UvAnimMaskTexture\", dummyWhiteTextureNumber);\n        }\n    }\n    __initializeForUndefinedProperty(object, propertyName, initialValue) {\n        if (object[propertyName] == null)\n            object[propertyName] = initialValue;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/importer/GltfImporter.ts?");

/***/ }),

/***/ "./src/foundation/importer/ModelConverter.ts":
/*!***************************************************!*\
  !*** ./src/foundation/importer/ModelConverter.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ModelConverter; });\n/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _components_TransformComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/TransformComponent */ \"./src/foundation/components/TransformComponent.ts\");\n/* harmony import */ var _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _components_MeshComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_Quaternion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/MeshRendererComponent */ \"./src/foundation/components/MeshRendererComponent.ts\");\n/* harmony import */ var _geometry_Primitive__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../geometry/Primitive */ \"./src/foundation/geometry/Primitive.ts\");\n/* harmony import */ var _memory_Buffer__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../memory/Buffer */ \"./src/foundation/memory/Buffer.ts\");\n/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ \"./src/foundation/definitions/PrimitiveMode.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _definitions_CameraType__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../definitions/CameraType */ \"./src/foundation/definitions/CameraType.ts\");\n/* harmony import */ var _textures_Texture__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../textures/Texture */ \"./src/foundation/textures/Texture.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _components_AnimationComponent__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../components/AnimationComponent */ \"./src/foundation/components/AnimationComponent.ts\");\n/* harmony import */ var _definitions_Animation__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../definitions/Animation */ \"./src/foundation/definitions/Animation.ts\");\n/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../math/MathUtil */ \"./src/foundation/math/MathUtil.ts\");\n/* harmony import */ var _components_SkeletalComponent__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../components/SkeletalComponent */ \"./src/foundation/components/SkeletalComponent.ts\");\n/* harmony import */ var _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../definitions/AlphaMode */ \"./src/foundation/definitions/AlphaMode.ts\");\n/* harmony import */ var _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../helpers/MaterialHelper */ \"./src/foundation/helpers/MaterialHelper.ts\");\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../math/Vector2 */ \"./src/foundation/math/Vector2.ts\");\n/* harmony import */ var _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../definitions/ShadingModel */ \"./src/foundation/definitions/ShadingModel.ts\");\n/* harmony import */ var _geometry_Mesh__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../geometry/Mesh */ \"./src/foundation/geometry/Mesh.ts\");\n/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../math/MutableVector4 */ \"./src/foundation/math/MutableVector4.ts\");\n/* harmony import */ var _components_LightComponent__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../components/LightComponent */ \"./src/foundation/components/LightComponent.ts\");\n/* harmony import */ var _definitions_LightType__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../definitions/LightType */ \"./src/foundation/definitions/LightType.ts\");\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _components_BlendShapeComponent__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../components/BlendShapeComponent */ \"./src/foundation/components/BlendShapeComponent.ts\");\n/* harmony import */ var _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../core/GlobalDataRepository */ \"./src/foundation/core/GlobalDataRepository.ts\");\n/* harmony import */ var _materials_PbrShadingMaterialNode__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../materials/PbrShadingMaterialNode */ \"./src/foundation/materials/PbrShadingMaterialNode.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A converter class from glTF2 model to Rhodonite Native data\n */\nclass ModelConverter {\n    constructor() {\n    }\n    /**\n     * The static method to get singleton instance of this class.\n     * @return The singleton instance of ModelConverter class\n     */\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new ModelConverter();\n        }\n        return this.__instance;\n    }\n    _getDefaultShader(options) {\n        let defaultShader = null;\n        // if (options && typeof options.defaultShaderClass !== \"undefined\") {\n        //   if (typeof options.defaultShaderClass === \"string\") {\n        //     defaultShader = GLBoost[options.defaultShaderClass];\n        //   } else {\n        //     defaultShader = options.defaultShaderClass;\n        //   }\n        // }\n        return defaultShader;\n    }\n    __generateEntity(components, gltfModel) {\n        const repo = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        const entity = repo.createEntity(components);\n        entity.tryToSetTag({ tag: 'SourceType', value: gltfModel.asset.extras.fileType });\n        entity.tryToSetTag({ tag: 'SourceTypeVersion', value: gltfModel.asset.extras.version });\n        return entity;\n    }\n    __generateGroupEntity(gltfModel) {\n        const entity = this.__generateEntity([_components_TransformComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]], gltfModel);\n        return entity;\n    }\n    __generateMeshEntity(gltfModel) {\n        const entity = this.__generateEntity([_components_TransformComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"], _components_MeshComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"]], gltfModel);\n        return entity;\n    }\n    __generateCameraEntity(gltfModel) {\n        const entity = this.__generateEntity([_components_TransformComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_14__[\"default\"]], gltfModel);\n        return entity;\n    }\n    __generateLightEntity(gltfModel) {\n        const entity = this.__generateEntity([_components_TransformComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"], _components_LightComponent__WEBPACK_IMPORTED_MODULE_29__[\"default\"]], gltfModel);\n        return entity;\n    }\n    convertToRhodoniteObject(gltfModel) {\n        gltfModel.asset.extras.rnMeshesAtGltMeshIdx = [];\n        const rnBuffers = this.createRnBuffer(gltfModel);\n        // Mesh, Camera, Group, ...\n        const { rnEntities, rnEntitiesByNames } = this.__setupObjects(gltfModel, rnBuffers);\n        gltfModel.asset.extras.rnEntities = rnEntities;\n        // Transfrom\n        this._setupTransform(gltfModel, rnEntities);\n        // Skeleton\n        this._setupSkeleton(gltfModel, rnEntities);\n        // Hierarchy\n        this._setupHierarchy(gltfModel, rnEntities);\n        // Camera\n        //this._setupCamera(gltfModel, groups);\n        // Animation\n        this._setupAnimation(gltfModel, rnEntities);\n        // Root Group\n        const rootGroup = this.__generateGroupEntity(gltfModel);\n        rootGroup.tryToSetUniqueName('FileRoot', true);\n        rootGroup.tryToSetTag({ tag: 'ObjectType', value: 'top' });\n        if (gltfModel.scenes[0].nodesIndices) {\n            for (let nodesIndex of gltfModel.scenes[0].nodesIndices) {\n                rootGroup.getSceneGraph().addChild(rnEntities[nodesIndex].getSceneGraph());\n            }\n        }\n        rootGroup.tryToSetTag({ tag: 'rnEntities', value: rnEntities });\n        rootGroup.tryToSetTag({ tag: 'rnEntitiesByNames', value: rnEntitiesByNames });\n        rootGroup.tryToSetTag({ tag: 'gltfModel', value: gltfModel });\n        return rootGroup;\n    }\n    _setupCamera(gltfModel) {\n    }\n    createRnBuffer(gltfModel) {\n        const rnBuffers = [];\n        for (let buffer of gltfModel.buffers) {\n            const rnBuffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n                byteLength: buffer.byteLength,\n                buffer: buffer.buffer,\n                name: `gltf2Buffer_0_(${buffer.uri})`\n            });\n            rnBuffers.push(rnBuffer);\n        }\n        return rnBuffers;\n    }\n    _setupTransform(gltfModel, groups) {\n        for (let node_i in gltfModel.nodes) {\n            let group = groups[node_i];\n            let nodeJson = gltfModel.nodes[node_i];\n            if (nodeJson.translation) {\n                group.getTransform().translate = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](nodeJson.translation[0], nodeJson.translation[1], nodeJson.translation[2]);\n            }\n            if (nodeJson.scale) {\n                group.getTransform().scale = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](nodeJson.scale[0], nodeJson.scale[1], nodeJson.scale[2]);\n            }\n            if (nodeJson.rotation) {\n                group.getTransform().quaternion = new _math_Quaternion__WEBPACK_IMPORTED_MODULE_5__[\"default\"](nodeJson.rotation[0], nodeJson.rotation[1], nodeJson.rotation[2], nodeJson.rotation[3]);\n            }\n            if (nodeJson.matrix) {\n                group.getTransform().matrix = new _math_Matrix44__WEBPACK_IMPORTED_MODULE_6__[\"default\"](nodeJson.matrix, true);\n            }\n        }\n    }\n    _setupHierarchy(gltfModel, rnEntities) {\n        const groupSceneComponents = rnEntities.map(group => { return group.getSceneGraph(); });\n        for (let node_i in gltfModel.nodes) {\n            const parentNode_i = parseInt(node_i);\n            let node = gltfModel.nodes[parentNode_i];\n            if (node.childrenIndices) {\n                let parentGroup = groupSceneComponents[parentNode_i];\n                for (let childNode_i of node.childrenIndices) {\n                    let childGroup = groupSceneComponents[childNode_i];\n                    parentGroup.addChild(childGroup);\n                }\n            }\n        }\n    }\n    /**\n     * @private\n     */\n    _setupAnimation(gltfModel, rnEntities) {\n        if (gltfModel.animations) {\n            for (let animation of gltfModel.animations) {\n                for (let sampler of animation.samplers) {\n                    this._accessBinaryWithAccessor(sampler.input);\n                    this._accessBinaryWithAccessor(sampler.output);\n                }\n            }\n        }\n        const entityRepository = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        if (gltfModel.animations) {\n            for (let animation of gltfModel.animations) {\n                for (let channel of animation.channels) {\n                    const animInputArray = channel.sampler.input.extras.typedDataArray;\n                    const animOutputArray = channel.sampler.output.extras.typedDataArray;\n                    const interpolation = (channel.sampler.interpolation != null) ? channel.sampler.interpolation : 'LINEAR';\n                    let animationAttributeName = '';\n                    if (channel.target.path === 'translation') {\n                        animationAttributeName = 'translate';\n                    }\n                    else if (channel.target.path === 'rotation') {\n                        animationAttributeName = 'quaternion';\n                    }\n                    else {\n                        animationAttributeName = channel.target.path;\n                    }\n                    let rnEntity = rnEntities[channel.target.nodeIndex];\n                    if (rnEntity) {\n                        entityRepository.addComponentsToEntity([_components_AnimationComponent__WEBPACK_IMPORTED_MODULE_18__[\"default\"]], rnEntity.entityUID);\n                        const animationComponent = rnEntity.getComponent(_components_AnimationComponent__WEBPACK_IMPORTED_MODULE_18__[\"default\"]);\n                        if (animationComponent) {\n                            animationComponent.setAnimation(animationAttributeName, animInputArray, animOutputArray, _definitions_Animation__WEBPACK_IMPORTED_MODULE_19__[\"Animation\"].fromString(interpolation));\n                        }\n                    }\n                }\n            }\n        }\n    }\n    _setupSkeleton(gltfModel, rnEntities) {\n        if (gltfModel.skins == null) {\n            return;\n        }\n        const globalDataRepository = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_35__[\"default\"].getInstance();\n        const entityRepository = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        for (let skin of gltfModel.skins) {\n            // globalDataRepository.takeOne(ShaderSemantics.BoneQuaternion);\n            // globalDataRepository.takeOne(ShaderSemantics.BoneTranslateScale);\n            if (skin.inverseBindMatrices) {\n                this._accessBinaryWithAccessor(skin.inverseBindMatrices);\n            }\n        }\n        for (let node_i in gltfModel.nodes) {\n            let node = gltfModel.nodes[node_i];\n            let sg = rnEntities[node_i].getSceneGraph();\n            let skeletalComponent;\n            if (node.skin != null) {\n                let rnEntity = rnEntities[node_i];\n                entityRepository.addComponentsToEntity([_components_SkeletalComponent__WEBPACK_IMPORTED_MODULE_21__[\"default\"]], rnEntity.entityUID);\n                skeletalComponent = rnEntity.getComponent(_components_SkeletalComponent__WEBPACK_IMPORTED_MODULE_21__[\"default\"]);\n                //        skeletalComponent.isSkinning = false;\n                skeletalComponent._jointIndices = node.skin.jointsIndices;\n                if (node.skin.bindShapeMatrix != null) {\n                    skeletalComponent._bindShapeMatrix = new _math_Matrix44__WEBPACK_IMPORTED_MODULE_6__[\"default\"](node.skin.bindShapeMatrix);\n                }\n            }\n            if (node.skin && node.skin.skeleton) {\n                sg.isRootJoint = true;\n                // if (node.meshes) {\n                //   // let rnEntity = rnEntities[node_i];\n                //   // entityRepository\n                //   // for (let mesh of node.meshes) {\n                //   //   mesh\n                //   //   const entity = this.__generateMeshEntity() {\n                //   //   }\n                //   // }\n                //   // skeletalComponent!.jointsHierarchy = rnEntities[node.skin.skeletonIndex].getSceneGraph();\n                // } else \n                if (node.mesh) {\n                    const joints = [];\n                    for (let i of node.skin.jointsIndices) {\n                        joints.push(rnEntities[i].getSceneGraph());\n                    }\n                    skeletalComponent.joints = joints;\n                    //skeletalComponent!.jointsHierarchy = rnEntities[node.skin.skeletonIndex].getSceneGraph();\n                }\n            }\n            if (node.skin && node.skin.joints) {\n                for (let joint_i of node.skin.jointsIndices) {\n                    let sg = rnEntities[joint_i].getSceneGraph();\n                    sg.jointIndex = joint_i;\n                }\n            }\n            if (node.skin && node.skin.inverseBindMatrices != null) {\n                skeletalComponent._inverseBindMatrices = node.skin.inverseBindMatrices.extras.typedDataArray;\n            }\n        }\n    }\n    __setupObjects(gltfModel, rnBuffers) {\n        const rnEntities = [];\n        const rnEntitiesByNames = new Map();\n        for (let node_i in gltfModel.nodes) {\n            let node = gltfModel.nodes[parseInt(node_i)];\n            let entity;\n            if (node.mesh != null) {\n                let meshIdxOrName = node.meshIndex;\n                if (meshIdxOrName == null) {\n                    meshIdxOrName = node.meshNames[0];\n                }\n                const meshEntity = this.__setupMesh(node, node.mesh, meshIdxOrName, rnBuffers, gltfModel);\n                if (node.name) {\n                    meshEntity.tryToSetUniqueName(node.name, true);\n                }\n                if (node.mesh.name) {\n                    const meshComponent = meshEntity.getComponent(_components_MeshComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\n                    meshComponent.tryToSetUniqueName(node.mesh.name, true);\n                }\n                entity = meshEntity;\n            }\n            else if (node.camera != null) {\n                const cameraEntity = this.__setupCamera(node.camera, gltfModel);\n                if (node.name) {\n                    cameraEntity.tryToSetUniqueName(node.name, true);\n                }\n                entity = cameraEntity;\n            }\n            else if (node.extensions && node.extensions.KHR_lights_punctual) {\n                const lightEntity = this.__setupLight(node.extensions.KHR_lights_punctual.light, gltfModel);\n                entity = lightEntity;\n            }\n            else {\n                const group = this.__generateGroupEntity(gltfModel);\n                if (node.name) {\n                    group.tryToSetUniqueName(node.name, true);\n                }\n                entity = group;\n            }\n            entity.tryToSetTag({ tag: 'gltf_node_index', value: '' + node_i });\n            rnEntities.push(entity);\n            rnEntitiesByNames.set(node.name, entity);\n            if (this.__hasBlendShapes(node)) {\n                let weights;\n                if (node.weights) {\n                    weights = node.weights;\n                }\n                else if (node.mesh.weights) {\n                    weights = node.mesh.weights;\n                }\n                else {\n                    weights = new Array(node.mesh.primitives[0].targets.length);\n                    for (let i = 0; i < weights.length; i++) {\n                        weights[i] = 0;\n                    }\n                }\n                const entityRepository = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n                entityRepository.addComponentsToEntity([_components_BlendShapeComponent__WEBPACK_IMPORTED_MODULE_34__[\"default\"]], entity.entityUID);\n                const blendShapeComponent = entity.getComponent(_components_BlendShapeComponent__WEBPACK_IMPORTED_MODULE_34__[\"default\"]);\n                blendShapeComponent.weights = weights;\n                if (node.mesh.primitives[0].extras && node.mesh.primitives[0].extras.targetNames) {\n                    blendShapeComponent.targetNames = node.mesh.primitives[0].extras.targetNames;\n                }\n            }\n        }\n        return { rnEntities, rnEntitiesByNames };\n    }\n    __hasBlendShapes(node) {\n        return node.mesh != null && node.mesh.primitives[0].targets != null;\n    }\n    __setupLight(light, gltfModel) {\n        const lightEntity = this.__generateLightEntity(gltfModel);\n        const lightComponent = lightEntity.getComponent(_components_LightComponent__WEBPACK_IMPORTED_MODULE_29__[\"default\"]);\n        if (light.name != null) {\n            lightComponent.tryToSetUniqueName(light.name, true);\n            lightComponent.type = _definitions_LightType__WEBPACK_IMPORTED_MODULE_30__[\"LightType\"].fromString(light.type);\n            let color = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](1, 1, 1);\n            let intensity = 1;\n            if (light.color != null) {\n                color = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](light.color);\n            }\n            if (light.intensity != null) {\n                intensity = light.intensity;\n            }\n            lightComponent.intensity = _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].multiply(color, intensity);\n            if (light.range != null) {\n                lightComponent.range = light.range;\n            }\n        }\n        return lightEntity;\n    }\n    __setupCamera(camera, gltfModel) {\n        const cameraEntity = this.__generateCameraEntity(gltfModel);\n        const cameraComponent = cameraEntity.getComponent(_components_CameraComponent__WEBPACK_IMPORTED_MODULE_14__[\"default\"]);\n        cameraComponent.direction = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 0, -1);\n        if (gltfModel.asset && gltfModel.asset.LastSaved_ApplicationVendor) {\n            // For an old exporter compatibility\n            cameraComponent.direction = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](1, 0, 0);\n            cameraComponent.directionInner = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](1, 0, 0);\n        }\n        cameraComponent.up = new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0, 1, 0);\n        cameraComponent.type = _definitions_CameraType__WEBPACK_IMPORTED_MODULE_15__[\"CameraType\"].fromString(camera.type);\n        if (cameraComponent.type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_15__[\"CameraType\"].Perspective) {\n            cameraComponent.aspect = camera.perspective.aspectRatio ? camera.perspective.aspectRatio : 1;\n            cameraComponent.setFovyAndChangeFocalLength(_math_MathUtil__WEBPACK_IMPORTED_MODULE_20__[\"MathUtil\"].radianToDegree(camera.perspective.yfov));\n            cameraComponent.zNear = camera.perspective.znear;\n            cameraComponent.zFar = camera.perspective.zfar ? camera.perspective.zfar : 100000;\n        }\n        else if (cameraComponent.type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_15__[\"CameraType\"].Orthographic) {\n            cameraComponent.xMag = camera.orthographic.zmag;\n            cameraComponent.yMag = camera.orthographic.ymag;\n            cameraComponent.zNear = camera.orthographic.znear;\n            cameraComponent.zFar = camera.orthographic.zfar;\n        }\n        return cameraEntity;\n    }\n    __setupMesh(node, mesh, meshIndex, rnBuffers, gltfModel) {\n        const meshEntity = this.__generateMeshEntity(gltfModel);\n        const existingRnMesh = gltfModel.asset.extras.rnMeshesAtGltMeshIdx[meshIndex];\n        let rnPrimitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_10__[\"PrimitiveMode\"].Triangles;\n        const meshComponent = meshEntity.getMesh();\n        const rnMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_27__[\"default\"]();\n        const rnLoaderOptions = gltfModel.asset.extras.rnLoaderOptions;\n        if (rnLoaderOptions && rnLoaderOptions.tangentCalculationMode != null) {\n            rnMesh.tangentCalculationMode = rnLoaderOptions.tangentCalculationMode;\n        }\n        if (rnLoaderOptions && rnLoaderOptions.isPrecomputeForRayCastPickingEnable != null) {\n            rnMesh.isPrecomputeForRayCastPickingEnable = rnLoaderOptions.isPrecomputeForRayCastPickingEnable;\n        }\n        let originalRnMesh = rnMesh;\n        if (existingRnMesh != null) {\n            rnMesh.setMesh(existingRnMesh);\n            originalRnMesh = existingRnMesh;\n        }\n        else {\n            for (let i in mesh.primitives) {\n                let primitive = mesh.primitives[i];\n                if (primitive.mode != null) {\n                    rnPrimitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_10__[\"PrimitiveMode\"].from(primitive.mode);\n                }\n                const rnPrimitive = new _geometry_Primitive__WEBPACK_IMPORTED_MODULE_8__[\"default\"]();\n                const material = this.__setupMaterial(rnPrimitive, node, gltfModel, primitive, primitive.material);\n                if (material.isEmptyMaterial() === false) {\n                    ModelConverter.setDefaultTextures(material, gltfModel);\n                }\n                // indices\n                let indicesRnAccessor;\n                const map = new Map();\n                if (primitive.extensions && primitive.extensions.KHR_draco_mesh_compression) {\n                    indicesRnAccessor = this.__decodeDraco(primitive, rnBuffers, gltfModel, map);\n                    if (indicesRnAccessor == null) {\n                        break;\n                    }\n                }\n                else {\n                    // attributes\n                    if (primitive.indices) {\n                        indicesRnAccessor = this.__getRnAccessor(primitive.indices, rnBuffers[primitive.indices.bufferView.bufferIndex]);\n                    }\n                    for (let attributeName in primitive.attributes) {\n                        let attributeAccessor = primitive.attributes[attributeName];\n                        const attributeRnAccessor = this.__getRnAccessor(attributeAccessor, rnBuffers[attributeAccessor.bufferView.bufferIndex]);\n                        map.set(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_13__[\"VertexAttribute\"].fromString(attributeAccessor.extras.attributeName), attributeRnAccessor);\n                    }\n                }\n                rnPrimitive.setData(map, rnPrimitiveMode, material, indicesRnAccessor);\n                // morph targets\n                if (primitive.targets != null) {\n                    // set default number\n                    let maxMorphTargetNumber = 4;\n                    if (rnLoaderOptions != null && rnLoaderOptions.maxMorphTargetNumber != null) {\n                        maxMorphTargetNumber = rnLoaderOptions.maxMorphTargetNumber;\n                    }\n                    const targets = [];\n                    for (let i = 0; i < primitive.targets.length; i++) {\n                        if (i >= maxMorphTargetNumber) {\n                            break;\n                        }\n                        const target = primitive.targets[i];\n                        const targetMap = new Map();\n                        for (let attributeName in target) {\n                            let attributeAccessor = target[attributeName];\n                            const attributeRnAccessor = this.__getRnAccessor(attributeAccessor, rnBuffers[attributeAccessor.bufferView.bufferIndex]);\n                            const attributeRnAccessorInGPUInstanceData = this.__copyRnAccessorAndBufferView(attributeRnAccessor, primitive);\n                            targetMap.set(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_13__[\"VertexAttribute\"].fromString(attributeName), attributeRnAccessorInGPUInstanceData);\n                        }\n                        targets.push(targetMap);\n                    }\n                    rnPrimitive.setTargets(targets);\n                }\n                rnMesh.addPrimitive(rnPrimitive);\n            }\n            if (mesh.weights) {\n                rnMesh.weights = mesh.weights;\n            }\n        }\n        meshComponent.setMesh(rnMesh);\n        gltfModel.asset.extras.rnMeshesAtGltMeshIdx[meshIndex] = originalRnMesh;\n        return meshEntity;\n    }\n    static setDefaultTextures(material, gltfModel) {\n        if (gltfModel.asset.extras == null ||\n            gltfModel.asset.extras.rnLoaderOptions == null ||\n            gltfModel.asset.extras.rnLoaderOptions.defaultTextures == null) {\n            return;\n        }\n        const options = gltfModel.asset.extras.rnLoaderOptions;\n        const defaultTextures = gltfModel.asset.extras.rnLoaderOptions.defaultTextures;\n        const basePath = defaultTextures.basePath;\n        const textureInfos = defaultTextures.textureInfos;\n        for (let textureInfo of textureInfos) {\n            const rnTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_16__[\"default\"]();\n            //options\n            rnTexture.autoDetectTransparency = options.autoDetectTextureTransparency === true;\n            rnTexture.autoResize = options.autoResizeTexture === true;\n            const fileName = textureInfo.fileName;\n            const uri = basePath + fileName;\n            rnTexture.name = uri;\n            const image = textureInfo.image;\n            if (image && image.image) {\n                rnTexture.generateTextureFromImage(image.image);\n            }\n            else {\n                console.warn(\"default image not found\");\n                continue;\n            }\n            const shaderSemantics = textureInfo.shaderSemantics;\n            material.setTextureParameter(shaderSemantics, rnTexture);\n        }\n    }\n    __setVRMMaterial(rnPrimitive, node, gltfModel, primitive, argumentArray) {\n        const VRMProperties = gltfModel.extensions.VRM;\n        const shaderName = VRMProperties.materialProperties[primitive.materialIndex].shader;\n        if (shaderName === \"VRM/MToon\") {\n            // argument\n            const argumentOfMaterialHelper = argumentArray[0];\n            const rnExtension = VRMProperties.rnExtension;\n            if (rnExtension && rnExtension.defaultMorphingIsTrue) {\n                argumentOfMaterialHelper.isMorphing = this.__hasBlendShapes(node);\n            }\n            if (rnExtension && rnExtension.defaultSkinningIsTrue) {\n                const existSkin = node.skin != null;\n                argumentOfMaterialHelper.isSkinning = existSkin;\n                argumentOfMaterialHelper.additionalName = existSkin ? \"skin${(node.skinIndex != null ? node.skinIndex : node.skinName)}\" : \"\";\n            }\n            const materialProperties = gltfModel.extensions.VRM.materialProperties[primitive.materialIndex];\n            argumentOfMaterialHelper.materialProperties = materialProperties;\n            // outline\n            let renderPassOutline;\n            if (rnExtension) {\n                renderPassOutline = rnExtension.renderPassOutline;\n            }\n            //exist outline\n            if (renderPassOutline != null) {\n                let outlineMaterial;\n                if (materialProperties.floatProperties._OutlineWidthMode !== 0) {\n                    argumentOfMaterialHelper.isOutline = true;\n                    outlineMaterial = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_23__[\"default\"].createMToonMaterial(argumentOfMaterialHelper);\n                    argumentOfMaterialHelper.isOutline = false;\n                }\n                else {\n                    outlineMaterial = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_23__[\"default\"].createEmptyMaterial();\n                }\n                renderPassOutline.setMaterialForPrimitive(outlineMaterial, rnPrimitive);\n            }\n            return _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_23__[\"default\"].createMToonMaterial(argumentOfMaterialHelper);\n        }\n        else if (argumentArray[0].isOutline) {\n            return _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_23__[\"default\"].createEmptyMaterial();\n            ;\n        }\n        // use another material\n        return undefined;\n    }\n    __generateAppropreateMaterial(rnPrimitive, node, gltfModel, primitive, materialJson) {\n        if (gltfModel.asset.extras != null && gltfModel.asset.extras.rnLoaderOptions != null) {\n            const rnLoaderOptions = gltfModel.asset.extras.rnLoaderOptions;\n            if (rnLoaderOptions.loaderExtension &&\n                rnLoaderOptions.loaderExtension.isNeededToUseThisMaterial(gltfModel)) {\n                const loaderExtension = gltfModel.asset.extras.rnLoaderOptions.loaderExtension;\n                return loaderExtension.generateMaterial();\n            }\n            const argumentArray = rnLoaderOptions.defaultMaterialHelperArgumentArray;\n            if (rnLoaderOptions.isImportVRM) {\n                const material = this.__setVRMMaterial(rnPrimitive, node, gltfModel, primitive, argumentArray);\n                if (material != null)\n                    return material;\n            }\n            const materialHelperName = rnLoaderOptions.defaultMaterialHelperName;\n            if (materialHelperName != null) {\n                return _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_23__[\"default\"][materialHelperName].apply(this, argumentArray);\n            }\n        }\n        let maxMaterialInstanceNumber = _core_Config__WEBPACK_IMPORTED_MODULE_31__[\"default\"].maxMaterialInstanceForEachType;\n        if (gltfModel.meshes.length > _core_Config__WEBPACK_IMPORTED_MODULE_31__[\"default\"].maxMaterialInstanceForEachType) {\n            maxMaterialInstanceNumber = gltfModel.meshes.length + _core_Config__WEBPACK_IMPORTED_MODULE_31__[\"default\"].maxMaterialInstanceForEachType / 2;\n        }\n        const isMorphing = this.__hasBlendShapes(node);\n        const isSkinning = (node.skin != null) ? true : false;\n        const additionalName = (node.skin != null) ? `skin${(node.skinIndex != null ? node.skinIndex : node.skinName)}` : void 0;\n        if (materialJson != null && materialJson.pbrMetallicRoughness) {\n            return _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_23__[\"default\"].createPbrUberMaterial({ isMorphing: isMorphing, isSkinning: isSkinning, isLighting: true, additionalName, maxInstancesNumber: maxMaterialInstanceNumber });\n        }\n        else {\n            return _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_23__[\"default\"].createClassicUberMaterial({ isSkinning: isSkinning, isLighting: true, additionalName, maxInstancesNumber: maxMaterialInstanceNumber });\n        }\n    }\n    __setupMaterial(rnPrimitive, node, gltfModel, primitive, materialJson) {\n        const material = this.__generateAppropreateMaterial(rnPrimitive, node, gltfModel, primitive, materialJson);\n        // avoid unexpected initialization\n        if (!this.__needParameterInitialization(materialJson, material.materialTypeName))\n            return material;\n        const pbrMetallicRoughness = materialJson.pbrMetallicRoughness;\n        if (pbrMetallicRoughness != null) {\n            const baseColorFactor = pbrMetallicRoughness.baseColorFactor;\n            if (baseColorFactor != null) {\n                material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].BaseColorFactor, new _math_Vector4__WEBPACK_IMPORTED_MODULE_17__[\"default\"](baseColorFactor));\n            }\n            const baseColorTexture = pbrMetallicRoughness.baseColorTexture;\n            if (baseColorTexture != null) {\n                const rnTexture = ModelConverter._createTexture(baseColorTexture, gltfModel);\n                material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].BaseColorTexture, rnTexture);\n            }\n            ModelConverter._setupTextureTransform(baseColorTexture, material, _materials_PbrShadingMaterialNode__WEBPACK_IMPORTED_MODULE_36__[\"default\"].baseColorTextureTransform, _materials_PbrShadingMaterialNode__WEBPACK_IMPORTED_MODULE_36__[\"default\"].baseColorTextureRotation);\n            const occlusionTexture = materialJson.occlusionTexture;\n            if (occlusionTexture != null) {\n                const rnTexture = ModelConverter._createTexture(occlusionTexture, gltfModel);\n                material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].OcclusionTexture, rnTexture);\n            }\n            let metallicFactor = pbrMetallicRoughness.metallicFactor;\n            metallicFactor = (metallicFactor != null) ? metallicFactor : 1;\n            let roughnessFactor = pbrMetallicRoughness.roughnessFactor;\n            roughnessFactor = (roughnessFactor != null) ? roughnessFactor : 1;\n            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].MetallicRoughnessFactor, new _math_Vector2__WEBPACK_IMPORTED_MODULE_25__[\"default\"](metallicFactor, roughnessFactor));\n            const metallicRoughnessTexture = pbrMetallicRoughness.metallicRoughnessTexture;\n            if (metallicRoughnessTexture != null) {\n                const rnTexture = ModelConverter._createTexture(metallicRoughnessTexture, gltfModel);\n                material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].MetallicRoughnessTexture, rnTexture);\n            }\n            ModelConverter._setupTextureTransform(metallicRoughnessTexture, material, _materials_PbrShadingMaterialNode__WEBPACK_IMPORTED_MODULE_36__[\"default\"].metallicRoughnessTextureTransform, _materials_PbrShadingMaterialNode__WEBPACK_IMPORTED_MODULE_36__[\"default\"].metallicRoughnessTextureRotation);\n        }\n        else {\n            let param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].Phong.index;\n            if (materialJson.extras && materialJson.extras.technique) {\n                switch (materialJson.extras.technique) {\n                    case _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].Constant.str:\n                        param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].Constant.index;\n                        break;\n                    case _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].Lambert.str:\n                        param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].Lambert.index;\n                        break;\n                    case _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].BlinnPhong.str:\n                        param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].BlinnPhong.index;\n                        break;\n                    case _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].Phong.str:\n                        param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_26__[\"ShadingModel\"].Phong.index;\n                        break;\n                }\n                material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].ShadingModel, param);\n            }\n        }\n        const emissiveTexture = materialJson.emissiveTexture;\n        if (emissiveTexture != null) {\n            const rnTexture = ModelConverter._createTexture(emissiveTexture, gltfModel);\n            material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].EmissiveTexture, rnTexture);\n        }\n        const options = gltfModel.asset.extras.rnLoaderOptions;\n        let alphaMode = materialJson.alphaMode;\n        if (options != null && options.alphaMode) {\n            alphaMode = options.alphaMode;\n        }\n        if (alphaMode != null) {\n            material.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_22__[\"AlphaMode\"].fromString(alphaMode);\n        }\n        // For glTF1.0\n        const diffuseColorTexture = materialJson.diffuseColorTexture;\n        if (diffuseColorTexture != null) {\n            const rnTexture = ModelConverter._createTexture(diffuseColorTexture, gltfModel);\n            material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].DiffuseColorTexture, rnTexture);\n            if (this._checkRnGltfLoaderOptionsExist(gltfModel) && gltfModel.asset.extras.rnLoaderOptions.loaderExtension) {\n                const loaderExtension = gltfModel.asset.extras.rnLoaderOptions.loaderExtension;\n                if (loaderExtension.setUVTransformToTexture) {\n                    loaderExtension.setUVTransformToTexture(material, diffuseColorTexture.texture.sampler);\n                }\n            }\n        }\n        const diffuseColorFactor = materialJson.diffuseColorFactor;\n        if (diffuseColorFactor != null) {\n            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].DiffuseColorFactor, new _math_Vector4__WEBPACK_IMPORTED_MODULE_17__[\"default\"](diffuseColorFactor));\n        }\n        const normalTexture = materialJson.normalTexture;\n        if (normalTexture != null) {\n            const rnTexture = ModelConverter._createTexture(normalTexture, gltfModel);\n            material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_24__[\"ShaderSemantics\"].NormalTexture, rnTexture);\n        }\n        ModelConverter._setupTextureTransform(normalTexture, material, _materials_PbrShadingMaterialNode__WEBPACK_IMPORTED_MODULE_36__[\"default\"].normalTextureTransform, _materials_PbrShadingMaterialNode__WEBPACK_IMPORTED_MODULE_36__[\"default\"].normalTextureRotation);\n        // ModelConverter._setupTextureTransform(normalTexture, material, 'normalTextureTransform', 'normalTextureRotation')\n        // For Extension\n        if (this._checkRnGltfLoaderOptionsExist(gltfModel) && gltfModel.asset.extras.rnLoaderOptions.loaderExtension) {\n            const loaderExtension = gltfModel.asset.extras.rnLoaderOptions.loaderExtension;\n            loaderExtension.setupMaterial(gltfModel, materialJson, material);\n        }\n        return material;\n    }\n    static _createTexture(textureType, gltfModel) {\n        const options = (gltfModel.asset.extras) ? gltfModel.asset.extras.rnLoaderOptions : undefined;\n        const rnTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_16__[\"default\"]();\n        rnTexture.autoDetectTransparency = (options && options.autoDetectTextureTransparency === true) ? true : false;\n        rnTexture.autoResize = (options && options.autoResizeTexture === true) ? true : false;\n        const texture = textureType.texture;\n        if (texture.image.image) {\n            const image = texture.image.image;\n            rnTexture.generateTextureFromImage(image);\n            if (texture.image.uri) {\n                rnTexture.name = texture.image.url;\n            }\n            else {\n                const ext = texture.image.mimeType.split('/')[1];\n                rnTexture.name = texture.image.name + `.${ext}`;\n            }\n        }\n        return rnTexture;\n    }\n    __needParameterInitialization(materialJson, materialTypeName) {\n        if (materialJson == null)\n            return false;\n        if (materialTypeName.match(/PbrUber/) != null ||\n            materialTypeName.match(/ClassicUber/) != null) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    _checkRnGltfLoaderOptionsExist(gltfModel) {\n        if (gltfModel.asset.extras && gltfModel.asset.extras.rnLoaderOptions) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    _adjustByteAlign(typedArrayClass, uint8Array, alignSize, byteOffset, length) {\n        if ((byteOffset % alignSize) != 0) {\n            return new typedArrayClass(uint8Array.buffer.slice(byteOffset + uint8Array.byteOffset), 0, length);\n        }\n        else {\n            return new typedArrayClass(uint8Array.buffer, byteOffset + uint8Array.byteOffset, length);\n        }\n    }\n    _checkBytesPerComponent(accessor) {\n        var bytesPerComponent = 0;\n        switch (accessor.componentType) {\n            case 5120: // gl.BYTE\n                bytesPerComponent = 1;\n                break;\n            case 5121: // gl.UNSIGNED_BYTE\n                bytesPerComponent = 1;\n                break;\n            case 5122: // gl.SHORT\n                bytesPerComponent = 2;\n                break;\n            case 5123: // gl.UNSIGNED_SHORT\n                bytesPerComponent = 2;\n                break;\n            case 5124: // gl.INT\n                bytesPerComponent = 4;\n                break;\n            case 5125: // gl.UNSIGNED_INT\n                bytesPerComponent = 4;\n                break;\n            case 5126: // gl.FLOAT\n                bytesPerComponent = 4;\n                break;\n            default:\n                break;\n        }\n        return bytesPerComponent;\n    }\n    _checkComponentNumber(accessor) {\n        var componentN = 0;\n        switch (accessor.type) {\n            case 'SCALAR':\n                componentN = 1;\n                break;\n            case 'VEC2':\n                componentN = 2;\n                break;\n            case 'VEC3':\n                componentN = 3;\n                break;\n            case 'VEC4':\n                componentN = 4;\n                break;\n            case 'MAT4':\n                componentN = 16;\n                break;\n        }\n        return componentN;\n    }\n    _checkDataViewMethod(accessor) {\n        var dataViewMethod = '';\n        switch (accessor.componentType) {\n            case 5120: // gl.BYTE\n                dataViewMethod = 'getInt8';\n                break;\n            case 5121: // gl.UNSIGNED_BYTE\n                dataViewMethod = 'getUint8';\n                break;\n            case 5122: // gl.SHORT\n                dataViewMethod = 'getInt16';\n                break;\n            case 5123: // gl.UNSIGNED_SHORT\n                dataViewMethod = 'getUint16';\n                break;\n            case 5124: // gl.INT\n                dataViewMethod = 'getInt32';\n                break;\n            case 5125: // gl.UNSIGNED_INT\n                dataViewMethod = 'getUint32';\n                break;\n            case 5126: // gl.FLOAT\n                dataViewMethod = 'getFloat32';\n                break;\n            default:\n                break;\n        }\n        return dataViewMethod;\n    }\n    static _isSystemLittleEndian() {\n        return !!(new Uint8Array((new Uint16Array([0x00ff])).buffer))[0];\n    }\n    _accessBinaryWithAccessor(accessor) {\n        var bufferView = accessor.bufferView;\n        const byteOffset = bufferView.byteOffset + (accessor.byteOffset !== void 0 ? accessor.byteOffset : 0);\n        var buffer = bufferView.buffer;\n        var uint8Array = buffer.buffer;\n        let componentN = this._checkComponentNumber(accessor);\n        let componentBytes = this._checkBytesPerComponent(accessor);\n        let dataViewMethod = this._checkDataViewMethod(accessor);\n        if (accessor.extras === void 0) {\n            accessor.extras = {};\n        }\n        accessor.extras.componentN = componentN;\n        accessor.extras.componentBytes = componentBytes;\n        accessor.extras.dataViewMethod = dataViewMethod;\n        var byteLength = componentBytes * componentN * accessor.count;\n        var typedDataArray = [];\n        if (accessor.extras && accessor.extras.toGetAsTypedArray) {\n            if (ModelConverter._isSystemLittleEndian()) {\n                if (dataViewMethod === 'getFloat32') {\n                    typedDataArray = this._adjustByteAlign(Float32Array, uint8Array, 4, byteOffset, byteLength / componentBytes);\n                }\n                else if (dataViewMethod === 'getInt8') {\n                    typedDataArray = new Int8Array(uint8Array, byteOffset, byteLength / componentBytes);\n                }\n                else if (dataViewMethod === 'getUint8') {\n                    typedDataArray = new Uint8Array(uint8Array, byteOffset, byteLength / componentBytes);\n                }\n                else if (dataViewMethod === 'getInt16') {\n                    typedDataArray = this._adjustByteAlign(Int16Array, uint8Array, 2, byteOffset, byteLength / componentBytes);\n                }\n                else if (dataViewMethod === 'getUint16') {\n                    typedDataArray = this._adjustByteAlign(Uint16Array, uint8Array, 2, byteOffset, byteLength / componentBytes);\n                }\n                else if (dataViewMethod === 'getInt32') {\n                    typedDataArray = this._adjustByteAlign(Int32Array, uint8Array, 4, byteOffset, byteLength / componentBytes);\n                }\n                else if (dataViewMethod === 'getUint32') {\n                    typedDataArray = this._adjustByteAlign(Uint32Array, uint8Array, 4, byteOffset, byteLength / componentBytes);\n                }\n            }\n            else {\n                let dataView = new DataView(uint8Array.buffer, byteOffset + uint8Array.byteOffset, byteLength);\n                let byteDelta = componentBytes * componentN;\n                let littleEndian = true;\n                for (let pos = 0; pos < byteLength; pos += byteDelta) {\n                    switch (accessor.type) {\n                        case 'SCALAR':\n                            typedDataArray.push(dataView[dataViewMethod](pos, littleEndian));\n                            break;\n                        case 'VEC2':\n                            typedDataArray.push(dataView[dataViewMethod](pos, littleEndian));\n                            typedDataArray.push(dataView[dataViewMethod](pos + componentBytes, littleEndian));\n                            break;\n                        case 'VEC3':\n                            typedDataArray.push(dataView[dataViewMethod](pos, littleEndian));\n                            typedDataArray.push(dataView[dataViewMethod](pos + componentBytes, littleEndian));\n                            typedDataArray.push(dataView[dataViewMethod](pos + componentBytes * 2, littleEndian));\n                            break;\n                        case 'VEC4':\n                            typedDataArray.push(dataView[dataViewMethod](pos, littleEndian));\n                            typedDataArray.push(dataView[dataViewMethod](pos + componentBytes, littleEndian));\n                            typedDataArray.push(dataView[dataViewMethod](pos + componentBytes * 2, littleEndian));\n                            typedDataArray.push(dataView[dataViewMethod](pos + componentBytes * 3, littleEndian));\n                            break;\n                    }\n                }\n                if (dataViewMethod === 'getInt8') {\n                    typedDataArray = new Int8Array(typedDataArray);\n                }\n                else if (dataViewMethod === 'getUint8') {\n                    typedDataArray = new Uint8Array(typedDataArray);\n                }\n                else if (dataViewMethod === 'getInt16') {\n                    typedDataArray = new Int16Array(typedDataArray);\n                }\n                else if (dataViewMethod === 'getUint16') {\n                    typedDataArray = new Uint16Array(typedDataArray);\n                }\n                else if (dataViewMethod === 'getInt32') {\n                    typedDataArray = new Int32Array(typedDataArray);\n                }\n                else if (dataViewMethod === 'getUint32') {\n                    typedDataArray = new Uint32Array(typedDataArray);\n                }\n                else if (dataViewMethod === 'getFloat32') {\n                    typedDataArray = new Float32Array(typedDataArray);\n                }\n            }\n        }\n        else {\n            let dataView = new DataView(uint8Array.buffer, byteOffset + uint8Array.byteOffset, byteLength);\n            let byteDelta = componentBytes * componentN;\n            if (accessor.extras && accessor.extras.weightCount) {\n                byteDelta = componentBytes * componentN * accessor.extras.weightCount;\n            }\n            let littleEndian = true;\n            for (let pos = 0; pos < byteLength; pos += byteDelta) {\n                switch (accessor.type) {\n                    case 'SCALAR':\n                        if (accessor.extras && accessor.extras.weightCount) {\n                            const array = [];\n                            for (let i = 0; i < accessor.extras.weightCount; i++) {\n                                array.push(dataView[dataViewMethod](pos + componentBytes * i, littleEndian));\n                            }\n                            typedDataArray.push(array);\n                        }\n                        else {\n                            typedDataArray.push(dataView[dataViewMethod](pos, littleEndian));\n                        }\n                        break;\n                    case 'VEC2':\n                        typedDataArray.push(new _math_Vector2__WEBPACK_IMPORTED_MODULE_25__[\"default\"](dataView[dataViewMethod](pos, littleEndian), dataView[dataViewMethod](pos + componentBytes, littleEndian)));\n                        break;\n                    case 'VEC3':\n                        typedDataArray.push(new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](dataView[dataViewMethod](pos, littleEndian), dataView[dataViewMethod](pos + componentBytes, littleEndian), dataView[dataViewMethod](pos + componentBytes * 2, littleEndian)));\n                        break;\n                    case 'VEC4':\n                        if (accessor.extras && accessor.extras.quaternionIfVec4) {\n                            typedDataArray.push(new _math_Quaternion__WEBPACK_IMPORTED_MODULE_5__[\"default\"](dataView[dataViewMethod](pos, littleEndian), dataView[dataViewMethod](pos + componentBytes, littleEndian), dataView[dataViewMethod](pos + componentBytes * 2, littleEndian), dataView[dataViewMethod](pos + componentBytes * 3, littleEndian)));\n                        }\n                        else {\n                            typedDataArray.push(new _math_Vector4__WEBPACK_IMPORTED_MODULE_17__[\"default\"](dataView[dataViewMethod](pos, littleEndian), dataView[dataViewMethod](pos + componentBytes, littleEndian), dataView[dataViewMethod](pos + componentBytes * 2, littleEndian), dataView[dataViewMethod](pos + componentBytes * 3, littleEndian)));\n                        }\n                        break;\n                    case 'MAT4':\n                        let matrixComponents = [];\n                        for (let i = 0; i < 16; i++) {\n                            matrixComponents[i] = dataView[dataViewMethod](pos + componentBytes * i, littleEndian);\n                        }\n                        typedDataArray.push(new _math_Matrix44__WEBPACK_IMPORTED_MODULE_6__[\"default\"](matrixComponents, true));\n                        break;\n                }\n            }\n        }\n        accessor.extras.typedDataArray = typedDataArray;\n        return typedDataArray;\n    }\n    __addOffsetToIndices(meshComponent) {\n        const primitiveNumber = meshComponent.mesh.getPrimitiveNumber();\n        let offsetSum = 0;\n        for (let i = 0; i < primitiveNumber; i++) {\n            const primitive = meshComponent.mesh.getPrimitiveAt(i);\n            const indicesAccessor = primitive.indicesAccessor;\n            if (indicesAccessor) {\n                const elementNumber = indicesAccessor.elementCount;\n                for (let j = 0; j < elementNumber; j++) {\n                    const index = indicesAccessor.getScalar(j, {});\n                    indicesAccessor.setScalar(j, index + offsetSum, {});\n                }\n                offsetSum += elementNumber;\n            }\n        }\n    }\n    __getRnAccessor(accessor, rnBuffer) {\n        const bufferView = accessor.bufferView;\n        const rnBufferView = rnBuffer.takeBufferViewWithByteOffset({\n            byteLengthToNeed: bufferView.byteLength,\n            byteStride: (bufferView.byteStride != null) ? bufferView.byteStride : 0,\n            byteOffset: (bufferView.byteOffset != null) ? bufferView.byteOffset : 0,\n            isAoS: false\n        });\n        let rnAccessor;\n        if (accessor.byteStride != null) {\n            rnAccessor = rnBufferView.takeFlexibleAccessorWithByteOffset({\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].fromString(accessor.type),\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_12__[\"ComponentType\"].from(accessor.componentType),\n                count: accessor.count,\n                byteStride: accessor.byteStride,\n                byteOffset: (accessor.byteOffset != null) ? accessor.byteOffset : 0,\n                max: accessor.max,\n                min: accessor.min\n            });\n        }\n        else {\n            rnAccessor = rnBufferView.takeAccessorWithByteOffset({\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].fromString(accessor.type),\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_12__[\"ComponentType\"].from(accessor.componentType),\n                count: accessor.count,\n                byteOffset: (accessor.byteOffset != null) ? accessor.byteOffset : 0,\n                max: accessor.max,\n                min: accessor.min\n            });\n        }\n        return rnAccessor;\n    }\n    __copyRnAccessorAndBufferView(srcRnAccessor, primitive) {\n        const byteSize = srcRnAccessor.elementCount * 4 /* vec4 */ * 4 /* bytes */;\n        const dstRnBuffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_33__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_32__[\"BufferUse\"].GPUVertexData);\n        const dstRnBufferView = dstRnBuffer.takeBufferView({\n            byteLengthToNeed: byteSize,\n            byteStride: 4 /* vec4 */ * 4 /* bytes */,\n            isAoS: false\n        });\n        const dstRnAccessor = dstRnBufferView.takeAccessor({\n            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].Vec4,\n            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_12__[\"ComponentType\"].Float,\n            count: srcRnAccessor.elementCount,\n            max: srcRnAccessor.max,\n            min: srcRnAccessor.min\n        });\n        for (let i = 0; i < srcRnAccessor.elementCount; i++) {\n            dstRnAccessor.setElementFromAccessor(i, srcRnAccessor);\n        }\n        return dstRnAccessor;\n    }\n    __createRnAccessor(accessor, numOfAttributes, compositionNum, rnBuffer) {\n        const rnBufferView = rnBuffer.takeBufferView({\n            byteLengthToNeed: numOfAttributes * compositionNum * 4,\n            byteStride: 0,\n            isAoS: false\n        });\n        let rnAccessor;\n        if (accessor.byteStride != null) {\n            rnAccessor = rnBufferView.takeFlexibleAccessorWithByteOffset({\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].fromString(accessor.type),\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_12__[\"ComponentType\"].from(accessor.componentType),\n                count: numOfAttributes,\n                byteStride: accessor.byteStride,\n                byteOffset: (accessor.byteOffset != null) ? accessor.byteOffset : 0,\n                max: accessor.max,\n                min: accessor.min\n            });\n        }\n        else {\n            rnAccessor = rnBufferView.takeAccessorWithByteOffset({\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].fromString(accessor.type),\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_12__[\"ComponentType\"].from(accessor.componentType),\n                count: numOfAttributes,\n                byteOffset: (accessor.byteOffset != null) ? accessor.byteOffset : 0,\n                max: accessor.max,\n                min: accessor.min\n            });\n        }\n        return rnAccessor;\n    }\n    __getRnBufferView(bufferView, rnBuffer) {\n        const rnBufferView = rnBuffer.takeBufferViewWithByteOffset({\n            byteLengthToNeed: bufferView.byteLength,\n            byteStride: (bufferView.byteStride != null) ? bufferView.byteStride : 0,\n            byteOffset: (bufferView.byteOffset != null) ? bufferView.byteOffset : 0,\n            isAoS: false\n        });\n        return rnBufferView;\n    }\n    __getGeometryFromDracoBuffer(draco, decoder, arrayBuffer) {\n        const buffer = new draco.DecoderBuffer();\n        buffer.Init(new Int8Array(arrayBuffer), arrayBuffer.byteLength);\n        const geometryType = decoder.GetEncodedGeometryType(buffer);\n        let dracoGeometry;\n        let decodingStatus;\n        if (geometryType === draco.TRIANGULAR_MESH) {\n            dracoGeometry = new draco.Mesh();\n            decodingStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);\n        }\n        else if (geometryType == draco.POINT_CLOUD) {\n            dracoGeometry = new draco.PointCloud();\n            decodingStatus = decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n        }\n        else {\n            const errorMsg = 'Unknown geometry type.';\n            console.error(errorMsg);\n        }\n        dracoGeometry.geometryType = geometryType; // store\n        if (!decodingStatus.ok() || dracoGeometry.ptr == 0) {\n            let errorMsg = 'Decoding failed: ';\n            errorMsg += decodingStatus.error_msg();\n            console.error(errorMsg);\n            draco.destroy(decoder);\n            draco.destroy(dracoGeometry);\n            return void 0;\n        }\n        draco.destroy(buffer);\n        return dracoGeometry;\n    }\n    __getIndicesFromDraco(draco, decoder, dracoGeometry, triangleStripDrawMode) {\n        // For mesh, we need to generate the faces.\n        const geometryType = dracoGeometry.geometryType;\n        if (geometryType !== draco.TRIANGULAR_MESH) {\n            return void 0;\n        }\n        let indices;\n        if (triangleStripDrawMode) {\n            const stripsArray = new draco.DracoInt32Array();\n            decoder.GetTriangleStripsFromMesh(dracoGeometry, stripsArray);\n            indices = new Uint32Array(stripsArray.size());\n            for (var i = 0; i < stripsArray.size(); ++i) {\n                indices[i] = stripsArray.GetValue(i);\n            }\n            draco.destroy(stripsArray);\n        }\n        else { // TRIANGLES\n            const numFaces = dracoGeometry.num_faces();\n            const numIndices = numFaces * 3;\n            indices = new Uint32Array(numIndices);\n            const ia = new draco.DracoInt32Array();\n            for (let i = 0; i < numFaces; ++i) {\n                decoder.GetFaceFromMesh(dracoGeometry, i, ia);\n                var index = i * 3;\n                indices[index] = ia.GetValue(0);\n                indices[index + 1] = ia.GetValue(1);\n                indices[index + 2] = ia.GetValue(2);\n            }\n            draco.destroy(ia);\n        }\n        return indices;\n    }\n    __decodeDraco(primitive, rnBuffers, gltfModel, map) {\n        const bufferView = gltfModel.bufferViews[primitive.extensions.KHR_draco_mesh_compression.bufferView];\n        const rnBufferView = this.__getRnBufferView(bufferView, rnBuffers[bufferView.bufferIndex]);\n        const arraybufferOfBufferView = new Uint8Array(rnBufferView.getUint8Array()).buffer;\n        const draco = new DracoDecoderModule();\n        const decoder = new draco.Decoder();\n        const dracoGeometry = this.__getGeometryFromDracoBuffer(draco, decoder, arraybufferOfBufferView);\n        if (dracoGeometry == null) {\n            draco.destroy(dracoGeometry);\n            draco.destroy(decoder);\n            return void 0;\n        }\n        const numPoints = dracoGeometry.num_points();\n        const posAttId = decoder.GetAttributeId(dracoGeometry, draco.POSITION);\n        if (posAttId == -1) {\n            const errorMsg = 'Position attribute not found in draco.';\n            console.error(errorMsg);\n            draco.destroy(dracoGeometry);\n            draco.destroy(decoder);\n            return void 0;\n        }\n        let lengthOfRnBufferForDraco = 0;\n        if (primitive.indices) {\n            const count = primitive.indices.count;\n            lengthOfRnBufferForDraco += count * 4;\n        }\n        for (let attributeName in primitive.attributes) {\n            const accessor = primitive.attributes[attributeName];\n            const compositionNum = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].fromString(accessor.type).getNumberOfComponents();\n            const attributeByteLength = numPoints * compositionNum * 4;\n            lengthOfRnBufferForDraco += attributeByteLength;\n        }\n        const rnDracoBuffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n            byteLength: lengthOfRnBufferForDraco,\n            buffer: new ArrayBuffer(lengthOfRnBufferForDraco),\n            name: 'Draco'\n        });\n        const primitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_10__[\"PrimitiveMode\"].from(primitive.mode);\n        let isTriangleStrip = false;\n        if (primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_10__[\"PrimitiveMode\"].TriangleStrip) {\n            isTriangleStrip = true;\n        }\n        const indices = this.__getIndicesFromDraco(draco, decoder, dracoGeometry, isTriangleStrip);\n        const indicesDracoAccessor = this.__createRnAccessor(primitive.indices, indices.length, 1, rnDracoBuffer);\n        for (let i = 0; i < indices.length; i++) {\n            indicesDracoAccessor.setScalar(i, indices[i], {});\n        }\n        for (let attributeName in primitive.attributes) {\n            const attributeAccessor = primitive.attributes[attributeName];\n            const compositionNum = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].fromString(attributeAccessor.type).getNumberOfComponents();\n            const attributeRnDracoAccessor = this.__createRnAccessor(attributeAccessor, numPoints, compositionNum, rnDracoBuffer);\n            let dracoAttributeName = attributeName;\n            if (attributeName === 'TEXCOORD_0') {\n                dracoAttributeName = 'TEX_COORD';\n            }\n            else if (attributeName === 'TANGENT') {\n                dracoAttributeName = 'GENERIC';\n            }\n            const attId = decoder.GetAttributeId(dracoGeometry, draco[dracoAttributeName]);\n            if (attId === -1) {\n                const errorMsg = attributeName + 'attribute not found in draco.';\n                console.error(errorMsg);\n                continue;\n            }\n            const attribute = decoder.GetAttribute(dracoGeometry, attId);\n            const attributeData = new draco.DracoFloat32Array();\n            decoder.GetAttributeFloatForAllPoints(dracoGeometry, attribute, attributeData);\n            for (let i = 0; i < numPoints; i++) {\n                if (compositionNum === 1) {\n                    attributeRnDracoAccessor.setScalar(i, attributeData.GetValue(i * compositionNum), {});\n                }\n                else if (compositionNum === 2) {\n                    attributeRnDracoAccessor.setVec2(i, attributeData.GetValue(i * compositionNum), attributeData.GetValue(i * compositionNum + 1), {});\n                }\n                else if (compositionNum === 3) {\n                    attributeRnDracoAccessor.setVec3(i, attributeData.GetValue(i * compositionNum), attributeData.GetValue(i * compositionNum + 1), attributeData.GetValue(i * compositionNum + 2), {});\n                }\n                else if (compositionNum === 4) {\n                    attributeRnDracoAccessor.setVec4(i, attributeData.GetValue(i * compositionNum), attributeData.GetValue(i * compositionNum + 1), attributeData.GetValue(i * compositionNum + 2), attributeData.GetValue(i * compositionNum + 3), {});\n                }\n            }\n            draco.destroy(attributeData);\n            map.set(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_13__[\"VertexAttribute\"].fromString(attributeAccessor.extras.attributeName), attributeRnDracoAccessor);\n        }\n        draco.destroy(dracoGeometry);\n        draco.destroy(decoder);\n        return indicesDracoAccessor;\n    }\n    static _setupTextureTransform(textureJson, rnMaterial, textureTransformShaderSemantic, textureRotationShaderSemantic) {\n        if (textureJson && textureJson.extensions && textureJson.extensions.KHR_texture_transform) {\n            let transform = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_28__[\"default\"].zero();\n            let rotation = 0;\n            const transformJson = textureJson.extensions.KHR_texture_transform;\n            if (transformJson.scale != null) {\n                transform.x = transformJson.scale[0];\n                transform.y = transformJson.scale[1];\n            }\n            if (transformJson.offset != null) {\n                transform.z = transformJson.offset[0];\n                transform.w = transformJson.offset[1];\n            }\n            if (transformJson.rotation != null) {\n                rotation = transformJson.rotation;\n            }\n            rnMaterial.setParameter(textureTransformShaderSemantic, transform);\n            rnMaterial.setParameter(textureRotationShaderSemantic, rotation);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/importer/ModelConverter.ts?");

/***/ }),

/***/ "./src/foundation/importer/VRMImporter.ts":
/*!************************************************!*\
  !*** ./src/foundation/importer/VRMImporter.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return VRMImporter; });\n/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _Gltf2Importer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Gltf2Importer */ \"./src/foundation/importer/Gltf2Importer.ts\");\n/* harmony import */ var _ModelConverter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ModelConverter */ \"./src/foundation/importer/ModelConverter.ts\");\n/* harmony import */ var _components_PhysicsComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/PhysicsComponent */ \"./src/foundation/components/PhysicsComponent.ts\");\n/* harmony import */ var _physics_SphereCollider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../physics/SphereCollider */ \"./src/foundation/physics/SphereCollider.ts\");\n/* harmony import */ var _textures_Texture__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../textures/Texture */ \"./src/foundation/textures/Texture.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _physics_VRMColliderGroup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../physics/VRMColliderGroup */ \"./src/foundation/physics/VRMColliderGroup.ts\");\n/* harmony import */ var _physics_VRMSpringBoneGroup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../physics/VRMSpringBoneGroup */ \"./src/foundation/physics/VRMSpringBoneGroup.ts\");\n/* harmony import */ var _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../physics/VRMSpringBonePhysicsStrategy */ \"./src/foundation/physics/VRMSpringBonePhysicsStrategy.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\n\n\n\n\n\n\n\n/**\n * The VRM Importer class.\n * This class will be integrated into GltfImporter.\n */\nclass VRMImporter {\n    constructor() { }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new VRMImporter();\n        }\n        return this.__instance;\n    }\n    importJsonOnly(uri, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            options = this.getOptions(options);\n            const gltf2Importer = _Gltf2Importer__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\n            return gltf2Importer.import(uri, options);\n        });\n    }\n    /**\n     * Import VRM file.\n     */\n    import(uri, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            options = this.getOptions(options);\n            const gltf2Importer = _Gltf2Importer__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\n            const gltfModel = yield gltf2Importer.import(uri, options);\n            const textures = this.__createTextures(gltfModel);\n            this.__attachRnExtensionToGLTFModel(gltfModel, textures.length);\n            const existOutline = this.__existOutlineMaterial(gltfModel.extensions.VRM);\n            const helperArgument0 = gltfModel.asset.extras.rnLoaderOptions.defaultMaterialHelperArgumentArray[0];\n            helperArgument0[\"textures\"] = textures;\n            const rootGroups = [];\n            const modelConverter = _ModelConverter__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getInstance();\n            helperArgument0[\"isOutline\"] = false;\n            const rootGroupMain = modelConverter.convertToRhodoniteObject(gltfModel);\n            this.readSpringBone(rootGroupMain, gltfModel);\n            this.readVRMHumanoidInfo(rootGroupMain, gltfModel);\n            rootGroups.push(rootGroupMain);\n            if (existOutline) {\n                helperArgument0[\"isOutline\"] = true;\n                const rootGroupOutline = modelConverter.convertToRhodoniteObject(gltfModel);\n                this.readVRMHumanoidInfo(rootGroupOutline, gltfModel);\n                rootGroups.push(rootGroupOutline);\n            }\n            return rootGroups;\n        });\n    }\n    getOptions(options) {\n        if (options != null) {\n            for (let file in options.files) {\n                const fileName = file.split('.vrm')[0];\n                if (fileName) {\n                    const arraybuffer = options.files[file];\n                    options.files[fileName + '.glb'] = arraybuffer;\n                    delete options.files[file];\n                }\n            }\n            options.isImportVRM = true;\n            if (options.defaultMaterialHelperArgumentArray == null) {\n                options.defaultMaterialHelperArgumentArray = [{}];\n            }\n        }\n        else {\n            options = {\n                files: {},\n                loaderExtension: null,\n                defaultMaterialHelperName: null,\n                defaultMaterialHelperArgumentArray: [{}],\n                statesOfElements: [\n                    {\n                        targets: [],\n                        states: {\n                            enable: [],\n                            functions: {}\n                        },\n                        isTransparent: true,\n                        opacity: 1.0,\n                        isTextureImageToLoadPreMultipliedAlpha: false,\n                    }\n                ],\n                isImportVRM: true\n            };\n        }\n        return options;\n    }\n    readVRMHumanoidInfo(rootEntity, gltfModel) {\n        const humanBones = gltfModel.extensions.VRM.humanoid.humanBones;\n        const mapNameNodeId = new Map();\n        for (let bone of humanBones) {\n            mapNameNodeId.set(bone.bone, bone.node);\n        }\n        rootEntity.tryToSetTag({\n            tag: 'humanoid_map_name_nodeId',\n            value: mapNameNodeId\n        });\n    }\n    readSpringBone(rootEntity, gltfModel) {\n        const entityRepository = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        const boneGroups = [];\n        for (let boneGroup of gltfModel.extensions.VRM.secondaryAnimation.boneGroups) {\n            const vrmSpringBoneGroup = new _physics_VRMSpringBoneGroup__WEBPACK_IMPORTED_MODULE_8__[\"default\"]();\n            vrmSpringBoneGroup.tryToSetUniqueName(boneGroup.comment, true);\n            vrmSpringBoneGroup.dragForce = boneGroup.dragForce;\n            vrmSpringBoneGroup.stiffnessForce = boneGroup.stiffiness;\n            vrmSpringBoneGroup.gravityPower = boneGroup.gravityPower;\n            vrmSpringBoneGroup.gravityDir = new _math_Vector3__WEBPACK_IMPORTED_MODULE_6__[\"default\"](boneGroup.gravityDir.x, boneGroup.gravityDir.y, boneGroup.gravityDir.z);\n            vrmSpringBoneGroup.colliderGroupIndices = boneGroup.colliderGroups;\n            vrmSpringBoneGroup.hitRadius = boneGroup.hitRadius;\n            for (let idxOfArray in boneGroup.bones) {\n                const boneNodeIndex = boneGroup.bones[idxOfArray];\n                const entity = gltfModel.asset.extras.rnEntities[boneNodeIndex];\n                vrmSpringBoneGroup.rootBones.push(entity.getSceneGraph());\n                // const boneNodeIndex = boneGroup.bones[idxOfArray];\n                // const entity = gltfModel.asset.extras!.rnEntities![boneNodeIndex];\n                // entityRepository.addComponentsToEntity([PhysicsComponent], entity.entityUID);\n            }\n            boneGroups.push(vrmSpringBoneGroup);\n        }\n        _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_9__[\"default\"].setBoneGroups(boneGroups);\n        for (let boneGroup of boneGroups) {\n            for (let sg of boneGroup.rootBones) {\n                this.addPhysicsComponentRecursively(entityRepository, sg);\n            }\n        }\n        const colliderGroups = [];\n        for (let colliderGroupIdx in gltfModel.extensions.VRM.secondaryAnimation.colliderGroups) {\n            const colliderGroup = gltfModel.extensions.VRM.secondaryAnimation.colliderGroups[colliderGroupIdx];\n            const vrmColliderGroup = new _physics_VRMColliderGroup__WEBPACK_IMPORTED_MODULE_7__[\"default\"]();\n            colliderGroups.push(vrmColliderGroup);\n            const colliders = [];\n            for (let collider of colliderGroup.colliders) {\n                const sphereCollider = new _physics_SphereCollider__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\n                sphereCollider.position = new _math_Vector3__WEBPACK_IMPORTED_MODULE_6__[\"default\"](collider.offset.x, collider.offset.y, collider.offset.z);\n                sphereCollider.radius = collider.radius;\n                colliders.push(sphereCollider);\n            }\n            vrmColliderGroup.colliders = colliders;\n            const baseSg = gltfModel.asset.extras.rnEntities[colliderGroup.node].getSceneGraph();\n            vrmColliderGroup.baseSceneGraph = baseSg;\n            _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_9__[\"default\"].addColliderGroup(parseInt(colliderGroupIdx), vrmColliderGroup);\n        }\n    }\n    addPhysicsComponentRecursively(entityRepository, sg) {\n        const entity = sg.entity;\n        entityRepository.addComponentsToEntity([_components_PhysicsComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"]], entity.entityUID);\n        _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_9__[\"default\"].initialize(sg);\n        if (sg.children.length > 0) {\n            for (let child of sg.children) {\n                this.addPhysicsComponentRecursively(entityRepository, child);\n            }\n        }\n    }\n    __createTextures(gltfModel) {\n        if (!gltfModel.textures)\n            gltfModel.textures = [];\n        const gltfTextures = gltfModel.textures;\n        const rnTextures = [];\n        for (let i = 0; i < gltfTextures.length; i++) {\n            const rnTexture = _ModelConverter__WEBPACK_IMPORTED_MODULE_2__[\"default\"]._createTexture({ texture: gltfTextures[i] }, gltfModel);\n            rnTextures.push(rnTexture);\n        }\n        const dummyWhiteTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n        dummyWhiteTexture.generate1x1TextureFrom();\n        rnTextures.push(dummyWhiteTexture);\n        const dummyBlackTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n        dummyBlackTexture.generate1x1TextureFrom(\"rgba(0, 0, 0, 1)\");\n        rnTextures.push(dummyBlackTexture);\n        return rnTextures;\n    }\n    __existOutlineMaterial(extensionsVRM) {\n        const materialProperties = extensionsVRM.materialProperties;\n        if (materialProperties != null) {\n            for (let materialProperty of materialProperties) {\n                if (materialProperty.floatProperties._OutlineWidthMode !== 0) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    __attachRnExtensionToGLTFModel(gltfModel, texturesLength) {\n        const materialProperties = gltfModel.extensions.VRM.materialProperties;\n        for (let materialProperty of materialProperties) {\n            if (materialProperty.shader === \"VRM/MToon\") {\n                this.__initializeMToonMaterialProperties(gltfModel, texturesLength);\n                break;\n            }\n        }\n    }\n    __initializeMToonMaterialProperties(gltfModel, texturesLength) {\n        const materialProperties = gltfModel.extensions.VRM.materialProperties;\n        const dummyWhiteTextureNumber = texturesLength - 2;\n        const dummyBlackTextureNumber = texturesLength - 1;\n        for (let i = 0; i < materialProperties.length; i++) {\n            const floatProperties = materialProperties[i].floatProperties;\n            this.__initializeForUndefinedProperty(floatProperties, \"_BlendMode\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_BumpScale\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_CullMode\", 2.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_Cutoff\", 0.5);\n            this.__initializeForUndefinedProperty(floatProperties, \"_DebugMode\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_DstBlend\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_IndirectLightIntensity\", 0.1);\n            this.__initializeForUndefinedProperty(floatProperties, \"_LightColorAttenuation\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_OutlineColorMode\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_OutlineCullMode\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_OutlineLightingMix\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_OutlineScaledMaxDistance\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_OutlineWidth\", 0.5);\n            this.__initializeForUndefinedProperty(floatProperties, \"_OutlineWidthMode\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_ReceiveShadowRate\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_RimFresnelPower\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_RimLift\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_RimLightingMix\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_ShadeShift\", 0.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_ShadeToony\", 0.9);\n            this.__initializeForUndefinedProperty(floatProperties, \"_ShadingGradeRate\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_SrcBlend\", 1.0);\n            this.__initializeForUndefinedProperty(floatProperties, \"_ZWrite\", 1.0);\n            // this.__initializeForUndefinedProperty(floatProperties,\"_UvAnimScrollX\", 0.0);\n            // this.__initializeForUndefinedProperty(floatProperties,\"_UvAnimScrollY\", 0.0);\n            // this.__initializeForUndefinedProperty(floatProperties,\"_UvAnimRotation\", 0.0);\n            const vectorProperties = materialProperties[i].vectorProperties;\n            this.__initializeForUndefinedProperty(vectorProperties, \"_Color\", [1, 1, 1, 1]);\n            this.__initializeForUndefinedProperty(vectorProperties, \"_EmissionColor\", [0, 0, 0]);\n            this.__initializeForUndefinedProperty(vectorProperties, \"_OutlineColor\", [0, 0, 0, 1]);\n            this.__initializeForUndefinedProperty(vectorProperties, \"_ShadeColor\", [0.97, 0.81, 0.86, 1]);\n            this.__initializeForUndefinedProperty(vectorProperties, \"_RimColor\", [0, 0, 0]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_BumpMap\", [0, 0, 1, 1]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_EmissionMap\", [0, 0, 1, 1]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_MainTex\", [0, 0, 1, 1]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_OutlineWidthTexture\", [0, 0, 1, 1]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_ReceiveShadowTexture\", [0, 0, 1, 1]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_ShadeTexture\", [0, 0, 1, 1]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_ShadingGradeTexture\", [0, 0, 1, 1]);\n            // this.__initializeForUndefinedProperty(vectorProperties, \"_SphereAdd\", [0, 0, 1, 1]);\n            // set num of texture array\n            const textureProperties = materialProperties[i].textureProperties;\n            this.__initializeForUndefinedProperty(textureProperties, \"_BumpMap\", dummyWhiteTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_EmissionMap\", dummyBlackTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_MainTex\", dummyWhiteTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_OutlineWidthTexture\", dummyWhiteTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_ReceiveShadowTexture\", dummyWhiteTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_RimTexture\", dummyBlackTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_ShadeTexture\", dummyWhiteTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_ShadingGradeTexture\", dummyWhiteTextureNumber);\n            this.__initializeForUndefinedProperty(textureProperties, \"_SphereAdd\", dummyBlackTextureNumber);\n            // this.__initializeForUndefinedProperty(textureProperties, \"_UvAnimMaskTexture\", dummyWhiteTextureNumber);\n        }\n    }\n    __initializeForUndefinedProperty(object, propertyName, initialValue) {\n        if (object[propertyName] == null)\n            object[propertyName] = initialValue;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/importer/VRMImporter.ts?");

/***/ }),

/***/ "./src/foundation/materials/AbstractMaterialNode.ts":
/*!**********************************************************!*\
  !*** ./src/foundation/materials/AbstractMaterialNode.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AbstractMaterialNode; });\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _textures_Texture__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../textures/Texture */ \"./src/foundation/textures/Texture.ts\");\n/* harmony import */ var _textures_CubeTexture__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../textures/CubeTexture */ \"./src/foundation/textures/CubeTexture.ts\");\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _math_MutableVector2__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/MutableVector2 */ \"./src/foundation/math/MutableVector2.ts\");\n/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../math/MutableVector4 */ \"./src/foundation/math/MutableVector4.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _system_System__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../system/System */ \"./src/foundation/system/System.ts\");\n/* harmony import */ var _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../definitions/ProcessApproach */ \"./src/foundation/definitions/ProcessApproach.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass AbstractMaterialNode extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(shader, shaderFunctionName, { isMorphing = false, isSkinning = false, isLighting = false } = {}, vertexShaderityObject, pixelShaderityObject) {\n        super();\n        this.__semantics = [];\n        this.__shaderNode = [];\n        this.__vertexInputs = [];\n        this.__pixelInputs = [];\n        this.__vertexOutputs = [];\n        this.__pixelOutputs = [];\n        this.__vertexInputConnections = [];\n        this.__pixelInputConnections = [];\n        this.isSingleOperation = false;\n        this.__definitions = '';\n        this.shader = shader;\n        this.shaderFunctionName = shaderFunctionName;\n        this.__materialNodeUid = ++AbstractMaterialNode.__invalidMaterialNodeCount;\n        AbstractMaterialNode.materialNodes[AbstractMaterialNode.__invalidMaterialNodeCount] = this;\n        this.__isMorphing = isMorphing;\n        this.__isSkinning = isSkinning;\n        this.__isLighing = isLighting;\n        this.__vertexShaderityObject = vertexShaderityObject;\n        this.__pixelShaderityObject = pixelShaderityObject;\n        this.__webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getWebGLResourceRepository();\n    }\n    get vertexShaderityObject() {\n        return this.__vertexShaderityObject;\n    }\n    get pixelShaderityObject() {\n        return this.__pixelShaderityObject;\n    }\n    get definitions() {\n        return this.__definitions;\n    }\n    static getMaterialNode(materialNodeUid) {\n        return AbstractMaterialNode.materialNodes[materialNodeUid];\n    }\n    get materialNodeUid() {\n        return this.__materialNodeUid;\n    }\n    get _semanticsInfoArray() {\n        return this.__semantics;\n    }\n    setShaderSemanticsInfoArray(shaderSemanticsInfoArray) {\n        const infoArray = [];\n        for (let info of shaderSemanticsInfoArray) {\n            if (info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec4Array || info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec3Array || info.compositionType == _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec2Array) {\n                if (info.setEach === true) {\n                    for (let i = 0; i < info.maxIndex; i++) {\n                        const anotherInfo = Object.assign({}, info);\n                        anotherInfo.index = i;\n                        anotherInfo.maxIndex = info.maxIndex;\n                        infoArray.push(anotherInfo);\n                    }\n                }\n                else {\n                    infoArray.push(info);\n                }\n            }\n            else {\n                infoArray.push(info);\n            }\n        }\n        this.__semantics = infoArray;\n    }\n    addVertexInputConnection(materialNode, outputNameOfPrev, inputNameOfThis) {\n        this.__vertexInputConnections.push({ materialNodeUid: materialNode.materialNodeUid, outputNameOfPrev: outputNameOfPrev, inputNameOfThis: inputNameOfThis });\n    }\n    addPixelInputConnection(materialNode, outputNameOfPrev, inputNameOfThis) {\n        this.__pixelInputConnections.push({ materialNodeUid: materialNode.materialNodeUid, outputNameOfPrev: outputNameOfPrev, inputNameOfThis: inputNameOfThis });\n    }\n    get vertexInputConnections() {\n        return this.__vertexInputConnections;\n    }\n    get pixelInputConnections() {\n        return this.__pixelInputConnections;\n    }\n    getVertexInput(name) {\n        for (let input of this.__vertexInputs) {\n            if (input.name === name) {\n                return input;\n            }\n        }\n        return void 0;\n    }\n    getVertexOutput(name) {\n        for (let output of this.__vertexOutputs) {\n            if (output.name === name) {\n                return output;\n            }\n        }\n        return void 0;\n    }\n    getPixelInput(name) {\n        for (let input of this.__pixelInputs) {\n            if (input.name === name) {\n                return input;\n            }\n        }\n        return void 0;\n    }\n    getPixelOutput(name) {\n        for (let output of this.__pixelOutputs) {\n            if (output.name === name) {\n                return output;\n            }\n        }\n        return void 0;\n    }\n    static initDefaultTextures() {\n        if (this.__dummyWhiteTexture.isTextureReady) {\n            return;\n        }\n        this.__dummyWhiteTexture.generate1x1TextureFrom();\n        this.__dummyBlueTexture.generate1x1TextureFrom(\"rgba(127.5, 127.5, 255, 1)\");\n        this.__dummyBlackTexture.generate1x1TextureFrom(\"rgba(0, 0, 0, 1)\");\n        this.__dummyBlackCubeTexture.load1x1Texture(\"rgba(0, 0, 0, 1)\");\n    }\n    setWorldMatrix(shaderProgram, worldMatrix) {\n        shaderProgram._gl.uniformMatrix4fv(shaderProgram.worldMatrix, false, worldMatrix.v);\n    }\n    setNormalMatrix(shaderProgram, normalMatrix) {\n        shaderProgram._gl.uniformMatrix3fv(shaderProgram.normalMatrix, false, normalMatrix.v);\n    }\n    setViewInfo(shaderProgram, cameraComponent, material, setUniform) {\n        if (cameraComponent) {\n            const cameraPosition = cameraComponent.worldPosition;\n            if (setUniform) {\n                shaderProgram._gl.uniformMatrix4fv(shaderProgram.viewMatrix, false, cameraComponent.viewMatrix.v);\n                shaderProgram._gl.uniform3fv(shaderProgram.viewPosition, cameraPosition.v);\n            }\n            else {\n                // material.setParameter(ShaderSemantics.ViewMatrix, cameraComponent.viewMatrix);\n                // material.setParameter(ShaderSemantics.ViewPosition, cameraPosition);\n            }\n        }\n        else {\n            const mat = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].identity();\n            const pos = new _math_Vector3__WEBPACK_IMPORTED_MODULE_9__[\"default\"](0, 0, 10);\n            if (setUniform) {\n                shaderProgram._gl.uniformMatrix4fv(shaderProgram.viewMatrix, false, mat.v);\n                shaderProgram._gl.uniform3fv(shaderProgram.viewPosition, pos.v);\n            }\n            else {\n                // material.setParameter(ShaderSemantics.ViewMatrix, mat);\n                // material.setParameter(ShaderSemantics.ViewPosition, pos);\n            }\n        }\n    }\n    setProjection(shaderProgram, cameraComponent, material, setUniform) {\n        if (cameraComponent) {\n            if (setUniform) {\n                shaderProgram._gl.uniformMatrix4fv(shaderProgram.projectionMatrix, false, cameraComponent.projectionMatrix.v);\n            }\n            else {\n                // material.setParameter(ShaderSemantics.ProjectionMatrix, cameraComponent.projectionMatrix);\n            }\n        }\n        else {\n            if (setUniform) {\n                this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__[\"ShaderSemantics\"].ProjectionMatrix.str, true, _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"].identity());\n            }\n        }\n    }\n    setSkinning(shaderProgram, skeletalComponent, setUniform) {\n        if (!this.__isSkinning) {\n            return;\n        }\n        if (skeletalComponent) {\n            if (setUniform) {\n                const jointQuaternionArray = skeletalComponent.jointQuaternionArray;\n                const jointTranslateScaleArray = skeletalComponent.jointTranslateScaleArray;\n                shaderProgram._gl.uniform4fv(shaderProgram.boneQuaternion, jointQuaternionArray);\n                shaderProgram._gl.uniform4fv(shaderProgram.boneTranslateScale, jointTranslateScaleArray);\n                shaderProgram._gl.uniform1i(shaderProgram.skinningMode, 0);\n            }\n        }\n        else {\n            if (setUniform) {\n                shaderProgram._gl.uniform1i(shaderProgram.skinningMode, -1);\n            }\n        }\n    }\n    setLightsInfo(shaderProgram, lightComponents, material, setUniform) {\n        if (!this.__isLighing) {\n            return;\n        }\n        if (setUniform) {\n            shaderProgram._gl.uniform1i(shaderProgram.lightNumber, lightComponents.length);\n            const length = Math.min(lightComponents.length, _core_Config__WEBPACK_IMPORTED_MODULE_6__[\"default\"].maxLightNumberInShader);\n            if (AbstractMaterialNode.__lightPositioins.length !== 4 * length) {\n                AbstractMaterialNode.__lightPositioins = new Float32Array(4 * length);\n                AbstractMaterialNode.__lightDirections = new Float32Array(4 * length);\n                AbstractMaterialNode.__lightIntensities = new Float32Array(4 * length);\n            }\n            for (let i = 0; i < lightComponents.length; i++) {\n                if (i >= _core_Config__WEBPACK_IMPORTED_MODULE_6__[\"default\"].maxLightNumberInShader) {\n                    break;\n                }\n                if (shaderProgram.lightPosition == null) {\n                    break;\n                }\n                const lightComponent = lightComponents[i];\n                const sceneGraphComponent = lightComponent.entity.getSceneGraph();\n                const worldLightPosition = sceneGraphComponent.worldPosition;\n                const worldLightDirection = lightComponent.direction;\n                const worldLightIntensity = lightComponent.intensity;\n                AbstractMaterialNode.__lightPositioins[i * 4 + 0] = worldLightPosition.x;\n                AbstractMaterialNode.__lightPositioins[i * 4 + 1] = worldLightPosition.y;\n                AbstractMaterialNode.__lightPositioins[i * 4 + 2] = worldLightPosition.z;\n                AbstractMaterialNode.__lightPositioins[i * 4 + 3] = lightComponent.type.index;\n                AbstractMaterialNode.__lightDirections[i * 4 + 0] = worldLightDirection.x;\n                AbstractMaterialNode.__lightDirections[i * 4 + 1] = worldLightDirection.y;\n                AbstractMaterialNode.__lightDirections[i * 4 + 2] = worldLightDirection.z;\n                AbstractMaterialNode.__lightDirections[i * 4 + 3] = 0;\n                AbstractMaterialNode.__lightIntensities[i * 4 + 0] = worldLightIntensity.x;\n                AbstractMaterialNode.__lightIntensities[i * 4 + 1] = worldLightIntensity.y;\n                AbstractMaterialNode.__lightIntensities[i * 4 + 2] = worldLightIntensity.z;\n                AbstractMaterialNode.__lightIntensities[i * 4 + 3] = 0;\n            }\n            if (length > 0) {\n                shaderProgram._gl.uniform4fv(shaderProgram.lightPosition, AbstractMaterialNode.__lightPositioins);\n                shaderProgram._gl.uniform4fv(shaderProgram.lightDirection, AbstractMaterialNode.__lightDirections);\n                shaderProgram._gl.uniform4fv(shaderProgram.lightIntensity, AbstractMaterialNode.__lightIntensities);\n            }\n        }\n    }\n    setMorphInfo(shaderProgram, meshComponent, blendShapeComponent, primitive) {\n        if (!this.__isMorphing) {\n            return;\n        }\n        if (primitive.targets.length === 0) {\n            shaderProgram._gl.uniform1i(shaderProgram.morphTargetNumber, 0);\n            return;\n        }\n        const memoryManager = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_12__[\"default\"].getInstance();\n        shaderProgram._gl.uniform1i(shaderProgram.morphTargetNumber, meshComponent.mesh.weights.length);\n        const array = primitive.targets.map((target) => {\n            const accessor = target.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_11__[\"VertexAttribute\"].Position);\n            let offset = 0;\n            if (_system_System__WEBPACK_IMPORTED_MODULE_14__[\"default\"].getInstance().processApproach === _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_15__[\"ProcessApproach\"].FastestWebGL1) {\n                offset = memoryManager.getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_13__[\"BufferUse\"].GPUInstanceData).takenSizeInByte;\n            }\n            return (offset + accessor.byteOffsetInBuffer) / 4 / 4;\n        });\n        shaderProgram._gl.uniform1fv(shaderProgram.dataTextureMorphOffsetPosition, array);\n        let weights;\n        if (meshComponent.mesh.weights.length > 0) {\n            weights = meshComponent.mesh.weights;\n        }\n        else if (blendShapeComponent.weights.length > 0) {\n            weights = blendShapeComponent.weights;\n        }\n        else {\n            weights = new Float32Array(primitive.targets.length);\n        }\n        shaderProgram._gl.uniform1fv(shaderProgram.morphWeights, weights);\n    }\n    setParametersForGPU({ material, shaderProgram, firstTime, args }) {\n    }\n}\nAbstractMaterialNode.__invalidMaterialNodeUid = -1;\nAbstractMaterialNode.__invalidMaterialNodeCount = -1;\nAbstractMaterialNode.materialNodes = [];\nAbstractMaterialNode.__transposedMatrix44 = new _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__[\"default\"]([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nAbstractMaterialNode.__dummyWhiteTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\nAbstractMaterialNode.__dummyBlueTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\nAbstractMaterialNode.__dummyBlackTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\nAbstractMaterialNode.__dummyBlackCubeTexture = new _textures_CubeTexture__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\nAbstractMaterialNode.__tmp_vector4 = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_8__[\"default\"].zero();\nAbstractMaterialNode.__tmp_vector2 = _math_MutableVector2__WEBPACK_IMPORTED_MODULE_7__[\"default\"].zero();\nAbstractMaterialNode.__lightPositioins = new Float32Array(0);\nAbstractMaterialNode.__lightDirections = new Float32Array(0);\nAbstractMaterialNode.__lightIntensities = new Float32Array(0);\n\n\n//# sourceURL=webpack:///./src/foundation/materials/AbstractMaterialNode.ts?");

/***/ }),

/***/ "./src/foundation/materials/ClassicShadingSingleMaterialNode.ts":
/*!**********************************************************************!*\
  !*** ./src/foundation/materials/ClassicShadingSingleMaterialNode.ts ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ClassicShadingSingleMaterialNode; });\n/* harmony import */ var _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Scalar */ \"./src/foundation/math/Scalar.ts\");\n/* harmony import */ var _components_SkeletalComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/SkeletalComponent */ \"./src/foundation/components/SkeletalComponent.ts\");\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/ShaderType */ \"./src/foundation/definitions/ShaderType.ts\");\n/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../definitions/ShaderVariableUpdateInterval */ \"./src/foundation/definitions/ShaderVariableUpdateInterval.ts\");\n/* harmony import */ var _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../definitions/ShadingModel */ \"./src/foundation/definitions/ShadingModel.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _webgl_shaderity_shaders_classicSingleShader_classicSingleShader_vert__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../webgl/shaderity_shaders/classicSingleShader/classicSingleShader.vert */ \"./src/webgl/shaderity_shaders/classicSingleShader/classicSingleShader.vert\");\n/* harmony import */ var _webgl_shaderity_shaders_classicSingleShader_classicSingleShader_frag__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../webgl/shaderity_shaders/classicSingleShader/classicSingleShader.frag */ \"./src/webgl/shaderity_shaders/classicSingleShader/classicSingleShader.frag\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass ClassicShadingSingleMaterialNode extends _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor({ isSkinning, isLighting }) {\n        super(null, \"classicShading\"\n            + (isSkinning ? '+skinning' : '')\n            + (isLighting ? '' : '-lighting'), { isMorphing: false, isLighting: isLighting, isSkinning: isSkinning }, _webgl_shaderity_shaders_classicSingleShader_classicSingleShader_vert__WEBPACK_IMPORTED_MODULE_13__[\"default\"], _webgl_shaderity_shaders_classicSingleShader_classicSingleShader_frag__WEBPACK_IMPORTED_MODULE_14__[\"default\"]);\n        let shaderSemanticsInfoArray = [];\n        shaderSemanticsInfoArray.push({\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__[\"ShaderSemantics\"].ShadingModel, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_5__[\"default\"](_definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_10__[\"ShadingModel\"].Constant.index), min: 0, max: 3,\n        }, {\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__[\"ShaderSemantics\"].Shininess, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_5__[\"default\"](5), min: 0, max: Number.MAX_VALUE,\n        }, {\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__[\"ShaderSemantics\"].DiffuseColorFactor, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec4,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Vector4__WEBPACK_IMPORTED_MODULE_12__[\"default\"](1, 1, 1, 1), min: 0, max: 2,\n        }, {\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__[\"ShaderSemantics\"].DiffuseColorTexture, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Texture2D,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].EveryTime,\n            initialValue: [0, _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].__dummyWhiteTexture], min: 0, max: Number.MAX_SAFE_INTEGER,\n        }, {\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__[\"ShaderSemantics\"].NormalTexture, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Texture2D,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].EveryTime,\n            initialValue: [1, _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].__dummyBlueTexture], min: 0, max: Number.MAX_SAFE_INTEGER,\n        });\n        shaderSemanticsInfoArray.push({\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__[\"ShaderSemantics\"].PointSize, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_5__[\"default\"](30.0), min: 0, max: 100,\n        }, {\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__[\"ShaderSemantics\"].PointDistanceAttenuation, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: false,\n            initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_11__[\"default\"](0.0, 0.1, 0.01), min: 0, max: 1,\n        });\n        if (isLighting) {\n            this.__definitions += '#define RN_IS_LIGHTING\\n';\n        }\n        if (isSkinning) {\n            this.__definitions += '#define RN_IS_SKINNING\\n';\n        }\n        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);\n    }\n    setParametersForGPU({ material, shaderProgram, firstTime, args }) {\n        if (args.setUniform) {\n            this.setWorldMatrix(shaderProgram, args.worldMatrix);\n            this.setNormalMatrix(shaderProgram, args.normalMatrix);\n        }\n        /// Matrices\n        let cameraComponent = args.renderPass.cameraComponent;\n        if (cameraComponent == null) {\n            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getInstance().getComponent(_components_CameraComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].main);\n        }\n        this.setViewInfo(shaderProgram, cameraComponent, material, args.setUniform);\n        this.setProjection(shaderProgram, cameraComponent, material, args.setUniform);\n        /// Skinning\n        const skeletalComponent = args.entity.getComponent(_components_SkeletalComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n        this.setSkinning(shaderProgram, skeletalComponent, args.setUniform);\n        // Lights\n        this.setLightsInfo(shaderProgram, args.lightComponents, material, args.setUniform);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/materials/ClassicShadingSingleMaterialNode.ts?");

/***/ }),

/***/ "./src/foundation/materials/DepthEncodeSingleMaterialNode.ts":
/*!*******************************************************************!*\
  !*** ./src/foundation/materials/DepthEncodeSingleMaterialNode.ts ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return DepthEncodeSingleMaterialNode; });\n/* harmony import */ var _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _webgl_shaders_DepthEncodeShader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../webgl/shaders/DepthEncodeShader */ \"./src/webgl/shaders/DepthEncodeShader.ts\");\n/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/Scalar */ \"./src/foundation/math/Scalar.ts\");\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/ShaderType */ \"./src/foundation/definitions/ShaderType.ts\");\n/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../definitions/ShaderVariableUpdateInterval */ \"./src/foundation/definitions/ShaderVariableUpdateInterval.ts\");\n/* harmony import */ var _components_SkeletalComponent__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/SkeletalComponent */ \"./src/foundation/components/SkeletalComponent.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\nclass DepthEncodeSingleMaterialNode extends _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor({ isSkinning }) {\n        super(_webgl_shaders_DepthEncodeShader__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInstance(), 'depthEncodeShading' + (isSkinning ? '+skinning' : ''), { isMorphing: false, isSkinning, isLighting: false });\n        const shaderSemanticsInfoArray = [];\n        shaderSemanticsInfoArray.push({\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__[\"ShaderSemantics\"].PointSize, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_6__[\"default\"](30.0), min: 0, max: 100\n        }, {\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__[\"ShaderSemantics\"].PointDistanceAttenuation, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: false,\n            initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_11__[\"default\"](0.0, 0.1, 0.01), min: 0, max: 1\n        });\n        if (isSkinning) {\n            this.__definitions += '#define RN_IS_SKINNING';\n        }\n        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);\n    }\n    setParametersForGPU({ material, shaderProgram, firstTime, args }) {\n        if (args.setUniform) {\n            this.setWorldMatrix(shaderProgram, args.worldMatrix);\n            this.setNormalMatrix(shaderProgram, args.normalMatrix);\n        }\n        /// Matrices\n        let cameraComponent = args.renderPass.cameraComponent;\n        if (cameraComponent == null) {\n            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getInstance().getComponent(_components_CameraComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].main);\n        }\n        this.setViewInfo(shaderProgram, cameraComponent, material, args.setUniform);\n        this.setProjection(shaderProgram, cameraComponent, material, args.setUniform);\n        material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__[\"ShaderSemantics\"].ViewPosition, cameraComponent.entity.getTransform().translate);\n        /// Skinning\n        const skeletalComponent = args.entity.getComponent(_components_SkeletalComponent__WEBPACK_IMPORTED_MODULE_10__[\"default\"]);\n        this.setSkinning(shaderProgram, skeletalComponent, args.setUniform);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/materials/DepthEncodeSingleMaterialNode.ts?");

/***/ }),

/***/ "./src/foundation/materials/EntityUIDOutputSingleMaterialNode.ts":
/*!***********************************************************************!*\
  !*** ./src/foundation/materials/EntityUIDOutputSingleMaterialNode.ts ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EntityUIDOutputSingleMaterialNode; });\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/ShaderType */ \"./src/foundation/definitions/ShaderType.ts\");\n/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/Scalar */ \"./src/foundation/math/Scalar.ts\");\n/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../definitions/ShaderVariableUpdateInterval */ \"./src/foundation/definitions/ShaderVariableUpdateInterval.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _components_SkeletalComponent__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/SkeletalComponent */ \"./src/foundation/components/SkeletalComponent.ts\");\n/* harmony import */ var _webgl_shaders_EntityUIDOutputSingleShader__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../webgl/shaders/EntityUIDOutputSingleShader */ \"./src/webgl/shaders/EntityUIDOutputSingleShader.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../math/MutableMatrix33 */ \"./src/foundation/math/MutableMatrix33.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass EntityUIDOutputSingleMaterialNode extends _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor() {\n        super(_webgl_shaders_EntityUIDOutputSingleShader__WEBPACK_IMPORTED_MODULE_11__[\"default\"].getInstance(), \"entityUidOutputShading\"\n            + (true ? '+skinning' : undefined)\n            + (false ? undefined : '-lighting'), { isMorphing: false, isSkinning: true, isLighting: false });\n        EntityUIDOutputSingleMaterialNode.initDefaultTextures();\n        let shaderSemanticsInfoArray = [\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].WorldMatrix, isComponentData: true, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Mat4, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__[\"ShaderType\"].VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__[\"ShaderVariableUpdateInterval\"].EveryTime, initialValue: _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_12__[\"default\"].zero()\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].NormalMatrix, isComponentData: true, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Mat3, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__[\"ShaderType\"].VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__[\"ShaderVariableUpdateInterval\"].EveryTime, initialValue: _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_13__[\"default\"].zero()\n            },\n            // {semantic: ShaderSemantics.ViewMatrix, isComponentData: true, compositionType: CompositionType.Mat4, componentType: ComponentType.Float,\n            //   stage: ShaderType.VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, updateInteval: ShaderVariableUpdateInterval.FirstTimeOnly, initialValue: MutableMatrix44.zero() },\n            // {semantic: ShaderSemantics.ProjectionMatrix, isComponentData: true, compositionType: CompositionType.Mat4, componentType: ComponentType.Float,\n            //   stage: ShaderType.VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, updateInteval: ShaderVariableUpdateInterval.FirstTimeOnly, initialValue: MutableMatrix44.zero() },\n            // {\n            //   semantic: ShaderSemantics.ViewPosition,\n            //   compositionType: CompositionType.Vec3,\n            //   componentType: ComponentType.Float,\n            //   stage: ShaderType.VertexShader,\n            //   min: -Number.MAX_VALUE,\n            //   max: Number.MAX_VALUE,\n            //   isSystem: true,\n            //   updateInteval: ShaderVariableUpdateInterval.FirstTimeOnly,\n            //   initialValue: new Vector3(0, 0, 0),\n            //   soloDatum: true\n            // },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].PointSize, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__[\"ShaderType\"].VertexShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: true,\n                initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_6__[\"default\"](30.0), min: 0, max: 100,\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].PointDistanceAttenuation, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec3, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__[\"ShaderType\"].VertexShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: true,\n                initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](0.0, 0.1, 0.01), min: 0, max: 1,\n            },\n        ];\n        if (true) {\n            this.__definitions += '#define RN_IS_SKINNING\\n';\n        }\n        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);\n    }\n    setParametersForGPU({ material, shaderProgram, firstTime, args }) {\n        if (args.setUniform) {\n            this.setWorldMatrix(shaderProgram, args.worldMatrix);\n            this.setNormalMatrix(shaderProgram, args.normalMatrix);\n        }\n        /// Matrices\n        let cameraComponent = args.renderPass.cameraComponent;\n        if (cameraComponent == null) {\n            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getInstance().getComponent(_components_CameraComponent__WEBPACK_IMPORTED_MODULE_9__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_9__[\"default\"].main);\n        }\n        this.setViewInfo(shaderProgram, cameraComponent, material, args.setUniform);\n        this.setProjection(shaderProgram, cameraComponent, material, args.setUniform);\n        /// Skinning\n        const skeletalComponent = args.entity.getComponent(_components_SkeletalComponent__WEBPACK_IMPORTED_MODULE_10__[\"default\"]);\n        this.setSkinning(shaderProgram, skeletalComponent, args.setUniform);\n        // Lights\n        this.setLightsInfo(shaderProgram, args.lightComponents, material, args.setUniform);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/materials/EntityUIDOutputSingleMaterialNode.ts?");

/***/ }),

/***/ "./src/foundation/materials/EnvConstantSingleMaterialNode.ts":
/*!*******************************************************************!*\
  !*** ./src/foundation/materials/EnvConstantSingleMaterialNode.ts ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EnvConstantSingleMaterialNode; });\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _webgl_shaders_EnvCostantShader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../webgl/shaders/EnvCostantShader */ \"./src/webgl/shaders/EnvCostantShader.ts\");\n/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/ShaderType */ \"./src/foundation/definitions/ShaderType.ts\");\n/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/Scalar */ \"./src/foundation/math/Scalar.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n\n\n\n\n\n\n\n\n\n\nclass EnvConstantSingleMaterialNode extends _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor() {\n        super(_webgl_shaders_EnvCostantShader__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInstance(), \"envConstantShading\");\n        EnvConstantSingleMaterialNode.initDefaultTextures();\n        const shaderSemanticsInfoArray = [\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].DiffuseColorFactor,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec4,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__[\"ShaderType\"].PixelShader,\n                min: 0,\n                max: 2,\n                isSystem: false,\n                initialValue: new _math_Vector4__WEBPACK_IMPORTED_MODULE_4__[\"default\"](1, 1, 1, 1)\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].ColorEnvTexture,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].TextureCube,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Int,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__[\"ShaderType\"].PixelShader,\n                min: 0,\n                max: Number.MAX_SAFE_INTEGER,\n                isSystem: false,\n                initialValue: [\n                    0,\n                    _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__dummyBlackCubeTexture\n                ]\n            },\n            {\n                semantic: EnvConstantSingleMaterialNode.envRotation,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__[\"ShaderType\"].PixelShader,\n                min: -Math.PI,\n                max: Math.PI,\n                isSystem: false,\n                initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_7__[\"default\"](0)\n            },\n        ];\n        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);\n    }\n    setParametersForGPU({ material, shaderProgram, firstTime, args }) {\n        if (args.setUniform) {\n            this.setWorldMatrix(shaderProgram, args.worldMatrix);\n            this.setNormalMatrix(shaderProgram, args.normalMatrix);\n        }\n        /// Matrices\n        let cameraComponent = args.renderPass.cameraComponent;\n        if (cameraComponent == null) {\n            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getInstance().getComponent(_components_CameraComponent__WEBPACK_IMPORTED_MODULE_9__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_9__[\"default\"].main);\n        }\n        if (cameraComponent) {\n            this.setViewInfo(shaderProgram, cameraComponent, material, args.setUniform);\n            this.setProjection(shaderProgram, cameraComponent, material, args.setUniform);\n        }\n    }\n}\nEnvConstantSingleMaterialNode.envRotation = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemanticsClass\"]({ str: 'envRotation' });\n\n\n//# sourceURL=webpack:///./src/foundation/materials/EnvConstantSingleMaterialNode.ts?");

/***/ }),

/***/ "./src/foundation/materials/FXAA3QualitySingleMaterialNode.ts":
/*!********************************************************************!*\
  !*** ./src/foundation/materials/FXAA3QualitySingleMaterialNode.ts ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return FXAA3QualitySingleMaterialNode; });\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Vector2 */ \"./src/foundation/math/Vector2.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _webgl_shaders_FXAA3Quality__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../webgl/shaders/FXAA3Quality */ \"./src/webgl/shaders/FXAA3Quality.ts\");\n/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/ShaderType */ \"./src/foundation/definitions/ShaderType.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../definitions/ShaderVariableUpdateInterval */ \"./src/foundation/definitions/ShaderVariableUpdateInterval.ts\");\n\n\n\n\n\n\n\n\n\n\nclass FXAA3QualitySingleMaterialNode extends _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor() {\n        super(_webgl_shaders_FXAA3Quality__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInstance(), \"FXAA3QualityShading\");\n        FXAA3QualitySingleMaterialNode.initDefaultTextures();\n        const shaderSemanticsInfoArray = [\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].BaseColorTexture, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].EveryTime,\n                initialValue: [0, _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__dummyWhiteTexture], min: 0, max: Number.MAX_SAFE_INTEGER,\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].ScreenInfo, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec2, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: false,\n                initialValue: new _math_Vector2__WEBPACK_IMPORTED_MODULE_3__[\"default\"](0, 0), min: 0, max: Number.MAX_SAFE_INTEGER,\n            },\n        ];\n        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);\n    }\n    setParametersForGPU({ material, shaderProgram, firstTime, args }) {\n        if (args.setUniform) {\n            this.setWorldMatrix(shaderProgram, args.worldMatrix);\n        }\n        /// Matrices\n        let cameraComponent = args.renderPass.cameraComponent;\n        if (cameraComponent == null) {\n            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getInstance().getComponent(_components_CameraComponent__WEBPACK_IMPORTED_MODULE_8__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_8__[\"default\"].main);\n        }\n        if (cameraComponent) {\n            this.setViewInfo(shaderProgram, cameraComponent, material, args.setUniform);\n            this.setProjection(shaderProgram, cameraComponent, material, args.setUniform);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/materials/FXAA3QualitySingleMaterialNode.ts?");

/***/ }),

/***/ "./src/foundation/materials/GammaCorrectionSingleMaterialNode.ts":
/*!***********************************************************************!*\
  !*** ./src/foundation/materials/GammaCorrectionSingleMaterialNode.ts ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GammaCorrectionSingleMaterialNode; });\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _webgl_shaders_GammaCorrectionShader__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../webgl/shaders/GammaCorrectionShader */ \"./src/webgl/shaders/GammaCorrectionShader.ts\");\n/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/ShaderType */ \"./src/foundation/definitions/ShaderType.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/ShaderVariableUpdateInterval */ \"./src/foundation/definitions/ShaderVariableUpdateInterval.ts\");\n\n\n\n\n\n\n\n\n\nclass GammaCorrectionSingleMaterialNode extends _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor() {\n        super(_webgl_shaders_GammaCorrectionShader__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance(), \"GammaCorrection\");\n        GammaCorrectionSingleMaterialNode.initDefaultTextures();\n        const shaderSemanticsInfoArray = [\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].BaseColorTexture, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Int,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__[\"ShaderVariableUpdateInterval\"].EveryTime,\n                initialValue: [0, _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__dummyWhiteTexture], min: 0, max: 10,\n            }\n        ];\n        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);\n    }\n    setParametersForGPU({ material, shaderProgram, firstTime, args }) {\n        if (args.setUniform) {\n            this.setWorldMatrix(shaderProgram, args.worldMatrix);\n        }\n        /// Matrices\n        let cameraComponent = args.renderPass.cameraComponent;\n        if (cameraComponent == null) {\n            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getInstance().getComponent(_components_CameraComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"].main);\n        }\n        if (cameraComponent) {\n            this.setViewInfo(shaderProgram, cameraComponent, material, args.setUniform);\n            this.setProjection(shaderProgram, cameraComponent, material, args.setUniform);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/materials/GammaCorrectionSingleMaterialNode.ts?");

/***/ }),

/***/ "./src/foundation/materials/MToonSingleMaterialNode.ts":
/*!*************************************************************!*\
  !*** ./src/foundation/materials/MToonSingleMaterialNode.ts ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MToonSingleMaterialNode; });\n/* harmony import */ var _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n/* harmony import */ var _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/AlphaMode */ \"./src/foundation/definitions/AlphaMode.ts\");\n/* harmony import */ var _components_BlendShapeComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/BlendShapeComponent */ \"./src/foundation/components/BlendShapeComponent.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _components_MeshComponent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _webgl_shaders_MToonShader__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../webgl/shaders/MToonShader */ \"./src/webgl/shaders/MToonShader.ts\");\n/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../math/Scalar */ \"./src/foundation/math/Scalar.ts\");\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../definitions/ShaderType */ \"./src/foundation/definitions/ShaderType.ts\");\n/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../definitions/ShaderVariableUpdateInterval */ \"./src/foundation/definitions/ShaderVariableUpdateInterval.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../math/VectorN */ \"./src/foundation/math/VectorN.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass MToonSingleMaterialNode extends _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(isOutline, materialProperties, textures, isMorphing, isSkinning, isLighting, debugMode) {\n        super(_webgl_shaders_MToonShader__WEBPACK_IMPORTED_MODULE_10__[\"default\"].getInstance(), 'MToonShading'\n            + (isMorphing ? '+morphing' : '')\n            + (isSkinning ? '+skinning' : '')\n            + (isLighting ? '' : '-lighting'), { isMorphing: isMorphing, isSkinning: isSkinning, isLighting: isLighting });\n        this.__OutlineWidthModeIsScreen = false;\n        this.__floatProperties = {};\n        this.__vectorProperties = {};\n        this.__textureProperties = {};\n        let shaderSemanticsInfoArray = [];\n        if (materialProperties != null) {\n            this.__floatProperties = materialProperties.floatProperties;\n            this.__vectorProperties = materialProperties.vectorProperties;\n            this.__textureProperties = materialProperties.textureProperties;\n        }\n        else {\n            this.__floatProperties._BlendMode = 0.0;\n            this.__floatProperties._BumpScale = 1.0;\n            this.__floatProperties._CullMode = 2.0;\n            this.__floatProperties._Cutoff = 0.5;\n            this.__floatProperties._DebugMode = 0.0;\n            this.__floatProperties._DstBlend = 0.0;\n            this.__floatProperties._IndirectLightIntensity = 0.1;\n            this.__floatProperties._LightColorAttenuation = 0.0;\n            this.__floatProperties._OutlineColorMode = 0.0;\n            this.__floatProperties._OutlineCullMode = 1.0;\n            this.__floatProperties._OutlineLightingMix = 1.0;\n            this.__floatProperties._OutlineScaledMaxDistance = 1.0;\n            this.__floatProperties._OutlineWidth = 0.5;\n            this.__floatProperties._OutlineWidthMode = 0.0;\n            this.__floatProperties._ReceiveShadowRate = 1.0;\n            this.__floatProperties._RimFresnelPower = 1.0;\n            this.__floatProperties._RimLift = 0.0;\n            this.__floatProperties._RimLightingMix = 0.0;\n            this.__floatProperties._ShadeShift = 0.0;\n            this.__floatProperties._ShadeToony = 0.9;\n            this.__floatProperties._ShadingGradeRate = 1.0;\n            this.__floatProperties._SrcBlend = 1.0;\n            this.__floatProperties._ZWrite = 1.0;\n            // this.__floatProperties._UvAnimScrollX = 0.0;\n            // this.__floatProperties._UvAnimScrollY = 0.0;\n            // this.__floatProperties._UvAnimRotation = 0.0;\n            this.__vectorProperties._Color = [1, 1, 1, 1];\n            this.__vectorProperties._EmissionColor = [0, 0, 0];\n            this.__vectorProperties._OutlineColor = [0, 0, 0, 1];\n            this.__vectorProperties._ShadeColor = [0.97, 0.81, 0.86, 1];\n            this.__vectorProperties._RimColor = [0, 0, 0];\n            // this.__vectorProperties._BumpMap = [0, 0, 1, 1];\n            // this.__vectorProperties._EmissionMap = [0, 0, 1, 1];\n            // this.__vectorProperties._MainTex = [0, 0, 1, 1];\n            // this.__vectorProperties._OutlineWidthTexture = [0, 0, 1, 1];\n            // this.__vectorProperties._ReceiveShadowTexture = [0, 0, 1, 1];\n            // this.__vectorProperties._ShadeTexture = [0, 0, 1, 1];\n            // this.__vectorProperties._ShadingGradeTexture = [0, 0, 1, 1];\n            // this.__vectorProperties._SphereAdd = [0, 0, 1, 1];\n            this.__textureProperties._BumpMap = 0;\n            this.__textureProperties._EmissionMap = 1;\n            this.__textureProperties._MainTex = 0;\n            this.__textureProperties._OutlineWidthTexture = 0;\n            this.__textureProperties._ReceiveShadowTexture = 0;\n            this.__textureProperties._RimTexture = 1;\n            this.__textureProperties._ShadeTexture = 0;\n            this.__textureProperties._ShadingGradeTexture = 0;\n            this.__textureProperties._SphereAdd = 1;\n            // this.__textureProperties._UvAnimMaskTexture = 0;\n            textures = [\n                _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].__dummyWhiteTexture,\n                _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_0__[\"default\"].__dummyBlackTexture\n            ];\n        }\n        if (debugMode) {\n            this.__floatProperties._DebugMode = debugMode;\n        }\n        shaderSemanticsInfoArray.push({\n            semantic: MToonSingleMaterialNode._Cutoff, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.__floatProperties._Cutoff), min: 0, max: 1\n        }, {\n            semantic: MToonSingleMaterialNode._Color, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Vec4,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Vector4__WEBPACK_IMPORTED_MODULE_16__[\"default\"](this.__vectorProperties._Color), min: 0, max: 1,\n        }, {\n            semantic: MToonSingleMaterialNode._ShadeColor, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Vec3,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_15__[\"default\"](this.__vectorProperties._ShadeColor), min: 0, max: 1,\n        }, {\n            semantic: MToonSingleMaterialNode._MainTex, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Texture2D,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime,\n            initialValue: [0, textures[this.__textureProperties._MainTex]], min: 0, max: Number.MAX_SAFE_INTEGER,\n        }, {\n            semantic: MToonSingleMaterialNode._ShadeTexture, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Texture2D,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime,\n            initialValue: [1, textures[this.__textureProperties._ShadeTexture]], min: 0, max: Number.MAX_SAFE_INTEGER,\n        }, {\n            semantic: MToonSingleMaterialNode._BumpScale, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.__floatProperties._BumpScale), min: 0, max: 1\n        }, {\n            semantic: MToonSingleMaterialNode._BumpMap, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Texture2D,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime,\n            initialValue: [2, textures[this.__textureProperties._BumpMap]], min: 0, max: Number.MAX_SAFE_INTEGER,\n        }, {\n            semantic: MToonSingleMaterialNode._ReceiveShadowRate, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.__floatProperties._ReceiveShadowRate), min: 0, max: 1\n        }, {\n            semantic: MToonSingleMaterialNode._ReceiveShadowTexture, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Texture2D,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime,\n            initialValue: [3, textures[this.__textureProperties._ReceiveShadowTexture]], min: 0, max: Number.MAX_SAFE_INTEGER,\n        }, {\n            semantic: MToonSingleMaterialNode._ShadingGradeRate, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.__floatProperties._ShadingGradeRate), min: 0, max: 1\n        }, {\n            semantic: MToonSingleMaterialNode._ShadingGradeTexture, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Texture2D,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime,\n            initialValue: [4, textures[this.__textureProperties._ShadingGradeTexture]], min: 0, max: Number.MAX_SAFE_INTEGER,\n        }, {\n            semantic: MToonSingleMaterialNode._ShadeShift, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.__floatProperties._ShadeShift), min: 0, max: 1\n        }, {\n            semantic: MToonSingleMaterialNode._ShadeToony, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.__floatProperties._ShadeToony), min: 0, max: 1\n        }, {\n            semantic: MToonSingleMaterialNode._LightColorAttenuation, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.__floatProperties._LightColorAttenuation), min: 0, max: 1\n        }, {\n            semantic: MToonSingleMaterialNode._AmbientColor, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Vec3,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_15__[\"default\"](0.5785, 0.5785, 0.5785), min: 0, max: 1,\n        }, \n        // {\n        //   semantic: MToonSingleMaterialNode._IndirectLightIntensity, componentType: ComponentType.Float, compositionType: CompositionType.Scalar,\n        //   stage: ShaderType.PixelShader, isSystem: false, updateInteval: ShaderVariableUpdateInterval.EveryTime, soloDatum: false,\n        //   initialValue: new Scalar(this.floatPropertiesArray._IndirectLightIntensity), min: 0, max: 1\n        // },\n        {\n            semantic: MToonSingleMaterialNode._RimColor, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Vec3,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_15__[\"default\"](this.__vectorProperties._RimColor), min: 0, max: 1,\n        }, {\n            semantic: MToonSingleMaterialNode._RimTexture, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Texture2D,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime,\n            initialValue: [5, textures[this.__textureProperties._RimTexture]], min: 0, max: Number.MAX_SAFE_INTEGER,\n        }, {\n            semantic: MToonSingleMaterialNode._RimLightingMix, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.__floatProperties._RimLightingMix), min: 0, max: 1\n        }, {\n            semantic: MToonSingleMaterialNode._RimFresnelPower, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.__floatProperties._RimFresnelPower), min: 0, max: 1\n        }, {\n            semantic: MToonSingleMaterialNode._RimLift, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.__floatProperties._RimLift), min: 0, max: 1\n        }, {\n            semantic: MToonSingleMaterialNode.CameraUp, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Vec3,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: true, soloDatum: true,\n            initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_15__[\"default\"](0, 1, 0), min: 0, max: 1,\n        }, {\n            semantic: MToonSingleMaterialNode._SphereAdd, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Texture2D,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime,\n            initialValue: [6, textures[this.__textureProperties._SphereAdd]], min: 0, max: Number.MAX_SAFE_INTEGER,\n        }, {\n            semantic: MToonSingleMaterialNode._EmissionColor, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Vec3,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_15__[\"default\"](this.__vectorProperties._EmissionColor), min: 0, max: 1,\n        }, {\n            semantic: MToonSingleMaterialNode._EmissionMap, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Texture2D,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime,\n            initialValue: [8, textures[this.__textureProperties._EmissionMap]], min: 0, max: Number.MAX_SAFE_INTEGER,\n        }, \n        // {\n        //   semantic: MToonSingleMaterialNode._UvAnimMaskTexture, componentType: ComponentType.Int, compositionType: CompositionType.Texture2D,\n        //   stage: ShaderType.PixelShader, isSystem: false, updateInteval: ShaderVariableUpdateInterval.EveryTime,\n        //   initialValue: [9, texturePropertiesArray._UvAnimMaskTexture], min: 0, max: Number.MAX_SAFE_INTEGER,\n        // },\n        // {\n        //   semantic: MToonSingleMaterialNode._UvAnimScrollX, componentType: ComponentType.Float, compositionType: CompositionType.Scalar,\n        //   stage: ShaderType.PixelShader, isSystem: false, updateInteval: ShaderVariableUpdateInterval.EveryTime, soloDatum: false,\n        //   initialValue: new Scalar(this.floatPropertiesArray._UvAnimScrollX), min: 0, max: 1\n        // },\n        // {\n        //   semantic: MToonSingleMaterialNode._UvAnimScrollY, componentType: ComponentType.Float, compositionType: CompositionType.Scalar,\n        //   stage: ShaderType.PixelShader, isSystem: false, updateInteval: ShaderVariableUpdateInterval.EveryTime, soloDatum: false,\n        //   initialValue:  new Scalar(this.floatPropertiesArray._UvAnimScrollY), min: 0, max: 1\n        // },\n        // {\n        //   semantic: MToonSingleMaterialNode._UvAnimRotation, componentType: ComponentType.Float, compositionType: CompositionType.Scalar,\n        //   stage: ShaderType.PixelShader, isSystem: false, updateInteval: ShaderVariableUpdateInterval.EveryTime, soloDatum: false,\n        //   initialValue: new Scalar(this.floatPropertiesArray._UvAnimRotation), min: 0, max: 1\n        // },\n        {\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemantics\"].Wireframe, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Vec3,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_15__[\"default\"](0, 0, 1), min: 0, max: 10,\n        });\n        // _DebugMode\n        switch (this.__floatProperties._DebugMode) {\n            case 1:\n                this.__definitions += '#define RN_MTOON_DEBUG_NORMAL\\n';\n                break;\n            case 2:\n                this.__definitions += '#define RN_MTOON_DEBUG_LITSHADERATE\\n';\n                break;\n        }\n        if (this.__textureProperties._BlendMode !== textures.length - 2) {\n            this.__definitions += '#define RN_MTOON_HAS_NORMALMAP\\n';\n        }\n        if (isOutline) {\n            this.__definitions += '#define RN_MTOON_IS_OUTLINE\\n';\n            // _OutlineWidthMode\n            switch (this.__floatProperties._OutlineWidthMode) {\n                case 0:\n                    this.__definitions += '#define RN_MTOON_OUTLINE_NONE\\n';\n                    break;\n                case 1:\n                    this.__definitions += '#define RN_MTOON_OUTLINE_WIDTH_WORLD\\n';\n                    break;\n                case 2:\n                    this.__definitions += '#define RN_MTOON_OUTLINE_WIDTH_SCREEN\\n';\n                    this.__OutlineWidthModeIsScreen = true;\n                    break;\n            }\n            // _OutlineColorMode\n            switch (this.__floatProperties._OutlineColorMode) {\n                case 0:\n                    this.__definitions += '#define RN_MTOON_OUTLINE_COLOR_FIXED\\n';\n                    break;\n                case 1:\n                    this.__definitions += '#define RN_MTOON_OUTLINE_COLOR_MIXED\\n';\n                    break;\n            }\n            shaderSemanticsInfoArray.push({\n                semantic: MToonSingleMaterialNode._OutlineWidthTexture, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Texture2D,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].VertexShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime,\n                initialValue: [9, textures[this.__textureProperties._OutlineWidthTexture]], min: 0, max: Number.MAX_SAFE_INTEGER,\n            }, {\n                semantic: MToonSingleMaterialNode._OutlineWidth, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].VertexShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n                initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.__floatProperties._OutlineWidth), min: 0, max: 1\n            }, {\n                semantic: MToonSingleMaterialNode._OutlineScaledMaxDistance, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].VertexShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n                initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.__floatProperties._OutlineScaledMaxDistance), min: 0, max: 1\n            }, {\n                semantic: MToonSingleMaterialNode._OutlineColor, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Vec3,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n                initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_15__[\"default\"](this.__vectorProperties._OutlineColor), min: 0, max: 1,\n            }, {\n                semantic: MToonSingleMaterialNode._OutlineLightingMix, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n                initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.__floatProperties._OutlineLightingMix), min: 0, max: 1\n            }, {\n                semantic: MToonSingleMaterialNode.Aspect, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].VertexShader, isSystem: true, soloDatum: true,\n                initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](1.0), min: 0, max: 1,\n            });\n        }\n        if (isLighting) {\n            this.__definitions += '#define RN_IS_LIGHTING\\n';\n        }\n        if (isSkinning) {\n            this.__definitions += '#define RN_IS_SKINNING\\n';\n        }\n        if (isMorphing) {\n            this.__definitions += '#define RN_IS_MORPHING\\n';\n            shaderSemanticsInfoArray.push({\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemantics\"].MorphTargetNumber, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].Scalar,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].VertexShader, isSystem: true, soloDatum: true,\n                initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_11__[\"default\"](0), min: 0, max: _core_Config__WEBPACK_IMPORTED_MODULE_8__[\"default\"].maxVertexMorphNumberInShader, needUniformInFastest: true\n            }, {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemantics\"].DataTextureMorphOffsetPosition, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].ScalarArray, maxIndex: _core_Config__WEBPACK_IMPORTED_MODULE_8__[\"default\"].maxVertexMorphNumberInShader,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].VertexShader, isSystem: true, soloDatum: true,\n                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_17__[\"default\"](new Float32Array(_core_Config__WEBPACK_IMPORTED_MODULE_8__[\"default\"].maxVertexMorphNumberInShader)), min: -Number.MAX_VALUE, max: Number.MAX_VALUE, needUniformInFastest: true\n            }, {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemantics\"].MorphWeights, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__[\"CompositionType\"].ScalarArray, maxIndex: _core_Config__WEBPACK_IMPORTED_MODULE_8__[\"default\"].maxVertexMorphNumberInShader,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__[\"ShaderType\"].VertexShader, isSystem: true, soloDatum: true,\n                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_17__[\"default\"](new Float32Array(_core_Config__WEBPACK_IMPORTED_MODULE_8__[\"default\"].maxVertexMorphNumberInShader)), min: -Number.MAX_VALUE, max: Number.MAX_VALUE, needUniformInFastest: true\n            });\n        }\n        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);\n    }\n    setMaterialParameters(material, isOutline) {\n        if (MToonSingleMaterialNode.blendEquationModeAlpha === undefined) {\n            MToonSingleMaterialNode.__initializeBlendEquationModeAlpha();\n        }\n        if (this.__floatProperties._BlendMode !== 0) {\n            switch (this.__floatProperties._BlendMode) {\n                case 1:\n                    this.__definitions += '#define RN_ALPHATEST_ON\\n';\n                    material.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__[\"AlphaMode\"].Mask;\n                    break;\n                case 2:\n                    this.__definitions += '#define RN_ALPHABLEND_ON\\n';\n                    material.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__[\"AlphaMode\"].Blend;\n                    break;\n                case 3:\n                    this.__definitions += '#define RN_ALPHABLEND_ON\\n';\n                    material.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__[\"AlphaMode\"].Blend;\n                    break;\n            }\n            const blendEquationMode = 32774; // gl.FUNC_ADD\n            const blendEquationModeAlpha = MToonSingleMaterialNode.blendEquationModeAlpha;\n            const blendFuncSrcFactor = MToonSingleMaterialNode.unityBlendEnumCorrespondence(this.__floatProperties._SrcBlend);\n            const blendFuncDstFactor = MToonSingleMaterialNode.unityBlendEnumCorrespondence(this.__floatProperties._DstBlend);\n            material.setBlendEquationMode(blendEquationMode, blendEquationModeAlpha);\n            material.setBlendFuncFactor(blendFuncSrcFactor, blendFuncDstFactor);\n        }\n        if (isOutline) {\n            switch (this.__floatProperties._OutlineCullMode) {\n                case 0:\n                    material.cullface = false;\n                    break;\n                case 1:\n                    material.cullface = true;\n                    material.cullFrontFaceCCW = false;\n                    break;\n                case 2:\n                    material.cullface = true;\n                    material.cullFrontFaceCCW = true;\n                    break;\n            }\n        }\n        else {\n            switch (this.__floatProperties._CullMode) {\n                case 0:\n                    material.cullface = false;\n                    break;\n                case 1:\n                    material.cullface = true;\n                    material.cullFrontFaceCCW = false;\n                    break;\n                case 2:\n                    material.cullface = true;\n                    material.cullFrontFaceCCW = true;\n                    break;\n            }\n        }\n    }\n    static __initializeBlendEquationModeAlpha() {\n        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getWebGLResourceRepository();\n        const glw = webGLResourceRepository.currentWebGLContextWrapper;\n        const gl = glw.getRawContext();\n        if (glw.isWebGL2) {\n            MToonSingleMaterialNode.blendEquationModeAlpha = gl.MAX;\n        }\n        else if (glw.webgl1ExtBM) {\n            MToonSingleMaterialNode.blendEquationModeAlpha = glw.webgl1ExtBM.MAX_EXT;\n        }\n        else {\n            MToonSingleMaterialNode.blendEquationModeAlpha = gl.FUNC_ADD;\n        }\n    }\n    setParametersForGPU({ material, shaderProgram, firstTime, args }) {\n        let cameraComponent = args.renderPass.cameraComponent;\n        if (cameraComponent == null) {\n            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInstance().getComponent(_components_CameraComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"].main);\n        }\n        if (args.setUniform) {\n            /// Matrices\n            this.setWorldMatrix(shaderProgram, args.worldMatrix);\n            this.setNormalMatrix(shaderProgram, args.normalMatrix);\n            this.setViewInfo(shaderProgram, cameraComponent, material, args.setUniform);\n            this.setProjection(shaderProgram, cameraComponent, material, args.setUniform);\n            /// Skinning\n            const skeletalComponent = args.entity.getSkeletal();\n            this.setSkinning(shaderProgram, skeletalComponent, args.setUniform);\n            // Lights\n            this.setLightsInfo(shaderProgram, args.lightComponents, material, args.setUniform);\n            shaderProgram._gl.uniform3fv(shaderProgram.cameraUp, cameraComponent.upInner.v);\n            if (this.__OutlineWidthModeIsScreen) {\n                shaderProgram._gl.uniform1f(shaderProgram.aspect, cameraComponent.aspect);\n            }\n        }\n        else {\n            material.setParameter(MToonSingleMaterialNode.CameraUp, cameraComponent.upInner);\n            if (this.__OutlineWidthModeIsScreen) {\n                material.setParameter(MToonSingleMaterialNode.Aspect, cameraComponent.aspect);\n            }\n        }\n        // Morph\n        this.setMorphInfo(shaderProgram, args.entity.getComponent(_components_MeshComponent__WEBPACK_IMPORTED_MODULE_9__[\"default\"]), args.entity.getComponent(_components_BlendShapeComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"]), args.primitive);\n    }\n    static unityBlendEnumCorrespondence(enumNumber) {\n        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getWebGLResourceRepository();\n        const glw = webGLResourceRepository.currentWebGLContextWrapper;\n        const gl = glw.getRawContext();\n        let result;\n        switch (enumNumber) {\n            case 0:\n                result = gl.ZERO;\n                break;\n            case 1:\n                result = gl.ONE;\n                break;\n            case 2:\n                result = gl.DST_COLOR;\n                break;\n            case 3:\n                result = gl.SRC_COLOR;\n                break;\n            case 4:\n                result = gl.ONE_MINUS_DST_COLOR;\n                break;\n            case 5:\n                result = gl.SRC_ALPHA;\n                break;\n            case 6:\n                result = gl.ONE_MINUS_SRC_COLOR;\n                break;\n            case 7:\n                result = gl.DST_ALPHA;\n                break;\n            case 8:\n                result = gl.ONE_MINUS_DST_ALPHA;\n                break;\n            case 9:\n                result = gl.SRC_ALPHA_SATURATE;\n                break;\n            case 10:\n                result = gl.ONE_MINUS_SRC_ALPHA;\n                break;\n        }\n        return result;\n    }\n}\nMToonSingleMaterialNode._Cutoff = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'cutoff' });\nMToonSingleMaterialNode._Color = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'litColor' });\nMToonSingleMaterialNode._ShadeColor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'shadeColor' });\nMToonSingleMaterialNode._MainTex = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'litColorTexture' });\nMToonSingleMaterialNode._ShadeTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'shadeColorTexture' });\nMToonSingleMaterialNode._BumpScale = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'normalScale' });\nMToonSingleMaterialNode._BumpMap = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'normalTexture' });\nMToonSingleMaterialNode._ReceiveShadowRate = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'receiveShadowRate' });\nMToonSingleMaterialNode._ReceiveShadowTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'receiveShadowTexture' });\nMToonSingleMaterialNode._ShadingGradeRate = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'shadingGradeRate' });\nMToonSingleMaterialNode._ShadingGradeTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'shadingGradeTexture' });\nMToonSingleMaterialNode._ShadeShift = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'shadeShift' });\nMToonSingleMaterialNode._ShadeToony = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'shadeToony' });\nMToonSingleMaterialNode._LightColorAttenuation = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'lightColorAttenuation' });\nMToonSingleMaterialNode._AmbientColor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'ambientColor' });\n// static readonly _IndirectLightIntensity = new ShaderSemanticsClass({ str: 'indirectLightIntensity' });\nMToonSingleMaterialNode._RimTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'rimTexture' });\nMToonSingleMaterialNode._RimColor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'rimColor' });\nMToonSingleMaterialNode._RimLightingMix = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'rimLightingMix' });\nMToonSingleMaterialNode._RimFresnelPower = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'rimFresnelPower' });\nMToonSingleMaterialNode._RimLift = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'rimLift' });\nMToonSingleMaterialNode._SphereAdd = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'matCapTexture' });\nMToonSingleMaterialNode._EmissionColor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'emissionColor' });\nMToonSingleMaterialNode._EmissionMap = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'emissionTexture' });\nMToonSingleMaterialNode._OutlineWidthTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'outlineWidthTexture' });\nMToonSingleMaterialNode._OutlineWidth = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'outlineWidth' });\nMToonSingleMaterialNode._OutlineScaledMaxDistance = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'outlineScaledMaxDistance' });\nMToonSingleMaterialNode._OutlineColor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'outlineColor' });\nMToonSingleMaterialNode._OutlineLightingMix = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'outlineLightingMix' });\nMToonSingleMaterialNode.Aspect = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'aspect' });\nMToonSingleMaterialNode.CameraUp = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_12__[\"ShaderSemanticsClass\"]({ str: 'cameraUp' });\nMToonSingleMaterialNode.blendEquationModeAlpha = null;\n\n\n//# sourceURL=webpack:///./src/foundation/materials/MToonSingleMaterialNode.ts?");

/***/ }),

/***/ "./src/foundation/materials/Material.ts":
/*!**********************************************!*\
  !*** ./src/foundation/materials/Material.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Material; });\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/AlphaMode */ \"./src/foundation/definitions/AlphaMode.ts\");\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/MathClassUtil */ \"./src/foundation/math/MathClassUtil.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../definitions/ShaderType */ \"./src/foundation/definitions/ShaderType.ts\");\n/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../misc/DataUtil */ \"./src/foundation/misc/DataUtil.ts\");\n/* harmony import */ var _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../core/GlobalDataRepository */ \"./src/foundation/core/GlobalDataRepository.ts\");\n/* harmony import */ var _system_System__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../system/System */ \"./src/foundation/system/System.ts\");\n/* harmony import */ var _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../definitions/ProcessApproach */ \"./src/foundation/definitions/ProcessApproach.ts\");\n/* harmony import */ var _ShaderityUtility__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./ShaderityUtility */ \"./src/foundation/materials/ShaderityUtility.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The material class.\n * This class has one or more material nodes.\n */\nclass Material extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(materialTid, materialTypeName, materialNodes) {\n        super();\n        this.__materialNodes = [];\n        this.__fields = new Map();\n        this.__fieldsInfo = new Map();\n        this._shaderProgramUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].InvalidCGAPIResourceUid;\n        this.__alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__[\"AlphaMode\"].Opaque;\n        this.__materialSid = -1;\n        this.cullface = null;\n        this.cullFrontFaceCCW = true;\n        this.__blendEquationMode = 32774; // gl.FUNC_ADD\n        this.__blendEquationModeAlpha = null; // use blendEquation instead of blendEquationSeparate\n        this.__blendFuncSrcFactor = 770; // gl.SRC_ALPHA\n        this.__blendFuncDstFactor = 771; // gl.ONE_MINUS_SRC_ALPHA\n        this.__blendFuncAlphaSrcFactor = 1; // gl.ONE\n        this.__blendFuncAlphaDstFactor = 1; // gl.ONE\n        this.__materialNodes = materialNodes;\n        this.__materialTid = materialTid;\n        this.__materialTypeName = materialTypeName;\n        Material.__materials.push(this);\n        Material.__instancesByTypes.set(materialTypeName, this);\n        this.initialize();\n    }\n    get materialTypeName() {\n        return this.__materialTypeName;\n    }\n    /**\n     * Gets materialTID.\n     */\n    get materialTID() {\n        return this.__materialTid;\n    }\n    get fieldsInfoArray() {\n        return Array.from(this.__fieldsInfo.values());\n    }\n    /**\n     * Creates an instance of this Material class.\n     * @param materialTypeName The material type to create.\n     * @param materialNodes_ The material nodes to add to the created materlal.\n     */\n    static createMaterial(materialTypeName, materialNodes_) {\n        let materialNodes = materialNodes_;\n        if (!materialNodes) {\n            materialNodes = Material.__materialTypes.get(materialTypeName);\n        }\n        return new Material(Material.__materialTids.get(materialTypeName), materialTypeName, materialNodes);\n    }\n    static isRegistedMaterialType(materialTypeName) {\n        return Material.__materialTypes.has(materialTypeName);\n    }\n    static _calcAlignedByteLength(semanticInfo) {\n        const compsitionNumber = semanticInfo.compositionType.getNumberOfComponents();\n        const componentSizeInByte = semanticInfo.componentType.getSizeInBytes();\n        const semanticInfoByte = compsitionNumber * componentSizeInByte;\n        let alignedByteLength = semanticInfoByte;\n        if (alignedByteLength % 16 !== 0) {\n            alignedByteLength = semanticInfoByte + 16 - semanticInfoByte % 16;\n        }\n        if (_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].isArray(semanticInfo.compositionType)) {\n            const maxArrayLength = semanticInfo.maxIndex;\n            if (maxArrayLength != null) {\n                alignedByteLength *= maxArrayLength;\n            }\n            else {\n                console.error('semanticInfo has invalid maxIndex!');\n                alignedByteLength *= 100;\n            }\n        }\n        return alignedByteLength;\n    }\n    static __allocateBufferView(materialTypeName, materialNodes) {\n        let totalByteLength = 0;\n        const alignedByteLengthAndsemanticInfoArray = [];\n        for (let materialNode of materialNodes) {\n            for (let semanticInfo of materialNode._semanticsInfoArray) {\n                const alignedByteLength = Material._calcAlignedByteLength(semanticInfo);\n                let dataCount = 1;\n                if (!semanticInfo.soloDatum) {\n                    dataCount = Material.__maxInstances.get(materialTypeName);\n                }\n                totalByteLength += alignedByteLength * dataCount;\n                alignedByteLengthAndsemanticInfoArray.push({ alignedByte: alignedByteLength, semanticInfo: semanticInfo });\n            }\n        }\n        if (!this.__accessors.has(materialTypeName)) {\n            this.__accessors.set(materialTypeName, new Map());\n        }\n        const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getInstance().getBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__[\"BufferUse\"].GPUInstanceData);\n        let bufferView;\n        if (this.__bufferViews.has(materialTypeName)) {\n            bufferView = this.__bufferViews.get(materialTypeName);\n        }\n        else {\n            bufferView = buffer.takeBufferView({\n                byteLengthToNeed: totalByteLength,\n                byteStride: 0,\n                byteAlign: 16,\n                isAoS: false\n            });\n            this.__bufferViews.set(materialTypeName, bufferView);\n        }\n        for (let i = 0; i < alignedByteLengthAndsemanticInfoArray.length; i++) {\n            const alignedByte = alignedByteLengthAndsemanticInfoArray[i].alignedByte;\n            const semanticInfo = alignedByteLengthAndsemanticInfoArray[i].semanticInfo;\n            let count = 1;\n            if (!semanticInfo.soloDatum) {\n                count = Material.__maxInstances.get(materialTypeName);\n            }\n            let maxArrayLength = semanticInfo.maxIndex;\n            if (_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].isArray(semanticInfo.compositionType) && maxArrayLength == null) {\n                maxArrayLength = 100;\n            }\n            const accessor = bufferView.takeFlexibleAccessor({\n                compositionType: semanticInfo.compositionType,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float,\n                count: count,\n                byteStride: alignedByte,\n                arrayLength: maxArrayLength,\n                byteAlign: 16\n            });\n            const propertyName = this._getPropertyIndex(semanticInfo);\n            if (semanticInfo.soloDatum) {\n                const typedArray = accessor.takeOne();\n                let map = this.__soloDatumFields.get(materialTypeName);\n                if (map == null) {\n                    map = new Map();\n                    this.__soloDatumFields.set(materialTypeName, map);\n                }\n                map.set(this._getPropertyIndex(semanticInfo), _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_4__[\"default\"].initWithFloat32Array(semanticInfo.initialValue, semanticInfo.initialValue, typedArray, semanticInfo.compositionType));\n            }\n            else {\n                const properties = this.__accessors.get(materialTypeName);\n                properties.set(propertyName, accessor);\n            }\n        }\n        return bufferView;\n    }\n    /**\n     * Registers the material type.\n     * @param materialTypeName The type name of the material.\n     * @param materialNodes The material nodes to register.\n     * @param maxInstancesNumber The maximum number to create the material instances.\n     */\n    static registerMaterial(materialTypeName, materialNodes, maxInstanceNumber = _core_Config__WEBPACK_IMPORTED_MODULE_9__[\"default\"].maxMaterialInstanceForEachType) {\n        if (!Material.__materialTypes.has(materialTypeName)) {\n            Material.__materialTypes.set(materialTypeName, materialNodes);\n            const materialTid = ++Material.__materialTidCount;\n            Material.__materialTids.set(materialTypeName, materialTid);\n            Material.__maxInstances.set(materialTypeName, maxInstanceNumber);\n            Material.__allocateBufferView(materialTypeName, materialNodes);\n            Material.__materialInstanceCountOfType.set(materialTypeName, 0);\n            return true;\n        }\n        else {\n            console.info(`${materialTypeName} is already registered.`);\n            return false;\n        }\n    }\n    static getAllMaterials() {\n        return Material.__materials;\n    }\n    setMaterialNodes(materialNodes) {\n        this.__materialNodes = materialNodes;\n    }\n    get materialSID() {\n        return this.__materialSid;\n    }\n    /**\n     * @private\n     */\n    static _getPropertyIndex(semanticInfo) {\n        let propertyIndex = semanticInfo.semantic.index;\n        if (semanticInfo.index != null) {\n            propertyIndex += semanticInfo.index;\n            propertyIndex *= -1;\n        }\n        return propertyIndex;\n    }\n    /**\n     * @private\n     */\n    static _getPropertyIndex2(shaderSemantic, index) {\n        let propertyIndex = shaderSemantic.index;\n        if (index != null) {\n            propertyIndex += index;\n            propertyIndex *= -1;\n        }\n        return propertyIndex;\n    }\n    initialize() {\n        let countOfThisType = Material.__materialInstanceCountOfType.get(this.__materialTypeName);\n        this.__materialSid = countOfThisType++;\n        Material.__materialInstanceCountOfType.set(this.__materialTypeName, countOfThisType);\n        this.__materialNodes.forEach((materialNode) => {\n            const semanticsInfoArray = materialNode._semanticsInfoArray;\n            const accessorMap = Material.__accessors.get(this.__materialTypeName);\n            semanticsInfoArray.forEach((semanticsInfo) => {\n                const propertyIndex = Material._getPropertyIndex(semanticsInfo);\n                this.__fieldsInfo.set(propertyIndex, semanticsInfo);\n                if (!semanticsInfo.soloDatum) {\n                    const accessor = accessorMap.get(propertyIndex);\n                    const typedArray = accessor.takeOne();\n                    this.__fields.set(propertyIndex, _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_4__[\"default\"].initWithFloat32Array(semanticsInfo.initialValue, semanticsInfo.initialValue, typedArray, semanticsInfo.compositionType));\n                }\n            });\n        });\n    }\n    setParameter(shaderSemantic, value, index) {\n        const propertyIndex = Material._getPropertyIndex2(shaderSemantic, index);\n        const info = this.__fieldsInfo.get(propertyIndex);\n        if (info != null) {\n            let valueObj;\n            if (info.soloDatum) {\n                valueObj = Material.__soloDatumFields.get(this.__materialTypeName).get(propertyIndex);\n            }\n            else {\n                valueObj = this.__fields.get(propertyIndex);\n            }\n            _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_4__[\"default\"]._setForce(valueObj, value);\n        }\n    }\n    setTextureParameter(shaderSemantic, value) {\n        if (this.__fieldsInfo.has(shaderSemantic.index)) {\n            const array = this.__fields.get(shaderSemantic.index);\n            this.__fields.set(shaderSemantic.index, [array[0], value]);\n            if (shaderSemantic === _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemantics\"].DiffuseColorTexture || shaderSemantic === _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemantics\"].BaseColorTexture) {\n                if (value.isTransparent) {\n                    this.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__[\"AlphaMode\"].Blend;\n                }\n            }\n        }\n    }\n    getParameter(shaderSemantic) {\n        const info = this.__fieldsInfo.get(shaderSemantic.index);\n        if (info != null) {\n            if (info.soloDatum) {\n                return Material.__soloDatumFields.get(this.__materialTypeName).get(shaderSemantic.index);\n            }\n            else {\n                return this.__fields.get(shaderSemantic.index);\n            }\n        }\n        return void 0;\n    }\n    setUniformLocations(shaderProgramUid) {\n        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getWebGLResourceRepository();\n        const map = new Map();\n        let array = [];\n        this.__materialNodes.forEach((materialNode) => {\n            const semanticsInfoArray = materialNode._semanticsInfoArray;\n            array = array.concat(semanticsInfoArray);\n        });\n        webglResourceRepository.setupUniformLocations(shaderProgramUid, array);\n    }\n    setUniformValues(firstTime, args) {\n        const shaderProgramUid = this._shaderProgramUid;\n        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getWebGLResourceRepository();\n        const shaderProgram = webglResourceRepository.getWebGLResource(shaderProgramUid);\n        this.__fields.forEach((value, key) => {\n            const shaderSemantic = _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemanticsClass\"].getShaderSemanticByIndex(key);\n            webglResourceRepository.setUniformValue(shaderProgram, shaderSemantic.str, firstTime, value);\n        });\n    }\n    setUniformValuesForOnlyTextures(firstTime) {\n        const shaderProgramUid = this._shaderProgramUid;\n        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getWebGLResourceRepository();\n        const shaderProgram = webglResourceRepository.getWebGLResource(shaderProgramUid);\n        this.__fields.forEach((value, key) => {\n            const info = this.__fieldsInfo.get(key);\n            if (info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Texture2D || info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].TextureCube) {\n                this.__fields.forEach((value, key) => {\n                    const shaderSemantic = _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__[\"ShaderSemanticsClass\"].getShaderSemanticByIndex(key);\n                    webglResourceRepository.setUniformValue(shaderProgram, shaderSemantic.str, firstTime, value);\n                });\n            }\n        });\n    }\n    setParemetersForGPU({ material, shaderProgram, firstTime, args }) {\n        this.__materialNodes.forEach((materialNode) => {\n            if (materialNode.setParametersForGPU) {\n                materialNode.setParametersForGPU({ material, shaderProgram, firstTime, args });\n            }\n        });\n        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getWebGLResourceRepository();\n        this.__fields.forEach((value, key) => {\n            const info = this.__fieldsInfo.get(key);\n            if (args.setUniform || info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Texture2D || info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].TextureCube) {\n                if (!info.isSystem) {\n                    webglResourceRepository.setUniformValue(shaderProgram, info.semantic.str, firstTime, value, info.index);\n                }\n            }\n        });\n        this.setSoloDatumParemetersForGPU({ shaderProgram, firstTime, args });\n    }\n    setSoloDatumParemetersForGPU({ shaderProgram, firstTime, args }) {\n        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getWebGLResourceRepository();\n        const materialTypeName = this.__materialTypeName;\n        const map = Material.__soloDatumFields.get(materialTypeName);\n        if (map == null)\n            return;\n        map.forEach((value, key) => {\n            const info = this.__fieldsInfo.get(key);\n            if (args.setUniform || info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Texture2D || info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].TextureCube) {\n                if (!info.isSystem) {\n                    webglResourceRepository.setUniformValue(shaderProgram, info.semantic.str, firstTime, value, info.index);\n                }\n            }\n        });\n    }\n    __setupGlobalShaderDefinition() {\n        var _a, _b, _c;\n        let definitions = '';\n        if (_system_System__WEBPACK_IMPORTED_MODULE_13__[\"default\"].getInstance().processApproach === _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_14__[\"ProcessApproach\"].FastestWebGL1) {\n            definitions += '#define RN_IS_FASTEST_MODE\\n';\n        }\n        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getWebGLResourceRepository();\n        if ((_a = webglResourceRepository.currentWebGLContextWrapper) === null || _a === void 0 ? void 0 : _a.isWebGL2) {\n            definitions += '#define GLSL_ES3\\n';\n        }\n        if ((_b = webglResourceRepository.currentWebGLContextWrapper) === null || _b === void 0 ? void 0 : _b.webgl1ExtSTL) {\n            definitions += '#define WEBGL1_EXT_SHADER_TEXTURE_LOD\\n';\n        }\n        if ((_c = webglResourceRepository.currentWebGLContextWrapper) === null || _c === void 0 ? void 0 : _c.webgl1ExtDRV) {\n            definitions += '#define WEBGL1_EXT_STANDARD_DERIVATIVES\\n';\n        }\n        return definitions;\n    }\n    createProgramAsSingleOperation(vertexShaderMethodDefinitions_uniform, propertySetter) {\n        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getWebGLResourceRepository();\n        const materialNode = this.__materialNodes[0];\n        const glslShader = materialNode.shader;\n        let vertexPropertiesStr = '';\n        let pixelPropertiesStr = '';\n        this.__fieldsInfo.forEach((value, propertyIndex) => {\n            const info = this.__fieldsInfo.get(propertyIndex);\n            if (info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__[\"ShaderType\"].VertexShader || info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__[\"ShaderType\"].VertexAndPixelShader) {\n                vertexPropertiesStr += propertySetter(this.__materialTypeName, info, propertyIndex, false);\n            }\n            if (info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__[\"ShaderType\"].PixelShader || info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__[\"ShaderType\"].VertexAndPixelShader) {\n                pixelPropertiesStr += propertySetter(this.__materialTypeName, info, propertyIndex, false);\n            }\n        });\n        const globalDataRepository = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_12__[\"default\"].getInstance();\n        [vertexPropertiesStr, pixelPropertiesStr] = globalDataRepository.addPropertiesStr(vertexPropertiesStr, pixelPropertiesStr, propertySetter);\n        let definitions = materialNode.definitions;\n        // Shader Construction\n        let vertexShader = this.__setupGlobalShaderDefinition();\n        let fragmentShader = this.__setupGlobalShaderDefinition();\n        if (materialNode.vertexShaderityObject != null) {\n            vertexShader += _ShaderityUtility__WEBPACK_IMPORTED_MODULE_15__[\"default\"].getInstance().getVertexShaderBody(materialNode.vertexShaderityObject, { getters: vertexPropertiesStr, definitions: definitions, matricesGetters: vertexShaderMethodDefinitions_uniform });\n            fragmentShader += _ShaderityUtility__WEBPACK_IMPORTED_MODULE_15__[\"default\"].getInstance().getPixelShaderBody(materialNode.pixelShaderityObject, { getters: pixelPropertiesStr, definitions: definitions });\n        }\n        else {\n            vertexShader += glslShader.getVertexShaderBody({ getters: vertexPropertiesStr, definitions: definitions, matricesGetters: vertexShaderMethodDefinitions_uniform });\n            fragmentShader += glslShader.getPixelShaderBody({ getters: pixelPropertiesStr, definitions: definitions });\n        }\n        const wholeShaderText = vertexShader + fragmentShader;\n        // Cache\n        let shaderProgramUid = Material.__shaderStringMap.get(wholeShaderText);\n        if (shaderProgramUid) {\n            this._shaderProgramUid = shaderProgramUid;\n            return shaderProgramUid;\n        }\n        const hash = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_11__[\"default\"].toCRC32(wholeShaderText);\n        shaderProgramUid = Material.__shaderHashMap.get(hash);\n        if (shaderProgramUid) {\n            this._shaderProgramUid = shaderProgramUid;\n            return this._shaderProgramUid;\n        }\n        else {\n            let attributeNames;\n            let attributeSemantics;\n            if (materialNode.vertexShaderityObject != null) {\n                const reflection = _ShaderityUtility__WEBPACK_IMPORTED_MODULE_15__[\"default\"].getInstance().getReflection(materialNode.vertexShaderityObject);\n                attributeNames = reflection.names;\n                attributeSemantics = reflection.semantics;\n            }\n            else {\n                attributeNames = glslShader.attributeNames;\n                attributeSemantics = glslShader.attributeSemantics;\n            }\n            this._shaderProgramUid = webglResourceRepository.createShaderProgram({\n                materialTypeName: this.__materialTypeName,\n                vertexShaderStr: vertexShader,\n                fragmentShaderStr: fragmentShader,\n                attributeNames: attributeNames,\n                attributeSemantics: attributeSemantics\n            });\n            Material.__shaderStringMap.set(wholeShaderText, this._shaderProgramUid);\n            Material.__shaderHashMap.set(hash, this._shaderProgramUid);\n            return this._shaderProgramUid;\n        }\n    }\n    /*\n    createProgramString(vertexShaderMethodDefinitions_uniform = '') {\n  \n      // Find Start Node\n      let firstMaterialNodeVertex: AbstractMaterialNode;\n      let firstMaterialNodePixel: AbstractMaterialNode;\n      for (let i = 0; i < this.__materialNodes.length; i++) {\n        const materialNode = this.__materialNodes[i];\n        if (materialNode.vertexInputConnections.length === 0) {\n          firstMaterialNodeVertex = materialNode;\n        }\n        if (materialNode.pixelInputConnections.length === 0) {\n          firstMaterialNodePixel = materialNode;\n        }\n      }\n  \n      // Topological Sorting\n      const ignoredInputUidsVertex: Index[] = [firstMaterialNodeVertex!.materialNodeUid];\n      const sortedNodeArrayVertex: AbstractMaterialNode[] = [firstMaterialNodeVertex!];\n      const ignoredInputUidsPixel: Index[] = [firstMaterialNodePixel!.materialNodeUid];\n      const sortedNodeArrayPixel: AbstractMaterialNode[] = [firstMaterialNodePixel!];\n      /// delete first nodes from existing array\n      const materialNodesVertex = this.__materialNodes.concat();\n      const materialNodesPixel = this.__materialNodes.concat();\n      materialNodesVertex.splice(materialNodesVertex.indexOf(firstMaterialNodeVertex!), 1);\n      materialNodesPixel.splice(materialNodesPixel.indexOf(firstMaterialNodePixel!), 1);\n      do {\n        let materialNodeWhichHasNoInputs: AbstractMaterialNode;\n        materialNodesVertex.forEach((materialNode) => {\n          let inputCount = 0;\n          for (let inputConnection of materialNode.vertexInputConnections) {\n            if (ignoredInputUidsVertex.indexOf(inputConnection.materialNodeUid) === -1) {\n              inputCount++;\n            }\n          }\n          if (inputCount === 0) {\n            materialNodeWhichHasNoInputs = materialNode;\n          }\n        });\n        sortedNodeArrayVertex.push(materialNodeWhichHasNoInputs!);\n        ignoredInputUidsVertex.push(materialNodeWhichHasNoInputs!.materialNodeUid);\n        materialNodesVertex.splice(materialNodesVertex.indexOf(materialNodeWhichHasNoInputs!), 1);\n  \n      } while (materialNodesVertex.length !== 0);\n      do {\n        let materialNodeWhichHasNoInputs: AbstractMaterialNode;\n        materialNodesPixel.forEach((materialNode) => {\n          let inputCount = 0;\n          for (let inputConnection of materialNode.pixelInputConnections) {\n            if (ignoredInputUidsPixel.indexOf(inputConnection.materialNodeUid) === -1) {\n              inputCount++;\n            }\n          }\n          if (inputCount === 0) {\n            materialNodeWhichHasNoInputs = materialNode;\n          }\n        });\n        sortedNodeArrayPixel.push(materialNodeWhichHasNoInputs!);\n        ignoredInputUidsPixel.push(materialNodeWhichHasNoInputs!.materialNodeUid);\n        materialNodesPixel.splice(materialNodesPixel.indexOf(materialNodeWhichHasNoInputs!), 1);\n      } while (materialNodesPixel.length !== 0);\n  \n      // Get GLSL Beginning code\n      let vertexShader = firstMaterialNodePixel!.shader.glsl_versionText + firstMaterialNodeVertex!.shader.glslPrecision;\n      let pixelShader = firstMaterialNodePixel!.shader.glsl_versionText + firstMaterialNodeVertex!.shader.glslPrecision;\n  \n      // attribute variables definitions in Vertex Shader\n      for (let i = 0; i < sortedNodeArrayVertex.length; i++) {\n        const materialNode = sortedNodeArrayVertex[i];\n        const attributeNames = materialNode.shader.attributeNames;\n        const attributeSemantics = materialNode.shader.attributeSemantics;\n        const attributeCompositions = materialNode.shader.attributeCompositions;\n        for (let j = 0; j < attributeSemantics.length; j++) {\n          const attributeName = attributeNames[j];\n          const attributeComposition = attributeCompositions[j];\n          vertexShader += `${attributeComposition.getGlslStr(ComponentType.Float)} ${attributeName};\\n`;\n        }\n      }\n      vertexShader += '\\n';\n  \n      // uniform variables definitions\n      for (let i = 0; i < sortedNodeArrayVertex.length; i++) {\n        const materialNode = sortedNodeArrayVertex[i];\n        const semanticsInfoArray = materialNode._semanticsInfoArray;\n        for (let j = 0; j < semanticsInfoArray.length; j++) {\n          const semanticInfo = semanticsInfoArray[j];\n          const attributeComposition = semanticInfo.compositionType!;\n          vertexShader += `uniform ${attributeComposition.getGlslStr(semanticInfo.componentType!)} u_${semanticInfo.semantic!.str};\\n`;\n        }\n      }\n      vertexShader += '\\n';\n      for (let i = 0; i < sortedNodeArrayPixel.length; i++) {\n        const materialNode = sortedNodeArrayPixel[i];\n        const semanticsInfoArray = materialNode._semanticsInfoArray;\n        for (let j = 0; j < semanticsInfoArray.length; j++) {\n          const semanticInfo = semanticsInfoArray[j];\n          const attributeComposition = semanticInfo.compositionType!;\n          pixelShader += `uniform ${attributeComposition.getGlslStr(semanticInfo.componentType!)} u_${semanticInfo.semantic!.str};\\n`;\n        }\n      }\n      pixelShader += '\\n';\n  \n  \n      // remove node which don't have inputConnections (except first node)\n      const vertexMaterialNodes = [];\n      const pixelMaterialNodes = [];\n      for (let i = 0; i < sortedNodeArrayVertex.length; i++) {\n        const materialNode = sortedNodeArrayVertex[i];\n        if (i === 0 || materialNode.vertexInputConnections.length > 0) {\n          vertexMaterialNodes.push(materialNode);\n        }\n      }\n      for (let i = 0; i < sortedNodeArrayPixel.length; i++) {\n        const materialNode = sortedNodeArrayPixel[i];\n        if (i === 0 || materialNode.pixelInputConnections.length > 0) {\n          pixelMaterialNodes.push(materialNode);\n        }\n      }\n  \n      // Add additional functions by system\n  \n      vertexShader += `\n  uniform bool u_vertexAttributesExistenceArray[${VertexAttribute.AttributeTypeNumber}];\n  `\n      vertexShader += vertexShaderMethodDefinitions_uniform;\n  \n      // function definitions\n      const existFunctions: string[] = [];\n      for (let i = 0; i < vertexMaterialNodes.length; i++) {\n        const materialNode = vertexMaterialNodes[i];\n        if (existFunctions.indexOf(materialNode.shaderFunctionName) !== -1) {\n          continue;\n        }\n        vertexShader += materialNode.shader.vertexShaderDefinitions;\n        pixelShader += materialNode.shader.pixelShaderDefinitions;\n        existFunctions.push(materialNode.shaderFunctionName);\n      }\n  \n      // vertex main process\n      {\n        vertexShader += firstMaterialNodeVertex!.shader.glslMainBegin;\n        const varInputNames: Array<Array<string>> = [];\n        const varOutputNames: Array<Array<string>> = [];\n        for (let i = 1; i < vertexMaterialNodes.length; i++) {\n          const materialNode = vertexMaterialNodes[i];\n          if (varInputNames[i] == null) {\n            varInputNames[i] = [];\n          }\n          if (i - 1 >= 0) {\n            if (varOutputNames[i - 1] == null) {\n              varOutputNames[i - 1] = [];\n            }\n          }\n          for (let j = 0; j < materialNode.vertexInputConnections.length; j++) {\n            const inputConnection = materialNode.vertexInputConnections[j];\n            const inputNode = AbstractMaterialNode.materialNodes[inputConnection.materialNodeUid];\n            const outputSocketOfPrev = inputNode.getVertexOutput(inputConnection.outputNameOfPrev);\n            const inputSocketOfThis = materialNode.getVertexInput(inputConnection.inputNameOfThis);\n            const glslTypeStr = inputSocketOfThis!.compositionType.getGlslStr(inputSocketOfThis!.componentType);\n            const varName = `${outputSocketOfPrev!.name}_${inputConnection.materialNodeUid}_to_${inputSocketOfThis!.name}_${materialNode.materialNodeUid}`;\n            varInputNames[i].push(varName);\n  \n            const rowStr = `${glslTypeStr} ${varName};\\n`;\n            vertexShader += rowStr;\n          }\n          for (let j = i; j < vertexMaterialNodes.length; j++) {\n            const materialNodeInner = vertexMaterialNodes[j];\n            const prevMaterialNodeInner = vertexMaterialNodes[i - 1];\n            for (let k = 0; k < materialNodeInner.vertexInputConnections.length; k++) {\n              const inputConnection = materialNodeInner.vertexInputConnections[k];\n              if (prevMaterialNodeInner != null && inputConnection.materialNodeUid !== prevMaterialNodeInner.materialNodeUid) {\n                continue;\n              }\n              const inputNode = AbstractMaterialNode.materialNodes[inputConnection.materialNodeUid];\n              const outputSocketOfPrev = inputNode.getVertexOutput(inputConnection.outputNameOfPrev);\n              const inputSocketOfThis = materialNodeInner.getVertexInput(inputConnection.inputNameOfThis);\n              const glslTypeStr = inputSocketOfThis!.compositionType.getGlslStr(inputSocketOfThis!.componentType);\n              const varName = `${outputSocketOfPrev!.name}_${inputConnection.materialNodeUid}_to_${inputSocketOfThis!.name}_${materialNodeInner.materialNodeUid}`;\n  \n              if (i - 1 >= 0) {\n                varOutputNames[i - 1].push(varName);\n              }\n  \n            }\n          }\n  \n        }\n  \n        for (let i = 0; i < vertexMaterialNodes.length; i++) {\n          const materialNode = vertexMaterialNodes[i];\n  \n          const functionName = materialNode.shaderFunctionName;\n          if (varInputNames[i] == null) {\n            varInputNames[i] = [];\n          }\n          const varNames = varInputNames[i].concat(varOutputNames[i]);\n          let rowStr = `${functionName}(`;\n          for (let k = 0; k < varNames.length; k++) {\n            const varName = varNames[k];\n            if (varName == null) {\n              continue;\n            }\n            if (k !== 0) {\n              rowStr += ', ';\n            }\n            rowStr += varNames[k];\n          }\n          rowStr += ');\\n';\n          vertexShader += rowStr;\n        }\n  \n        vertexShader += firstMaterialNodeVertex!.shader.glslMainEnd;\n      }\n  \n      // pixel main process\n      {\n        pixelShader += firstMaterialNodePixel!.shader.glslMainBegin;\n        const varInputNames: Array<Array<string>> = [];\n        const varOutputNames: Array<Array<string>> = [];\n        for (let i = 1; i < pixelMaterialNodes.length; i++) {\n          const materialNode = pixelMaterialNodes[i];\n          if (varInputNames[i] == null) {\n            varInputNames[i] = [];\n          }\n          if (i - 1 >= 0) {\n            if (varOutputNames[i - 1] == null) {\n              varOutputNames[i - 1] = [];\n            }\n          }\n          for (let j = 0; j < materialNode.pixelInputConnections.length; j++) {\n            const inputConnection = materialNode.pixelInputConnections[j];\n            const inputNode = AbstractMaterialNode.materialNodes[inputConnection.materialNodeUid];\n            const outputSocketOfPrev = inputNode.getPixelOutput(inputConnection.outputNameOfPrev);\n            const inputSocketOfThis = materialNode.getPixelInput(inputConnection.inputNameOfThis);\n            const glslTypeStr = inputSocketOfThis!.compositionType.getGlslStr(inputSocketOfThis!.componentType);\n            const varName = `${outputSocketOfPrev!.name}_${inputConnection.materialNodeUid}_to_${inputSocketOfThis!.name}_${materialNode.materialNodeUid}`;\n            varInputNames[i].push(varName);\n  \n            const rowStr = `${glslTypeStr} ${varName};\\n`;\n            pixelShader += rowStr;\n          }\n          for (let j = i; j < pixelMaterialNodes.length; j++) {\n            const materialNodeInner = pixelMaterialNodes[j];\n            const prevMaterialNodeInner = pixelMaterialNodes[i - 1];\n            for (let k = 0; k < materialNodeInner.pixelInputConnections.length; k++) {\n              const inputConnection = materialNodeInner.pixelInputConnections[k];\n              if (prevMaterialNodeInner != null && inputConnection.materialNodeUid !== prevMaterialNodeInner.materialNodeUid) {\n                continue;\n              }\n              const inputNode = AbstractMaterialNode.materialNodes[inputConnection.materialNodeUid];\n              const outputSocketOfPrev = inputNode.getPixelOutput(inputConnection.outputNameOfPrev);\n              const inputSocketOfThis = materialNodeInner.getPixelInput(inputConnection.inputNameOfThis);\n              const glslTypeStr = inputSocketOfThis!.compositionType.getGlslStr(inputSocketOfThis!.componentType);\n              const varName = `${outputSocketOfPrev!.name}_${inputConnection.materialNodeUid}_to_${inputSocketOfThis!.name}_${materialNodeInner.materialNodeUid}`;\n  \n              if (i - 1 >= 0) {\n                varOutputNames[i - 1].push(varName);\n              }\n  \n            }\n          }\n  \n        }\n  \n        for (let i = 0; i < pixelMaterialNodes.length; i++) {\n          const materialNode = pixelMaterialNodes[i];\n  \n          const functionName = materialNode.shaderFunctionName;\n          if (varInputNames[i] == null) {\n            varInputNames[i] = [];\n          }\n          const varNames = varInputNames[i].concat(varOutputNames[i]);\n          let rowStr = `${functionName}(`;\n          for (let k = 0; k < varNames.length; k++) {\n            const varName = varNames[k];\n            if (varName == null) {\n              continue;\n            }\n            if (k !== 0) {\n              rowStr += ', ';\n            }\n            rowStr += varNames[k];\n          }\n          rowStr += ');\\n';\n          pixelShader += rowStr;\n        }\n  \n        pixelShader += firstMaterialNodePixel!.shader.glslMainEnd;\n      }\n  \n  \n      let attributeNames: AttributeNames = [];\n      let attributeSemantics: Array<VertexAttributeEnum> = [];\n      for (let i = 0; i < vertexMaterialNodes.length; i++) {\n        const materialNode = vertexMaterialNodes[i];\n        Array.prototype.push.apply(attributeNames, materialNode.shader.attributeNames);\n        Array.prototype.push.apply(attributeSemantics, materialNode.shader.attributeSemantics);\n      }\n      // remove duplicate values\n      attributeNames = Array.from(new Set(attributeNames))\n      attributeSemantics = Array.from(new Set(attributeSemantics))\n  \n      return { vertexShader, pixelShader, attributeNames, attributeSemantics };\n    }\n    */\n    createProgram(vertexShaderMethodDefinitions_uniform, propertySetter) {\n        if (this.__materialNodes[0].isSingleOperation) {\n            return this.createProgramAsSingleOperation(vertexShaderMethodDefinitions_uniform, propertySetter);\n        }\n        else {\n            /*\n            const webglResourceRepository = CGAPIResourceRepository.getWebGLResourceRepository();\n            let returnValue = this.createProgramString(vertexShaderMethodDefinitions_uniform);\n      \n            const hash = DataUtil.toCRC32(returnValue.vertexShader + returnValue.pixelShader);\n      \n            // Cache\n            if (Material.__shaderMap.has(hash)) {\n              this._shaderProgramUid = Material.__shaderMap.get(hash)!;\n              return this._shaderProgramUid;\n            } else {\n              this._shaderProgramUid = webglResourceRepository.createShaderProgram(\n                {\n                  materialTypeName: this.__materialTypeName,\n                  vertexShaderStr: returnValue.vertexShader,\n                  fragmentShaderStr: returnValue.pixelShader,\n                  attributeNames: returnValue.attributeNames,\n                  attributeSemantics: returnValue.attributeSemantics\n                }\n              );\n              Material.__shaderMap.set(hash, this._shaderProgramUid);\n              return this._shaderProgramUid;\n            }\n            */\n            return -1;\n        }\n    }\n    isBlend() {\n        if (this.alphaMode === _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__[\"AlphaMode\"].Blend) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    static getLocationOffsetOfMemberOfMaterial(materialTypeName, propertyIndex) {\n        const material = Material.__instancesByTypes.get(materialTypeName);\n        const info = material.__fieldsInfo.get(propertyIndex);\n        if (info.soloDatum) {\n            const value = Material.__soloDatumFields.get(material.__materialTypeName).get(propertyIndex);\n            return value.v.byteOffset / 4 / 4;\n        }\n        else {\n            const properties = this.__accessors.get(materialTypeName);\n            const accessor = properties.get(propertyIndex);\n            return accessor.byteOffsetInBuffer / 4 / 4;\n        }\n    }\n    static getAccessorOfMemberOfMaterial(materialTypeName, propertyIndex) {\n        const material = Material.__instancesByTypes.get(materialTypeName);\n        const info = material.__fieldsInfo.get(propertyIndex);\n        if (info.soloDatum) {\n            return void 0;\n        }\n        else {\n            const properties = this.__accessors.get(materialTypeName);\n            const accessor = properties.get(propertyIndex);\n            return accessor;\n        }\n    }\n    get alphaMode() {\n        return this.__alphaMode;\n    }\n    set alphaMode(mode) {\n        this.__alphaMode = mode;\n    }\n    setBlendEquationMode(blendEquationMode, blendEquationModeAlpha) {\n        this.__blendEquationMode = blendEquationMode;\n        this.__blendEquationModeAlpha = blendEquationModeAlpha;\n    }\n    setBlendFuncSeparateFactor(blendFuncSrcFactor, blendFuncDstFactor, blendFuncAlphaSrcFactor, blendFuncAlphaDstFactor) {\n        this.__blendFuncSrcFactor = blendFuncSrcFactor;\n        this.__blendFuncDstFactor = blendFuncDstFactor;\n        this.__blendFuncAlphaSrcFactor = blendFuncAlphaSrcFactor;\n        this.__blendFuncAlphaDstFactor = blendFuncAlphaDstFactor;\n    }\n    setBlendFuncFactor(blendFuncSrcFactor, blendFuncDstFactor) {\n        this.__blendFuncSrcFactor = blendFuncSrcFactor;\n        this.__blendFuncDstFactor = blendFuncDstFactor;\n        this.__blendFuncAlphaSrcFactor = null;\n        this.__blendFuncAlphaDstFactor = null;\n    }\n    get blendEquationMode() {\n        return this.__blendEquationMode;\n    }\n    get blendEquationModeAlpha() {\n        return this.__blendEquationModeAlpha;\n    }\n    get blendFuncSrcFactor() {\n        return this.__blendFuncSrcFactor;\n    }\n    get blendFuncDstFactor() {\n        return this.__blendFuncDstFactor;\n    }\n    get blendFuncAlphaSrcFactor() {\n        return this.__blendFuncAlphaSrcFactor;\n    }\n    get blendFuncAlphaDstFactor() {\n        return this.__blendFuncAlphaDstFactor;\n    }\n    isEmptyMaterial() {\n        if (this.__materialNodes.length === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n}\nMaterial.__soloDatumFields = new Map();\nMaterial.__shaderHashMap = new Map();\nMaterial.__shaderStringMap = new Map();\nMaterial.__materials = [];\nMaterial.__instancesByTypes = new Map();\nMaterial.__materialTidCount = -1;\nMaterial.__materialTids = new Map();\nMaterial.__materialInstanceCountOfType = new Map();\nMaterial.__materialTypes = new Map();\nMaterial.__maxInstances = new Map();\nMaterial.__bufferViews = new Map();\nMaterial.__accessors = new Map();\n\n\n//# sourceURL=webpack:///./src/foundation/materials/Material.ts?");

/***/ }),

/***/ "./src/foundation/materials/PbrShadingMaterialNode.ts":
/*!************************************************************!*\
  !*** ./src/foundation/materials/PbrShadingMaterialNode.ts ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return PbrShadingMaterialNode; });\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Vector2 */ \"./src/foundation/math/Vector2.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/ShaderType */ \"./src/foundation/definitions/ShaderType.ts\");\n/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../definitions/ShaderVariableUpdateInterval */ \"./src/foundation/definitions/ShaderVariableUpdateInterval.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../definitions/HdriFormat */ \"./src/foundation/definitions/HdriFormat.ts\");\n/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../math/Scalar */ \"./src/foundation/math/Scalar.ts\");\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../math/VectorN */ \"./src/foundation/math/VectorN.ts\");\n/* harmony import */ var _components_MeshComponent__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../components/MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _components_BlendShapeComponent__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../components/BlendShapeComponent */ \"./src/foundation/components/BlendShapeComponent.ts\");\n/* harmony import */ var _webgl_shaderity_shaders_PbrSingleShader_PbrSingleShader_vert__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.vert */ \"./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.vert\");\n/* harmony import */ var _webgl_shaderity_shaders_PbrSingleShader_PbrSingleShader_frag__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.frag */ \"./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.frag\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass PbrShadingMaterialNode extends _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor({ isMorphing, isSkinning, isLighting }) {\n        super(null, 'pbrShading'\n            + (isMorphing ? '+morphing' : '')\n            + (isSkinning ? '+skinning' : '')\n            + (isLighting ? '' : '-lighting'), { isMorphing, isSkinning, isLighting }, _webgl_shaderity_shaders_PbrSingleShader_PbrSingleShader_vert__WEBPACK_IMPORTED_MODULE_18__[\"default\"], _webgl_shaderity_shaders_PbrSingleShader_PbrSingleShader_frag__WEBPACK_IMPORTED_MODULE_19__[\"default\"]);\n        PbrShadingMaterialNode.initDefaultTextures();\n        let shaderSemanticsInfoArray = [\n            //  {semantic: ShaderSemantics.ViewMatrix, compositionType: CompositionType.Mat4, componentType: ComponentType.Float,\n            //   stage: ShaderType.VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, initialValue: MutableMatrix44.identity()},\n            //   {semantic: ShaderSemantics.ProjectionMatrix, compositionType: CompositionType.Mat4, componentType: ComponentType.Float,\n            //   stage: ShaderType.VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, initialValue: MutableMatrix44.identity()},\n            //   {semantic: ShaderSemantics.ViewPosition, compositionType: CompositionType.Vec3, componentType: ComponentType.Float,\n            //   stage: ShaderType.VertexAndPixelShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, updateInteval: ShaderVariableUpdateInterval.FirstTimeOnly, initialValue: new Vector3(0, 0, 1), soloDatum: true},\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].BaseColorFactor, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec4, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: 0, max: 2, isSystem: false, initialValue: new _math_Vector4__WEBPACK_IMPORTED_MODULE_6__[\"default\"](1, 1, 1, 1)\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].BaseColorTexture, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: 0, max: Number.MAX_SAFE_INTEGER, isSystem: false, initialValue: [0, _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__dummyWhiteTexture]\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].MetallicRoughnessFactor, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec2, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: 0, max: 2, isSystem: false, initialValue: new _math_Vector2__WEBPACK_IMPORTED_MODULE_3__[\"default\"](1, 1)\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].MetallicRoughnessTexture, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: 0, max: Number.MAX_SAFE_INTEGER, isSystem: false, initialValue: [1, _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__dummyWhiteTexture]\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].NormalTexture, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: 0, max: Number.MAX_SAFE_INTEGER, isSystem: false, initialValue: [2, _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__dummyBlueTexture]\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].OcclusionTexture, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: 0, max: Number.MAX_SAFE_INTEGER, isSystem: false, initialValue: [3, _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__dummyWhiteTexture]\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].EmissiveTexture, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: 0, max: Number.MAX_SAFE_INTEGER, isSystem: false, initialValue: [4, _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__dummyBlackTexture]\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].Wireframe, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec3, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: 0, max: 10, isSystem: false, initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](0, 0, 1)\n            },\n            {\n                semantic: PbrShadingMaterialNode.IsOutputHDR, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Bool,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: 0, max: 1, isSystem: false, initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_13__[\"default\"](0)\n            },\n            // {\n            //   semantic: ShaderSemantics.ViewPosition,\n            //   compositionType: CompositionType.Vec3,\n            //   componentType: ComponentType.Float,\n            //   stage: ShaderType.VertexAndPixelShader,\n            //   min: -Number.MAX_VALUE,\n            //   max: Number.MAX_VALUE,\n            //   isSystem: true,\n            //   updateInteval: ShaderVariableUpdateInterval.FirstTimeOnly,\n            //   initialValue: new Vector3(0, 0, 0),\n            //   soloDatum: true\n            // },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].IBLParameter,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec4,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader,\n                min: -Number.MAX_VALUE,\n                max: Number.MAX_VALUE,\n                isSystem: true,\n                initialValue: new _math_Vector4__WEBPACK_IMPORTED_MODULE_6__[\"default\"](1, 1, 1, 1),\n                updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].EveryTime\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].HDRIFormat,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec2,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader,\n                min: 0,\n                max: 5,\n                isSystem: true,\n                updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].EveryTime,\n                initialValue: new _math_Vector2__WEBPACK_IMPORTED_MODULE_3__[\"default\"](0, 0)\n            },\n            // {\n            //   semantic: ShaderSemantics.LightNumber,\n            //   compositionType: CompositionType.Scalar,\n            //   componentType: ComponentType.Int,\n            //   stage: ShaderType.VertexAndPixelShader,\n            //   min: 0,\n            //   max: Number.MAX_SAFE_INTEGER,\n            //   isSystem: true,\n            //   updateInteval: ShaderVariableUpdateInterval.FirstTimeOnly,\n            //   initialValue: new Scalar(0),\n            //   soloDatum: true\n            // },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].DiffuseEnvTexture,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].TextureCube,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: 0,\n                max: Number.MAX_SAFE_INTEGER,\n                isSystem: true,\n                updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].EveryTime,\n                initialValue: [5, _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__dummyWhiteTexture]\n            },\n            {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].SpecularEnvTexture,\n                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].TextureCube,\n                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader,\n                min: 0,\n                max: Number.MAX_SAFE_INTEGER,\n                isSystem: true,\n                updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].EveryTime,\n                initialValue: [6, _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__dummyWhiteTexture]\n            },\n            {\n                semantic: PbrShadingMaterialNode.baseColorTextureTransform, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec4, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: -10, max: 10, isSystem: false, initialValue: new _math_Vector4__WEBPACK_IMPORTED_MODULE_6__[\"default\"](1, 1, 0, 0)\n            },\n            {\n                semantic: PbrShadingMaterialNode.baseColorTextureRotation, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: -Math.PI, max: Math.PI, isSystem: false, initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_13__[\"default\"](0)\n            },\n            {\n                semantic: PbrShadingMaterialNode.normalTextureTransform, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec4, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: -10, max: 10, isSystem: false, initialValue: new _math_Vector4__WEBPACK_IMPORTED_MODULE_6__[\"default\"](1, 1, 0, 0)\n            },\n            {\n                semantic: PbrShadingMaterialNode.normalTextureRotation, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: -Math.PI, max: Math.PI, isSystem: false, initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_13__[\"default\"](0)\n            },\n            {\n                semantic: PbrShadingMaterialNode.metallicRoughnessTextureTransform, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec4, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: -10, max: 10, isSystem: false, initialValue: new _math_Vector4__WEBPACK_IMPORTED_MODULE_6__[\"default\"](1, 1, 0, 0)\n            },\n            {\n                semantic: PbrShadingMaterialNode.metallicRoughnessTextureRotation, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, min: -Math.PI, max: Math.PI, isSystem: false, initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_13__[\"default\"](0)\n            },\n        ];\n        shaderSemanticsInfoArray.push({\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].PointSize, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: true,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_13__[\"default\"](100.0), min: 0, max: 100\n        }, {\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].PointDistanceAttenuation, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec3, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: true,\n            initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_7__[\"default\"](0.0, 0.1, 0.01), min: 0, max: 1\n        });\n        if (isLighting) {\n            this.__definitions += '#define RN_IS_LIGHTING\\n';\n            /*\n            const lights: ShaderSemanticsInfo[] = [];\n            for (let i = 0; i < Config.maxLightNumberInShader; i++) {\n              (function(idx){\n              lights.push(\n                {\n                  semantic: ShaderSemantics.LightPosition,\n                  compositionType: CompositionType.Vec4,\n                  componentType: ComponentType.Float,\n                  stage: ShaderType.PixelShader,\n                  min: -Number.MAX_VALUE,\n                  max: Number.MAX_VALUE,\n                  index: idx,\n                  maxIndex: 4,\n                  isSystem: true,\n                  updateInteval: ShaderVariableUpdateInterval.EveryTime,\n                  initialValue: new Vector4(0, 0, 0, 1),\n                  soloDatum: true\n                });\n              lights.push(\n                {\n                semantic: ShaderSemantics.LightDirection,\n                compositionType: CompositionType.Vec4,\n                componentType: ComponentType.Float,\n                stage: ShaderType.PixelShader,\n                min: -1,\n                max: 1,\n                index: idx,\n                maxIndex: 4,\n                isSystem: true,\n                initialValue: new Vector4(0, 1, 0, 1),\n                updateInteval: ShaderVariableUpdateInterval.EveryTime,\n                soloDatum: true\n              });\n              lights.push(\n                {\n                  semantic: ShaderSemantics.LightIntensity,\n                  compositionType: CompositionType.Vec4,\n                  componentType: ComponentType.Float,\n                  stage: ShaderType.PixelShader,\n                  min: 0,\n                  max: 10,\n                  index: idx,\n                  maxIndex: 4,\n                  isSystem: true,\n                  initialValue: new Vector4(1, 1, 1, 1),\n                  updateInteval: ShaderVariableUpdateInterval.EveryTime,\n                  soloDatum: true\n                });\n              })(i);\n            }\n            shaderSemanticsInfoArray = shaderSemanticsInfoArray.concat(lights);\n            */\n        }\n        if (isSkinning) {\n            this.__definitions += '#define RN_IS_SKINNING\\n';\n            // shaderSemanticsInfoArray.push({semantic: ShaderSemantics.BoneQuaternion, compositionType: CompositionType.Vec4Array, maxIndex: 250, componentType: ComponentType.Float,\n            //   stage: ShaderType.VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, updateInteval: ShaderVariableUpdateInterval.EveryTime, soloDatum: true, initialValue: new VectorN(new Float32Array(0))});\n            // shaderSemanticsInfoArray.push({semantic: ShaderSemantics.BoneTranslateScale, compositionType: CompositionType.Vec4Array, maxIndex: 250, componentType: ComponentType.Float, soloDatum: true,\n            //   stage: ShaderType.VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, updateInteval: ShaderVariableUpdateInterval.EveryTime, initialValue: new VectorN(new Float32Array(0))});\n            // shaderSemanticsInfoArray.push({semantic: ShaderSemantics.SkinningMode, compositionType: CompositionType.Scalar, componentType: ComponentType.Int,\n            //   stage: ShaderType.VertexShader, min: 0, max: 1, isSystem: true, updateInteval: ShaderVariableUpdateInterval.EveryTime, initialValue: new Scalar(-1) });\n        }\n        if (isMorphing) {\n            this.__definitions += '#define RN_IS_MORPHING\\n';\n            shaderSemanticsInfoArray.push({\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].MorphTargetNumber, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: true, soloDatum: true,\n                initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_13__[\"default\"](0), min: 0, max: _core_Config__WEBPACK_IMPORTED_MODULE_14__[\"default\"].maxVertexMorphNumberInShader, needUniformInFastest: true\n            }, {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].DataTextureMorphOffsetPosition, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].ScalarArray, maxIndex: _core_Config__WEBPACK_IMPORTED_MODULE_14__[\"default\"].maxVertexMorphNumberInShader,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: true, soloDatum: true,\n                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_15__[\"default\"](new Float32Array(_core_Config__WEBPACK_IMPORTED_MODULE_14__[\"default\"].maxVertexMorphNumberInShader)), min: -Number.MAX_VALUE, max: Number.MAX_VALUE, needUniformInFastest: true\n            }, {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].MorphWeights, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].ScalarArray, maxIndex: _core_Config__WEBPACK_IMPORTED_MODULE_14__[\"default\"].maxVertexMorphNumberInShader,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: true, soloDatum: true,\n                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_15__[\"default\"](new Float32Array(_core_Config__WEBPACK_IMPORTED_MODULE_14__[\"default\"].maxVertexMorphNumberInShader)), min: -Number.MAX_VALUE, max: Number.MAX_VALUE, needUniformInFastest: true\n            });\n        }\n        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);\n    }\n    setParametersForGPU({ material, shaderProgram, firstTime, args }) {\n        if (args.setUniform) {\n            this.setWorldMatrix(shaderProgram, args.worldMatrix);\n            this.setNormalMatrix(shaderProgram, args.normalMatrix);\n            /// Matrices\n            let cameraComponent = args.renderPass.cameraComponent;\n            if (cameraComponent == null) {\n                cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_10__[\"default\"].getInstance().getComponent(_components_CameraComponent__WEBPACK_IMPORTED_MODULE_11__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_11__[\"default\"].main);\n            }\n            this.setViewInfo(shaderProgram, cameraComponent, material, args.setUniform);\n            this.setProjection(shaderProgram, cameraComponent, material, args.setUniform);\n            /// Skinning\n            const skeletalComponent = args.entity.getSkeletal();\n            this.setSkinning(shaderProgram, skeletalComponent, args.setUniform);\n            // Lights\n            this.setLightsInfo(shaderProgram, args.lightComponents, material, args.setUniform);\n        }\n        // Env map\n        this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].DiffuseEnvTexture.str, firstTime, [5, -1]);\n        if (args.diffuseCube && args.diffuseCube.isTextureReady) {\n            const texture = this.__webglResourceRepository.getWebGLResource(args.diffuseCube.cgApiResourceUid);\n            args.glw.bindTextureCube(5, texture);\n        }\n        else {\n            const texture = this.__webglResourceRepository.getWebGLResource(_AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__dummyBlackCubeTexture.cgApiResourceUid);\n            args.glw.bindTextureCube(5, texture);\n        }\n        this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].SpecularEnvTexture.str, firstTime, [6, -1]);\n        if (args.specularCube && args.specularCube.isTextureReady) {\n            const texture = this.__webglResourceRepository.getWebGLResource(args.specularCube.cgApiResourceUid);\n            args.glw.bindTextureCube(6, texture);\n        }\n        else {\n            const texture = this.__webglResourceRepository.getWebGLResource(_AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__dummyBlackCubeTexture.cgApiResourceUid);\n            args.glw.bindTextureCube(6, texture);\n        }\n        let mipmapLevelNumber = 1;\n        if (args.specularCube) {\n            mipmapLevelNumber = args.specularCube.mipmapLevelNumber;\n        }\n        const meshRenderComponent = args.entity.getMeshRenderer();\n        let diffuseHdriType = _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_12__[\"HdriFormat\"].LDR_SRGB.index;\n        let specularHdriType = _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_12__[\"HdriFormat\"].LDR_SRGB.index;\n        if (meshRenderComponent.diffuseCubeMap) {\n            diffuseHdriType = meshRenderComponent.diffuseCubeMap.hdriFormat.index;\n        }\n        if (meshRenderComponent.specularCubeMap) {\n            specularHdriType = meshRenderComponent.specularCubeMap.hdriFormat.index;\n        }\n        if (args.setUniform) {\n            this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].IBLParameter.str, firstTime, {\n                x: mipmapLevelNumber, y: meshRenderComponent.diffuseCubeMapContribution,\n                z: meshRenderComponent.specularCubeMapContribution, w: meshRenderComponent.rotationOfCubeMap\n            });\n            this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].HDRIFormat.str, firstTime, { x: diffuseHdriType, y: specularHdriType });\n        }\n        else {\n            const tmp_vector4 = _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__tmp_vector4;\n            tmp_vector4.x = mipmapLevelNumber;\n            tmp_vector4.y = meshRenderComponent.diffuseCubeMapContribution;\n            tmp_vector4.z = meshRenderComponent.specularCubeMapContribution;\n            tmp_vector4.w = meshRenderComponent.rotationOfCubeMap;\n            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].IBLParameter, tmp_vector4);\n            const tmp_vector2 = _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__tmp_vector2;\n            tmp_vector2.x = diffuseHdriType;\n            tmp_vector2.y = specularHdriType;\n            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].HDRIFormat, tmp_vector2);\n        }\n        // BRDF LUT\n        // updated = this.__webglResourceRepository.setUniformValue(shaderProgram, ShaderSemantics.BrdfLutTexture.str, firstTime, [5, -1]);\n        // if (updated) {\n        //   if (this.__pbrCookTorranceBrdfLutDataUrlUid != null) {\n        //     const texture = this.__webglResourceRepository.getWebGLResource(this.__pbrCookTorranceBrdfLutDataUrlUid!) as WebGLTexture;\n        //     glw.bindTexture2D(5, texture);\n        //   } else {\n        //     const texture = this.__webglResourceRepository.getWebGLResource(this.__dummyWhiteTexture!) as WebGLTexture;\n        //     glw.bindTexture2D(5, texture);\n        //   }\n        // }\n        // Morph\n        this.setMorphInfo(shaderProgram, args.entity.getComponent(_components_MeshComponent__WEBPACK_IMPORTED_MODULE_16__[\"default\"]), args.entity.getComponent(_components_BlendShapeComponent__WEBPACK_IMPORTED_MODULE_17__[\"default\"]), args.primitive);\n    }\n}\nPbrShadingMaterialNode.__pbrCookTorranceBrdfLutDataUrlUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].InvalidCGAPIResourceUid;\nPbrShadingMaterialNode.IsOutputHDR = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemanticsClass\"]({ str: 'isOutputHDR' });\nPbrShadingMaterialNode.baseColorTextureTransform = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemanticsClass\"]({ str: 'baseColorTextureTransform' });\nPbrShadingMaterialNode.baseColorTextureRotation = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemanticsClass\"]({ str: 'baseColorTextureRotation' });\nPbrShadingMaterialNode.normalTextureTransform = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemanticsClass\"]({ str: 'normalTextureTransform' });\nPbrShadingMaterialNode.normalTextureRotation = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemanticsClass\"]({ str: 'normalTextureRotation' });\nPbrShadingMaterialNode.metallicRoughnessTextureTransform = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemanticsClass\"]({ str: 'metallicRoughnessTextureTransform' });\nPbrShadingMaterialNode.metallicRoughnessTextureRotation = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemanticsClass\"]({ str: 'metallicRoughnessTextureRotation' });\n\n\n//# sourceURL=webpack:///./src/foundation/materials/PbrShadingMaterialNode.ts?");

/***/ }),

/***/ "./src/foundation/materials/ShaderityUtility.ts":
/*!******************************************************!*\
  !*** ./src/foundation/materials/ShaderityUtility.ts ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ShaderityUntility; });\n/* harmony import */ var shaderity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! shaderity */ \"./node_modules/shaderity/dist/index.js\");\n/* harmony import */ var shaderity__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(shaderity__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../webgl/WebGLResourceRepository */ \"./src/webgl/WebGLResourceRepository.ts\");\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n\n\n\n\n\n\n\nclass ShaderityUntility {\n    constructor() {\n        this.__shaderity = shaderity__WEBPACK_IMPORTED_MODULE_0___default.a.getInstance();\n        this.__webglResourceRepository = _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance();\n        const attributeSemanticsMap = new Map();\n        attributeSemanticsMap.set('instanceid', 'INSTANCE');\n        attributeSemanticsMap.set('facenormal', 'FACE_NORMAL');\n        attributeSemanticsMap.set('barycentriccoord', 'BARY_CENTRIC_COORD');\n        this.__shaderity.addAttributeSemanticsMap(attributeSemanticsMap);\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new ShaderityUntility();\n        }\n        return this.__instance;\n    }\n    getVertexShaderBody(shaderityObject, args) {\n        var _a, _b;\n        const obj = this.__shaderity.fillTemplate(shaderityObject, {\n            definitions: (typeof args.definitions !== 'undefined') ? args.definitions : '',\n            matricesGetters: (typeof args.matricesGetters !== 'undefined') ? args.matricesGetters : '',\n            getters: (typeof args.getters !== 'undefined') ? args.getters : '',\n            WellKnownComponentTIDs: _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__[\"WellKnownComponentTIDs\"]\n        });\n        const isWebGL2 = (_b = (_a = this.__webglResourceRepository) === null || _a === void 0 ? void 0 : _a.currentWebGLContextWrapper) === null || _b === void 0 ? void 0 : _b.isWebGL2;\n        const code = this.__shaderity.transformTo(isWebGL2 ? 'WebGL2' : 'WebGL1', obj).code;\n        return code;\n    }\n    getPixelShaderBody(shaderityObject, args) {\n        var _a, _b;\n        const obj = this.__shaderity.fillTemplate(shaderityObject, {\n            definitions: (typeof args.definitions !== 'undefined') ? args.definitions : '',\n            getters: (typeof args.getters !== 'undefined') ? args.getters : '',\n            Config: _core_Config__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n            WellKnownComponentTIDs: _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__[\"WellKnownComponentTIDs\"]\n        });\n        const isWebGL2 = (_b = (_a = this.__webglResourceRepository) === null || _a === void 0 ? void 0 : _a.currentWebGLContextWrapper) === null || _b === void 0 ? void 0 : _b.isWebGL2;\n        const code = this.__shaderity.transformTo(isWebGL2 ? 'WebGL2' : 'WebGL1', obj).code;\n        return code;\n    }\n    getReflection(shaderityObject) {\n        const reflection = this.__shaderity.reflect(shaderityObject);\n        const reflectionSoA = {};\n        reflectionSoA.names = reflection.attributesNames;\n        reflectionSoA.semantics = reflection.attributesSemantics.map((semantic) => { return _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].fromString(semantic); });\n        ;\n        reflectionSoA.compositions = reflection.attributesTypes.map((type) => { return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].fromGlslString(type); });\n        ;\n        reflectionSoA.components = reflection.attributesTypes.map((type) => { return _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_6__[\"ComponentType\"].fromGlslString(type); });\n        ;\n        return reflectionSoA;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/materials/ShaderityUtility.ts?");

/***/ }),

/***/ "./src/foundation/materials/ShadowMapDecodeClassicSingleMaterialNode.ts":
/*!******************************************************************************!*\
  !*** ./src/foundation/materials/ShadowMapDecodeClassicSingleMaterialNode.ts ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ShadowMapDecodeClassicSingleMaterialNode; });\n/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractMaterialNode */ \"./src/foundation/materials/AbstractMaterialNode.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/ShadingModel */ \"./src/foundation/definitions/ShadingModel.ts\");\n/* harmony import */ var _webgl_shaders_ShadowMapDecodeClassicShader__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../webgl/shaders/ShadowMapDecodeClassicShader */ \"./src/webgl/shaders/ShadowMapDecodeClassicShader.ts\");\n/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/ShaderType */ \"./src/foundation/definitions/ShaderType.ts\");\n/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../definitions/ShaderVariableUpdateInterval */ \"./src/foundation/definitions/ShaderVariableUpdateInterval.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../math/VectorN */ \"./src/foundation/math/VectorN.ts\");\n/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../math/Scalar */ \"./src/foundation/math/Scalar.ts\");\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _components_SkeletalComponent__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../components/SkeletalComponent */ \"./src/foundation/components/SkeletalComponent.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass ShadowMapDecodeClassicSingleMaterialNode extends _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor(encodedDepthRenderPass, { isMorphing, isSkinning, isLighting, colorAttachmentsNumber }) {\n        super(_webgl_shaders_ShadowMapDecodeClassicShader__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getInstance(), \"ShadowMapDecodeClassicShading\"\n            + (isSkinning ? '+skinning' : '')\n            + (isLighting ? '' : '-lighting'), { isMorphing, isSkinning, isLighting });\n        this.encodedDepthRenderPass = encodedDepthRenderPass;\n        const encodedDepthFramebuffer = encodedDepthRenderPass.getFramebuffer();\n        if (encodedDepthFramebuffer == null) {\n            console.error('encodedDepthRenderPass does not have framebuffer');\n            return;\n        }\n        const encodedDepthTexture = encodedDepthFramebuffer.colorAttachments[colorAttachmentsNumber];\n        const shaderSemanticsInfoArray = [];\n        shaderSemanticsInfoArray.push({\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].LightViewProjectionMatrix, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Mat4, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: true, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].EveryTime, soloDatum: false,\n            initialValue: _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_17__[\"default\"].zero(), min: -Number.MAX_VALUE, max: Number.MAX_VALUE,\n        });\n        shaderSemanticsInfoArray.push({\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].ShadingModel, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Int,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_13__[\"default\"](_definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_6__[\"ShadingModel\"].Constant.index), min: 0, max: 3,\n        }, {\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].Shininess, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: false,\n            initialValue: 5, min: 0, max: Number.MAX_VALUE,\n        }, {\n            semantic: ShadowMapDecodeClassicSingleMaterialNode.ShadowAlpha, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_13__[\"default\"](0.5), min: 0, max: 1,\n        }, {\n            semantic: ShadowMapDecodeClassicSingleMaterialNode.NonShadowAlpha, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_13__[\"default\"](0.0), min: 0, max: 1,\n        }, {\n            semantic: ShadowMapDecodeClassicSingleMaterialNode.AllowableDepthError, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: false,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_13__[\"default\"](0.0001), min: 0, max: 1,\n        }, {\n            semantic: ShadowMapDecodeClassicSingleMaterialNode.ShadowColor, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec3, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: false,\n            initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_5__[\"default\"](0, 0, 0), min: 0, max: 1,\n        }, {\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].DiffuseColorFactor, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec4, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: false,\n            initialValue: new _math_Vector4__WEBPACK_IMPORTED_MODULE_4__[\"default\"](1, 1, 1, 1), min: 0, max: 2,\n        }, {\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].DepthTexture, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Int,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].EveryTime,\n            initialValue: [0, encodedDepthTexture], min: 0, max: Number.MAX_SAFE_INTEGER,\n        }, {\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].DiffuseColorTexture, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Texture2D, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Int,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].PixelShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].EveryTime,\n            initialValue: [1, _AbstractMaterialNode__WEBPACK_IMPORTED_MODULE_1__[\"default\"].__dummyWhiteTexture], min: 0, max: Number.MAX_SAFE_INTEGER,\n        });\n        shaderSemanticsInfoArray.push({\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].PointSize, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: true,\n            initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_13__[\"default\"](30.0), min: 0, max: 100,\n        }, {\n            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].PointDistanceAttenuation, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec3, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: false, updateInteval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly, soloDatum: true,\n            initialValue: new _math_Vector3__WEBPACK_IMPORTED_MODULE_5__[\"default\"](0.0, 0.1, 0.01), min: 0, max: 1,\n        });\n        if (isSkinning) {\n            this.__definitions += '#define RN_IS_SKINNING\\n';\n        }\n        if (isLighting) {\n            this.__definitions += '#define RN_IS_LIGHTING\\n';\n        }\n        if (isMorphing) {\n            this.__definitions += '#define RN_IS_MORPHING\\n';\n            shaderSemanticsInfoArray.push({\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].MorphTargetNumber, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Int, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Scalar,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: true, soloDatum: true,\n                initialValue: new _math_Scalar__WEBPACK_IMPORTED_MODULE_13__[\"default\"](0), min: 0, max: _core_Config__WEBPACK_IMPORTED_MODULE_14__[\"default\"].maxVertexMorphNumberInShader, needUniformInFastest: true\n            }, {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].DataTextureMorphOffsetPosition, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].ScalarArray, maxIndex: _core_Config__WEBPACK_IMPORTED_MODULE_14__[\"default\"].maxVertexMorphNumberInShader,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: true, soloDatum: true,\n                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_12__[\"default\"](new Float32Array(_core_Config__WEBPACK_IMPORTED_MODULE_14__[\"default\"].maxVertexMorphNumberInShader)), min: -Number.MAX_VALUE, max: Number.MAX_VALUE, needUniformInFastest: true\n            }, {\n                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].MorphWeights, componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].ScalarArray, maxIndex: _core_Config__WEBPACK_IMPORTED_MODULE_14__[\"default\"].maxVertexMorphNumberInShader,\n                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__[\"ShaderType\"].VertexShader, isSystem: true, soloDatum: true,\n                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_12__[\"default\"](new Float32Array(_core_Config__WEBPACK_IMPORTED_MODULE_14__[\"default\"].maxVertexMorphNumberInShader)), min: -Number.MAX_VALUE, max: Number.MAX_VALUE, needUniformInFastest: true\n            });\n        }\n        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);\n    }\n    setParametersForGPU({ material, shaderProgram, firstTime, args }) {\n        if (args.setUniform) {\n            this.setWorldMatrix(shaderProgram, args.worldMatrix);\n            this.setNormalMatrix(shaderProgram, args.normalMatrix);\n        }\n        /// Matrices\n        let cameraComponent = args.renderPass.cameraComponent;\n        if (cameraComponent == null) {\n            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_10__[\"default\"].getInstance().getComponent(_components_CameraComponent__WEBPACK_IMPORTED_MODULE_11__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_11__[\"default\"].main);\n        }\n        this.setViewInfo(shaderProgram, cameraComponent, material, args.setUniform);\n        this.setProjection(shaderProgram, cameraComponent, material, args.setUniform);\n        /// Skinning\n        const skeletalComponent = args.entity.getComponent(_components_SkeletalComponent__WEBPACK_IMPORTED_MODULE_15__[\"default\"]);\n        this.setSkinning(shaderProgram, skeletalComponent, args.setUniform);\n        // Lights\n        this.setLightsInfo(shaderProgram, args.lightComponents, material, args.setUniform);\n        const __webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_16__[\"default\"].getWebGLResourceRepository();\n        __webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemantics\"].LightViewProjectionMatrix.str, true, this.encodedDepthRenderPass.cameraComponent.viewProjectionMatrix);\n    }\n}\nShadowMapDecodeClassicSingleMaterialNode.ShadowColor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemanticsClass\"]({ str: 'shadowColor' });\nShadowMapDecodeClassicSingleMaterialNode.ShadowAlpha = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemanticsClass\"]({ str: 'shadowAlpha' });\nShadowMapDecodeClassicSingleMaterialNode.NonShadowAlpha = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemanticsClass\"]({ str: 'nonShadowAlpha' });\nShadowMapDecodeClassicSingleMaterialNode.AllowableDepthError = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__[\"ShaderSemanticsClass\"]({ str: 'allowableDepthError' });\n\n\n//# sourceURL=webpack:///./src/foundation/materials/ShadowMapDecodeClassicSingleMaterialNode.ts?");

/***/ }),

/***/ "./src/foundation/math/AABB.ts":
/*!*************************************!*\
  !*** ./src/foundation/math/AABB.ts ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AABB; });\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _MutableVector3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n\n\nclass AABB {\n    constructor() {\n        this.__min = new _MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\n        this.__max = new _MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);\n        this.__centerPoint = _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].zero();\n        this.__lengthCenterToCorner = 0;\n        this.__isCenterPointDirty = false;\n        this.__isLengthCenterToCornerDirty = false;\n    }\n    clone() {\n        let instance = new AABB();\n        instance.__max = this.__max.clone();\n        instance.__min = this.__min.clone();\n        instance.__centerPoint = this.__centerPoint.clone();\n        instance.__lengthCenterToCorner = this.__lengthCenterToCorner;\n        return instance;\n    }\n    initialize() {\n        this.__min.x = Number.MAX_VALUE;\n        this.__min.y = Number.MAX_VALUE;\n        this.__min.z = Number.MAX_VALUE;\n        this.__max.x = -Number.MAX_VALUE;\n        this.__max.y = -Number.MAX_VALUE;\n        this.__max.z = -Number.MAX_VALUE;\n        this.__centerPoint.v[0] = 0;\n        this.__centerPoint.v[1] = 0;\n        this.__centerPoint.v[2] = 0;\n        this.__lengthCenterToCorner = 0;\n        this.__isCenterPointDirty = false;\n        this.__isLengthCenterToCornerDirty = false;\n    }\n    set minPoint(val) {\n        this.__min = new _MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](val);\n    }\n    get minPoint() {\n        return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.__min);\n    }\n    set maxPoint(val) {\n        this.__max = new _MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](val);\n    }\n    get maxPoint() {\n        return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.__max);\n    }\n    isVanilla() {\n        if (this.__min.x >= Number.MAX_VALUE && this.__min.y >= Number.MAX_VALUE && this.__min.z >= Number.MAX_VALUE\n            && this.__max.x <= -Number.MAX_VALUE && this.__max.y <= -Number.MAX_VALUE && this.__max.z <= -Number.MAX_VALUE) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    addPosition(positionVector) {\n        this.__min.x = (positionVector.x < this.__min.x) ? positionVector.x : this.__min.x;\n        this.__min.y = (positionVector.y < this.__min.y) ? positionVector.y : this.__min.y;\n        this.__min.z = (positionVector.z < this.__min.z) ? positionVector.z : this.__min.z;\n        this.__max.x = (this.__max.x < positionVector.x) ? positionVector.x : this.__max.x;\n        this.__max.y = (this.__max.y < positionVector.y) ? positionVector.y : this.__max.y;\n        this.__max.z = (this.__max.z < positionVector.z) ? positionVector.z : this.__max.z;\n        this.__isCenterPointDirty = true;\n        this.__isLengthCenterToCornerDirty = true;\n        return positionVector;\n    }\n    addPositionWithArray(array, index) {\n        this.__min.x = (array[index + 0] < this.__min.x) ? array[index + 0] : this.__min.x;\n        this.__min.y = (array[index + 1] < this.__min.y) ? array[index + 1] : this.__min.y;\n        this.__min.z = (array[index + 2] < this.__min.z) ? array[index + 2] : this.__min.z;\n        this.__max.x = (this.__max.x < array[index + 0]) ? array[index + 0] : this.__max.x;\n        this.__max.y = (this.__max.y < array[index + 1]) ? array[index + 1] : this.__max.y;\n        this.__max.z = (this.__max.z < array[index + 2]) ? array[index + 2] : this.__max.z;\n        this.__isCenterPointDirty = true;\n        this.__isLengthCenterToCornerDirty = true;\n        return array;\n    }\n    mergeAABB(aabb) {\n        var isUpdated = false;\n        if (aabb.isVanilla()) {\n            return isUpdated;\n        }\n        if (this.isVanilla()) {\n            this.__min.x = aabb.minPoint.x;\n            this.__min.y = aabb.minPoint.y;\n            this.__min.z = aabb.minPoint.z;\n            this.__max.x = aabb.maxPoint.x;\n            this.__max.y = aabb.maxPoint.y;\n            this.__max.z = aabb.maxPoint.z;\n            isUpdated = true;\n            return isUpdated;\n        }\n        if (aabb.minPoint.x < this.__min.x) {\n            this.__min.x = aabb.minPoint.x;\n            isUpdated = true;\n        }\n        if (aabb.minPoint.y < this.__min.y) {\n            this.__min.y = aabb.minPoint.y;\n            isUpdated = true;\n        }\n        if (aabb.minPoint.z < this.__min.z) {\n            this.__min.z = aabb.minPoint.z;\n            isUpdated = true;\n        }\n        if (this.__max.x < aabb.maxPoint.x) {\n            this.__max.x = aabb.maxPoint.x;\n            isUpdated = true;\n        }\n        if (this.__max.y < aabb.maxPoint.y) {\n            this.__max.y = aabb.maxPoint.y;\n            isUpdated = true;\n        }\n        if (this.__max.z < aabb.maxPoint.z) {\n            this.__max.z = aabb.maxPoint.z;\n            isUpdated = true;\n        }\n        this.__isCenterPointDirty = true;\n        this.__isLengthCenterToCornerDirty = true;\n        return isUpdated;\n    }\n    get centerPoint() {\n        if (this.__isCenterPointDirty) {\n            this.__centerPoint = _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(this.__min, this.__max).divide(2);\n            this.__isCenterPointDirty = false;\n        }\n        return this.__centerPoint;\n    }\n    get lengthCenterToCorner() {\n        if (this.__isLengthCenterToCornerDirty) {\n            const lengthCenterToCorner = _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].lengthBtw(this.centerPoint, this.maxPoint);\n            this.__lengthCenterToCorner = (lengthCenterToCorner !== lengthCenterToCorner) ? 0 : lengthCenterToCorner;\n            this.__isLengthCenterToCornerDirty = false;\n        }\n        return this.__lengthCenterToCorner;\n    }\n    get sizeX() {\n        return (this.__max.x - this.__min.x);\n    }\n    get sizeY() {\n        return (this.__max.y - this.__min.y);\n    }\n    get sizeZ() {\n        return (this.__max.z - this.__min.z);\n    }\n    static multiplyMatrix(matrix, aabb) {\n        if (aabb.isVanilla()) {\n            return aabb.clone();\n        }\n        var newAabb = new AABB();\n        AABB.__tmpVector3.x = aabb.__min.x;\n        AABB.__tmpVector3.y = aabb.__min.y;\n        AABB.__tmpVector3.z = aabb.__min.z;\n        newAabb.addPosition(AABB.__tmpVector3);\n        AABB.__tmpVector3.x = aabb.__max.x;\n        AABB.__tmpVector3.y = aabb.__min.y;\n        AABB.__tmpVector3.z = aabb.__min.z;\n        newAabb.addPosition(AABB.__tmpVector3);\n        AABB.__tmpVector3.x = aabb.__min.x;\n        AABB.__tmpVector3.y = aabb.__max.y;\n        AABB.__tmpVector3.z = aabb.__min.z;\n        newAabb.addPosition(AABB.__tmpVector3);\n        AABB.__tmpVector3.x = aabb.__min.x;\n        AABB.__tmpVector3.y = aabb.__min.y;\n        AABB.__tmpVector3.z = aabb.__max.z;\n        newAabb.addPosition(AABB.__tmpVector3);\n        AABB.__tmpVector3.x = aabb.__min.x;\n        AABB.__tmpVector3.y = aabb.__max.y;\n        AABB.__tmpVector3.z = aabb.__max.z;\n        newAabb.addPosition(AABB.__tmpVector3);\n        AABB.__tmpVector3.x = aabb.__max.x;\n        AABB.__tmpVector3.y = aabb.__min.y;\n        AABB.__tmpVector3.z = aabb.__max.z;\n        newAabb.addPosition(AABB.__tmpVector3);\n        AABB.__tmpVector3.x = aabb.__max.x;\n        AABB.__tmpVector3.y = aabb.__max.y;\n        AABB.__tmpVector3.z = aabb.__min.z;\n        newAabb.addPosition(AABB.__tmpVector3);\n        AABB.__tmpVector3.x = aabb.__max.x;\n        AABB.__tmpVector3.y = aabb.__max.y;\n        AABB.__tmpVector3.z = aabb.__max.z;\n        newAabb.addPosition(AABB.__tmpVector3);\n        return newAabb;\n    }\n    static multiplyMatrixTo(matrix, aabb, outAabb) {\n        if (aabb.isVanilla()) {\n            return aabb.clone();\n        }\n        AABB.__tmpVector3.x = aabb.__min.x;\n        AABB.__tmpVector3.y = aabb.__min.y;\n        AABB.__tmpVector3.z = aabb.__min.z;\n        matrix.multiplyVectorToVec3(AABB.__tmpVector3, AABB.__tmpVector3);\n        outAabb.addPosition(AABB.__tmpVector3);\n        AABB.__tmpVector3.x = aabb.__max.x;\n        AABB.__tmpVector3.y = aabb.__min.y;\n        AABB.__tmpVector3.z = aabb.__min.z;\n        matrix.multiplyVectorToVec3(AABB.__tmpVector3, AABB.__tmpVector3);\n        outAabb.addPosition(AABB.__tmpVector3);\n        AABB.__tmpVector3.x = aabb.__min.x;\n        AABB.__tmpVector3.y = aabb.__max.y;\n        AABB.__tmpVector3.z = aabb.__min.z;\n        matrix.multiplyVectorToVec3(AABB.__tmpVector3, AABB.__tmpVector3);\n        outAabb.addPosition(AABB.__tmpVector3);\n        AABB.__tmpVector3.x = aabb.__min.x;\n        AABB.__tmpVector3.y = aabb.__min.y;\n        AABB.__tmpVector3.z = aabb.__max.z;\n        matrix.multiplyVectorToVec3(AABB.__tmpVector3, AABB.__tmpVector3);\n        outAabb.addPosition(AABB.__tmpVector3);\n        AABB.__tmpVector3.x = aabb.__min.x;\n        AABB.__tmpVector3.y = aabb.__max.y;\n        AABB.__tmpVector3.z = aabb.__max.z;\n        matrix.multiplyVectorToVec3(AABB.__tmpVector3, AABB.__tmpVector3);\n        outAabb.addPosition(AABB.__tmpVector3);\n        AABB.__tmpVector3.x = aabb.__max.x;\n        AABB.__tmpVector3.y = aabb.__min.y;\n        AABB.__tmpVector3.z = aabb.__max.z;\n        matrix.multiplyVectorToVec3(AABB.__tmpVector3, AABB.__tmpVector3);\n        outAabb.addPosition(AABB.__tmpVector3);\n        AABB.__tmpVector3.x = aabb.__max.x;\n        AABB.__tmpVector3.y = aabb.__max.y;\n        AABB.__tmpVector3.z = aabb.__min.z;\n        matrix.multiplyVectorToVec3(AABB.__tmpVector3, AABB.__tmpVector3);\n        outAabb.addPosition(AABB.__tmpVector3);\n        AABB.__tmpVector3.x = aabb.__max.x;\n        AABB.__tmpVector3.y = aabb.__max.y;\n        AABB.__tmpVector3.z = aabb.__max.z;\n        matrix.multiplyVectorToVec3(AABB.__tmpVector3, AABB.__tmpVector3);\n        outAabb.addPosition(AABB.__tmpVector3);\n        return outAabb;\n    }\n    toString() {\n        return 'AABB_min: ' + this.__min + '\\n' + 'AABB_max: ' + this.__max + '\\n'\n            + 'centerPoint: ' + this.__centerPoint + '\\n' + 'lengthCenterToCorner: ' + this.__lengthCenterToCorner;\n    }\n}\nAABB.__tmpVector3 = _MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\n\n\n//# sourceURL=webpack:///./src/foundation/math/AABB.ts?");

/***/ }),

/***/ "./src/foundation/math/LogQuaternion.ts":
/*!**********************************************!*\
  !*** ./src/foundation/math/LogQuaternion.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return LogQuaternion; });\n/* harmony import */ var _Quaternion__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n\nclass LogQuaternion {\n    constructor(x, y, z) {\n        if (ArrayBuffer.isView(x)) {\n            this.v = x;\n            return;\n        }\n        else if (x == null) {\n            this.v = new Float32Array(0);\n            return;\n        }\n        else {\n            this.v = new Float32Array(3);\n        }\n        if (x == null) {\n            this.v[0] = 0;\n            this.v[1] = 0;\n            this.v[2] = 0;\n        }\n        else if (x instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            const theta = Math.acos(x.w);\n            const sin = Math.sin(theta);\n            this.v[0] = x.x * (theta / sin);\n            this.v[1] = x.y * (theta / sin);\n            this.v[2] = x.z * (theta / sin);\n        }\n        else if (Array.isArray(x)) {\n            this.v[0] = x[0];\n            this.v[1] = x[1];\n            this.v[2] = x[2];\n        }\n        else if (typeof x.z !== 'undefined') {\n            this.v[0] = x.x;\n            this.v[1] = x.y;\n            this.v[2] = x.z;\n        }\n        else {\n            this.v[0] = x;\n            this.v[1] = x;\n            this.v[2] = x;\n        }\n    }\n    get x() {\n        return this.v[0];\n    }\n    get y() {\n        return this.v[1];\n    }\n    get z() {\n        return this.v[2];\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/LogQuaternion.ts?");

/***/ }),

/***/ "./src/foundation/math/MathClassUtil.ts":
/*!**********************************************!*\
  !*** ./src/foundation/math/MathClassUtil.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MathClassUtil; });\n/* harmony import */ var _Vector2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector2 */ \"./src/foundation/math/Vector2.ts\");\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _Vector4__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _Quaternion__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n/* harmony import */ var _Matrix33__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Matrix33 */ \"./src/foundation/math/Matrix33.ts\");\n/* harmony import */ var _Matrix44__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./MutableMatrix33 */ \"./src/foundation/math/MutableMatrix33.ts\");\n/* harmony import */ var _MutableVector4__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./MutableVector4 */ \"./src/foundation/math/MutableVector4.ts\");\n/* harmony import */ var _MutableVector3__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n/* harmony import */ var _MutableVector2__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./MutableVector2 */ \"./src/foundation/math/MutableVector2.ts\");\n/* harmony import */ var _Scalar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Scalar */ \"./src/foundation/math/Scalar.ts\");\n/* harmony import */ var _MutableQuaterion__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./MutableQuaterion */ \"./src/foundation/math/MutableQuaterion.ts\");\n/* harmony import */ var _MutableScalar__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./MutableScalar */ \"./src/foundation/math/MutableScalar.ts\");\n/* harmony import */ var _VectorN__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./VectorN */ \"./src/foundation/math/VectorN.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass MathClassUtil {\n    constructor() {\n    }\n    static arrayToVector(element) {\n        if (Array.isArray(element)) {\n            if (typeof (element[3]) !== 'undefined') {\n                return new _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"](element[0], element[1], element[2], element[3]);\n            }\n            else if (typeof (element[2]) !== 'undefined') {\n                return new _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](element[0], element[1], element[2]);\n            }\n            else {\n                return new _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"](element[0], element[1]);\n            }\n        }\n        else {\n            return element;\n        }\n    }\n    static arrayToVectorOrMatrix(element) {\n        if (Array.isArray(element)) {\n            if (typeof (element[15]) !== 'undefined') {\n                return new _Matrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"](element);\n            }\n            else if (typeof (element[8]) !== 'undefined') {\n                return new _Matrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"](element);\n            }\n            else if (typeof (element[3]) !== 'undefined') {\n                return new _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"](element[0], element[1], element[2], element[3]);\n            }\n            else if (typeof (element[2]) !== 'undefined') {\n                return new _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](element[0], element[1], element[2]);\n            }\n            else {\n                return new _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"](element[0], element[1]);\n            }\n        }\n        else {\n            return element;\n        }\n    }\n    static getImmutableValueClass(compositionType) {\n        if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Vec2) {\n            return _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Vec3) {\n            return _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Vec4) {\n            return _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Mat3) {\n            return _Matrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Mat4) {\n            return _Matrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"];\n        }\n        return void 0;\n    }\n    static getMutableValueClass(compositionType) {\n        if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Vec2) {\n            return _MutableVector2__WEBPACK_IMPORTED_MODULE_11__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Vec3) {\n            return _MutableVector3__WEBPACK_IMPORTED_MODULE_10__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Vec4) {\n            return _MutableVector4__WEBPACK_IMPORTED_MODULE_9__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Mat3) {\n            return _MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__[\"default\"];\n        }\n        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__[\"CompositionType\"].Mat4) {\n            return _MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"];\n        }\n        else {\n            return void 0;\n        }\n    }\n    static cloneOfMathObjects(element) {\n        if (element instanceof _Matrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"]) {\n            return element.clone();\n        }\n        else if (element instanceof _Matrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"]) {\n            return element.clone();\n        }\n        else if (element instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            return element.clone();\n        }\n        else if (element instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return element.clone();\n        }\n        else if (element instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return element.clone();\n        }\n        else {\n            return element;\n        }\n    }\n    static isAcceptableArrayForQuaternion(element) {\n        if (Array.isArray(element)) {\n            if (typeof (element[3]) !== 'undefined') {\n                return true;\n            }\n        }\n        return false;\n    }\n    static arrayToQuaternion(element) {\n        return new _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"](element[0], element[1], element[2], element[3]);\n    }\n    static makeSubArray(array, componentN) {\n        if (componentN === 4) {\n            return [array[0], array[1], array[2], array[3]];\n        }\n        else if (componentN === 3) {\n            return [array[0], array[1], array[2]];\n        }\n        else if (componentN === 2) {\n            return [array[0], array[1]];\n        }\n        else {\n            return array[0];\n        }\n    }\n    static vectorToArray(element) {\n        if (element instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return [element.x, element.v];\n        }\n        else if (element instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return [element.x, element.v, element.z];\n        }\n        else if (element instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"] || element instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n            return [element.x, element.v, element.z, element.w];\n        }\n        else {\n            return element;\n        }\n    }\n    /**\n     * discriminate which Vector instance\n     * @param element any Vector instance\n     * @return number of Vector instance\n     */\n    static compomentNumberOfVector(element) {\n        if (element instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return 2;\n        }\n        else if (element instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return 3;\n        }\n        else if (element instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"] || element instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n            return 4;\n        }\n        else if (Array.isArray(element)) {\n            return element.length;\n        }\n        else {\n            return 0;\n        }\n    }\n    // values range must be [-1, 1]\n    static packNormalizedVec4ToVec2(x, y, z, w, criteria) {\n        let v0 = 0.0;\n        let v1 = 0.0;\n        x = (x + 1) / 2.0;\n        y = (y + 1) / 2.0;\n        z = (z + 1) / 2.0;\n        w = (w + 1) / 2.0;\n        let ir = Math.floor(x * (criteria - 1.0));\n        let ig = Math.floor(y * (criteria - 1.0));\n        let irg = ir * criteria + ig;\n        v0 = irg / criteria;\n        let ib = Math.floor(z * (criteria - 1.0));\n        let ia = Math.floor(w * (criteria - 1.0));\n        let iba = ib * criteria + ia;\n        v1 = iba / criteria;\n        return [v0, v1];\n    }\n    static unProject(windowPosVec3, inversePVMat44, viewportVec4) {\n        const input = new _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"]((windowPosVec3.x - viewportVec4.x) / viewportVec4.z * 2 - 1.0, (windowPosVec3.y - viewportVec4.y) / viewportVec4.w * 2 - 1.0, \n        //      (windowPosVec3.z - zNear) / (zFar - zNear),\n        2 * windowPosVec3.z - 1.0, 1.0);\n        const PVMat44 = inversePVMat44; //Matrix44.transpose(inversePVMat44);\n        const out = PVMat44.multiplyVector(input);\n        //    const a = input.x * PVMat44.m03 + input.y * PVMat44.m13 + input.z * PVMat44.m23 + PVMat44.m33;\n        //    const a = input.x * PVMat44.m30 + input.y * PVMat44.m31 + input.z * PVMat44.m32 + PVMat44.m33;\n        if (out.w === 0) {\n            console.warn(\"Zero division!\");\n        }\n        const output = new _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](_Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].multiply(out, 1 / out.w));\n        return output;\n    }\n    static add(lhs, rhs) {\n        if (isFinite(lhs)) { // number?\n            return lhs + rhs;\n        }\n        else if (lhs instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(lhs, rhs);\n        }\n        else if (lhs instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].add(lhs, rhs);\n        }\n        else if (lhs instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            return _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].add(lhs, rhs);\n        }\n        else if (lhs instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n            return _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"].add(lhs, rhs);\n        }\n        else if (Array.isArray(lhs)) {\n            const arr = [];\n            for (let i = 0; i < lhs.length; i++) {\n                arr[i] = lhs[i] + rhs[i];\n            }\n            return arr;\n        }\n        else {\n            console.error('Non supported type!');\n        }\n    }\n    static subtract(lhs, rhs) {\n        if (isFinite(lhs)) { // number?\n            return lhs - rhs;\n        }\n        else if (lhs instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(lhs, rhs);\n        }\n        else if (lhs instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].subtract(lhs, rhs);\n        }\n        else if (lhs instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            return _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subtract(lhs, rhs);\n        }\n        else if (lhs instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n            return _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subtract(lhs, rhs);\n        }\n        else if (Array.isArray(lhs)) {\n            const arr = [];\n            for (let i = 0; i < lhs.length; i++) {\n                arr[i] = lhs[i] - rhs[i];\n            }\n            return arr;\n        }\n        else {\n            console.error('Non supported type!');\n        }\n    }\n    static multiplyNumber(lhs, rhs) {\n        if (isFinite(lhs)) { // number?\n            return lhs * rhs;\n        }\n        else if (lhs instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(lhs, rhs);\n        }\n        else if (lhs instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].multiply(lhs, rhs);\n        }\n        else if (lhs instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            return _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].multiply(lhs, rhs);\n        }\n        else if (lhs instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n            return _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"].multiplyNumber(lhs, rhs);\n        }\n        else if (Array.isArray(lhs)) {\n            const arr = [];\n            for (let i = 0; i < lhs.length; i++) {\n                arr[i] = lhs[i] * rhs;\n            }\n            return arr;\n        }\n        else {\n            console.error('Non supported type!');\n        }\n    }\n    static divideNumber(lhs, rhs) {\n        if (isFinite(lhs)) { // number?\n            return lhs / rhs;\n        }\n        else if (lhs instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(lhs, 1 / rhs);\n        }\n        else if (lhs instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].multiply(lhs, 1 / rhs);\n        }\n        else if (lhs instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            return _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"].multiply(lhs, 1 / rhs);\n        }\n        else if (lhs instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n            return _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"].multiplyNumber(lhs, 1 / rhs);\n        }\n        else if (Array.isArray(lhs)) {\n            const arr = [];\n            for (let i = 0; i < lhs.length; i++) {\n                arr[i] = lhs[i] / rhs;\n            }\n            return arr;\n        }\n        else {\n            console.error('Non supported type!');\n        }\n    }\n    static initWithScalar(objForDetectType, val) {\n        if (isFinite(objForDetectType)) { // number?\n            return val;\n        }\n        else if (objForDetectType instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n            return new _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"](val, val);\n        }\n        else if (objForDetectType instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            return new _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](val, val, val);\n        }\n        else if (objForDetectType instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            return new _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"](val, val, val, val);\n        }\n        else if (objForDetectType instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n            return new _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"](0, 0, 0, 1);\n        }\n        else if (Array.isArray(objForDetectType)) {\n            const arr = [];\n            for (let i = 0; i < objForDetectType.length; i++) {\n                arr[i] = val;\n            }\n            return arr;\n        }\n        else {\n            console.error('Non supported type!');\n            return void 0;\n        }\n    }\n    static initWithFloat32Array(objForDetectType, val, floatArray, compositionType) {\n        let obj;\n        if (isFinite(objForDetectType)) { // number?\n            const array = new Float32Array(floatArray);\n            floatArray.v = void 0;\n            array[0] = val;\n            return new _Scalar__WEBPACK_IMPORTED_MODULE_12__[\"default\"](array);\n        }\n        else if (objForDetectType instanceof _Scalar__WEBPACK_IMPORTED_MODULE_12__[\"default\"] || objForDetectType instanceof _MutableScalar__WEBPACK_IMPORTED_MODULE_14__[\"default\"]) {\n            floatArray[0] = val.x;\n            obj = new _MutableScalar__WEBPACK_IMPORTED_MODULE_14__[\"default\"](floatArray);\n        }\n        else if (objForDetectType instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"] || objForDetectType instanceof _MutableVector2__WEBPACK_IMPORTED_MODULE_11__[\"default\"]) {\n            floatArray[0] = val.x;\n            floatArray[1] = val.y;\n            obj = new _MutableVector2__WEBPACK_IMPORTED_MODULE_11__[\"default\"](floatArray);\n        }\n        else if (objForDetectType instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"] || objForDetectType instanceof _MutableVector3__WEBPACK_IMPORTED_MODULE_10__[\"default\"]) {\n            floatArray[0] = val.x;\n            floatArray[1] = val.y;\n            floatArray[2] = val.z;\n            obj = new _MutableVector3__WEBPACK_IMPORTED_MODULE_10__[\"default\"](floatArray);\n        }\n        else if (objForDetectType instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"] || objForDetectType instanceof _MutableVector4__WEBPACK_IMPORTED_MODULE_9__[\"default\"]) {\n            floatArray[0] = val.x;\n            floatArray[1] = val.y;\n            floatArray[2] = val.z;\n            floatArray[3] = val.w;\n            obj = new _MutableVector4__WEBPACK_IMPORTED_MODULE_9__[\"default\"](floatArray);\n        }\n        else if (objForDetectType instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"] || objForDetectType instanceof _MutableQuaterion__WEBPACK_IMPORTED_MODULE_13__[\"default\"]) {\n            floatArray[0] = val.x;\n            floatArray[1] = val.y;\n            floatArray[2] = val.z;\n            floatArray[3] = val.w;\n            obj = new _MutableQuaterion__WEBPACK_IMPORTED_MODULE_13__[\"default\"](floatArray);\n        }\n        else if (objForDetectType instanceof _Matrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"] || objForDetectType instanceof _MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__[\"default\"]) {\n            obj = (obj == null) ? new _MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__[\"default\"](floatArray, false, true) : obj;\n            obj.m00 = val.m00;\n            obj.m01 = val.m01;\n            obj.m02 = val.m02;\n            obj.m10 = val.m10;\n            obj.m11 = val.m11;\n            obj.m12 = val.m12;\n            obj.m20 = val.m20;\n            obj.m21 = val.m21;\n            obj.m22 = val.m22;\n        }\n        else if (objForDetectType instanceof _Matrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"] || objForDetectType instanceof _MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"]) {\n            obj = new _MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"](floatArray, false, true);\n            obj.m00 = val.m00;\n            obj.m01 = val.m01;\n            obj.m02 = val.m02;\n            obj.m03 = val.m03;\n            obj.m10 = val.m10;\n            obj.m11 = val.m11;\n            obj.m12 = val.m12;\n            obj.m13 = val.m13;\n            obj.m20 = val.m20;\n            obj.m21 = val.m21;\n            obj.m22 = val.m22;\n            obj.m23 = val.m23;\n            obj.m30 = val.m30;\n            obj.m31 = val.m31;\n            obj.m32 = val.m32;\n            obj.m33 = val.m33;\n        }\n        else if (objForDetectType instanceof _VectorN__WEBPACK_IMPORTED_MODULE_15__[\"default\"]) {\n            obj = new _VectorN__WEBPACK_IMPORTED_MODULE_15__[\"default\"](floatArray);\n        }\n        else if (objForDetectType == null) {\n            let vec;\n            switch (floatArray.length) {\n                case 4:\n                    vec = new _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"](floatArray);\n                    break;\n                case 3:\n                    vec = new _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"](floatArray);\n                    break;\n                case 2:\n                    vec = new _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"](floatArray);\n                    break;\n                case 1:\n                    vec = new _Scalar__WEBPACK_IMPORTED_MODULE_12__[\"default\"](floatArray);\n                    break;\n            }\n            floatArray.v = void 0;\n            return vec;\n        }\n        else if (Array.isArray(objForDetectType) || ArrayBuffer.isView(objForDetectType) || ArrayBuffer.isView(objForDetectType.v)) {\n            return objForDetectType;\n        }\n        else {\n            console.error('Non supported type!');\n            return void 0;\n        }\n        floatArray.v = void 0;\n        return obj;\n    }\n    static _setForce(objForDetectType, val) {\n        let obj = objForDetectType;\n        if (objForDetectType instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"] || objForDetectType instanceof _MutableVector4__WEBPACK_IMPORTED_MODULE_9__[\"default\"]) {\n            objForDetectType.v[0] = val.v[0];\n            objForDetectType.v[1] = val.v[1];\n            objForDetectType.v[2] = val.v[2];\n            objForDetectType.v[3] = val.v[3];\n        }\n        else if (objForDetectType instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"] || objForDetectType instanceof _MutableVector3__WEBPACK_IMPORTED_MODULE_10__[\"default\"]) {\n            objForDetectType.v[0] = val.v[0];\n            objForDetectType.v[1] = val.v[1];\n            objForDetectType.v[2] = val.v[2];\n        }\n        else if (objForDetectType instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"default\"] || objForDetectType instanceof _MutableVector2__WEBPACK_IMPORTED_MODULE_11__[\"default\"]) {\n            objForDetectType.v[0] = val.v[0];\n            objForDetectType.v[1] = val.v[1];\n        }\n        else if (objForDetectType instanceof _Scalar__WEBPACK_IMPORTED_MODULE_12__[\"default\"] || objForDetectType instanceof _MutableScalar__WEBPACK_IMPORTED_MODULE_14__[\"default\"]) {\n            if (typeof val.v === 'undefined') {\n                objForDetectType.v[0] = val;\n            }\n            else {\n                objForDetectType.v[0] = val.v[0];\n            }\n        }\n        else if (objForDetectType instanceof _Matrix33__WEBPACK_IMPORTED_MODULE_4__[\"default\"] || objForDetectType instanceof _MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__[\"default\"]) {\n            objForDetectType.v[0] = val.v[0];\n            objForDetectType.v[1] = val.v[1];\n            objForDetectType.v[2] = val.v[2];\n            objForDetectType.v[3] = val.v[3];\n            objForDetectType.v[4] = val.v[4];\n            objForDetectType.v[5] = val.v[5];\n            objForDetectType.v[6] = val.v[6];\n            objForDetectType.v[7] = val.v[7];\n            objForDetectType.v[8] = val.v[8];\n        }\n        else if (objForDetectType instanceof _Matrix44__WEBPACK_IMPORTED_MODULE_5__[\"default\"] || objForDetectType instanceof _MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"]) {\n            objForDetectType.v[0] = val.v[0];\n            objForDetectType.v[1] = val.v[1];\n            objForDetectType.v[2] = val.v[2];\n            objForDetectType.v[3] = val.v[3];\n            objForDetectType.v[4] = val.v[4];\n            objForDetectType.v[5] = val.v[5];\n            objForDetectType.v[6] = val.v[6];\n            objForDetectType.v[7] = val.v[7];\n            objForDetectType.v[8] = val.v[8];\n            objForDetectType.v[9] = val.v[9];\n            objForDetectType.v[10] = val.v[10];\n            objForDetectType.v[11] = val.v[11];\n            objForDetectType.v[12] = val.v[12];\n            objForDetectType.v[13] = val.v[13];\n            objForDetectType.v[14] = val.v[14];\n            objForDetectType.v[15] = val.v[15];\n        }\n        else if (objForDetectType instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__[\"default\"] || objForDetectType instanceof _MutableQuaterion__WEBPACK_IMPORTED_MODULE_13__[\"default\"]) {\n            objForDetectType.v[0] = val.v[0];\n            objForDetectType.v[1] = val.v[1];\n            objForDetectType.v[2] = val.v[2];\n            objForDetectType.v[3] = val.v[3];\n        }\n        else if (objForDetectType instanceof _VectorN__WEBPACK_IMPORTED_MODULE_15__[\"default\"]) {\n            let valArray;\n            if (val instanceof _VectorN__WEBPACK_IMPORTED_MODULE_15__[\"default\"]) {\n                valArray = val.v;\n            }\n            else {\n                valArray = val;\n            }\n            for (let i = 0; i < valArray.length; i++) {\n                objForDetectType.v[i] = valArray[i];\n            }\n        }\n        else if (Array.isArray(objForDetectType)) {\n            for (let i = 0; i < objForDetectType.length; i++) {\n                objForDetectType[i] = val.v[i];\n            }\n        }\n        else if (!isNaN(objForDetectType.v.length)) {\n            for (let i = 0; i < objForDetectType.v.length; i++) {\n                if (Array.isArray(val)) {\n                    objForDetectType.v[i] = val[i];\n                }\n                else {\n                    objForDetectType.v[i] = val.v[i];\n                }\n            }\n        }\n        else {\n            console.warn('Unknown type _setForce');\n        }\n        // maybe objForDetectType is number\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/MathClassUtil.ts?");

/***/ }),

/***/ "./src/foundation/math/MathUtil.ts":
/*!*****************************************!*\
  !*** ./src/foundation/math/MathUtil.ts ***!
  \*****************************************/
/*! exports provided: MathUtil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MathUtil\", function() { return MathUtil; });\n//import GLBoost from '../../globals';\nfunction radianToDegree(rad) {\n    return rad * 180 / Math.PI;\n}\nfunction degreeToRadian(deg) {\n    return deg * Math.PI / 180;\n}\n// https://gamedev.stackexchange.com/questions/17326/conversion-of-a-number-from-single-precision-floating-point-representation-to-a/17410#17410\nconst toHalfFloat = (function () {\n    var floatView = new Float32Array(1);\n    var int32View = new Int32Array(floatView.buffer);\n    /* This method is faster than the OpenEXR implementation (very often\n      * used, eg. in Ogre), with the additional benefit of rounding, inspired\n      * by James Tursa?s half-precision code. */\n    return function toHalf(val) {\n        floatView[0] = val;\n        var x = int32View[0];\n        var bits = (x >> 16) & 0x8000; /* Get the sign */\n        var m = (x >> 12) & 0x07ff; /* Keep one extra bit for rounding */\n        var e = (x >> 23) & 0xff; /* Using int is faster here */\n        /* If zero, or denormal, or exponent underflows too much for a denormal\n          * half, return signed zero. */\n        if (e < 103) {\n            return bits;\n        }\n        /* If NaN, return NaN. If Inf or exponent overflow, return Inf. */\n        if (e > 142) {\n            bits |= 0x7c00;\n            /* If exponent was 0xff and one mantissa bit was set, it means NaN,\n                  * not Inf, so make sure we set one mantissa bit too. */\n            bits |= ((e == 255) ? 0 : 1) && (x & 0x007fffff);\n            return bits;\n        }\n        /* If exponent underflows but not too much, return a denormal */\n        if (e < 113) {\n            m |= 0x0800;\n            /* Extra rounding may overflow and set mantissa to 0 and exponent\n              * to 1, which is OK. */\n            bits |= (m >> (114 - e)) + ((m >> (113 - e)) & 1);\n            return bits;\n        }\n        bits |= ((e - 112) << 10) | (m >> 1);\n        /* Extra rounding. An overflow will set mantissa to 0 and increment\n          * the exponent, which is OK. */\n        bits += m & 1;\n        return bits;\n    };\n}());\n/**\n * check whether or not this texture size is power of two.\n *\n * @param x texture size.\n * @returns check whether or not the size x is power of two.\n */\nfunction isPowerOfTwo(x) {\n    return (x & (x - 1)) == 0;\n}\nfunction isPowerOfTwoTexture(width, height) {\n    return isPowerOfTwo(width) && isPowerOfTwo(height);\n}\n// values range must be [-1, 1]\nfunction packNormalizedVec4ToVec2(x, y, z, w, criteria) {\n    let v0 = 0.0;\n    let v1 = 0.0;\n    x = (x + 1) / 2.0;\n    y = (y + 1) / 2.0;\n    z = (z + 1) / 2.0;\n    w = (w + 1) / 2.0;\n    let ir = Math.floor(x * (criteria - 1.0));\n    let ig = Math.floor(y * (criteria - 1.0));\n    let irg = ir * criteria + ig;\n    v0 = irg / criteria;\n    let ib = Math.floor(z * (criteria - 1.0));\n    let ia = Math.floor(w * (criteria - 1.0));\n    let iba = ib * criteria + ia;\n    v1 = iba / criteria;\n    return [v0, v1];\n}\nconst MathUtil = Object.freeze({ radianToDegree, degreeToRadian, toHalfFloat, isPowerOfTwo, isPowerOfTwoTexture, packNormalizedVec4ToVec2 });\n\n\n//# sourceURL=webpack:///./src/foundation/math/MathUtil.ts?");

/***/ }),

/***/ "./src/foundation/math/Matrix22.ts":
/*!*****************************************!*\
  !*** ./src/foundation/math/Matrix22.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Matrix22; });\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n\nclass Matrix22 {\n    constructor(m0, m1, m2, m3, isColumnMajor = false, notCopyFloatArray = false) {\n        const _isColumnMajor = (arguments.length === 5) ? isColumnMajor : m1;\n        const _notCopyFloatArray = (arguments.length === 3) ? notCopyFloatArray : m2;\n        const m = m0;\n        if (m == null) {\n            this.v = new Float32Array(0);\n            return;\n        }\n        if (arguments.length === 4) {\n            this.v = new Float32Array(4);\n            if (_isColumnMajor === true) {\n                let m = arguments;\n                this.v[0] = m[0];\n                this.v[2] = m[2];\n                this.v[1] = m[1];\n                this.v[3] = m[3];\n            }\n            else {\n                let m = arguments;\n                // arguments[0-3] must be row major values if isColumnMajor is false\n                this.v[0] = m[0];\n                this.v[2] = m[1];\n                this.v[1] = m[2];\n                this.v[3] = m[3];\n            }\n        }\n        else if (Array.isArray(m)) {\n            this.v = new Float32Array(4);\n            if (_isColumnMajor === true) {\n                this.v[0] = m[0];\n                this.v[2] = m[2];\n                this.v[1] = m[1];\n                this.v[3] = m[3];\n            }\n            else {\n                // 'm' must be row major array if isColumnMajor is false\n                this.v[0] = m[0];\n                this.v[2] = m[1];\n                this.v[1] = m[2];\n                this.v[3] = m[3];\n            }\n        }\n        else if (m instanceof Float32Array) {\n            if (_notCopyFloatArray) {\n                this.v = m;\n            }\n            else {\n                this.v = new Float32Array(4);\n                if (_isColumnMajor === true) {\n                    this.v[0] = m[0];\n                    this.v[2] = m[2];\n                    this.v[1] = m[1];\n                    this.v[3] = m[3];\n                }\n                else {\n                    // 'm' must be row major array if isColumnMajor is false\n                    this.v[0] = m[0];\n                    this.v[2] = m[1];\n                    this.v[1] = m[2];\n                    this.v[3] = m[3];\n                }\n            }\n        }\n        else if (!!m && typeof m.v[8] !== 'undefined') {\n            if (_notCopyFloatArray) {\n                this.v = m.v;\n            }\n            else {\n                this.v = new Float32Array(4);\n                if (_isColumnMajor === true) {\n                    const v = m.v;\n                    this.v[0] = m[0];\n                    this.v[2] = m[2];\n                    this.v[1] = m[1];\n                    this.v[3] = m[3];\n                }\n                else {\n                    const v = m.v;\n                    // 'm' must be row major array if isColumnMajor is false\n                    this.v[0] = m[0];\n                    this.v[2] = m[1];\n                    this.v[1] = m[2];\n                    this.v[3] = m[3];\n                }\n            }\n        }\n        else {\n            this.v = new Float32Array(4);\n            this.v[0] = 1;\n            this.v[2] = 0;\n            this.v[1] = 0;\n            this.v[3] = 1;\n        }\n    }\n    get className() {\n        return this.constructor.name;\n    }\n    static get compositionType() {\n        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__[\"CompositionType\"].Mat2;\n    }\n    multiplyVector(vec) {\n        const x = this.v[0] * vec.x + this.v[2] * vec.y;\n        const y = this.v[1] * vec.x + this.v[3] * vec.y;\n        return new vec.constructor(x, y);\n    }\n    /**\n     * Make this identity matrixstatic method version\n     */\n    static identity() {\n        return new Matrix22(1, 0, 0, 1);\n    }\n    static dummy() {\n        return new Matrix22(null);\n    }\n    isDummy() {\n        if (this.v.length === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    clone() {\n        return new Matrix22(this.v[0], this.v[2], this.v[1], this.v[3]);\n    }\n    /**\n     * Create Rotation Matrix\n     */\n    static rotate(radian) {\n        const cos = Math.cos(radian);\n        const sin = Math.sin(radian);\n        return new Matrix22(cos, -sin, sin, cos);\n    }\n    static scale(vec) {\n        return new Matrix22(vec.x, 0, 0, vec.y);\n    }\n    /**\n     * zero matrix(static version)\n     */\n    static zero() {\n        return new Matrix22(0, 0, 0, 0);\n    }\n    /**\n     * transpose(static version)\n     */\n    static transpose(mat) {\n        const mat_t = new Matrix22(mat.m00, mat.m10, mat.m01, mat.m11);\n        return mat_t;\n    }\n    /**\n     * multiply matrixs (static version)\n     */\n    static multiply(l_m, r_m) {\n        const m00 = l_m.v[0] * r_m.v[0] + l_m.v[2] * r_m.v[1];\n        const m10 = l_m.v[1] * r_m.v[0] + l_m.v[3] * r_m.v[1];\n        const m01 = l_m.v[0] * r_m.v[2] + l_m.v[2] * r_m.v[3];\n        const m11 = l_m.v[1] * r_m.v[2] + l_m.v[3] * r_m.v[3];\n        return new Matrix22(m00, m01, m10, m11);\n    }\n    determinant() {\n        return this.v[0] * this.v[3] - this.v[1] * this.v[2];\n    }\n    static determinant(mat) {\n        return mat.m00 * mat.m11 - mat.m10 * mat.m01;\n    }\n    static invert(mat) {\n        const det = mat.determinant();\n        const m00 = mat.m11 / det;\n        const m01 = mat.m01 / det * (-1.0);\n        const m10 = mat.m10 / det * (-1.0);\n        const m11 = mat.m00 / det;\n        return new Matrix22(m00, m01, m10, m11);\n    }\n    get m00() {\n        return this.v[0];\n    }\n    get m10() {\n        return this.v[1];\n    }\n    get m01() {\n        return this.v[2];\n    }\n    get m11() {\n        return this.v[3];\n    }\n    toString() {\n        return this.v[0] + ' ' + this.v[2] + '\\n' +\n            this.v[1] + ' ' + this.v[3] + ' \\n';\n    }\n    nearZeroToZero(value) {\n        if (Math.abs(value) < 0.00001) {\n            value = 0;\n        }\n        else if (0.99999 < value && value < 1.00001) {\n            value = 1;\n        }\n        else if (-1.00001 < value && value < -0.99999) {\n            value = -1;\n        }\n        return value;\n    }\n    toStringApproximately() {\n        return this.nearZeroToZero(this.v[0]) + ' ' + this.nearZeroToZero(this.v[2]) + '\\n' +\n            this.nearZeroToZero(this.v[1]) + ' ' + this.nearZeroToZero(this.v[3]) + ' \\n';\n    }\n    isEqual(mat, delta = Number.EPSILON) {\n        if (Math.abs(mat.v[0] - this.v[0]) < delta &&\n            Math.abs(mat.v[1] - this.v[1]) < delta &&\n            Math.abs(mat.v[2] - this.v[2]) < delta &&\n            Math.abs(mat.v[3] - this.v[3]) < delta &&\n            Math.abs(mat.v[4] - this.v[4]) < delta &&\n            Math.abs(mat.v[5] - this.v[5]) < delta &&\n            Math.abs(mat.v[6] - this.v[6]) < delta &&\n            Math.abs(mat.v[7] - this.v[7]) < delta &&\n            Math.abs(mat.v[8] - this.v[8]) < delta) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/Matrix22.ts?");

/***/ }),

/***/ "./src/foundation/math/Matrix33.ts":
/*!*****************************************!*\
  !*** ./src/foundation/math/Matrix33.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Matrix33; });\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n// import GLBoost from '../../globals';\n\n\nclass Matrix33 {\n    constructor(m0, m1, m2, m3, m4, m5, m6, m7, m8, isColumnMajor = false, notCopyFloatArray = false) {\n        const _isColumnMajor = (arguments.length === 10) ? isColumnMajor : m1;\n        const _notCopyFloatArray = (arguments.length === 3) ? notCopyFloatArray : m2;\n        const m = m0;\n        if (m == null) {\n            this.v = new Float32Array(0);\n            return;\n        }\n        if (9 <= arguments.length && arguments.length <= 10 && m8 != null) {\n            this.v = new Float32Array(9);\n            if (_isColumnMajor === true) {\n                let m = arguments;\n                this.v[0] = m[0];\n                this.v[3] = m[3];\n                this.v[6] = m[6];\n                this.v[1] = m[1];\n                this.v[4] = m[4];\n                this.v[7] = m[7];\n                this.v[2] = m[2];\n                this.v[5] = m[5];\n                this.v[8] = m[8];\n            }\n            else {\n                let m = arguments;\n                // arguments[0-8] must be row major values if isColumnMajor is false\n                this.v[0] = m[0];\n                this.v[3] = m[1];\n                this.v[6] = m[2];\n                this.v[1] = m[3];\n                this.v[4] = m[4];\n                this.v[7] = m[5];\n                this.v[2] = m[6];\n                this.v[5] = m[7];\n                this.v[8] = m[8];\n            }\n        }\n        else if (Array.isArray(m)) {\n            this.v = new Float32Array(9);\n            if (_isColumnMajor === true) {\n                this.v[0] = m[0];\n                this.v[3] = m[3];\n                this.v[6] = m[6];\n                this.v[1] = m[1];\n                this.v[4] = m[4];\n                this.v[7] = m[7];\n                this.v[2] = m[2];\n                this.v[5] = m[5];\n                this.v[8] = m[8];\n            }\n            else {\n                // 'm' must be row major array if isColumnMajor is false\n                this.v[0] = m[0];\n                this.v[3] = m[1];\n                this.v[6] = m[2];\n                this.v[1] = m[3];\n                this.v[4] = m[4];\n                this.v[7] = m[5];\n                this.v[2] = m[6];\n                this.v[5] = m[7];\n                this.v[8] = m[8];\n            }\n        }\n        else if (m instanceof Float32Array) {\n            if (_notCopyFloatArray) {\n                this.v = m;\n            }\n            else {\n                this.v = new Float32Array(9);\n                if (_isColumnMajor === true) {\n                    this.v[0] = m[0];\n                    this.v[3] = m[3];\n                    this.v[6] = m[6];\n                    this.v[1] = m[1];\n                    this.v[4] = m[4];\n                    this.v[7] = m[7];\n                    this.v[2] = m[2];\n                    this.v[5] = m[5];\n                    this.v[8] = m[8];\n                }\n                else {\n                    // 'm' must be row major array if isColumnMajor is false\n                    this.v[0] = m[0];\n                    this.v[3] = m[1];\n                    this.v[6] = m[2];\n                    this.v[1] = m[3];\n                    this.v[4] = m[4];\n                    this.v[7] = m[5];\n                    this.v[2] = m[6];\n                    this.v[5] = m[7];\n                    this.v[8] = m[8];\n                }\n            }\n        }\n        else if (!!m && m.v != null && m.v[8] !== null) {\n            if (_notCopyFloatArray) {\n                this.v = m.v;\n            }\n            else {\n                this.v = new Float32Array(9);\n                if (_isColumnMajor === true) {\n                    const v = m.v;\n                    this.v[0] = v[0];\n                    this.v[3] = v[3];\n                    this.v[6] = v[6];\n                    this.v[1] = v[1];\n                    this.v[4] = v[4];\n                    this.v[7] = v[7];\n                    this.v[2] = v[2];\n                    this.v[5] = v[5];\n                    this.v[8] = v[8];\n                }\n                else {\n                    const v = m.v;\n                    // 'm' must be row major array if isColumnMajor is false\n                    this.v[0] = v[0];\n                    this.v[3] = v[1];\n                    this.v[6] = v[2];\n                    this.v[1] = v[3];\n                    this.v[4] = v[4];\n                    this.v[7] = v[5];\n                    this.v[2] = v[6];\n                    this.v[5] = v[7];\n                    this.v[8] = v[8];\n                }\n            }\n        }\n        else if (!!m && typeof m.className !== 'undefined' && m.className === 'Quaternion') {\n            this.v = new Float32Array(9);\n            const q = m;\n            const sx = q.x * q.x;\n            const sy = q.y * q.y;\n            const sz = q.z * q.z;\n            const cx = q.y * q.z;\n            const cy = q.x * q.z;\n            const cz = q.x * q.y;\n            const wx = q.w * q.x;\n            const wy = q.w * q.y;\n            const wz = q.w * q.z;\n            this.v[0] = 1.0 - 2.0 * (sy + sz);\n            this.v[3] = 2.0 * (cz - wz);\n            this.v[6] = 2.0 * (cy + wy);\n            this.v[1] = 2.0 * (cz + wz);\n            this.v[4] = 1.0 - 2.0 * (sx + sz);\n            this.v[7] = 2.0 * (cx - wx);\n            this.v[2] = 2.0 * (cy - wy);\n            this.v[5] = 2.0 * (cx + wx);\n            this.v[8] = 1.0 - 2.0 * (sx + sy);\n        }\n        else {\n            this.v = new Float32Array(9);\n            this.v[0] = 1;\n            this.v[3] = 0;\n            this.v[6] = 0;\n            this.v[1] = 0;\n            this.v[4] = 1;\n            this.v[7] = 0;\n            this.v[2] = 0;\n            this.v[5] = 0;\n            this.v[8] = 1;\n        }\n    }\n    get className() {\n        return this.constructor.name;\n    }\n    static get compositionType() {\n        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Mat3;\n    }\n    multiplyVector(vec) {\n        var x = this.v[0] * vec.x + this.v[3] * vec.y + this.v[6] * vec.z;\n        var y = this.v[1] * vec.x + this.v[4] * vec.y + this.v[7] * vec.z;\n        var z = this.v[2] * vec.x + this.v[5] * vec.y + this.v[8] * vec.z;\n        return new vec.constructor(x, y, z);\n    }\n    /**\n     * Make this identity matrixstatic method version\n     */\n    static identity() {\n        return new Matrix33(1, 0, 0, 0, 1, 0, 0, 0, 1);\n    }\n    static dummy() {\n        return new Matrix33(null);\n    }\n    isDummy() {\n        if (this.v.length === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    clone() {\n        return new Matrix33(this.v[0], this.v[3], this.v[6], this.v[1], this.v[4], this.v[7], this.v[2], this.v[5], this.v[8]);\n    }\n    /**\n     * Create X oriented Rotation Matrix\n     */\n    static rotateX(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new Matrix33(1, 0, 0, 0, cos, -sin, 0, sin, cos);\n    }\n    /**\n     * Create Y oriented Rotation Matrix\n     */\n    static rotateY(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new Matrix33(cos, 0, sin, 0, 1, 0, -sin, 0, cos);\n    }\n    /**\n     * Create Z oriented Rotation Matrix\n     */\n    static rotateZ(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new Matrix33(cos, -sin, 0, sin, cos, 0, 0, 0, 1);\n    }\n    static rotateXYZ(x, y, z) {\n        return Matrix33.multiply(Matrix33.multiply(Matrix33.rotateZ(z), Matrix33.rotateY(y)), Matrix33.rotateX(x));\n    }\n    static rotate(vec3) {\n        return Matrix33.multiply(Matrix33.multiply(Matrix33.rotateZ(vec3.z), Matrix33.rotateY(vec3.y)), Matrix33.rotateX(vec3.x));\n    }\n    static scale(vec) {\n        return new Matrix33(vec.x, 0, 0, 0, vec.y, 0, 0, 0, vec.z);\n    }\n    /**\n     * zero matrix(static version)\n     */\n    static zero() {\n        return new Matrix33(0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n    /**\n     * transpose(static version)\n     */\n    static transpose(mat) {\n        var mat_t = new Matrix33(mat.m00, mat.m10, mat.m20, mat.m01, mat.m11, mat.m21, mat.m02, mat.m12, mat.m22);\n        return mat_t;\n    }\n    /**\n     * multiply matrixs (static version)\n     */\n    static multiply(l_m, r_m) {\n        var m00 = l_m.v[0] * r_m.v[0] + l_m.v[3] * r_m.v[1] + l_m.v[6] * r_m.v[2];\n        var m10 = l_m.v[1] * r_m.v[0] + l_m.v[4] * r_m.v[1] + l_m.v[7] * r_m.v[2];\n        var m20 = l_m.v[2] * r_m.v[0] + l_m.v[5] * r_m.v[1] + l_m.v[8] * r_m.v[2];\n        var m01 = l_m.v[0] * r_m.v[3] + l_m.v[3] * r_m.v[4] + l_m.v[6] * r_m.v[5];\n        var m11 = l_m.v[1] * r_m.v[3] + l_m.v[4] * r_m.v[4] + l_m.v[7] * r_m.v[5];\n        var m21 = l_m.v[2] * r_m.v[3] + l_m.v[5] * r_m.v[4] + l_m.v[8] * r_m.v[5];\n        var m02 = l_m.v[0] * r_m.v[6] + l_m.v[3] * r_m.v[7] + l_m.v[6] * r_m.v[8];\n        var m12 = l_m.v[1] * r_m.v[6] + l_m.v[4] * r_m.v[7] + l_m.v[7] * r_m.v[8];\n        var m22 = l_m.v[2] * r_m.v[6] + l_m.v[5] * r_m.v[7] + l_m.v[8] * r_m.v[8];\n        return new Matrix33(m00, m01, m02, m10, m11, m12, m20, m21, m22);\n    }\n    determinant() {\n        return this.v[0] * this.v[4] * this.v[8] + this.v[1] * this.v[5] * this.v[6] + this.v[2] * this.v[3] * this.v[7]\n            - this.v[0] * this.v[5] * this.v[7] - this.v[2] * this.v[4] * this.v[6] - this.v[1] * this.v[3] * this.v[8];\n    }\n    static determinant(mat) {\n        return mat.m00 * mat.m11 * mat.m22 + mat.m10 * mat.m21 * mat.m02 + mat.m20 * mat.m01 * mat.m12\n            - mat.m00 * mat.m21 * mat.m12 - mat.m20 * mat.m11 * mat.m02 - mat.m10 * mat.m01 * mat.m22;\n    }\n    static invert(mat) {\n        var det = mat.determinant();\n        var m00 = (mat.m11 * mat.m22 - mat.m12 * mat.m21) / det;\n        var m01 = (mat.m02 * mat.m21 - mat.m01 * mat.m22) / det;\n        var m02 = (mat.m01 * mat.m12 - mat.m02 * mat.m11) / det;\n        var m10 = (mat.m12 * mat.m20 - mat.m10 * mat.m22) / det;\n        var m11 = (mat.m00 * mat.m22 - mat.m02 * mat.m20) / det;\n        var m12 = (mat.m02 * mat.m10 - mat.m00 * mat.m12) / det;\n        var m20 = (mat.m10 * mat.m21 - mat.m11 * mat.m20) / det;\n        var m21 = (mat.m01 * mat.m20 - mat.m00 * mat.m21) / det;\n        var m22 = (mat.m00 * mat.m11 - mat.m01 * mat.m10) / det;\n        return new Matrix33(m00, m01, m02, m10, m11, m12, m20, m21, m22);\n    }\n    get m00() {\n        return this.v[0];\n    }\n    get m10() {\n        return this.v[1];\n    }\n    get m20() {\n        return this.v[2];\n    }\n    get m01() {\n        return this.v[3];\n    }\n    get m11() {\n        return this.v[4];\n    }\n    get m21() {\n        return this.v[5];\n    }\n    get m02() {\n        return this.v[6];\n    }\n    get m12() {\n        return this.v[7];\n    }\n    get m22() {\n        return this.v[8];\n    }\n    toString() {\n        return this.v[0] + ' ' + this.v[3] + ' ' + this.v[6] + '\\n' +\n            this.v[1] + ' ' + this.v[4] + ' ' + this.v[7] + '\\n' +\n            this.v[2] + ' ' + this.v[5] + ' ' + this.v[8] + '\\n';\n    }\n    nearZeroToZero(value) {\n        if (Math.abs(value) < 0.00001) {\n            value = 0;\n        }\n        else if (0.99999 < value && value < 1.00001) {\n            value = 1;\n        }\n        else if (-1.00001 < value && value < -0.99999) {\n            value = -1;\n        }\n        return value;\n    }\n    toStringApproximately() {\n        return this.nearZeroToZero(this.v[0]) + ' ' + this.nearZeroToZero(this.v[3]) + ' ' + this.nearZeroToZero(this.v[6]) + '\\n' +\n            this.nearZeroToZero(this.v[1]) + ' ' + this.nearZeroToZero(this.v[4]) + ' ' + this.nearZeroToZero(this.v[7]) + ' \\n' +\n            this.nearZeroToZero(this.v[2]) + ' ' + this.nearZeroToZero(this.v[5]) + ' ' + this.nearZeroToZero(this.v[8]) + '\\n';\n    }\n    getScale() {\n        return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](Math.sqrt(this.v[0] * this.v[0] + this.v[3] * this.v[3] + this.v[6] * this.v[6]), Math.sqrt(this.v[1] * this.v[1] + this.v[4] * this.v[4] + this.v[7] * this.v[7]), Math.sqrt(this.v[2] * this.v[2] + this.v[5] * this.v[5] + this.v[8] * this.v[8]));\n    }\n    isEqual(mat, delta = Number.EPSILON) {\n        if (Math.abs(mat.v[0] - this.v[0]) < delta &&\n            Math.abs(mat.v[1] - this.v[1]) < delta &&\n            Math.abs(mat.v[2] - this.v[2]) < delta &&\n            Math.abs(mat.v[3] - this.v[3]) < delta &&\n            Math.abs(mat.v[4] - this.v[4]) < delta &&\n            Math.abs(mat.v[5] - this.v[5]) < delta &&\n            Math.abs(mat.v[6] - this.v[6]) < delta &&\n            Math.abs(mat.v[7] - this.v[7]) < delta &&\n            Math.abs(mat.v[8] - this.v[8]) < delta) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/Matrix33.ts?");

/***/ }),

/***/ "./src/foundation/math/Matrix44.ts":
/*!*****************************************!*\
  !*** ./src/foundation/math/Matrix44.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Matrix44; });\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _Quaternion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n/* harmony import */ var _Vector4__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n//import GLBoost from '../../globals';\n\n\n\n\nconst FloatArray = Float32Array;\nclass Matrix44 {\n    constructor(m0, m1, m2, m3, m4, m5, m6, m7, m8, m9, m10, m11, m12, m13, m14, m15, isColumnMajor = false, notCopyFloatArray = false) {\n        const _isColumnMajor = (arguments.length >= 16) ? isColumnMajor : m1;\n        const _notCopyFloatArray = (arguments.length >= 16) ? notCopyFloatArray : m2;\n        const m = m0;\n        if (m == null) {\n            this.v = new FloatArray(0);\n            return;\n        }\n        if (arguments.length >= 16 && arguments[3] != null) {\n            this.v = new FloatArray(16); // Data order is column major\n            let m = arguments;\n            if (_isColumnMajor === true) {\n                this.v[0] = m[0];\n                this.v[4] = m[4];\n                this.v[8] = m[8];\n                this.v[12] = m[12];\n                this.v[1] = m[1];\n                this.v[5] = m[5];\n                this.v[9] = m[9];\n                this.v[13] = m[13];\n                this.v[2] = m[2];\n                this.v[6] = m[6];\n                this.v[10] = m[10];\n                this.v[14] = m[14];\n                this.v[3] = m[3];\n                this.v[7] = m[7];\n                this.v[11] = m[11];\n                this.v[15] = m[15];\n            }\n            else {\n                // arguments[0-15] must be row major values if isColumnMajor is false\n                this.v[0] = m[0];\n                this.v[4] = m[1];\n                this.v[8] = m[2];\n                this.v[12] = m[3];\n                this.v[1] = m[4];\n                this.v[5] = m[5];\n                this.v[9] = m[6];\n                this.v[13] = m[7];\n                this.v[2] = m[8];\n                this.v[6] = m[9];\n                this.v[10] = m[10];\n                this.v[14] = m[11];\n                this.v[3] = m[12];\n                this.v[7] = m[13];\n                this.v[11] = m[14];\n                this.v[15] = m[15];\n            }\n        }\n        else if (Array.isArray(m)) {\n            this.v = new FloatArray(16);\n            if (_isColumnMajor === true) {\n                this.v[0] = m[0];\n                this.v[4] = m[4];\n                this.v[8] = m[8];\n                this.v[12] = m[12];\n                this.v[1] = m[1];\n                this.v[5] = m[5];\n                this.v[9] = m[9];\n                this.v[13] = m[13];\n                this.v[2] = m[2];\n                this.v[6] = m[6];\n                this.v[10] = m[10];\n                this.v[14] = m[14];\n                this.v[3] = m[3];\n                this.v[7] = m[7];\n                this.v[11] = m[11];\n                this.v[15] = m[15];\n            }\n            else {\n                // 'm' must be row major values if isColumnMajor is false\n                this.v[0] = m[0];\n                this.v[4] = m[1];\n                this.v[8] = m[2];\n                this.v[12] = m[3];\n                this.v[1] = m[4];\n                this.v[5] = m[5];\n                this.v[9] = m[6];\n                this.v[13] = m[7];\n                this.v[2] = m[8];\n                this.v[6] = m[9];\n                this.v[10] = m[10];\n                this.v[14] = m[11];\n                this.v[3] = m[12];\n                this.v[7] = m[13];\n                this.v[11] = m[14];\n                this.v[15] = m[15];\n            }\n        }\n        else if (m instanceof FloatArray) {\n            if (_notCopyFloatArray) {\n                this.v = m;\n            }\n            else {\n                this.v = new FloatArray(16);\n                if (_isColumnMajor === true) {\n                    this.v[0] = m[0];\n                    this.v[4] = m[4];\n                    this.v[8] = m[8];\n                    this.v[12] = m[12];\n                    this.v[1] = m[1];\n                    this.v[5] = m[5];\n                    this.v[9] = m[9];\n                    this.v[13] = m[13];\n                    this.v[2] = m[2];\n                    this.v[6] = m[6];\n                    this.v[10] = m[10];\n                    this.v[14] = m[14];\n                    this.v[3] = m[3];\n                    this.v[7] = m[7];\n                    this.v[11] = m[11];\n                    this.v[15] = m[15];\n                }\n                else {\n                    // 'm' must be row major values if isColumnMajor is false\n                    this.v[0] = m[0];\n                    this.v[4] = m[1];\n                    this.v[8] = m[2];\n                    this.v[12] = m[3];\n                    this.v[1] = m[4];\n                    this.v[5] = m[5];\n                    this.v[9] = m[6];\n                    this.v[13] = m[7];\n                    this.v[2] = m[8];\n                    this.v[6] = m[9];\n                    this.v[10] = m[10];\n                    this.v[14] = m[11];\n                    this.v[3] = m[12];\n                    this.v[7] = m[13];\n                    this.v[11] = m[14];\n                    this.v[15] = m[15];\n                }\n            }\n        }\n        else if (!!m && typeof m.v[15] !== 'undefined' && typeof m.v[10] !== 'undefined') {\n            if (_notCopyFloatArray) {\n                this.v = m.v;\n            }\n            else {\n                this.v = new FloatArray(16);\n                const v = m.v;\n                if (_isColumnMajor === true) {\n                    this.v[0] = v[0];\n                    this.v[4] = v[4];\n                    this.v[8] = v[8];\n                    this.v[12] = v[12];\n                    this.v[1] = v[1];\n                    this.v[5] = v[5];\n                    this.v[9] = v[9];\n                    this.v[13] = v[13];\n                    this.v[2] = v[2];\n                    this.v[6] = v[6];\n                    this.v[10] = v[10];\n                    this.v[14] = v[14];\n                    this.v[3] = v[3];\n                    this.v[7] = v[7];\n                    this.v[11] = v[11];\n                    this.v[15] = v[15];\n                }\n                else {\n                    // 'm' must be row major values if isColumnMajor is false\n                    this.v[0] = v[0];\n                    this.v[4] = v[1];\n                    this.v[8] = v[2];\n                    this.v[12] = v[3];\n                    this.v[1] = v[4];\n                    this.v[5] = v[5];\n                    this.v[9] = v[6];\n                    this.v[13] = v[7];\n                    this.v[2] = v[8];\n                    this.v[6] = v[9];\n                    this.v[10] = v[10];\n                    this.v[14] = v[11];\n                    this.v[3] = v[12];\n                    this.v[7] = v[13];\n                    this.v[11] = v[14];\n                    this.v[15] = v[15];\n                }\n            }\n        }\n        else if (!!m && typeof m.v[15] === 'undefined' && typeof m.v[10] !== 'undefined') {\n            if (_notCopyFloatArray) {\n                this.v = m.v;\n            }\n            else {\n                this.v = new FloatArray(16);\n                const v = m.v;\n                if (_isColumnMajor === true) {\n                    this.v[0] = v[0];\n                    this.v[4] = v[3];\n                    this.v[8] = v[6];\n                    this.v[12] = 0;\n                    this.v[1] = v[1];\n                    this.v[5] = v[4];\n                    this.v[9] = v[7];\n                    this.v[13] = 0;\n                    this.v[2] = v[2];\n                    this.v[6] = v[5];\n                    this.v[10] = v[8];\n                    this.v[14] = 0;\n                    this.v[3] = 0;\n                    this.v[7] = 0;\n                    this.v[11] = 0;\n                    this.v[15] = 1;\n                }\n                else {\n                    // 'm' must be row major values if isColumnMajor is false\n                    this.v[0] = v[0];\n                    this.v[4] = v[1];\n                    this.v[8] = v[2];\n                    this.v[12] = 0;\n                    this.v[1] = v[3];\n                    this.v[5] = v[4];\n                    this.v[9] = v[5];\n                    this.v[13] = 0;\n                    this.v[2] = v[6];\n                    this.v[6] = v[7];\n                    this.v[10] = v[8];\n                    this.v[14] = 0;\n                    this.v[3] = 0;\n                    this.v[7] = 0;\n                    this.v[11] = 0;\n                    this.v[15] = 1;\n                }\n            }\n        }\n        else if (!!m && typeof m.className !== 'undefined' && m instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n            this.v = new FloatArray(16);\n            const sx = m.x * m.x;\n            const sy = m.y * m.y;\n            const sz = m.z * m.z;\n            const cx = m.y * m.z;\n            const cy = m.x * m.z;\n            const cz = m.x * m.y;\n            const wx = m.w * m.x;\n            const wy = m.w * m.y;\n            const wz = m.w * m.z;\n            this.v[0] = 1.0 - 2.0 * (sy + sz);\n            this.v[4] = 2.0 * (cz - wz);\n            this.v[8] = 2.0 * (cy + wy);\n            this.v[12] = 0;\n            this.v[1] = 2.0 * (cz + wz);\n            this.v[5] = 1.0 - 2.0 * (sx + sz);\n            this.v[9] = 2.0 * (cx - wx);\n            this.v[13] = 0;\n            this.v[2] = 2.0 * (cy - wy);\n            this.v[6] = 2.0 * (cx + wx);\n            this.v[10] = 1.0 - 2.0 * (sx + sy);\n            this.v[14] = 0;\n            this.v[3] = 0;\n            this.v[7] = 0;\n            this.v[11] = 0;\n            this.v[15] = 1;\n        }\n        else {\n            this.v = new FloatArray(16);\n            this.v[0] = 1;\n            this.v[4] = 0;\n            this.v[8] = 0;\n            this.v[12] = 0;\n            this.v[1] = 0;\n            this.v[5] = 1;\n            this.v[9] = 0;\n            this.v[13] = 0;\n            this.v[2] = 0;\n            this.v[6] = 0;\n            this.v[10] = 1;\n            this.v[14] = 0;\n            this.v[3] = 0;\n            this.v[7] = 0;\n            this.v[11] = 0;\n            this.v[15] = 1;\n        }\n    }\n    static dummy() {\n        return new Matrix44(null);\n    }\n    static get compositionType() {\n        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Mat4;\n    }\n    isDummy() {\n        if (this.v.length === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    get className() {\n        return this.constructor.name;\n    }\n    clone() {\n        return new Matrix44(this.v[0], this.v[4], this.v[8], this.v[12], this.v[1], this.v[5], this.v[9], this.v[13], this.v[2], this.v[6], this.v[10], this.v[14], this.v[3], this.v[7], this.v[11], this.v[15]);\n    }\n    static fromQuaternionTo(m, outMat) {\n        const sx = m.x * m.x;\n        const sy = m.y * m.y;\n        const sz = m.z * m.z;\n        const cx = m.y * m.z;\n        const cy = m.x * m.z;\n        const cz = m.x * m.y;\n        const wx = m.w * m.x;\n        const wy = m.w * m.y;\n        const wz = m.w * m.z;\n        outMat.m00 = 1.0 - 2.0 * (sy + sz);\n        outMat.m01 = 2.0 * (cz - wz);\n        outMat.m02 = 2.0 * (cy + wy);\n        outMat.m03 = 0;\n        outMat.m10 = 2.0 * (cz + wz);\n        outMat.m11 = 1.0 - 2.0 * (sx + sz);\n        outMat.m12 = 2.0 * (cx - wx);\n        outMat.m13 = 0;\n        outMat.m20 = 2.0 * (cy - wy);\n        outMat.m21 = 2.0 * (cx + wx);\n        outMat.m22 = 1.0 - 2.0 * (sx + sy);\n        outMat.m23 = 0;\n        outMat.m30 = 0;\n        outMat.m31 = 0;\n        outMat.m32 = 0;\n        outMat.m33 = 1;\n    }\n    /**\n     * to the identity matrixstatic\n     */\n    static identity() {\n        return new Matrix44(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n    isEqual(mat, delta = Number.EPSILON) {\n        if (Math.abs(mat.v[0] - this.v[0]) < delta &&\n            Math.abs(mat.v[1] - this.v[1]) < delta &&\n            Math.abs(mat.v[2] - this.v[2]) < delta &&\n            Math.abs(mat.v[3] - this.v[3]) < delta &&\n            Math.abs(mat.v[4] - this.v[4]) < delta &&\n            Math.abs(mat.v[5] - this.v[5]) < delta &&\n            Math.abs(mat.v[6] - this.v[6]) < delta &&\n            Math.abs(mat.v[7] - this.v[7]) < delta &&\n            Math.abs(mat.v[8] - this.v[8]) < delta &&\n            Math.abs(mat.v[9] - this.v[9]) < delta &&\n            Math.abs(mat.v[10] - this.v[10]) < delta &&\n            Math.abs(mat.v[11] - this.v[11]) < delta &&\n            Math.abs(mat.v[12] - this.v[12]) < delta &&\n            Math.abs(mat.v[13] - this.v[13]) < delta &&\n            Math.abs(mat.v[14] - this.v[14]) < delta &&\n            Math.abs(mat.v[15] - this.v[15]) < delta) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    getTranslate() {\n        return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.m03, this.m13, this.m23);\n    }\n    static translate(vec) {\n        return new Matrix44(1, 0, 0, vec.x, 0, 1, 0, vec.y, 0, 0, 1, vec.z, 0, 0, 0, 1);\n    }\n    static scale(vec) {\n        return new Matrix44(vec.x, 0, 0, 0, 0, vec.y, 0, 0, 0, 0, vec.z, 0, 0, 0, 0, 1);\n    }\n    /**\n     * Create X oriented Rotation Matrix\n    */\n    static rotateX(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new Matrix44(1, 0, 0, 0, 0, cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1);\n    }\n    /**\n     * Create Y oriented Rotation Matrix\n     */\n    static rotateY(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new Matrix44(cos, 0, sin, 0, 0, 1, 0, 0, -sin, 0, cos, 0, 0, 0, 0, 1);\n    }\n    /**\n     * Create Z oriented Rotation Matrix\n     */\n    static rotateZ(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new Matrix44(cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n    /**\n     * @return Euler Angles Rotation (x, y, z)\n     */\n    toEulerAngles() {\n        let rotate = null;\n        if (Math.abs(this.v[2]) != 1.0) {\n            let y = -Math.asin(this.v[2]);\n            let x = Math.atan2(this.v[6] / Math.cos(y), this.v[10] / Math.cos(y));\n            let z = Math.atan2(this.v[1] / Math.cos(y), this.v[0] / Math.cos(y));\n            rotate = new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](x, y, z);\n        }\n        else if (this.v[2] === -1.0) {\n            rotate = new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](Math.atan2(this.v[4], this.v[8]), Math.PI / 2.0, 0.0);\n        }\n        else {\n            rotate = new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](Math.atan2(-this.v[4], -this.v[8]), -Math.PI / 2.0, 0.0);\n        }\n        return rotate;\n    }\n    toEulerAnglesTo(outVec3) {\n        if (Math.abs(this.v[2]) != 1.0) {\n            let y = -Math.asin(this.v[2]);\n            let x = Math.atan2(this.v[6] / Math.cos(y), this.v[10] / Math.cos(y));\n            let z = Math.atan2(this.v[1] / Math.cos(y), this.v[0] / Math.cos(y));\n            outVec3.x = x;\n            outVec3.y = y;\n            outVec3.z = z;\n        }\n        else if (this.v[2] === -1.0) {\n            outVec3.x = Math.atan2(this.v[4], this.v[8]);\n            outVec3.y = Math.PI / 2.0;\n            outVec3.z = 0.0;\n        }\n        else {\n            outVec3.x = Math.atan2(-this.v[4], -this.v[8]);\n            outVec3.y = -Math.PI / 2.0;\n            outVec3.z = 0.0;\n        }\n    }\n    static zero() {\n        return new Matrix44(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n    flattenAsArray() {\n        return [this.v[0], this.v[1], this.v[2], this.v[3],\n            this.v[4], this.v[5], this.v[6], this.v[7],\n            this.v[8], this.v[9], this.v[10], this.v[11],\n            this.v[12], this.v[13], this.v[14], this.v[15]];\n    }\n    /**\n     * transpose(static version)\n     */\n    static transpose(mat) {\n        var mat_t = new Matrix44(mat.m00, mat.m10, mat.m20, mat.m30, mat.m01, mat.m11, mat.m21, mat.m31, mat.m02, mat.m12, mat.m22, mat.m32, mat.m03, mat.m13, mat.m23, mat.m33);\n        return mat_t;\n    }\n    multiplyVector(vec) {\n        var x = this.v[0] * vec.x + this.v[4] * vec.y + this.v[8] * vec.z + this.m03 * vec.w;\n        var y = this.v[1] * vec.x + this.v[5] * vec.y + this.v[9] * vec.z + this.m13 * vec.w;\n        var z = this.v[2] * vec.x + this.v[6] * vec.y + this.v[10] * vec.z + this.m23 * vec.w;\n        var w = this.v[3] * vec.x + this.v[7] * vec.y + this.v[11] * vec.z + this.m33 * vec.w;\n        return new _Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"](x, y, z, w);\n    }\n    multiplyVectorTo(vec, outVec) {\n        const x = this.v[0] * vec.x + this.v[4] * vec.y + this.v[8] * vec.z + this.m03 * vec.w;\n        const y = this.v[1] * vec.x + this.v[5] * vec.y + this.v[9] * vec.z + this.m13 * vec.w;\n        const z = this.v[2] * vec.x + this.v[6] * vec.y + this.v[10] * vec.z + this.m23 * vec.w;\n        const w = this.v[3] * vec.x + this.v[7] * vec.y + this.v[11] * vec.z + this.m33 * vec.w;\n        outVec.x = x;\n        outVec.y = y;\n        outVec.z = z;\n        outVec.w = w;\n    }\n    multiplyVectorToVec3(vec, outVec) {\n        const x = this.v[0] * vec.x + this.v[4] * vec.y + this.v[8] * vec.z + this.m03 * vec.w;\n        const y = this.v[1] * vec.x + this.v[5] * vec.y + this.v[9] * vec.z + this.m13 * vec.w;\n        const z = this.v[2] * vec.x + this.v[6] * vec.y + this.v[10] * vec.z + this.m23 * vec.w;\n        outVec.x = x;\n        outVec.y = y;\n        outVec.z = z;\n    }\n    multiplyVector3(vec) {\n        var x = this.v[0] * vec.x + this.v[4] * vec.y + this.v[8] * vec.z + this.m03 * vec.w;\n        var y = this.v[1] * vec.x + this.v[5] * vec.y + this.v[9] * vec.z + this.m13 * vec.w;\n        var z = this.v[2] * vec.x + this.v[6] * vec.y + this.v[10] * vec.z + this.m23 * vec.w;\n        return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](x, y, z);\n    }\n    multiplyVector3To(vec, outVec) {\n        outVec.x = this.v[0] * vec.x + this.v[4] * vec.y + this.v[8] * vec.z + this.m03 * vec.w;\n        outVec.y = this.v[1] * vec.x + this.v[5] * vec.y + this.v[9] * vec.z + this.m13 * vec.w;\n        outVec.z = this.v[2] * vec.x + this.v[6] * vec.y + this.v[10] * vec.z + this.m23 * vec.w;\n    }\n    /**\n     * multiply zero matrix and zero matrix(static version)\n     */\n    static multiply(l_m, r_m) {\n        var m00 = l_m.v[0] * r_m.v[0] + l_m.v[4] * r_m.v[1] + l_m.v[8] * r_m.v[2] + l_m.v[12] * r_m.v[3];\n        var m10 = l_m.v[1] * r_m.v[0] + l_m.v[5] * r_m.v[1] + l_m.v[9] * r_m.v[2] + l_m.v[13] * r_m.v[3];\n        var m20 = l_m.v[2] * r_m.v[0] + l_m.v[6] * r_m.v[1] + l_m.v[10] * r_m.v[2] + l_m.v[14] * r_m.v[3];\n        var m30 = l_m.v[3] * r_m.v[0] + l_m.v[7] * r_m.v[1] + l_m.v[11] * r_m.v[2] + l_m.v[15] * r_m.v[3];\n        var m01 = l_m.v[0] * r_m.v[4] + l_m.v[4] * r_m.v[5] + l_m.v[8] * r_m.v[6] + l_m.v[12] * r_m.v[7];\n        var m11 = l_m.v[1] * r_m.v[4] + l_m.v[5] * r_m.v[5] + l_m.v[9] * r_m.v[6] + l_m.v[13] * r_m.v[7];\n        var m21 = l_m.v[2] * r_m.v[4] + l_m.v[6] * r_m.v[5] + l_m.v[10] * r_m.v[6] + l_m.v[14] * r_m.v[7];\n        var m31 = l_m.v[3] * r_m.v[4] + l_m.v[7] * r_m.v[5] + l_m.v[11] * r_m.v[6] + l_m.v[15] * r_m.v[7];\n        var m02 = l_m.v[0] * r_m.v[8] + l_m.v[4] * r_m.v[9] + l_m.v[8] * r_m.v[10] + l_m.v[12] * r_m.v[11];\n        var m12 = l_m.v[1] * r_m.v[8] + l_m.v[5] * r_m.v[9] + l_m.v[9] * r_m.v[10] + l_m.v[13] * r_m.v[11];\n        var m22 = l_m.v[2] * r_m.v[8] + l_m.v[6] * r_m.v[9] + l_m.v[10] * r_m.v[10] + l_m.v[14] * r_m.v[11];\n        var m32 = l_m.v[3] * r_m.v[8] + l_m.v[7] * r_m.v[9] + l_m.v[11] * r_m.v[10] + l_m.v[15] * r_m.v[11];\n        var m03 = l_m.v[0] * r_m.v[12] + l_m.v[4] * r_m.v[13] + l_m.v[8] * r_m.v[14] + l_m.v[12] * r_m.v[15];\n        var m13 = l_m.v[1] * r_m.v[12] + l_m.v[5] * r_m.v[13] + l_m.v[9] * r_m.v[14] + l_m.v[13] * r_m.v[15];\n        var m23 = l_m.v[2] * r_m.v[12] + l_m.v[6] * r_m.v[13] + l_m.v[10] * r_m.v[14] + l_m.v[14] * r_m.v[15];\n        var m33 = l_m.v[3] * r_m.v[12] + l_m.v[7] * r_m.v[13] + l_m.v[11] * r_m.v[14] + l_m.v[15] * r_m.v[15];\n        return new Matrix44(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    }\n    static multiplyTo(l_m, r_m, out) {\n        out.m00 = l_m.v[0] * r_m.v[0] + l_m.v[4] * r_m.v[1] + l_m.v[8] * r_m.v[2] + l_m.v[12] * r_m.v[3];\n        out.m10 = l_m.v[1] * r_m.v[0] + l_m.v[5] * r_m.v[1] + l_m.v[9] * r_m.v[2] + l_m.v[13] * r_m.v[3];\n        out.m20 = l_m.v[2] * r_m.v[0] + l_m.v[6] * r_m.v[1] + l_m.v[10] * r_m.v[2] + l_m.v[14] * r_m.v[3];\n        out.m30 = l_m.v[3] * r_m.v[0] + l_m.v[7] * r_m.v[1] + l_m.v[11] * r_m.v[2] + l_m.v[15] * r_m.v[3];\n        out.m01 = l_m.v[0] * r_m.v[4] + l_m.v[4] * r_m.v[5] + l_m.v[8] * r_m.v[6] + l_m.v[12] * r_m.v[7];\n        out.m11 = l_m.v[1] * r_m.v[4] + l_m.v[5] * r_m.v[5] + l_m.v[9] * r_m.v[6] + l_m.v[13] * r_m.v[7];\n        out.m21 = l_m.v[2] * r_m.v[4] + l_m.v[6] * r_m.v[5] + l_m.v[10] * r_m.v[6] + l_m.v[14] * r_m.v[7];\n        out.m31 = l_m.v[3] * r_m.v[4] + l_m.v[7] * r_m.v[5] + l_m.v[11] * r_m.v[6] + l_m.v[15] * r_m.v[7];\n        out.m02 = l_m.v[0] * r_m.v[8] + l_m.v[4] * r_m.v[9] + l_m.v[8] * r_m.v[10] + l_m.v[12] * r_m.v[11];\n        out.m12 = l_m.v[1] * r_m.v[8] + l_m.v[5] * r_m.v[9] + l_m.v[9] * r_m.v[10] + l_m.v[13] * r_m.v[11];\n        out.m22 = l_m.v[2] * r_m.v[8] + l_m.v[6] * r_m.v[9] + l_m.v[10] * r_m.v[10] + l_m.v[14] * r_m.v[11];\n        out.m32 = l_m.v[3] * r_m.v[8] + l_m.v[7] * r_m.v[9] + l_m.v[11] * r_m.v[10] + l_m.v[15] * r_m.v[11];\n        out.m03 = l_m.v[0] * r_m.v[12] + l_m.v[4] * r_m.v[13] + l_m.v[8] * r_m.v[14] + l_m.v[12] * r_m.v[15];\n        out.m13 = l_m.v[1] * r_m.v[12] + l_m.v[5] * r_m.v[13] + l_m.v[9] * r_m.v[14] + l_m.v[13] * r_m.v[15];\n        out.m23 = l_m.v[2] * r_m.v[12] + l_m.v[6] * r_m.v[13] + l_m.v[10] * r_m.v[14] + l_m.v[14] * r_m.v[15];\n        out.m33 = l_m.v[3] * r_m.v[12] + l_m.v[7] * r_m.v[13] + l_m.v[11] * r_m.v[14] + l_m.v[15] * r_m.v[15];\n    }\n    determinant() {\n        return this.v[0] * this.v[5] * this.v[10] * this.m33 + this.v[0] * this.v[9] * this.m23 * this.v[7] + this.v[0] * this.m13 * this.v[6] * this.v[11] +\n            this.v[4] * this.v[1] * this.m23 * this.v[11] + this.v[4] * this.v[9] * this.v[2] * this.m33 + this.v[4] * this.m13 * this.v[10] * this.v[3] +\n            this.v[8] * this.v[1] * this.v[6] * this.m33 + this.v[8] * this.v[5] * this.m23 * this.v[3] + this.v[8] * this.m13 * this.v[2] * this.v[7] +\n            this.m03 * this.v[1] * this.v[10] * this.v[7] + this.m03 * this.v[5] * this.v[2] * this.v[11] + this.m03 * this.v[9] * this.v[6] * this.v[3] -\n            this.v[0] * this.v[5] * this.m23 * this.v[11] - this.v[0] * this.v[9] * this.v[6] * this.m33 - this.v[0] * this.m13 * this.v[10] * this.v[7] -\n            this.v[4] * this.v[1] * this.v[10] * this.m33 - this.v[4] * this.v[9] * this.m23 * this.v[3] - this.v[4] * this.m13 * this.v[2] * this.v[11] -\n            this.v[8] * this.v[1] * this.m23 * this.v[7] - this.v[8] * this.v[5] * this.v[2] * this.m33 - this.v[8] * this.m13 * this.v[6] * this.v[3] -\n            this.m03 * this.v[1] * this.v[6] * this.v[11] - this.m03 * this.v[5] * this.v[10] * this.v[3] - this.m03 * this.v[9] * this.v[2] * this.v[7];\n    }\n    static determinant(m) {\n        let n00 = m.v[0] * m.v[5] - m.v[4] * m.v[1];\n        let n01 = m.v[0] * m.v[9] - m.v[8] * m.v[1];\n        let n02 = m.v[0] * m.v[13] - m.v[12] * m.v[1];\n        let n03 = m.v[4] * m.v[9] - m.v[8] * m.v[5];\n        let n04 = m.v[4] * m.v[13] - m.v[12] * m.v[5];\n        let n05 = m.v[8] * m.v[13] - m.v[12] * m.v[9];\n        let n06 = m.v[2] * m.v[7] - m.v[6] * m.v[3];\n        let n07 = m.v[2] * m.v[11] - m.v[10] * m.v[3];\n        let n08 = m.v[2] * m.v[15] - m.v[14] * m.v[3];\n        let n09 = m.v[6] * m.v[11] - m.v[10] * m.v[7];\n        let n10 = m.v[6] * m.v[15] - m.v[14] * m.v[7];\n        let n11 = m.v[10] * m.v[15] - m.v[14] * m.v[11];\n        let det = n00 * n11 - n01 * n10 + n02 * n09 + n03 * n08 - n04 * n07 + n05 * n06;\n        return det;\n    }\n    static invert(m) {\n        let n00 = m.v[0] * m.v[5] - m.v[4] * m.v[1];\n        let n01 = m.v[0] * m.v[9] - m.v[8] * m.v[1];\n        let n02 = m.v[0] * m.v[13] - m.v[12] * m.v[1];\n        let n03 = m.v[4] * m.v[9] - m.v[8] * m.v[5];\n        let n04 = m.v[4] * m.v[13] - m.v[12] * m.v[5];\n        let n05 = m.v[8] * m.v[13] - m.v[12] * m.v[9];\n        let n06 = m.v[2] * m.v[7] - m.v[6] * m.v[3];\n        let n07 = m.v[2] * m.v[11] - m.v[10] * m.v[3];\n        let n08 = m.v[2] * m.v[15] - m.v[14] * m.v[3];\n        let n09 = m.v[6] * m.v[11] - m.v[10] * m.v[7];\n        let n10 = m.v[6] * m.v[15] - m.v[14] * m.v[7];\n        let n11 = m.v[10] * m.v[15] - m.v[14] * m.v[11];\n        let det = n00 * n11 - n01 * n10 + n02 * n09 + n03 * n08 - n04 * n07 + n05 * n06;\n        det = 1.0 / det;\n        const out0 = (m.v[5] * n11 - m.v[9] * n10 + m.v[13] * n09) * det;\n        const out1 = (m.v[8] * n10 - m.v[4] * n11 - m.v[12] * n09) * det;\n        const out2 = (m.v[7] * n05 - m.v[11] * n04 + m.v[15] * n03) * det;\n        const out3 = (m.v[10] * n04 - m.v[6] * n05 - m.v[14] * n03) * det;\n        const out4 = (m.v[9] * n08 - m.v[1] * n11 - m.v[13] * n07) * det;\n        const out5 = (m.v[0] * n11 - m.v[8] * n08 + m.v[12] * n07) * det;\n        const out6 = (m.v[11] * n02 - m.v[3] * n05 - m.v[15] * n01) * det;\n        const out7 = (m.v[2] * n05 - m.v[10] * n02 + m.v[14] * n01) * det;\n        const out8 = (m.v[1] * n10 - m.v[5] * n08 + m.v[13] * n06) * det;\n        const out9 = (m.v[4] * n08 - m.v[0] * n10 - m.v[12] * n06) * det;\n        const out10 = (m.v[3] * n04 - m.v[7] * n02 + m.v[15] * n00) * det;\n        const out11 = (m.v[6] * n02 - m.v[2] * n04 - m.v[14] * n00) * det;\n        const out12 = (m.v[5] * n07 - m.v[1] * n09 - m.v[9] * n06) * det;\n        const out13 = (m.v[0] * n09 - m.v[4] * n07 + m.v[8] * n06) * det;\n        const out14 = (m.v[7] * n01 - m.v[3] * n03 - m.v[11] * n00) * det;\n        const out15 = (m.v[2] * n03 - m.v[6] * n01 + m.v[10] * n00) * det;\n        return new Matrix44(out0, out1, out2, out3, out4, out5, out6, out7, out8, out9, out10, out11, out12, out13, out14, out15);\n    }\n    static invertTo(m, outM) {\n        let n00 = m.v[0] * m.v[5] - m.v[4] * m.v[1];\n        let n01 = m.v[0] * m.v[9] - m.v[8] * m.v[1];\n        let n02 = m.v[0] * m.v[13] - m.v[12] * m.v[1];\n        let n03 = m.v[4] * m.v[9] - m.v[8] * m.v[5];\n        let n04 = m.v[4] * m.v[13] - m.v[12] * m.v[5];\n        let n05 = m.v[8] * m.v[13] - m.v[12] * m.v[9];\n        let n06 = m.v[2] * m.v[7] - m.v[6] * m.v[3];\n        let n07 = m.v[2] * m.v[11] - m.v[10] * m.v[3];\n        let n08 = m.v[2] * m.v[15] - m.v[14] * m.v[3];\n        let n09 = m.v[6] * m.v[11] - m.v[10] * m.v[7];\n        let n10 = m.v[6] * m.v[15] - m.v[14] * m.v[7];\n        let n11 = m.v[10] * m.v[15] - m.v[14] * m.v[11];\n        let det = n00 * n11 - n01 * n10 + n02 * n09 + n03 * n08 - n04 * n07 + n05 * n06;\n        det = 1.0 / det;\n        outM.v[0] = (m.v[5] * n11 - m.v[9] * n10 + m.v[13] * n09) * det;\n        outM.v[4] = (m.v[8] * n10 - m.v[4] * n11 - m.v[12] * n09) * det;\n        outM.v[8] = (m.v[7] * n05 - m.v[11] * n04 + m.v[15] * n03) * det;\n        outM.v[12] = (m.v[10] * n04 - m.v[6] * n05 - m.v[14] * n03) * det;\n        outM.v[1] = (m.v[9] * n08 - m.v[1] * n11 - m.v[13] * n07) * det;\n        outM.v[5] = (m.v[0] * n11 - m.v[8] * n08 + m.v[12] * n07) * det;\n        outM.v[9] = (m.v[11] * n02 - m.v[3] * n05 - m.v[15] * n01) * det;\n        outM.v[13] = (m.v[2] * n05 - m.v[10] * n02 + m.v[14] * n01) * det;\n        outM.v[2] = (m.v[1] * n10 - m.v[5] * n08 + m.v[13] * n06) * det;\n        outM.v[6] = (m.v[4] * n08 - m.v[0] * n10 - m.v[12] * n06) * det;\n        outM.v[10] = (m.v[3] * n04 - m.v[7] * n02 + m.v[15] * n00) * det;\n        outM.v[14] = (m.v[6] * n02 - m.v[2] * n04 - m.v[14] * n00) * det;\n        outM.v[3] = (m.v[5] * n07 - m.v[1] * n09 - m.v[9] * n06) * det;\n        outM.v[7] = (m.v[0] * n09 - m.v[4] * n07 + m.v[8] * n06) * det;\n        outM.v[11] = (m.v[7] * n01 - m.v[3] * n03 - m.v[11] * n00) * det;\n        outM.v[15] = (m.v[2] * n03 - m.v[6] * n01 + m.v[10] * n00) * det;\n    }\n    get m00() {\n        return this.v[0];\n    }\n    get m10() {\n        return this.v[1];\n    }\n    get m20() {\n        return this.v[2];\n    }\n    get m30() {\n        return this.v[3];\n    }\n    get m01() {\n        return this.v[4];\n    }\n    get m11() {\n        return this.v[5];\n    }\n    get m21() {\n        return this.v[6];\n    }\n    get m31() {\n        return this.v[7];\n    }\n    get m02() {\n        return this.v[8];\n    }\n    get m12() {\n        return this.v[9];\n    }\n    get m22() {\n        return this.v[10];\n    }\n    get m32() {\n        return this.v[11];\n    }\n    get m03() {\n        return this.v[12];\n    }\n    get m13() {\n        return this.v[13];\n    }\n    get m23() {\n        return this.v[14];\n    }\n    get m33() {\n        return this.v[15];\n    }\n    toString() {\n        return this.v[0] + ' ' + this.v[4] + ' ' + this.v[8] + ' ' + this.m03 + ' \\n' +\n            this.v[1] + ' ' + this.v[5] + ' ' + this.v[9] + ' ' + this.m13 + ' \\n' +\n            this.v[2] + ' ' + this.v[6] + ' ' + this.v[10] + ' ' + this.m23 + ' \\n' +\n            this.v[3] + ' ' + this.v[7] + ' ' + this.v[11] + ' ' + this.m33 + ' \\n';\n    }\n    nearZeroToZero(value) {\n        if (Math.abs(value) < 0.00001) {\n            value = 0;\n        }\n        else if (0.99999 < value && value < 1.00001) {\n            value = 1;\n        }\n        else if (-1.00001 < value && value < -0.99999) {\n            value = -1;\n        }\n        return value;\n    }\n    toStringApproximately() {\n        return this.nearZeroToZero(this.v[0]) + ' ' + this.nearZeroToZero(this.v[4]) + ' ' + this.nearZeroToZero(this.v[8]) + ' ' + this.nearZeroToZero(this.m03) + ' \\n' +\n            this.nearZeroToZero(this.v[1]) + ' ' + this.nearZeroToZero(this.v[5]) + ' ' + this.nearZeroToZero(this.v[9]) + ' ' + this.nearZeroToZero(this.m13) + ' \\n' +\n            this.nearZeroToZero(this.v[2]) + ' ' + this.nearZeroToZero(this.v[6]) + ' ' + this.nearZeroToZero(this.v[10]) + ' ' + this.nearZeroToZero(this.m23) + ' \\n' +\n            this.nearZeroToZero(this.v[3]) + ' ' + this.nearZeroToZero(this.v[7]) + ' ' + this.nearZeroToZero(this.v[11]) + ' ' + this.nearZeroToZero(this.m33) + ' \\n';\n    }\n    getScale() {\n        return new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](Math.sqrt(this.v[0] * this.v[0] + this.v[4] * this.v[4] + this.v[8] * this.v[8]), Math.sqrt(this.v[1] * this.v[1] + this.v[5] * this.v[5] + this.v[9] * this.v[9]), Math.sqrt(this.v[2] * this.v[2] + this.v[6] * this.v[6] + this.v[10] * this.v[10]));\n    }\n    getRotate() {\n        const quat = _Quaternion__WEBPACK_IMPORTED_MODULE_1__[\"default\"].fromMatrix(this);\n        const rotateMat = new Matrix44(quat);\n        return rotateMat;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/Matrix44.ts?");

/***/ }),

/***/ "./src/foundation/math/MutableMatrix22.ts":
/*!************************************************!*\
  !*** ./src/foundation/math/MutableMatrix22.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MutableMatrix22; });\n/* harmony import */ var _Matrix22__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Matrix22 */ \"./src/foundation/math/Matrix22.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n\n\nclass MutableMatrix22 extends _Matrix22__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(m0, m1, m2, m3, isColumnMajor = false, notCopyFloatArray = false) {\n        super(m0, m1, m2, m3, isColumnMajor);\n    }\n    setComponents(m00, m01, m10, m11) {\n        this.v[0] = m00;\n        this.v[3] = m01;\n        this.v[1] = m10;\n        this.v[4] = m11;\n        return this;\n    }\n    copyComponents(mat) {\n        const m = mat;\n        this.m00 = m.m00;\n        this.m01 = m.m01;\n        this.m10 = m.m10;\n        this.m11 = m.m11;\n    }\n    static get compositionType() {\n        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Mat2;\n    }\n    static dummy() {\n        return new MutableMatrix22(null);\n    }\n    identity() {\n        this.setComponents(1, 0, 0, 1);\n        return this;\n    }\n    /**\n     * Create Rotation Matrix\n     */\n    rotate(radian) {\n        const cos = Math.cos(radian);\n        const sin = Math.sin(radian);\n        return this.setComponents(cos, -sin, sin, cos);\n    }\n    /**\n   * Create Rotation Matrix\n   */\n    static rotate(radian) {\n        const cos = Math.cos(radian);\n        const sin = Math.sin(radian);\n        return new MutableMatrix22(cos, -sin, sin, cos);\n    }\n    scale(vec) {\n        return this.setComponents(vec.x, 0, 0, vec.y);\n    }\n    /**\n     * zero matrix\n     */\n    zero() {\n        this.setComponents(0, 0, 0, 0);\n        return this;\n    }\n    raw() {\n        return this.v;\n    }\n    flattenAsArray() {\n        return [this.v[0], this.v[1],\n            this.v[2], this.v[3]];\n    }\n    _swap(l, r) {\n        this.v[r] = [this.v[l], this.v[l] = this.v[r]][0]; // Swap\n    }\n    /**\n     * transpose\n     */\n    transpose() {\n        this._swap(1, 2);\n        return this;\n    }\n    /**\n     * multiply zero matrix and zero matrix\n     */\n    multiply(mat) {\n        const m00 = this.m00 * mat.m00 + this.m01 * mat.m10;\n        const m01 = this.m00 * mat.m01 + this.m01 * mat.m11;\n        const m10 = this.m10 * mat.m00 + this.m11 * mat.m10;\n        const m11 = this.m10 * mat.m01 + this.m11 * mat.m11;\n        return this.setComponents(m00, m01, m10, m11);\n    }\n    invert() {\n        const det = this.determinant();\n        const m00 = this.m11 / det;\n        const m01 = this.m01 / det * (-1.0);\n        const m10 = this.m10 / det * (-1.0);\n        const m11 = this.m00 / det;\n        return this.setComponents(m00, m01, m10, m11);\n    }\n    addScale(vec) {\n        this.m00 *= vec.x;\n        this.m11 *= vec.y;\n        return this;\n    }\n    set m00(val) {\n        this.v[0] = val;\n    }\n    get m00() {\n        return this.v[0];\n    }\n    set m10(val) {\n        this.v[1] = val;\n    }\n    get m10() {\n        return this.v[1];\n    }\n    set m01(val) {\n        this.v[2] = val;\n    }\n    get m01() {\n        return this.v[2];\n    }\n    set m11(val) {\n        this.v[3] = val;\n    }\n    get m11() {\n        return this.v[3];\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/MutableMatrix22.ts?");

/***/ }),

/***/ "./src/foundation/math/MutableMatrix33.ts":
/*!************************************************!*\
  !*** ./src/foundation/math/MutableMatrix33.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MutableMatrix33; });\n/* harmony import */ var _Matrix33__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Matrix33 */ \"./src/foundation/math/Matrix33.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n\n\nclass MutableMatrix33 extends _Matrix33__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(m0, m1, m2, m3, m4, m5, m6, m7, m8, isColumnMajor = false, notCopyFloatArray = false) {\n        super(m0, m1, m2, m3, m4, m5, m6, m7, m8, isColumnMajor);\n    }\n    setComponents(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n        this.v[0] = m00;\n        this.v[3] = m01;\n        this.v[6] = m02;\n        this.v[1] = m10;\n        this.v[4] = m11;\n        this.v[7] = m12;\n        this.v[2] = m20;\n        this.v[5] = m21;\n        this.v[8] = m22;\n        return this;\n    }\n    copyComponents(mat) {\n        const m = mat;\n        this.m00 = m.m00;\n        this.m01 = m.m01;\n        this.m02 = m.m02;\n        this.m10 = m.m10;\n        this.m11 = m.m11;\n        this.m12 = m.m12;\n        this.m20 = m.m20;\n        this.m21 = m.m21;\n        this.m22 = m.m22;\n    }\n    static get compositionType() {\n        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Mat3;\n    }\n    static dummy() {\n        return new MutableMatrix33(null);\n    }\n    identity() {\n        this.setComponents(1, 0, 0, 0, 1, 0, 0, 0, 1);\n        return this;\n    }\n    /**\n     * Create X oriented Rotation Matrix\n     */\n    rotateX(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return this.setComponents(1, 0, 0, 0, cos, -sin, 0, sin, cos);\n    }\n    /**\n     * Create Y oriented Rotation Matrix\n     */\n    rotateY(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        this.setComponents(cos, 0, sin, 0, 1, 0, -sin, 0, cos);\n        return this;\n    }\n    /**\n     * Create Z oriented Rotation Matrix\n     */\n    rotateZ(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return this.setComponents(cos, -sin, 0, sin, cos, 0, 0, 0, 1);\n    }\n    /**\n   * Create X oriented Rotation Matrix\n   */\n    static rotateX(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new MutableMatrix33(1, 0, 0, 0, cos, -sin, 0, sin, cos);\n    }\n    /**\n     * Create Y oriented Rotation Matrix\n     */\n    static rotateY(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new MutableMatrix33(cos, 0, sin, 0, 1, 0, -sin, 0, cos);\n    }\n    /**\n     * Create Z oriented Rotation Matrix\n     */\n    static rotateZ(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return new MutableMatrix33(cos, -sin, 0, sin, cos, 0, 0, 0, 1);\n    }\n    scale(vec) {\n        return this.setComponents(vec.x, 0, 0, 0, vec.y, 0, 0, 0, vec.z);\n    }\n    static rotateXYZ(x, y, z) {\n        return (MutableMatrix33.rotateZ(z).multiply(MutableMatrix33.rotateY(y).multiply(MutableMatrix33.rotateX(x))));\n    }\n    static rotate(vec3) {\n        return (MutableMatrix33.rotateZ(vec3.z).multiply(MutableMatrix33.rotateY(vec3.y).multiply(MutableMatrix33.rotateX(vec3.x))));\n    }\n    /**\n     * zero matrix\n     */\n    zero() {\n        this.setComponents(0, 0, 0, 0, 0, 0, 0, 0, 0);\n        return this;\n    }\n    raw() {\n        return this.v;\n    }\n    flattenAsArray() {\n        return [this.v[0], this.v[1], this.v[2],\n            this.v[3], this.v[4], this.v[5],\n            this.v[6], this.v[7], this.v[8]];\n    }\n    _swap(l, r) {\n        this.v[r] = [this.v[l], this.v[l] = this.v[r]][0]; // Swap\n    }\n    /**\n     * transpose\n     */\n    transpose() {\n        this._swap(1, 3);\n        this._swap(2, 6);\n        this._swap(5, 8);\n        return this;\n    }\n    /**\n     * multiply zero matrix and zero matrix\n     */\n    multiply(mat) {\n        var m00 = this.m00 * mat.m00 + this.m01 * mat.m10 + this.m02 * mat.m20;\n        var m01 = this.m00 * mat.m01 + this.m01 * mat.m11 + this.m02 * mat.m21;\n        var m02 = this.m00 * mat.m02 + this.m01 * mat.m12 + this.m02 * mat.m22;\n        var m10 = this.m10 * mat.m00 + this.m11 * mat.m10 + this.m12 * mat.m20;\n        var m11 = this.m10 * mat.m01 + this.m11 * mat.m11 + this.m12 * mat.m21;\n        var m12 = this.m10 * mat.m02 + this.m11 * mat.m12 + this.m12 * mat.m22;\n        var m20 = this.m20 * mat.m00 + this.m21 * mat.m10 + this.m22 * mat.m20;\n        var m21 = this.m20 * mat.m01 + this.m21 * mat.m11 + this.m22 * mat.m21;\n        var m22 = this.m20 * mat.m02 + this.m21 * mat.m12 + this.m22 * mat.m22;\n        return this.setComponents(m00, m01, m02, m10, m11, m12, m20, m21, m22);\n    }\n    invert() {\n        var det = this.determinant();\n        var m00 = (this.m11 * this.m22 - this.m12 * this.m21) / det;\n        var m01 = (this.m02 * this.m21 - this.m01 * this.m22) / det;\n        var m02 = (this.m01 * this.m12 - this.m02 * this.m11) / det;\n        var m10 = (this.m12 * this.m20 - this.m10 * this.m22) / det;\n        var m11 = (this.m00 * this.m22 - this.m02 * this.m20) / det;\n        var m12 = (this.m02 * this.m10 - this.m00 * this.m12) / det;\n        var m20 = (this.m10 * this.m21 - this.m11 * this.m20) / det;\n        var m21 = (this.m01 * this.m20 - this.m00 * this.m21) / det;\n        var m22 = (this.m00 * this.m11 - this.m01 * this.m10) / det;\n        return this.setComponents(m00, m01, m02, m10, m11, m12, m20, m21, m22);\n    }\n    addScale(vec) {\n        this.m00 *= vec.x;\n        this.m11 *= vec.y;\n        this.m22 *= vec.z;\n        return this;\n    }\n    set m00(val) {\n        this.v[0] = val;\n    }\n    get m00() {\n        return this.v[0];\n    }\n    set m10(val) {\n        this.v[1] = val;\n    }\n    get m10() {\n        return this.v[1];\n    }\n    set m20(val) {\n        this.v[2] = val;\n    }\n    get m20() {\n        return this.v[2];\n    }\n    set m01(val) {\n        this.v[3] = val;\n    }\n    get m01() {\n        return this.v[3];\n    }\n    set m11(val) {\n        this.v[4] = val;\n    }\n    get m11() {\n        return this.v[4];\n    }\n    set m21(val) {\n        this.v[5] = val;\n    }\n    get m21() {\n        return this.v[5];\n    }\n    set m02(val) {\n        this.v[6] = val;\n    }\n    get m02() {\n        return this.v[6];\n    }\n    set m12(val) {\n        this.v[7] = val;\n    }\n    get m12() {\n        return this.v[7];\n    }\n    set m22(val) {\n        this.v[8] = val;\n    }\n    get m22() {\n        return this.v[8];\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/MutableMatrix33.ts?");

/***/ }),

/***/ "./src/foundation/math/MutableMatrix44.ts":
/*!************************************************!*\
  !*** ./src/foundation/math/MutableMatrix44.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MutableMatrix44; });\n/* harmony import */ var _Matrix44__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n\n\nconst FloatArray = Float32Array;\nclass MutableMatrix44 extends _Matrix44__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(m0, m1, m2, m3, m4, m5, m6, m7, m8, m9, m10, m11, m12, m13, m14, m15, isColumnMajor = false, notCopyFloatArray = false) {\n        const _isColumnMajor = (arguments.length >= 16) ? isColumnMajor : m1;\n        const _notCopyFloatArray = (arguments.length >= 16) ? notCopyFloatArray : m2;\n        if (arguments.length >= 16) {\n            super(m0, m1, m2, m3, m4, m5, m6, m7, m8, m9, m10, m11, m12, m13, m14, m15, _isColumnMajor, _notCopyFloatArray);\n        }\n        else {\n            super(m0, _isColumnMajor, _notCopyFloatArray);\n        }\n    }\n    setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n        this.v[0] = m00;\n        this.v[4] = m01;\n        this.v[8] = m02;\n        this.v[12] = m03;\n        this.v[1] = m10;\n        this.v[5] = m11;\n        this.v[9] = m12;\n        this.v[13] = m13;\n        this.v[2] = m20;\n        this.v[6] = m21;\n        this.v[10] = m22;\n        this.v[14] = m23;\n        this.v[3] = m30;\n        this.v[7] = m31;\n        this.v[11] = m32;\n        this.v[15] = m33;\n        return this;\n    }\n    copyComponents(mat4) {\n        //this.setComponents.apply(this, mat4.m); // 'm' must be row major array if isColumnMajor is false\n        const m = mat4.v;\n        this.v[0] = m[0];\n        this.v[1] = m[1];\n        this.v[2] = m[2];\n        this.v[3] = m[3];\n        this.v[4] = m[4];\n        this.v[5] = m[5];\n        this.v[6] = m[6];\n        this.v[7] = m[7];\n        this.v[8] = m[8];\n        this.v[9] = m[9];\n        this.v[10] = m[10];\n        this.v[11] = m[11];\n        this.v[12] = m[12];\n        this.v[13] = m[13];\n        this.v[14] = m[14];\n        this.v[15] = m[15];\n    }\n    static get compositionType() {\n        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Mat4;\n    }\n    static dummy() {\n        return new MutableMatrix44(null);\n    }\n    /**\n     * to the identity matrixstatic\n     */\n    static identity() {\n        return new MutableMatrix44(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n    translate(vec) {\n        return this.setComponents(1, 0, 0, vec.x, 0, 1, 0, vec.y, 0, 0, 1, vec.z, 0, 0, 0, 1);\n    }\n    putTranslate(vec) {\n        this.m03 = vec.x;\n        this.m13 = vec.y;\n        this.m23 = vec.z;\n    }\n    scale(vec) {\n        return this.setComponents(vec.x, 0, 0, 0, 0, vec.y, 0, 0, 0, 0, vec.z, 0, 0, 0, 0, 1);\n    }\n    addScale(vec) {\n        this.m00 *= vec.x;\n        this.m11 *= vec.y;\n        this.m22 *= vec.z;\n        return this;\n    }\n    /**\n     * Create X oriented Rotation Matrix\n     */\n    rotateX(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return this.setComponents(1, 0, 0, 0, 0, cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1);\n    }\n    /**\n     * Create Y oriented Rotation Matrix\n     */\n    rotateY(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return this.setComponents(cos, 0, sin, 0, 0, 1, 0, 0, -sin, 0, cos, 0, 0, 0, 0, 1);\n    }\n    /**\n   * Create Z oriented Rotation Matrix\n   */\n    rotateZ(radian) {\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        return this.setComponents(cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n    rotateXYZ(x, y, z) {\n        var cosX = Math.cos(x);\n        var sinX = Math.sin(x);\n        var cosY = Math.cos(y);\n        var sinY = Math.sin(y);\n        var cosZ = Math.cos(z);\n        var sinZ = Math.sin(z);\n        const xm00 = 1;\n        //const xm01 = 0;\n        //const xm02 = 0;\n        //const xm10 = 0;\n        const xm11 = cosX;\n        const xm12 = -sinX;\n        //const xm20 = 0;\n        const xm21 = sinX;\n        const xm22 = cosX;\n        const ym00 = cosY;\n        //const ym01 = 0;\n        const ym02 = sinY;\n        //const ym10 = 0;\n        const ym11 = 1;\n        //const ym12 = 0;\n        const ym20 = -sinY;\n        //const ym21 = 0;\n        const ym22 = cosY;\n        const zm00 = cosZ;\n        const zm01 = -sinZ;\n        //const zm02 = 0;\n        const zm10 = sinZ;\n        const zm11 = cosZ;\n        //const zm12 = 0;\n        //const zm20 = 0;\n        //const zm21 = 0;\n        const zm22 = 1;\n        const yxm00 = ym00 * xm00;\n        const yxm01 = ym02 * xm21;\n        const yxm02 = ym02 * xm22;\n        //const yxm10 = 0;\n        const yxm11 = ym11 * xm11;\n        const yxm12 = ym11 * xm12;\n        const yxm20 = ym20 * xm00;\n        const yxm21 = ym22 * xm21;\n        const yxm22 = ym22 * xm22;\n        this.v[0] = zm00 * yxm00;\n        this.v[4] = zm00 * yxm01 + zm01 * yxm11;\n        this.v[8] = zm00 * yxm02 + zm01 * yxm12;\n        this.v[12] = 0;\n        this.v[1] = zm10 * yxm00;\n        this.v[5] = zm10 * yxm01 + zm11 * yxm11;\n        this.v[9] = zm10 * yxm02 + zm11 * yxm12;\n        this.v[13] = 0;\n        this.v[2] = zm22 * yxm20;\n        this.v[6] = zm22 * yxm21;\n        this.v[10] = zm22 * yxm22;\n        this.v[14] = 0;\n        this.v[3] = 0;\n        this.v[7] = 0;\n        this.v[11] = 0;\n        this.v[15] = 1;\n        return this;\n    }\n    /**\n     * to the identity matrix\n     */\n    identity() {\n        this.setComponents(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n        return this;\n    }\n    _swap(l, r) {\n        this.v[r] = [this.v[l], this.v[l] = this.v[r]][0]; // Swap\n    }\n    /**\n     * transpose\n     */\n    transpose() {\n        this._swap(1, 4);\n        this._swap(2, 8);\n        this._swap(3, 12);\n        this._swap(6, 9);\n        this._swap(7, 13);\n        this._swap(11, 14);\n        return this;\n    }\n    /**\n   * multiply zero matrix and zero matrix\n   */\n    multiply(mat) {\n        var m00 = this.m00 * mat.m00 + this.m01 * mat.m10 + this.m02 * mat.m20 + this.m03 * mat.m30;\n        var m01 = this.m00 * mat.m01 + this.m01 * mat.m11 + this.m02 * mat.m21 + this.m03 * mat.m31;\n        var m02 = this.m00 * mat.m02 + this.m01 * mat.m12 + this.m02 * mat.m22 + this.m03 * mat.m32;\n        var m03 = this.m00 * mat.m03 + this.m01 * mat.m13 + this.m02 * mat.m23 + this.m03 * mat.m33;\n        var m10 = this.m10 * mat.m00 + this.m11 * mat.m10 + this.m12 * mat.m20 + this.m13 * mat.m30;\n        var m11 = this.m10 * mat.m01 + this.m11 * mat.m11 + this.m12 * mat.m21 + this.m13 * mat.m31;\n        var m12 = this.m10 * mat.m02 + this.m11 * mat.m12 + this.m12 * mat.m22 + this.m13 * mat.m32;\n        var m13 = this.m10 * mat.m03 + this.m11 * mat.m13 + this.m12 * mat.m23 + this.m13 * mat.m33;\n        var m20 = this.m20 * mat.m00 + this.m21 * mat.m10 + this.m22 * mat.m20 + this.m23 * mat.m30;\n        var m21 = this.m20 * mat.m01 + this.m21 * mat.m11 + this.m22 * mat.m21 + this.m23 * mat.m31;\n        var m22 = this.m20 * mat.m02 + this.m21 * mat.m12 + this.m22 * mat.m22 + this.m23 * mat.m32;\n        var m23 = this.m20 * mat.m03 + this.m21 * mat.m13 + this.m22 * mat.m23 + this.m23 * mat.m33;\n        var m30 = this.m30 * mat.m00 + this.m31 * mat.m10 + this.m32 * mat.m20 + this.m33 * mat.m30;\n        var m31 = this.m30 * mat.m01 + this.m31 * mat.m11 + this.m32 * mat.m21 + this.m33 * mat.m31;\n        var m32 = this.m30 * mat.m02 + this.m31 * mat.m12 + this.m32 * mat.m22 + this.m33 * mat.m32;\n        var m33 = this.m30 * mat.m03 + this.m31 * mat.m13 + this.m32 * mat.m23 + this.m33 * mat.m33;\n        return this.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    }\n    multiplyByLeft(mat) {\n        var m00 = mat.m00 * this.m00 + mat.m01 * this.m10 + mat.m02 * this.m20 + mat.m03 * this.m30;\n        var m01 = mat.m00 * this.m01 + mat.m01 * this.m11 + mat.m02 * this.m21 + mat.m03 * this.m31;\n        var m02 = mat.m00 * this.m02 + mat.m01 * this.m12 + mat.m02 * this.m22 + mat.m03 * this.m32;\n        var m03 = mat.m00 * this.m03 + mat.m01 * this.m13 + mat.m02 * this.m23 + mat.m03 * this.m33;\n        var m10 = mat.m10 * this.m00 + mat.m11 * this.m10 + mat.m12 * this.m20 + mat.m13 * this.m30;\n        var m11 = mat.m10 * this.m01 + mat.m11 * this.m11 + mat.m12 * this.m21 + mat.m13 * this.m31;\n        var m12 = mat.m10 * this.m02 + mat.m11 * this.m12 + mat.m12 * this.m22 + mat.m13 * this.m32;\n        var m13 = mat.m10 * this.m03 + mat.m11 * this.m13 + mat.m12 * this.m23 + mat.m13 * this.m33;\n        var m20 = mat.m20 * this.m00 + mat.m21 * this.m10 + mat.m22 * this.m20 + mat.m23 * this.m30;\n        var m21 = mat.m20 * this.m01 + mat.m21 * this.m11 + mat.m22 * this.m21 + mat.m23 * this.m31;\n        var m22 = mat.m20 * this.m02 + mat.m21 * this.m12 + mat.m22 * this.m22 + mat.m23 * this.m32;\n        var m23 = mat.m20 * this.m03 + mat.m21 * this.m13 + mat.m22 * this.m23 + mat.m23 * this.m33;\n        var m30 = mat.m30 * this.m00 + mat.m31 * this.m10 + mat.m32 * this.m20 + mat.m33 * this.m30;\n        var m31 = mat.m30 * this.m01 + mat.m31 * this.m11 + mat.m32 * this.m21 + mat.m33 * this.m31;\n        var m32 = mat.m30 * this.m02 + mat.m31 * this.m12 + mat.m32 * this.m22 + mat.m33 * this.m32;\n        var m33 = mat.m30 * this.m03 + mat.m31 * this.m13 + mat.m32 * this.m23 + mat.m33 * this.m33;\n        return this.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    }\n    invert() {\n        var det = this.determinant();\n        var m00 = (this.m11 * this.m22 * this.m33 + this.m12 * this.m23 * this.m31 + this.m13 * this.m21 * this.m32 - this.m11 * this.m23 * this.m32 - this.m12 * this.m21 * this.m33 - this.m13 * this.m22 * this.m31) / det;\n        var m01 = (this.m01 * this.m23 * this.m32 + this.m02 * this.m21 * this.m33 + this.m03 * this.m22 * this.m31 - this.m01 * this.m22 * this.m33 - this.m02 * this.m23 * this.m31 - this.m03 * this.m21 * this.m32) / det;\n        var m02 = (this.m01 * this.m12 * this.m33 + this.m02 * this.m13 * this.m31 + this.m03 * this.m11 * this.m32 - this.m01 * this.m13 * this.m32 - this.m02 * this.m11 * this.m33 - this.m03 * this.m12 * this.m31) / det;\n        var m03 = (this.m01 * this.m13 * this.m22 + this.m02 * this.m11 * this.m23 + this.m03 * this.m12 * this.m21 - this.m01 * this.m12 * this.m23 - this.m02 * this.m13 * this.m21 - this.m03 * this.m11 * this.m22) / det;\n        var m10 = (this.m10 * this.m23 * this.m32 + this.m12 * this.m20 * this.m33 + this.m13 * this.m22 * this.m30 - this.m10 * this.m22 * this.m33 - this.m12 * this.m23 * this.m30 - this.m13 * this.m20 * this.m32) / det;\n        var m11 = (this.m00 * this.m22 * this.m33 + this.m02 * this.m23 * this.m30 + this.m03 * this.m20 * this.m32 - this.m00 * this.m23 * this.m32 - this.m02 * this.m20 * this.m33 - this.m03 * this.m22 * this.m30) / det;\n        var m12 = (this.m00 * this.m13 * this.m32 + this.m02 * this.m10 * this.m33 + this.m03 * this.m12 * this.m30 - this.m00 * this.m12 * this.m33 - this.m02 * this.m13 * this.m30 - this.m03 * this.m10 * this.m32) / det;\n        var m13 = (this.m00 * this.m12 * this.m23 + this.m02 * this.m13 * this.m20 + this.m03 * this.m10 * this.m22 - this.m00 * this.m13 * this.m22 - this.m02 * this.m10 * this.m23 - this.m03 * this.m12 * this.m20) / det;\n        var m20 = (this.m10 * this.m21 * this.m33 + this.m11 * this.m23 * this.m30 + this.m13 * this.m20 * this.m31 - this.m10 * this.m23 * this.m31 - this.m11 * this.m20 * this.m33 - this.m13 * this.m21 * this.m30) / det;\n        var m21 = (this.m00 * this.m23 * this.m31 + this.m01 * this.m20 * this.m33 + this.m03 * this.m21 * this.m30 - this.m00 * this.m21 * this.m33 - this.m01 * this.m23 * this.m30 - this.m03 * this.m20 * this.m31) / det;\n        var m22 = (this.m00 * this.m11 * this.m33 + this.m01 * this.m13 * this.m30 + this.m03 * this.m10 * this.m31 - this.m00 * this.m13 * this.m31 - this.m01 * this.m10 * this.m33 - this.m03 * this.m11 * this.m30) / det;\n        var m23 = (this.m00 * this.m13 * this.m21 + this.m01 * this.m10 * this.m23 + this.m03 * this.m11 * this.m20 - this.m00 * this.m11 * this.m23 - this.m01 * this.m13 * this.m20 - this.m03 * this.m10 * this.m21) / det;\n        var m30 = (this.m10 * this.m22 * this.m31 + this.m11 * this.m20 * this.m32 + this.m12 * this.m21 * this.m30 - this.m10 * this.m21 * this.m32 - this.m11 * this.m22 * this.m30 - this.m12 * this.m20 * this.m31) / det;\n        var m31 = (this.m00 * this.m21 * this.m32 + this.m01 * this.m22 * this.m30 + this.m02 * this.m20 * this.m31 - this.m00 * this.m22 * this.m31 - this.m01 * this.m20 * this.m32 - this.m02 * this.m21 * this.m30) / det;\n        var m32 = (this.m00 * this.m12 * this.m31 + this.m01 * this.m10 * this.m32 + this.m02 * this.m11 * this.m30 - this.m00 * this.m11 * this.m32 - this.m01 * this.m12 * this.m30 - this.m02 * this.m10 * this.m31) / det;\n        var m33 = (this.m00 * this.m11 * this.m22 + this.m01 * this.m12 * this.m20 + this.m02 * this.m10 * this.m21 - this.m00 * this.m12 * this.m21 - this.m01 * this.m10 * this.m22 - this.m02 * this.m11 * this.m20) / det;\n        return this.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    }\n    /**\n     * multiply zero matrix and zero matrix(static version)\n     */\n    static multiply(l_m, r_m) {\n        var m00 = l_m.m00 * r_m.m00 + l_m.m01 * r_m.m10 + l_m.m02 * r_m.m20 + l_m.m03 * r_m.m30;\n        var m10 = l_m.m10 * r_m.m00 + l_m.m11 * r_m.m10 + l_m.m12 * r_m.m20 + l_m.m13 * r_m.m30;\n        var m20 = l_m.m20 * r_m.m00 + l_m.m21 * r_m.m10 + l_m.m22 * r_m.m20 + l_m.m23 * r_m.m30;\n        var m30 = l_m.m30 * r_m.m00 + l_m.m31 * r_m.m10 + l_m.m32 * r_m.m20 + l_m.m33 * r_m.m30;\n        var m01 = l_m.m00 * r_m.m01 + l_m.m01 * r_m.m11 + l_m.m02 * r_m.m21 + l_m.m03 * r_m.m31;\n        var m11 = l_m.m10 * r_m.m01 + l_m.m11 * r_m.m11 + l_m.m12 * r_m.m21 + l_m.m13 * r_m.m31;\n        var m21 = l_m.m20 * r_m.m01 + l_m.m21 * r_m.m11 + l_m.m22 * r_m.m21 + l_m.m23 * r_m.m31;\n        var m31 = l_m.m30 * r_m.m01 + l_m.m31 * r_m.m11 + l_m.m32 * r_m.m21 + l_m.m33 * r_m.m31;\n        var m02 = l_m.m00 * r_m.m02 + l_m.m01 * r_m.m12 + l_m.m02 * r_m.m22 + l_m.m03 * r_m.m32;\n        var m12 = l_m.m10 * r_m.m02 + l_m.m11 * r_m.m12 + l_m.m12 * r_m.m22 + l_m.m13 * r_m.m32;\n        var m22 = l_m.m20 * r_m.m02 + l_m.m21 * r_m.m12 + l_m.m22 * r_m.m22 + l_m.m23 * r_m.m32;\n        var m32 = l_m.m30 * r_m.m02 + l_m.m31 * r_m.m12 + l_m.m32 * r_m.m22 + l_m.m33 * r_m.m32;\n        var m03 = l_m.m00 * r_m.m03 + l_m.m01 * r_m.m13 + l_m.m02 * r_m.m23 + l_m.m03 * r_m.m33;\n        var m13 = l_m.m10 * r_m.m03 + l_m.m11 * r_m.m13 + l_m.m12 * r_m.m23 + l_m.m13 * r_m.m33;\n        var m23 = l_m.m20 * r_m.m03 + l_m.m21 * r_m.m13 + l_m.m22 * r_m.m23 + l_m.m23 * r_m.m33;\n        var m33 = l_m.m30 * r_m.m03 + l_m.m31 * r_m.m13 + l_m.m32 * r_m.m23 + l_m.m33 * r_m.m33;\n        return new MutableMatrix44(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n    }\n    /**\n     * zero matrix\n     */\n    zero() {\n        this.setComponents(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n        return this;\n    }\n    static zero() {\n        return new MutableMatrix44(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n    set m00(val) {\n        this.v[0] = val;\n    }\n    get m00() {\n        return this.v[0];\n    }\n    set m10(val) {\n        this.v[1] = val;\n    }\n    get m10() {\n        return this.v[1];\n    }\n    set m20(val) {\n        this.v[2] = val;\n    }\n    get m20() {\n        return this.v[2];\n    }\n    set m30(val) {\n        this.v[3] = val;\n    }\n    get m30() {\n        return this.v[3];\n    }\n    set m01(val) {\n        this.v[4] = val;\n    }\n    get m01() {\n        return this.v[4];\n    }\n    set m11(val) {\n        this.v[5] = val;\n    }\n    get m11() {\n        return this.v[5];\n    }\n    set m21(val) {\n        this.v[6] = val;\n    }\n    get m21() {\n        return this.v[6];\n    }\n    set m31(val) {\n        this.v[7] = val;\n    }\n    get m31() {\n        return this.v[7];\n    }\n    set m02(val) {\n        this.v[8] = val;\n    }\n    get m02() {\n        return this.v[8];\n    }\n    set m12(val) {\n        this.v[9] = val;\n    }\n    get m12() {\n        return this.v[9];\n    }\n    set m22(val) {\n        this.v[10] = val;\n    }\n    get m22() {\n        return this.v[10];\n    }\n    set m32(val) {\n        this.v[11] = val;\n    }\n    get m32() {\n        return this.v[11];\n    }\n    set m03(val) {\n        this.v[12] = val;\n    }\n    get m03() {\n        return this.v[12];\n    }\n    set m13(val) {\n        this.v[13] = val;\n    }\n    get m13() {\n        return this.v[13];\n    }\n    set m23(val) {\n        this.v[14] = val;\n    }\n    get m23() {\n        return this.v[14];\n    }\n    set m33(val) {\n        this.v[15] = val;\n    }\n    get m33() {\n        return this.v[15];\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/MutableMatrix44.ts?");

/***/ }),

/***/ "./src/foundation/math/MutableQuaterion.ts":
/*!*************************************************!*\
  !*** ./src/foundation/math/MutableQuaterion.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MutableQuaternion; });\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _Quaternion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n\n\n\nclass MutableQuaternion extends _Quaternion__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor(x, y, z, w) {\n        super(x, y, z, w);\n    }\n    static dummy() {\n        return new MutableQuaternion(null);\n    }\n    clone() {\n        return new MutableQuaternion(this.x, this.y, this.z, this.w);\n    }\n    axisAngle(axisVec3, radian) {\n        var halfAngle = 0.5 * radian;\n        var sin = Math.sin(halfAngle);\n        var axis = _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(axisVec3);\n        this.w = Math.cos(halfAngle);\n        this.x = sin * axis.x;\n        this.y = sin * axis.y;\n        this.z = sin * axis.z;\n        return this;\n    }\n    add(q) {\n        this.x += q.x;\n        this.y += q.y;\n        this.z += q.z;\n        this.w += q.w;\n        return this;\n    }\n    multiply(q) {\n        let result = new _Quaternion__WEBPACK_IMPORTED_MODULE_1__[\"default\"](0, 0, 0, 1);\n        result.v[0] = q.w * this.x + q.z * this.y + q.y * this.z - q.x * this.w;\n        result.v[1] = -q.z * this.x + q.w * this.y + q.x * this.z - q.y * this.w;\n        result.v[2] = q.y * this.x + q.x * this.y + q.w * this.z - q.z * this.w;\n        result.v[3] = -q.x * this.x - q.y * this.y - q.z * this.z - q.w * this.w;\n        this.x = result.x;\n        this.y = result.y;\n        this.z = result.z;\n        this.w = result.w;\n        return this;\n    }\n    fromMatrix(m) {\n        let tr = m.m00 + m.m11 + m.m22;\n        if (tr > 0) {\n            let S = 0.5 / Math.sqrt(tr + 1.0);\n            this.v[0] = (m.m21 - m.m12) * S;\n            this.v[1] = (m.m02 - m.m20) * S;\n            this.v[2] = (m.m10 - m.m01) * S;\n            this.v[3] = 0.25 / S;\n        }\n        else if ((m.m00 > m.m11) && (m.m00 > m.m22)) {\n            let S = Math.sqrt(1.0 + m.m00 - m.m11 - m.m22) * 2;\n            this.v[0] = 0.25 * S;\n            this.v[1] = (m.m01 + m.m10) / S;\n            this.v[2] = (m.m02 + m.m20) / S;\n            this.v[3] = (m.m21 - m.m12) / S;\n        }\n        else if (m.m11 > m.m22) {\n            let S = Math.sqrt(1.0 + m.m11 - m.m00 - m.m22) * 2;\n            this.v[0] = (m.m01 + m.m10) / S;\n            this.v[1] = 0.25 * S;\n            this.v[2] = (m.m12 + m.m21) / S;\n            this.v[3] = (m.m02 - m.m20) / S;\n        }\n        else {\n            let S = Math.sqrt(1.0 + m.m22 - m.m00 - m.m11) * 2;\n            this.v[0] = (m.m02 + m.m20) / S;\n            this.v[1] = (m.m12 + m.m21) / S;\n            this.v[2] = 0.25 * S;\n            this.v[3] = (m.m10 - m.m01) / S;\n        }\n        return this;\n    }\n    static get compositionType() {\n        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__[\"CompositionType\"].Vec4;\n    }\n    setAt(i, val) {\n        switch (i % 4) {\n            case 0:\n                this.x = val;\n                break;\n            case 1:\n                this.y = val;\n                break;\n            case 2:\n                this.z = val;\n                break;\n            case 3:\n                this.w = val;\n                break;\n        }\n    }\n    normalize() {\n        let norm = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n        this.x /= norm;\n        this.y /= norm;\n        this.z /= norm;\n        this.w /= norm;\n        return this;\n    }\n    identity() {\n        this.x = 0;\n        this.y = 0;\n        this.x = 0;\n        this.w = 1;\n    }\n    static fromMatrix(m) {\n        let q = new MutableQuaternion(0, 0, 0, 1);\n        let tr = m.m00 + m.m11 + m.m22;\n        if (tr > 0) {\n            let S = 0.5 / Math.sqrt(tr + 1.0);\n            q.v[3] = 0.25 / S;\n            q.v[0] = (m.m21 - m.m12) * S;\n            q.v[1] = (m.m02 - m.m20) * S;\n            q.v[2] = (m.m10 - m.m01) * S;\n        }\n        else if ((m.m00 > m.m11) && (m.m00 > m.m22)) {\n            let S = Math.sqrt(1.0 + m.m00 - m.m11 - m.m22) * 2;\n            q.v[3] = (m.m21 - m.m12) / S;\n            q.v[0] = 0.25 * S;\n            q.v[1] = (m.m01 + m.m10) / S;\n            q.v[2] = (m.m02 + m.m20) / S;\n        }\n        else if (m.m11 > m.m22) {\n            let S = Math.sqrt(1.0 + m.m11 - m.m00 - m.m22) * 2;\n            q.v[3] = (m.m02 - m.m20) / S;\n            q.v[0] = (m.m01 + m.m10) / S;\n            q.v[1] = 0.25 * S;\n            q.v[2] = (m.m12 + m.m21) / S;\n        }\n        else {\n            let S = Math.sqrt(1.0 + m.m22 - m.m00 - m.m11) * 2;\n            q.v[3] = (m.m10 - m.m01) / S;\n            q.v[0] = (m.m02 + m.m20) / S;\n            q.v[1] = (m.m12 + m.m21) / S;\n            q.v[2] = 0.25 * S;\n        }\n        return q;\n    }\n    get x() {\n        return this.v[0];\n    }\n    set x(x) {\n        this.v[0] = x;\n    }\n    get y() {\n        return this.v[1];\n    }\n    set y(y) {\n        this.v[1] = y;\n    }\n    get z() {\n        return this.v[2];\n    }\n    set z(z) {\n        this.v[2] = z;\n    }\n    get w() {\n        return this.v[3];\n    }\n    set w(w) {\n        this.v[3] = w;\n    }\n    get raw() {\n        return this.v;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/MutableQuaterion.ts?");

/***/ }),

/***/ "./src/foundation/math/MutableScalar.ts":
/*!**********************************************!*\
  !*** ./src/foundation/math/MutableScalar.ts ***!
  \**********************************************/
/*! exports provided: MutableScalar_, default, MutableScalard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MutableScalar_\", function() { return MutableScalar_; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MutableScalar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MutableScalard\", function() { return MutableScalard; });\n/* harmony import */ var _Scalar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Scalar */ \"./src/foundation/math/Scalar.ts\");\n\nclass MutableScalar_ extends _Scalar__WEBPACK_IMPORTED_MODULE_0__[\"Scalar_\"] {\n    constructor(x, { type }) {\n        super(x, { type });\n    }\n    get x() {\n        return this.v[0];\n    }\n    set x(x) {\n        this.v[0] = x;\n    }\n    setValue(value) {\n        this.x = value;\n    }\n}\nclass MutableScalar extends MutableScalar_ {\n    constructor(x) {\n        super(x, { type: Float32Array });\n    }\n    clone() {\n        return new MutableScalar(this.x);\n    }\n    static one() {\n        return new MutableScalar(1);\n    }\n    static dummy() {\n        return new MutableScalar(null);\n    }\n    static zero() {\n        return new MutableScalar(0);\n    }\n}\nclass MutableScalard extends MutableScalar_ {\n    constructor(x) {\n        super(x, { type: Float64Array });\n    }\n    clone() {\n        return new MutableScalard(this.x);\n    }\n    static one() {\n        return new MutableScalard(1);\n    }\n    static dummy() {\n        return new MutableScalard(null);\n    }\n    static zero() {\n        return new MutableScalard(0);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/MutableScalar.ts?");

/***/ }),

/***/ "./src/foundation/math/MutableVector2.ts":
/*!***********************************************!*\
  !*** ./src/foundation/math/MutableVector2.ts ***!
  \***********************************************/
/*! exports provided: MutableVector2_, default, MutableVector2d */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MutableVector2_\", function() { return MutableVector2_; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MutableVector2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MutableVector2d\", function() { return MutableVector2d; });\n/* harmony import */ var _Vector2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector2 */ \"./src/foundation/math/Vector2.ts\");\n\nclass MutableVector2_ extends _Vector2__WEBPACK_IMPORTED_MODULE_0__[\"Vector2_\"] {\n    constructor(x, y, { type }) {\n        super(x, y, { type });\n    }\n    get x() {\n        return this.v[0];\n    }\n    get y() {\n        return this.v[1];\n    }\n    set x(x) {\n        this.v[0] = x;\n    }\n    set y(y) {\n        this.v[1] = y;\n    }\n    multiply(val) {\n        this.x *= val;\n        this.y *= val;\n        return this;\n    }\n}\nclass MutableVector2 extends MutableVector2_ {\n    constructor(x, y) {\n        super(x, y, { type: Float32Array });\n    }\n    clone() {\n        return new MutableVector2(this.x, this.y);\n    }\n    static one() {\n        return new MutableVector2(1, 1);\n    }\n    static dummy() {\n        return new MutableVector2(null, 0);\n    }\n    static zero() {\n        return new MutableVector2(0, 0);\n    }\n}\nclass MutableVector2d extends MutableVector2_ {\n    constructor(x, y) {\n        super(x, y, { type: Float64Array });\n    }\n    clone() {\n        return new MutableVector2d(this.x, this.y);\n    }\n    static one() {\n        return new MutableVector2d(1, 1);\n    }\n    static dummy() {\n        return new MutableVector2d(null, 0);\n    }\n    static zero() {\n        return new MutableVector2d(0, 0);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/MutableVector2.ts?");

/***/ }),

/***/ "./src/foundation/math/MutableVector3.ts":
/*!***********************************************!*\
  !*** ./src/foundation/math/MutableVector3.ts ***!
  \***********************************************/
/*! exports provided: MutableVector3_, default, MutableVector3d */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MutableVector3_\", function() { return MutableVector3_; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MutableVector3; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MutableVector3d\", function() { return MutableVector3d; });\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n\n\nclass MutableVector3_ extends _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"Vector3_\"] {\n    constructor(x, y, z, { type }) {\n        super(x, y, z, { type });\n    }\n    static get compositionType() {\n        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec3;\n    }\n    zero() {\n        this.x = 0;\n        this.y = 0;\n        this.z = 0;\n        return this;\n    }\n    one() {\n        this.x = 1;\n        this.y = 1;\n        this.z = 1;\n        return this;\n    }\n    /**\n     * to square length\n     */\n    lengthSquared() {\n        return this.x * this.x + this.y * this.y + this.z * this.z;\n    }\n    /**\n     * cross product\n     */\n    cross(v) {\n        var x = this.y * v.z - this.z * v.y;\n        var y = this.z * v.x - this.x * v.z;\n        var z = this.x * v.y - this.y * v.x;\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        return this;\n    }\n    /**\n   * normalize\n   */\n    normalize() {\n        var length = this.length();\n        this.divide(length);\n        return this;\n    }\n    /**\n   * add value\n   */\n    add(v) {\n        this.x += v.x;\n        this.y += v.y;\n        this.z += v.z;\n        return this;\n    }\n    /**\n   * subtract\n   */\n    subtract(v) {\n        this.x -= v.x;\n        this.y -= v.y;\n        this.z -= v.z;\n        return this;\n    }\n    /**\n     * divide\n     */\n    divide(val) {\n        if (val !== 0) {\n            this.x /= val;\n            this.y /= val;\n            this.z /= val;\n        }\n        else {\n            console.error(\"0 division occured!\");\n            this.x = Infinity;\n            this.y = Infinity;\n            this.z = Infinity;\n        }\n        return this;\n    }\n    /**\n     * multiply\n     */\n    multiply(val) {\n        this.x *= val;\n        this.y *= val;\n        this.z *= val;\n        return this;\n    }\n    /**\n     * multiply vector\n     */\n    multiplyVector(vec) {\n        this.x *= vec.x;\n        this.y *= vec.y;\n        this.z *= vec.z;\n        return this;\n    }\n    /**\n   * divide vector\n   */\n    divideVector(vec3) {\n        this.x /= vec3.x;\n        this.y /= vec3.y;\n        this.z /= vec3.z;\n        return this;\n    }\n    get x() {\n        return this.v[0];\n    }\n    set x(x) {\n        this.v[0] = x;\n    }\n    get y() {\n        return this.v[1];\n    }\n    set y(y) {\n        this.v[1] = y;\n    }\n    get z() {\n        return this.v[2];\n    }\n    set z(z) {\n        this.v[2] = z;\n    }\n    get raw() {\n        return this.v;\n    }\n}\nclass MutableVector3 extends MutableVector3_ {\n    constructor(x, y, z) {\n        super(x, y, z, { type: Float32Array });\n    }\n    clone() {\n        return new MutableVector3(this.x, this.y, this.z);\n    }\n    static one() {\n        return new MutableVector3(1, 1, 1);\n    }\n    static dummy() {\n        return new MutableVector3(null, 0, 0);\n    }\n    static zero() {\n        return new MutableVector3(0, 0, 0);\n    }\n}\nclass MutableVector3d extends MutableVector3_ {\n    constructor(x, y, z) {\n        super(x, y, z, { type: Float64Array });\n    }\n    clone() {\n        return new MutableVector3d(this.x, this.y, this.z);\n    }\n    static one() {\n        return new MutableVector3d(1, 1, 1);\n    }\n    static dummy() {\n        return new MutableVector3d(null, 0, 0);\n    }\n    static zero() {\n        return new MutableVector3d(0, 0, 0);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/MutableVector3.ts?");

/***/ }),

/***/ "./src/foundation/math/MutableVector4.ts":
/*!***********************************************!*\
  !*** ./src/foundation/math/MutableVector4.ts ***!
  \***********************************************/
/*! exports provided: MutableVector4_, default, MutableVector4d */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MutableVector4_\", function() { return MutableVector4_; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MutableVector4; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MutableVector4d\", function() { return MutableVector4d; });\n/* harmony import */ var _Vector4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n\n\nclass MutableVector4_ extends _Vector4__WEBPACK_IMPORTED_MODULE_0__[\"Vector4_\"] {\n    constructor(x, y, z, w, { type }) {\n        super(x, y, z, w, { type });\n    }\n    static get compositionType() {\n        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec4;\n    }\n    normalize() {\n        var length = this.length();\n        this.divide(length);\n        return this;\n    }\n    normalize3() {\n        var length = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n        this.x /= length;\n        this.y /= length;\n        this.z /= length;\n        this.w /= length;\n    }\n    /**\n     * add value\n     */\n    add(v) {\n        this.x += v.x;\n        this.y += v.y;\n        this.z += v.z;\n        this.w += v.w;\n        return this;\n    }\n    /**\n   * add value except w component\n   */\n    addWithOutW(v) {\n        this.x += v.x;\n        this.y += v.y;\n        this.z += v.z;\n        return this;\n    }\n    subtract(v) {\n        this.x -= v.x;\n        this.y -= v.y;\n        this.z -= v.z;\n        this.w -= v.w;\n        return this;\n    }\n    multiply(val) {\n        this.x *= val;\n        this.y *= val;\n        this.z *= val;\n        this.w *= val;\n        return this;\n    }\n    multiplyVector(vec) {\n        this.x *= vec.x;\n        this.y *= vec.y;\n        this.z *= vec.z;\n        this.w *= vec.w;\n        return this;\n    }\n    divide(val) {\n        if (val !== 0) {\n            this.x /= val;\n            this.y /= val;\n            this.z /= val;\n            this.w /= val;\n        }\n        else {\n            console.error(\"0 division occured!\");\n            this.x = Infinity;\n            this.y = Infinity;\n            this.z = Infinity;\n            this.w = Infinity;\n        }\n        return this;\n    }\n    divideVector(vec4) {\n        this.x /= vec4.x;\n        this.y /= vec4.y;\n        this.z /= vec4.z;\n        this.w /= vec4.w;\n        return this;\n    }\n    get x() {\n        return this.v[0];\n    }\n    get y() {\n        return this.v[1];\n    }\n    get z() {\n        return this.v[2];\n    }\n    get w() {\n        return this.v[3];\n    }\n    set x(x) {\n        this.v[0] = x;\n    }\n    set y(y) {\n        this.v[1] = y;\n    }\n    set z(z) {\n        this.v[2] = z;\n    }\n    set w(w) {\n        this.v[3] = w;\n    }\n    get raw() {\n        return this.v;\n    }\n    // set w(w:number) {\n    //   this.__Error();\n    // }\n    // get w(): number {\n    //   return this.v[3];\n    // }\n    // get raw(): TypedArray {\n    //   this.__Error();\n    //   return new Float32Array(0);\n    // }\n    __Error() {\n        //console.error('Not avavailabe because this Vector class is immutable.');\n        throw new Error('Not avavailabe because this Vector class is immutable.');\n    }\n}\nclass MutableVector4 extends MutableVector4_ {\n    constructor(x, y, z, w) {\n        super(x, y, z, w, { type: Float32Array });\n    }\n    clone() {\n        return new MutableVector4(this.x, this.y, this.z, this.w);\n    }\n    static one() {\n        return new MutableVector4(1, 1, 1, 1);\n    }\n    static dummy() {\n        return new MutableVector4(null, 0, 0, 0);\n    }\n    static zero() {\n        return new MutableVector4(0, 0, 0, 0);\n    }\n    static zeroWithWOne() {\n        return new MutableVector4(0, 0, 0, 1);\n    }\n}\nclass MutableVector4d extends MutableVector4_ {\n    constructor(x, y, z, w) {\n        super(x, y, z, w, { type: Float64Array });\n    }\n    clone() {\n        return new MutableVector4d(this.x, this.y, this.z, this.w);\n    }\n    static one() {\n        return new MutableVector4d(1, 1, 1, 1);\n    }\n    static dummy() {\n        return new MutableVector4d(null, 0, 0, 0);\n    }\n    static zero() {\n        return new MutableVector4d(0, 0, 0, 0);\n    }\n    static zeroWithWOne() {\n        return new MutableVector4d(0, 0, 0, 1);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/MutableVector4.ts?");

/***/ }),

/***/ "./src/foundation/math/Quaternion.ts":
/*!*******************************************!*\
  !*** ./src/foundation/math/Quaternion.ts ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Quaternion; });\n/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _LogQuaternion__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LogQuaternion */ \"./src/foundation/math/LogQuaternion.ts\");\n\n\n\nclass Quaternion {\n    constructor(x, y, z, w) {\n        if (ArrayBuffer.isView(x)) {\n            this.v = x;\n            return;\n        }\n        else if (x == null) {\n            this.v = new Float32Array(0);\n        }\n        else {\n            this.v = new Float32Array(4);\n        }\n        if (!(x != null)) {\n            this.v[0] = 0;\n            this.v[1] = 0;\n            this.v[2] = 0;\n            this.v[3] = 1;\n        }\n        else if (x instanceof _LogQuaternion__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            const theta = x.x * x.x + x.y * x.y + x.z * x.z;\n            const sin = Math.sin(theta);\n            this.v[0] = x.x * (sin / theta);\n            this.v[1] = x.y * (sin / theta);\n            this.v[2] = x.z * (sin / theta);\n            this.v[3] = Math.cos(theta);\n        }\n        else if (Array.isArray(x)) {\n            this.v[0] = x[0];\n            this.v[1] = x[1];\n            this.v[2] = x[2];\n            this.v[3] = x[3];\n        }\n        else if (typeof x.w !== 'undefined') {\n            this.v[0] = x.x;\n            this.v[1] = x.y;\n            this.v[2] = x.z;\n            this.v[3] = x.w;\n        }\n        else if (typeof x.z !== 'undefined') {\n            this.v[0] = x.x;\n            this.v[1] = x.y;\n            this.v[2] = x.z;\n            this.v[3] = 1;\n        }\n        else if (typeof x.y !== 'undefined') {\n            this.v[0] = x.x;\n            this.v[1] = x.y;\n            this.v[2] = 0;\n            this.v[3] = 1;\n        }\n        else {\n            this.v[0] = x;\n            this.v[1] = y;\n            this.v[2] = z;\n            this.v[3] = w;\n        }\n    }\n    isEqual(quat) {\n        if (this.x === quat.x && this.y === quat.y && this.z === quat.z && this.w === quat.w) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    static get compositionType() {\n        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec4;\n    }\n    static dummy() {\n        return new Quaternion(null);\n    }\n    isDummy() {\n        if (this.v.length === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    get className() {\n        return this.constructor.name;\n    }\n    clone() {\n        return new Quaternion(this.x, this.y, this.z, this.w);\n    }\n    static invert(quat) {\n        quat = new Quaternion(-quat.x, -quat.y, -quat.z, quat.w);\n        const inorm2 = 1.0 / (quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w);\n        quat.v[0] *= inorm2;\n        quat.v[1] *= inorm2;\n        quat.v[2] *= inorm2;\n        quat.v[3] *= inorm2;\n        return quat;\n    }\n    static qlerp(lhq, rhq, ratio) {\n        let q = new Quaternion(0, 0, 0, 1);\n        let qr = lhq.w * rhq.w + lhq.x * rhq.x + lhq.y * rhq.y + lhq.z * rhq.z;\n        let ss = 1.0 - qr * qr;\n        if (ss === 0.0) {\n            q.v[3] = lhq.w;\n            q.v[0] = lhq.x;\n            q.v[1] = lhq.y;\n            q.v[2] = lhq.z;\n            return q;\n        }\n        else {\n            if (qr > 1) {\n                qr = 0.999;\n            }\n            else if (qr < -1) {\n                qr = -0.999;\n            }\n            let ph = Math.acos(qr);\n            let s2;\n            if (qr < 0.0 && ph > Math.PI / 2.0) {\n                qr = -lhq.w * rhq.w - lhq.x * rhq.x - lhq.y * rhq.y - lhq.z * rhq.z;\n                ph = Math.acos(qr);\n                s2 = -1 * Math.sin(ph * ratio) / Math.sin(ph);\n            }\n            else {\n                s2 = Math.sin(ph * ratio) / Math.sin(ph);\n            }\n            let s1 = Math.sin(ph * (1.0 - ratio)) / Math.sin(ph);\n            q.v[0] = lhq.x * s1 + rhq.x * s2;\n            q.v[1] = lhq.y * s1 + rhq.y * s2;\n            q.v[2] = lhq.z * s1 + rhq.z * s2;\n            q.v[3] = lhq.w * s1 + rhq.w * s2;\n            return q;\n        }\n    }\n    static lerpTo(lhq, rhq, ratio, outQ) {\n        outQ.x = lhq.x * (1 - ratio) + rhq.x * ratio;\n        outQ.y = lhq.y * (1 - ratio) + rhq.y * ratio;\n        outQ.z = lhq.z * (1 - ratio) + rhq.z * ratio;\n        outQ.w = lhq.w * (1 - ratio) + rhq.w * ratio;\n    }\n    static qlerpTo(lhq, rhq, ratio, outQ) {\n        //    let q = new Quaternion(0, 0, 0, 1);\n        let qr = lhq.w * rhq.w + lhq.x * rhq.x + lhq.y * rhq.y + lhq.z * rhq.z;\n        let ss = 1.0 - qr * qr;\n        if (ss === 0.0) {\n            outQ.v[3] = lhq.w;\n            outQ.v[0] = lhq.x;\n            outQ.v[1] = lhq.y;\n            outQ.v[2] = lhq.z;\n        }\n        else {\n            if (qr > 1) {\n                qr = 0.999;\n            }\n            else if (qr < -1) {\n                qr = -0.999;\n            }\n            let ph = Math.acos(qr);\n            let s2;\n            if (qr < 0.0 && ph > Math.PI / 2.0) {\n                qr = -lhq.w * rhq.w - lhq.x * rhq.x - lhq.y * rhq.y - lhq.z * rhq.z;\n                ph = Math.acos(qr);\n                s2 = -1 * Math.sin(ph * ratio) / Math.sin(ph);\n            }\n            else {\n                s2 = Math.sin(ph * ratio) / Math.sin(ph);\n            }\n            let s1 = Math.sin(ph * (1.0 - ratio)) / Math.sin(ph);\n            outQ.v[0] = lhq.x * s1 + rhq.x * s2;\n            outQ.v[1] = lhq.y * s1 + rhq.y * s2;\n            outQ.v[2] = lhq.z * s1 + rhq.z * s2;\n            outQ.v[3] = lhq.w * s1 + rhq.w * s2;\n        }\n    }\n    static axisAngle(axisVec3, radian) {\n        let halfAngle = 0.5 * radian;\n        let sin = Math.sin(halfAngle);\n        let axis = _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(axisVec3);\n        return new Quaternion(sin * axis.x, sin * axis.y, sin * axis.z, Math.cos(halfAngle));\n    }\n    static multiply(q1, q2) {\n        let result = new Quaternion(0, 0, 0, 1);\n        result.v[0] = q2.w * q1.x + q2.z * q1.y - q2.y * q1.z + q2.x * q1.w;\n        result.v[1] = -q2.z * q1.x + q2.w * q1.y + q2.x * q1.z + q2.y * q1.w;\n        result.v[2] = q2.y * q1.x - q2.x * q1.y + q2.w * q1.z + q2.z * q1.w;\n        result.v[3] = -q2.x * q1.x - q2.y * q1.y - q2.z * q1.z + q2.w * q1.w;\n        return result;\n    }\n    static multiplyNumber(q1, val) {\n        return new Quaternion(q1.x * val, q1.y * val, q1.z * val, q1.w * val);\n    }\n    static fromMatrix(m) {\n        let q = new Quaternion(0, 0, 0, 1);\n        let tr = m.m00 + m.m11 + m.m22;\n        if (tr > 0) {\n            let S = 0.5 / Math.sqrt(tr + 1.0);\n            q.v[3] = 0.25 / S;\n            q.v[0] = (m.m21 - m.m12) * S;\n            q.v[1] = (m.m02 - m.m20) * S;\n            q.v[2] = (m.m10 - m.m01) * S;\n        }\n        else if ((m.m00 > m.m11) && (m.m00 > m.m22)) {\n            let S = Math.sqrt(1.0 + m.m00 - m.m11 - m.m22) * 2;\n            q.v[3] = (m.m21 - m.m12) / S;\n            q.v[0] = 0.25 * S;\n            q.v[1] = (m.m01 + m.m10) / S;\n            q.v[2] = (m.m02 + m.m20) / S;\n        }\n        else if (m.m11 > m.m22) {\n            let S = Math.sqrt(1.0 + m.m11 - m.m00 - m.m22) * 2;\n            q.v[3] = (m.m02 - m.m20) / S;\n            q.v[0] = (m.m01 + m.m10) / S;\n            q.v[1] = 0.25 * S;\n            q.v[2] = (m.m12 + m.m21) / S;\n        }\n        else {\n            let S = Math.sqrt(1.0 + m.m22 - m.m00 - m.m11) * 2;\n            q.v[3] = (m.m10 - m.m01) / S;\n            q.v[0] = (m.m02 + m.m20) / S;\n            q.v[1] = (m.m12 + m.m21) / S;\n            q.v[2] = 0.25 * S;\n        }\n        return q;\n    }\n    toEulerAngleTo(out) {\n        // this is from https://en.wikipedia.org/wiki/Conversion_between_quaternions_and_Euler_angles#Source_Code_2\n        const sinr_cosp = +2.0 * (this.w * this.x + this.y * this.z);\n        const cosr_cosp = +1.0 - 2.0 * (this.x * this.x + this.y * this.y);\n        out.v[0] = Math.atan2(sinr_cosp, cosr_cosp);\n        const sinp = +2.0 * (this.w * this.y - this.z * this.x);\n        if (Math.abs(sinp) >= 1)\n            out.v[1] = Math.PI / 2 * Math.sign(sinp); // use 90 degrees if out of range\n        else\n            out.v[1] = Math.asin(sinp);\n        const siny_cosp = +2.0 * (this.w * this.z + this.x * this.y);\n        const cosy_cosp = +1.0 - 2.0 * (this.y * this.y + this.z * this.z);\n        out.v[2] = Math.atan2(siny_cosp, cosy_cosp);\n        return out;\n    }\n    static fromPosition(vec3) {\n        let q = new Quaternion(vec3.x, vec3.y, vec3.z, 0);\n        return q;\n    }\n    length() {\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n    }\n    at(i) {\n        switch (i % 4) {\n            case 0: return this.x;\n            case 1: return this.y;\n            case 2: return this.z;\n            case 3: return this.w;\n            default: return void 0;\n        }\n    }\n    static add(lhs, rhs) {\n        return new Quaternion(lhs.x + rhs.x, lhs.y + rhs.y, lhs.z + rhs.z, lhs.w + rhs.w);\n    }\n    static subtract(lhs, rhs) {\n        return new Quaternion(lhs.x - rhs.x, lhs.y - rhs.y, lhs.z - rhs.z, lhs.w - rhs.w);\n    }\n    static lookFromTo(fromDirection, toDirection) {\n        if (fromDirection.isEqual(toDirection)) {\n            return new Quaternion(0, 0, 0, 1);\n        }\n        return this.qlerp(this.lookForward(fromDirection), this.lookForward(toDirection), 1);\n    }\n    static lookForward(forward) {\n        const up = new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](0, 1, 0);\n        return this.lookForwardAccordingToThisUp(forward, up);\n    }\n    static lookForwardAccordingToThisUp(forward, up) {\n        forward = _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(forward);\n        const right = _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cross(up, forward));\n        up = _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cross(forward, right);\n        const m00 = right.x;\n        const m01 = right.y;\n        const m02 = right.z;\n        const m10 = up.x;\n        const m11 = up.y;\n        const m12 = up.z;\n        const m20 = forward.x;\n        const m21 = forward.y;\n        const m22 = forward.z;\n        const num8 = (m00 + m11) + m22;\n        if (num8 > 0) {\n            let num = Math.sqrt(num8 + 1);\n            let num2 = 0.5 / num;\n            return new Quaternion((m12 - m21) * num2, (m20 - m02) * num2, (m01 - m10) * num2, num * 0.5);\n        }\n        else if ((m00 >= m11) && (m00 >= m22)) {\n            let num7 = Math.sqrt(((1 + m00) - m11) - m22);\n            let num4 = 0.5 / num7;\n            return new Quaternion(0.5 * num7, (m01 + m10) * num4, (m02 + m20) * num4, (m12 - m21) * num4);\n        }\n        else if (m11 > m22) {\n            let num6 = Math.sqrt(((1 + m11) - m00) - m22);\n            let num3 = 0.5 / num6;\n            return new Quaternion((m10 + m01) * num3, 0.5 * num6, (m21 + m12) * num3, (m20 - m02) * num3);\n        }\n        else {\n            let num5 = Math.sqrt(((1 + m22) - m00) - m11);\n            let num2 = 0.5 / num5;\n            return new Quaternion((m20 + m02) * num2, (m21 + m12) * num2, 0.5 * num5, (m01 - m10) * num2);\n        }\n    }\n    multiplyVector3(point) {\n        const num = this.x * 2;\n        const num2 = this.y * 2;\n        const num3 = this.z * 2;\n        const num4 = this.x * num;\n        const num5 = this.y * num2;\n        const num6 = this.z * num3;\n        const num7 = this.x * num2;\n        const num8 = this.x * num3;\n        const num9 = this.y * num3;\n        const num10 = this.w * num;\n        const num11 = this.w * num2;\n        const num12 = this.w * num3;\n        const result = new _Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"]((1 - (num5 + num6)) * point.x + (num7 - num12) * point.y + (num8 + num11) * point.z, (num7 + num12) * point.x + (1 - (num4 + num6)) * point.y + (num9 - num10) * point.z, (num8 - num11) * point.x + (num9 + num10) * point.y + (1 - (num4 + num5)) * point.z);\n        return result;\n    }\n    toString() {\n        return '(' + this.x + ', ' + this.y + ', ' + this.z + ', ' + this.w + ')';\n    }\n    get x() {\n        return this.v[0];\n    }\n    get y() {\n        return this.v[1];\n    }\n    get z() {\n        return this.v[2];\n    }\n    get w() {\n        return this.v[3];\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/Quaternion.ts?");

/***/ }),

/***/ "./src/foundation/math/Scalar.ts":
/*!***************************************!*\
  !*** ./src/foundation/math/Scalar.ts ***!
  \***************************************/
/*! exports provided: Scalar_, default, Scalard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Scalar_\", function() { return Scalar_; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Scalar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Scalard\", function() { return Scalard; });\nclass Scalar_ {\n    constructor(x, { type }) {\n        if (ArrayBuffer.isView(x)) {\n            this.v = x;\n            return;\n        }\n        else if (x == null) {\n            this.v = new type(0);\n            return;\n        }\n        else {\n            this.v = new type(1);\n        }\n        this.v[0] = x;\n    }\n    getValue() {\n        return this.v[0];\n    }\n    getValueInArray() {\n        return [this.v[0]];\n    }\n    get x() {\n        return this.v[0];\n    }\n    get raw() {\n        return this.v;\n    }\n}\nclass Scalar extends Scalar_ {\n    constructor(x) {\n        super(x, { type: Float32Array });\n    }\n    static zero() {\n        return new Scalar(0);\n    }\n    static one() {\n        return new Scalar(1);\n    }\n    static dummy() {\n        return new Scalar(null);\n    }\n    clone() {\n        return new Scalar(this.x);\n    }\n}\nclass Scalard extends Scalar_ {\n    constructor(x) {\n        super(x, { type: Float64Array });\n    }\n    static zero() {\n        return new Scalard(0);\n    }\n    static one() {\n        return new Scalard(1);\n    }\n    static dummy() {\n        return new Scalard(null);\n    }\n    clone() {\n        return new Scalard(this.x);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/Scalar.ts?");

/***/ }),

/***/ "./src/foundation/math/Vector2.ts":
/*!****************************************!*\
  !*** ./src/foundation/math/Vector2.ts ***!
  \****************************************/
/*! exports provided: Vector2_, default, Vector2d */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Vector2_\", function() { return Vector2_; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Vector2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Vector2d\", function() { return Vector2d; });\nclass Vector2_ {\n    constructor(x, y, { type }) {\n        if (ArrayBuffer.isView(x)) {\n            this.v = x;\n            return;\n        }\n        else if (x == null) {\n            this.v = new type(0);\n            return;\n        }\n        else {\n            this.v = new type(2);\n        }\n        this.v[0] = x;\n        this.v[1] = y;\n    }\n    get className() {\n        return this.constructor.name;\n    }\n    clone() {\n        return new Vector2(this.x, this.y);\n    }\n    static add(lvec, rvec) {\n        return new lvec.constructor(lvec.x + rvec.x, lvec.y + rvec.y);\n    }\n    static subtract(lvec, rvec) {\n        return new lvec.constructor(lvec.x - rvec.x, lvec.y - rvec.y);\n    }\n    isStrictEqual(vec) {\n        if (this.x === vec.x && this.y === vec.y) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    isEqual(vec, delta = Number.EPSILON) {\n        if (Math.abs(vec.x - this.x) < delta &&\n            Math.abs(vec.y - this.y) < delta) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    static multiply(vec2, val) {\n        return new vec2.constructor(vec2.x * val, vec2.y * val);\n    }\n    get x() {\n        return this.v[0];\n    }\n    get y() {\n        return this.v[1];\n    }\n    get raw() {\n        return this.v;\n    }\n}\nclass Vector2 extends Vector2_ {\n    constructor(x, y) {\n        super(x, y, { type: Float32Array });\n    }\n    static zero() {\n        return new Vector2(0, 0);\n    }\n    static one() {\n        return new Vector2(1, 1);\n    }\n    static dummy() {\n        return new Vector2(null, 0);\n    }\n    clone() {\n        return new Vector2(this.x, this.y);\n    }\n}\nclass Vector2d extends Vector2_ {\n    constructor(x, y) {\n        super(x, y, { type: Float64Array });\n    }\n    static zero() {\n        return new Vector2d(0, 0);\n    }\n    static one() {\n        return new Vector2d(1, 1);\n    }\n    static dummy() {\n        return new Vector2d(null, 0);\n    }\n    clone() {\n        return new Vector2d(this.x, this.y);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/Vector2.ts?");

/***/ }),

/***/ "./src/foundation/math/Vector3.ts":
/*!****************************************!*\
  !*** ./src/foundation/math/Vector3.ts ***!
  \****************************************/
/*! exports provided: Vector3_, default, Vector3d */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Vector3_\", function() { return Vector3_; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Vector3; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Vector3d\", function() { return Vector3d; });\n/* harmony import */ var _misc_IsUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/IsUtil */ \"./src/foundation/misc/IsUtil.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n\n\nclass Vector3_ {\n    constructor(x, y, z, { type }) {\n        if (ArrayBuffer.isView(x)) {\n            this.v = x;\n            return;\n        }\n        else if (x == null) {\n            this.v = new type(0);\n            return;\n        }\n        else {\n            this.v = new type(3);\n        }\n        if (_misc_IsUtil__WEBPACK_IMPORTED_MODULE_0__[\"default\"].not.exist(x)) {\n            this.v[0] = 0;\n            this.v[1] = 0;\n            this.v[2] = 0;\n        }\n        else if (Array.isArray(x)) {\n            this.v[0] = x[0];\n            this.v[1] = x[1];\n            this.v[2] = x[2];\n        }\n        else if (typeof x.w !== 'undefined') {\n            this.v[0] = x.v[0];\n            this.v[1] = x.v[1];\n            this.v[2] = x.v[2];\n        }\n        else if (typeof x.z !== 'undefined') {\n            this.v[0] = x.v[0];\n            this.v[1] = x.v[1];\n            this.v[2] = x.v[2];\n        }\n        else if (typeof x.y !== 'undefined') {\n            this.v[0] = x.v[0];\n            this.v[1] = x.v[1];\n            this.v[2] = 0;\n        }\n        else {\n            this.v[0] = x;\n            this.v[1] = y;\n            this.v[2] = z;\n        }\n    }\n    get className() {\n        return this.constructor.name;\n    }\n    static get compositionType() {\n        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Vec3;\n    }\n    isStrictEqual(vec) {\n        if (this.v[0] === vec.v[0] && this.v[1] === vec.v[1] && this.v[2] === vec.v[2]) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    isEqual(vec, delta = Number.EPSILON) {\n        if (Math.abs(vec.v[0] - this.v[0]) < delta &&\n            Math.abs(vec.v[1] - this.v[1]) < delta &&\n            Math.abs(vec.v[2] - this.v[2]) < delta) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    isDummy() {\n        if (this.v.length === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    length() {\n        return Math.sqrt(this.v[0] * this.v[0] + this.v[1] * this.v[1] + this.v[2] * this.v[2]);\n    }\n    copyComponents(vec) {\n        this.v[0] = vec.v[0];\n        this.v[1] = vec.v[1];\n        this.v[2] = vec.v[2];\n    }\n    /**\n     * to square length(static verison)\n     */\n    static lengthSquared(vec3) {\n        return vec3.v[0] * vec3.v[0] + vec3.v[1] * vec3.v[1] + vec3.v[2] * vec3.v[2];\n    }\n    lengthTo(vec3) {\n        var deltaX = vec3.v[0] - this.v[0];\n        var deltaY = vec3.v[1] - this.v[1];\n        var deltaZ = vec3.v[2] - this.v[2];\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY + deltaZ * deltaZ);\n    }\n    static lengthBtw(lhv, rhv) {\n        var deltaX = rhv.v[0] - lhv.v[0];\n        var deltaY = rhv.v[1] - lhv.v[1];\n        var deltaZ = rhv.v[2] - lhv.v[2];\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY + deltaZ * deltaZ);\n    }\n    /**\n     * dot product\n     */\n    dotProduct(vec3) {\n        return this.v[0] * vec3.v[0] + this.v[1] * vec3.v[1] + this.v[2] * vec3.v[2];\n    }\n    /**\n     * dot product(static version)\n     */\n    static dotProduct(lv, rv) {\n        return lv.v[0] * rv.v[0] + lv.v[1] * rv.v[1] + lv.v[2] * rv.v[2];\n    }\n    /**\n    * cross product(static version)\n    */\n    static cross(lv, rv) {\n        var x = lv.v[1] * rv.v[2] - lv.v[2] * rv.v[1];\n        var y = lv.v[2] * rv.v[0] - lv.v[0] * rv.v[2];\n        var z = lv.v[0] * rv.v[1] - lv.v[1] * rv.v[0];\n        return new lv.constructor(x, y, z);\n    }\n    /**\n     * normalize(static version)\n     */\n    static normalize(vec3) {\n        var length = vec3.length();\n        var newVec = new vec3.constructor(vec3.v[0], vec3.v[1], vec3.v[2]);\n        newVec = Vector3_.divide(newVec, length);\n        return newVec;\n    }\n    /**\n     * add valuestatic version\n     */\n    static add(lv, rv) {\n        return new lv.constructor(lv.v[0] + rv.v[0], lv.v[1] + rv.v[1], lv.v[2] + rv.v[2]);\n    }\n    /**\n     * subtract(subtract)\n     */\n    static subtract(lv, rv) {\n        return new lv.constructor(lv.v[0] - rv.v[0], lv.v[1] - rv.v[1], lv.v[2] - rv.v[2]);\n    }\n    /**\n     * divide(static version)\n     */\n    static divide(vec3, val) {\n        if (val !== 0) {\n            return new vec3.constructor(vec3.v[0] / val, vec3.v[1] / val, vec3.v[2] / val);\n        }\n        else {\n            console.error(\"0 division occured!\");\n            return new vec3.constructor(Infinity, Infinity, Infinity);\n        }\n    }\n    /**\n     * multiply(static version)\n     */\n    static multiply(vec3, val) {\n        return new vec3.constructor(vec3.v[0] * val, vec3.v[1] * val, vec3.v[2] * val);\n    }\n    /**\n     * multiplyTo(static version)\n     */\n    static multiplyTo(vec3, val, out3) {\n        out3.x = vec3.v[0] * val;\n        out3.y = vec3.v[1] * val;\n        out3.z = vec3.v[2] * val;\n    }\n    /**\n     * multiply vector(static version)\n     */\n    static multiplyVector(vec3, vec) {\n        return new vec3.constructor(vec3.v[0] * vec.v[0], vec3.v[1] * vec.v[1], vec3.v[2] * vec.v[2]);\n    }\n    static angleOfVectors(lhv, rhv) {\n        let cos_sita = Vector3_.dotProduct(lhv, rhv) / (lhv.length() * rhv.length());\n        let sita = Math.acos(cos_sita);\n        return sita;\n    }\n    /**\n     * divide vector(static version)\n     */\n    static divideVector(lvec3, rvec3) {\n        return new lvec3.constructor(lvec3.v[0] / rvec3.v[0], lvec3.v[1] / rvec3.v[1], lvec3.v[2] / rvec3.v[2]);\n    }\n    /**\n     * change to string\n     */\n    toString() {\n        return '(' + this.v[0] + ', ' + this.v[1] + ', ' + this.v[2] + ')';\n    }\n    get x() {\n        return this.v[0];\n    }\n    get y() {\n        return this.v[1];\n    }\n    get z() {\n        return this.v[2];\n    }\n    get w() {\n        return 1;\n    }\n    get raw() {\n        return this.v;\n    }\n}\nclass Vector3 extends Vector3_ {\n    constructor(x, y, z) {\n        super(x, y, z, { type: Float32Array });\n    }\n    static zero() {\n        return new Vector3(0, 0, 0);\n    }\n    static one() {\n        return new Vector3(1, 1, 1);\n    }\n    static dummy() {\n        return new Vector3(null, 0, 0);\n    }\n    clone() {\n        return new Vector3(this.v[0], this.v[1], this.v[2]);\n    }\n}\nclass Vector3d extends Vector3_ {\n    constructor(x, y, z) {\n        super(x, y, z, { type: Float64Array });\n    }\n    static zero() {\n        return new Vector3d(0, 0, 0);\n    }\n    static one() {\n        return new Vector3d(1, 1, 1);\n    }\n    static dummy() {\n        return new Vector3d(null, 0, 0);\n    }\n    clone() {\n        return new Vector3d(this.v[0], this.v[1], this.v[2]);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/Vector3.ts?");

/***/ }),

/***/ "./src/foundation/math/Vector4.ts":
/*!****************************************!*\
  !*** ./src/foundation/math/Vector4.ts ***!
  \****************************************/
/*! exports provided: Vector4_, default, Vector4d */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Vector4_\", function() { return Vector4_; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Vector4; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Vector4d\", function() { return Vector4d; });\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n\nclass Vector4_ {\n    constructor(x, y, z, w, { type }) {\n        if (ArrayBuffer.isView(x)) {\n            this.v = x;\n            return;\n        }\n        else if (x == null) {\n            this.v = new type(0);\n            return;\n        }\n        else {\n            this.v = new type(4);\n        }\n        if (Array.isArray(x)) {\n            this.v[0] = x[0];\n            this.v[1] = x[1];\n            this.v[2] = x[2];\n            this.v[3] = x[3];\n        }\n        else if (typeof x.w !== 'undefined') {\n            this.v[0] = x.v[0];\n            this.v[1] = x.v[1];\n            this.v[2] = x.v[2];\n            this.v[3] = x.v[3];\n        }\n        else if (typeof x.z !== 'undefined') {\n            this.v[0] = x.v[0];\n            this.v[1] = x.v[1];\n            this.v[2] = x.v[2];\n            this.v[3] = 1;\n        }\n        else if (typeof x.y !== 'undefined') {\n            this.v[0] = x.v[0];\n            this.v[1] = x.v[1];\n            this.v[2] = 0;\n            this.v[3] = 1;\n        }\n        else {\n            this.v[0] = x;\n            this.v[1] = y;\n            this.v[2] = z;\n            this.v[3] = w;\n        }\n    }\n    get className() {\n        return this.constructor.name;\n    }\n    static get compositionType() {\n        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__[\"CompositionType\"].Vec4;\n    }\n    isDummy() {\n        if (this.v.length === 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    isStrictEqual(vec) {\n        if (this.v[0] === vec.v[0] && this.v[1] === vec.v[1] && this.v[2] === vec.v[2] && this.v[3] === vec.v[3]) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    isEqual(vec, delta = Number.EPSILON) {\n        if (Math.abs(vec.v[0] - this.v[0]) < delta &&\n            Math.abs(vec.v[1] - this.v[1]) < delta &&\n            Math.abs(vec.v[2] - this.v[2]) < delta &&\n            Math.abs(vec.v[3] - this.v[3]) < delta) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    clone() {\n        return new this.constructor(this.v[0], this.v[1], this.v[2], this.v[3]);\n    }\n    /**\n     * Zero Vector\n     */\n    static zero() {\n        return new this(0, 0, 0, 1);\n    }\n    length() {\n        return Math.sqrt(this.v[0] * this.v[0] + this.v[1] * this.v[1] + this.v[2] * this.v[2] + this.v[3] * this.v[3]);\n    }\n    copyComponents(vec) {\n        this.v[0] = vec.v[0];\n        this.v[1] = vec.v[1];\n        this.v[2] = vec.v[2];\n        this.v[3] = vec.v[3];\n    }\n    /**\n     * add valuestatic version\n     */\n    static add(lv, rv) {\n        return new lv.constructor(lv.v[0] + rv.v[0], lv.v[1] + rv.v[1], lv.v[2] + rv.v[2], lv.v[2] + rv.v[2]);\n    }\n    static subtract(lv, rv) {\n        return new lv.constructor(lv.v[0] - rv.v[0], lv.v[1] - rv.v[1], lv.v[2] - rv.v[2], lv.v[3] - rv.v[3]);\n    }\n    /**\n     * add value except w componentstatic version\n     */\n    static addWithOutW(lv, rv) {\n        return new lv.constructor(lv.v[0] + rv.v[0], lv.v[1] + rv.v[1], lv.v[2] + rv.v[2], lv.v[2]);\n    }\n    static multiply(vec4, val) {\n        return new vec4.constructor(vec4.v[0] * val, vec4.v[1] * val, vec4.v[2] * val, vec4.v[3] * val);\n    }\n    static multiplyVector(vec4, vec) {\n        return new vec4.constructor(vec4.v[0] * vec.v[0], vec4.v[1] * vec.v[1], vec4.v[2] * vec.v[2], vec4.v[3] * vec.v[3]);\n    }\n    static divide(vec4, val) {\n        if (val !== 0) {\n            return new vec4.constructor(vec4.v[0] / val, vec4.v[1] / val, vec4.v[2] / val, vec4.v[3] / val);\n        }\n        else {\n            console.warn(\"0 division occured!\");\n            return new vec4.constructor(Infinity, Infinity, Infinity, Infinity);\n        }\n    }\n    static divideVector(lvec4, rvec4) {\n        return new lvec4.constructor(lvec4.v[0] / rvec4.v[0], lvec4.v[1] / rvec4.v[1], lvec4.v[2] / rvec4.v[2], lvec4.v[3] / rvec4.v[3]);\n    }\n    static normalize(vec4) {\n        const length = vec4.length();\n        let newVec = new vec4.constructor(vec4.v[0], vec4.v[1], vec4.v[2], vec4.v[3]);\n        newVec = Vector4_.divide(newVec, length);\n        return newVec;\n    }\n    /**\n     * dot product\n     */\n    dotProduct(vec4) {\n        return this.v[0] * vec4.v[0] + this.v[1] * vec4.v[1] + this.v[2] * vec4.v[2] + this.v[3] * vec4.v[3];\n    }\n    /**\n     * dot product(static version)\n     */\n    static dotProduct(lv, rv) {\n        return lv.v[0] * rv.v[0] + lv.v[1] * rv.v[1] + lv.v[2] * rv.v[2] + lv.v[3] * rv.v[3];\n    }\n    toString() {\n        return '(' + this.v[0] + ', ' + this.v[1] + ', ' + this.v[2] + ', ' + this.v[3] + ')';\n    }\n    get x() {\n        return this.v[0];\n    }\n    get y() {\n        return this.v[1];\n    }\n    get z() {\n        return this.v[2];\n    }\n    get w() {\n        return this.v[3];\n    }\n}\nclass Vector4 extends Vector4_ {\n    constructor(x, y, z, w) {\n        super(x, y, z, w, { type: Float32Array });\n    }\n    static zeroWithWOne() {\n        return new Vector4(0, 0, 0, 1);\n    }\n    static zero() {\n        return new Vector4(0, 0, 0, 0);\n    }\n    static one() {\n        return new Vector4(1, 1, 1, 1);\n    }\n    static dummy() {\n        return new Vector4(null, 0, 0, 0);\n    }\n    clone() {\n        return new Vector4(this.v[0], this.v[1], this.v[2], this.v[3]);\n    }\n}\nclass Vector4d extends Vector4_ {\n    constructor(x, y, z, w) {\n        super(x, y, z, w, { type: Float64Array });\n    }\n    static zeroWithWOne() {\n        return new Vector4d(0, 0, 0, 1);\n    }\n    static zero() {\n        return new Vector4d(0, 0, 0, 0);\n    }\n    static one() {\n        return new Vector4d(1, 1, 1, 1);\n    }\n    static dummy() {\n        return new Vector4d(null, 0, 0, 0);\n    }\n    clone() {\n        return new Vector4d(this.v[0], this.v[1], this.v[2], this.v[3]);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/Vector4.ts?");

/***/ }),

/***/ "./src/foundation/math/VectorN.ts":
/*!****************************************!*\
  !*** ./src/foundation/math/VectorN.ts ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return VectorN; });\nclass VectorN {\n    constructor(float32Array) {\n        this.v = float32Array;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/math/VectorN.ts?");

/***/ }),

/***/ "./src/foundation/memory/Accessor.ts":
/*!*******************************************!*\
  !*** ./src/foundation/memory/Accessor.ts ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Accessor; });\n/* harmony import */ var _AccessorBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AccessorBase */ \"./src/foundation/memory/AccessorBase.ts\");\n\nclass Accessor extends _AccessorBase__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor({ bufferView, byteOffset, compositionType, componentType, byteStride, count, raw, arrayLength }) {\n        super({ bufferView, byteOffset, compositionType, componentType, byteStride, count, raw, arrayLength });\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/memory/Accessor.ts?");

/***/ }),

/***/ "./src/foundation/memory/AccessorBase.ts":
/*!***********************************************!*\
  !*** ./src/foundation/memory/AccessorBase.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AccessorBase; });\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Vector2 */ \"./src/foundation/math/Vector2.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _math_Matrix33__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/Matrix33 */ \"./src/foundation/math/Matrix33.ts\");\n/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n\n\n\n\n\n\n\n\nclass AccessorBase extends _core_RnObject__WEBPACK_IMPORTED_MODULE_2__[\"default\"] {\n    constructor({ bufferView, byteOffset, compositionType, componentType, byteStride, count, raw, max, min, arrayLength }) {\n        super();\n        this.__compositionType = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__[\"CompositionType\"].Unknown;\n        this.__componentType = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Unknown;\n        this.__count = 0;\n        this.__takenCount = 0;\n        this.__byteStride = 0;\n        this.__arrayLength = 1;\n        this.__bufferView = bufferView;\n        this.__byteOffsetInRawArrayBufferOfBuffer = bufferView.byteOffsetInRawArrayBufferOfBuffer + byteOffset;\n        this.__compositionType = compositionType;\n        this.__componentType = componentType;\n        this.__count = count;\n        this.__arrayLength = arrayLength;\n        this.__raw = raw;\n        if (max != null) {\n            this.__max = max;\n        }\n        if (min != null) {\n            this.__min = min;\n        }\n        this.__byteStride = byteStride;\n        if (this.__byteStride === 0) {\n            this.__byteStride = this.__compositionType.getNumberOfComponents() * this.__componentType.getSizeInBytes() * this.__arrayLength;\n        }\n        this.prepare();\n    }\n    prepare() {\n        const typedArrayClass = this.getTypedArrayClass(this.__componentType);\n        this.__typedArrayClass = typedArrayClass;\n        if (this.__componentType.getSizeInBytes() === 8) {\n            if (this.__byteOffsetInRawArrayBufferOfBuffer % 8 !== 0) {\n                console.info('Padding added because of byteOffset of accessor is not 8 bytes aligned despite of Double precision.');\n                this.__byteOffsetInRawArrayBufferOfBuffer += 8 - this.__byteOffsetInRawArrayBufferOfBuffer % 8;\n            }\n        }\n        //  else if (this.__componentType.getSizeInBytes() === 4) {\n        //   if (this.__byteOffsetInBuffer % 4 !== 0) {\n        //     console.info('Padding added because of byteOffset of accessor is not 4 bytes aligned despite of Double precision.');\n        //     this.__byteOffsetInBuffer += 4 - this.__byteOffsetInBuffer % 4;\n        //   }\n        // }\n        if (this.__bufferView.isSoA) {\n            this.__dataView = new DataView(this.__raw, this.__byteOffsetInRawArrayBufferOfBuffer, this.__compositionType.getNumberOfComponents() * this.__componentType.getSizeInBytes() * this.__count);\n        }\n        else {\n            this.__dataView = new DataView(this.__raw, this.__byteOffsetInRawArrayBufferOfBuffer);\n        }\n        if (this.__byteOffsetInRawArrayBufferOfBuffer % this.__componentType.getSizeInBytes() === 0) {\n            this.__typedArray = new typedArrayClass(this.__raw, this.__byteOffsetInRawArrayBufferOfBuffer, this.__compositionType.getNumberOfComponents() * this.__count);\n        }\n        this.__dataViewGetter = this.__dataView[this.getDataViewGetter(this.__componentType)].bind(this.__dataView);\n        this.__dataViewSetter = this.__dataView[this.getDataViewSetter(this.__componentType)].bind(this.__dataView);\n    }\n    getTypedArrayClass(componentType) {\n        switch (componentType) {\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Byte: return Int8Array;\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsignedByte: return Uint8Array;\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Short: return Int16Array;\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsignedShort: return Uint16Array;\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Int: return Int32Array;\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsingedInt: return Uint32Array;\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Float: return Float32Array;\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Double: return Float64Array;\n            default:\n                console.error('Unexpected ComponentType!');\n                return void 0;\n        }\n    }\n    getDataViewGetter(componentType) {\n        switch (componentType) {\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Byte: return 'getInt8';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsignedByte: return 'getUint8';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Short: return 'getInt16';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsignedShort: return 'getUint16';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Int: return 'getInt32';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsingedInt: return 'getUint32';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Float: return 'getFloat32';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Double: return 'getFloat64';\n            default:\n                console.error('Unexpected ComponentType!');\n                return 'unkown';\n        }\n    }\n    getDataViewSetter(componentType) {\n        switch (componentType) {\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Byte: return 'setInt8';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsignedByte: return 'setUint8';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Short: return 'setInt16';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsignedShort: return 'setUint16';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Int: return 'setInt32';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].UnsingedInt: return 'setUint32';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Float: return 'setFloat32';\n            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__[\"ComponentType\"].Double: return 'setFloat64';\n            default: console.error('Unexpected ComponentType!');\n        }\n        return undefined;\n    }\n    takeOne() {\n        const arrayBufferOfBufferView = this.__raw;\n        // let stride = this.__compositionType.getNumberOfComponents() * this.__componentType.getSizeInBytes();\n        // if (this.__bufferView.isAoS) {\n        //   stride = this.__bufferView.byteStride;\n        // }\n        if (this.__takenCount >= this.__count) {\n            console.error('You are trying to allocate more than you have secured.');\n        }\n        const subTypedArray = new this.__typedArrayClass(arrayBufferOfBufferView, this.__byteOffsetInRawArrayBufferOfBuffer + this.__byteStride * this.__takenCount, this.__compositionType.getNumberOfComponents() * this.__arrayLength);\n        this.__takenCount += 1;\n        subTypedArray._accessor = this;\n        subTypedArray._idx_of_accessor = this.__takenCount;\n        return subTypedArray;\n    }\n    get takenCount() {\n        return this.takenCount;\n    }\n    get numberOfComponents() {\n        return this.__compositionType.getNumberOfComponents();\n    }\n    get componentSizeInBytes() {\n        return this.__componentType.getSizeInBytes();\n    }\n    get elementSizeInBytes() {\n        return this.numberOfComponents * this.componentSizeInBytes;\n    }\n    get elementCount() {\n        return this.__dataView.byteLength / (this.numberOfComponents * this.componentSizeInBytes);\n    }\n    get byteLength() {\n        return this.__byteStride * this.__count;\n    }\n    get componentType() {\n        return this.__componentType;\n    }\n    get compositionType() {\n        return this.__compositionType;\n    }\n    getTypedArray() {\n        if (this.__bufferView.isAoS) {\n            console.warn('Be careful. this referance bufferView is AoS(Array on Structure), it means Interleaved Data. So you can not access your data properly by this TypedArray.');\n        }\n        return this.__typedArray;\n    }\n    get isAoS() {\n        return this.__bufferView.isAoS;\n    }\n    get isSoA() {\n        return this.__bufferView.isSoA;\n    }\n    get byteStride() {\n        return this.__byteStride;\n    }\n    getScalar(i, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        return this.__dataViewGetter(this.__byteStride * index, endian);\n    }\n    getScalarAt(i, compositionOffset, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        return this.__dataViewGetter(this.__byteStride * index + compositionOffset, endian);\n    }\n    getVec2AsArray(i, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const byteSize = this.componentSizeInBytes;\n        return [this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian)];\n    }\n    getVec3AsArray(i, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const byteSize = this.componentSizeInBytes;\n        return [this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian)];\n    }\n    getVec4AsArray(i, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const byteSize = this.componentSizeInBytes;\n        return [this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian)];\n    }\n    getMat3AsArray(i, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const byteSize = this.componentSizeInBytes;\n        return [\n            this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian),\n            this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 4 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 5 * byteSize, endian),\n            this.__dataViewGetter(this.__byteStride * index + 6 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 7 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 8 * byteSize, endian),\n        ];\n    }\n    getMat4AsArray(i, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const byteSize = this.componentSizeInBytes;\n        return [\n            this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian),\n            this.__dataViewGetter(this.__byteStride * index + 4 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 5 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 6 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 7 * byteSize, endian),\n            this.__dataViewGetter(this.__byteStride * index + 8 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 9 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 10 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 11 * byteSize, endian),\n            this.__dataViewGetter(this.__byteStride * index + 12 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 13 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 14 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 15 * byteSize, endian),\n        ];\n    }\n    getVec2(i, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const byteSize = this.componentSizeInBytes;\n        return new _math_Vector2__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian));\n    }\n    getVec3(i, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const byteSize = this.componentSizeInBytes;\n        return new _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian));\n    }\n    getVec4(i, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const byteSize = this.componentSizeInBytes;\n        return new _math_Vector4__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian));\n    }\n    getMat3(i, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const byteSize = this.componentSizeInBytes;\n        return new _math_Matrix33__WEBPACK_IMPORTED_MODULE_6__[\"default\"](this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 4 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 5 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 6 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 7 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 8 * byteSize, endian));\n    }\n    getMat4(i, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const byteSize = this.componentSizeInBytes;\n        return new _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__[\"default\"](this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 4 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 5 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 6 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 7 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 8 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 9 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 10 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 11 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 12 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 13 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 14 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 15 * byteSize, endian));\n    }\n    setScalar(i, value, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        this.__dataViewSetter(this.__byteStride * index, value, endian);\n    }\n    setVec2(i, x, y, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const sizeInBytes = this.componentSizeInBytes;\n        this.__dataViewSetter(this.__byteStride * index, x, endian);\n        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, y, endian);\n    }\n    setVec3(i, x, y, z, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const sizeInBytes = this.componentSizeInBytes;\n        this.__dataViewSetter(this.__byteStride * index, x, endian);\n        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, y, endian);\n        this.__dataViewSetter(this.__byteStride * index + 2 * sizeInBytes, z, endian);\n    }\n    setVec4(i, x, y, z, w, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const sizeInBytes = this.componentSizeInBytes;\n        this.__dataViewSetter(this.__byteStride * index, x, endian);\n        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, y, endian);\n        this.__dataViewSetter(this.__byteStride * index + 2 * sizeInBytes, z, endian);\n        this.__dataViewSetter(this.__byteStride * index + 3 * sizeInBytes, w, endian);\n    }\n    setVec2AsVector(i, vec, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const sizeInBytes = this.componentSizeInBytes;\n        this.__dataViewSetter(this.__byteStride * index, vec.x, endian);\n        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, vec.y, endian);\n    }\n    setVec3AsVector(i, vec, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const sizeInBytes = this.componentSizeInBytes;\n        this.__dataViewSetter(this.__byteStride * index, vec.x, endian);\n        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, vec.y, endian);\n        this.__dataViewSetter(this.__byteStride * index + 2 * sizeInBytes, vec.z, endian);\n    }\n    setVec4AsVector(i, vec, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        const sizeInBytes = this.componentSizeInBytes;\n        this.__dataViewSetter(this.__byteStride * index, vec.x, endian);\n        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, vec.y, endian);\n        this.__dataViewSetter(this.__byteStride * index + 2 * sizeInBytes, vec.z, endian);\n        this.__dataViewSetter(this.__byteStride * index + 3 * sizeInBytes, vec.w, endian);\n    }\n    copyFromTypedArray(typedArray) {\n        const componentN = this.numberOfComponents;\n        const setter = this['setVec' + componentN];\n        for (let j = 0; j < (typedArray.byteLength / this.componentSizeInBytes); j++) {\n            const idx = Math.floor(j / componentN);\n            const idxN = idx * componentN;\n            switch (componentN) {\n                case 1:\n                    setter.call(this, idx, typedArray[idxN + 0], {});\n                    break;\n                case 2:\n                    setter.call(this, idx, typedArray[idxN + 0], typedArray[idxN + 1], {});\n                    break;\n                case 3:\n                    setter.call(this, idx, typedArray[idxN + 0], typedArray[idxN + 1], typedArray[idxN + 2], {});\n                    break;\n                case 4:\n                    setter.call(this, idx, typedArray[idxN + 0], typedArray[idxN + 1], typedArray[idxN + 2], typedArray[idxN + 3], {});\n                    break;\n                default: throw new Error('Other than vectors are currently not supported.');\n            }\n        }\n    }\n    setScalarAt(i, conpositionOffset, value, { indicesAccessor, endian = true }) {\n        let index = i;\n        if (indicesAccessor) {\n            index = indicesAccessor.getScalar(i, {});\n        }\n        this.__dataViewSetter(this.__byteStride * index + conpositionOffset, value, endian);\n    }\n    setElementFromSameCompositionAccessor(i, accessor, secondIdx) {\n        const j = (secondIdx != null) ? secondIdx : i;\n        if (this.compositionType.getNumberOfComponents() === 1) {\n            this.setScalar(i, accessor.getScalar(j, {}), {});\n        }\n        else if (this.compositionType.getNumberOfComponents() === 2) {\n            this.setVec2AsVector(i, accessor.getVec2(j, {}), {});\n        }\n        else if (this.compositionType.getNumberOfComponents() === 3) {\n            this.setVec3AsVector(i, accessor.getVec3(j, {}), {});\n        }\n        else if (this.compositionType.getNumberOfComponents() === 4) {\n            this.setVec4AsVector(i, accessor.getVec4(j, {}), {});\n        }\n    }\n    setElementFromAccessor(i, accessor, secondIdx) {\n        const j = (secondIdx != null) ? secondIdx : i;\n        if (this.compositionType.getNumberOfComponents() === 1) {\n            if (accessor.compositionType.getNumberOfComponents() === 1) {\n                this.setScalar(i, accessor.getScalar(j, {}), {});\n            }\n            else if (accessor.compositionType.getNumberOfComponents() === 2) {\n                this.setScalar(i, accessor.getVec2(j, {}).x, {});\n            }\n            else if (accessor.compositionType.getNumberOfComponents() === 3) {\n                this.setScalar(i, accessor.getVec3(j, {}).x, {});\n            }\n            else if (accessor.compositionType.getNumberOfComponents() === 4) {\n                this.setScalar(i, accessor.getVec4(j, {}).x, {});\n            }\n        }\n        else if (this.compositionType.getNumberOfComponents() === 2) {\n            if (accessor.compositionType.getNumberOfComponents() === 1) {\n                const scalar = accessor.getScalar(j, {});\n                this.setVec2(i, scalar, 0, {});\n            }\n            else if (accessor.compositionType.getNumberOfComponents() === 2) {\n                this.setVec2AsVector(i, accessor.getVec2(j, {}), {});\n            }\n            else if (accessor.compositionType.getNumberOfComponents() === 3) {\n                const vec = accessor.getVec3(j, {});\n                this.setVec2(i, vec.x, vec.y, {});\n            }\n            else if (accessor.compositionType.getNumberOfComponents() === 4) {\n                const vec = accessor.getVec4(j, {});\n                this.setVec2(i, vec.x, vec.y, {});\n            }\n        }\n        else if (this.compositionType.getNumberOfComponents() === 3) {\n            if (accessor.compositionType.getNumberOfComponents() === 1) {\n                const scalar = accessor.getScalar(j, {});\n                this.setVec3(i, scalar, 0, 0, {});\n            }\n            else if (accessor.compositionType.getNumberOfComponents() === 2) {\n                const vec = accessor.getVec2(j, {});\n                this.setVec3(i, vec.x, vec.y, 0, {});\n            }\n            else if (accessor.compositionType.getNumberOfComponents() === 3) {\n                const vec = accessor.getVec3(j, {});\n                this.setVec3AsVector(i, vec, {});\n            }\n            else if (accessor.compositionType.getNumberOfComponents() === 4) {\n                const vec = accessor.getVec4(j, {});\n                this.setVec3(i, vec.x, vec.y, vec.z, {});\n            }\n        }\n        else if (this.compositionType.getNumberOfComponents() === 4) {\n            if (accessor.compositionType.getNumberOfComponents() === 1) {\n                const scalar = accessor.getScalar(j, {});\n                this.setVec4(i, scalar, 0, 0, 0, {});\n            }\n            else if (accessor.compositionType.getNumberOfComponents() === 2) {\n                const vec = accessor.getVec2(j, {});\n                this.setVec4(i, vec.x, vec.y, 0, 0, {});\n            }\n            else if (accessor.compositionType.getNumberOfComponents() === 3) {\n                const vec = accessor.getVec3(j, {});\n                this.setVec4(i, vec.x, vec.y, vec.z, 0, {});\n            }\n            else if (accessor.compositionType.getNumberOfComponents() === 4) {\n                const vec = accessor.getVec4(j, {});\n                this.setVec4AsVector(i, vec, {});\n            }\n        }\n    }\n    addElementFromSameCompositionAccessor(i, accessor, coeff, secondIdx) {\n        const j = (secondIdx != null) ? secondIdx : i;\n        if (this.compositionType.getNumberOfComponents() === 1) {\n            this.setScalar(i, this.getScalar(i, {}) + coeff * accessor.getScalar(j, {}), {});\n        }\n        else if (this.compositionType.getNumberOfComponents() === 2) {\n            this.setVec2AsVector(i, _math_Vector2__WEBPACK_IMPORTED_MODULE_3__[\"default\"].add(this.getVec2(i, {}), _math_Vector2__WEBPACK_IMPORTED_MODULE_3__[\"default\"].multiply(accessor.getVec2(j, {}), coeff)), {});\n        }\n        else if (this.compositionType.getNumberOfComponents() === 3) {\n            this.setVec3AsVector(i, _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].add(this.getVec3(i, {}), _math_Vector3__WEBPACK_IMPORTED_MODULE_4__[\"default\"].multiply(accessor.getVec3(j, {}), coeff)), {});\n        }\n        else if (this.compositionType.getNumberOfComponents() === 4) {\n            this.setVec4AsVector(i, _math_Vector4__WEBPACK_IMPORTED_MODULE_5__[\"default\"].add(this.getVec4(i, {}), _math_Vector4__WEBPACK_IMPORTED_MODULE_5__[\"default\"].multiply(accessor.getVec4(j, {}), coeff)), {});\n        }\n    }\n    get arrayBufferOfBufferView() {\n        return this.__raw;\n    }\n    get dataViewOfBufferView() {\n        return this.__dataView;\n    }\n    get byteOffsetInBufferView() {\n        return this.__byteOffsetInRawArrayBufferOfBuffer - this.__bufferView.byteOffsetInRawArrayBufferOfBuffer;\n    }\n    get byteOffsetInBuffer() {\n        return this.__byteOffsetInRawArrayBufferOfBuffer - this.__bufferView.buffer.byteOffsetInRawArrayBuffer;\n    }\n    get byteOffsetInRawArrayBufferOfBuffer() {\n        return this.__byteOffsetInRawArrayBufferOfBuffer;\n    }\n    get bufferView() {\n        return this.__bufferView;\n    }\n    get min() {\n        return this.__min;\n    }\n    get max() {\n        return this.__max;\n    }\n    calcMinMax() {\n        const componentN = this.compositionType.getNumberOfComponents();\n        if (componentN === 4) {\n            const minVec4 = [Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE];\n            const maxVec4 = [-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE];\n            for (let i = 0; i < this.elementCount; i++) {\n                const vec4array = this.getVec4AsArray(i, {});\n                for (let j = 0; j < 4; j++) {\n                    if (vec4array[j] < minVec4[j]) {\n                        minVec4[j] = vec4array[j];\n                    }\n                    if (maxVec4[j] < vec4array[j]) {\n                        maxVec4[j] = vec4array[j];\n                    }\n                }\n            }\n            this.__min = minVec4;\n            this.__max = maxVec4;\n        }\n        else if (componentN === 3) {\n            const minVec3 = [Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE];\n            const maxVec3 = [-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE];\n            for (let i = 0; i < this.elementCount; i++) {\n                const vec3array = this.getVec3AsArray(i, {});\n                for (let j = 0; j < 3; j++) {\n                    if (vec3array[j] < minVec3[j]) {\n                        minVec3[j] = vec3array[j];\n                    }\n                    if (maxVec3[j] < vec3array[j]) {\n                        maxVec3[j] = vec3array[j];\n                    }\n                }\n            }\n            this.__min = minVec3;\n            this.__max = maxVec3;\n        }\n        else if (componentN === 2) {\n            const minVec2 = [Number.MAX_VALUE, Number.MAX_VALUE];\n            const maxVec2 = [-Number.MAX_VALUE, -Number.MAX_VALUE];\n            for (let i = 0; i < this.elementCount; i++) {\n                const vec2array = this.getVec2AsArray(i, {});\n                for (let j = 0; j < 2; j++) {\n                    if (vec2array[j] < minVec2[j]) {\n                        minVec2[j] = vec2array[j];\n                    }\n                    if (maxVec2[j] < vec2array[j]) {\n                        maxVec2[j] = vec2array[j];\n                    }\n                }\n            }\n            this.__min = minVec2;\n            this.__max = maxVec2;\n        }\n        else if (componentN === 1) {\n            let min = Number.MAX_VALUE;\n            let max = -Number.MAX_VALUE;\n            for (let i = 0; i < this.elementCount; i++) {\n                const scalar = this.getScalar(i, {});\n                if (scalar < min) {\n                    min = scalar;\n                }\n                if (max < scalar) {\n                    max = scalar;\n                }\n            }\n            this.__min = min;\n            this.__max = max;\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/memory/AccessorBase.ts?");

/***/ }),

/***/ "./src/foundation/memory/Buffer.ts":
/*!*****************************************!*\
  !*** ./src/foundation/memory/Buffer.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Buffer; });\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _BufferView__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BufferView */ \"./src/foundation/memory/BufferView.ts\");\n\n\nclass Buffer extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor({ byteLength, buffer, name }) {\n        super();\n        this.__byteLength = 0;\n        this.__byteOffset = 0;\n        this.__name = '';\n        this.__takenBytesIndex = 0;\n        this.__bufferViews = [];\n        this.__name = name;\n        this.__byteLength = byteLength;\n        if (buffer instanceof Uint8Array) {\n            this.__raw = buffer.buffer;\n            this.__byteOffset = buffer.byteOffset;\n            this.__takenBytesIndex = buffer.byteOffset;\n        }\n        else {\n            this.__raw = buffer;\n        }\n    }\n    set name(str) {\n        this.__name = str;\n    }\n    get name() {\n        return this.__name;\n    }\n    getArrayBuffer() {\n        return this.__raw;\n    }\n    takeBufferView({ byteLengthToNeed, byteStride, isAoS, byteAlign = 4 }) {\n        if (byteLengthToNeed % byteAlign !== 0) {\n            console.info(`Padding bytes added because byteLengthToNeed must be a multiple of ${byteAlign}.`);\n            byteLengthToNeed += byteAlign - (byteLengthToNeed % byteAlign);\n        }\n        // if (byteStride % 4 !== 0) {\n        //   console.info('Padding bytes added, byteStride must be a multiple of 4.');\n        //   byteStride += 4 - (byteStride % 4);\n        // }\n        const bufferView = new _BufferView__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({ buffer: this, byteOffset: this.__takenBytesIndex, byteLength: byteLengthToNeed, raw: this.__raw, isAoS: isAoS });\n        bufferView.byteStride = byteStride;\n        this.__takenBytesIndex += Uint8Array.BYTES_PER_ELEMENT * byteLengthToNeed;\n        this.__bufferViews.push(bufferView);\n        return bufferView;\n    }\n    takeBufferViewWithByteOffset({ byteLengthToNeed, byteStride, byteOffset, isAoS }) {\n        // if (byteLengthToNeed % 4 !== 0) {\n        //   console.info('Padding bytes added because byteLengthToNeed must be a multiple of 4.');\n        //   byteLengthToNeed += 4 - (byteLengthToNeed % 4);\n        // }\n        // if (byteStride % 4 !== 0) {\n        //   console.info('Padding bytes added, byteStride must be a multiple of 4.');\n        //   byteStride += 4 - (byteStride % 4);\n        // }\n        const bufferView = new _BufferView__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({ buffer: this, byteOffset: byteOffset + this.__byteOffset, byteLength: byteLengthToNeed, raw: this.__raw, isAoS: isAoS });\n        const takenBytesIndex = Uint8Array.BYTES_PER_ELEMENT * byteLengthToNeed + byteOffset + this.__byteOffset;\n        if (this.__takenBytesIndex < takenBytesIndex) {\n            this.__takenBytesIndex = takenBytesIndex;\n        }\n        bufferView.byteStride = byteStride;\n        this.__bufferViews.push(bufferView);\n        return bufferView;\n    }\n    _addTakenByteIndex(value) {\n        this.__takenBytesIndex += value;\n    }\n    get byteLength() {\n        return this.__byteLength;\n    }\n    get takenSizeInByte() {\n        return this.__takenBytesIndex;\n    }\n    get byteOffsetInRawArrayBuffer() {\n        return this.__byteOffset;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/memory/Buffer.ts?");

/***/ }),

/***/ "./src/foundation/memory/BufferView.ts":
/*!*********************************************!*\
  !*** ./src/foundation/memory/BufferView.ts ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return BufferView; });\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _Accessor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Accessor */ \"./src/foundation/memory/Accessor.ts\");\n/* harmony import */ var _FlexibleAccessor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FlexibleAccessor */ \"./src/foundation/memory/FlexibleAccessor.ts\");\n\n\n\nclass BufferView extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor({ buffer, byteOffset, byteLength, raw, isAoS }) {\n        super();\n        this.__byteStride = 0;\n        this.__target = 0;\n        this.__takenByteIndex = 0;\n        this.__takenByteOffsetOfFirstElement = 0;\n        this.__accessors = [];\n        this.__buffer = buffer;\n        this.__byteOffsetInRawArrayBufferOfBuffer = byteOffset;\n        this.__byteLength = byteLength;\n        this.__raw = raw;\n        this.__isAoS = isAoS;\n    }\n    set byteStride(stride) {\n        this.__byteStride = stride;\n    }\n    get byteStride() {\n        return this.__byteStride;\n    }\n    get byteLength() {\n        return this.__byteLength;\n    }\n    /**\n     * byteOffset in Buffer (includes byteOffset of Buffer in it's inner arraybuffer)\n     */\n    get byteOffsetInBuffer() {\n        return this.__byteOffsetInRawArrayBufferOfBuffer - this.__buffer.byteOffsetInRawArrayBuffer;\n    }\n    /**\n     * byteOffset in Buffer (includes byteOffset of Buffer in it's inner arraybuffer)\n     */\n    get byteOffsetInRawArrayBufferOfBuffer() {\n        return this.__byteOffsetInRawArrayBufferOfBuffer;\n    }\n    get buffer() {\n        return this.__buffer;\n    }\n    get isSoA() {\n        return !this.__isAoS;\n    }\n    recheckIsSoA() {\n        if (this.__accessors.length <= 1) {\n            return true;\n        }\n        let firstStrideBytes = this.__accessors[0].byteStride;\n        let secondStrideBytes = this.__accessors[1].byteStride;\n        let firstElementSizeInBytes = this.__accessors[0].elementSizeInBytes;\n        let secondElementSizeInBytes = this.__accessors[1].elementSizeInBytes;\n        if (firstStrideBytes === secondStrideBytes &&\n            (firstElementSizeInBytes + secondElementSizeInBytes) < firstElementSizeInBytes) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    get isAoS() {\n        return this.__isAoS;\n    }\n    getUint8Array() {\n        return new Uint8Array(this.__raw, this.__byteOffsetInRawArrayBufferOfBuffer, this.__byteLength);\n    }\n    takeAccessor({ compositionType, componentType, count, max, min, byteAlign = 4, arrayLength }) {\n        const byteStride = this.byteStride;\n        const _arrayLength = (arrayLength != null) ? arrayLength : 1;\n        const accessor = this.__takeAccessorInner({ compositionType, componentType, count, byteStride, accessorClass: _Accessor__WEBPACK_IMPORTED_MODULE_1__[\"default\"], max: max, min: min, byteAlign, arrayLength: _arrayLength });\n        return accessor;\n    }\n    takeFlexibleAccessor({ compositionType, componentType, count, byteStride, max, min, byteAlign = 4, arrayLength }) {\n        const _arrayLength = (arrayLength != null) ? arrayLength : 1;\n        const accessor = this.__takeAccessorInner({ compositionType, componentType, count, byteStride, accessorClass: _FlexibleAccessor__WEBPACK_IMPORTED_MODULE_2__[\"default\"], max: max, min: min, byteAlign, arrayLength: _arrayLength });\n        return accessor;\n    }\n    takeAccessorWithByteOffset({ compositionType, componentType, count, byteOffset, max, min }) {\n        const byteStride = this.byteStride;\n        const accessor = this.__takeAccessorInnerWithByteOffset({ compositionType, componentType, count, byteStride, byteOffset, accessorClass: _Accessor__WEBPACK_IMPORTED_MODULE_1__[\"default\"], max, min });\n        return accessor;\n    }\n    takeFlexibleAccessorWithByteOffset({ compositionType, componentType, count, byteStride, byteOffset, max, min }) {\n        const accessor = this.__takeAccessorInnerWithByteOffset({ compositionType, componentType, count, byteStride, byteOffset, accessorClass: _FlexibleAccessor__WEBPACK_IMPORTED_MODULE_2__[\"default\"], max, min });\n        return accessor;\n    }\n    __takeAccessorInner({ compositionType, componentType, count, byteStride, accessorClass, max, min, byteAlign, arrayLength }) {\n        let byteOffset = 0;\n        if (this.isSoA) {\n            byteOffset = this.__takenByteIndex;\n            if (byteStride === 0) {\n                this.__takenByteIndex += compositionType.getNumberOfComponents() * componentType.getSizeInBytes() * arrayLength * count;\n            }\n            else {\n                this.__takenByteIndex += byteStride * count;\n            }\n        }\n        else {\n            byteOffset = this.__takenByteIndex;\n            // if (byteStride === 0) {\n            this.__takenByteIndex += compositionType.getNumberOfComponents() * componentType.getSizeInBytes() * arrayLength;\n            // } else {\n            //   this.__takenByteIndex += byteStride;\n            // }\n        }\n        if (byteOffset % byteAlign !== 0) {\n            console.info(`Padding bytes added because byteOffset is not ${byteAlign}byte aligned.`);\n            const paddingBytes = byteAlign - byteOffset % byteAlign;\n            byteOffset += paddingBytes;\n            this.__takenByteIndex += paddingBytes;\n        }\n        // if (this.__byteOffset % byteAlign !== 0) {\n        //   console.info(`Padding bytes added because byteOffsetFromBuffer is not ${byteAlign}byte aligned.`);\n        //   const paddingBytes = byteAlign - this.__byteOffset % byteAlign;\n        //   // this.__byteOffset += paddingBytes;\n        //   this.__takenByteIndex += paddingBytes;\n        //   // this.buffer._addTakenByteIndex(paddingBytes);\n        // }\n        const accessor = new accessorClass({\n            bufferView: this, byteOffset: byteOffset, compositionType: compositionType, componentType: componentType, byteStride: byteStride, count: count, raw: this.__raw, max: max, min: min, arrayLength\n        });\n        this.__accessors.push(accessor);\n        return accessor;\n    }\n    __takeAccessorInnerWithByteOffset({ compositionType, componentType, count, byteStride, byteOffset, accessorClass, max, min }) {\n        // if (byteOffset % 4 !== 0) {\n        //   console.info('Padding bytes added because byteOffset is not 4byte aligned.');\n        //   byteOffset += 4 - byteOffset % 4;\n        // }\n        // if (this.__byteOffset % 4 !== 0) {\n        //   console.info('Padding bytes added because byteOffsetFromBuffer is not 4byte aligned.');\n        //   this.__byteOffset += 4 - this.__byteOffset % 4;\n        // this.buffer._addTakenByteIndex(4 - this.__byteOffset % 4);\n        // }\n        const accessor = new accessorClass({\n            bufferView: this, byteOffset: byteOffset, compositionType: compositionType, componentType: componentType, byteStride: byteStride, count: count, raw: this.__raw, max: max, min: min, arrayLength: 1\n        });\n        this.__accessors.push(accessor);\n        return accessor;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/memory/BufferView.ts?");

/***/ }),

/***/ "./src/foundation/memory/FlexibleAccessor.ts":
/*!***************************************************!*\
  !*** ./src/foundation/memory/FlexibleAccessor.ts ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return FlexibleAccessor; });\n/* harmony import */ var _AccessorBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AccessorBase */ \"./src/foundation/memory/AccessorBase.ts\");\n\nclass FlexibleAccessor extends _AccessorBase__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor({ bufferView, byteOffset, compositionType, componentType, byteStride, count, raw, arrayLength }) {\n        super({ bufferView, byteOffset, compositionType, componentType, byteStride, count, raw, arrayLength });\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/memory/FlexibleAccessor.ts?");

/***/ }),

/***/ "./src/foundation/misc/DataUtil.ts":
/*!*****************************************!*\
  !*** ./src/foundation/misc/DataUtil.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(process, Buffer) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return DataUtil; });\nclass DataUtil {\n    static isNode() {\n        let isNode = (window === void 0 && typeof process !== \"undefined\" && \"function\" !== \"undefined\");\n        return isNode;\n    }\n    static btoa(str) {\n        let isNode = DataUtil.isNode();\n        if (isNode) {\n            let buffer;\n            if (Buffer.isBuffer(str)) {\n                buffer = str;\n            }\n            else {\n                buffer = new Buffer(str.toString(), 'binary');\n            }\n            return buffer.toString('base64');\n        }\n        else {\n            return btoa(str);\n        }\n    }\n    static atob(str) {\n        let isNode = DataUtil.isNode();\n        if (isNode) {\n            return new Buffer(str, 'base64').toString('binary');\n        }\n        else {\n            return atob(str);\n        }\n    }\n    static dataUriToArrayBuffer(dataUri) {\n        let splittedDataUri = dataUri.split(',');\n        // let type = splittedDataUri[0].split(':')[1].split(';')[0];\n        let byteString = DataUtil.atob(splittedDataUri[1]);\n        let byteStringLength = byteString.length;\n        let arrayBuffer = new ArrayBuffer(byteStringLength);\n        let uint8Array = new Uint8Array(arrayBuffer);\n        for (let i = 0; i < byteStringLength; i++) {\n            uint8Array[i] = byteString.charCodeAt(i);\n        }\n        return arrayBuffer;\n    }\n    static arrayBufferToString(arrayBuffer) {\n        if (typeof TextDecoder !== 'undefined') {\n            const textDecoder = new TextDecoder();\n            return textDecoder.decode(arrayBuffer);\n        }\n        else {\n            const bytes = new Uint8Array(arrayBuffer);\n            const result = this.uint8ArrayToStringInner(bytes);\n            return result;\n        }\n    }\n    static uint8ArrayToString(uint8Array) {\n        if (typeof TextDecoder !== 'undefined') {\n            const textDecoder = new TextDecoder();\n            return textDecoder.decode(uint8Array);\n        }\n        else {\n            const result = this.uint8ArrayToStringInner(uint8Array);\n            return result;\n        }\n    }\n    static stringToBase64(str) {\n        let b64 = null;\n        b64 = DataUtil.btoa(str);\n        return b64;\n    }\n    static base64ToArrayBuffer(base64) {\n        var binary_string = window.atob(base64);\n        var len = binary_string.length;\n        var bytes = new Uint8Array(len);\n        for (var i = 0; i < len; i++) {\n            bytes[i] = binary_string.charCodeAt(i);\n        }\n        return bytes.buffer;\n    }\n    static UInt8ArrayToDataURL(uint8array, width, height) {\n        let canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        let ctx = canvas.getContext(\"2d\");\n        let imageData = ctx.createImageData(width, height);\n        for (let i = 0; i < imageData.data.length; i += 4) {\n            imageData.data[i + 0] = uint8array[(height - Math.floor(i / (4 * width))) * (4 * width) + i % (4 * width) + 0];\n            imageData.data[i + 1] = uint8array[(height - Math.floor(i / (4 * width))) * (4 * width) + i % (4 * width) + 1];\n            imageData.data[i + 2] = uint8array[(height - Math.floor(i / (4 * width))) * (4 * width) + i % (4 * width) + 2];\n            imageData.data[i + 3] = uint8array[(height - Math.floor(i / (4 * width))) * (4 * width) + i % (4 * width) + 3];\n        }\n        ctx.putImageData(imageData, 0, 0);\n        canvas.remove();\n        return canvas.toDataURL(\"image/png\");\n    }\n    static loadResourceAsync(resourceUri, isBinary, resolveCallback, rejectCallback) {\n        return new Promise((resolve, reject) => {\n            let isNode = DataUtil.isNode();\n            if (isNode) {\n                // let fs = require('fs');\n                // let args: any[] = [resourceUri];\n                // let func: Function = (err:any, response: any) => {\n                //   if (err) {\n                //     if (rejectCallback) {\n                //       rejectCallback(reject, err);\n                //     }\n                //     return;\n                //   }\n                //   if (isBinary) {\n                //     let buffer = new Buffer(response, 'binary');\n                //     let uint8Buffer = new Uint8Array(buffer);\n                //     response = uint8Buffer.buffer;\n                //   }\n                //   resolveCallback(resolve, response);\n                // };\n                // if (isBinary) {\n                //   args.push(func);\n                // } else {\n                //   args.push('utf8');\n                //   args.push(func);\n                // }\n                // fs.readFile.apply(fs, args);\n            }\n            else {\n                let xmlHttp = new XMLHttpRequest();\n                if (isBinary) {\n                    xmlHttp.onload = (oEvent) => {\n                        let response = null;\n                        if (isBinary) {\n                            response = xmlHttp.response;\n                        }\n                        else {\n                            response = xmlHttp.responseText;\n                        }\n                        resolveCallback(resolve, response);\n                    };\n                    xmlHttp.open(\"GET\", resourceUri, true);\n                    xmlHttp.responseType = \"arraybuffer\";\n                }\n                else {\n                    xmlHttp.onreadystatechange = () => {\n                        if (xmlHttp.readyState === 4 && (Math.floor(xmlHttp.status / 100) === 2 || xmlHttp.status === 0)) {\n                            let response = null;\n                            if (isBinary) {\n                                response = xmlHttp.response;\n                            }\n                            else {\n                                response = xmlHttp.responseText;\n                            }\n                            resolveCallback(resolve, response);\n                        }\n                        else {\n                            if (rejectCallback) {\n                                rejectCallback(reject, xmlHttp.status);\n                            }\n                        }\n                    };\n                    xmlHttp.open(\"GET\", resourceUri, true);\n                }\n                xmlHttp.send(null);\n            }\n        });\n    }\n    static toCRC32(str) {\n        var crc = 0, x = 0, y = 0;\n        var table = DataUtil.crc32table;\n        crc = crc ^ (-1);\n        for (var i = 0, iTop = str.length; i < iTop; ++i) {\n            y = (crc ^ str.charCodeAt(i)) & 0xff;\n            x = \"0x\" + table[y];\n            crc = (crc >>> 8) ^ x;\n        }\n        return (crc ^ (-1)) >>> 0;\n    }\n    static accessBinaryAsImage(bufferViewIndex, json, buffer, mimeType) {\n        const uint8BufferView = this.takeBufferViewAsUint8Array(json, bufferViewIndex, buffer);\n        return this.accessArrayBufferAsImage(uint8BufferView, mimeType);\n    }\n    static createBlobImageUriFromUint8Array(uint8Array, mimeType) {\n        const blob = new Blob([uint8Array], { type: mimeType });\n        const imageUrl = URL.createObjectURL(blob);\n        return imageUrl;\n    }\n    static takeBufferViewAsUint8Array(json, bufferViewIndex, buffer) {\n        const bufferViewJson = json.bufferViews[bufferViewIndex];\n        let byteOffset = (bufferViewJson.byteOffset != null) ? bufferViewJson.byteOffset : 0;\n        const byteLength = bufferViewJson.byteLength;\n        let arrayBuffer = buffer;\n        if (buffer instanceof Uint8Array) {\n            arrayBuffer = buffer.buffer;\n            byteOffset += buffer.byteOffset;\n        }\n        const uint8BufferView = new Uint8Array(arrayBuffer, byteOffset, byteLength);\n        return uint8BufferView;\n    }\n    static accessArrayBufferAsImage(arrayBuffer, imageType) {\n        const binaryData = this.uint8ArrayToStringInner(new Uint8Array(arrayBuffer));\n        const imgSrc = this.getImageType(imageType);\n        const dataUrl = imgSrc + DataUtil.btoa(binaryData);\n        return dataUrl;\n    }\n    static uint8ArrayToStringInner(uint8) {\n        const charCodeArray = new Array(uint8.byteLength);\n        for (let i = 0; i < uint8.byteLength; i++) {\n            charCodeArray[i] = uint8[i];\n        }\n        // the argument of String.fromCharCode has the limit of array length\n        const constant = 1024;\n        const divisionNumber = Math.ceil(charCodeArray.length / constant);\n        let binaryData = '';\n        for (let i = 0; i < divisionNumber; i++) {\n            binaryData += String.fromCharCode.apply(this, charCodeArray.slice(i * constant, (i + 1) * constant));\n        }\n        return binaryData;\n    }\n    static getImageType(imageType) {\n        let imgSrc = null;\n        if (imageType === 'image/jpeg' || imageType.toLowerCase() === 'jpg' || imageType.toLowerCase() === 'jpeg') {\n            imgSrc = \"data:image/jpeg;base64,\";\n        }\n        else if (imageType == 'image/png' || imageType.toLowerCase() === 'png') {\n            imgSrc = \"data:image/png;base64,\";\n        }\n        else if (imageType == 'image/gif' || imageType.toLowerCase() === 'gif') {\n            imgSrc = \"data:image/gif;base64,\";\n        }\n        else if (imageType == 'image/bmp' || imageType.toLowerCase() === 'bmp') {\n            imgSrc = \"data:image/bmp;base64,\";\n        }\n        else {\n            imgSrc = \"data:image/unknown;base64,\";\n        }\n        return imgSrc;\n    }\n    static getMimeTypeFromExtension(extension) {\n        let imgSrc = null;\n        if (extension.toLowerCase() === 'jpg' || extension.toLowerCase() === 'jpeg') {\n            imgSrc = \"image/jpeg\";\n        }\n        else if (extension.toLowerCase() === 'png') {\n            imgSrc = \"image/png\";\n        }\n        else if (extension.toLowerCase() === 'gif') {\n            imgSrc = \"image/gif\";\n        }\n        else if (extension.toLowerCase() === 'bmp') {\n            imgSrc = \"image/bmp\";\n        }\n        else {\n            imgSrc = \"image/unknown\";\n        }\n        return imgSrc;\n    }\n    static getExtension(fileName) {\n        const splitted = fileName.split('.');\n        const fileExtension = splitted[splitted.length - 1];\n        return fileExtension;\n    }\n    static createUint8ArrayFromBufferViewInfo(json, bufferViewIndex, buffer) {\n        const bufferViewJson = json.bufferViews[bufferViewIndex];\n        let byteOffset = (bufferViewJson.byteOffset != null) ? bufferViewJson.byteOffset : 0;\n        const byteLength = bufferViewJson.byteLength;\n        let arrayBuffer = buffer;\n        if (buffer instanceof Uint8Array) {\n            arrayBuffer = buffer.buffer;\n            byteOffset += buffer.byteOffset;\n        }\n        const uint8BufferView = new Uint8Array(arrayBuffer, byteOffset, byteLength);\n        return uint8BufferView;\n    }\n    static createImageFromUri(uri, mimeType) {\n        return new Promise(function (resolve) {\n            const img = new Image();\n            img.crossOrigin = 'Anonymous';\n            if (uri.match(/^blob:/) || uri.match(/^data:/)) {\n                img.onload = () => {\n                    resolve(img);\n                };\n                img.src = uri;\n            }\n            else {\n                const load = (img, response) => {\n                    const bytes = new Uint8Array(response);\n                    const imageUri = DataUtil.createBlobImageUriFromUint8Array(bytes, mimeType);\n                    img.onload = () => {\n                        resolve(img);\n                    };\n                    img.src = imageUri;\n                };\n                const loadBinaryImage = () => {\n                    var xhr = new XMLHttpRequest();\n                    xhr.onreadystatechange = (function (_img) {\n                        return function () {\n                            if (xhr.readyState == 4 && xhr.status == 200) {\n                                load(_img, xhr.response);\n                            }\n                        };\n                    })(img);\n                    xhr.open('GET', uri);\n                    xhr.responseType = 'arraybuffer';\n                    xhr.send();\n                };\n                loadBinaryImage();\n            }\n        });\n    }\n}\nDataUtil.crc32table = \"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D\".split(' ');\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/process/browser.js */ \"./node_modules/process/browser.js\"), __webpack_require__(/*! ./../../../node_modules/buffer/index.js */ \"./node_modules/buffer/index.js\").Buffer))\n\n//# sourceURL=webpack:///./src/foundation/misc/DataUtil.ts?");

/***/ }),

/***/ "./src/foundation/misc/EnumIO.ts":
/*!***************************************!*\
  !*** ./src/foundation/misc/EnumIO.ts ***!
  \***************************************/
/*! exports provided: EnumClass, _from, _fromString */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EnumClass\", function() { return EnumClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_from\", function() { return _from; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_fromString\", function() { return _fromString; });\n// This code idea is from https://qiita.com/junkjunctions/items/5a6d8bed8df8eb3acceb\nclass EnumClass {\n    constructor({ index, str, noCheckStrUnique }) {\n        if (EnumClass.__indices.get(this.constructor) == null) {\n            EnumClass.__indices.set(this.constructor, []);\n        }\n        if (EnumClass.__strings.get(this.constructor) == null) {\n            EnumClass.__strings.set(this.constructor, []);\n        }\n        if (EnumClass.__indices.get(this.constructor).indexOf(index) !== -1) {\n            throw new Error('Dont use duplicate index.');\n        }\n        if (noCheckStrUnique !== true) {\n            if (EnumClass.__strings.get(this.constructor).indexOf(str) !== -1) {\n                throw new Error('Dont use duplicate str.');\n            }\n        }\n        this.index = index;\n        this.str = str;\n        EnumClass.__indices.get(this.constructor).push(index);\n        EnumClass.__strings.get(this.constructor).push(str);\n    }\n    toString() {\n        return this.str;\n    }\n    toJSON() {\n        return this.index;\n    }\n}\nEnumClass.__indices = new Map();\nEnumClass.__strings = new Map();\nfunction _from({ typeList, index }) {\n    const match = typeList.find(type => type.index === index);\n    if (!match) {\n        throw new Error(`Invalid index: [${index}]`);\n    }\n    return match;\n}\nfunction _fromString({ typeList, str }) {\n    const match = typeList.find(type => type.str.toLowerCase() === str.toLowerCase());\n    if (!match) {\n        throw new Error(`Invalid str: [${str}]`);\n    }\n    return match;\n}\n\n\n//# sourceURL=webpack:///./src/foundation/misc/EnumIO.ts?");

/***/ }),

/***/ "./src/foundation/misc/IsUtil.ts":
/*!***************************************!*\
  !*** ./src/foundation/misc/IsUtil.ts ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst IsUtil = {\n    not: {},\n    all: {},\n    any: {},\n    _not(fn) {\n        return function () {\n            return !fn.apply(null, [...arguments]);\n        };\n    },\n    _all(fn) {\n        return function () {\n            if (Array.isArray(arguments[0])) {\n                return arguments[0].every(fn);\n            }\n            return [...arguments].every(fn);\n        };\n    },\n    _any(fn) {\n        return function () {\n            if (Array.isArray(arguments[0])) {\n                return arguments[0].some(fn);\n            }\n            return [...arguments].some(fn);\n        };\n    },\n    defined(val) {\n        return val !== void 0;\n    },\n    undefined(val) {\n        return val === void 0;\n    },\n    null(val) {\n        return val === null;\n    },\n    // is NOT null or undefined\n    exist(val) {\n        return val != null;\n    },\n    function(val) {\n        return typeof val === 'function';\n    }\n};\nfor (let fn in IsUtil) {\n    if (IsUtil.hasOwnProperty(fn)) {\n        const interfaces = ['not', 'all', 'any'];\n        if (fn.indexOf('_') === -1 && !interfaces.includes(fn)) {\n            interfaces.forEach((itf) => {\n                const op = '_' + itf;\n                IsUtil[itf][fn] = IsUtil[op](IsUtil[fn]);\n            });\n        }\n    }\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (IsUtil);\n\n\n//# sourceURL=webpack:///./src/foundation/misc/IsUtil.ts?");

/***/ }),

/***/ "./src/foundation/misc/MiscUtil.ts":
/*!*****************************************!*\
  !*** ./src/foundation/misc/MiscUtil.ts ***!
  \*****************************************/
/*! exports provided: MiscUtil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(process) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MiscUtil\", function() { return MiscUtil; });\nconst isMobile = function () {\n    const ua = [\n        'iPod',\n        'iPad',\n        'iPhone',\n        'Android'\n    ];\n    for (var i = 0; i < ua.length; i++) {\n        if (navigator.userAgent.indexOf(ua[i]) > 0) {\n            return true;\n        }\n    }\n    return false;\n};\nconst preventDefaultForDesktopOnly = function (e) {\n    if (!isMobile()) {\n        e.preventDefault();\n    }\n};\nconst isObject = function (o) {\n    return (o instanceof Object && !(o instanceof Array)) ? true : false;\n};\n// https://stackoverflow.com/questions/30003353/can-es6-template-literals-be-substituted-at-runtime-or-reused\nconst fillTemplate = function (templateString, templateVars) {\n    return new Function(\"return `\" + templateString + \"`;\").call(templateVars);\n};\nconst isNode = function () {\n    return (typeof process !== \"undefined\" && \"function\" !== \"undefined\");\n};\nconst concatArrayBuffers = function (segments, sizes, paddingSize) {\n    var sumLength = 0;\n    for (var i = 0; i < sizes.length; ++i) {\n        sumLength += sizes[i];\n    }\n    var whole = new Uint8Array(sumLength + paddingSize);\n    var pos = 0;\n    for (var i = 0; i < segments.length; ++i) {\n        whole.set(new Uint8Array(segments[i], 0, sizes[i]), pos);\n        pos += sizes[i];\n    }\n    return whole.buffer;\n};\nconst MiscUtil = Object.freeze({ isMobile, preventDefaultForDesktopOnly, isObject, fillTemplate, isNode, concatArrayBuffers });\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack:///./src/foundation/misc/MiscUtil.ts?");

/***/ }),

/***/ "./src/foundation/misc/RnPromise.ts":
/*!******************************************!*\
  !*** ./src/foundation/misc/RnPromise.ts ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return RnPromise; });\nclass RnPromise {\n    constructor(arg, callback) {\n        this.name = '';\n        this.__callbackObj = {\n            promiseAllNum: 0,\n            resolvedNum: 0,\n            rejectedNum: 0,\n            pendingNum: 0,\n            processedPromises: []\n        };\n        if (arg instanceof Promise) {\n            this.__promise = arg;\n        }\n        else {\n            this.__promise = new Promise(arg);\n        }\n        this.__callback = callback;\n    }\n    static resolve(arg) {\n        if (arg instanceof Promise) {\n            return new RnPromise(arg);\n        }\n        else if (arg instanceof RnPromise) {\n            return arg;\n        }\n        else if (arg.then != null) {\n            const rnPromise = new RnPromise((resolve, reject) => {\n                resolve(arg);\n            });\n            rnPromise.then = arg.then;\n            return rnPromise;\n        }\n        else {\n            return new RnPromise((resolve, reject) => {\n                resolve(arg);\n            });\n        }\n    }\n    static all(args) {\n        return new RnPromise(Promise.all(args));\n    }\n    static allWithProgressCallback(promises, callback) {\n        const rnPromises = [];\n        const callbackObj = {\n            promiseAllNum: promises.length,\n            resolvedNum: 0,\n            rejectedNum: 0,\n            pendingNum: promises.length,\n            processedPromises: []\n        };\n        for (let promise of promises) {\n            const rnPromise = RnPromise.resolve(promise);\n            rnPromise.__callback = callback;\n            rnPromise.__callbackObj = callbackObj;\n            rnPromises.push(rnPromise);\n        }\n        return new RnPromise(Promise.all(promises));\n    }\n    static race(args) {\n        return new RnPromise(Promise.race(args));\n    }\n    then(onFulfilled, onRejected) {\n        const onFulfilledWrapper = (value) => {\n            if (this.__callbackObj.promiseAllNum !== 0 && this.__callbackObj.processedPromises.indexOf(this) === -1) {\n                this.__callbackObj.pendingNum--;\n                this.__callbackObj.resolvedNum++;\n                this.__callbackObj.processedPromises.push(this);\n            }\n            if (this.__callback) {\n                this.__callback(this.__callbackObj);\n            }\n            if (onFulfilled) {\n                onFulfilled(value);\n            }\n        };\n        return new RnPromise(this.__promise.then(onFulfilledWrapper, onRejected));\n    }\n    catch(onRejected) {\n        return new RnPromise(this.__promise.catch(onRejected));\n    }\n    finally(onFinally) {\n        this.__promise.finally(onFinally);\n    }\n    static reject(e) {\n        return new RnPromise(Promise.reject(e));\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/misc/RnPromise.ts?");

/***/ }),

/***/ "./src/foundation/misc/Time.ts":
/*!*************************************!*\
  !*** ./src/foundation/misc/Time.ts ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Time; });\nclass Time {\n    /**\n     * @private\n     */\n    static _processBegin() {\n        if (Time.__currentProcessBeginTime === 0) {\n            Time.__systemStartTime = performance.now();\n        }\n        Time.__currentProcessBeginTime = performance.now();\n    }\n    /**\n     * @private\n     */\n    static _processEnd() {\n        Time.__lastProcessEndTime = performance.now();\n        Time.__lastTickTimeInterval = Time.__lastProcessEndTime - Time.__currentProcessBeginTime;\n    }\n    static get timeFromSystemStart() {\n        return (Time.__systemStartTime - performance.now() / 1000);\n    }\n    static get lastTickTimeInterval() {\n        return (Time.__lastTickTimeInterval / 1000);\n    }\n}\nTime.__currentProcessBeginTime = 0;\nTime.__lastProcessEndTime = 0;\nTime.__lastTickTimeInterval = 0;\nTime.__systemStartTime = 0;\n\n\n//# sourceURL=webpack:///./src/foundation/misc/Time.ts?");

/***/ }),

/***/ "./src/foundation/physics/SphereCollider.ts":
/*!**************************************************!*\
  !*** ./src/foundation/physics/SphereCollider.ts ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SphereCollider; });\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n\nclass SphereCollider {\n    constructor() {\n        this.position = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].zero();\n        this.radius = 0;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/physics/SphereCollider.ts?");

/***/ }),

/***/ "./src/foundation/physics/VRMColliderGroup.ts":
/*!****************************************************!*\
  !*** ./src/foundation/physics/VRMColliderGroup.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return VRMColliderGroup; });\nclass VRMColliderGroup {\n    constructor() {\n        this.colliders = [];\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/physics/VRMColliderGroup.ts?");

/***/ }),

/***/ "./src/foundation/physics/VRMSpringBoneGroup.ts":
/*!******************************************************!*\
  !*** ./src/foundation/physics/VRMSpringBoneGroup.ts ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return VRMSpringBoneGroup; });\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n\n\nclass VRMSpringBoneGroup extends _core_RnObject__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor() {\n        super();\n        this.stiffnessForce = 0.5;\n        this.gravityPower = 0;\n        this.gravityDir = new _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](0, -1.0, 0);\n        this.dragForce = 0.05;\n        this.hitRadius = 0.02;\n        this.rootBones = [];\n        this.colliderGroupIndices = [];\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/physics/VRMSpringBoneGroup.ts?");

/***/ }),

/***/ "./src/foundation/physics/VRMSpringBonePhysicsStrategy.ts":
/*!****************************************************************!*\
  !*** ./src/foundation/physics/VRMSpringBonePhysicsStrategy.ts ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return VRMSpringBonePhysicsStrategy; });\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n/* harmony import */ var _math_Quaternion__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/Quaternion */ \"./src/foundation/math/Quaternion.ts\");\n/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _misc_Time__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../misc/Time */ \"./src/foundation/misc/Time.ts\");\n\n\n\n\n\nclass VRMSpringBonePhysicsStrategy {\n    constructor() {\n        this.__boneAxis = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].zero();\n        this.__length = 0;\n        this.__currentTail = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].zero();\n        this.__prevTail = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].zero();\n        this.__localDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].zero();\n        this.__localRotation = new _math_Quaternion__WEBPACK_IMPORTED_MODULE_2__[\"default\"](0, 0, 0, 1);\n        this.__initalized = false;\n        this.__localChildPosition = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].zero();\n    }\n    initialize(transform, localChildPosition, center) {\n        this.__transform = transform;\n        const worldChildPosition = transform.getWorldPositionOf(localChildPosition);\n        this.__currentTail = (center != null) ? center.getLocalPositionOf(worldChildPosition) : worldChildPosition;\n        this.__prevTail = this.__currentTail;\n        this.__localRotation = transform.entity.getTransform().quaternion;\n        this.__boneAxis = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(localChildPosition);\n        // this.__boneAxis = Vector3.normalize(Vector3.subtract(this.__currentTail, transform.worldPosition));\n        this.__length = localChildPosition.length();\n        this.__localChildPosition = localChildPosition;\n        this.__initalized = true;\n    }\n    get isInitialized() {\n        return this.__initalized;\n    }\n    get head() {\n        return this.__transform;\n    }\n    get tail() {\n        _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiplyTo(this.__boneAxis, this.__length, VRMSpringBonePhysicsStrategy.__tmp_vec3);\n        this.__transform.worldMatrixInner.multiplyVector3To(VRMSpringBonePhysicsStrategy.__tmp_vec3, VRMSpringBonePhysicsStrategy.__tmp_vec3_2);\n        return VRMSpringBonePhysicsStrategy.__tmp_vec3_2;\n    }\n    get parentRotation() {\n        // return (this.__transform!.parent != null) ? this.__transform!.parent!.entity.getTransform().quaternion : new Quaternion(0, 0, 0, 1);\n        return (this.__transform.parent != null) ? _math_Quaternion__WEBPACK_IMPORTED_MODULE_2__[\"default\"].fromMatrix(this.__transform.parent.worldMatrixInner) : new _math_Quaternion__WEBPACK_IMPORTED_MODULE_2__[\"default\"](0, 0, 0, 1);\n    }\n    static update() {\n        for (let boneGroup of this.__boneGroups) {\n            this.updateInner(boneGroup.rootBones, boneGroup);\n        }\n    }\n    static updateInner(sceneGraphs, boneGroup) {\n        const dragForce = boneGroup.dragForce;\n        const stiffnessForce = boneGroup.stiffnessForce * _misc_Time__WEBPACK_IMPORTED_MODULE_4__[\"default\"].lastTickTimeInterval * 1;\n        const external = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(boneGroup.gravityDir, boneGroup.gravityPower * _misc_Time__WEBPACK_IMPORTED_MODULE_4__[\"default\"].lastTickTimeInterval * 1);\n        let center = void 0;\n        const collisionGroups = VRMSpringBonePhysicsStrategy.getColliderGroups(boneGroup.colliderGroupIndices);\n        for (let sg of sceneGraphs) {\n            const physicsComponent = sg.entity.getPhysics();\n            if (physicsComponent) {\n                const strategy = physicsComponent.strategy;\n                strategy.update(stiffnessForce, dragForce, external, collisionGroups, boneGroup.hitRadius, center);\n                const children = sg.children;\n                if (children) {\n                    this.updateInner(children, boneGroup);\n                }\n            }\n        }\n    }\n    static initialize(sceneGraph) {\n        const children = sceneGraph.children;\n        const physicsComponent = sceneGraph.entity.getPhysics();\n        const vrmSpringBone = physicsComponent.strategy;\n        if (children.length > 0) {\n            const transform = children[0].entity.getTransform();\n            vrmSpringBone.initialize(sceneGraph, \n            //   new Vector3(\n            //   transform.translate.x * transform.scale.x,\n            //   transform.translate.y * transform.scale.y,\n            //   transform.translate.z * transform.scale.z\n            // ),\n            _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"].invert(sceneGraph.worldMatrixInner).multiplyVector3(children[0].worldPosition), void 0);\n        }\n        else {\n            const delta = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(sceneGraph.worldPosition, sceneGraph.parent.worldPosition);\n            let childPosition = new _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](1, 1, 1);\n            if (delta.lengthSquared() > 0) {\n                childPosition = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(sceneGraph.worldPosition, _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(delta), 0.07));\n            }\n            vrmSpringBone.initialize(sceneGraph, _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"].invert(sceneGraph.worldMatrixInner).multiplyVector3(childPosition), void 0);\n        }\n    }\n    calcParentDeltaRecursivle(sceneGraph) {\n        const delta = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(sceneGraph.worldPosition, sceneGraph.parent.worldPosition);\n    }\n    update(stiffnessForce, dragForce, external, collisionGroups, boneHitRadius, center) {\n        const currentTail = (center != null) ? center.getWorldPositionOf(this.__currentTail) : this.__currentTail;\n        const prevTail = (center != null) ? center.getWorldPositionOf(this.__prevTail) : this.__prevTail;\n        const delta = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].multiply(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(currentTail, prevTail), 1.0 - dragForce);\n        const dist = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply((_math_Quaternion__WEBPACK_IMPORTED_MODULE_2__[\"default\"].multiply(this.parentRotation, this.__localRotation)).multiplyVector3(this.__boneAxis), stiffnessForce);\n        // const dist = Vector3.multiply((this.__localRotation).multiplyVector3(this.__boneAxis), stiffnessForce);\n        // const dist = Vector3.zero();\n        let nextTail = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(currentTail, delta), dist), external);\n        const tmp = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(nextTail, this.__transform.worldPosition);\n        nextTail = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(this.__transform.worldPosition, _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(tmp), this.__length));\n        nextTail = this.collision(collisionGroups, nextTail, boneHitRadius);\n        this.__prevTail = (center != null) ? center.getLocalPositionOf(currentTail) : currentTail;\n        this.__currentTail = (center != null) ? center.getLocalPositionOf(nextTail) : nextTail;\n        const resultRotation = this.applyRotation(nextTail);\n        // this.head.entity.getTransform().quaternion = resultRotation;\n        // this.head.entity.getTransform().translate = this.__transform!.getLocalPositionOf(currentTail);\n        if (this.head.children.length > 0) {\n            // this.head.children[0].entity.getTransform().matrix = Matrix44.identity();\n            this.head.children[0].entity.getTransform().translate = this.__transform.getLocalPositionOf(nextTail);\n            // this.head.children[0].entity.getTransform().translate = new Vector3(1, 0, 0);\n            // this.head.children[0].entity.getTransform().quaternion = resultRotation;\n        }\n        // VRMSpringBonePhysicsStrategy.initialize(this.__transform!);\n    }\n    applyRotation(nextTail) {\n        // const rotation = Quaternion.multiply(this.parentRotation, this.__localRotation);\n        const rotation = this.__localRotation;\n        // const result = Quaternion.multiply(Quaternion.lookFromTo(rotation.multiplyVector3(this.__boneAxis), Vector3.subtract(nextTail, this.__transform!.worldPosition)), rotation);\n        const result = _math_Quaternion__WEBPACK_IMPORTED_MODULE_2__[\"default\"].multiply(_math_Quaternion__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lookFromTo(this.__boneAxis, this.__transform.getLocalPositionOf(nextTail)), rotation);\n        // const result = Quaternion.lookFromTo(this.__boneAxis, Vector3.subtract(nextTail, this.__transform!.worldPosition));\n        // const result = Quaternion.lookFromTo(this.__boneAxis, this.__transform!.getLocalPositionOf(nextTail));\n        // const delta = Vector3.subtract(nextTail, this.__transform!.worldPosition);\n        const boneAxis = this.__boneAxis;\n        // const result = Quaternion.lookForward(Vector3.subtract(nextTail, this.__transform!.worldPosition));\n        // const result = Quaternion.multiply(Quaternion.lookFromTo(rotation.multiplyVector3(this.__boneAxis), Vector3.normalize(delta)), this.__localRotation);\n        // const result = new Quaternion(0,0,0,1);\n        return result;\n    }\n    collision(collisionGroups, nextTail, boneHitRadius) {\n        for (let collisionGroup of collisionGroups) {\n            for (let collider of collisionGroup.colliders) {\n                const worldColiderPos = collisionGroup.baseSceneGraph.getWorldPositionOf(collider.position);\n                const r = boneHitRadius + collider.radius;\n                const delta = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(nextTail, worldColiderPos);\n                const deltaScalar = r - delta.length();\n                if (deltaScalar >= 0) {\n                    var normal = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].normalize(delta);\n                    var resilienceVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(worldColiderPos, normal), deltaScalar);\n                    nextTail = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(nextTail, resilienceVec);\n                    return nextTail;\n                }\n            }\n        }\n        return nextTail;\n    }\n    static setBoneGroups(sgs) {\n        this.__boneGroups = sgs;\n    }\n    static addColliderGroup(index, group) {\n        this.__colliderGroups.set(index, group);\n    }\n    static getColliderGroups(indices) {\n        const colliderGroups = [];\n        for (let index of indices) {\n            colliderGroups.push(this.__colliderGroups.get(index));\n        }\n        return colliderGroups;\n    }\n}\nVRMSpringBonePhysicsStrategy.__tmp_vec3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\nVRMSpringBonePhysicsStrategy.__tmp_vec3_2 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__[\"default\"].zero();\nVRMSpringBonePhysicsStrategy.__boneGroups = [];\nVRMSpringBonePhysicsStrategy.__colliderGroups = new Map();\n\n\n//# sourceURL=webpack:///./src/foundation/physics/VRMSpringBonePhysicsStrategy.ts?");

/***/ }),

/***/ "./src/foundation/renderer/CGAPIResourceRepository.ts":
/*!************************************************************!*\
  !*** ./src/foundation/renderer/CGAPIResourceRepository.ts ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CGAPIResourceRepository; });\n/* harmony import */ var _system_ModuleManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system/ModuleManager */ \"./src/foundation/system/ModuleManager.ts\");\n\nclass CGAPIResourceRepository {\n    static getWebGLResourceRepository() {\n        const moduleName = 'webgl';\n        const moduleManager = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        const webglModule = moduleManager.getModule(moduleName);\n        const webGLResourceRepository = webglModule.WebGLResourceRepository.getInstance();\n        return webGLResourceRepository;\n    }\n}\nCGAPIResourceRepository.InvalidCGAPIResourceUid = -1;\n\n\n//# sourceURL=webpack:///./src/foundation/renderer/CGAPIResourceRepository.ts?");

/***/ }),

/***/ "./src/foundation/renderer/Expression.ts":
/*!***********************************************!*\
  !*** ./src/foundation/renderer/Expression.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Expression; });\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n\n/**\n * Expression specifies the order of render passes on rendering process.\n */\nclass Expression extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor() {\n        super();\n        this.__renderPasses = [];\n    }\n    /**\n     * Add render passes to the end of this expression.\n     */\n    addRenderPasses(renderPasses) {\n        for (let renderPass of renderPasses) {\n            this.__renderPasses.push(renderPass);\n        }\n    }\n    /**\n     * Clear render passes of this expression.\n     */\n    clearRenderPasses() {\n        this.__renderPasses.length = 0;\n    }\n    /**\n     * Gets the list of render passes of this expression.\n     */\n    get renderPasses() {\n        return this.__renderPasses;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/renderer/Expression.ts?");

/***/ }),

/***/ "./src/foundation/renderer/FrameBuffer.ts":
/*!************************************************!*\
  !*** ./src/foundation/renderer/FrameBuffer.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return FrameBuffer; });\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _definitions_RenderBufferTarget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/RenderBufferTarget */ \"./src/foundation/definitions/RenderBufferTarget.ts\");\n\n\n\nclass FrameBuffer extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor() {\n        super();\n        this.__colorAttachments = [];\n        this.cgApiResourceUid = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].InvalidCGAPIResourceUid;\n        this.width = 0;\n        this.height = 0;\n        this.__colorAttachmentMap = new Map();\n    }\n    get colorAttachmentsRenderBufferTargets() {\n        return Array.from(this.__colorAttachmentMap.keys());\n    }\n    get colorAttachments() {\n        return this.__colorAttachments;\n    }\n    get depthAttachment() {\n        return this.__depthAttachment;\n    }\n    get stencilAttachement() {\n        return this.__stencilAttachment;\n    }\n    get depthStancilAttachment() {\n        return this.__depthStencilAttachment;\n    }\n    create(width, height) {\n        this.width = width;\n        this.height = height;\n        const webGLResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        this.cgApiResourceUid = webGLResourceRepository.createFrameBufferObject();\n        return this.cgApiResourceUid;\n    }\n    get framebufferUID() {\n        return this.cgApiResourceUid;\n    }\n    setColorAttachmentAt(index, renderable) {\n        if (renderable.width !== this.width || renderable.height !== this.height) {\n            return false;\n        }\n        this.__colorAttachments[index] = renderable;\n        const webglResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        webglResourceRepository.attachColorBufferToFrameBufferObject(this, index, renderable);\n        this.__colorAttachmentMap.set(_definitions_RenderBufferTarget__WEBPACK_IMPORTED_MODULE_2__[\"RenderBufferTarget\"].from(index), renderable);\n        return true;\n    }\n    setDepthAttachment(renderable) {\n        if (renderable.width !== this.width || renderable.height !== this.height) {\n            return false;\n        }\n        this.__depthAttachment = renderable;\n        const webglResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        webglResourceRepository.attachDepthBufferToFrameBufferObject(this, renderable);\n        return true;\n    }\n    setStencilAttachment(renderable) {\n        if (renderable.width !== this.width || renderable.height !== this.height) {\n            return false;\n        }\n        this.__stencilAttachment = renderable;\n        const webglResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        webglResourceRepository.attachStencilBufferToFrameBufferObject(this, renderable);\n        return true;\n    }\n    setDepthStencilAttachment(renderable) {\n        if (renderable.width !== this.width || renderable.height !== this.height) {\n            return false;\n        }\n        this.__depthStencilAttachment = renderable;\n        const webglResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        webglResourceRepository.attachDepthStencilBufferToFrameBufferObject(this, renderable);\n        return true;\n    }\n    destroy3DAPIResources() {\n        const webGLResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        webGLResourceRepository.deleteFrameBufferObject(this.cgApiResourceUid);\n        if (this.depthAttachment) {\n            this.depthAttachment.destroy3DAPIResources();\n        }\n        if (this.depthStancilAttachment) {\n            this.depthStancilAttachment.destroy3DAPIResources();\n        }\n        if (this.stencilAttachement) {\n            this.stencilAttachement.destroy3DAPIResources();\n        }\n        for (let colorAttachment of this.colorAttachments) {\n            colorAttachment.destroy3DAPIResources();\n        }\n    }\n    whichColorAttachment(renderable) {\n        return this.__colorAttachments.indexOf(renderable);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/renderer/FrameBuffer.ts?");

/***/ }),

/***/ "./src/foundation/renderer/RenderPass.ts":
/*!***********************************************!*\
  !*** ./src/foundation/renderer/RenderPass.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return RenderPass; });\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _system_System__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../system/System */ \"./src/foundation/system/System.ts\");\n/* harmony import */ var _system_ModuleManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../system/ModuleManager */ \"./src/foundation/system/ModuleManager.ts\");\n\n\n\n\n\n/**\n * A render pass is a collecion of the resources which is used in rendering process.\n */\nclass RenderPass extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor() {\n        super();\n        this.__entities = [];\n        this.__sceneGraphDirectlyAdded = [];\n        this.__topLevelSceneGraphComponents = [];\n        this.toClearColorBuffer = false;\n        this.toClearDepthBuffer = true;\n        this.toClearStencilBuffer = false;\n        this.clearColor = new _math_Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"](1, 1, 1, 1);\n        this.clearDepth = 1;\n        this.clearStencil = 0;\n        this.cullface = false;\n        this.cullFrontFaceCCW = true;\n        this.__primitiveMaterial = new Map();\n    }\n    /**\n     * Add entities to draw.\n     * @param entities An array of entities.\n     */\n    addEntities(entities) {\n        for (let entity of entities) {\n            const sceneGraphComponent = entity.getSceneGraph();\n            this.__sceneGraphDirectlyAdded.push(sceneGraphComponent);\n            const collectedSgComponents = _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].flattenHierarchy(sceneGraphComponent, false);\n            const collectedEntities = collectedSgComponents.map((sg) => { return sg.entity; });\n            // Eliminate duplicates\n            const map = this.__entities.concat(collectedEntities).reduce((map, entity) => {\n                map.set(entity.entityUID, entity);\n                return map;\n            }, new Map());\n            this.__entities = Array.from(map.values());\n        }\n        this.__meshComponents = void 0;\n        this.__topLevelSceneGraphComponents = void 0;\n        this.__collectMeshComponents();\n        this.__collectTopLevelSceneGraphComponents();\n    }\n    /**\n     * Gets the list of entities on this render pass.\n     * @return An array of entities\n     */\n    get entities() {\n        return this.__entities;\n    }\n    /**\n     * Clear entities on this render pass.\n     */\n    clearEntities() {\n        this.__meshComponents = void 0;\n        this.__topLevelSceneGraphComponents = void 0;\n        this.__entities = [];\n    }\n    __collectTopLevelSceneGraphComponents() {\n        if (this.__topLevelSceneGraphComponents == null) {\n            const goToTopLevel = (sg) => {\n                if (sg.parent) {\n                    goToTopLevel(sg.parent);\n                }\n                return sg;\n            };\n            this.__topLevelSceneGraphComponents = this.__sceneGraphDirectlyAdded.map((sg) => {\n                return goToTopLevel(sg);\n            });\n            let set = new Set(this.__topLevelSceneGraphComponents);\n            this.__topLevelSceneGraphComponents = Array.from(set);\n        }\n    }\n    __collectMeshComponents() {\n        if (this.__meshComponents == null) {\n            this.__meshComponents = [];\n            this.__entities.filter((entity) => {\n                const meshComponent = entity.getMesh();\n                if (meshComponent) {\n                    this.__meshComponents.push(meshComponent);\n                }\n            });\n        }\n    }\n    /**\n     * Get all the MeshComponents list of the entities on this render pass.\n     * @return An array of MeshComponents\n     */\n    get meshComponents() {\n        this.__collectMeshComponents();\n        return this.__meshComponents;\n    }\n    /**\n     * Get all the highest level SceneGraphComponents list of the entities on this render pass.\n     * @return An array of SceneGraphComponents\n     */\n    get sceneTopLevelGraphComponents() {\n        this.__collectTopLevelSceneGraphComponents();\n        return this.__topLevelSceneGraphComponents;\n    }\n    /**\n     * Sets the target framebuffer of this render pass.\n     * If two or more render pass share a framebuffer, Rhodonite renders entities in render passes to same framebuffer.\n     * @param framebuffer A framebuffer\n     */\n    setFramebuffer(framebuffer) {\n        this.__frameBuffer = framebuffer;\n        this.setViewport(new _math_Vector4__WEBPACK_IMPORTED_MODULE_2__[\"default\"](0, 0, framebuffer.width, framebuffer.height));\n    }\n    /**\n     * Gets the framebuffer if this render pass has the target framebuffer.\n     * @return A framebuffer\n     */\n    getFramebuffer() {\n        return this.__frameBuffer;\n    }\n    /**\n     * Sets the viewport of this render pass.\n     * @param vec A Vector4 (Origin of coordinatesX, origin of coordinatesY, width, height).\n     */\n    setViewport(vec) {\n        this.__viewport = vec;\n    }\n    /**\n     * Gets the viewport if this render pass has the viewport.\n     * @return A Vector4 (Origin of coordinatesX, origin of coordinatesY, width, height).\n     */\n    getViewport() {\n        return this.__viewport;\n    }\n    __setupMaterial(material, isPointSprite = false) {\n        if (material.isEmptyMaterial())\n            return;\n        if (this.__webglRenderingStrategy == null) {\n            this.__setWebglRenderingStrategy();\n        }\n        this.__webglRenderingStrategy.setupDefaultShaderSemantics(material, isPointSprite);\n    }\n    /**\n     * Sets a material for the primitive on this render pass.\n     * If Rhodonite draw the primitive using this render pass, Rhodonite uses this material instead of the material on the primitive.\n     * @param material A material attaching to the primitive\n     * @param primitive A target primitive\n     * @param isPointSprite Set true, if the primitive is a point sprite\n     */\n    setMaterialForPrimitive(material, primitive, isPointSprite = false) {\n        this.__primitiveMaterial.set(primitive, material);\n        this.__setupMaterial(material, isPointSprite);\n    }\n    /**\n     * Sets a material for all the primitive on this render pass.\n     * For all the primitive, Rhodonite uses this material instead of the material on the primitive.\n     * Where if this render pass has a map between primitive and material by setMaterialForPrimitive, Rhodonite uses the material mapped by primitive.\n     * @param material A material attaching to the primitive\n     * @param isPointSprite Set true, if the primitive is a point sprite\n     */\n    setMaterial(material, isPointSprite = false) {\n        this.__material = material;\n        this.__setupMaterial(material, isPointSprite);\n    }\n    get material() {\n        return this.__material;\n    }\n    __setWebglRenderingStrategy() {\n        const system = _system_System__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInstance();\n        const processApproach = system.processApproach;\n        const moduleManager = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance();\n        const moduleName = 'webgl';\n        const webglModule = moduleManager.getModule(moduleName);\n        this.__webglRenderingStrategy = webglModule.getRenderingStrategy(processApproach);\n    }\n    __getMaterialOf(primitive) {\n        return this.__primitiveMaterial.get(primitive);\n    }\n    __hasMaterialOf(primitive) {\n        return this.__primitiveMaterial.has(primitive);\n    }\n    getAppropriateMaterial(primitive, defaultMaterial) {\n        let material;\n        if (this.__hasMaterialOf(primitive)) {\n            material = this.__getMaterialOf(primitive);\n        }\n        else if (this.material != null) {\n            material = this.material;\n        }\n        else {\n            material = defaultMaterial;\n        }\n        return material;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/renderer/RenderPass.ts?");

/***/ }),

/***/ "./src/foundation/system/ModuleManager.ts":
/*!************************************************!*\
  !*** ./src/foundation/system/ModuleManager.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ModuleManager; });\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass ModuleManager {\n    constructor() {\n        this.__modules = new Map();\n    }\n    loadModule(moduleName) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let module;\n            if (moduleName.toLowerCase() === 'webgl') {\n                module = yield Promise.resolve(/*! import() | webgl */).then(__webpack_require__.bind(null, /*! ../../webgl/main */ \"./src/webgl/main.ts\"));\n            }\n            else if (moduleName.toLowerCase() === 'effekseer') {\n                module = yield Promise.resolve(/*! import() | effekseer */).then(__webpack_require__.bind(null, /*! ../../effekseer/main */ \"./src/effekseer/main.ts\"));\n            }\n            else if (moduleName.toLowerCase() === 'sparkgear') {\n                module = yield Promise.resolve(/*! import() | sparkgear */).then(__webpack_require__.bind(null, /*! ../../sparkgear/main */ \"./src/sparkgear/main.ts\"));\n            }\n            else if (moduleName.toLowerCase() === 'pbr') {\n                module = yield Promise.resolve(/*! import() | pbr */).then(__webpack_require__.bind(null, /*! ../../pbr/main */ \"./src/pbr/main.ts\"));\n            }\n            this.__modules.set(moduleName, module);\n            console.log('Module Loaded:', module);\n            return module.default;\n        });\n    }\n    getModule(moduleName) {\n        return this.__modules.get(moduleName).default;\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new ModuleManager();\n        }\n        return this.__instance;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/system/ModuleManager.ts?");

/***/ }),

/***/ "./src/foundation/system/System.ts":
/*!*****************************************!*\
  !*** ./src/foundation/system/System.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return System; });\n/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/ProcessApproach */ \"./src/foundation/definitions/ProcessApproach.ts\");\n/* harmony import */ var _ModuleManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ModuleManager */ \"./src/foundation/system/ModuleManager.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _renderer_Expression__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../renderer/Expression */ \"./src/foundation/renderer/Expression.ts\");\n/* harmony import */ var _components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/MeshRendererComponent */ \"./src/foundation/components/MeshRendererComponent.ts\");\n/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _components_CameraComponent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../core/GlobalDataRepository */ \"./src/foundation/core/GlobalDataRepository.ts\");\n/* harmony import */ var _components_TransformComponent__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../components/TransformComponent */ \"./src/foundation/components/TransformComponent.ts\");\n/* harmony import */ var _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../components/SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _definitions_CameraType__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../definitions/CameraType */ \"./src/foundation/definitions/CameraType.ts\");\n/* harmony import */ var _misc_Time__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../misc/Time */ \"./src/foundation/misc/Time.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass System {\n    constructor() {\n        this.__processStages = [\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].Create,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].Load,\n            // ProcessStage.Mount,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].Logic,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].PreRender,\n            _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].Render,\n        ];\n        this.__componentRepository = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\n        this.__entityRepository = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getInstance();\n        this.__processApproach = _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__[\"ProcessApproach\"].None;\n        this.__webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getWebGLResourceRepository();\n        this.__localExpression = new _renderer_Expression__WEBPACK_IMPORTED_MODULE_6__[\"default\"]();\n        this.__lastEntitiesNumber = -1;\n        this.__renderPassTickCount = 0;\n    }\n    process(expressions) {\n        if (this.__processApproach === _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__[\"ProcessApproach\"].None) {\n            throw new Error('Choose a process approach first.');\n        }\n        _misc_Time__WEBPACK_IMPORTED_MODULE_16__[\"default\"]._processBegin();\n        if (_components_CameraComponent__WEBPACK_IMPORTED_MODULE_9__[\"default\"].main === _core_Component__WEBPACK_IMPORTED_MODULE_5__[\"default\"].InvalidObjectUID) {\n            const cameraEntity = this.__entityRepository.createEntity([_components_TransformComponent__WEBPACK_IMPORTED_MODULE_12__[\"default\"], _components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_13__[\"default\"], _components_CameraComponent__WEBPACK_IMPORTED_MODULE_9__[\"default\"]]);\n            cameraEntity.getTransform().translate = new _math_Vector3__WEBPACK_IMPORTED_MODULE_14__[\"default\"](0, 0, 1);\n            cameraEntity.getCamera().type = _definitions_CameraType__WEBPACK_IMPORTED_MODULE_15__[\"CameraType\"].Orthographic;\n            cameraEntity.getCamera().zNear = 0.1;\n            cameraEntity.getCamera().zFar = 10000;\n            const wgl = this.__webglResourceRepository.currentWebGLContextWrapper;\n            cameraEntity.getCamera().xMag = wgl.width / wgl.height;\n            cameraEntity.getCamera().yMag = 1;\n        }\n        for (let stage of this.__processStages) {\n            const methodName = stage.methodName;\n            const commonMethodName = 'common_' + methodName;\n            const componentTids = this.__componentRepository.getComponentTIDs();\n            for (let componentTid of componentTids) {\n                for (let exp of expressions) {\n                    let loopN = 1;\n                    if (componentTid === _components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"].componentTID) {\n                        loopN = exp.renderPasses.length;\n                    }\n                    for (let i = 0; i < loopN; i++) {\n                        const renderPass = exp.renderPasses[i];\n                        if (componentTid === _components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"].componentTID && (stage == _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__[\"ProcessStage\"].Render)) {\n                            this.__webglResourceRepository.bindFramebuffer(renderPass.getFramebuffer());\n                            this.__webglResourceRepository.setViewport(renderPass.getViewport());\n                            this.__webglResourceRepository.setDrawTargets(renderPass.getFramebuffer());\n                            this.__webglResourceRepository.clearFrameBuffer(renderPass);\n                        }\n                        const componentClass = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getComponentClass(componentTid);\n                        componentClass.updateComponentsOfEachProcessStage(componentClass, stage, this.__componentRepository, renderPass);\n                        const componentClass_commonMethod = componentClass[commonMethodName];\n                        if (componentClass_commonMethod) {\n                            componentClass_commonMethod({ processApproach: this.__processApproach, renderPass: renderPass, processStage: stage, renderPassTickCount: this.__renderPassTickCount });\n                        }\n                        componentClass.process({\n                            componentType: componentClass,\n                            processStage: stage,\n                            processApproach: this.__processApproach,\n                            componentRepository: this.__componentRepository,\n                            strategy: this.__webglStrategy,\n                            renderPass: renderPass,\n                            renderPassTickCount: this.__renderPassTickCount\n                        });\n                        this.__renderPassTickCount++;\n                    }\n                }\n            }\n        }\n        _misc_Time__WEBPACK_IMPORTED_MODULE_16__[\"default\"]._processEnd();\n    }\n    setProcessApproachAndCanvas(approach, canvas, memoryUsageOrder = 1, webglOption = {}, rnWebGLDebug = true) {\n        const moduleManager = _ModuleManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInstance();\n        const moduleName = 'webgl';\n        const webglModule = moduleManager.getModule(moduleName);\n        this.__webglStrategy = webglModule.getRenderingStrategy(approach);\n        const repo = webglModule.WebGLResourceRepository.getInstance();\n        let gl;\n        if (approach === _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__[\"ProcessApproach\"].DataTextureWebGL2 ||\n            approach === _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__[\"ProcessApproach\"].UBOWebGL2 ||\n            approach === _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__[\"ProcessApproach\"].TransformFeedbackWebGL2 ||\n            approach === _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__[\"ProcessApproach\"].UniformWebGL2) {\n            gl = canvas.getContext('webgl2', webglOption);\n        }\n        else {\n            gl = canvas.getContext('webgl', webglOption) ||\n                canvas.getContext('experimental-webgl', webglOption);\n        }\n        gl.enable(gl.DEPTH_TEST);\n        _core_MemoryManager__WEBPACK_IMPORTED_MODULE_10__[\"default\"].createInstanceIfNotCreated(0.125 * memoryUsageOrder, 0.0625 * memoryUsageOrder, 1.0 * memoryUsageOrder, 0.0 * memoryUsageOrder);\n        const globalDataRepository = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_11__[\"default\"].getInstance();\n        globalDataRepository.initialize();\n        repo.addWebGLContext(gl, canvas, true, rnWebGLDebug);\n        this.__processApproach = approach;\n        return gl;\n    }\n    get processApproach() {\n        return this.__processApproach;\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new System();\n        }\n        return this.__instance;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/system/System.ts?");

/***/ }),

/***/ "./src/foundation/textures/AbstractTexture.ts":
/*!****************************************************!*\
  !*** ./src/foundation/textures/AbstractTexture.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AbstractTexture; });\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n\nclass AbstractTexture extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor() {\n        super();\n        this.__width = 0;\n        this.__height = 0;\n        this.__hasTransparentPixels = false;\n        this.cgApiResourceUid = -1;\n        this.__isTextureReady = false;\n        this.__startedToLoad = false;\n        this.__name = 'untitled';\n        this.__textureUid = ++AbstractTexture.__textureUidCount;\n    }\n    get textureUID() {\n        return this.__textureUid;\n    }\n    get width() {\n        return this.__width;\n    }\n    get height() {\n        return this.__height;\n    }\n    get isTextureReady() {\n        return this.__isTextureReady;\n    }\n    get startedToLoad() {\n        return this.__startedToLoad;\n    }\n    /**\n     * get a value nearest power of two.\n     *\n     * @param x texture size.\n     * @returns a value nearest power of two.\n     */\n    __getNearestPowerOfTwo(x) {\n        return Math.pow(2, Math.round(Math.log(x) / Math.LN2));\n    }\n    get htmlImageElement() {\n        return this.__htmlImageElement;\n    }\n    get htmlCanvasElement() {\n        if (this.__htmlCanvasElement == null) {\n            var canvas = document.createElement(\"canvas\");\n            var ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(this.__htmlImageElement, 0, 0, this.__htmlImageElement.width, this.__htmlImageElement.height);\n            this.__htmlCanvasElement = canvas;\n        }\n        return this.__htmlCanvasElement;\n    }\n    get uri() {\n        return this.__uri;\n    }\n    static getRhodoniteTexture(textureUid) {\n        return this.__textureMap.get(textureUid);\n    }\n    set name(name) {\n        this.__name = name;\n    }\n    get name() {\n        return this.__name;\n    }\n    get isTransparent() {\n        return this.__hasTransparentPixels;\n    }\n}\nAbstractTexture.InvalidTextureUid = -1;\nAbstractTexture.__textureUidCount = AbstractTexture.InvalidTextureUid;\nAbstractTexture.__textureMap = new Map();\n\n\n//# sourceURL=webpack:///./src/foundation/textures/AbstractTexture.ts?");

/***/ }),

/***/ "./src/foundation/textures/CubeTexture.ts":
/*!************************************************!*\
  !*** ./src/foundation/textures/CubeTexture.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CubeTexture; });\n/* harmony import */ var _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractTexture */ \"./src/foundation/textures/AbstractTexture.ts\");\n/* harmony import */ var _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/HdriFormat */ \"./src/foundation/definitions/HdriFormat.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\nclass CubeTexture extends _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor() {\n        super();\n        this.mipmapLevelNumber = 1;\n        this.hdriFormat = _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_1__[\"HdriFormat\"].LDR_SRGB;\n        this.isNamePosNeg = false;\n    }\n    loadTextureImages() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.__startedToLoad = true;\n            const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getWebGLResourceRepository();\n            this.cgApiResourceUid = yield webGLResourceRepository.createCubeTextureFromFiles(this.baseUriToLoad, this.mipmapLevelNumber, this.isNamePosNeg, this.hdriFormat);\n            this.__isTextureReady = true;\n        });\n    }\n    loadTextureImagesAsync() {\n        this.__startedToLoad = true;\n        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getWebGLResourceRepository();\n        webGLResourceRepository.createCubeTextureFromFiles(this.baseUriToLoad, this.mipmapLevelNumber, this.isNamePosNeg, this.hdriFormat).then((cubeTextureUid) => {\n            this.cgApiResourceUid = cubeTextureUid;\n        }).then(() => {\n            this.__isTextureReady = true;\n        });\n    }\n    load1x1Texture(rgbaStr = 'rgba(0,0,0,1)') {\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = 1;\n        canvas.height = 1;\n        const ctx = canvas.getContext('2d');\n        ctx.fillStyle = rgbaStr;\n        ctx.fillRect(0, 0, 1, 1);\n        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getWebGLResourceRepository();\n        this.cgApiResourceUid = webGLResourceRepository.createCubeTexture(1, [{ posX: canvas, negX: canvas, posY: canvas, negY: canvas, posZ: canvas, negZ: canvas }], 1, 1);\n        this.__isTextureReady = true;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/textures/CubeTexture.ts?");

/***/ }),

/***/ "./src/foundation/textures/RenderBuffer.ts":
/*!*************************************************!*\
  !*** ./src/foundation/textures/RenderBuffer.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return RenderBuffer; });\n/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n\n\nclass RenderBuffer extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor() {\n        super();\n        this.width = 0;\n        this.height = 0;\n        this.cgApiResourceUid = -1;\n    }\n    set _fbo(fbo) {\n        this.__fbo = fbo;\n    }\n    get fbo() {\n        return this.__fbo;\n    }\n    create(width, height, internalFormat) {\n        this.width = width;\n        this.height = height;\n        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        this.cgApiResourceUid = webglResourceRepository.createRenderBuffer(width, height, internalFormat);\n    }\n    destroy3DAPIResources() {\n        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getWebGLResourceRepository();\n        webglResourceRepository.deleteRenderBuffer(this.cgApiResourceUid);\n        return true;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/textures/RenderBuffer.ts?");

/***/ }),

/***/ "./src/foundation/textures/RenderTargetTexture.ts":
/*!********************************************************!*\
  !*** ./src/foundation/textures/RenderTargetTexture.ts ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return RenderTargetTexture; });\n/* harmony import */ var _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractTexture */ \"./src/foundation/textures/AbstractTexture.ts\");\n/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/TextureParameter */ \"./src/foundation/definitions/TextureParameter.ts\");\n/* harmony import */ var _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/PixelFormat */ \"./src/foundation/definitions/PixelFormat.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n\n\n\n\n\n\nclass RenderTargetTexture extends _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor() {\n        super();\n    }\n    create({ width, height, level = 0, internalFormat = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__[\"PixelFormat\"].RGBA, format = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__[\"PixelFormat\"].RGBA, type = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].UnsignedByte, magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_1__[\"TextureParameter\"].Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_1__[\"TextureParameter\"].Linear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_1__[\"TextureParameter\"].ClampToEdge, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_1__[\"TextureParameter\"].ClampToEdge }) {\n        this.__width = width;\n        this.__height = height;\n        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getWebGLResourceRepository();\n        const texture = webGLResourceRepository.createRenderTargetTexture({ width, height, level, internalFormat, format, type, magFilter, minFilter, wrapS, wrapT });\n        this.cgApiResourceUid = texture;\n        _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__[\"default\"].__textureMap.set(texture, this);\n    }\n    set _fbo(fbo) {\n        this.__fbo = fbo;\n    }\n    get fbo() {\n        return this.__fbo;\n    }\n    destroy3DAPIResources() {\n        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getWebGLResourceRepository();\n        webGLResourceRepository.deleteTexture(this.cgApiResourceUid);\n        return true;\n    }\n    getTexturePixelData() {\n        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getWebGLResourceRepository();\n        const glw = webGLResourceRepository.currentWebGLContextWrapper;\n        const gl = glw.getRawContext();\n        // Create a framebuffer backed by the texture\n        const fbo = webGLResourceRepository.getWebGLResource(this.__fbo.framebufferUID);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n        // const texture = webGLResourceRepository.getWebGLResource(this.cgApiResourceUid!) as WebGLTexture;\n        // gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n        // Read the contents of the framebuffer (data stores the pixel data)\n        let data = new Uint8Array(this.width * this.height * 4);\n        if (gl.readBuffer != null) {\n            gl.readBuffer(this.__fbo.whichColorAttachment(this));\n        }\n        gl.readPixels(0, 0, this.width, this.height, gl.RGBA, gl.UNSIGNED_BYTE, data);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        return data;\n    }\n    /**\n     * Origin is left bottom\n     *\n     * @param x horizontal pixel position (0 is left)\n     * @param y vertical pixel position (0 is bottom)\n     * @param argByteArray Pixel Data as Uint8Array\n     * @returns Pixel Value in Vector4\n     */\n    getPixelValueAt(x, y, argByteArray) {\n        let byteArray = argByteArray;\n        if (!byteArray) {\n            byteArray = this.getTexturePixelData();\n        }\n        let color = new _math_Vector4__WEBPACK_IMPORTED_MODULE_5__[\"default\"](byteArray[(y * this.width + x) * 4 + 0], byteArray[(y * this.width + x) * 4 + 1], byteArray[(y * this.width + x) * 4 + 2], byteArray[(y * this.width + x) * 4 + 3]);\n        return color;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/textures/RenderTargetTexture.ts?");

/***/ }),

/***/ "./src/foundation/textures/Texture.ts":
/*!********************************************!*\
  !*** ./src/foundation/textures/Texture.ts ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Texture; });\n/* harmony import */ var _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/PixelFormat */ \"./src/foundation/definitions/PixelFormat.ts\");\n/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/TextureParameter */ \"./src/foundation/definitions/TextureParameter.ts\");\n/* harmony import */ var _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AbstractTexture */ \"./src/foundation/textures/AbstractTexture.ts\");\n/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/Config */ \"./src/foundation/core/Config.ts\");\n\n\n\n\n\n\nclass Texture extends _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__[\"default\"] {\n    constructor() {\n        super();\n        this.autoResize = true;\n        this.autoDetectTransparency = false;\n    }\n    __getResizedCanvas(image, maxSize) {\n        var canvas = document.createElement(\"canvas\");\n        const potWidth = this.__getNearestPowerOfTwo(image.width);\n        const potHeight = this.__getNearestPowerOfTwo(image.height);\n        const aspect = potHeight / potWidth;\n        let dstWidth = 0;\n        let dstHeight = 0;\n        if (potWidth > potHeight) {\n            dstWidth = Math.min(potWidth, maxSize);\n            dstHeight = dstWidth * aspect;\n        }\n        else {\n            dstHeight = Math.min(potHeight, maxSize);\n            dstWidth = dstHeight / aspect;\n        }\n        canvas.width = dstWidth;\n        canvas.height = dstHeight;\n        var ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, dstWidth, dstHeight);\n        if (this.autoDetectTransparency) {\n            this.__imageData = ctx.getImageData(0, 0, dstWidth, dstHeight);\n            for (let y = 0; y < dstHeight; y++) {\n                for (let x = 0; x < dstWidth; x++) {\n                    const alpha = this.__imageData.data[(x + y * dstWidth) * 4 + 3];\n                    if (alpha < 1) {\n                        this.__hasTransparentPixels = true;\n                        return canvas;\n                    }\n                }\n            }\n            this.__hasTransparentPixels = false;\n        }\n        return canvas;\n    }\n    generateTextureFromImage(image, { level = 0, internalFormat = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__[\"PixelFormat\"].RGBA, format = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__[\"PixelFormat\"].RGBA, type = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Float, magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Linear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Repeat, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Repeat, generateMipmap = true, anisotropy = true } = {}) {\n        this.__startedToLoad = true;\n        this.__htmlImageElement = image;\n        let img;\n        if (this.autoResize || this.autoDetectTransparency) {\n            img = this.__getResizedCanvas(image, _core_Config__WEBPACK_IMPORTED_MODULE_5__[\"default\"].maxSizeLimitOfNonCompressedTexture);\n            this.__htmlCanvasElement = img;\n        }\n        else {\n            img = image;\n        }\n        this.__width = img.width;\n        this.__height = img.height;\n        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getWebGLResourceRepository();\n        let texture = webGLResourceRepository.createTexture(img, {\n            level: level, internalFormat: internalFormat, width: this.__width, height: this.__height,\n            border: 0, format: format, type: type, magFilter: magFilter, minFilter: minFilter,\n            wrapS: wrapS, wrapT: wrapT, generateMipmap: generateMipmap, anisotropy: anisotropy\n        });\n        this.cgApiResourceUid = texture;\n        this.__isTextureReady = true;\n        this.__uri = image.src;\n        _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__[\"default\"].__textureMap.set(texture, this);\n    }\n    generateTextureFromUri(imageUri, { level = 0, internalFormat = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__[\"PixelFormat\"].RGBA, format = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__[\"PixelFormat\"].RGBA, type = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Float, magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Linear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Repeat, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Repeat, generateMipmap = true, anisotropy = true } = {}) {\n        this.__uri = imageUri;\n        this.__startedToLoad = true;\n        return new Promise((resolve, reject) => {\n            this.__img = new Image();\n            if (!imageUri.match(/^data:/)) {\n                this.__img.crossOrigin = 'Anonymous';\n            }\n            this.__img.onload = () => {\n                this.__htmlImageElement = this.__img;\n                let img;\n                if (this.autoResize || this.autoDetectTransparency) {\n                    img = this.__getResizedCanvas(this.__img, _core_Config__WEBPACK_IMPORTED_MODULE_5__[\"default\"].maxSizeLimitOfNonCompressedTexture);\n                    this.__htmlCanvasElement = img;\n                }\n                else {\n                    img = this.__img;\n                }\n                this.__width = img.width;\n                this.__height = img.height;\n                const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getWebGLResourceRepository();\n                let texture = webGLResourceRepository.createTexture(img, {\n                    level: level, internalFormat: internalFormat, width: this.__width, height: this.__height,\n                    border: 0, format: format, type: type, magFilter: magFilter, minFilter: minFilter,\n                    wrapS: wrapS, wrapT: wrapT, generateMipmap: generateMipmap, anisotropy: anisotropy\n                });\n                this.cgApiResourceUid = texture;\n                this.__isTextureReady = true;\n                _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__[\"default\"].__textureMap.set(texture, this);\n                resolve();\n            };\n            this.__img.src = imageUri;\n        });\n    }\n    generate1x1TextureFrom(rgbaStr = \"rgba(255,255,255,1)\") {\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = 1;\n        canvas.height = 1;\n        const ctx = canvas.getContext('2d');\n        ctx.fillStyle = rgbaStr;\n        ctx.fillRect(0, 0, 1, 1);\n        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getWebGLResourceRepository();\n        const texture = webGLResourceRepository.createTexture(canvas, {\n            level: 0, internalFormat: _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__[\"PixelFormat\"].RGBA, width: 1, height: 1,\n            border: 0, format: _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__[\"PixelFormat\"].RGBA, type: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__[\"ComponentType\"].Float, magFilter: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Nearest, minFilter: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Nearest,\n            wrapS: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].ClampToEdge, wrapT: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].ClampToEdge, generateMipmap: false, anisotropy: false\n        });\n        this.cgApiResourceUid = texture;\n        this.__isTextureReady = true;\n        _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__[\"default\"].__textureMap.set(texture, this);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/foundation/textures/Texture.ts?");

/***/ }),

/***/ "./src/pbr/main.ts":
/*!*************************!*\
  !*** ./src/pbr/main.ts ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// This is based from https://github.com/KhronosGroup/glTF-WebGL-PBR/blob/88eda8c5358efe03128b72b6c5f5f6e5b6d023e1/textures/brdfLUT.png\nconst pbrCookTorranceBrdfLutDataUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAIAAADTED8xAAAAA3NCSVQICAjb4U/gAAAgAElEQVR4nO19Xbfjqo7tJOV9zumHvn///tm7w32wAX0jsJNatbsZa7iEEJgkc0oCk1T5v38BQIW6VltvGwOojt7paFTr3HiqdwVr8FXBk/cM3F7V0TvyfbOPVj9hkNRkzI4CVMC4FtQ6NLS/3aWgVLcVmWq7o2c81UeCGnxDgCP398czTvbq70Onq2tDZCTM8k3PVk0NFg22S2bkAx6gyScBzyDHAeSr5fJ/ZqupNw1sgQ8uBD2gKQglHNk0XhihANWwD+RHmm5WdZnyIUOYPU1yPn4EODuEfj3JAaxUT9ZtgD4FYjK4aEJuBG2WkfNKLSNh9kjTzeqGgS7byM4MZRY3AsBS7nEA4chGlYxAW6GEvOcWg3s24hammdkllnfQT3I2MaDustF0s6rLI649Ux4kCbwIAFrli4FVDiAYOahymOYhngJxej1gjqCVq3LWuL2MP9HZi7LHh2exbvY1IgB49Q4H9FBIV6FW4VOsZ5z6JRTAyYVW3XYyCCAcxJXTcSAY7dnqJwweL/nxZQQAr+5x4CpWF6SrgL0vBB/rSwLCXOjTQcCTDYjn4oDs5VjerG4Y6GIabLv/m1w64KcrexxA2AWrZPD3hR4QClDZxDx7sxUrMu07HVz23Y0Dz1Y3DEyNLp8OCEE5Ctx0ZY8DCLvAt6RV8BFg7QttCFDjgwcZ1+y248fuOEjHgY9WNwySGrN8jRLXGgD5DGdmibALchEAfARYYWpDgNlKCBaZtbdsKQh4ffPyGIrHAWH50aqpmZZnsW6a3efJQXFwhwNiTl4XaoAcGa6qk7Kv+XvPzBrcHEQrYxlW33x3D5R6tHw1HllXtzW6JHt9zf1DLoJ3OYB0FyRdvmlWgDCSCAF8tNgM1t6o2cXuvgL3oGnSpYAGK205rd63/6jmkbI0rNoG3eKAHMTvgtlT3pgbJkyTAqatHF6PB4GlJjcOtGBlt86qWLF/UJMvn3P/HU60WA/C1jmAjPF5+9lT3jkZwiM9U8c/ac3lQoEBLJs7TQZA2wv4aCjY1pjlJqyXuptA94pzFGKRA/Yg1hUYz4kh9HkyKFc9dfx5d04PomUQP8W0xjcSvaZNQVX01dUNg6TGU+pyp++GsVeyx6FjDiB9YA6noDZesUgGcBZB2XiCaS+VimC6VzACLBuzKW8pwUq8nG6FtgcrX0b/I0jVxfP0we10l8lx6CQHkD402udHV7RZ0FuRBJab33H8XIlZLqRH0DKcprgaN40xOUvNvuZoWOyS1HjK7xePGGaJjkN/ggMgVSSeD5j6YdBYpJuEAD4glDz1659z/F5H776j42xBDH+0O5ql8tsDRVzCCPBhDgBrzwdgGmx9zQUJuad2rkF7Ez24r0I/rsYBBKHBtsYsPwe+XgmCgGg6Uvj+PAdADJCOAOBITTr+BRoQF/tgEBCtS1U5lPV4WNxLD5jU3DGL9U+VPNC9pgNJfD/KASgEm158GgGgboq048/SgMzNG0TLcJrM1qWqMRT5PE28wlLegXXS7HexopeYA+dM2hrgaQ6AO/UoAigvbhu0GbuCvyYW9lrpGYDPDc4g0p7ISFdF37UqZ6nXxbypaZZXfg3NXglQnulL1gAFFTPn/dzzAWgh/U1IVyiAtSYWZghlE6DTXCgYc1pNGuSr5gh5M9PSU3rltxPjLFN6qF2gaQKT4QmxhEMYmBAPn5GlBCubEmbYk/1ciI6vZfhVT7PDDfJR33T82tIz9kpgHDRt+/K4I/28dDnEKCkOJG24V/YigARoQQFw5wsAZXQHaQVcZVZu98g7/jyyPc3U0w9NOhFaUm7oHy9TbmwbHHbbdzlgCOEXAHQXYQNrTWxbzmRqD8gsyzVTTUE1r1kyMG08pdn9WX3cdL9kOABl4z4IE+P9Rg7oJg/HDMRqTexaEpkO6/XVjjYeLaje0dhunnxqH/Xx348JU3znbUDMskchXLN7HIDv3QHj2NxUAFU63jqIAHoQW2633A4C2xpxF0NTAHVEwuvo3SKw3y73R3uKAyCf5sJRCPd+NzgAJWgQZ367wUX5vV38CN+EXbGlWYW6I0IbT2lr+BEJbzQ9sftNny4bPj62ZL8KMeWAvprzuskBKZAuU2NoZfOI2iApu01q5LjjtLqhnGo8ZazX95r2+mklSYPxqxDbHAhixRc4ADNuiLcgXA8E8ryJPx/wOuoqnTZ8m1Xl0FjkjLt7s3qq9amSd/AZ47YGeJoDEybMOAAO69Pdml+GRDjCkNsdpd6R802rVc/AtBFKczRXqRKhbrzn3X+U7xcAmxqfRXcha4CCghDlN45LQBtzDiAD65WDn9ByuB4QstlkVxeDANXQOYOb5d22iUtPaY4QdEm2ZgwyZQPWeXuodx7el+IzE9zggOxIOEDHjgQFYo8zMOUiE4Nn3Hy4Mdo1UwcfeHetj+37xHr/2PGb41ODL6AfbRobmF7qQjsexv3idIhsTZqDTmMF+GgbHEC4N4pYzq0HvKowBp+VbnXtlYFQmpaxPUwgtrdr2/GbN8qPsFEece3JcvT+JspjDkRu/lEOQDh75/kAHFliut3Rs4dfjQzIsMEIj7v8uIlyPj9aN3gQ2V927ch19x+E7XJgvE7yirc5AEspHHkAd9e1z062Tau2AYlOwQimxlOad8z0QojgKbiT6H/c/YuyTQPanRYxVPgg7B4HqA3WOQBuYwg52pgy4K4HvKoYxzVQ39OlBqYmVmp9vnU0Eccwdfz4GPpXgwDtiBs00EP1csDa/GHmwW35vFwOgC2szRtRDoB8SB64LyGkzVSGtR7wqoGB1Chqxb2gPpXYqZtd5n3brKbQDwYXlhu+f5sDSLjzjcK+EUbvNEA83f10lsXeIKYBCAcglOTFG8SwaJOUYXUXlsw4r7kRBwK9bpr2je+obZKYvpP53OGAHoqWjWHH9wEQpDRpDrje3RoEyr4A4F+jAR/NJoaT0OtewsbsDoWVDO51LxCfkoS+5+ECqE1xD/5GmRjJDCLst9Hfb/QUB8SwusQ34ovgAMfTKW9tDcGypH49dv9DydE2yXx0lSQtnrGpiZXi6+raTEwvHlO3egbR4OpzXEJzPkGaFvEmf67EszW+EikmxeiBcHOT97WZQJC9xAEoe6kkIJ5nPro6e6AL/lYukwGsLPEh7rJtuYrm+45flw+FgnyR26CYJjzp1l4CjmlLUJQ3DjCladn6F+7IY6cuq63DNAKAQyEig7UYgEJSANklNGcs0TzFEpo/gf4+Hfw+GsgnwQPHYCkNKw5tPYZIA7jbo2L4AntZjIAP/oPeVNVK3GNn7+kLaTYXA9Q+cPkB7BZAvzKs2eVD6O/F9DJfKIfOSUS6QkWNYBPo0Zi9/QYHhAGEbMUNQELTc/DiUAP4Z79JBuUytl3+HujlsOnMY4MtN8s37wX9y3B0HpOEZ/aYzCUPuUeSA1DnQCeywxmEiQ0NI6iGgdkL6jOzEaw2mkVJ4n7V07t3nHHg+9D/LaWlQBwxDI7BO+U3XQyB/3iBZCyaeIa8cphZcAY+DTwDL2/xgJjig/V2PYV7/TlsY/d/CPTPQg7D8U2eXibOfnr4efoIrMjFxpQDkY0CXJAFTTQqFzLNhF63ijgARXhdkrjfTofoZPSA/2Do65emdoG8UJCLAzYTWkZh0KPfFMMGIaaFY45DAdS+ECzcuBDnuRB8aE7yDZX46ZJE813Qh2P+6dDfmP8hcEn9vRw9Xg/wbKdPKF4SMMsiOQBT5k40CAXoEQayC8iApmYo/dw9xmJEiTC26PIU6A3eKYb/8PL4VA9aCXw2TXjMaZnpEDNw0n3BPTgPv8T08vv9tAssME0zHPOBLnwy6FbP7FnQexF6Mk4Q239T+QIh+y3kz6JghnUsnh5lCnUvYXOHA0iEAlh7O5H7530NvWUPx4aZ8bcgyZ/s4H9m+cT8p2MeZn7SK+7xHgfo1NO76b5aY0AIeQ4gSoegq/yVwgGxDSyeekG9uY67sIt4DzfgnuyVKr87CDz1QjbGabtA5NEvRO4O490JgD76e+m+dfRaCjMOgNJgdo6NVZ2cPpXbOOcadC9RXOyGyPuHOXhd7r+iOyOcffmvQyvYIcY6rwerBenvLb4ZE/Q5IKYt8vsJDVrPBfc/azINAkvW5vzIwFcR/8UgcPN13Qc9LeMskJmisK48TaJATyJYDus/BaOTiRMbQV0kaeCsBzBFvEUes69ZdhiyONRS+SbHfgvu52uAbifSD6o3nTq7iWkfrC58vk05IIYasHaoa9IA1noAJuJ1EycPTBun2J+H732DAR/Hrvmg+rHBv9g3b1/6YbheN1MU2sNeFgc/FuQciBjV8PfeantBwYmJ/pq988yuRlHaYwLE2+pvByeLt2raHvCZwt/AB0f9dMekpZECwcnXuxTn/XJsKxR4QzG+Ob5HJPpTTGf2eQT9zJRGvFMGH5z3IelDjQ/si1l4sjxCg41BvoD7XsZhONtP87zCy4WmocBLhzyGiCTHW+xCwUb7dY8GULeG0FtdmI0F2Wd9529YHKsX9QOzl4xZ0oavAcxVqemZnJNzZCyr5mdK/UYmB8RwcZYPyOMSpg1TqjnTEqHwXhwwBn0OfA8OsjfCNx153kYYHEa7Rlhi+cvU/glQEVKkYOVR8j5mYqbn4p99sJWKM7oXLWI+mS6p8pVEaDK9J17Rg5jOmG0bjKMQ8DF6VuJHAWbSr0QgzPi1QcwBxKHAMYPDBBR5TjOYZhGVJ+JAHFUeL0uYftz4Eejfbx1HITxPzDANA+7RqSF/awgI/wM8a0wGZZOloRmonhtre9EqipebmRPeKQkOPLUSsMe58XI+kaisGgStTgpkZZ/2Lr6zJDC6Q4BRAT3+pXXra5DmTDby+2iZOwtQWAHNN8sdSjzls+/bbEN/b1j2jTAjt1bo8XY/Apc8CQXOkiAYM5NodeX5T4Xr2o1e2ynNExx4KhG6m7VvBYE7Bp+A/rRJnQWCQrwTHPSJ/KJwNgYPgO5FD373iAMYNur+5NUmnl49sLR9MA7k8rHMME8Zf8h5/8amw1hxaoftu3zT37sYdPBnBx/eqgcwc32pF6MRM5cnasLLeF7kQIQbf6gNPjySxG+78E/47/tdjqtFZ9A6DmBiJvSGzw6QwbsYmRhskniRpL9aj59xFiRmtVzuxQGTh1n7JyyDNGwDeXHr6oBPDTVSoLOmvX7qoZhFjAjrzv9upFfMbDQiRVMIP7AgvRFv0Dz6ZYof8TZGetbyE7nKdxz5BsRjvVwEI1wS8Oas0nPn9uTi38AKkyWEQYa5/BDW8o27586TJZkIZSD+iM1qEPiOw75j7KdAwiSTDiWXBFE+roZVlYADXinNIEZsN+tlgvA9DmxnUAkS3vHiGYNV4H7Ol38I+i0F0vs5CcTb5+H8tMfeAsqdnFPDXB0R5u7it849swXPeoMDQWNmgHiobRzHrcF9P+ShTf3NYadm8kvx3WS+EWSeh/P8+owbhomf7cxbyXDiLcjuWYVj5s1Xez3rlW92/KjrzejvjJk0O1iLXPOq3pns30t7EhyQOoVyTbYMB/TsTLMUShXDU2W9l20zy6k+BfTE/B9XfpoPLQWiKpHYmKzALjEc5RWC9LDOHU0OwBsgGFlNbA/NgVWy1/S+RVRmaduq3mv6dPqx1Hd7/FhzyA8m4/jXgwPLheBi3f22gPedNT4gfWHLW5k3cqEkczJfun0qIVnVf4cAH0X/nsZ6EPYZDgi9jXWTM1Y9bkXOAcvYdoMDZnvca83xU30ytfP1O8rZzH8vjjc0PAUSiDSTnwwHMDFjoSC9JEDPlFY4MB3Z+CB3ObCN5s1W5yemn8067vT9Mo63NYfUBaBXBici5/sqXtrjeLLoANzTHFi1yQQW25I0mNiddvwCuL+Zxvwu9Isq+z/CrvaE449ihdkrVBotAQoVB9j973GgJAexBlzw4onQEYymJ/kld9s+LHdKvua3oD9jn1gD5JIfedJ4iQNw9fbPAVnJzBIHYh+cGcQDtG2g9Zl8zNf/uSnH3pifI0P7PsCUA+Cb5TlWdM0cnWn94AAblyumLnYlF4pdu+jxIb1NgxmLfktSMTV4/I535kP+n2Af9PAMZnFAb/Cb2HUHPNXOzxCZXYph5BTfIDlIHATm4J6xNEUDFc0+6zutLOijfPj0aPw5gAV6+WhsShIYxHh8SRBwYDIZa5TIx0+DCbH0MisX3wnafD/B+I2A/uatz+rCGiCf/NhfG1jhgKHb44DfWjJ9HZjKQax7zSNAq2varIF+3SvfAeXNwfPVO/fN93XOAiUcfyWsSCGeayLsep5b6fc4EKDWNuA2QRzw2OJGgNBmAQFWKPsUTMOk60HUPsWceErq+wDVkEXi7q0ZjAUAteeD2Df19R7Wx5AJDrjYjVtPkziSqNHMJlsTsutB5/3bwfcDxzm07w+WBJnNouA4XZREwYJXjhtjAG8c3zdPW4Xzy2Y4cczRn0Ron2KFM7dHQPYF4P4uFl0RgCFbeG4f9LbfXddM0qEcB+CAL+61jO/gvutKcfel/ZzHsbXQ5NP1EXQ+zqigeoDk8bXydn9JQKvVcvyVkkR3wQrcm1I2rgDdHM1snZ+xCUcoykxbfsqh5u74PB9+XlNgKczkNqgLdB0WwEFWAHFEIhMHYCiNn69qlk9xIEK5796GJo4kjtn8A3Oo9VHoPOuVf8IISwMeYoEL8etu1JdzvFbSKnKY4fVh0MZbK8s55uODaezZZxBc7DXxsg0Msu158ewHzG/3fT58rsveCNNe/DQoxbq5LIYRJR5fEsTK6RcJYn1RTa7zxmxzxgGreaOFD+keB25CMDtUYpKfwOvjo6knwRYHuu/3PL3cKaLGYihzBFOjRu7KVQ64R9+mD6Fm/jvr4B2yfcSn+kFg446flpNNz0YMWj1GraVANgdaU18x9y5XLgRFg2CFABVJxDR4R1lyHNDOXpvPvfjU1S06+LhKCfMTAPpDyPAgl4RspUAU3ArocTqksyPm46EYBU4bfQtTA6CgwNbv5ELY34LMWqYfoD7Agef489OIsUGY2IylQHIn1MS9tfC9wgKvIkx+2CycdEjOOr8s9jgAf+Xqh4J5vhsCblSTZg9hdHvAbMf2tvwEkmxHkisFqn1zpqCauT5Fdkt4RjoUrAEKgDBQOJpbcHcII4BObftQGxBfQMMSaCziZWG6HgSejQZ30LmN5o1bOylQReW+v2csOkSccrAGEDFE5zlu5gNLuZv2FEu/4Oyn2J0Gig3HeYcDi8bfIYCHyN8VFg6GXcoBNBooj14JJUQ6FK8B9DGhye9w0SkFGk/Z9MXSu/s/YRwwN1imBnfkfWUuCDzIkG3j3ygfMjXnft1LgZgNHDMzDkBpNhCfDg4lrc/6ch9VU/5s8mTKOkv5aaybL/ZZkn9IFtWxCK4t+698SWCCm/4gCg0FgDoFbXn66MsG4qZcUywz+cpmlkXpTdi5OA56cWpFH/AidDbhnmHjF2mzbfwhGWMRbLn/azXcUGVwACwd0qtkgLWa1TGpxFGiOuUApMuklkWrF+OA9sqbJFFTij6wBI4XWPFol6lyyeCO7Ln5wP0X4/8JJk60Y47hW+E+8P1Jx29kVmImRFMFjhUHiqWEwnq/g3bYoskGStDkKzda49vF46x23Jhzdv43en1IxkUA7v5PuFfq/jPLAMv3244frCMNFHLYOxquLLESzKOLJu3LS6ap3Wvy2fsjuF22hMdbb3ZZMvioPE6D1srPe3Y+NGUVqb+QwWkQonzyheMZvqtOctoEBKyNtKcAsB7KKiwO2Up45k1Thjg2rn1mtC1ho/VmlyWDj8rH8N+FQZ8KHfoQqT+RIVIgQg8xFLuFV8UyK5JmhesFYeL9lgCXxTPYQu2zZg/OwVCm37SlwZcMhLzU5QABLuhGEHf/UPiOlwHgfUXTdf8l0JsGXEPdJNMgDXeCZqH3PH0eVa5BGEaYcgvKD3Lv8dZtg0Be6jIWwdWJA9L9OxwwlwEgZuOetBci0BtfwF3RBHAHZwt7X8iARRnbmFYInnacjhALSbOnmPOI2dRyqddT8jHSGAJ90/33tOfE98UBYgAwGpgrZrEyRlg9jQsMg0pfT4IVhStpXzMO2GGdw8hDuYe/KYa+AOUHcX9ntGcN7shsG3Q8AiNormSbSKQ6YslLwS2ALn+wZMoBMBrIUJBBvLgjMZNvhAkpD2eNGwZ2LZQvcCBHkqeEbRyvdtxTLhnckcc2KF0JaKGaLj+zDPCAqykB19jmALe3f7hKI56YFWJmZCCKA2hAdxOemAOhPg/ZzSCw10sJj5hNlUsGd+SDwdpaBNO1wfm5s5iAkQ4BUj9uZYUFONVitRocMLtDIp7aFOsusdJOzYnxAqzjpYKP0ZuQXaCWElYH3GhdMnieABAZTiHAJUJfEoxQEKZDtCMbrd/cT4cqBYHmAAadiu6uNKaN7d1N/JnEUGwslv19DriQdajyu4SnWp81yMjj16E7rPtKgAoA8fSzdMj29wHudRMIDUSr6Kurjkb68tnyV2M9C1bFAWFjKveqgcGSze/F/e8kwOW/O+Y6dLhQiafXz4MBgyT9ViMdUk1REt/uUvyqfEFBNqW7EA17T3lHQYwppCg3pk2ie3yv1SkFXZZ6fQH3v5MAoIDuEcBaCYALgNwdYtBP4p4At3cfE52C3gJ0sQxcBPguP4WePaBPObBV3TB4UHi8dapcNTab2lEIwoETcSP54SgHX/jqVa/7O7sW7g1kF1SQ5KQxrVit1XlKIF8lBa4GXwGgvGkbR1pquM/QPG0yDKZLhbB6U3iQABtdtvG9Jx8jpWlQo5s84A8HKkgEcFbDfexKZGiZ9wXPyCtHlQHrRFWj2TXgg3SyZVHIB9Q4DiA+JUmkfOKARkaYYFe9n8nB95R3jLW9HQHMbVCx/8M4ABUo2lBnEWGheDZgTfToPz0BWn1M21WuKf3VWzyZIMzD9EMcMCeToUdWv7UMWBU2WveU92U7AkCthu1FcOuCwP37WL8QQ2RwoCNOeKYcAAc0NzDxbcJUAjG3SI2vd8wm05sxIW+wLWy0bhtkjIMmIwKMdTDdD00sgmG6f2Ipjyf0m4JhUYQCefpfkAp+VRjzu1CDYlUjuJjMceikfXkAX6+jabBXDYQMapMoTxLgWYMNmUWAnuuLLIgui+EtghPuv0LqqVeOcN/MasNNna0QTEyLauHdXdiZLv8pDoSoTRqsVb+SBcWo/Rq+p/KIANTHjywIjAxQKwEmgGVNWlmoAQaLhl7k+k2+kn5IRrEXlF4WB7mQTQlikFcmAR1zA/E6QY3g2oTVjwp7yiUDIWf69urRjzd3sFaaBXFKiAWACX1786fhmEKzcL3p+xkHePfzFtXcS23Vwqu0VcBUvjUaeUsuX10DKGeuq017VVNImm2z4hGDTF9TJr8NCrIYUBzoORJdLlPo68OkDO4FQMOKj/sO2WqFi24WLAkKOEN8x8+oSGaiwb0E936jBRDH3EhvmD4O/U/A/aYykDNm2v5gDl7kP34WBIJ4LTDIFoZdnQ6x1J9s+9SGJCPvbwwcVZ8SgeOXSN3jgAl3R7kaBLJm608VpvptYaN1qvyQDHYYrp0GrUEWhGEDng6ZSb/mQ0/le69LwWXBATZ3E9wxB7xe0yrRROA24W4izOPACjdWDczb6WWD1ysW7phNlUsGQk6aHRTrMDkAaw1AyECFAProbMH4vEF3+qn75ynQsME1ve75TKAbkKIYFXiNwwKMJ529NcJZyApT6V53h4qVU/22sNE6Vd6UvaaDnXQw4wBYggRnHaxDAWDwocNauHzP/Qus20vhdP6zmRqBBaLiG0i0JbaJ5npVta/h+iRZnepjIa/8Gu4DDpzV8X+EiZUASARgywOx/FXbPvQpb8eZnfm0Qbo83L/y90Y6dIMDGnCsyQP0iX7PwO9iXpNmmcHzd0lWp3pP+RQZMnIS6DEHDp3q0DjQvbXOgtAFL+8nxKCBwoC+dv8FpS9zBaOmMr07kSmSepN2/KI6cJBZ/iZZMQsCRtPKNaNMVpPCRutUmZHzQPeq13+QMbw7ANhrAPYYuJGBkiReANBEX0I/5/49eRoWzA3Qws3yHAjAZzfNFrhB0zbc7zMh0AfGS61LBjdlr8r+p3gG+v4nkiJcwtmLLn9H8mNBv7d26OOEclOm3L+Fb/PQBL1111NQijVxv1XMgTklhMEqK4IgMN0pEjNXVzGamKdnHAsbZksGN+Vpk50CQW+GlsYQjAgAz/FzwYM+XdTWzgGM7trlZ/hAP9quL9xGVtMcEFWDEkQzwe4MgpnrnkGyui3sKR+U800Hgz54HFBLArYL1LBoOH4lUOijOXhwT5+B+7UwIQmVMBgv0YsJYJQoSQ60q10VlIDRkTZ5rWJWG3CfmiWrDwqe/AWsZ8yu7wRTDgTo18/COi4HzrigoX/huAxBrATcLH8Kd8ug0JnA6JvigEh1rMUAq7Y7ZmC9gObFYxGBgVfdMKDCVLlkEMhxNT/CoXObCiMLMvIfshMKvhg4hcJtOvTPT5EKhT8O02iu3ZIYBKm/TRI4lAg4wMEXZD5m6h/gUvBEGHi95gbOgDGm7yD+JgdWOz7eJE+DmnFAE4OBPkj9yTq4Ix4k16fr3ar4YKZD05jAcNCpeJqYNmRigQ1FeQx0E9yF3CUGd2wZdNxWetWsUN2mL8hxddqrrQE09DH+AIl+dh6uo9ASOtBxYroLGMQYCY/iwzVT/Qy4C1Mll2MOdOx2/Jmg790neVGIeJMn5pVVd79NH9tM9YFB3OtD8lI1GOTACe5wGQAeCjqgRzoEC4XE8aNhGhzcA/Hc6/cRos0fTxnm91SmHIg+eG5fgphgsYUh3qFECvppg0eqUz0V8q0b8keb5C5QvCUK/jgMxUj9teNHwzco0AsAK8/hOdI5ptgpGgLpMiFGwAFYSgVlF/QxmjOIbwMys8UsKCFjysgAACAASURBVKP0qtt6KuRbk/Ke2Wo1TIG8CECzf7oUthw/Gr67UKxQMIBuPhX2US6XBBzBcHBP5eIsANxkCXaOZFfJZIuDbA1c75pRmszxqtt6U9hTCnmvKUZ5YND+h5hwGYC+BUSq1OX3aulVDA3b8lehAM6S1xCafZtHRIwlDoBzQMsU2QYCeJPE9A3E29fcwc+l1rw+FqbKm3K+SVdNg2MsAEwOkDNCchFMUE5zFYpFc7ELuKHgcueNKlSgQDe9PoWFJobLgf6mkORey71jsDgegmoSBqDjkCl5QA9wHCin+i9D/3NYX8U91bSjEJQG0xRIPP11yMASfWJQRKpDVgUFDN8U6JN0yMr+S8gB2tqxrmUBXypHoFfnTCXirWvQhJWmqf6HQz8P7sAyoynjNCg4DSreFgfGFYvoF7ucFP16X0ghni6RPfd/zqFwpeYAjRKF2F/4I/L4/JTjp7LNByVkqhvXZHVbHwsbrUk537RaFZqD5T/BMoAIoKlOgH7qYs1jDrwJlgCRBQVCu5cQdNwYHGgtDNakwUyKkouEwOsXMo2hbN2pUpsBsvqboV/D1nXofwf3vaoI4C0D+LdkjEdgVrVwf29HAC34/r7OfLyn0b2Yht+lOIkQOJoDpSEIeiiztWsxkPdRxMfg3oN7Eut7yE5WLQIAb/EwmC8A4C+CL49O0C/NYK+Ae/ZC/T17GpBZAPgcuMAXaHD57EJb6acVOn4qx3wY1dzCILjG1ZtA3+bAVLkh6+rUYNr9VJJFMPAG3IwIAMgC4Cw++ntr6S4/3AM9u1zoV2sAKEvBKJMDhWvkMoBrxFvvBYTC/S4FtAF6wYfpfugjJ0Zn9KBC3HoH5Z+D/rPEGNugb+H7zb0gAGIB4ISConaKjGfATQDZHvWwrpMf49bKQEBZYHoSEDpGCY4puB8IAgEZtkBPiaotpdCmKprmHXPKB+VpdarRrWcxUqDOgS5EC4Cz1OtNZ6BvKBegL23AvtsDnvago5+m/iHWS2hQrKS/vy9FvFPKmNncDAIbuF8JC8mqKXjynS4b8s3qqsFRy+X7Rebz5nEABDluCtSUPdXprCiQCwMRAUD01xx7zKnKiztYL9TACwgEl9TAS4SK6q5b6YAx6ONzE8I4ec0ok0JeeQfij9Bgw8DUOItglQJBrYPjFEivB9gCoJHBQHmzpyvjKNvREO8BweKARryZCGk3X1RH2jrMLKUnQCstSthXx9Krar2Z/0zRmVcGcr5pWr2pOegCQMcBYwVcrcG8zZ/zTvqhWBkDnnqK8hEKAtBTvWNGIV6o/1bcmJKh9yvkldFWxhDwICBOUJN33yPDtElcY+VUn1E+YizkfNOegakRyuNNngS/+UbQm0C/nwi6ihkESNNJA82KvvND8/5zEHp2Oo/y1aqkRKGv6jIUQB/KDvc7QSB+QHbvmqzGgqc0bKqjX5FvVpMab6iRAnUmnGvfNwkCEO7fx71EakdgT4HOG3Nn3zkzTav2QB9VObgZJThb6LvGoM+DgAZ3IIB3gW8T5EWxcqo3BU8ZVL+A9Q0mTC3VF2IIB2giBOkoW5kFAaj1rlgYpOAOhf6QEjTnYeDm1fFm+BlRUWSIVwJDtk5PSGSb1YeeBnjVpJCU97rEg6xWTU1S2dYAbSUwFgP6LBBB29iXpKVv9iuv38kwZqCgLPZDTWR7ylKVCw+6t6q5SCjW263xTbEr8K3BHQhmNVCCzyRWetWksCFPW1ehvAH9JTK0bVCyGfruV5L/1DZAjwMVcvFKGkgKpJAdPEaAOmdqLIU5lEvh08ixhb0HVjUOAlLTunb6TdAvbFpVmCWvsXKqN4WpUsi6OjW42T2pmSpbCsQ3Q0UcgBUE0J9qnUXgHgPKA2M917e6ZJXtWvSygcK9Qa2ojAgqYhhV9X6N7lxzVdVmEVXGxDCrS9eMMilMlYGsqxnNI0DfpkfbBdIpEP8DCQKsVDlwAdn5aTY9XxIOfszMSfGrdvAN/aazH1B2DEx/b1bNIIBMECByXsBMKa4ZZUYfGGeUZjWj+Sisp/fq+isFepNtH5ERIV4En8Vx23TnR6Y0RFkprM0xvSsYJUyqoOOS08N2/9QS9tEgCghdPSVz458J3EYYILcOzii3hakSVTZNq55ygxvbQwnlUV+ob5IC8VNAtSc/mGOxNDNjx7Pn97iGY/s/Q+2AmF/FwqDQ0TgfGCvoG9DNOOilpaKE7MVtaBO0ksjgfeeIb33N1mQ1KUyVQp5WTU3SLNkxMwdTedSCWtouUOWhoABNRpPFQAPDZtYubk+UNhmsnEdomAeyvP6UDxT082WD9RBg9KXcMFlBZCGY1UAJrSSs8Cynek/5CPQfZMIn+uJcA7wL+l7Q6fLlUzCM6yV545FoANjnJjRkE9xRzRb6dRZUHD6gQYf9qbWyQQwOERfxsywoUw2uGeV9Qcisau0T5KumZsnyKeUVAfrTAHMdjI4EEgrsPVBuVmjVDyOm4zdR7skijFAs0tcslgF6tTBMNT1Ia/yYTLKCKHEP93nQP4L4jHyzGihN/VL3zAgjBTIiQHPhYwHg3aY/650FCr0kKJ55Zhkgcp4+ICeGMOhm7M/MkehoUCGCj0OrQh4CzfWtdfDGNVk1hakykOOm2NjTeMp890BvNo0UKI4AZ6EY9RhRWmu3o3s7zP2fNLCcMXvCQMeJYwIhmHbzWfff5+dlSiD6YAEQngsyq4ESjnID9Ek+BHK+SVdNjad8xDjQ49oFqm4EAA0CZzUYjrQVrpZJkcOlodSOX9xFoL+b+LgHN2Z/5g6pNoBNCXAD/WRACJlqcI2VUz0Vpkoh55t0NanxlIF+dRzaOo8AEP6R5utmMTMf0rfHhCW4D/cPif5iKWGlRh3NgkUS7pwV9PWLVqEEEaisj3wa6F85AxcrUwJfxZo0ENVtJmxrYv1eF9F61IL6wht4v50I0G01ssOFAb2Zke7T/EeMxLMaquzEKxYxRP5zyWBVKGcvuaeSIsYHDXHzEIRFCV3NYD3JAa8aCxsyIPeFEVjCKEnob+B+o+moPQKUVATogC4ctRQz9E6V9xIjyBK4f6vKVgUY4KauXeOevpbJn0qK+kulZuBMoJbB494A36X1hW+jm7wqHOUO9HNNuuop89APkH2n9Xj3NUAZJyDsCNCq3nCF2Ah9AH22CO5dLCYUMOb1qhkWBCWYk7bWwXINYPl7KIZQJR0fVSqHGWUFt4yvGWVS8JSeTSDr6oOaWB83ZQxKjwD9r/aD0G1NDKRSneD2xhr3rIrDP+a9VOfigR4D/ddK10+E9Ep38kKcUJA8CWc4eL8aXGOl1gc292VdfVCzp88bdJuj5z/jaQD5eiT8/Cczenf8AsZJ6BeKeKKxcyEMv97dMHgiRHctz5nZjn8aChJMAO/iNe1dtRAAPebDhqyrD2r29HkDYXPUgvfrOgU0fiGCn4TrhUI0zoV0zmPaX8qZ1xfCIEPz9CwCdMFcG3B3Lqbt/Zk2QkOrhuAcjti4etWk4Ml5uH+IDHv6TGtgdpzoH4kQJ8BZ3Ay+KIoApf/OoYoA+iqLl/DADgi6yQwFdG06aIDR6h0FpS9UBIQxAgV6vxcXBIgDfAdAj0GfRPwD0Pe3gLY1e/pM69TsSoHeVgoEjoep+z+x5aY9Pu7t0fRkRd4v6NHuytwtoQHNiMyDQ5oSdurfpmfQiTRpJaxqoKRvQqaaFDbkaTWpWVLeaUoaYCyCzzjwQn0bEaCXgVTLWdJtUOpPI8RbSU7hmoFyAn0KdMCIAGittEmeXcMgiVDSP1ooT0QkoVXwvh7QY9ybcE9hvc5tkvK0mtQsKe80JQ26zfF+4f0m+Q85EwFrBQzTYRcU5ft1xFjdTCqcHpQDUlaOv/RWFQpYcmLt8Qt6S0oU6fULN8NMgJUXBddkNRamyvtVU+MpN/TT1iS6qNn1JLhW1MaECrxfwJtgoADixDJvKmDoR//fAPrV3wyF/mDIHhHL+MEcvCdDJeKMGDQFajeNzv/oI3QC+p1aFrgN9FvV4BorbbM2Jf0OX7IKEUJerXrKDYhv43uKftOAR4AyNkDrayT0tLOZBdVWHf/pi0j91ZYLNBN4yDA4QPTnp3gBjsuDEtZ69OxceDToL3KaBWm9sDFBv41+kwNeNRYCOd/U+Y/AJlRu6OOmaWtscDDok4fBAq4shymsWWz7FIJk7eynWZD9VgoOYFTNaNApIR4LMNBzGgwQ05dBZmVQIn4Q1u/YX9c087HOw5nGXlW8gXdkU/PToD81mHY/6gsiCFSMPzkKhwVE6n9W27WfcRh8IOATDDM+htqgfCobBwzcw4gGY+3b5tmpK2gARYPx5+0CKU1HPAQNmrHQj2ubgNTztyVQGkK1WwN5tWpqPOWG/n5rxgDjSXB7FvbWj8B4Kj/GrkA3a0FAR4AKlnBPptt3ftD6g+dCaCjXuIeMBr3J3JKX7hzMxjAojZMa+pDDggtmdenqVWNhQ9bVbc2e/n5r3gY0Bao8AsDa1hyVJtD/6VE6fp5hB2tfUzNkuh4AcW8C92DJD0Cyf7CERD4S5txgr5EoNGHMqph8AGKTHoGNV2Xv1SINVqtJTazfbkoaJG1Os+PNU6BzDQAOAJn6E3yMPR+MbaJaJWEW4gCHe2m3KQT0Ju6LMmPVOuYjNoI0DTpPRDSgbxxV6tgiBLMaKDFTmsJUGcjTKsDcWWDmKadNN1vzNtRSLoLf5+9kkdymb33W9km/cGkKgX7f66RsqZ0MFP1ELuaMe76ubHQW1IEOjCVB4VGCUUWsgPk7onGvZ8v4wEOH5tsSGcTVqw6h+k2hnG/yNEvKadPN1ryNtjzqqxHgXAaAnIIGoJ9htXQf5P9O1cmPDgLQMtGZ/sakAQM0GBnoapLtC7WqWAEzuFsT63cxngY4J0ChhE+hPxQiudr6O5pYv92UNEjamJYHQ//r+mIkyNZ+UQvZ2uTadoFY8uNv9cQa6VxPJd+glL6WQByCD9bDKS3LLSAvHVJ4EojX4J6gvzC6imuyCjWrQCnkaTWpifVx07Q1Y5C08cyMNYCMAArQJzco9CtYBBjGhewoOS7Wm6uBOb6ZCIycZ1wtPhgpENTCV926M8RuIpohd0aRW9D5eIgP4B6APk8Dz8asmpol5bRp2poxSNrElgfd/+lbopVshTIcFABtx7PJdLfn6kf/N7F+f43+BCUmvtZ5cFtIHBjGBJ1sz14/GKatYNHAnJiWhWBWg6tXTQqBPK26mvQKONBnWjMGS2ax5fF+sS/F02NwHTRnCvTCyHwAtvytNPkpV+faT1JooJ+Q8uDLQd/HuDTcxdJXOK76ESzIwtTMgnIz0Uo9Dp0tvaMxzxX0m5heQv8G9JeUd5qSBo9bthSIPAroWB1PdgFUvIFXgz7aWpkiXl5x0UDGgWpvqMlibUEWAXoBdA07XNBn3ZXvH3MzBW4soC/SHighmqG6xkpTmCo3qqvKO01Jgz3jqSVZBLdlAFQa30fq0L+QTHz/Va1jiUwB1KEfzKk76QEs0SpkeuSB6As3YF3857jJv/OFiPVD4RMQAnn/djiQFJKyriY1e/q4aclm1TJpLLdBz+/EnL3HV9fp/k+DfkcDuk1DeSVwp9A35zSwpZoFmoUxO/RmOVomiNUw+FFQ/xyoODEqZmvuhEY4nuVCXjUWmOwfhJ5WV5WBPm5aslm1XLI/LujTcxBl+LnavOwLwAlC8ospl9cHcfw+9PWcitDUBlPRdCKmMGVnhcb9uNLnZWIHiSKeM8Hcs9Kz0lUqPLL/kxQ8pV1dfAjgKQN93PQ5s71yUPRfC4AX+QrLefO2nD01fYtI4J7JehOp/70l9AcQxSuvQ1+E8pQLQ4y8mu6ZhAKAZfbeSThBEpMJnmBWg6tXpcJUKeRpNamJ9ZnWvE3e7GYvdhTi3fMfsM1NkK2hsSpo0rXbUy9Zun+V+pfXRQNwJHWpNJ/NKEF3MLuZ8rLij97CSJmKzKwkE0T+46T+MG/nVIOrVzWFqTJTTWpifdy0ZJM3e6pX2wVqi+CO9dIWu2fy8wZekL7/FE6syxTI2ecZE32hvJmeefrBMxYHmAaAOBTUr2SfZ7SK5a/5PRhnzpRR4FWhp8Ln0O8hPs+EpObS+7t2U+TlobkH4u2OZy+WAp1PA87Gfvr/3Tgwtnraahho2RENEOA06PueAu5tCh2dDPFkB7OQew3P3SzHCPTKD0QIm2sEtSA2ZBP6Kh1iAs/+oef2A9C/AH1HHzclDTYsH++ovhLZ/DzdhaTwpk/KxH8cf4UCb8/nddFgfJAkCLA9e4L4QRLCCsoEqVGo9TBa1Nsn+xbGZ4MJStZU/A76A3xPob+knDYlDbaNH+lIy/G3iADn0C0CXE++Ghh6JKztn0qvxK5Q99/SfQDlNbJ/uu3TX43w/QUjBeo37tn8GNY7E0oFwpau7B7ddIqaTnQ0nVOxKRH74OpVk0IgT6umxlNOm5IG28Yf6nu8Cy4OvNo5Z7L/cz79pWvfTgOW+WDA3Shk1XtWS3vUUNr9xuZMv40SCogZBb04VlmITAWO+/Fm5L4EI/oK6AdpD1aUT6H/ccf/c6B/s7voe7BzEKd75tuRPe2pAv1oD4Y7P5TvZ+7/ReQTo6+2JUo+W+n7lUDNgNFd49uOA0T2fP9loQIFTe062eh6ANbd9ZvutT5Cg2nV1HjKQJ83uGl/v2NQjDVAad9l6fmP+LFoIwKIIEBz/RepKt9fyqiO9W53+VZYKN3l66POp6H1dExA/5LEysFc/lq4Bxk8EK5Jqrwog/4Y6NvoX4J+3JQ02DZ+pON0HLkLhLb7CeBd2tan+qa8WAMYyc9rbP6c0AeB/shSSJW5f3oKQ31JhWJX0ABkcH1OYcja9xf1EkiLTSErvJg4TqJ/1d8H4P6o1/8C6D+HeFFkBEBDwquRgaG/NNCfRTt+mgWdCU/Lcy6v/7o2Vq90iEKfy4IMNBSMZ2T8e17gSGIPAQSO4yPQzkpAski9yyYZHkS/B/EHvb6hr2FrfpyP9bozFI8AJP+53D/9hsBJibNfz/5hEOBK/fva9+SAYEK/im/ZNlleuzHIfgulAd0yClFVNETCtS+ossgU604E8KqxkJTzmlifad2zvNPlqQFZBEDfdClAOxjX8yJQX6Cff3HHL9L9yxmL6wn3Vr3uS72+igBjv4XkMGwTRkQG32dTf6+THxEKoEYAH40KSQ541aSgq9uO/58E/dUx2S5QxQWg10kAwgGa5Ne+AlYRoLzJUZ9Xq/acR/h+Dv0L3w0Uw6nT/Iesg7szRuveX3zfFzI5wN4gvfDl53/QBtRPf8GFKcRNgG6jP4b7lx3/D4H+xrAHzX/6OvVd8CrS/aMQ6MNAfz8wRHHfkx+UlgX1CCCyIO7+dSI0AgLtFSwDisEBkKokw8xAxxCtFFdzZG3zJfTXiVm+NW/zVK8PDcsiAF4XbtDR36/i3fPRT3F/en2ApTosAgjod/fvJULE8Xdnz/IfxQHAPclMhxJ/4p2V0C/jKYF49zW+vSt4l6QQdDerpsZTJlszBg/2+ujIx99iC6igdPf/GlnQuInn/sHQD+71T7gP3HcmkJsy9099P3+hctHclOgcwEiNClEWjNHoilm+kXV0TEYAWMIU/fkgICZ4lWrY3Ef/Hwf9m4Mf7Bxo+7tOxVElLU7qL64oLRSc+O75T3PkQhawHl5fJD/na+bRYPQi74gBKcWEbmBEAE4G8+1mNBPvk7Uzaw5iTzVsdauzLcvvQ/9Oxy8MTlKgF9CXvy/GgWspLBYAdPMHPDI0318a4kHkngUVzgEUAmvl43tAYPs/GMsAilcKPoFRkKpkNwk4SfeP0PHrshoEPOVqNVAG+rzB4x2/Nv5B90ABvF94ndB/8bDQytj/6ehXac/4Ek2HNYZMgU45cAGXR4DzVdrLAOVizfUAOIZ0PLPJQFvFTEiTEGjVuwozrxooN4bahn7S5qle37/F+FmUKz95obY/0NSolzrcfKnM8V/JDy5nPzIfkESIg/56JZQVaFRR+Q995aVJpTJcUpdv6ukIpvsvAvT6puLuRBMwwVMGYDXjQCCbo3nKQM8M1I7wtPwp0D/L0f9f1NPlvwgBTg6gf00MPP8hwrXvieH1L9wTMtAIAEEGup0v0h4iiB1Sdgq6jERI6Av8XaBeiv1Ja/vA/QfO3tNPR8vL5k09ZaDPGzzSZaM8e5eDbQGduP814kD//PvPXfXTzqXg/P/0rgm1r05eoOG4Z46fCFIvIgAGH+jzWuaMKX8sxw+uoSPEf+D2Wva8uGZCjNQvo/9/oU/L+HHcK//5hfrrWgOcMYHdtvI/tDM/uOSicFQIxKE+YwFcFgEgg0Dnw1XlK12xANCsMLd02F2UWnOGTj54OWYxXvLH0P81x//nQv8sx/m/w5+5/usX6i/gV4sDBaD5D8YzrzMOdN9/pv7oGzhFun+0bZ8oAlAnrVbDNoitzVD6lolYYab1U9//iPvPOGxRvoz+nwn9T99orAF6/nNyYLj/fv/u+MuV/Iz5tc2f0YNs8ohdIPYIjL5IGjEqaeA7MPYaQAtFpv59tKI0opg00HLs/s2Pber1p3HAHHB633iQaesd4zvlCzca/03qyH9+XcsAvDj60b7g0mX6gVUj/xlQshKhKAKAbAFR500QDPChCE/QGaVT/9JeThd0UXcBjJtqQTNhaKz44wmmWWAzbV2iUFy+g/6vcexKgU7/ffn+48qCIPZ/qPvHeKwLst059i5fRKabPyBdigUCsjU02uguUNOMhwnqgWu/0vElu/zvxNCiaaAnrJ+/3gRcEsdJlDyF/n8Y9M9ynP8vankB1P3/au6/Taef9ReOf8i10aAqNDWsX46wEJTo3SGxZUmQSu9ouF6LCcJYV83CmGCFESHIahlrFT0fbxBzWE/WVVPjKadN25Z3ypehf5bj+m8hC17d/R8tBQrcP/1c6+XyWd4P5v6Z4weJAIWN1qyGPY0Deg0gZ8KZABiMWiox68RNUY1ewYBT/f8Q9P8W3PdyjKdgv1AP1ONKgdgHTk890I//BCKHvun+Gdb5Clg/H7jsaYpipRlQZAhQopvcP3Uv+QmpmDBei6OZun9vnmb5Gvr/2dA/y7UGKL8uAuDkwGs81QKu5EfurFeW8OhnXtL9E+ifMsw1gMZcAxxFZ3GwBaUvRW4HTd93bdN9/B5kTcuABkIZ3+JPRP9PgP5ZjtoiADr6D7IAOD/yc5eT/qB5vRw/vUovjnFlW0BdaMP1gGD42sKyIOPgJ732UMANAClnyhSvJkm8FXlmGhvu/89C/8/BfS/HG6gvlKPlP3+RFTDGqYdCftRWop94/Y5iEQSAy9+P5IfSAE4AcX6poVCXTK8YAzJh6xEYrPsKwaya5RH3v3GjZNOSzUb5gdA/y3H90v8v4C/gr7YAaKcb+qPfsxSiHOh/8QP9VhAQiRD6RhDhAOL8xHoezNt51TeLIWLSILDXVdPxrw41tTdbfyD6fyz0z3K8Afwi7v8vlv+MzZ9WSk94iO8HF2jmcwpXtcmlV8EzIlLYYGUkQhSjGmo0FLAm9aDNLq371GEng8AqgvNDLQHrt6D/h0P/LEc917J/Af9qEUDkP+fv157oaQvfgXWS/Q9nT9a+hWQ+HgfAacDwVwZ2mfsvzjLAwejGh/EgEKddNtx/3v776P8joH+WowI4UP9q7r8vACpKJf+LUTv+QLOdnvywIHAW5ajZln9RApqNgK1zfGB016eGTEteivWni3iMoAfRVR2UgmnkbfYodPOmG+UPgv5ZjlpRjub+/2pPANAe/fYX1Ksv8pUAgv7CaXCJYhsUJOnvfKDE6BJfBA+9mZ+QtIc1FZYOed35bQ2llpNBIKaBN1o85uPlqRv9cdA/S4sA/0L911gA9IMPAPf9lSc8xYDdBW4eAcpo40/BhEFTaoQF7lYXLwtKusN8kvOsf/2++38EtX8o9M9yVKD8Czj/jv4f4pHnTVVu8rBsh+QQdLP/KqQqN4JgJ0Xuu0lXsSozYdfClgfUbFLChEfoVz/176Pkf9GfKUcF6r+Af7cV8AnTN/kfLir5az9xNXBc2BUYTBiJEAgNxP3FOjhRNiC458KX+GPwMDel1fwn7/4/Xf506J/lqC/gPy0CtOXvwCWH/vi9NxoHOIiN98VMgUgiNATCE/pHfTMz9h+72h8P6UIIe+uzTAJ9arydxuz1ugnffwb6ARz4BfwH+DfKX2OBO15eZb9xYp5oAHhSRAtPgewiFgCaQmILfyVR0TYe3E29Oc52FvSJ8iF6fLT7jypH/Qv4r7YLBPbct/9SEPvRK7ECFrgnfptBuft74vg1JUQcuGQL7rZn5YHiuoWzN2qWD320S8PuJWzbt1st/yT0Azjwr5YC/QLQUv9+zrn/zg/YlT3ihfLimVTk0XJt2KrvN/Kn2LLqjrN000ctY2PdZBr3b48Gt8DMZtrXLH8cPY76X8B/rg3Q8Suftf26rUiTc68vfo8Ci6pbKxOLJZvjlCZpDpwlqSyWXMgtaNW7er2E4N0O/IXD0XgvSjd5NrFxpsw/+h9WXvjvRoD+Rfh+FoikOoVmLDoUYLxnXpL9WLnzHnM69b+P3rw6VS1EshXcpvcSTfnJV/X3Ty0H/g/wL5Rf7SsvFPq8VCFVgH4wdfxrvHe1XSoZoI1DR65VjdCUhYxfcCn5dK5b0My/8Dkg8IX6cyZdKhfsYrUVb3Cr2DP/3/KxcuC/2/IXLeNXpfaPsKNcgK5yG8WAE8eXGWHOADGBvnn3biB6FXKlMzr/0eiHdYtpW8WVH3ZBdvFcN0lyMoUai456HHNkkTKJBp1B5SfmlT8u76elEaD9144eBz5RvPdUYCmzbPWwEkBElAy2knfPz8qc5yoH9OQDvTDAzCxT/twwVYAD/wYq8Ab+Bv5G/Rv4f5dQ/76UvTr+3qh/4/3G62+83yh/4/X3pSnqD38Dp/BmCEVL9QAAAI9JREFUwvXzcm/g3Rz8G7U1nXLpTRW14v3G6xTqJZR2PTXn9ayWphnfLGut4g90ySOU9YokBUN5aXrVvNZxBQFZX50bG2XVkTVGze82zL7wsAx08gL/qeWFf/NVL+wFQGH/qPLcm/Tg2/2TPzlzbj95wv/U8mJfgQfzVPLzuP35bAyQ7/IPQ88/7OX82PL/AWvoH5jBiy2hAAAAAElFTkSuQmCC';\nconst PBR = Object.freeze({\n    pbrCookTorranceBrdfLutDataUrl,\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PBR);\n\n\n//# sourceURL=webpack:///./src/pbr/main.ts?");

/***/ }),

/***/ "./src/rhodonite.ts":
/*!**************************!*\
  !*** ./src/rhodonite.ts ***!
  \**************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./foundation/core/EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./foundation/core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _foundation_components_TransformComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./foundation/components/TransformComponent */ \"./src/foundation/components/TransformComponent.ts\");\n/* harmony import */ var _foundation_components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./foundation/components/SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _foundation_components_MeshComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./foundation/components/MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _foundation_components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./foundation/components/MeshRendererComponent */ \"./src/foundation/components/MeshRendererComponent.ts\");\n/* harmony import */ var _foundation_geometry_Primitive__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./foundation/geometry/Primitive */ \"./src/foundation/geometry/Primitive.ts\");\n/* harmony import */ var _foundation_definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./foundation/definitions/PrimitiveMode */ \"./src/foundation/definitions/PrimitiveMode.ts\");\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./foundation/definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _foundation_definitions_CameraControllerType__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./foundation/definitions/CameraControllerType */ \"./src/foundation/definitions/CameraControllerType.ts\");\n/* harmony import */ var _foundation_system_System__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./foundation/system/System */ \"./src/foundation/system/System.ts\");\n/* harmony import */ var _foundation_math_Scalar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./foundation/math/Scalar */ \"./src/foundation/math/Scalar.ts\");\n/* harmony import */ var _foundation_math_Vector2__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./foundation/math/Vector2 */ \"./src/foundation/math/Vector2.ts\");\n/* harmony import */ var _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./foundation/math/Vector3 */ \"./src/foundation/math/Vector3.ts\");\n/* harmony import */ var _foundation_math_Vector4__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./foundation/math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _foundation_math_MutableVector2__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./foundation/math/MutableVector2 */ \"./src/foundation/math/MutableVector2.ts\");\n/* harmony import */ var _foundation_math_MutableVector3__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./foundation/math/MutableVector3 */ \"./src/foundation/math/MutableVector3.ts\");\n/* harmony import */ var _foundation_math_MutableVector4__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./foundation/math/MutableVector4 */ \"./src/foundation/math/MutableVector4.ts\");\n/* harmony import */ var _foundation_math_Matrix22__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./foundation/math/Matrix22 */ \"./src/foundation/math/Matrix22.ts\");\n/* harmony import */ var _foundation_math_Matrix33__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./foundation/math/Matrix33 */ \"./src/foundation/math/Matrix33.ts\");\n/* harmony import */ var _foundation_math_Matrix44__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./foundation/math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _foundation_math_MutableMatrix22__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./foundation/math/MutableMatrix22 */ \"./src/foundation/math/MutableMatrix22.ts\");\n/* harmony import */ var _foundation_math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./foundation/math/MutableMatrix33 */ \"./src/foundation/math/MutableMatrix33.ts\");\n/* harmony import */ var _foundation_math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./foundation/math/MutableMatrix44 */ \"./src/foundation/math/MutableMatrix44.ts\");\n/* harmony import */ var _foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./foundation/definitions/ProcessApproach */ \"./src/foundation/definitions/ProcessApproach.ts\");\n/* harmony import */ var _foundation_importer_Gltf1Importer__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./foundation/importer/Gltf1Importer */ \"./src/foundation/importer/Gltf1Importer.ts\");\n/* harmony import */ var _foundation_importer_Gltf2Importer__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./foundation/importer/Gltf2Importer */ \"./src/foundation/importer/Gltf2Importer.ts\");\n/* harmony import */ var _foundation_importer_DrcPointCloudImporter__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./foundation/importer/DrcPointCloudImporter */ \"./src/foundation/importer/DrcPointCloudImporter.ts\");\n/* harmony import */ var _foundation_importer_GltfImporter__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./foundation/importer/GltfImporter */ \"./src/foundation/importer/GltfImporter.ts\");\n/* harmony import */ var _foundation_exporter_Gltf2Exporter__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./foundation/exporter/Gltf2Exporter */ \"./src/foundation/exporter/Gltf2Exporter.ts\");\n/* harmony import */ var _foundation_importer_ModelConverter__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./foundation/importer/ModelConverter */ \"./src/foundation/importer/ModelConverter.ts\");\n/* harmony import */ var _foundation_system_ModuleManager__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./foundation/system/ModuleManager */ \"./src/foundation/system/ModuleManager.ts\");\n/* harmony import */ var _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./foundation/core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./foundation/components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _foundation_definitions_CameraType__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./foundation/definitions/CameraType */ \"./src/foundation/definitions/CameraType.ts\");\n/* harmony import */ var _foundation_components_AnimationComponent__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./foundation/components/AnimationComponent */ \"./src/foundation/components/AnimationComponent.ts\");\n/* harmony import */ var _foundation_components_LightComponent__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./foundation/components/LightComponent */ \"./src/foundation/components/LightComponent.ts\");\n/* harmony import */ var _foundation_definitions_LightType__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./foundation/definitions/LightType */ \"./src/foundation/definitions/LightType.ts\");\n/* harmony import */ var _foundation_definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./foundation/definitions/AlphaMode */ \"./src/foundation/definitions/AlphaMode.ts\");\n/* harmony import */ var _foundation_textures_CubeTexture__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./foundation/textures/CubeTexture */ \"./src/foundation/textures/CubeTexture.ts\");\n/* harmony import */ var _foundation_components_CameraControllerComponent__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./foundation/components/CameraControllerComponent */ \"./src/foundation/components/CameraControllerComponent.ts\");\n/* harmony import */ var _foundation_importer_FormatDetector__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./foundation/importer/FormatDetector */ \"./src/foundation/importer/FormatDetector.ts\");\n/* harmony import */ var _foundation_core_Config__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./foundation/core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _foundation_geometry_Plane__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./foundation/geometry/Plane */ \"./src/foundation/geometry/Plane.ts\");\n/* harmony import */ var _foundation_geometry_Sphere__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./foundation/geometry/Sphere */ \"./src/foundation/geometry/Sphere.ts\");\n/* harmony import */ var _foundation_materials_Material__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./foundation/materials/Material */ \"./src/foundation/materials/Material.ts\");\n/* harmony import */ var _foundation_helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./foundation/helpers/MaterialHelper */ \"./src/foundation/helpers/MaterialHelper.ts\");\n/* harmony import */ var _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./foundation/definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _foundation_renderer_RenderPass__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./foundation/renderer/RenderPass */ \"./src/foundation/renderer/RenderPass.ts\");\n/* harmony import */ var _foundation_renderer_FrameBuffer__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./foundation/renderer/FrameBuffer */ \"./src/foundation/renderer/FrameBuffer.ts\");\n/* harmony import */ var _foundation_renderer_Expression__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./foundation/renderer/Expression */ \"./src/foundation/renderer/Expression.ts\");\n/* harmony import */ var _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./foundation/definitions/HdriFormat */ \"./src/foundation/definitions/HdriFormat.ts\");\n/* harmony import */ var _foundation_textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./foundation/textures/RenderTargetTexture */ \"./src/foundation/textures/RenderTargetTexture.ts\");\n/* harmony import */ var _foundation_textures_RenderBuffer__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./foundation/textures/RenderBuffer */ \"./src/foundation/textures/RenderBuffer.ts\");\n/* harmony import */ var _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./foundation/definitions/TextureParameter */ \"./src/foundation/definitions/TextureParameter.ts\");\n/* harmony import */ var _foundation_helpers_RenderableHelper__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./foundation/helpers/RenderableHelper */ \"./src/foundation/helpers/RenderableHelper.ts\");\n/* harmony import */ var _foundation_textures_Texture__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./foundation/textures/Texture */ \"./src/foundation/textures/Texture.ts\");\n/* harmony import */ var _foundation_helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./foundation/helpers/EntityHelper */ \"./src/foundation/helpers/EntityHelper.ts\");\n/* harmony import */ var _foundation_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./foundation/math/MathClassUtil */ \"./src/foundation/math/MathClassUtil.ts\");\n/* harmony import */ var _foundation_geometry_Mesh__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ./foundation/geometry/Mesh */ \"./src/foundation/geometry/Mesh.ts\");\n/* harmony import */ var _foundation_math_MathUtil__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./foundation/math/MathUtil */ \"./src/foundation/math/MathUtil.ts\");\n/* harmony import */ var _foundation_core_Component__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ./foundation/core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _foundation_materials_EnvConstantSingleMaterialNode__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ./foundation/materials/EnvConstantSingleMaterialNode */ \"./src/foundation/materials/EnvConstantSingleMaterialNode.ts\");\n/* harmony import */ var _foundation_core_RnObject__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./foundation/core/RnObject */ \"./src/foundation/core/RnObject.ts\");\n/* harmony import */ var _foundation_importer_VRMImporter__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./foundation/importer/VRMImporter */ \"./src/foundation/importer/VRMImporter.ts\");\n/* harmony import */ var _foundation_components_BlendShapeComponent__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ./foundation/components/BlendShapeComponent */ \"./src/foundation/components/BlendShapeComponent.ts\");\n/* harmony import */ var _foundation_importer_AnimationAssigner__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./foundation/importer/AnimationAssigner */ \"./src/foundation/importer/AnimationAssigner.ts\");\n/* harmony import */ var _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ./foundation/misc/MiscUtil */ \"./src/foundation/misc/MiscUtil.ts\");\n/* harmony import */ var _foundation_cameras_OrbitCameraController__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ./foundation/cameras/OrbitCameraController */ \"./src/foundation/cameras/OrbitCameraController.ts\");\n/* harmony import */ var _foundation_cameras_WalkThroughCameraController__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ./foundation/cameras/WalkThroughCameraController */ \"./src/foundation/cameras/WalkThroughCameraController.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nlet Rn = {\n    EntityRepository: _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n    ComponentRepository: _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n    TransformComponent: _foundation_components_TransformComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n    SceneGraphComponent: _foundation_components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n    MeshComponent: _foundation_components_MeshComponent__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n    MeshRendererComponent: _foundation_components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n    Primitive: _foundation_geometry_Primitive__WEBPACK_IMPORTED_MODULE_6__[\"default\"],\n    CompositionType: _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_9__[\"CompositionType\"],\n    ComponentType: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_10__[\"ComponentType\"],\n    VertexAttribute: _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_8__[\"VertexAttribute\"],\n    PrimitiveMode: _foundation_definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_7__[\"PrimitiveMode\"],\n    System: _foundation_system_System__WEBPACK_IMPORTED_MODULE_12__[\"default\"],\n    Scalar: _foundation_math_Scalar__WEBPACK_IMPORTED_MODULE_13__[\"default\"],\n    Vector2: _foundation_math_Vector2__WEBPACK_IMPORTED_MODULE_14__[\"default\"],\n    Vector3: _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_15__[\"default\"],\n    Vector4: _foundation_math_Vector4__WEBPACK_IMPORTED_MODULE_16__[\"default\"],\n    MutableVector2: _foundation_math_MutableVector2__WEBPACK_IMPORTED_MODULE_17__[\"default\"],\n    MutableVector3: _foundation_math_MutableVector3__WEBPACK_IMPORTED_MODULE_18__[\"default\"],\n    MutableVector4: _foundation_math_MutableVector4__WEBPACK_IMPORTED_MODULE_19__[\"default\"],\n    Matrix22: _foundation_math_Matrix22__WEBPACK_IMPORTED_MODULE_20__[\"default\"],\n    Matrix33: _foundation_math_Matrix33__WEBPACK_IMPORTED_MODULE_21__[\"default\"],\n    Matrix44: _foundation_math_Matrix44__WEBPACK_IMPORTED_MODULE_22__[\"default\"],\n    MutableMatrix22: _foundation_math_MutableMatrix22__WEBPACK_IMPORTED_MODULE_23__[\"default\"],\n    MutableMatrix33: _foundation_math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_24__[\"default\"],\n    MutableMatrix44: _foundation_math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_25__[\"default\"],\n    ProcessApproach: _foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_26__[\"ProcessApproach\"],\n    Gltf1Importer: _foundation_importer_Gltf1Importer__WEBPACK_IMPORTED_MODULE_27__[\"default\"],\n    Gltf2Importer: _foundation_importer_Gltf2Importer__WEBPACK_IMPORTED_MODULE_28__[\"default\"],\n    DrcPointCloudImporter: _foundation_importer_DrcPointCloudImporter__WEBPACK_IMPORTED_MODULE_29__[\"default\"],\n    GltfImporter: _foundation_importer_GltfImporter__WEBPACK_IMPORTED_MODULE_30__[\"default\"],\n    ModelConverter: _foundation_importer_ModelConverter__WEBPACK_IMPORTED_MODULE_32__[\"default\"],\n    ModuleManager: _foundation_system_ModuleManager__WEBPACK_IMPORTED_MODULE_33__[\"default\"],\n    MemoryManager: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_34__[\"default\"],\n    CameraComponent: _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_35__[\"default\"],\n    CameraType: _foundation_definitions_CameraType__WEBPACK_IMPORTED_MODULE_36__[\"CameraType\"],\n    AnimationComponent: _foundation_components_AnimationComponent__WEBPACK_IMPORTED_MODULE_37__[\"default\"],\n    LightComponent: _foundation_components_LightComponent__WEBPACK_IMPORTED_MODULE_38__[\"default\"],\n    LightType: _foundation_definitions_LightType__WEBPACK_IMPORTED_MODULE_39__[\"LightType\"],\n    CubeTexture: _foundation_textures_CubeTexture__WEBPACK_IMPORTED_MODULE_41__[\"default\"],\n    CameraControllerComponent: _foundation_components_CameraControllerComponent__WEBPACK_IMPORTED_MODULE_42__[\"default\"],\n    CameraControllerType: _foundation_definitions_CameraControllerType__WEBPACK_IMPORTED_MODULE_11__[\"CameraControllerType\"],\n    AlphaMode: _foundation_definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_40__[\"AlphaMode\"],\n    Gltf2Exporter: _foundation_exporter_Gltf2Exporter__WEBPACK_IMPORTED_MODULE_31__[\"default\"],\n    detectFormat: _foundation_importer_FormatDetector__WEBPACK_IMPORTED_MODULE_43__[\"default\"],\n    Config: _foundation_core_Config__WEBPACK_IMPORTED_MODULE_44__[\"default\"],\n    Plane: _foundation_geometry_Plane__WEBPACK_IMPORTED_MODULE_45__[\"default\"],\n    Sphere: _foundation_geometry_Sphere__WEBPACK_IMPORTED_MODULE_46__[\"default\"],\n    Material: _foundation_materials_Material__WEBPACK_IMPORTED_MODULE_47__[\"default\"],\n    MaterialHelper: _foundation_helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_48__[\"default\"],\n    ShaderSemantics: _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_49__[\"ShaderSemantics\"],\n    RenderPass: _foundation_renderer_RenderPass__WEBPACK_IMPORTED_MODULE_50__[\"default\"],\n    FrameBuffer: _foundation_renderer_FrameBuffer__WEBPACK_IMPORTED_MODULE_51__[\"default\"],\n    Expression: _foundation_renderer_Expression__WEBPACK_IMPORTED_MODULE_52__[\"default\"],\n    HdriFormat: _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_53__[\"HdriFormat\"],\n    RenderTargetTexture: _foundation_textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_54__[\"default\"],\n    RenderBuffer: _foundation_textures_RenderBuffer__WEBPACK_IMPORTED_MODULE_55__[\"default\"],\n    TextureParameter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_56__[\"TextureParameter\"],\n    RenderableHelper: _foundation_helpers_RenderableHelper__WEBPACK_IMPORTED_MODULE_57__[\"default\"],\n    Texture: _foundation_textures_Texture__WEBPACK_IMPORTED_MODULE_58__[\"default\"],\n    EntityHelper: _foundation_helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_59__[\"default\"],\n    MathClassUtil: _foundation_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_60__[\"default\"],\n    Mesh: _foundation_geometry_Mesh__WEBPACK_IMPORTED_MODULE_61__[\"default\"],\n    MathUtil: _foundation_math_MathUtil__WEBPACK_IMPORTED_MODULE_62__[\"MathUtil\"],\n    Component: _foundation_core_Component__WEBPACK_IMPORTED_MODULE_63__[\"default\"],\n    EnvConstantSingleMaterialNode: _foundation_materials_EnvConstantSingleMaterialNode__WEBPACK_IMPORTED_MODULE_64__[\"default\"],\n    RnObject: _foundation_core_RnObject__WEBPACK_IMPORTED_MODULE_65__[\"default\"],\n    VRMImporter: _foundation_importer_VRMImporter__WEBPACK_IMPORTED_MODULE_66__[\"default\"],\n    BlendShapeComponent: _foundation_components_BlendShapeComponent__WEBPACK_IMPORTED_MODULE_67__[\"default\"],\n    AnimationAssigner: _foundation_importer_AnimationAssigner__WEBPACK_IMPORTED_MODULE_68__[\"default\"],\n    MiscUtil: _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_69__[\"MiscUtil\"],\n    OrbitCameraController: _foundation_cameras_OrbitCameraController__WEBPACK_IMPORTED_MODULE_70__[\"default\"],\n    WalkThroughCameraController: _foundation_cameras_WalkThroughCameraController__WEBPACK_IMPORTED_MODULE_71__[\"default\"]\n};\nif (typeof exports !== 'undefined') {\n    Object.defineProperty(exports, \"__esModule\", {\n        value: true\n    });\n    exports.default = Rn;\n}\n(0, eval)('this').Rn = Rn;\n\n\n//# sourceURL=webpack:///./src/rhodonite.ts?");

/***/ }),

/***/ "./src/sparkgear/SparkGearComponent.ts":
/*!*********************************************!*\
  !*** ./src/sparkgear/SparkGearComponent.ts ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SparkGearComponent; });\n/* harmony import */ var _foundation_core_Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/components/WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/definitions/ProcessStage */ \"./src/foundation/definitions/ProcessStage.ts\");\n/* harmony import */ var _foundation_math_Matrix44__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/math/Matrix44 */ \"./src/foundation/math/Matrix44.ts\");\n/* harmony import */ var _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation/components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../foundation/core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _foundation_components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../foundation/components/SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _foundation_system_ModuleManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../foundation/system/ModuleManager */ \"./src/foundation/system/ModuleManager.ts\");\n\n\n\n\n\n\n\n\nclass SparkGearComponent extends _foundation_core_Component__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor(entityUid, componentSid, entityRepository) {\n        super(entityUid, componentSid, entityRepository);\n    }\n    static get componentTID() {\n        return _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_1__[\"WellKnownComponentTIDs\"].SparkGearComponentTID;\n    }\n    static common_$load() {\n        if (SparkGearComponent.__isInitialized) {\n            return;\n        }\n        const moduleManager = _foundation_system_ModuleManager__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getInstance();\n        const moduleName = 'webgl';\n        const webglModule = moduleManager.getModule(moduleName);\n        // Initialize SPARKGEAR\n        SparkGearComponent.SPFX_Initialize(webglModule.WebGLResourceRepository.getInstance());\n    }\n    $logic() {\n        // Keep Playing\n        if (!this.isPlaying()) {\n            this.play();\n        }\n        const cameraComponent = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInstance().getComponent(_foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_4__[\"default\"], _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_4__[\"default\"].main);\n        let viewMatrix = SparkGearComponent.__tmp_indentityMatrix;\n        let projectionMatrix = SparkGearComponent.__tmp_indentityMatrix;\n        if (cameraComponent) {\n            viewMatrix = cameraComponent.viewMatrix;\n            projectionMatrix = cameraComponent.projectionMatrix;\n        }\n        SparkGearComponent.SPARK_SetCameraMatrix(viewMatrix, projectionMatrix);\n        SparkGearComponent.SPFX_Update(1.0);\n        const m = this.__sceneGraphComponent.worldMatrixInner;\n        _SPARK_Instance_SetTransformFor3D(this.__hSPFXInst, m.v[0], m.v[4], m.v[8], m.v[12], m.v[1], m.v[5], m.v[9], m.v[13], m.v[2], m.v[6], m.v[10], m.v[14], m.v[3], m.v[7], m.v[11], m.v[15]);\n        this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__[\"ProcessStage\"].Render);\n    }\n    $render() {\n        this.onAfterRender();\n        this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__[\"ProcessStage\"].Logic);\n    }\n    $load() {\n        if (this.url == null) {\n            return;\n        }\n        const loadBytes = function (path, type, callback) {\n            var request = new XMLHttpRequest();\n            request.open('GET', path, true);\n            request.responseType = type;\n            request.onload = () => {\n                switch (request.status) {\n                    case 200:\n                        callback(request.response);\n                        break;\n                    default:\n                        console.error('Failed to load (' + request.status + ') : ' + path);\n                        break;\n                }\n            };\n            request.send(null);\n        };\n        const ThisClass = SparkGearComponent;\n        loadBytes(this.url, 'arraybuffer', (data) => {\n            var buffer = new Uint8Array(data);\n            ThisClass.SPARK_BackupStatus();\n            var SPFXData = window.Module.ccall(\"SPARK_Data_Create\", 'number', ['string', 'number', 'array', 'number'], [this.url, this.url.length, buffer, buffer.length]);\n            this.__hSPFXInst = _SPARK_Instance_Create(SPFXData);\n            _SPARK_Data_Delete(SPFXData);\n            ThisClass.SPARK_RestoreStatus();\n            this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__[\"ProcessStage\"].Logic);\n        });\n    }\n    $create() {\n        this.__sceneGraphComponent = this.__entityRepository.getComponentOfEntity(this.__entityUid, _foundation_components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n        this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__[\"ProcessStage\"].Load);\n    }\n    onBeforeRender() {\n    }\n    onAfterRender() {\n        const ThisClass = SparkGearComponent;\n        ThisClass.SPARK_BackupStatus();\n        _SPARK_Draw(this.__hSPFXInst);\n        ThisClass.SPARK_RestoreStatus();\n    }\n    // clone() {\n    //   return new this.constructor(this._LoadingManager, this._Url).copy(this);\n    // }\n    play() {\n        _SPARK_Instance_Play(this.__hSPFXInst, 1.0, false, 0);\n    }\n    stop() {\n        _SPARK_Instance_Stop(this.__hSPFXInst);\n    }\n    pause() {\n        _SPARK_Instance_Pause(this.__hSPFXInst);\n    }\n    isPlaying() {\n        return _SPARK_Instance_IsPlaying(this.__hSPFXInst);\n    }\n    kickTrigger(trigger) {\n        _SPARK_Instance_KickTrigger(this.__hSPFXInst, trigger);\n    }\n    static SPARK_BackupStatus() {\n        const ThisClass = SparkGearComponent;\n        const gl = ThisClass.SPFX_WebGLResourceRepository.currentWebGLContextWrapper.getRawContext();\n        ThisClass.SPFX_ArrayBuffer = gl.getParameter(gl.ARRAY_BUFFER_BINDING);\n        ThisClass.SPFX_ElementArrayBuffer = gl.getParameter(gl.ELEMENT_ARRAY_BUFFER_BINDING);\n        ThisClass.SPFX_CurrentProgram = gl.getParameter(gl.CURRENT_PROGRAM);\n        ThisClass.SPFX_FrontFace = gl.getParameter(gl.FRONT_FACE);\n        ThisClass.SPFX_DepthFunc = gl.getParameter(gl.DEPTH_FUNC);\n        ThisClass.SPFX_DepthWriteMask = gl.getParameter(gl.DEPTH_WRITEMASK);\n        ThisClass.SPFX_StencilTestEnabled = gl.isEnabled(gl.STENCIL_TEST);\n        ThisClass.SPFX_DepthTestEnabled = gl.isEnabled(gl.DEPTH_TEST);\n        ThisClass.SPFX_CullFaceEnabled = gl.isEnabled(gl.CULL_FACE);\n        ThisClass.SPFX_BlendEnabled = gl.isEnabled(gl.BLEND);\n        ThisClass.SPFX_BlendSrcRgb = gl.getParameter(gl.BLEND_SRC_RGB);\n        ThisClass.SPFX_BlendDstRgb = gl.getParameter(gl.BLEND_DST_RGB);\n        ThisClass.SPFX_BlendSrcAlpha = gl.getParameter(gl.BLEND_SRC_ALPHA);\n        ThisClass.SPFX_BlendDstAlpha = gl.getParameter(gl.BLEND_DST_ALPHA);\n        ThisClass.SPFX_ActiveTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n        for (let i = 0; i < 8; i++) {\n            gl.activeTexture(gl.TEXTURE0 + i);\n            ThisClass.SPFX_Texture[i] = gl.getParameter(gl.TEXTURE_BINDING_2D);\n        }\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    }\n    static SPFX_Uninitialize() {\n        const ThisClass = SparkGearComponent;\n        ThisClass.SPARK_BackupStatus();\n        _SPARK_Uninitialize();\n        ThisClass.SPARK_RestoreStatus();\n    }\n    static SPARK_SetCameraMatrix(viewMatrix, projectionMatrix) {\n        _SPARK_SetMatrix(0, viewMatrix.v[0], viewMatrix.v[1], viewMatrix.v[2], viewMatrix.v[3], viewMatrix.v[4], viewMatrix.v[5], viewMatrix.v[6], viewMatrix.v[7], viewMatrix.v[8], viewMatrix.v[9], viewMatrix.v[10], viewMatrix.v[11], viewMatrix.v[12], viewMatrix.v[13], viewMatrix.v[14], viewMatrix.v[15]);\n        _SPARK_SetMatrix(1, projectionMatrix.v[0], projectionMatrix.v[1], projectionMatrix.v[2], projectionMatrix.v[3], projectionMatrix.v[4], projectionMatrix.v[5], projectionMatrix.v[6], projectionMatrix.v[7], projectionMatrix.v[8], projectionMatrix.v[9], projectionMatrix.v[10], projectionMatrix.v[11], projectionMatrix.v[12], projectionMatrix.v[13], projectionMatrix.v[14], projectionMatrix.v[15]);\n    }\n    static SPARK_Draw() {\n        const ThisClass = SparkGearComponent;\n        ThisClass.SPARK_BackupStatus();\n        _SPARK_DrawAll();\n        ThisClass.SPARK_RestoreStatus();\n    }\n    static SPARK_DrawDebugInfo(InfoType) {\n        const ThisClass = SparkGearComponent;\n        ThisClass.SPARK_BackupStatus();\n        _SPARK_DrawDebugInfo(InfoType);\n        ThisClass.SPARK_RestoreStatus();\n    }\n}\nSparkGearComponent.__isInitialized = false;\nSparkGearComponent.SPFX_Texture = [];\nSparkGearComponent.__tmp_indentityMatrix = _foundation_math_Matrix44__WEBPACK_IMPORTED_MODULE_3__[\"default\"].identity();\nSparkGearComponent.SPARK_RestoreStatus = function () {\n    const ThisClass = SparkGearComponent;\n    const gl = ThisClass.SPFX_WebGLResourceRepository.currentWebGLContextWrapper.getRawContext();\n    gl.useProgram(ThisClass.SPFX_CurrentProgram);\n    gl.bindBuffer(gl.ARRAY_BUFFER, ThisClass.SPFX_ArrayBuffer);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ThisClass.SPFX_ElementArrayBuffer);\n    gl.frontFace(ThisClass.SPFX_FrontFace);\n    gl.depthFunc(ThisClass.SPFX_DepthFunc);\n    gl.depthMask(ThisClass.SPFX_DepthWriteMask);\n    gl.blendFuncSeparate(ThisClass.SPFX_BlendSrcRgb, ThisClass.SPFX_BlendDstRgb, ThisClass.SPFX_BlendSrcAlpha, ThisClass.SPFX_BlendDstAlpha);\n    ThisClass.SPFX_StencilTestEnabled ? gl.enable(gl.STENCIL_TEST) : gl.disable(gl.STENCIL_TEST);\n    ThisClass.SPFX_DepthTestEnabled ? gl.enable(gl.DEPTH_TEST) : gl.disable(gl.DEPTH_TEST);\n    ThisClass.SPFX_CullFaceEnabled ? gl.enable(gl.CULL_FACE) : gl.disable(gl.CULL_FACE);\n    ThisClass.SPFX_BlendEnabled ? gl.enable(gl.BLEND) : gl.disable(gl.BLEND);\n    for (let i = 0; i < 8; i++) {\n        gl.activeTexture(gl.TEXTURE0 + i);\n        gl.bindTexture(gl.TEXTURE_2D, ThisClass.SPFX_Texture[i]);\n    }\n    gl.activeTexture(ThisClass.SPFX_ActiveTexture);\n};\nSparkGearComponent.SPFX_Initialize = function (repository) {\n    const ThisClass = SparkGearComponent;\n    if (repository.currentWebGLContextWrapper == null) {\n        return;\n    }\n    ThisClass.SPFX_WebGLResourceRepository = repository;\n    window.GLctx = ThisClass.SPFX_WebGLResourceRepository.currentWebGLContextWrapper.getRawContext();\n    ThisClass.SPARK_BackupStatus();\n    const glw = ThisClass.SPFX_WebGLResourceRepository.currentWebGLContextWrapper;\n    _SPARK_InitializeFor3D(glw.width, glw.height);\n    ThisClass.SPARK_RestoreStatus();\n    ThisClass.__isInitialized = true;\n};\nSparkGearComponent.SPFX_Update = function (DeltaTime) {\n    _SPARK_Update(DeltaTime);\n};\n_foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].registerComponentClass(SparkGearComponent);\n\n\n//# sourceURL=webpack:///./src/sparkgear/SparkGearComponent.ts?");

/***/ }),

/***/ "./src/sparkgear/main.ts":
/*!*******************************!*\
  !*** ./src/sparkgear/main.ts ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _SparkGearComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SparkGearComponent */ \"./src/sparkgear/SparkGearComponent.ts\");\n/* harmony import */ var _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/core/EntityRepository */ \"./src/foundation/core/EntityRepository.ts\");\n/* harmony import */ var _foundation_components_TransformComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/components/TransformComponent */ \"./src/foundation/components/TransformComponent.ts\");\n/* harmony import */ var _foundation_components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/components/SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n\n\n\n\nconst createSparkGearEntity = function () {\n    const entityRepository = _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\n    const entity = entityRepository.createEntity([_foundation_components_TransformComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"], _foundation_components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _SparkGearComponent__WEBPACK_IMPORTED_MODULE_0__[\"default\"]]);\n    return entity;\n};\nconst SparkGear = Object.freeze({\n    SparkGearComponent: _SparkGearComponent__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n    createSparkGearEntity\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (SparkGear);\n\n\n//# sourceURL=webpack:///./src/sparkgear/main.ts?");

/***/ }),

/***/ "./src/webgl/WebGLContextWrapper.ts":
/*!******************************************!*\
  !*** ./src/webgl/WebGLContextWrapper.ts ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return WebGLContextWrapper; });\n/* harmony import */ var _WebGLExtension__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WebGLExtension */ \"./src/webgl/WebGLExtension.ts\");\n\nclass WebGLContextWrapper {\n    constructor(gl, canvas, isDebug) {\n        this.__webglVersion = 1;\n        this.width = 0;\n        this.height = 0;\n        this.__activeTextures2D = [];\n        this.__activeTexturesCube = [];\n        this.__isDebugMode = false;\n        this.__extensions = new Map();\n        this.__gl = gl;\n        this.width = canvas.width;\n        this.height = canvas.height;\n        this.canvas = canvas;\n        this.__isDebugMode = isDebug;\n        if (this.__gl.constructor.name === 'WebGL2RenderingContext') {\n            this.__webglVersion = 2;\n            this.webgl2ExtTFL = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].TextureFloatLinear);\n        }\n        else {\n            this.webgl1ExtVAO = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].VertexArrayObject);\n            this.webgl1ExtIA = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].InstancedArrays);\n            this.webgl1ExtTF = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].TextureFloat);\n            this.webgl1ExtTHF = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].TextureHalfFloat);\n            this.webgl1ExtTFL = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].TextureFloatLinear);\n            this.webgl1ExtTHFL = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].TextureHalfFloatLinear);\n            this.webgl1ExtTFA = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].TextureFilterAnisotropic);\n            this.webgl1ExtEIUI = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].ElementIndexUint);\n            this.webgl1ExtSTL = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].ShaderTextureLod);\n            this.webgl1ExtDRV = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].ShaderDerivatives);\n            this.webgl1ExtDB = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].DrawBuffers);\n            this.webgl1ExtBM = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__[\"WebGLExtension\"].BlendMinmax);\n        }\n    }\n    getRawContext() {\n        return this.__gl;\n    }\n    isSupportWebGL1Extension(webGLExtension) {\n        if (this.__getExtension(webGLExtension)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    get isDebugMode() {\n        return this.__isDebugMode;\n    }\n    get isWebGL2() {\n        if (this.__webglVersion === 2) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    createVertexArray() {\n        if (this.isWebGL2) {\n            return this.__gl.createVertexArray();\n        }\n        else {\n            if (this.webgl1ExtVAO != null) {\n                return this.webgl1ExtVAO.createVertexArrayOES();\n            }\n        }\n    }\n    deleteVertexArray(vertexArray) {\n        if (this.isWebGL2) {\n            this.__gl.createVertexArray(vertexArray);\n        }\n        else {\n            if (this.webgl1ExtVAO != null) {\n                this.webgl1ExtVAO.deleteVertexArrayOES(vertexArray);\n            }\n        }\n    }\n    bindVertexArray(vao) {\n        if (this.isWebGL2) {\n            this.__gl.bindVertexArray(vao);\n        }\n        else {\n            if (this.webgl1ExtVAO != null) {\n                this.webgl1ExtVAO.bindVertexArrayOES(vao);\n            }\n        }\n    }\n    vertexAttribDivisor(index, divisor) {\n        if (this.isWebGL2) {\n            this.__gl.vertexAttribDivisor(index, divisor);\n        }\n        else {\n            this.webgl1ExtIA.vertexAttribDivisorANGLE(index, divisor);\n        }\n    }\n    drawElementsInstanced(primitiveMode, indexCount, type, offset, instanceCount) {\n        if (this.isWebGL2) {\n            this.__gl.drawElementsInstanced(primitiveMode, indexCount, type, offset, instanceCount);\n        }\n        else {\n            this.webgl1ExtIA.drawElementsInstancedANGLE(primitiveMode, indexCount, type, offset, instanceCount);\n        }\n    }\n    drawArraysInstanced(primitiveMode, first, count, instanceCount) {\n        if (this.isWebGL2) {\n            this.__gl.drawArraysInstanced(primitiveMode, first, count, instanceCount);\n        }\n        else {\n            this.webgl1ExtIA.drawArraysInstancedANGLE(primitiveMode, first, count, instanceCount);\n        }\n    }\n    colorAttachiment(index) {\n        return this.webgl1ExtDB ?\n            this.webgl1ExtDB[`COLOR_ATTACHMENT${index}_WEBGL`] :\n            this.__gl[`COLOR_ATTACHMENT${index}`];\n    }\n    drawBuffers(buffers) {\n        const gl = this.__gl;\n        if (buffers.length === 0) {\n            return;\n        }\n        let buffer = buffers;\n        if (this.isWebGL2) {\n            gl.drawBuffers(buffers.map((buf) => { return gl[buf.str]; }));\n            buffer = gl[buffer[0].str];\n        }\n        else if (this.webgl1ExtDB) {\n            this.webgl1ExtDB.drawBuffersWEBGL(buffers.map((buf) => { return gl[buf.str]; }));\n            buffer = gl[buffer[0].str];\n        }\n        if (buffer === gl.NONE) {\n            gl.colorMask(false, false, false, false);\n        }\n        else {\n            gl.colorMask(true, true, true, true);\n        }\n    }\n    __activeTexture(activeTextureIndex) {\n        switch (activeTextureIndex) {\n            case 0:\n                this.__gl.activeTexture(this.__gl.TEXTURE0);\n                break;\n            case 1:\n                this.__gl.activeTexture(this.__gl.TEXTURE1);\n                break;\n            case 2:\n                this.__gl.activeTexture(this.__gl.TEXTURE2);\n                break;\n            case 3:\n                this.__gl.activeTexture(this.__gl.TEXTURE3);\n                break;\n            case 4:\n                this.__gl.activeTexture(this.__gl.TEXTURE4);\n                break;\n            case 5:\n                this.__gl.activeTexture(this.__gl.TEXTURE5);\n                break;\n            case 6:\n                this.__gl.activeTexture(this.__gl.TEXTURE6);\n                break;\n            case 7:\n                this.__gl.activeTexture(this.__gl.TEXTURE7);\n                break;\n            case 8:\n                this.__gl.activeTexture(this.__gl.TEXTURE8);\n                break;\n            case 9:\n                this.__gl.activeTexture(this.__gl.TEXTURE9);\n                break;\n            case 10:\n                this.__gl.activeTexture(this.__gl.TEXTURE10);\n                break;\n            case 11:\n                this.__gl.activeTexture(this.__gl.TEXTURE11);\n                break;\n            case 12:\n                this.__gl.activeTexture(this.__gl.TEXTURE12);\n                break;\n            case 13:\n                this.__gl.activeTexture(this.__gl.TEXTURE13);\n                break;\n            case 14:\n                this.__gl.activeTexture(this.__gl.TEXTURE14);\n                break;\n            case 15:\n                this.__gl.activeTexture(this.__gl.TEXTURE15);\n                break;\n        }\n    }\n    bindTexture2D(activeTextureIndex, texture) {\n        if (this.__isDebugMode) {\n            if (texture) {\n                this.__activeTextures2D[activeTextureIndex] = texture;\n            }\n            if (texture) {\n                if (texture._bound_as === 'CUBE_MAP') {\n                    debugger;\n                }\n                texture._bound_as = '2D';\n            }\n        }\n        this.__activeTexture(activeTextureIndex);\n        this.__gl.bindTexture(this.__gl.TEXTURE_2D, texture);\n    }\n    bindTextureCube(activeTextureIndex, texture) {\n        if (this.__isDebugMode) {\n            if (texture) {\n                this.__activeTexturesCube[activeTextureIndex] = texture;\n            }\n            if (texture) {\n                if (texture._bound_as === '2D') {\n                    debugger;\n                }\n                texture._bound_as = 'CUBE_MAP';\n            }\n        }\n        this.__activeTexture(activeTextureIndex);\n        this.__gl.bindTexture(this.__gl.TEXTURE_CUBE_MAP, texture);\n    }\n    unbindTexture2D(activeTextureIndex) {\n        if (this.__isDebugMode) {\n            delete this.__activeTextures2D[activeTextureIndex];\n        }\n        this.__activeTexture(activeTextureIndex);\n        this.__gl.bindTexture(this.__gl.TEXTURE_2D, null);\n    }\n    unbindTextureCube(activeTextureIndex) {\n        if (this.__isDebugMode) {\n            delete this.__activeTexturesCube[activeTextureIndex];\n        }\n        this.__activeTexture(activeTextureIndex);\n        this.__gl.bindTexture(this.__gl.TEXTURE_CUBE_MAP, null);\n    }\n    unbindTextures() {\n        for (let i = 0; i < this.__activeTextures2D.length; i++) {\n            if (this.__activeTextures2D[i] == null) {\n                continue;\n            }\n            this.__activeTexture(i);\n            this.__gl.bindTexture(this.__gl.TEXTURE_2D, null);\n            delete this.__activeTextures2D[i];\n        }\n        for (let i = 0; i < this.__activeTexturesCube.length; i++) {\n            if (this.__activeTexturesCube[i] == null) {\n                continue;\n            }\n            this.__activeTexture(i);\n            this.__gl.bindTexture(this.__gl.TEXTURE_CUBE_MAP, null);\n            delete this.__activeTexturesCube[i];\n        }\n    }\n    __getExtension(extension) {\n        const gl = this.__gl;\n        if (!this.__extensions.has(extension)) {\n            const extObj = gl.getExtension(extension.toString());\n            if (extObj == null) {\n                const text = `The library does not support this environment because the ${extension.toString()} is not available`;\n                if (console.error != null) {\n                    console.error(text);\n                }\n                else {\n                    console.log(text);\n                }\n            }\n            this.__extensions.set(extension, extObj);\n            return extObj;\n        }\n        return this.__extensions.get(extension);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/webgl/WebGLContextWrapper.ts?");

/***/ }),

/***/ "./src/webgl/WebGLExtension.ts":
/*!*************************************!*\
  !*** ./src/webgl/WebGLExtension.ts ***!
  \*************************************/
/*! exports provided: WebGLExtension */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WebGLExtension\", function() { return WebGLExtension; });\n/* harmony import */ var _foundation_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/misc/EnumIO */ \"./src/foundation/misc/EnumIO.ts\");\n\nclass WebGLExtensionClass extends _foundation_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"EnumClass\"] {\n    constructor({ index, str }) {\n        super({ index, str });\n    }\n}\nconst VertexArrayObject = new WebGLExtensionClass({ index: 1, str: 'OES_vertex_array_object' });\nconst TextureFloat = new WebGLExtensionClass({ index: 2, str: 'OES_texture_float' });\nconst TextureHalfFloat = new WebGLExtensionClass({ index: 3, str: 'OES_texture_half_float' });\nconst TextureFloatLinear = new WebGLExtensionClass({ index: 4, str: 'OES_texture_float_linear' });\nconst TextureHalfFloatLinear = new WebGLExtensionClass({ index: 5, str: 'OES_texture_half_float_linear' });\nconst InstancedArrays = new WebGLExtensionClass({ index: 6, str: 'ANGLE_instanced_arrays' });\nconst TextureFilterAnisotropic = new WebGLExtensionClass({ index: 7, str: 'EXT_texture_filter_anisotropic' });\nconst ElementIndexUint = new WebGLExtensionClass({ index: 8, str: 'OES_element_index_uint' });\nconst ShaderTextureLod = new WebGLExtensionClass({ index: 9, str: 'EXT_shader_texture_lod' });\nconst ShaderDerivatives = new WebGLExtensionClass({ index: 10, str: 'OES_standard_derivatives' });\nconst DrawBuffers = new WebGLExtensionClass({ index: 11, str: 'WEBGL_draw_buffers' });\nconst BlendMinmax = new WebGLExtensionClass({ index: 12, str: 'EXT_blend_minmax' });\nconst typeList = [VertexArrayObject, TextureFloat, TextureHalfFloat, TextureFloatLinear,\n    TextureHalfFloatLinear, InstancedArrays, TextureFilterAnisotropic, ElementIndexUint,\n    ShaderTextureLod, ShaderDerivatives, DrawBuffers, BlendMinmax];\nfunction from({ index }) {\n    return Object(_foundation_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__[\"_from\"])({ typeList, index });\n}\nconst WebGLExtension = Object.freeze({\n    VertexArrayObject, TextureFloat, TextureHalfFloat, TextureFloatLinear, TextureHalfFloatLinear,\n    InstancedArrays, TextureFilterAnisotropic, ElementIndexUint, ShaderTextureLod,\n    ShaderDerivatives, DrawBuffers, BlendMinmax\n});\n\n\n//# sourceURL=webpack:///./src/webgl/WebGLExtension.ts?");

/***/ }),

/***/ "./src/webgl/WebGLResourceRepository.ts":
/*!**********************************************!*\
  !*** ./src/webgl/WebGLResourceRepository.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return WebGLResourceRepository; });\n/* harmony import */ var _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/definitions/TextureParameter */ \"./src/foundation/definitions/TextureParameter.ts\");\n/* harmony import */ var _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/definitions/PixelFormat */ \"./src/foundation/definitions/PixelFormat.ts\");\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../foundation/definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _WebGLContextWrapper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./WebGLContextWrapper */ \"./src/webgl/WebGLContextWrapper.ts\");\n/* harmony import */ var _foundation_math_MathUtil__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../foundation/math/MathUtil */ \"./src/foundation/math/MathUtil.ts\");\n/* harmony import */ var _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../foundation/definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _foundation_textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../foundation/textures/AbstractTexture */ \"./src/foundation/textures/AbstractTexture.ts\");\n/* harmony import */ var _foundation_textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../foundation/textures/RenderTargetTexture */ \"./src/foundation/textures/RenderTargetTexture.ts\");\n/* harmony import */ var _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../foundation/definitions/HdriFormat */ \"./src/foundation/definitions/HdriFormat.ts\");\n/* harmony import */ var _foundation_definitions_RenderBufferTarget__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../foundation/definitions/RenderBufferTarget */ \"./src/foundation/definitions/RenderBufferTarget.ts\");\n/* harmony import */ var _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../foundation/misc/MiscUtil */ \"./src/foundation/misc/MiscUtil.ts\");\n/* harmony import */ var _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../foundation/definitions/ShaderVariableUpdateInterval */ \"./src/foundation/definitions/ShaderVariableUpdateInterval.ts\");\n/* harmony import */ var _foundation_misc_DataUtil__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../foundation/misc/DataUtil */ \"./src/foundation/misc/DataUtil.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass WebGLResourceRepository extends _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor() {\n        super();\n        this.__webglContexts = new Map();\n        this.__resourceCounter = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].InvalidCGAPIResourceUid;\n        this.__webglResources = new Map();\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new (WebGLResourceRepository)();\n        }\n        return this.__instance;\n    }\n    addWebGLContext(gl, canvas, asCurrent, isDebug) {\n        const glw = new _WebGLContextWrapper__WEBPACK_IMPORTED_MODULE_6__[\"default\"](gl, canvas, isDebug);\n        this.__webglContexts.set('default', glw);\n        if (asCurrent) {\n            this.__glw = glw;\n        }\n    }\n    get currentWebGLContextWrapper() {\n        return this.__glw;\n    }\n    getResourceNumber() {\n        return ++this.__resourceCounter;\n    }\n    getWebGLResource(WebGLResourceHandle) {\n        const result = this.__webglResources.get(WebGLResourceHandle);\n        return (result != null) ? result : null;\n    }\n    createIndexBuffer(accsessor) {\n        const gl = this.__glw.getRawContext();\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        const ibo = gl.createBuffer();\n        const resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, ibo);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n        //    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, accsessor.bufferView.buffer.getArrayBuffer(), gl.STATIC_DRAW);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, accsessor.getTypedArray(), gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n        return resourceHandle;\n    }\n    createVertexBuffer(accessor) {\n        const gl = this.__glw.getRawContext();\n        ;\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        const vbo = gl.createBuffer();\n        const resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, vbo);\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n        gl.bufferData(gl.ARRAY_BUFFER, accessor.bufferView.getUint8Array(), gl.STATIC_DRAW);\n        //    gl.bufferData(gl.ARRAY_BUFFER, accessor.getTypedArray(), gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        return resourceHandle;\n    }\n    createVertexBufferFromTypedArray(typedArray) {\n        const gl = this.__glw.getRawContext();\n        ;\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        const vbo = gl.createBuffer();\n        const resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, vbo);\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n        gl.bufferData(gl.ARRAY_BUFFER, typedArray, gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        return resourceHandle;\n    }\n    resendVertexBuffer(primitive, vboHandles) {\n        const gl = this.__glw.getRawContext();\n        ;\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        const vbo = gl.createBuffer();\n        const resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, vbo);\n        primitive.attributeAccessors.forEach((accessor, i) => {\n            const vbo = this.getWebGLResource(vboHandles[i]);\n            gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n            gl.bufferData(gl.ARRAY_BUFFER, accessor.bufferView.getUint8Array(), gl.STATIC_DRAW);\n            //    gl.bufferData(gl.ARRAY_BUFFER, accessor.getTypedArray(), gl.STATIC_DRAW);\n            gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        });\n    }\n    createVertexArray() {\n        const gl = this.__glw;\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        const vao = this.__glw.createVertexArray();\n        const resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, vao);\n        return resourceHandle;\n    }\n    bindTexture2D(textureSlotIndex, textureUid) {\n        const texture = this.getWebGLResource(textureUid);\n        this.__glw.bindTexture2D(textureSlotIndex, texture);\n    }\n    bindTextureCube(textureSlotIndex, textureUid) {\n        const texture = this.getWebGLResource(textureUid);\n        this.__glw.bindTextureCube(textureSlotIndex, texture);\n    }\n    createVertexDataResources(primitive) {\n        const gl = this.__glw.getRawContext();\n        const vaoHandle = this.createVertexArray();\n        let iboHandle;\n        if (primitive.hasIndices()) {\n            iboHandle = this.createIndexBuffer(primitive.indicesAccessor);\n        }\n        const attributesFlags = [];\n        for (let i = 0; i < _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].AttributeTypeNumber; i++) {\n            attributesFlags[i] = false;\n        }\n        const vboHandles = [];\n        primitive.attributeAccessors.forEach((accessor, i) => {\n            const vboHandle = this.createVertexBuffer(accessor);\n            const slotIdx = primitive.attributeSemantics[i].getAttributeSlot();\n            attributesFlags[slotIdx] = true;\n            vboHandles.push(vboHandle);\n        });\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n        return { vaoHandle: vaoHandle, iboHandle: iboHandle, vboHandles: vboHandles, attributesFlags: attributesFlags, setComplete: false };\n    }\n    createVertexBufferAndIndexBuffer(primitive) {\n        const gl = this.__glw.getRawContext();\n        let iboHandle;\n        if (primitive.hasIndices()) {\n            iboHandle = this.createIndexBuffer(primitive.indicesAccessor);\n        }\n        const attributesFlags = [];\n        for (let i = 0; i < _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].AttributeTypeNumber; i++) {\n            attributesFlags[i] = false;\n        }\n        const vboHandles = [];\n        primitive.attributeAccessors.forEach((accessor, i) => {\n            const vboHandle = this.createVertexBuffer(accessor);\n            const slotIdx = primitive.attributeSemantics[i].getAttributeSlot();\n            attributesFlags[slotIdx] = true;\n            vboHandles.push(vboHandle);\n        });\n        return { vaoHandle: -1, iboHandle: iboHandle, vboHandles: vboHandles, attributesFlags: attributesFlags, setComplete: false };\n    }\n    createShaderProgram({ materialTypeName, vertexShaderStr, fragmentShaderStr, attributeNames, attributeSemantics }) {\n        const gl = this.__glw.getRawContext();\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        gl.shaderSource(vertexShader, vertexShaderStr);\n        gl.compileShader(vertexShader);\n        if (this.__glw.isDebugMode) {\n            this.__checkShaderCompileStatus(materialTypeName, vertexShader, vertexShaderStr);\n        }\n        const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        gl.shaderSource(fragmentShader, fragmentShaderStr);\n        gl.compileShader(fragmentShader);\n        if (this.__glw.isDebugMode) {\n            this.__checkShaderCompileStatus(materialTypeName, fragmentShader, fragmentShaderStr);\n        }\n        const shaderProgram = gl.createProgram();\n        shaderProgram._gl = gl;\n        shaderProgram._materialTypeName = materialTypeName;\n        shaderProgram._vertexShaderStr = vertexShaderStr;\n        shaderProgram._fragmentShaderStr = fragmentShaderStr;\n        gl.attachShader(shaderProgram, vertexShader);\n        gl.attachShader(shaderProgram, fragmentShader);\n        attributeNames.forEach((attributeName, i) => {\n            gl.bindAttribLocation(shaderProgram, attributeSemantics[i].getAttributeSlot(), attributeName);\n        });\n        gl.linkProgram(shaderProgram);\n        if (this.__glw.isDebugMode) {\n            this.__checkShaderProgramLinkStatus(materialTypeName, shaderProgram, vertexShaderStr, fragmentShaderStr);\n        }\n        const resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, shaderProgram);\n        gl.deleteShader(vertexShader);\n        gl.deleteShader(fragmentShader);\n        return resourceHandle;\n    }\n    __addLineNumber(shaderString) {\n        let shaderTextLines = shaderString.split(/\\r\\n|\\r|\\n/);\n        let shaderTextWithLineNumber = '';\n        for (let i = 0; i < shaderTextLines.length; i++) {\n            let lineIndex = i + 1;\n            let splitter = ' : ';\n            if (lineIndex < 10) {\n                splitter = '  : ';\n            }\n            else if (lineIndex >= 100) {\n                splitter = ': ';\n            }\n            shaderTextWithLineNumber += lineIndex + splitter + shaderTextLines[i] + '\\n';\n        }\n        return shaderTextWithLineNumber;\n    }\n    __checkShaderCompileStatus(materialTypeName, shader, shaderText) {\n        const gl = this.__glw.getRawContext();\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n            console.log('MaterialTypeName: ' + materialTypeName);\n            console.log(this.__addLineNumber(shaderText));\n            throw new Error('An error occurred compiling the shaders:' + gl.getShaderInfoLog(shader));\n        }\n    }\n    __checkShaderProgramLinkStatus(materialTypeName, shaderProgram, vertexShaderText, fragmentShaderText) {\n        const gl = this.__glw.getRawContext();\n        // If creating the shader program failed, alert\n        if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n            console.log('MaterialTypeName: ' + materialTypeName);\n            console.log(this.__addLineNumber('Vertex Shader:'));\n            console.log(this.__addLineNumber(vertexShaderText));\n            console.log(this.__addLineNumber('Fragment Shader:'));\n            console.log(this.__addLineNumber(fragmentShaderText));\n            throw new Error('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram));\n        }\n    }\n    setupUniformLocations(shaderProgramUid, dataArray) {\n        const gl = this.__glw.getRawContext();\n        const shaderProgram = this.getWebGLResource(shaderProgramUid);\n        const shaderSemanticsInfoMap = new Map();\n        for (let arg of dataArray) {\n            shaderSemanticsInfoMap.set(arg.semantic.str, arg);\n        }\n        for (let data of dataArray) {\n            let semanticSingular = data.semantic.str;\n            let identifier = semanticSingular;\n            let shaderVarName = _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__[\"ShaderSemantics\"].fullSemanticStr(data);\n            if (data.index != null) {\n                if (shaderVarName.match(/\\[.+?\\]/)) {\n                    shaderVarName = shaderVarName.replace(/\\[.+?\\]/g, `[${data.index}]`);\n                }\n                else {\n                    shaderVarName += `[${data.index}]`;\n                }\n            }\n            const location = gl.getUniformLocation(shaderProgram, 'u_' + shaderVarName);\n            if (data.index != null) {\n                if (shaderProgram[identifier] == null) {\n                    shaderProgram[identifier] = [];\n                }\n                shaderProgram[identifier][data.index] = location;\n            }\n            else {\n                shaderProgram[identifier] = location;\n            }\n        }\n        if (shaderProgram._shaderSemanticsInfoMap != null) {\n            shaderProgram._shaderSemanticsInfoMap = new Map([...shaderProgram._shaderSemanticsInfoMap, ...shaderSemanticsInfoMap]);\n        }\n        else {\n            shaderProgram._shaderSemanticsInfoMap = shaderSemanticsInfoMap;\n        }\n        return shaderProgram;\n    }\n    __isUniformValueDirty(isVector, shaderProgram, identifier, { x, y, z, w }, delta = Number.EPSILON) {\n        const valueIdentifier = identifier + '_value';\n        const value = shaderProgram[valueIdentifier];\n        if (value == null) {\n            return true;\n        }\n        let result = false;\n        if (isVector) {\n            const length = x.length;\n            if (length > 4) {\n                return true;\n            }\n            for (let i = 0; i < length; i++) {\n                if (Math.abs(x[i] - value[i]) >= delta) {\n                    result = true;\n                    break;\n                }\n            }\n            shaderProgram[valueIdentifier] = x;\n        }\n        else {\n            const compare = () => {\n                if (x != null && Math.abs(x - value[0]) >= delta) {\n                    return true;\n                }\n                if (y != null && Math.abs(y - value[1]) >= delta) {\n                    return true;\n                }\n                if (z != null && Math.abs(z - value[2]) >= delta) {\n                    return true;\n                }\n                if (w != null && Math.abs(w - value[3]) >= delta) {\n                    return true;\n                }\n                return false;\n            };\n            result = compare();\n            shaderProgram[valueIdentifier] = [x, y, z, w];\n        }\n        return result;\n    }\n    setUniformValue(shaderProgram, semanticStr, firstTime, value, index) {\n        const info = shaderProgram._shaderSemanticsInfoMap.get(semanticStr);\n        if (info == null) {\n            return false;\n        }\n        if (!firstTime) {\n            const updateInterval = info.updateInteval;\n            if (updateInterval != null && updateInterval === _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_14__[\"ShaderVariableUpdateInterval\"].FirstTimeOnly) {\n                return false;\n            }\n            // if (!this.__isUniformValueDirty(isVector, shaderProgram, identifier, {x, y, z, w}, delta)) {\n            //   return false;\n            // }\n        }\n        let setAsMatrix = false;\n        let componentNumber = info.compositionType.getNumberOfComponents();\n        if (info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Mat3) {\n            setAsMatrix = true;\n            componentNumber = 3;\n        }\n        else if (info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Mat4) {\n            setAsMatrix = true;\n            componentNumber = 4;\n        }\n        const key = semanticStr;\n        let updated = false;\n        if (info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Texture2D || info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].TextureCube) {\n            if (value[0] != null && value[1] != null) {\n                if (info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Texture2D) {\n                    this.bindTexture2D(value[0], (value[1] instanceof _foundation_textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_9__[\"default\"]) ? value[1].cgApiResourceUid : value[1]);\n                }\n                else if (info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].TextureCube) {\n                    this.bindTextureCube(value[0], (value[1] instanceof _foundation_textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_9__[\"default\"]) ? value[1].cgApiResourceUid : value[1]);\n                }\n                if (firstTime) {\n                    updated = this.setUniformValueInner(shaderProgram, key, info, setAsMatrix, componentNumber, false, { x: value[0] }, { firstTime: firstTime }, index);\n                }\n            }\n        }\n        else if (index == null && (info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].ScalarArray || info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec4Array || info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3Array || info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec2Array)) {\n            if (value.v == null) {\n                updated = this.setUniformValueInner(shaderProgram, key, info, setAsMatrix, componentNumber, true, { x: value }, { firstTime: firstTime }, index);\n            }\n            else {\n                updated = this.setUniformValueInner(shaderProgram, key, info, setAsMatrix, componentNumber, true, { x: value.v }, { firstTime: firstTime }, index);\n            }\n        }\n        else if (info.compositionType !== _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar) {\n            if (value.v == null) {\n                updated = this.setUniformValueInner(shaderProgram, key, info, setAsMatrix, componentNumber, false, value, { firstTime: firstTime }, index);\n            }\n            else {\n                updated = this.setUniformValueInner(shaderProgram, key, info, setAsMatrix, componentNumber, true, { x: value.v }, { firstTime: firstTime }, index);\n            }\n        }\n        else {\n            // if CompositionType.Scalar, then...\n            if (value.v == null) {\n                updated = this.setUniformValueInner(shaderProgram, key, info, setAsMatrix, componentNumber, false, { x: value }, { firstTime: firstTime }, index);\n            }\n            else {\n                updated = this.setUniformValueInner(shaderProgram, key, info, setAsMatrix, componentNumber, true, { x: value.v }, { firstTime: firstTime }, index);\n            }\n        }\n        return updated;\n    }\n    setUniformValueInner(shaderProgram, semanticStr, info, isMatrix, componentNumber, isVector, { x, y, z, w }, { firstTime = true, delta }, index) {\n        let identifier = semanticStr;\n        let program;\n        if (index != null) {\n            program = shaderProgram[identifier][index];\n        }\n        else {\n            program = shaderProgram[identifier];\n        }\n        const gl = this.__glw.getRawContext();\n        if (isMatrix) {\n            if (componentNumber === 4) {\n                gl.uniformMatrix4fv(program, false, x);\n            }\n            else {\n                gl.uniformMatrix3fv(program, false, x);\n            }\n        }\n        else if (isVector) {\n            const componentType = info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Int || info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Short || info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Byte;\n            if (componentNumber === 1) {\n                if (componentType) {\n                    gl.uniform1iv(program, x);\n                }\n                else {\n                    gl.uniform1fv(program, x);\n                }\n            }\n            else if (componentNumber === 2) {\n                if (componentType) {\n                    gl.uniform2iv(program, x);\n                }\n                else {\n                    gl.uniform2fv(program, x);\n                }\n            }\n            else if (componentNumber === 3) {\n                if (componentType) {\n                    gl.uniform3iv(program, x);\n                }\n                else {\n                    gl.uniform3fv(program, x);\n                }\n            }\n            else if (componentNumber === 4) {\n                if (componentType) {\n                    gl.uniform4iv(program, x);\n                }\n                else {\n                    gl.uniform4fv(program, x);\n                }\n            }\n        }\n        else {\n            const componentType = info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Int || info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Short || info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Byte;\n            if (componentNumber === 1) {\n                if (componentType) {\n                    gl.uniform1i(program, x);\n                }\n                else {\n                    gl.uniform1f(program, x);\n                }\n            }\n            else if (componentNumber === 2) {\n                if (componentType) {\n                    gl.uniform2i(program, x, y);\n                }\n                else {\n                    gl.uniform2f(program, x, y);\n                }\n            }\n            else if (componentNumber === 3) {\n                if (componentType) {\n                    gl.uniform3i(program, x, y, z);\n                }\n                else {\n                    gl.uniform3f(program, x, y, z);\n                }\n            }\n            else if (componentNumber === 4) {\n                if (componentType) {\n                    gl.uniform4i(program, x, y, z, w);\n                }\n                else {\n                    gl.uniform4f(program, x, y, z, w);\n                }\n            }\n        }\n        return true;\n    }\n    setVertexDataToPipeline({ vaoHandle, iboHandle, vboHandles }, primitive, instanceIDBufferUid = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].InvalidCGAPIResourceUid) {\n        const gl = this.__glw.getRawContext();\n        const vao = this.getWebGLResource(vaoHandle);\n        // VAO bind\n        this.__glw.bindVertexArray(vao);\n        // IBO bind\n        if (iboHandle != null) {\n            const ibo = this.getWebGLResource(iboHandle);\n            if (ibo != null) {\n                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n            }\n            else {\n                throw new Error('Nothing Element Array Buffer!');\n            }\n        }\n        // bind vertex attributes to VBO's\n        vboHandles.forEach((vboHandle, i) => {\n            const vbo = this.getWebGLResource(vboHandle);\n            if (vbo != null) {\n                gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n            }\n            else {\n                throw new Error('Nothing Element Array Buffer at index ' + i);\n            }\n            gl.enableVertexAttribArray(primitive.attributeSemantics[i].getAttributeSlot());\n            gl.vertexAttribPointer(primitive.attributeSemantics[i].getAttributeSlot(), primitive.attributeCompositionTypes[i].getNumberOfComponents(), primitive.attributeComponentTypes[i].index, false, primitive.attributeAccessors[i].byteStride, primitive.attributeAccessors[i].byteOffsetInBufferView);\n        });\n        /// for InstanceIDBuffer\n        if (instanceIDBufferUid !== _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].InvalidCGAPIResourceUid) {\n            const instanceIDBuffer = this.getWebGLResource(instanceIDBufferUid);\n            if (instanceIDBuffer != null) {\n                gl.bindBuffer(gl.ARRAY_BUFFER, instanceIDBuffer);\n            }\n            else {\n                throw new Error('Nothing Element Array Buffer at index');\n            }\n            gl.enableVertexAttribArray(_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Instance.getAttributeSlot());\n            gl.vertexAttribPointer(_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Instance.getAttributeSlot(), _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar.getNumberOfComponents(), _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float.index, false, 0, 0);\n            this.__glw.vertexAttribDivisor(_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__[\"VertexAttribute\"].Instance.getAttributeSlot(), 1);\n        }\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        this.__glw.bindVertexArray(null);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    }\n    createTexture(data, { level, internalFormat, width, height, border, format, type, magFilter, minFilter, wrapS, wrapT, generateMipmap, anisotropy }) {\n        const gl = this.__glw.getRawContext();\n        const texture = gl.createTexture();\n        const resourceHandle = this.getResourceNumber();\n        texture._resourceUid = resourceHandle;\n        this.__webglResources.set(resourceHandle, texture);\n        this.__glw.bindTexture2D(0, texture);\n        if (data instanceof HTMLImageElement || data instanceof HTMLCanvasElement) {\n            if (this.__glw.isWebGL2) {\n                gl.texImage2D(gl.TEXTURE_2D, level, _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].RGBA8.index, width, height, border, format.index, _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].UnsignedByte.index, data);\n            }\n            else {\n                gl.texImage2D(gl.TEXTURE_2D, level, internalFormat.index, format.index, type.index, data);\n            }\n        }\n        else {\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat.index, width, height, border, format.index, type.index, data);\n        }\n        const isGenerateMipmap = generateMipmap && (width === height && width !== 1 && !(this.__glw.isWebGL2 && _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_13__[\"MiscUtil\"].isMobile()));\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS.index);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT.index);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter.index);\n        if (isGenerateMipmap) {\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter.index);\n        }\n        else {\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        }\n        if (_foundation_math_MathUtil__WEBPACK_IMPORTED_MODULE_7__[\"MathUtil\"].isPowerOfTwoTexture(width, height)) {\n            if (anisotropy && this.__glw.webgl1ExtTFA) {\n                gl.texParameteri(gl.TEXTURE_2D, this.__glw.webgl1ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT, 4);\n            }\n            if (isGenerateMipmap) {\n                gl.generateMipmap(gl.TEXTURE_2D);\n            }\n        }\n        this.__glw.unbindTexture2D(0);\n        return resourceHandle;\n    }\n    createAtfTexture(atf, { level, internalFormat, width, height, border, format, type, magFilter, minFilter, wrapS, wrapT, generateMipmap, anisotropy }) {\n        const gl = this.__glw.getRawContext();\n        const texture = gl.createTexture();\n        const resourceHandle = this.getResourceNumber();\n        texture._resourceUid = resourceHandle;\n        this.__webglResources.set(resourceHandle, texture);\n        this.__glw.bindTexture2D(0, texture);\n        let s3tc = gl.getExtension(\"WEBGL_compressed_texture_s3tc\");\n        if (s3tc) {\n            gl.compressedTexImage2D(gl.TEXTURE_2D, level, s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT, atf.width, atf.height, border, atf.dataArray);\n        }\n        let etc1 = gl.getExtension(\"WEBGL_compressed_texture_etc1\");\n        if (etc1) {\n            gl.compressedTexImage2D(gl.TEXTURE_2D, level, etc1.COMPRESSED_RGB_ETC1_WEBGL, atf.width, atf.height, border, atf.dataArray);\n        }\n        let pvrtc = gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") || gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");\n        if (pvrtc) {\n            gl.compressedTexImage2D(gl.TEXTURE_2D, level, pvrtc.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG, atf.width, atf.height, border, atf.dataArray);\n        }\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        this.__glw.unbindTexture2D(0);\n        return resourceHandle;\n    }\n    createFrameBufferObject() {\n        const gl = this.__glw.getRawContext();\n        var fbo = gl.createFramebuffer();\n        const resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, fbo);\n        return resourceHandle;\n    }\n    attachColorBufferToFrameBufferObject(framebuffer, index, renderable) {\n        const gl = this.__glw.getRawContext();\n        const fbo = this.getWebGLResource(framebuffer.framebufferUID);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n        const renderableWebGLResource = this.getWebGLResource(renderable.cgApiResourceUid);\n        const attachimentId = this.__glw.colorAttachiment(index);\n        if (renderable instanceof _foundation_textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_10__[\"default\"]) {\n            renderable._fbo = framebuffer;\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, attachimentId, gl.TEXTURE_2D, renderableWebGLResource, 0);\n        }\n        else {\n            // It's must be RenderBuffer\n            renderable._fbo = framebuffer;\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachimentId, gl.RENDERBUFFER, renderableWebGLResource);\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    }\n    attachDepthBufferToFrameBufferObject(framebuffer, renderable) {\n        this.__attachDepthOrStencilBufferToFrameBufferObject(framebuffer, renderable, 36096); // gl.DETPH_ATTACHMENT\n    }\n    attachStencilBufferToFrameBufferObject(framebuffer, renderable) {\n        this.__attachDepthOrStencilBufferToFrameBufferObject(framebuffer, renderable, 36128); // gl.STENCIL_ATTACHMENT\n    }\n    attachDepthStencilBufferToFrameBufferObject(framebuffer, renderable) {\n        this.__attachDepthOrStencilBufferToFrameBufferObject(framebuffer, renderable, 33306); // gl.DEPTH_STENCIL_ATTACHMENT\n    }\n    __attachDepthOrStencilBufferToFrameBufferObject(framebuffer, renderable, attachmentType) {\n        const gl = this.__glw.getRawContext();\n        const fbo = this.getWebGLResource(framebuffer.framebufferUID);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n        const renderableWebGLResource = this.getWebGLResource(renderable.cgApiResourceUid);\n        if (renderable instanceof _foundation_textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_10__[\"default\"]) {\n            renderable._fbo = framebuffer;\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.TEXTURE_2D, renderableWebGLResource, 0);\n        }\n        else {\n            // It's must be RenderBuffer\n            renderable._fbo = framebuffer;\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachmentType, gl.RENDERBUFFER, renderableWebGLResource);\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    }\n    createRenderBuffer(width, height, internalFormat) {\n        const gl = this.__glw.getRawContext();\n        var renderBuffer = gl.createRenderbuffer();\n        const resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, renderBuffer);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, renderBuffer);\n        gl.renderbufferStorage(gl.RENDERBUFFER, gl[internalFormat.str], width, height);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        return resourceHandle;\n    }\n    setDrawTargets(framebuffer) {\n        if (framebuffer) {\n            this.__glw.drawBuffers(framebuffer.colorAttachmentsRenderBufferTargets);\n        }\n        else {\n            this.__glw.drawBuffers([_foundation_definitions_RenderBufferTarget__WEBPACK_IMPORTED_MODULE_12__[\"RenderBufferTarget\"].Back]);\n        }\n    }\n    bindFramebuffer(framebuffer) {\n        const gl = this.__glw.getRawContext();\n        if (framebuffer) {\n            const fboUid = framebuffer.cgApiResourceUid;\n            const fbo = this.getWebGLResource(fboUid);\n            gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n        }\n        else {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        }\n    }\n    unbindFramebuffer() {\n        const gl = this.__glw.getRawContext();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    }\n    createRenderTargetTexture({ width, height, level, internalFormat, format, type, magFilter, minFilter, wrapS, wrapT }) {\n        const gl = this.__glw.getRawContext();\n        const texture = gl.createTexture();\n        const resourceHandle = this.getResourceNumber();\n        texture._resourceUid = resourceHandle;\n        this.__webglResources.set(resourceHandle, texture);\n        this.__glw.bindTexture2D(0, texture);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter.index);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter.index);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS.index);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT.index);\n        if (\n        // if WebGL2\n        this.__glw.isWebGL2 &&\n            // if DEPTH_COMPONENT\n            (internalFormat.index === 6402 || internalFormat.index === 33189 ||\n                internalFormat.index === 33190 || internalFormat.index === 33191)) {\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_COMPARE_MODE, gl.COMPARE_REF_TO_TEXTURE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_COMPARE_FUNC, gl.LESS);\n        }\n        if (this.__glw.isWebGL2) {\n            gl.texImage2D(gl.TEXTURE_2D, level, _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].RGBA8.index, width, height, 0, format.index, _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].UnsignedByte.index, null);\n        }\n        else {\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat.index, width, height, 0, format.index, type.index, null);\n        }\n        this.__glw.unbindTexture2D(0);\n        return resourceHandle;\n    }\n    createCubeTexture(mipLevelCount, images, width, height) {\n        const gl = this.__glw.getRawContext();\n        const texture = gl.createTexture();\n        const resourceHandle = this.getResourceNumber();\n        texture._resourceUid = resourceHandle;\n        this.__webglResources.set(resourceHandle, texture);\n        this.__glw.bindTextureCube(0, texture);\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        if (mipLevelCount >= 2) {\n            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        }\n        else {\n            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        }\n        const loadImageToGPU = (image, cubemapSide, i) => {\n            if (image.hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_11__[\"HdriFormat\"].HDR) {\n                gl.texImage2D(cubemapSide, i, gl.RGB, image.width, image.height, 0, gl.RGB, gl.FLOAT, image.dataFloat);\n            }\n            else if (image instanceof HTMLImageElement || image instanceof HTMLCanvasElement) {\n                gl.texImage2D(cubemapSide, i, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n            }\n            else {\n                gl.texImage2D(cubemapSide, i, gl.RGBA, width / (i + 1), height / (i + 1), 0, gl.RGBA, gl.UNSIGNED_BYTE, image);\n            }\n        };\n        for (let i = 0; i < images.length; i++) {\n            const image = images[i];\n            loadImageToGPU(image.posX, gl.TEXTURE_CUBE_MAP_POSITIVE_X, i);\n            loadImageToGPU(image.negX, gl.TEXTURE_CUBE_MAP_NEGATIVE_X, i);\n            loadImageToGPU(image.posY, gl.TEXTURE_CUBE_MAP_POSITIVE_Y, i);\n            loadImageToGPU(image.negY, gl.TEXTURE_CUBE_MAP_NEGATIVE_Y, i);\n            loadImageToGPU(image.posZ, gl.TEXTURE_CUBE_MAP_POSITIVE_Z, i);\n            loadImageToGPU(image.negZ, gl.TEXTURE_CUBE_MAP_NEGATIVE_Z, i);\n        }\n        this.__glw.unbindTextureCube(0);\n        return resourceHandle;\n    }\n    /**\n     * Create Cube Texture from image files.\n     * @param baseUri the base uri to load images;\n     * @param mipLevelCount the number of mip levels (include root level). if no mipmap, the value should be 1;\n     * @returns the WebGLResourceHandle for the generated Cube Texture\n     */\n    createCubeTextureFromFiles(baseUri, mipLevelCount, isNamePosNeg, hdriFormat) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const gl = this.__glw.getRawContext();\n            const imageArgs = [];\n            let width = 0;\n            let height = 0;\n            for (let i = 0; i < mipLevelCount; i++) {\n                const loadOneLevel = () => {\n                    return new Promise((resolve, reject) => {\n                        let loadedCount = 0;\n                        const images = [];\n                        let extension = '.jpg';\n                        if (hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_11__[\"HdriFormat\"].HDR) {\n                            extension = '.hdr';\n                        }\n                        else if (hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_11__[\"HdriFormat\"].RGBE_PNG) {\n                            extension = '.RGBE.PNG';\n                        }\n                        let posx = '_right_';\n                        let negx = '_left_';\n                        let posy = '_top_';\n                        let negy = '_bottom_';\n                        let posz = '_front_';\n                        let negz = '_back_';\n                        if (isNamePosNeg) {\n                            posx = '_posx_';\n                            negx = '_negx_';\n                            posy = '_posy_';\n                            negy = '_negy_';\n                            posz = '_posz_';\n                            negz = '_negz_';\n                        }\n                        let faces = [\n                            [baseUri + posx + i + extension, gl.TEXTURE_CUBE_MAP_POSITIVE_X],\n                            [baseUri + negx + i + extension, gl.TEXTURE_CUBE_MAP_NEGATIVE_X],\n                            [baseUri + posy + i + extension, gl.TEXTURE_CUBE_MAP_POSITIVE_Y],\n                            [baseUri + negy + i + extension, gl.TEXTURE_CUBE_MAP_NEGATIVE_Y],\n                            [baseUri + posz + i + extension, gl.TEXTURE_CUBE_MAP_POSITIVE_Z],\n                            [baseUri + negz + i + extension, gl.TEXTURE_CUBE_MAP_NEGATIVE_Z]\n                        ];\n                        for (var j = 0; j < faces.length; j++) {\n                            const face = faces[j][1];\n                            let image;\n                            if (hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_11__[\"HdriFormat\"].HDR || hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_11__[\"HdriFormat\"].RGB9_E5_PNG) {\n                                image = new HDRImage();\n                            }\n                            else {\n                                image = new Image();\n                            }\n                            image.hdriFormat = hdriFormat;\n                            image.side = face;\n                            image.uri = faces[j][0];\n                            image.crossOrigin = \"Anonymous\";\n                            image.onload = () => {\n                                loadedCount++;\n                                images.push(image);\n                                if (loadedCount === 6) {\n                                    resolve(images);\n                                }\n                            };\n                            image.onerror = () => {\n                                reject(image.uri);\n                            };\n                            image.src = faces[j][0];\n                        }\n                    });\n                };\n                let images;\n                try {\n                    images = yield loadOneLevel();\n                }\n                catch (e) {\n                    // Try again once\n                    try {\n                        images = yield loadOneLevel();\n                    }\n                    catch (uri) {\n                        // Give up\n                        console.error(`failed to load ${uri}`);\n                    }\n                }\n                const imageObj = {};\n                for (let image of images) {\n                    switch (image.side) {\n                        case gl.TEXTURE_CUBE_MAP_POSITIVE_X:\n                            imageObj.posX = image;\n                            break;\n                        case gl.TEXTURE_CUBE_MAP_POSITIVE_Y:\n                            imageObj.posY = image;\n                            break;\n                        case gl.TEXTURE_CUBE_MAP_POSITIVE_Z:\n                            imageObj.posZ = image;\n                            break;\n                        case gl.TEXTURE_CUBE_MAP_NEGATIVE_X:\n                            imageObj.negX = image;\n                            break;\n                        case gl.TEXTURE_CUBE_MAP_NEGATIVE_Y:\n                            imageObj.negY = image;\n                            break;\n                        case gl.TEXTURE_CUBE_MAP_NEGATIVE_Z:\n                            imageObj.negZ = image;\n                            break;\n                    }\n                    if (i === 0) {\n                        width = image.width;\n                        height = image.height;\n                    }\n                }\n                imageArgs.push(imageObj);\n            }\n            return this.createCubeTexture(mipLevelCount, imageArgs, width, height);\n        });\n    }\n    createDummyBlackCubeTexture() {\n        const base64 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPj/HwADBwIAMCbHYQAAAABJRU5ErkJggg==';\n        const arrayBuffer = this.__createDummyTextureInner(base64);\n        const typedArray = new Uint8Array(arrayBuffer);\n        return this.createCubeTexture(1, [{ posX: typedArray, negX: typedArray, posY: typedArray, negY: typedArray, posZ: typedArray, negZ: typedArray }], 1, 1);\n    }\n    createDummyCubeTexture(rgbaStr = 'rgba(0,0,0,1)') {\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = 1;\n        canvas.height = 1;\n        const ctx = canvas.getContext('2d');\n        ctx.fillStyle = rgbaStr;\n        ctx.fillRect(0, 0, 1, 1);\n        return this.createCubeTexture(1, [{ posX: canvas, negX: canvas, posY: canvas, negY: canvas, posZ: canvas, negZ: canvas }], 1, 1);\n    }\n    createTextureFromDataUri(dataUri, { level, internalFormat, border, format, type, magFilter, minFilter, wrapS, wrapT, generateMipmap, anisotropy }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve) => {\n                const img = new Image();\n                if (!dataUri.match(/^data:/)) {\n                    img.crossOrigin = 'Anonymous';\n                }\n                img.onload = () => {\n                    const width = img.width;\n                    const height = img.height;\n                    let texture = this.createTexture(img, { level, internalFormat, width, height, border, format, type, magFilter, minFilter, wrapS, wrapT, generateMipmap, anisotropy });\n                    resolve(texture);\n                };\n                img.src = dataUri;\n            });\n        });\n    }\n    updateTexture(textureUid, typedArray, { level, xoffset, yoffset, width, height, format, type }) {\n        const gl = this.__glw.getRawContext();\n        ;\n        const texture = this.getWebGLResource(textureUid);\n        this.__glw.bindTexture2D(0, texture);\n        gl.texSubImage2D(gl.TEXTURE_2D, level, 0, 0, width, height, format.index, type.index, typedArray);\n        this.__glw.unbindTexture2D(0);\n    }\n    deleteFrameBufferObject(frameBufferObjectHandle) {\n        const fbo = this.getWebGLResource(frameBufferObjectHandle);\n        const gl = this.__glw.getRawContext();\n        if (fbo != null) {\n            gl.deleteFramebuffer(fbo);\n            this.__webglResources.delete(frameBufferObjectHandle);\n        }\n    }\n    deleteRenderBuffer(renderBufferUid) {\n        const gl = this.__glw.getRawContext();\n        const renderBuffer = this.getWebGLResource(renderBufferUid);\n        gl.deleteRenderbuffer(renderBuffer);\n        this.__webglResources.delete(renderBufferUid);\n    }\n    deleteTexture(textureHandle) {\n        const texture = this.getWebGLResource(textureHandle);\n        const gl = this.__glw.getRawContext();\n        if (texture != null) {\n            gl.deleteTexture(texture);\n            this.__webglResources.delete(textureHandle);\n        }\n    }\n    createDummyTexture(rgbaStr = \"rgba(255,255,255,1)\") {\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = 1;\n        canvas.height = 1;\n        const ctx = canvas.getContext('2d');\n        ctx.fillStyle = rgbaStr;\n        ctx.fillRect(0, 0, 1, 1);\n        return this.createTexture(canvas, {\n            level: 0, internalFormat: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_3__[\"PixelFormat\"].RGBA, width: 1, height: 1,\n            border: 0, format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_3__[\"PixelFormat\"].RGBA, type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float, magFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Nearest, minFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Nearest,\n            wrapS: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].ClampToEdge, wrapT: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].ClampToEdge, generateMipmap: false, anisotropy: false\n        });\n    }\n    createDummyBlackTexture() {\n        const base64 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPj/HwADBwIAMCbHYQAAAABJRU5ErkJggg==';\n        return this.__createDummyTextureInner(base64);\n    }\n    createDummyWhiteTexture() {\n        const base64 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5/hPwAIAgL/4d1j8wAAAABJRU5ErkJggg==';\n        return this.__createDummyTextureInner(base64);\n    }\n    createDummyNormalTexture() {\n        const base64 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsr///HwAGgAL+v1RumAAAAABJRU5ErkJggg==';\n        return this.__createDummyTextureInner(base64);\n    }\n    __createDummyTextureInner(base64) {\n        const arrayBuffer = _foundation_misc_DataUtil__WEBPACK_IMPORTED_MODULE_15__[\"default\"].base64ToArrayBuffer(base64);\n        return this.createTexture(new Uint8Array(arrayBuffer), {\n            level: 0, internalFormat: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_3__[\"PixelFormat\"].RGBA, width: 1, height: 1,\n            border: 0, format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_3__[\"PixelFormat\"].RGBA, type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__[\"ComponentType\"].Float, magFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Nearest, minFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].Nearest,\n            wrapS: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].ClampToEdge, wrapT: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__[\"TextureParameter\"].ClampToEdge, generateMipmap: false, anisotropy: false\n        });\n    }\n    createUniformBuffer(bufferView) {\n        const gl = this.__glw.getRawContext();\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        const ubo = gl.createBuffer();\n        const resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, ubo);\n        gl.bindBuffer(gl.UNIFORM_BUFFER, ubo);\n        gl.bufferData(gl.UNIFORM_BUFFER, bufferView, gl.DYNAMIC_DRAW);\n        gl.bindBuffer(gl.UNIFORM_BUFFER, null);\n        return resourceHandle;\n    }\n    updateUniformBuffer(uboUid, bufferView) {\n        const gl = this.__glw.getRawContext();\n        const ubo = this.getWebGLResource(uboUid);\n        gl.bindBuffer(gl.UNIFORM_BUFFER, ubo);\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 0, bufferView, 0);\n        gl.bindBuffer(gl.UNIFORM_BUFFER, null);\n    }\n    bindUniformBlock(shaderProgramUid, blockName, blockIndex) {\n        const gl = this.__glw.getRawContext();\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        const shaderProgram = this.getWebGLResource(shaderProgramUid);\n        const block = gl.getUniformBlockIndex(shaderProgram, blockName);\n        gl.uniformBlockBinding(shaderProgram, block, blockIndex);\n    }\n    bindUniformBufferBase(blockIndex, uboUid) {\n        const gl = this.__glw.getRawContext();\n        if (gl == null) {\n            throw new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        const ubo = this.getWebGLResource(uboUid);\n        gl.bindBufferBase(gl.UNIFORM_BUFFER, blockIndex, ubo);\n    }\n    deleteUniformBuffer(uboUid) {\n        const gl = this.__glw.getRawContext();\n        if (gl == null) {\n            new Error(\"No WebGLRenderingContext set as Default.\");\n        }\n        const ubo = this.getWebGLResource(uboUid);\n        this.__webglResources.delete(uboUid);\n        gl.deleteBuffer(ubo);\n    }\n    createTransformFeedback() {\n        const gl = this.__glw.getRawContext();\n        var transformFeedback = gl.createTransformFeedback();\n        const resourceHandle = this.getResourceNumber();\n        this.__webglResources.set(resourceHandle, transformFeedback);\n        gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, transformFeedback);\n        return resourceHandle;\n    }\n    deleteTransformFeedback(transformFeedbackUid) {\n        const gl = this.__glw.getRawContext();\n        const transformFeedback = this.getWebGLResource(transformFeedbackUid);\n        gl.deleteTransformFeedback(transformFeedback);\n        this.__webglResources.delete(transformFeedbackUid);\n    }\n    setViewport(viewport) {\n        const gl = this.__glw.getRawContext();\n        if (viewport) {\n            gl.viewport(viewport.x, viewport.y, viewport.z, viewport.w);\n        }\n        else {\n            gl.viewport(0, 0, this.__glw.width, this.__glw.height);\n        }\n    }\n    clearFrameBuffer(renderPass) {\n        const gl = this.__glw.getRawContext();\n        let bufferBit = 0;\n        if (renderPass.toClearColorBuffer) {\n            gl.clearColor(renderPass.clearColor.x, renderPass.clearColor.y, renderPass.clearColor.z, renderPass.clearColor.w);\n            bufferBit |= gl.COLOR_BUFFER_BIT;\n        }\n        if (renderPass.toClearDepthBuffer) {\n            gl.clearDepth(renderPass.clearDepth);\n            bufferBit |= gl.DEPTH_BUFFER_BIT;\n        }\n        if (renderPass.toClearStencilBuffer) {\n            gl.clearStencil(renderPass.clearStencil);\n            bufferBit |= gl.STENCIL_BUFFER_BIT;\n        }\n        if (bufferBit !== 0) {\n            gl.clear(bufferBit);\n        }\n    }\n    deleteVertexDataResources(vertexHandles) {\n        const gl = this.__glw.getRawContext();\n        const iboHandle = vertexHandles.iboHandle;\n        if (iboHandle) {\n            const ibo = this.getWebGLResource(iboHandle);\n            gl.deleteBuffer(ibo);\n        }\n        const vboHandles = vertexHandles.vboHandles;\n        for (let vboHandle of vboHandles) {\n            const vbo = this.getWebGLResource(vboHandle);\n            gl.deleteBuffer(vbo);\n        }\n        const vaoHandle = vertexHandles.vaoHandle;\n        const vao = this.getWebGLResource(vaoHandle);\n        this.__glw.deleteVertexArray(vao);\n    }\n    deleteVertexArray(vaoHandle) {\n        const vao = this.getWebGLResource(vaoHandle);\n        this.__glw.deleteVertexArray(vao);\n    }\n    deleteVertexBuffer(vboUid) {\n        const gl = this.__glw.getRawContext();\n        const vbo = this.getWebGLResource(vboUid);\n        gl.deleteBuffer(vbo);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/webgl/WebGLResourceRepository.ts?");

/***/ }),

/***/ "./src/webgl/WebGLStrategyCommonMethod.ts":
/*!************************************************!*\
  !*** ./src/webgl/WebGLStrategyCommonMethod.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _foundation_definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/definitions/AlphaMode */ \"./src/foundation/definitions/AlphaMode.ts\");\n/* harmony import */ var _foundation_components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/components/MeshRendererComponent */ \"./src/foundation/components/MeshRendererComponent.ts\");\n\n\nlet lastIsTransparentMode;\nlet lastBlendEquationMode;\nlet lastBlendEquationModeAlpha;\nlet lastBlendFuncSrcFactor;\nlet lastBlendFuncDstFactor;\nlet lastBlendFuncAlphaSrcFactor;\nlet lastBlendFuncAlphaDstFactor;\nlet lastCullFace;\nlet lastFrontFaceCCW;\nfunction setCullAndBlendSettings(material, renderPass, gl) {\n    let cullface, cullFrontFaceCCW;\n    if (material.cullface != null) {\n        cullface = material.cullface;\n        cullFrontFaceCCW = material.cullFrontFaceCCW;\n    }\n    else {\n        cullface = renderPass.cullface;\n        cullFrontFaceCCW = renderPass.cullFrontFaceCCW;\n    }\n    setCull(cullface, cullFrontFaceCCW, gl);\n    setBlendSettings(material, gl);\n}\nfunction setCull(cullface, cullFrontFaceCCW, gl) {\n    if (lastCullFace !== cullface) {\n        if (!cullface) {\n            gl.disable(gl.CULL_FACE);\n        }\n        else {\n            gl.enable(gl.CULL_FACE);\n        }\n        lastCullFace = cullface;\n    }\n    if (cullface === true && lastFrontFaceCCW !== cullFrontFaceCCW) {\n        if (cullFrontFaceCCW) {\n            gl.frontFace(gl.CCW);\n        }\n        else {\n            gl.frontFace(gl.CW);\n        }\n        lastFrontFaceCCW = cullFrontFaceCCW;\n    }\n}\nfunction setBlendSettings(material, gl) {\n    const isTransparentMode = material.alphaMode === _foundation_definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_0__[\"AlphaMode\"].Blend;\n    if (lastIsTransparentMode !== isTransparentMode) {\n        if (isTransparentMode) {\n            gl.enable(gl.BLEND);\n        }\n        else {\n            gl.disable(gl.BLEND);\n        }\n        lastIsTransparentMode = isTransparentMode;\n    }\n    if (isTransparentMode) {\n        setBlendEquationMode(material.blendEquationMode, material.blendEquationModeAlpha, gl);\n        setBlendFuncSrcFactor(material.blendFuncSrcFactor, material.blendFuncDstFactor, material.blendFuncAlphaSrcFactor, material.blendFuncAlphaDstFactor, gl);\n    }\n}\nfunction setBlendEquationMode(blendEquationMode, blendEquationModeAlpha, gl) {\n    const needUpdateBlendEquation = differentWithLastBlendEquation(blendEquationMode, blendEquationModeAlpha);\n    if (needUpdateBlendEquation) {\n        if (blendEquationModeAlpha != null) {\n            gl.blendEquationSeparate(blendEquationMode, blendEquationModeAlpha);\n        }\n        else {\n            gl.blendEquation(blendEquationMode);\n        }\n        lastBlendEquationMode = blendEquationMode;\n        lastBlendEquationModeAlpha = blendEquationModeAlpha;\n    }\n}\nfunction differentWithLastBlendEquation(equationMode, equationModeAlpha) {\n    const result = (lastBlendEquationMode != equationMode ||\n        lastBlendEquationModeAlpha != equationModeAlpha);\n    return result;\n}\nfunction setBlendFuncSrcFactor(blendFuncSrcFactor, blendFuncDstFactor, blendFuncAlphaSrcFactor, blendFuncAlphaDstFactor, gl) {\n    const needUpdateBlendFunc = differentWithLastBlendFuncFactor(blendFuncSrcFactor, blendFuncDstFactor, blendFuncAlphaSrcFactor, blendFuncAlphaDstFactor);\n    if (needUpdateBlendFunc) {\n        if (blendFuncAlphaSrcFactor != null) {\n            gl.blendFuncSeparate(blendFuncSrcFactor, blendFuncDstFactor, blendFuncAlphaSrcFactor, blendFuncAlphaDstFactor);\n        }\n        else {\n            gl.blendFunc(blendFuncSrcFactor, blendFuncDstFactor);\n        }\n        lastBlendFuncSrcFactor = blendFuncSrcFactor;\n        lastBlendFuncDstFactor = blendFuncDstFactor;\n        lastBlendFuncAlphaSrcFactor = blendFuncAlphaSrcFactor;\n        lastBlendFuncAlphaDstFactor = blendFuncAlphaDstFactor;\n    }\n}\nfunction differentWithLastBlendFuncFactor(srcFactor, dstFactor, alphaSrcFactor, alphaDstFactor) {\n    const result = (lastBlendFuncSrcFactor != srcFactor ||\n        lastBlendFuncDstFactor != dstFactor ||\n        lastBlendFuncAlphaSrcFactor != alphaSrcFactor ||\n        lastBlendFuncAlphaDstFactor != alphaDstFactor);\n    return result;\n}\nfunction startDepthMasking(idx, gl, renderPass) {\n    if (idx === _foundation_components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].firstTranparentIndex) {\n        gl.depthMask(false);\n    }\n}\nfunction endDepthMasking(idx, gl, renderPass) {\n    if (idx === _foundation_components_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].lastTransparentIndex) {\n        gl.depthMask(true);\n    }\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object.freeze({ setCullAndBlendSettings, startDepthMasking, endDepthMasking }));\n\n\n//# sourceURL=webpack:///./src/webgl/WebGLStrategyCommonMethod.ts?");

/***/ }),

/***/ "./src/webgl/WebGLStrategyFastestWebGL1.ts":
/*!*************************************************!*\
  !*** ./src/webgl/WebGLStrategyFastestWebGL1.ts ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return WebGLStrategyFastestWebGL1; });\n/* harmony import */ var _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WebGLResourceRepository */ \"./src/webgl/WebGLResourceRepository.ts\");\n/* harmony import */ var _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/definitions/PixelFormat */ \"./src/foundation/definitions/PixelFormat.ts\");\n/* harmony import */ var _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation/definitions/TextureParameter */ \"./src/foundation/definitions/TextureParameter.ts\");\n/* harmony import */ var _foundation_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../foundation/definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _foundation_components_MeshComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../foundation/components/MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../foundation/renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../foundation/definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _foundation_materials_Material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../foundation/materials/Material */ \"./src/foundation/materials/Material.ts\");\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _foundation_core_Component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../foundation/core/Component */ \"./src/foundation/core/Component.ts\");\n/* harmony import */ var _foundation_components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../foundation/components/SceneGraphComponent */ \"./src/foundation/components/SceneGraphComponent.ts\");\n/* harmony import */ var _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../foundation/core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../foundation/definitions/ShaderType */ \"./src/foundation/definitions/ShaderType.ts\");\n/* harmony import */ var _foundation_components_LightComponent__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../foundation/components/LightComponent */ \"./src/foundation/components/LightComponent.ts\");\n/* harmony import */ var _foundation_core_Config__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../foundation/core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _foundation_math_Vector4__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../foundation/math/Vector4 */ \"./src/foundation/math/Vector4.ts\");\n/* harmony import */ var _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../foundation/components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _foundation_core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../foundation/core/GlobalDataRepository */ \"./src/foundation/core/GlobalDataRepository.ts\");\n/* harmony import */ var _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../foundation/components/WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n/* harmony import */ var _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../foundation/misc/MiscUtil */ \"./src/foundation/misc/MiscUtil.ts\");\n/* harmony import */ var _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./WebGLStrategyCommonMethod */ \"./src/webgl/WebGLStrategyCommonMethod.ts\");\n/* harmony import */ var _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../foundation/definitions/ShaderVariableUpdateInterval */ \"./src/foundation/definitions/ShaderVariableUpdateInterval.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass WebGLStrategyFastestWebGL1 {\n    constructor() {\n        this.__webglResourceRepository = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        this.__dataTextureUid = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_7__[\"default\"].InvalidCGAPIResourceUid;\n        this.__lastShader = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_7__[\"default\"].InvalidCGAPIResourceUid;\n        this.__lastRenderPassTickCount = -1;\n    }\n    get vertexShaderMethodDefinitions_dataTexture() {\n        return `\n\n  mat4 get_worldMatrix(float instanceId)\n  {\n    highp float index = ${_foundation_core_Component__WEBPACK_IMPORTED_MODULE_11__[\"default\"].getLocationOffsetOfMemberOfComponent(_foundation_components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_12__[\"default\"], 'worldMatrix')}.0 + 4.0 * instanceId;\n    highp float powWidthVal = ${_foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferWidthLength}.0;\n    highp float powHeightVal = ${_foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferHeightLength}.0;\n    vec2 arg = vec2(1.0/powWidthVal, 1.0/powHeightVal);\n    // highp vec2 arg = vec2(1.0/powWidthVal, 1.0/powWidthVal/powHeightVal);\n\n    vec4 col0 = fetchElement(u_dataTexture, index + 0.0, arg);\n    vec4 col1 = fetchElement(u_dataTexture, index + 1.0, arg);\n    vec4 col2 = fetchElement(u_dataTexture, index + 2.0, arg);\n    vec4 col3 = fetchElement(u_dataTexture, index + 3.0, arg);\n\n    mat4 matrix = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n\n    return matrix;\n  }\n\n\n  mat3 get_normalMatrix(float instanceId) {\n    float index = ${_foundation_core_Component__WEBPACK_IMPORTED_MODULE_11__[\"default\"].getLocationOffsetOfMemberOfComponent(_foundation_components_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_12__[\"default\"], 'normalMatrix')}.0 + 3.0 * instanceId;\n    float powWidthVal = ${_foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferWidthLength}.0;\n    float powHeightVal = ${_foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferHeightLength}.0;\n    vec2 arg = vec2(1.0/powWidthVal, 1.0/powHeightVal);\n  //  vec2 arg = vec2(1.0/powWidthVal, 1.0/powWidthVal/powHeightVal);\n\n    vec4 col0 = fetchElement(u_dataTexture, index + 0.0, arg);\n    vec4 col1 = fetchElement(u_dataTexture, index + 1.0, arg);\n    vec4 col2 = fetchElement(u_dataTexture, index + 2.0, arg);\n\n    mat3 matrix = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n\n    return matrix;\n  }\n\n#ifdef RN_IS_MORPHING\n  vec3 get_position(float vertexId, vec3 basePosition) {\n    vec3 position = basePosition;\n    for (int i=0; i<${_foundation_core_Config__WEBPACK_IMPORTED_MODULE_16__[\"default\"].maxVertexMorphNumberInShader}; i++) {\n      float index = u_dataTextureMorphOffsetPosition[i] + 1.0 * vertexId;\n      float powWidthVal = ${_foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferWidthLength}.0;\n      float powHeightVal = ${_foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferHeightLength}.0;\n      vec2 arg = vec2(1.0/powWidthVal, 1.0/powHeightVal);\n    //  vec2 arg = vec2(1.0/powWidthVal, 1.0/powWidthVal/powHeightVal);\n      vec3 addPos = fetchElement(u_dataTexture, index + 0.0, arg).xyz;\n      position += addPos * u_morphWeights[i];\n      if (i == u_morphTargetNumber-1) {\n        break;\n      }\n    }\n\n    return position;\n  }\n#endif\n  `;\n    }\n    setupShaderProgram(meshComponent) {\n        if (meshComponent.mesh == null) {\n            _foundation_components_MeshComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].alertNoMeshSet(meshComponent);\n            return;\n        }\n        const primitiveNum = meshComponent.mesh.getPrimitiveNumber();\n        for (let i = 0; i < primitiveNum; i++) {\n            const primitive = meshComponent.mesh.getPrimitiveAt(i);\n            const material = primitive.material;\n            if (material == null || material.isEmptyMaterial()) {\n                return;\n            }\n            if (material._shaderProgramUid !== _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_7__[\"default\"].InvalidCGAPIResourceUid) {\n                return;\n            }\n            const glw = this.__webglResourceRepository.currentWebGLContextWrapper;\n            const gl = glw.getRawContext();\n            const isPointSprite = primitive.primitiveMode.index === gl.POINTS;\n            this.setupDefaultShaderSemantics(material, isPointSprite);\n        }\n    }\n    setupDefaultShaderSemantics(material, isPointSprite) {\n        material.createProgram(this.vertexShaderMethodDefinitions_dataTexture, this.__getShaderProperty);\n        if (isPointSprite) {\n            this.__webglResourceRepository.setupUniformLocations(material._shaderProgramUid, [\n                {\n                    semantic: _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__[\"ShaderSemantics\"].PointSize, compositionType: _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Scalar, componentType: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n                    stage: _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_14__[\"ShaderType\"].PixelShader, min: 0, max: Number.MAX_VALUE, isSystem: true, updateInteval: _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_23__[\"ShaderVariableUpdateInterval\"].EveryTime\n                },\n                {\n                    semantic: _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__[\"ShaderSemantics\"].PointDistanceAttenuation, compositionType: _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Vec3, componentType: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float,\n                    stage: _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_14__[\"ShaderType\"].PixelShader, min: 0, max: 1, isSystem: true, updateInteval: _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_23__[\"ShaderVariableUpdateInterval\"].EveryTime\n                },\n            ]);\n        }\n        material.setUniformLocations(material._shaderProgramUid);\n        const shaderProgram = this.__webglResourceRepository.getWebGLResource(material._shaderProgramUid);\n        const gl = this.__webglResourceRepository.currentWebGLContextWrapper.getRawContext();\n        shaderProgram.dataTexture = gl.getUniformLocation(shaderProgram, 'u_dataTexture');\n        shaderProgram.currentComponentSIDs = gl.getUniformLocation(shaderProgram, 'u_currentComponentSIDs');\n    }\n    static __getOffsetOfShaderSemanticsInfo(info) {\n        let offset = 1;\n        switch (info.compositionType) {\n            case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Mat4:\n                offset = 4;\n                break;\n            case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Mat3:\n                offset = 3;\n                break;\n            case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Mat2:\n                offset = 2;\n                break;\n            default:\n            // console.error('unknown composition type', info.compositionType.str, memberName);\n            // return '';\n        }\n        return offset;\n    }\n    __getShaderProperty(materialTypeName, info, propertyIndex, isGlogalData) {\n        const returnType = info.compositionType.getGlslStr(info.componentType);\n        const indexArray = [];\n        let maxIndex = 1;\n        let index = -1;\n        let indexStr;\n        const isTexture = info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Texture2D || info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].TextureCube;\n        const methodName = info.semantic.str.replace('.', '_');\n        // definition of uniform variable\n        let varDef = '';\n        //      if (isTexture) {\n        const varType = info.compositionType.getGlslStr(info.componentType);\n        let varIndexStr = '';\n        if (info.maxIndex) {\n            varIndexStr = `[${info.maxIndex}]`;\n        }\n        if (info.needUniformInFastest || isTexture) {\n            varDef = `  uniform ${varType} u_${methodName}${varIndexStr};\\n`;\n        }\n        //    }\n        // inner contents of 'get_' shader function\n        if (propertyIndex < 0) {\n            if (Math.abs(propertyIndex) % _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__[\"ShaderSemanticsClass\"]._scale !== 0) {\n                return '';\n            }\n            const offset = WebGLStrategyFastestWebGL1.__getOffsetOfShaderSemanticsInfo(info);\n            for (let i = 0; i < info.maxIndex; i++) {\n                const index = _foundation_materials_Material__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getLocationOffsetOfMemberOfMaterial(materialTypeName, propertyIndex);\n                indexArray.push(index);\n            }\n            maxIndex = info.maxIndex;\n            let arrayStr = `highp float indices[${maxIndex}];`;\n            indexArray.forEach((idx, i) => {\n                arrayStr += `\\nindices[${i}] = ${idx}.0;`;\n            });\n            indexStr = `\n        ${arrayStr}\n        highp float idx = 0.0;\n        for (int i=0; i<${maxIndex}; i++) {\n          idx = indices[i] + ${offset}.0 * instanceId;\n          if (i == index) {\n            break;\n          }\n        }`;\n        }\n        else {\n            const offset = WebGLStrategyFastestWebGL1.__getOffsetOfShaderSemanticsInfo(info);\n            let idx;\n            let secondOffset = 0;\n            if (isGlogalData) {\n                const globalDataRepository = _foundation_core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_19__[\"default\"].getInstance();\n                index = globalDataRepository.getLocationOffsetOfProperty(propertyIndex);\n                let maxCount = globalDataRepository.getGlobalPropertyStruct(propertyIndex).maxCount;\n                secondOffset = offset;\n            }\n            else {\n                index = _foundation_materials_Material__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getLocationOffsetOfMemberOfMaterial(materialTypeName, propertyIndex);\n            }\n            if (_foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].isArray(info.compositionType)) {\n                idx = 'float(index)';\n                if (info.maxIndex != null) {\n                    secondOffset = offset * info.maxIndex;\n                }\n            }\n            else if (info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Mat4 || info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Mat3 || info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Mat2) {\n                idx = 'float(index)';\n            }\n            else {\n                idx = 'instanceId';\n            }\n            indexStr = `highp float idx = ${index}.0 + ${secondOffset}.0 * instanceId + ${offset}.0 * ${idx};`;\n        }\n        let intStr = '';\n        if (info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Int && info.compositionType !== _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Scalar) {\n            intStr = 'i';\n        }\n        let firstPartOfInnerFunc = '';\n        if (!isTexture) {\n            firstPartOfInnerFunc += `\n${returnType} get_${methodName}(highp float instanceId, const int index) {\n  ${indexStr}\n  highp float powWidthVal = ${_foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferWidthLength}.0;\n  highp float powHeightVal = ${_foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferHeightLength}.0;\n  highp vec2 arg = vec2(1.0/powWidthVal, 1.0/powHeightVal);\n  highp vec4 col0 = fetchElement(u_dataTexture, idx + 0.0, arg);\n`;\n        }\n        let str = `${varDef}${firstPartOfInnerFunc}`;\n        switch (info.compositionType) {\n            case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Vec4:\n            case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Vec4Array:\n                str += `        highp ${intStr}vec4 val = ${intStr}vec4(col0);`;\n                break;\n            case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Vec3:\n            case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Vec3Array:\n                str += `        highp ${intStr}vec3 val = ${intStr}vec3(col0.xyz);`;\n                break;\n            case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Vec2:\n            case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Vec2Array:\n                str += `        highp ${intStr}vec2 val = ${intStr}vec2(col0.xy);`;\n                break;\n            case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Scalar:\n            case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].ScalarArray:\n                if (info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Int) {\n                    str += `        int val = int(col0.x);`;\n                }\n                else if (info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Bool) {\n                    str += `        bool val = bool(col0.x);`;\n                }\n                else {\n                    str += `       float val = col0.x;`;\n                }\n                break;\n            case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Mat4:\n                str += `\n        vec4 col1 = fetchElement(u_dataTexture, idx + 1.0, arg);\n        vec4 col2 = fetchElement(u_dataTexture, idx + 2.0, arg);\n        vec4 col3 = fetchElement(u_dataTexture, idx + 3.0, arg);\n\n        mat4 val = mat4(\n          col0.x, col0.y, col0.z, col0.w,\n          col1.x, col1.y, col1.z, col1.w,\n          col2.x, col2.y, col2.z, col2.w,\n          col3.x, col3.y, col3.z, col3.w\n          );\n        `;\n                break;\n            case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__[\"CompositionType\"].Mat3:\n                str += `\n        vec4 col1 = fetchElement(u_dataTexture, idx + 1.0, arg);\n        vec4 col2 = fetchElement(u_dataTexture, idx + 2.0, arg);\n        mat3 val = mat3(\n          col0.x, col0.y, col0.z,\n          col0.w, col1.x, col1.y,\n          col1.z, col1.w, col2.x\n          );\n        `;\n                break;\n            default:\n                // console.error('unknown composition type', info.compositionType.str, memberName);\n                str += '';\n        }\n        if (!isTexture) {\n            str += `\n      return val;\n    }\n  `;\n        }\n        return str;\n    }\n    __isLoaded(meshComponent) {\n        if (meshComponent.mesh == null) {\n            return false;\n        }\n        if (meshComponent.mesh.variationVBOUid !== _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_7__[\"default\"].InvalidCGAPIResourceUid) {\n            const primitiveNum = meshComponent.mesh.getPrimitiveNumber();\n            let count = 0;\n            for (let i = 0; i < primitiveNum; i++) {\n                const primitive = meshComponent.mesh.getPrimitiveAt(i);\n                if (primitive.vertexHandles != null) {\n                    count++;\n                }\n            }\n            if (primitiveNum === count) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    }\n    $load(meshComponent) {\n        if (this.__isLoaded(meshComponent)) {\n            return;\n        }\n        WebGLStrategyFastestWebGL1.__currentComponentSIDs = WebGLStrategyFastestWebGL1.__globalDataRepository.getValue(_foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__[\"ShaderSemantics\"].CurrentComponentSIDs, 0);\n        if (meshComponent.mesh == null) {\n            _foundation_components_MeshComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].alertNoMeshSet(meshComponent);\n            return;\n        }\n        this.setupShaderProgram(meshComponent);\n        const primitiveNum = meshComponent.mesh.getPrimitiveNumber();\n        for (let i = 0; i < primitiveNum; i++) {\n            const primitive = meshComponent.mesh.getPrimitiveAt(i);\n            primitive.create3DAPIVertexData();\n        }\n        meshComponent.mesh.updateVariationVBO();\n    }\n    $prerender(meshComponent, meshRendererComponent, instanceIDBufferUid) {\n        if (meshRendererComponent._readyForRendering) {\n            return;\n        }\n        if (meshComponent.mesh == null) {\n            _foundation_components_MeshComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].alertNoMeshSet(meshComponent);\n            return;\n        }\n        if (meshComponent.mesh.isInstanceMesh()) {\n            meshRendererComponent._readyForRendering = true;\n            return;\n        }\n        const primitiveNum = meshComponent.mesh.getPrimitiveNumber();\n        for (let i = 0; i < primitiveNum; i++) {\n            const primitive = meshComponent.mesh.getPrimitiveAt(i);\n            this.__webglResourceRepository.setVertexDataToPipeline({ vaoHandle: meshComponent.mesh.getVaoUids(i), iboHandle: primitive.vertexHandles.iboHandle, vboHandles: primitive.vertexHandles.vboHandles }, primitive, meshComponent.mesh.variationVBOUid);\n        }\n        meshRendererComponent._readyForRendering = true;\n    }\n    __createAndUpdateDataTexture() {\n        const memoryManager = _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\n        const buffer = memoryManager.getBuffer(_foundation_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__[\"BufferUse\"].GPUInstanceData);\n        if (this.__dataTextureUid !== _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_7__[\"default\"].InvalidCGAPIResourceUid) {\n            const floatDataTextureBuffer = new Float32Array(buffer.getArrayBuffer().slice(0, buffer.takenSizeInByte));\n            const bufferSizeInByte = buffer.takenSizeInByte;\n            if (bufferSizeInByte / _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferWidthLength / 4 / 4 > _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferHeightLength) {\n                console.warn('The buffer size exceeds the size of the data texture.');\n            }\n            if (this.__webglResourceRepository.currentWebGLContextWrapper.isWebGL2) {\n                this.__webglResourceRepository.updateTexture(this.__dataTextureUid, floatDataTextureBuffer, {\n                    level: 0, xoffset: 0, yoffset: 0, width: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferWidthLength, height: Math.min(bufferSizeInByte / _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferWidthLength / 4 / 4, _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferHeightLength),\n                    format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__[\"PixelFormat\"].RGBA, type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float\n                });\n            }\n            else {\n                this.__webglResourceRepository.updateTexture(this.__dataTextureUid, floatDataTextureBuffer, {\n                    level: 0, xoffset: 0, yoffset: 0, width: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferWidthLength, height: Math.min(bufferSizeInByte / _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferWidthLength / 4 / 4, _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferHeightLength),\n                    format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__[\"PixelFormat\"].RGBA, type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float\n                });\n            }\n        }\n        else {\n            const morphBuffer = memoryManager.getBuffer(_foundation_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__[\"BufferUse\"].GPUVertexData);\n            let paddingArrayBufferSize = 0;\n            if ((buffer.takenSizeInByte + morphBuffer.takenSizeInByte) / 4 / 4 < _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferWidthLength * _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferHeightLength) {\n                paddingArrayBufferSize = _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferWidthLength * _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferHeightLength * 4 * 4 - buffer.takenSizeInByte + morphBuffer.takenSizeInByte;\n            }\n            const concatArraybuffer = _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_21__[\"MiscUtil\"].concatArrayBuffers([buffer.getArrayBuffer(), morphBuffer.getArrayBuffer()], [buffer.takenSizeInByte, morphBuffer.takenSizeInByte], paddingArrayBufferSize);\n            const floatDataTextureBuffer = new Float32Array(concatArraybuffer);\n            if (concatArraybuffer.byteLength / _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferWidthLength / 4 / 4 > _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferHeightLength) {\n                console.warn('The buffer size exceeds the size of the data texture.');\n            }\n            if (this.__webglResourceRepository.currentWebGLContextWrapper.isWebGL2) {\n                this.__dataTextureUid = this.__webglResourceRepository.createTexture(floatDataTextureBuffer, {\n                    level: 0, internalFormat: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__[\"TextureParameter\"].RGBA32F, width: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferWidthLength, height: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferHeightLength,\n                    border: 0, format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__[\"PixelFormat\"].RGBA, type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, magFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__[\"TextureParameter\"].Nearest, minFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__[\"TextureParameter\"].Nearest,\n                    wrapS: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__[\"TextureParameter\"].Repeat, wrapT: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__[\"TextureParameter\"].Repeat, generateMipmap: false, anisotropy: false\n                });\n            }\n            else {\n                this.__dataTextureUid = this.__webglResourceRepository.createTexture(floatDataTextureBuffer, {\n                    level: 0, internalFormat: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__[\"PixelFormat\"].RGBA, width: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferWidthLength, height: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bufferHeightLength,\n                    border: 0, format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__[\"PixelFormat\"].RGBA, type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__[\"ComponentType\"].Float, magFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__[\"TextureParameter\"].Nearest, minFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__[\"TextureParameter\"].Nearest,\n                    wrapS: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__[\"TextureParameter\"].Repeat, wrapT: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__[\"TextureParameter\"].Repeat, generateMipmap: false, anisotropy: false\n                });\n            }\n        }\n    }\n    common_$prerender() {\n        // Setup Data Texture\n        this.__createAndUpdateDataTexture();\n        const componentRepository = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_13__[\"default\"].getInstance();\n        this.__lightComponents = componentRepository.getComponentsWithType(_foundation_components_LightComponent__WEBPACK_IMPORTED_MODULE_15__[\"default\"]);\n    }\n    attachGPUData(primitive) {\n        const material = primitive.material;\n        const glw = this.__webglResourceRepository.currentWebGLContextWrapper;\n        const gl = glw.getRawContext();\n        const dataTexture = this.__webglResourceRepository.getWebGLResource(this.__dataTextureUid);\n        glw.bindTexture2D(0, dataTexture);\n        const shaderProgram = this.__webglResourceRepository.getWebGLResource(material._shaderProgramUid);\n        var uniform_dataTexture = gl.getUniformLocation(shaderProgram, 'u_dataTexture');\n        gl.uniform1i(uniform_dataTexture, 0);\n    }\n    attachGPUDataInner(gl, shaderProgram) {\n        this.__webglResourceRepository.bindTexture2D(0, this.__dataTextureUid);\n        var uniform_dataTexture = gl.getUniformLocation(shaderProgram, 'u_dataTexture');\n        gl.uniform1i(uniform_dataTexture, 0);\n    }\n    attatchShaderProgram(material) {\n        const shaderProgramUid = material._shaderProgramUid;\n        if (shaderProgramUid !== this.__lastShader) {\n            const glw = this.__webglResourceRepository.currentWebGLContextWrapper;\n            const gl = glw.getRawContext();\n            const shaderProgram = this.__webglResourceRepository.getWebGLResource(shaderProgramUid);\n            gl.useProgram(shaderProgram);\n            this.__lastShader = shaderProgramUid;\n        }\n    }\n    attachVertexData(i, primitive, glw, instanceIDBufferUid) {\n    }\n    attachVertexDataInner(mesh, primitive, primitiveIndex, glw, instanceIDBufferUid) {\n        const vertexHandles = primitive.vertexHandles;\n        const vao = this.__webglResourceRepository.getWebGLResource(mesh.getVaoUids(primitiveIndex));\n        const gl = glw.getRawContext();\n        if (vao != null) {\n            glw.bindVertexArray(vao);\n        }\n        else {\n            this.__webglResourceRepository.setVertexDataToPipeline(vertexHandles, primitive, mesh.variationVBOUid);\n            const ibo = this.__webglResourceRepository.getWebGLResource(vertexHandles.iboHandle);\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n        }\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new (WebGLStrategyFastestWebGL1)();\n        }\n        return this.__instance;\n    }\n    __setupMaterial(material, renderPass) {\n        material.setParameter(_foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__[\"ShaderSemantics\"].LightNumber, this.__lightComponents.length);\n        for (let i = 0; i < this.__lightComponents.length; i++) {\n            if (i >= _foundation_core_Config__WEBPACK_IMPORTED_MODULE_16__[\"default\"].maxLightNumberInShader) {\n                break;\n            }\n            const lightComponent = this.__lightComponents[i];\n            const sceneGraphComponent = lightComponent.entity.getSceneGraph();\n            const worldLightPosition = sceneGraphComponent.worldPosition;\n            const worldLightDirection = lightComponent.direction;\n            const worldLightIntensity = lightComponent.intensity;\n            material.setParameter(_foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__[\"ShaderSemantics\"].LightPosition, new _foundation_math_Vector4__WEBPACK_IMPORTED_MODULE_17__[\"default\"](worldLightPosition.x, worldLightPosition.y, worldLightPosition.z, lightComponent.type.index), i);\n            material.setParameter(_foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__[\"ShaderSemantics\"].LightDirection, new _foundation_math_Vector4__WEBPACK_IMPORTED_MODULE_17__[\"default\"](worldLightDirection.x, worldLightDirection.y, worldLightDirection.z, 0), i);\n            material.setParameter(_foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__[\"ShaderSemantics\"].LightIntensity, new _foundation_math_Vector4__WEBPACK_IMPORTED_MODULE_17__[\"default\"](worldLightIntensity.x, worldLightIntensity.y, worldLightIntensity.z, 0), i);\n        }\n    }\n    __setCamera(renderPass) {\n        let cameraComponent = renderPass.cameraComponent;\n        if (cameraComponent == null) {\n            cameraComponent = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_13__[\"default\"].getInstance().getComponent(_foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_18__[\"default\"], _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_18__[\"default\"].main);\n        }\n        if (cameraComponent) {\n            cameraComponent.setValuesToGlobalDataRepository();\n        }\n    }\n    __setCurrentComponentSIDsForEachRenderPass(renderPass) {\n        let cameraComponent = renderPass.cameraComponent;\n        if (cameraComponent == null) {\n            cameraComponent = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_13__[\"default\"].getInstance().getComponent(_foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_18__[\"default\"], _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_18__[\"default\"].main);\n        }\n        if (cameraComponent) {\n            WebGLStrategyFastestWebGL1.__currentComponentSIDs.v[_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_20__[\"WellKnownComponentTIDs\"].CameraComponentTID] = cameraComponent.componentSID;\n        }\n        else {\n            WebGLStrategyFastestWebGL1.__currentComponentSIDs.v[_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_20__[\"WellKnownComponentTIDs\"].CameraComponentTID] = -1;\n        }\n    }\n    __setCurrentComponentSIDsForEachEntity(gl, renderPass, entity) {\n        const skeletalComponent = entity.getSkeletal();\n        if (skeletalComponent) {\n            let index = 0;\n            if (skeletalComponent.componentSID < _foundation_core_Config__WEBPACK_IMPORTED_MODULE_16__[\"default\"].maxSkeletonNumber) {\n                index = skeletalComponent.componentSID;\n            }\n            WebGLStrategyFastestWebGL1.__currentComponentSIDs.v[_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_20__[\"WellKnownComponentTIDs\"].SkeletalComponentTID] = index;\n        }\n        else {\n            WebGLStrategyFastestWebGL1.__currentComponentSIDs.v[_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_20__[\"WellKnownComponentTIDs\"].SkeletalComponentTID] = -1;\n        }\n    }\n    __setCurrentComponentSIDsForEachPrimitive(gl, renderPass, material, entity) {\n        WebGLStrategyFastestWebGL1.__currentComponentSIDs.v[0] = material.materialSID;\n        gl.uniform1fv(WebGLStrategyFastestWebGL1.__shaderProgram.currentComponentSIDs, WebGLStrategyFastestWebGL1.__currentComponentSIDs.v);\n    }\n    common_$render(meshComponentSids, meshComponents, viewMatrix, projectionMatrix, renderPass, renderPassTickCount) {\n        const glw = this.__webglResourceRepository.currentWebGLContextWrapper;\n        const gl = glw.getRawContext();\n        this.__setCamera(renderPass);\n        this.__setCurrentComponentSIDsForEachRenderPass(renderPass);\n        for (let idx = 0; idx < meshComponentSids.length; idx++) {\n            const sid = meshComponentSids[idx];\n            if (sid === _foundation_core_Component__WEBPACK_IMPORTED_MODULE_11__[\"default\"].invalidComponentSID) {\n                break;\n            }\n            const meshComponent = meshComponents[sid];\n            if (meshComponent == null) {\n                break;\n            }\n            const mesh = meshComponent.mesh;\n            if (!(mesh && mesh.isOriginalMesh())) {\n                continue;\n            }\n            _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_22__[\"default\"].startDepthMasking(idx, gl, renderPass);\n            const entity = meshComponent.entity;\n            this.__setCurrentComponentSIDsForEachEntity(gl, renderPass, entity);\n            const meshRendererComponent = entity.getMeshRenderer();\n            const primitiveNum = mesh.getPrimitiveNumber();\n            let firstTime = false;\n            for (let i = 0; i < primitiveNum; i++) {\n                const primitive = mesh.getPrimitiveAt(i);\n                const material = renderPass.getAppropriateMaterial(primitive, primitive.material);\n                if (material.isEmptyMaterial()) {\n                    continue;\n                }\n                const shaderProgramUid = material._shaderProgramUid;\n                if (shaderProgramUid === -1) {\n                    continue;\n                }\n                this.attachVertexDataInner(mesh, primitive, i, glw, mesh.variationVBOUid);\n                if (shaderProgramUid !== this.__lastShader) {\n                    const shaderProgram = this.__webglResourceRepository.getWebGLResource(shaderProgramUid);\n                    gl.useProgram(shaderProgram);\n                    gl.uniform1i(shaderProgram.dataTexture, 7);\n                    this.__setupMaterial(material, renderPass);\n                    WebGLStrategyFastestWebGL1.__shaderProgram = shaderProgram;\n                    firstTime = true;\n                }\n                if (firstTime) {\n                    this.__webglResourceRepository.bindTexture2D(7, this.__dataTextureUid);\n                }\n                this.__setCurrentComponentSIDsForEachPrimitive(gl, renderPass, material, entity);\n                _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_22__[\"default\"].setCullAndBlendSettings(material, renderPass, gl);\n                material.setParemetersForGPU({\n                    material: material, shaderProgram: WebGLStrategyFastestWebGL1.__shaderProgram, firstTime: firstTime,\n                    args: {\n                        glw: glw,\n                        entity: entity,\n                        worldMatrix: entity.getSceneGraph().worldMatrixInner,\n                        normalMatrix: entity.getSceneGraph().normalMatrixInner,\n                        lightComponents: this.__lightComponents,\n                        renderPass: renderPass,\n                        primitive: primitive,\n                        diffuseCube: meshRendererComponent.diffuseCubeMap,\n                        specularCube: meshRendererComponent.specularCubeMap\n                    }\n                });\n                if (primitive.indicesAccessor) {\n                    glw.drawElementsInstanced(primitive.primitiveMode.index, primitive.indicesAccessor.elementCount, primitive.indicesAccessor.componentType.index, 0, mesh.instanceCountIncludeOriginal);\n                }\n                else {\n                    glw.drawArraysInstanced(primitive.primitiveMode.index, 0, primitive.getVertexCountAsVerticesBased(), mesh.instanceCountIncludeOriginal);\n                }\n                this.__lastShader = shaderProgramUid;\n            }\n        }\n        this.__lastRenderPassTickCount = renderPassTickCount;\n        return false;\n    }\n    $render(idx, meshComponent, worldMatrix, normalMatrix, entity, renderPass, renderPassTickCount, diffuseCube, specularCube) {\n        const glw = this.__webglResourceRepository.currentWebGLContextWrapper;\n        const gl = glw.getRawContext();\n        _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_22__[\"default\"].endDepthMasking(idx, gl, renderPass);\n    }\n}\nWebGLStrategyFastestWebGL1.__globalDataRepository = _foundation_core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_19__[\"default\"].getInstance();\n\n\n//# sourceURL=webpack:///./src/webgl/WebGLStrategyFastestWebGL1.ts?");

/***/ }),

/***/ "./src/webgl/WebGLStrategyUniform.ts":
/*!*******************************************!*\
  !*** ./src/webgl/WebGLStrategyUniform.ts ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return WebGLStrategyUniform; });\n/* harmony import */ var _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WebGLResourceRepository */ \"./src/webgl/WebGLResourceRepository.ts\");\n/* harmony import */ var _foundation_components_MeshComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/components/MeshComponent */ \"./src/foundation/components/MeshComponent.ts\");\n/* harmony import */ var _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/renderer/CGAPIResourceRepository */ \"./src/foundation/renderer/CGAPIResourceRepository.ts\");\n/* harmony import */ var _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation/definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../foundation/core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _foundation_components_LightComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../foundation/components/LightComponent */ \"./src/foundation/components/LightComponent.ts\");\n/* harmony import */ var _foundation_core_Config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../foundation/core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../foundation/definitions/PixelFormat */ \"./src/foundation/definitions/PixelFormat.ts\");\n/* harmony import */ var _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../foundation/definitions/ComponentType */ \"./src/foundation/definitions/ComponentType.ts\");\n/* harmony import */ var _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../foundation/definitions/TextureParameter */ \"./src/foundation/definitions/TextureParameter.ts\");\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../foundation/definitions/ShaderVariableUpdateInterval */ \"./src/foundation/definitions/ShaderVariableUpdateInterval.ts\");\n/* harmony import */ var _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../foundation/core/MemoryManager */ \"./src/foundation/core/MemoryManager.ts\");\n/* harmony import */ var _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../foundation/definitions/ShaderType */ \"./src/foundation/definitions/ShaderType.ts\");\n/* harmony import */ var _foundation_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../foundation/definitions/BufferUse */ \"./src/foundation/definitions/BufferUse.ts\");\n/* harmony import */ var _foundation_core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../foundation/core/GlobalDataRepository */ \"./src/foundation/core/GlobalDataRepository.ts\");\n/* harmony import */ var _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../foundation/misc/MiscUtil */ \"./src/foundation/misc/MiscUtil.ts\");\n/* harmony import */ var _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./WebGLStrategyCommonMethod */ \"./src/webgl/WebGLStrategyCommonMethod.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass WebGLStrategyUniform {\n    constructor() {\n        this.__webglResourceRepository = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        this.__dataTextureUid = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__[\"default\"].InvalidCGAPIResourceUid;\n        this.__lastShader = -1;\n        this.__lastRenderPassTickCount = -1;\n    }\n    setupShaderProgram(meshComponent) {\n        if (meshComponent.mesh == null) {\n            _foundation_components_MeshComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].alertNoMeshSet(meshComponent);\n            return;\n        }\n        const primitiveNum = meshComponent.mesh.getPrimitiveNumber();\n        for (let i = 0; i < primitiveNum; i++) {\n            const primitive = meshComponent.mesh.getPrimitiveAt(i);\n            const material = primitive.material;\n            if (material == null || material.isEmptyMaterial()) {\n                return;\n            }\n            if (material._shaderProgramUid !== _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__[\"default\"].InvalidCGAPIResourceUid) {\n                return;\n            }\n            const glw = this.__webglResourceRepository.currentWebGLContextWrapper;\n            const gl = glw.getRawContext();\n            const isPointSprite = primitive.primitiveMode.index === gl.POINTS;\n            this.setupDefaultShaderSemantics(material, isPointSprite);\n        }\n    }\n    setupDefaultShaderSemantics(material, isPointSprite) {\n        // Shader Setup\n        const shaderSemanticsInfos = [\n            {\n                semantic: _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__[\"ShaderSemantics\"].VertexAttributesExistenceArray, compositionType: _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].ScalarArray, componentType: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Int,\n                stage: _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_14__[\"ShaderType\"].VertexShader, min: 0, max: 1, isSystem: true, updateInteval: _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_12__[\"ShaderVariableUpdateInterval\"].EveryTime\n            },\n            {\n                semantic: _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__[\"ShaderSemantics\"].WorldMatrix, compositionType: _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].Mat4, componentType: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float,\n                stage: _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_14__[\"ShaderType\"].VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, updateInteval: _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_12__[\"ShaderVariableUpdateInterval\"].EveryTime\n            },\n            {\n                semantic: _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__[\"ShaderSemantics\"].NormalMatrix, compositionType: _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].Mat3, componentType: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float,\n                stage: _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_14__[\"ShaderType\"].VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isSystem: true, updateInteval: _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_12__[\"ShaderVariableUpdateInterval\"].EveryTime\n            },\n        ];\n        if (isPointSprite) {\n            shaderSemanticsInfos.push({\n                semantic: _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__[\"ShaderSemantics\"].PointSize, compositionType: _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].Scalar, componentType: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float,\n                stage: _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_14__[\"ShaderType\"].PixelShader, min: 0, max: Number.MAX_VALUE, isSystem: true, updateInteval: _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_12__[\"ShaderVariableUpdateInterval\"].EveryTime\n            }, {\n                semantic: _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__[\"ShaderSemantics\"].PointDistanceAttenuation, compositionType: _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__[\"CompositionType\"].Vec3, componentType: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float,\n                stage: _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_14__[\"ShaderType\"].PixelShader, min: 0, max: 1, isSystem: true, updateInteval: _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_12__[\"ShaderVariableUpdateInterval\"].EveryTime\n            });\n        }\n        WebGLStrategyUniform.setupMaterial(material, shaderSemanticsInfos);\n    }\n    static setupMaterial(material, args) {\n        let infoArray;\n        if (args != null) {\n            infoArray = args;\n        }\n        else {\n            infoArray = material.fieldsInfoArray;\n        }\n        WebGLStrategyUniform.__vertexShaderMethodDefinitions_uniform =\n            `\nuniform mat4 u_worldMatrix;\nuniform mat3 u_normalMatrix;\n\nmat4 get_worldMatrix(float instanceId) {\n  return u_worldMatrix;\n}\n\nmat3 get_normalMatrix(float instanceId) {\n  return u_normalMatrix;\n}\n\n#ifdef RN_IS_MORPHING\n  vec3 get_position(float vertexId, vec3 basePosition) {\n    vec3 position = basePosition;\n    for (int i=0; i<${_foundation_core_Config__WEBPACK_IMPORTED_MODULE_7__[\"default\"].maxVertexMorphNumberInShader}; i++) {\n      float index = u_dataTextureMorphOffsetPosition[i] + 1.0 * vertexId;\n      float powWidthVal = ${_foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__[\"default\"].bufferWidthLength}.0;\n      float powHeightVal = ${_foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__[\"default\"].bufferHeightLength}.0;\n      vec2 arg = vec2(1.0/powWidthVal, 1.0/powHeightVal);\n    //  vec2 arg = vec2(1.0/powWidthVal, 1.0/powWidthVal/powHeightVal);\n      vec3 addPos = fetchElement(u_dataTexture, index + 0.0, arg).xyz;\n      position += addPos * u_morphWeights[i];\n      if (i == u_morphTargetNumber-1) {\n        break;\n      }\n    }\n\n    return position;\n  }\n#endif\n\n  `;\n        material.createProgram(WebGLStrategyUniform.__vertexShaderMethodDefinitions_uniform, _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__[\"ShaderSemantics\"].getShaderProperty);\n        const webglResourceRepository = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getInstance();\n        webglResourceRepository.setupUniformLocations(material._shaderProgramUid, infoArray);\n        material.setUniformLocations(material._shaderProgramUid);\n        WebGLStrategyUniform.__globalDataRepository.setUniformLocations(material._shaderProgramUid);\n        const gl = webglResourceRepository.currentWebGLContextWrapper.getRawContext();\n        const shaderProgram = webglResourceRepository.getWebGLResource(material._shaderProgramUid);\n        shaderProgram.dataTexture = gl.getUniformLocation(shaderProgram, 'u_dataTexture');\n        shaderProgram.currentComponentSIDs = gl.getUniformLocation(shaderProgram, 'u_currentComponentSIDs');\n    }\n    $load(meshComponent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (meshComponent.mesh == null) {\n                _foundation_components_MeshComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].alertNoMeshSet(meshComponent);\n                return;\n            }\n            this.setupShaderProgram(meshComponent);\n            const primitiveNum = meshComponent.mesh.getPrimitiveNumber();\n            for (let i = 0; i < primitiveNum; i++) {\n                const primitive = meshComponent.mesh.getPrimitiveAt(i);\n                primitive.create3DAPIVertexData();\n            }\n            meshComponent.mesh.updateVariationVBO();\n        });\n    }\n    $prerender(meshComponent, meshRendererComponent, instanceIDBufferUid) {\n        if (meshComponent.mesh == null) {\n            _foundation_components_MeshComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].alertNoMeshSet(meshComponent);\n            return;\n        }\n        const primitiveNum = meshComponent.mesh.getPrimitiveNumber();\n        if (meshComponent.mesh.weights.length > 0) {\n            for (let i = 0; i < primitiveNum; i++) {\n                const primitive = meshComponent.mesh.getPrimitiveAt(i);\n                this.__webglResourceRepository.resendVertexBuffer(primitive, primitive.vertexHandles.vboHandles);\n            }\n        }\n        for (let i = 0; i < primitiveNum; i++) {\n            const primitive = meshComponent.mesh.getPrimitiveAt(i);\n            this.__webglResourceRepository.setVertexDataToPipeline({ vaoHandle: meshComponent.mesh.getVaoUids(i), iboHandle: primitive.vertexHandles.iboHandle, vboHandles: primitive.vertexHandles.vboHandles }, primitive, meshComponent.mesh.variationVBOUid);\n        }\n    }\n    common_$prerender() {\n        const componentRepository = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInstance();\n        this.__lightComponents = componentRepository.getComponentsWithType(_foundation_components_LightComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n        // Setup Data Texture\n        if (this.__dataTextureUid === _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__[\"default\"].InvalidCGAPIResourceUid) {\n            const memoryManager = _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__[\"default\"].getInstance();\n            const buffer = memoryManager.getBuffer(_foundation_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_15__[\"BufferUse\"].GPUVertexData);\n            if (buffer.takenSizeInByte / _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__[\"default\"].bufferWidthLength / 4 > _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__[\"default\"].bufferHeightLength) {\n                console.warn('The buffer size exceeds the size of the data texture.');\n            }\n            let paddingArrayBufferSize = 0;\n            if ((buffer.takenSizeInByte) / 4 / 4 < _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__[\"default\"].bufferWidthLength * _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__[\"default\"].bufferHeightLength) {\n                paddingArrayBufferSize = _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__[\"default\"].bufferWidthLength * _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__[\"default\"].bufferHeightLength * 4 * 4 - buffer.takenSizeInByte;\n            }\n            const concatArraybuffer = _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_17__[\"MiscUtil\"].concatArrayBuffers([buffer.getArrayBuffer()], [buffer.takenSizeInByte], paddingArrayBufferSize);\n            const floatDataTextureBuffer = new Float32Array(concatArraybuffer);\n            if (this.__webglResourceRepository.currentWebGLContextWrapper.isWebGL2) {\n                this.__dataTextureUid = this.__webglResourceRepository.createTexture(floatDataTextureBuffer, {\n                    level: 0, internalFormat: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__[\"TextureParameter\"].RGBA32F, width: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__[\"default\"].bufferWidthLength, height: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__[\"default\"].bufferHeightLength,\n                    border: 0, format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_8__[\"PixelFormat\"].RGBA, type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, magFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__[\"TextureParameter\"].Nearest, minFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__[\"TextureParameter\"].Nearest,\n                    wrapS: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__[\"TextureParameter\"].Repeat, wrapT: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__[\"TextureParameter\"].Repeat, generateMipmap: false, anisotropy: false\n                });\n            }\n            else {\n                this.__dataTextureUid = this.__webglResourceRepository.createTexture(floatDataTextureBuffer, {\n                    level: 0, internalFormat: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_8__[\"PixelFormat\"].RGBA, width: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__[\"default\"].bufferWidthLength, height: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__[\"default\"].bufferHeightLength,\n                    border: 0, format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_8__[\"PixelFormat\"].RGBA, type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__[\"ComponentType\"].Float, magFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__[\"TextureParameter\"].Nearest, minFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__[\"TextureParameter\"].Nearest,\n                    wrapS: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__[\"TextureParameter\"].Repeat, wrapT: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__[\"TextureParameter\"].Repeat, generateMipmap: false, anisotropy: false\n                });\n            }\n        }\n    }\n    attachGPUData(primitive) {\n    }\n    attatchShaderProgram(material) {\n    }\n    attachVertexData(i, primitive, glw, instanceIDBufferUid) {\n    }\n    attachVertexDataInner(mesh, primitive, primitiveIndex, glw, instanceIDBufferUid) {\n        const vaoHandles = primitive.vertexHandles;\n        const vao = this.__webglResourceRepository.getWebGLResource(mesh.getVaoUids(primitiveIndex));\n        const gl = glw.getRawContext();\n        if (vao != null) {\n            glw.bindVertexArray(vao);\n        }\n        else {\n            this.__webglResourceRepository.setVertexDataToPipeline(vaoHandles, primitive, instanceIDBufferUid);\n            const ibo = this.__webglResourceRepository.getWebGLResource(vaoHandles.iboHandle);\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n        }\n    }\n    dettachVertexData(glw) {\n        const gl = glw.getRawContext();\n        if (glw.bindVertexArray) {\n            glw.bindVertexArray(null);\n        }\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new WebGLStrategyUniform();\n        }\n        return this.__instance;\n    }\n    common_$render(meshComponentSids, meshComponents, viewMatrix, projectionMatrix, renderPass) {\n        return false;\n    }\n    $render(idx, meshComponent, worldMatrix, normalMatrix, entity, renderPass, renderPassTickCount, diffuseCube, specularCube) {\n        const glw = this.__webglResourceRepository.currentWebGLContextWrapper;\n        const gl = glw.getRawContext();\n        _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_18__[\"default\"].startDepthMasking(idx, gl, renderPass);\n        if (meshComponent.mesh == null) {\n            _foundation_components_MeshComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].alertNoMeshSet(meshComponent);\n            return;\n        }\n        const primitiveNum = meshComponent.mesh.getPrimitiveNumber();\n        for (let i = 0; i < primitiveNum; i++) {\n            const primitive = meshComponent.mesh.getPrimitiveAt(i);\n            this.attachVertexDataInner(meshComponent.mesh, primitive, i, glw, _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__[\"default\"].InvalidCGAPIResourceUid);\n            const material = renderPass.getAppropriateMaterial(primitive, primitive.material);\n            if (material.isEmptyMaterial()) {\n                continue;\n            }\n            const shaderProgram = this.__webglResourceRepository.getWebGLResource(material._shaderProgramUid);\n            const shaderProgramUid = material._shaderProgramUid;\n            let firstTime = false;\n            if (renderPassTickCount !== this.__lastRenderPassTickCount) {\n                firstTime = true;\n            }\n            if (shaderProgramUid !== this.__lastShader) {\n                gl.useProgram(shaderProgram);\n                gl.uniform1i(shaderProgram.dataTexture, 7);\n                this.__lastShader = shaderProgramUid;\n                firstTime = true;\n            }\n            this.__webglResourceRepository.bindTexture2D(7, this.__dataTextureUid);\n            // this.__setUniformBySystem({glw, shaderProgram, primitive, shaderProgramUid,\n            //   entity, worldMatrix, normalMatrix, renderPass,\n            //   diffuseCube, specularCube, firstTime});\n            if (firstTime) {\n                // this.setCamera(renderPass);\n                // WebGLStrategyUniform.__globalDataRepository.setUniformValues(shaderProgram, {\n                //   setUniform: true,\n                //   glw: glw,\n                //   entity: entity,\n                //   primitive: primitive,\n                //   worldMatrix: worldMatrix,\n                //   normalMatrix: normalMatrix,\n                //   lightComponents: this.__lightComponents,\n                //   renderPass: renderPass,\n                //   diffuseCube: diffuseCube,\n                //   specularCube: specularCube\n                // });\n            }\n            //from material\n            _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_18__[\"default\"].setCullAndBlendSettings(material, renderPass, gl);\n            // material.setUniformValues(firstTime, {\n            material.setParemetersForGPU({\n                material, shaderProgram, firstTime, args: {\n                    setUniform: true,\n                    glw: glw,\n                    entity: entity,\n                    primitive: primitive,\n                    worldMatrix: worldMatrix,\n                    normalMatrix: normalMatrix,\n                    lightComponents: this.__lightComponents,\n                    renderPass: renderPass,\n                    diffuseCube: diffuseCube,\n                    specularCube: specularCube\n                }\n            });\n            if (primitive.indicesAccessor) {\n                glw.drawElementsInstanced(primitive.primitiveMode.index, primitive.indicesAccessor.elementCount, primitive.indicesAccessor.componentType.index, 0, 1);\n            }\n            else {\n                glw.drawArraysInstanced(primitive.primitiveMode.index, 0, primitive.getVertexCountAsVerticesBased(), 1);\n            }\n            // this.dettachVertexData(glw);\n        }\n        _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_18__[\"default\"].endDepthMasking(idx, gl, renderPass);\n        this.__lastRenderPassTickCount = renderPassTickCount;\n    }\n    setCamera(renderPass) {\n        let cameraComponent = renderPass.cameraComponent;\n        if (cameraComponent == null) {\n            cameraComponent = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInstance().getComponent(_foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"].main);\n        }\n        if (cameraComponent) {\n            cameraComponent.setValuesToGlobalDataRepository();\n        }\n    }\n}\nWebGLStrategyUniform.__globalDataRepository = _foundation_core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_16__[\"default\"].getInstance();\n\n\n//# sourceURL=webpack:///./src/webgl/WebGLStrategyUniform.ts?");

/***/ }),

/***/ "./src/webgl/getRenderingStrategy.ts":
/*!*******************************************!*\
  !*** ./src/webgl/getRenderingStrategy.ts ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/definitions/ProcessApproach */ \"./src/foundation/definitions/ProcessApproach.ts\");\n/* harmony import */ var _WebGLStrategyUniform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WebGLStrategyUniform */ \"./src/webgl/WebGLStrategyUniform.ts\");\n/* harmony import */ var _WebGLStrategyFastestWebGL1__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WebGLStrategyFastestWebGL1 */ \"./src/webgl/WebGLStrategyFastestWebGL1.ts\");\n\n\n\nconst getRenderingStrategy = function (processApproach) {\n    // Strategy\n    if (processApproach.index === _foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_0__[\"ProcessApproach\"].FastestWebGL1.index) {\n        return _WebGLStrategyFastestWebGL1__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getInstance();\n    }\n    else if (processApproach.index === _foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_0__[\"ProcessApproach\"].UniformWebGL1.index ||\n        processApproach.index === _foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_0__[\"ProcessApproach\"].UniformWebGL2.index) {\n        return _WebGLStrategyUniform__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\n    }\n    return _WebGLStrategyUniform__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (getRenderingStrategy);\n\n\n//# sourceURL=webpack:///./src/webgl/getRenderingStrategy.ts?");

/***/ }),

/***/ "./src/webgl/main.ts":
/*!***************************!*\
  !*** ./src/webgl/main.ts ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _getRenderingStrategy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getRenderingStrategy */ \"./src/webgl/getRenderingStrategy.ts\");\n/* harmony import */ var _shaders_GLSLShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shaders/GLSLShader */ \"./src/webgl/shaders/GLSLShader.ts\");\n/* harmony import */ var _WebGLContextWrapper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WebGLContextWrapper */ \"./src/webgl/WebGLContextWrapper.ts\");\n/* harmony import */ var _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WebGLResourceRepository */ \"./src/webgl/WebGLResourceRepository.ts\");\n/* harmony import */ var _WebGLStrategyUniform__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./WebGLStrategyUniform */ \"./src/webgl/WebGLStrategyUniform.ts\");\n\n\n\n\n\nconst WebGL = Object.freeze({\n    getRenderingStrategy: _getRenderingStrategy__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n    GLSLShader: _shaders_GLSLShader__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n    WebGLContextWrapper: _WebGLContextWrapper__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n    WebGLResourceRepository: _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n    WebGLStrategyUniform: _WebGLStrategyUniform__WEBPACK_IMPORTED_MODULE_4__[\"default\"]\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (WebGL);\nwindow.RnWebGL = WebGL;\n\n\n//# sourceURL=webpack:///./src/webgl/main.ts?");

/***/ }),

/***/ "./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.frag":
/*!**************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.frag ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"code\":\"#ifdef GLSL_ES3\\r\\n#version 300 es\\r\\n#endif\\r\\n\\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\\r\\n#extension GL_EXT_shader_texture_lod : require\\r\\n#endif\\r\\n\\r\\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\\r\\n#extension GL_OES_standard_derivatives : require\\r\\n#endif\\r\\n\\nprecision highp float;\\r\\nprecision highp int;\\r\\n\\n\\n/* shaderity: ${definitions} */\\n\\nuniform float u_materialSID;\\r\\nuniform sampler2D u_dataTexture;\\r\\n\\r\\n  /*\\r\\n  * This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\\r\\n  * arg = vec2(1. / size.x, 1. / size.x / size.y);\\r\\n  */\\r\\n  // highp vec4 fetchElement(highp sampler2D tex, highp float index, highp vec2 arg)\\r\\n  // {\\r\\n  //   return ${this.glsl_texture}( tex, arg * (index + 0.5) );\\r\\n  // }\\r\\n\\r\\nhighp vec4 fetchElement(highp sampler2D tex, highp float index, highp vec2 invSize){\\r\\n  highp float t = (index + 0.5) * invSize.x;\\r\\n  highp float x = fract(t);\\r\\n  highp float y = (floor(t) + 0.5) * invSize.y;\\r\\n  return texture2D( tex, vec2(x, y) );\\r\\n}\\r\\n\\r\\n\\r\\nfloat rand(const vec2 co){\\r\\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\\r\\n}\\r\\n\\r\\nvec3 descramble(vec3 v) {\\r\\n  float seed = 0.0;\\r\\n  v.x -= sin(fract(v.y*20.0));\\r\\n  v.z -= cos(fract(-v.y*10.0));\\r\\n  return v;\\r\\n}\\r\\n\\r\\n\\n\\nin vec3 v_color;\\nin vec3 v_normal_inWorld;\\nin vec3 v_faceNormal_inWorld;\\nin vec3 v_tangent_inWorld;\\nin vec3 v_binormal_inWorld;\\nin vec4 v_position_inWorld;\\nin vec2 v_texcoord;\\nin vec3 v_baryCentricCoord;\\n\\n#ifdef GLSL_ES3\\r\\n  layout(location = 0) out vec4 rt0;\\r\\n#else\\r\\n  vec4 rt0;\\r\\n#endif\\r\\n\\n\\nconst float M_PI = 3.141592653589793;\\r\\nconst float c_MinRoughness = 0.04;\\r\\n\\r\\nfloat angular_n_h(float NH) {\\r\\n  return acos(NH);\\r\\n}\\r\\n\\r\\nfloat sqr(float x) {\\r\\n  return x*x;\\r\\n}\\r\\n\\r\\nfloat d_phong(float NH, float c1) {\\r\\n  return pow(\\r\\n    cos(acos(NH))\\r\\n    , c1\\r\\n  );\\r\\n}\\r\\n\\r\\n// this is from https://www.unrealengine.com/blog/physically-based-shading-on-mobile\\r\\nvec3 envBRDFApprox( vec3 F0, float Roughness, float NoV ) {\\r\\n  const vec4 c0 = vec4(-1, -0.0275, -0.572, 0.022 );\\r\\n  const vec4 c1 = vec4(1, 0.0425, 1.04, -0.04 );\\r\\n  vec4 r = Roughness * c0 + c1;\\r\\n  float a004 = min( r.x * r.x, exp2( -9.28 * NoV ) ) * r.x + r.y;\\r\\n  vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\r\\n\\r\\n  return F0 * AB.x + AB.y;\\r\\n}\\r\\n\\r\\n// GGX NDF\\r\\nfloat d_ggx(float NH, float alphaRoughness) {\\r\\n  float roughnessSqr = alphaRoughness * alphaRoughness;\\r\\n  float f = (roughnessSqr - 1.0) * NH * NH + 1.0;\\r\\n  return roughnessSqr / (M_PI * f * f);\\r\\n}\\r\\n\\r\\nfloat d_torrance_reiz(float NH, float c3) {\\r\\n  float CosSquared = NH*NH;\\r\\n  float TanSquared = (1.0 - CosSquared)/CosSquared;\\r\\n  //return (1.0/M_PI) * sqr(c3/(CosSquared * (c3*c3 + TanSquared)));  // gamma = 2, aka GGX\\r\\n  return (1.0/sqrt(M_PI)) * (sqr(c3)/(CosSquared * (c3*c3 + TanSquared))); // gamma = 1, D_Berry\\r\\n}\\r\\n\\r\\nfloat d_beckmann(float NH, float m) {\\r\\n  float co = 1.0 / (4.0 * m * m * NH * NH * NH * NH);\\r\\n  float expx = exp((NH * NH - 1.0) / (m * m * NH * NH));\\r\\n  return co * expx;\\r\\n}\\r\\n\\r\\n// the same as glTF WebGL sample\\r\\n// https://github.com/KhronosGroup/glTF-WebGL-PBR/blob/88eda8c5358efe03128b72b6c5f5f6e5b6d023e1/shaders/pbr-frag.glsl#L188\\r\\n// That is, Unreal Engine based approach, but modified to use alphaRoughness (squared artist's roughness parameter),\\r\\n// and based on 'Separable Masking and Shadowing' approximation (propesed by Christophe Schlick)\\r\\n// https://www.cs.virginia.edu/~jdl/bib/appearance/analytic%20models/schlick94b.pdf\\r\\nfloat g_shielding(float NL, float NV, float alphaRoughness) {\\r\\n  float r = alphaRoughness;\\r\\n\\r\\n  // Local Shadowing using \\\"Schlick-Smith\\\" Masking Function\\r\\n  float localShadowing = 2.0 * NL / (NL + sqrt(r * r + (1.0 - r * r) * (NL * NL)));\\r\\n\\r\\n  // Local Masking using \\\"Schlick-Smith\\\" Masking Function\\r\\n  float localMasking = 2.0 * NV / (NV + sqrt(r * r + (1.0 - r * r) * (NV * NV)));\\r\\n\\r\\n  return localShadowing * localMasking;\\r\\n}\\r\\n\\r\\n// The code from https://google.github.io/filament/Filament.html#listing_approximatedspecularv\\r\\n// The idea is from [Heitz14] Eric Heitz. 2014. Understanding the Masking-Shadowing Function in Microfacet-Based BRDFs.\\r\\nfloat v_SmithGGXCorrelated(float NL, float NV, float alphaRoughness) {\\r\\n  float a2 = alphaRoughness * alphaRoughness;\\r\\n  float GGXV = NL * sqrt(NV * NV * (1.0 - a2) + a2);\\r\\n  float GGXL = NV * sqrt(NL * NL * (1.0 - a2) + a2);\\r\\n  return 0.5 / (GGXV + GGXL);\\r\\n}\\r\\n\\r\\nfloat v_SmithGGXCorrelatedFast(float NL, float NV, float alphaRoughness) {\\r\\n  float a = alphaRoughness;\\r\\n  float GGXV = NL * (NV * (1.0 - a) + a);\\r\\n  float GGXL = NV * (NL * (1.0 - a) + a);\\r\\n  return 0.5 / (GGXV + GGXL);\\r\\n}\\r\\n\\r\\n// The Schlick Approximation to Fresnel\\r\\nvec3 fresnel(vec3 f0, float VH) {\\r\\n  return vec3(f0) + (vec3(1.0) - f0) * pow(1.0 - VH, 5.0);\\r\\n}\\r\\n\\r\\nvec3 cook_torrance_specular_brdf(float NH, float NL, float NV, vec3 F, float alphaRoughness) {\\r\\n  float D = d_ggx(NH, alphaRoughness);\\r\\n  float V = v_SmithGGXCorrelated(NL, NV, alphaRoughness);\\r\\n  return vec3(D)*vec3(V)*F;\\r\\n//      float G = g_shielding(NL, NV, alphaRoughness);\\r\\n//      return vec3(D)*vec3(G)*F/vec3(4.0*NL*NV);\\r\\n\\r\\n}\\r\\n\\r\\nvec3 diffuse_brdf(vec3 albedo)\\r\\n{\\r\\n  return albedo / M_PI;\\r\\n}\\r\\n\\r\\nvec3 srgbToLinear(vec3 srgbColor) {\\r\\n  return pow(srgbColor, vec3(2.2));\\r\\n}\\r\\n\\r\\nfloat srgbToLinear(float value) {\\r\\n  return pow(value, 2.2);\\r\\n}\\r\\n\\r\\nvec3 linearToSrgb(vec3 linearColor) {\\r\\n  return pow(linearColor, vec3(1.0/2.2));\\r\\n}\\r\\n\\r\\nfloat linearToSrgb(float value) {\\r\\n  return pow(value, 1.0/2.2);\\r\\n}\\r\\n\\r\\nvec3 fresnelSchlickRoughness(vec3 F0, float cosTheta, float roughness)\\r\\n{\\r\\n  return F0 + (max(vec3(1.0 - roughness), F0) - F0) * pow(1.0 - cosTheta, 5.0);\\r\\n}\\r\\n\\r\\nvec3 normalBlendingUDN(sampler2D baseMap, sampler2D detailMap, vec2 baseUv, vec2 detailUv) {\\r\\n  vec3 t = texture2D(baseMap,   baseUv).xyz * 2.0 - 1.0;\\r\\n  vec3 u = texture2D(detailMap, detailUv).xyz * 2.0 - 1.0;\\r\\n  vec3 r = normalize(vec3(t.xy + u.xy, t.z));\\r\\n  return r;\\r\\n}\\r\\n\\r\\nvec2 uvTransform(vec2 scale, vec2 offset, float rotation, vec2 uv) {\\r\\n  mat3 translationMat = mat3(1,0,0, 0,1,0, offset.x, offset.y, 1);\\r\\n  mat3 rotationMat = mat3(\\r\\n      cos(rotation), sin(rotation), 0,\\r\\n      -sin(rotation), cos(rotation), 0,\\r\\n                  0,             0, 1\\r\\n  );\\r\\n  mat3 scaleMat = mat3(scale.x,0,0, 0,scale.y,0, 0,0,1);\\r\\n\\r\\n  mat3 matrix = translationMat * rotationMat * scaleMat;\\r\\n  vec2 uvTransformed = ( matrix * vec3(uv.xy, 1) ).xy;\\r\\n\\r\\n  return uvTransformed;\\r\\n}\\r\\n\\n\\n/* shaderity: ${getters} */\\n\\nvec3 IBLContribution(float materialSID, vec3 n, float NV, vec3 reflection, vec3 albedo, vec3 F0, float userRoughness, vec3 F)\\n{\\n  vec4 iblParameter = get_iblParameter(materialSID, 0);\\n  float mipCount = iblParameter.x;\\n  float lod = (userRoughness * mipCount);\\n\\n  vec4 diffuseTexel = textureCube(u_diffuseEnvTexture, vec3(-n.x, n.y, n.z));\\n  vec3 diffuseLight;\\n  diffuseLight = srgbToLinear(diffuseTexel.rgb);\\n\\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\\r\\n  vec4 specularTexel = textureCubeLodEXT(u_specularEnvTexture, vec3(-reflection.x, reflection.y, reflection.z), lod);\\r\\n#else\\r\\n  vec4 specularTexel = textureCube(u_specularEnvTexture, vec3(-reflection.x, reflection.y, reflection.z));\\r\\n#endif\\r\\n\\n\\n  vec3 specularLight;\\n  specularLight = srgbToLinear(specularTexel.rgb);\\n\\n  vec3 kS = fresnelSchlickRoughness(F0, NV, userRoughness);\\n  vec3 kD = 1.0 - kS;\\n  vec3 diffuse = diffuseLight * albedo * kD;\\n  // vec3 brdf = texture2D(u_brdfLutTexture, vec2(NV, 1.0 - userRoughness)).rgb;\\n  // vec3 specular = specularLight * (F0 * brdf.x + brdf.y);\\n  vec3 specular = specularLight * envBRDFApprox(F0, userRoughness, NV);\\n\\n  float IBLDiffuseContribution = iblParameter.y;\\n  float IBLSpecularContribution = iblParameter.z;\\n  diffuse *= IBLDiffuseContribution;\\n  specular *= IBLSpecularContribution;\\n  return diffuse + specular;\\n}\\n\\nfloat edge_ratio(vec3 bary3, float wireframeWidthInner, float wireframeWidthRelativeScale) {\\n  vec3 d = fwidth(bary3);\\n  vec3 x = bary3+vec3(1.0 - wireframeWidthInner)*d;\\n  vec3 a3 = smoothstep(vec3(0.0), d, x);\\n  float factor = min(min(a3.x, a3.y), a3.z);\\n\\n  return clamp((1.0 - factor), 0.0, 1.0);\\n}\\n\\n\\n\\n\\n\\n\\nvoid main ()\\n{\\n\\n#ifdef RN_IS_FASTEST_MODE\\r\\n  float materialSID = u_currentComponentSIDs[0];\\r\\n\\r\\n  int lightNumber = 0;\\r\\n  #ifdef RN_IS_LIGHTING\\r\\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: ${WellKnownComponentTIDs.LightComponentTID} */]);\\r\\n  #endif\\r\\n\\r\\n  float skeletalComponentSID = -1.0;\\r\\n  #ifdef RN_IS_SKINNING\\r\\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: ${WellKnownComponentTIDs.SkeletalComponentTID} */];\\r\\n  #endif\\r\\n\\r\\n#else\\r\\n\\r\\n  float materialSID = u_materialSID;\\r\\n\\r\\n  int lightNumber = 0;\\r\\n  #ifdef RN_IS_LIGHTING\\r\\n    lightNumber = get_lightNumber(0.0, 0);\\r\\n  #endif\\r\\n\\r\\n  float skeletalComponentSID = -1.0;\\r\\n  #ifdef RN_IS_SKINNING\\r\\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\\r\\n  #endif\\r\\n\\r\\n#endif\\r\\n\\n\\n  // Normal\\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\\n  vec4 iblParameter = get_iblParameter(materialSID, 0);\\n  float rot = iblParameter.w + 3.1415;\\n  mat3 rotEnvMatrix = mat3(cos(rot), 0.0, -sin(rot), 0.0, 1.0, 0.0, sin(rot), 0.0, cos(rot));\\n  vec3 normal_forEnv = rotEnvMatrix * normal_inWorld;\\n\\n  if (abs(length(v_tangent_inWorld)) > 0.01) {\\n    vec4 normalTextureTransform = get_normalTextureTransform(materialSID, 0);\\n    float normalTextureRotation = get_normalTextureRotation(materialSID, 0);\\n    vec2 normalTexUv = uvTransform(normalTextureTransform.xy, normalTextureTransform.zw, normalTextureRotation, v_texcoord);\\n    vec3 normal = texture2D(u_normalTexture, normalTexUv).xyz*2.0 - 1.0;\\n    vec3 tangent_inWorld = normalize(v_tangent_inWorld);\\n    vec3 binormal_inWorld = normalize(v_binormal_inWorld);\\n    normal_inWorld = normalize(normal_inWorld);\\n\\n    mat3 tbnMat_tangent_to_world = mat3(\\n      tangent_inWorld.x, tangent_inWorld.y, tangent_inWorld.z,\\n      binormal_inWorld.x, binormal_inWorld.y, binormal_inWorld.z,\\n      normal_inWorld.x, normal_inWorld.y, normal_inWorld.z\\n    );\\n\\n    normal = normalize(tbnMat_tangent_to_world * normal);\\n    normal_inWorld = normal;\\n  }\\n\\n\\n\\n  // BaseColorFactor\\n  vec3 baseColor = vec3(0.0, 0.0, 0.0);\\n  float alpha = 1.0;\\n  vec4 baseColorFactor = get_baseColorFactor(materialSID, 0);\\n  if (v_color != baseColor && baseColorFactor.rgb != baseColor) {\\n    baseColor = v_color * baseColorFactor.rgb;\\n    alpha = baseColorFactor.a;\\n  } else if (v_color == baseColor) {\\n    baseColor = baseColorFactor.rgb;\\n    alpha = baseColorFactor.a;\\n  } else if (baseColorFactor.rgb == baseColor) {\\n    baseColor = v_color;\\n  } else {\\n    baseColor = vec3(1.0, 1.0, 1.0);\\n  }\\n\\n\\n  // BaseColor (take account for BaseColorTexture)\\n  vec4 baseColorTextureTransform = get_baseColorTextureTransform(materialSID, 0);\\n  float baseColorTextureRotation = get_baseColorTextureRotation(materialSID, 0);\\n  vec2 baseColorTexUv = uvTransform(baseColorTextureTransform.xy, baseColorTextureTransform.zw, baseColorTextureRotation, v_texcoord);\\nvec4 textureColor = texture2D(u_baseColorTexture, baseColorTexUv);\\n  baseColor *= srgbToLinear(textureColor.rgb);\\n  alpha *= textureColor.a;\\n\\n  if (alpha < 0.01) {\\n    discard;\\n  }\\n\\n  // Metallic & Roughness\\n  vec2 metallicRoughnessFactor = get_metallicRoughnessFactor(materialSID, 0);\\n  float userRoughness = metallicRoughnessFactor.y;\\n  float metallic = metallicRoughnessFactor.x;\\n\\n  vec4 metallicRoughnessTextureTransform = get_metallicRoughnessTextureTransform(materialSID, 0);\\n  float metallicRoughnessTextureRotation = get_metallicRoughnessTextureRotation(materialSID, 0);\\n  vec2 metallicRoughnessTexUv = uvTransform(metallicRoughnessTextureTransform.xy, metallicRoughnessTextureTransform.zw, metallicRoughnessTextureRotation, v_texcoord);\\n  vec4 ormTexel = texture2D(u_metallicRoughnessTexture, metallicRoughnessTexUv);\\n  userRoughness = ormTexel.g * userRoughness;\\n  metallic = ormTexel.b * metallic;\\n\\n  userRoughness = clamp(userRoughness, c_MinRoughness, 1.0);\\n  metallic = clamp(metallic, 0.0, 1.0);\\n  float alphaRoughness = userRoughness * userRoughness;\\n\\n  // F0\\n  vec3 diffuseMatAverageF0 = vec3(0.04);\\n  vec3 F0 = mix(diffuseMatAverageF0, baseColor.rgb, metallic);\\n\\n  // Albedo\\n  vec3 albedo = baseColor.rgb * (vec3(1.0) - diffuseMatAverageF0);\\n  albedo.rgb *= (1.0 - metallic);\\n\\n  // ViewDirection\\n  float cameraSID = u_currentComponentSIDs[/* shaderity: ${WellKnownComponentTIDs.CameraComponentTID} */];\\n  vec3 viewPosition = get_viewPosition(cameraSID, 0);\\n  vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\\n\\n  // NV\\n  float NV = clamp(abs(dot(normal_inWorld, viewDirection)), 0.0, 1.0);\\n\\n  rt0 = vec4(0.0, 0.0, 0.0, alpha);\\n\\n  // Lighting\\n  if (length(normal_inWorld) > 0.02) {\\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\\n    for (int i = 0; i < /* shaderity: ${Config.maxLightNumberInShader} */; i++) {\\n      if (i >= lightNumber) {\\n        break;\\n      }\\n\\n      // Light\\n      vec4 gotLightDirection = get_lightDirection(0.0, i);\\n      vec4 gotLightPosition = get_lightPosition(0.0, i);\\n      vec4 gotLightIntensity = get_lightIntensity(0.0, i);\\n      vec3 lightDirection = gotLightDirection.xyz;\\n      vec3 lightIntensity = gotLightIntensity.xyz;\\n      vec3 lightPosition = gotLightPosition.xyz;\\n      float lightType = gotLightPosition.w;\\n      float spotCosCutoff = gotLightDirection.w;\\n      float spotExponent = gotLightIntensity.w;\\n\\n      if (0.75 < lightType) { // is pointlight or spotlight\\n        lightDirection = normalize(lightPosition.xyz - v_position_inWorld.xyz);\\n      }\\n      float spotEffect = 1.0;\\n      if (lightType > 1.75) { // is spotlight\\n        spotEffect = dot(gotLightDirection.xyz, lightDirection);\\n        if (spotEffect > spotCosCutoff) {\\n          spotEffect = pow(spotEffect, spotExponent);\\n        } else {\\n          spotEffect = 0.0;\\n        }\\n      }\\n      //diffuse += 1.0 * max(0.0, dot(normal_inWorld, lightDirection)) * spotEffect * lightIntensity.xyz;\\n\\n      // IncidentLight\\n      vec3 incidentLight = spotEffect * lightIntensity.xyz;\\n      incidentLight *= M_PI;\\n\\n      // Fresnel\\n      vec3 halfVector = normalize(lightDirection + viewDirection);\\n      float VH = clamp(dot(viewDirection, halfVector), 0.0, 1.0);\\n      vec3 F = fresnel(F0, VH);\\n\\n      // Diffuse\\n      vec3 diffuseContrib = (vec3(1.0) - F) * diffuse_brdf(albedo);\\n\\n      // Specular\\n      float NL = clamp(dot(normal_inWorld, lightDirection), 0.0, 1.0);\\n      float NH = clamp(dot(normal_inWorld, halfVector), 0.0, 1.0);\\n      vec3 specularContrib = cook_torrance_specular_brdf(NH, NL, NV, F, alphaRoughness);\\n      vec3 diffuseAndSpecular = (diffuseContrib + specularContrib) * vec3(NL) * incidentLight.rgb;\\n\\n      rt0.xyz += diffuseAndSpecular;\\n//      rt0.xyz += specularContrib * vec3(NL) * incidentLight.rgb;\\n  //    rt0.xyz += diffuseContrib * vec3(NL) * incidentLight.rgb;\\n  //    rt0.xyz += (vec3(1.0) - F) * diffuse_brdf(albedo);//diffuseContrib;//vec3(NL) * incidentLight.rgb;\\n    }\\n\\n    vec3 reflection = rotEnvMatrix * reflect(-viewDirection, normal_inWorld);\\n\\n    vec3 F = fresnel(F0, NV);\\n    vec3 ibl = IBLContribution(materialSID, normal_forEnv, NV, reflection, albedo, F0, userRoughness, F);\\n    float occlusion = texture2D(u_occlusionTexture, v_texcoord).r;\\n\\n    // Occlution to Indirect Lights\\n    rt0.xyz += ibl * occlusion;\\n\\n  } else {\\n    rt0 = vec4(baseColor, alpha);\\n  }\\n\\n  // Emissive\\n  vec3 emissive = srgbToLinear(texture2D(u_emissiveTexture, v_texcoord).xyz);\\n\\n  rt0.xyz += emissive;\\n\\n\\n  // Wireframe\\n  float threshold = 0.001;\\n  vec3 wireframe = get_wireframe(materialSID, 0);\\n  float wireframeWidthInner = wireframe.z;\\n  float wireframeWidthRelativeScale = 1.0;\\n  if (wireframe.x > 0.5 && wireframe.y < 0.5) {\\n    rt0.a = 0.0;\\n  }\\n  vec4 wireframeResult = rt0;\\n  vec4 wireframeColor = vec4(0.2, 0.75, 0.0, 1.0);\\n  float edgeRatio = edge_ratio(v_baryCentricCoord, wireframeWidthInner, wireframeWidthRelativeScale);\\n  float edgeRatioModified = mix(step(threshold, edgeRatio), clamp(edgeRatio*4.0, 0.0, 1.0), wireframeWidthInner / wireframeWidthRelativeScale/4.0);\\n  // if r0.a is 0.0, it is wireframe not on shaded\\n  wireframeResult.rgb = wireframeColor.rgb * edgeRatioModified + rt0.rgb * (1.0 - edgeRatioModified);\\n  wireframeResult.a = max(rt0.a, wireframeColor.a * mix(edgeRatioModified, pow(edgeRatioModified, 100.0), wireframeWidthInner / wireframeWidthRelativeScale/1.0));\\n\\n  if (wireframe.x > 0.5) {\\n    rt0 = wireframeResult;\\n    if (wireframe.y < 0.5 && rt0.a == 0.0) {\\n      discard;\\n    }\\n  }\\n\\n#ifdef GLSL_ES3\\r\\n\\r\\n#else\\r\\n  gl_FragColor = rt0;\\r\\n#endif\\r\\n\\n}\\n\",\"shaderStage\":\"fragment\"});\n\n//# sourceURL=webpack:///./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.frag?");

/***/ }),

/***/ "./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.vert":
/*!**************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.vert ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"code\":\"#ifdef GLSL_ES3\\r\\n#version 300 es\\r\\n#endif\\r\\n\\nprecision highp float;\\r\\nprecision highp int;\\r\\n\\n\\n/* shaderity: ${definitions} */\\n\\nin vec3 a_position;\\nin vec3 a_color;\\nin vec3 a_normal;\\nin vec3 a_faceNormal;\\nin vec4 a_tangent;\\nin float a_instanceID;\\nin vec2 a_texcoord;\\nin vec4 a_joint;\\nin vec4 a_weight;\\nin vec4 a_baryCentricCoord;\\nout vec3 v_color;\\nout vec3 v_normal_inWorld;\\nout vec3 v_faceNormal_inWorld;\\nout vec3 v_tangent_inWorld;\\nout vec3 v_binormal_inWorld;\\nout vec4 v_position_inWorld;\\nout vec2 v_texcoord;\\nout vec3 v_baryCentricCoord;\\n\\nuniform float u_materialSID;\\r\\nuniform sampler2D u_dataTexture;\\r\\n\\r\\n  /*\\r\\n  * This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\\r\\n  * arg = vec2(1. / size.x, 1. / size.x / size.y);\\r\\n  */\\r\\n  // highp vec4 fetchElement(highp sampler2D tex, highp float index, highp vec2 arg)\\r\\n  // {\\r\\n  //   return ${this.glsl_texture}( tex, arg * (index + 0.5) );\\r\\n  // }\\r\\n\\r\\nhighp vec4 fetchElement(highp sampler2D tex, highp float index, highp vec2 invSize){\\r\\n  highp float t = (index + 0.5) * invSize.x;\\r\\n  highp float x = fract(t);\\r\\n  highp float y = (floor(t) + 0.5) * invSize.y;\\r\\n  return texture2D( tex, vec2(x, y) );\\r\\n}\\r\\n\\r\\n\\r\\nfloat rand(const vec2 co){\\r\\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\\r\\n}\\r\\n\\r\\nvec3 descramble(vec3 v) {\\r\\n  float seed = 0.0;\\r\\n  v.x -= sin(fract(v.y*20.0));\\r\\n  v.z -= cos(fract(-v.y*10.0));\\r\\n  return v;\\r\\n}\\r\\n\\r\\n\\n\\n/* shaderity: ${matricesGetters} */\\n\\n/* shaderity: ${getters} */\\n\\nmat3 toNormalMatrix(mat4 m) {\\r\\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\\r\\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\\r\\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\\r\\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\\r\\n\\r\\n  float b00 = a00 * a11 - a01 * a10,\\r\\n  b01 = a00 * a12 - a02 * a10,\\r\\n  b02 = a00 * a13 - a03 * a10,\\r\\n  b03 = a01 * a12 - a02 * a11,\\r\\n  b04 = a01 * a13 - a03 * a11,\\r\\n  b05 = a02 * a13 - a03 * a12,\\r\\n  b06 = a20 * a31 - a21 * a30,\\r\\n  b07 = a20 * a32 - a22 * a30,\\r\\n  b08 = a20 * a33 - a23 * a30,\\r\\n  b09 = a21 * a32 - a22 * a31,\\r\\n  b10 = a21 * a33 - a23 * a31,\\r\\n  b11 = a22 * a33 - a23 * a32;\\r\\n\\r\\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\\r\\n\\r\\n  return mat3(\\r\\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\\r\\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\\r\\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\\r\\n}\\r\\n\\n\\n\\r\\n#ifdef RN_IS_SKINNING\\r\\n\\r\\nhighp mat4 createMatrixFromQuaternionTransformUniformScale( highp vec4 quaternion, highp vec4 translationScale ) {\\r\\n  highp vec4 q = quaternion;\\r\\n  highp vec3 t = translationScale.xyz;\\r\\n  highp float scale = translationScale.w;\\r\\n\\r\\n  highp float sx = q.x * q.x;\\r\\n  highp float sy = q.y * q.y;\\r\\n  highp float sz = q.z * q.z;\\r\\n  highp float cx = q.y * q.z;\\r\\n  highp float cy = q.x * q.z;\\r\\n  highp float cz = q.x * q.y;\\r\\n  highp float wx = q.w * q.x;\\r\\n  highp float wy = q.w * q.y;\\r\\n  highp float wz = q.w * q.z;\\r\\n\\r\\n  highp mat4 mat = mat4(\\r\\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\\r\\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\\r\\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\\r\\n    t.x, t.y, t.z, 1.0\\r\\n  );\\r\\n\\r\\n  highp mat4 uniformScaleMat = mat4(\\r\\n    scale, 0.0, 0.0, 0.0,\\r\\n    0.0, scale, 0.0, 0.0,\\r\\n    0.0, 0.0, scale, 0.0,\\r\\n    0.0, 0.0, 0.0, 1.0\\r\\n  );\\r\\n\\r\\n  return mat*uniformScaleMat;\\r\\n}\\r\\n\\r\\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\\r\\n\\r\\n  highp float r;\\r\\n  highp float g;\\r\\n  highp float b;\\r\\n  highp float a;\\r\\n\\r\\n  highp float ix = floor(vec_xy.x * criteria);\\r\\n  highp float v1x = ix / criteria;\\r\\n  highp float v1y = ix - floor(v1x) * criteria;\\r\\n\\r\\n  r = ( v1x + 1.0 ) / (criteria-1.0);\\r\\n  g = ( v1y + 1.0 ) / (criteria-1.0);\\r\\n\\r\\n  highp float iy = floor( vec_xy.y * criteria);\\r\\n  highp float v2x = iy / criteria;\\r\\n  highp float v2y = iy - floor(v2x) * criteria;\\r\\n\\r\\n  b = ( v2x + 1.0 ) / (criteria-1.0);\\r\\n  a = ( v2y + 1.0 ) / (criteria-1.0);\\r\\n\\r\\n  r -= 1.0/criteria;\\r\\n  g -= 1.0/criteria;\\r\\n  b -= 1.0/criteria;\\r\\n  a -= 1.0/criteria;\\r\\n\\r\\n  r = r*2.0-1.0;\\r\\n  g = g*2.0-1.0;\\r\\n  b = b*2.0-1.0;\\r\\n  a = a*2.0-1.0;\\r\\n\\r\\n  return vec4(r, g, b, a);\\r\\n}\\r\\n\\r\\nmat4 getSkinMatrix(float skeletalComponentSID) {\\r\\n  highp vec2 criteria = vec2(4096.0, 4096.0);\\r\\n  highp mat4 skinMat = a_weight.x * createMatrixFromQuaternionTransformUniformScale(\\r\\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)),\\r\\n    get_boneTranslateScale(skeletalComponentSID, int(a_joint.x)));\\r\\n  skinMat += a_weight.y * createMatrixFromQuaternionTransformUniformScale(\\r\\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)),\\r\\n    get_boneTranslateScale(skeletalComponentSID, int(a_joint.y)));\\r\\n  skinMat += a_weight.z * createMatrixFromQuaternionTransformUniformScale(\\r\\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)),\\r\\n    get_boneTranslateScale(skeletalComponentSID, int(a_joint.z)));\\r\\n  skinMat += a_weight.w * createMatrixFromQuaternionTransformUniformScale(\\r\\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)),\\r\\n    get_boneTranslateScale(skeletalComponentSID, int(a_joint.w)));\\r\\n\\r\\n  // mat4 skinMat = a_weight.x * u_boneMatrices[int(a_joint.x)];\\r\\n  // skinMat += a_weight.y * u_boneMatrices[int(a_joint.y)];\\r\\n  // skinMat += a_weight.z * u_boneMatrices[int(a_joint.z)];\\r\\n  // skinMat += a_weight.w * u_boneMatrices[int(a_joint.w)];\\r\\n\\r\\n  return skinMat;\\r\\n}\\r\\n#endif\\n\\n\\r\\n#ifdef RN_IS_SKINNING\\r\\nbool skinning(\\r\\n  float skeletalComponentSID,\\r\\n  in mat3 inNormalMatrix,\\r\\n  out mat3 outNormalMatrix,\\r\\n  in vec3 inPosition_inLocal,\\r\\n  out vec4 outPosition_inWorld,\\r\\n  in vec3 inNormal_inLocal,\\r\\n  out vec3 outNormal_inWorld\\r\\n  )\\r\\n{\\r\\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\\r\\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\\r\\n  outNormalMatrix = toNormalMatrix(skinMat);\\r\\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\\r\\n\\r\\n  return true;\\r\\n}\\r\\n#endif\\r\\n\\r\\nbool processGeometryWithMorphingAndSkinning(\\r\\n  float skeletalComponentSID,\\r\\n  in mat4 worldMatrix,\\r\\n  in mat3 inNormalMatrix,\\r\\n  out mat3 outNormalMatrix,\\r\\n  in vec3 inPosition_inLocal,\\r\\n  out vec4 outPosition_inWorld,\\r\\n  in vec3 inNormal_inLocal,\\r\\n  out vec3 outNormal_inWorld\\r\\n) {\\r\\n  bool isSkinning = false;\\r\\n\\r\\n  vec3 position_inLocal;\\r\\n#ifdef RN_IS_MORPHING\\r\\n  if (u_morphTargetNumber == 0) {\\r\\n#endif\\r\\n    position_inLocal = inPosition_inLocal;\\r\\n#ifdef RN_IS_MORPHING\\r\\n  } else {\\r\\n    float vertexIdx = a_baryCentricCoord.w;\\r\\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\\r\\n  }\\r\\n#endif\\r\\n\\r\\n\\r\\n#ifdef RN_IS_SKINNING\\r\\n  if (skeletalComponentSID >= 0.0) {\\r\\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\\r\\n  } else {\\r\\n#endif\\r\\n    outNormalMatrix = inNormalMatrix;\\r\\n    outPosition_inWorld = worldMatrix * vec4(position_inLocal, 1.0);\\r\\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\\r\\n#ifdef RN_IS_SKINNING\\r\\n  }\\r\\n#endif\\r\\n\\r\\n  return isSkinning;\\r\\n}\\r\\n\\n\\nvoid main()\\n{\\n\\n#ifdef RN_IS_FASTEST_MODE\\r\\n  float materialSID = u_currentComponentSIDs[0];\\r\\n\\r\\n  int lightNumber = 0;\\r\\n  #ifdef RN_IS_LIGHTING\\r\\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: ${WellKnownComponentTIDs.LightComponentTID} */]);\\r\\n  #endif\\r\\n\\r\\n  float skeletalComponentSID = -1.0;\\r\\n  #ifdef RN_IS_SKINNING\\r\\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: ${WellKnownComponentTIDs.SkeletalComponentTID} */];\\r\\n  #endif\\r\\n\\r\\n#else\\r\\n\\r\\n  float materialSID = u_materialSID;\\r\\n\\r\\n  int lightNumber = 0;\\r\\n  #ifdef RN_IS_LIGHTING\\r\\n    lightNumber = get_lightNumber(0.0, 0);\\r\\n  #endif\\r\\n\\r\\n  float skeletalComponentSID = -1.0;\\r\\n  #ifdef RN_IS_SKINNING\\r\\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\\r\\n  #endif\\r\\n\\r\\n#endif\\r\\n\\n\\n  float cameraSID = u_currentComponentSIDs[/* shaderity: ${WellKnownComponentTIDs.CameraComponentTID} */];\\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\\n\\n  v_color = a_color;\\n\\n  bool isSkinning = false;\\n\\n  isSkinning = processGeometryWithMorphingAndSkinning(\\n    skeletalComponentSID,\\n    worldMatrix,\\n    normalMatrix,\\n    normalMatrix,\\n    a_position,\\n    v_position_inWorld,\\n    a_normal,\\n    v_normal_inWorld\\n  );\\n\\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\\n\\n\\n\\n  v_faceNormal_inWorld = normalMatrix * a_faceNormal;\\n  v_texcoord = a_texcoord;\\n\\n  if (abs(length(a_normal)) > 0.01) {\\n    // if normal exist\\n    vec3 tangent_inWorld;\\n    if (!isSkinning) {\\n      tangent_inWorld = normalMatrix * a_tangent.xyz;\\n      v_position_inWorld = worldMatrix * vec4(a_position, 1.0);\\n    }\\n\\n    v_binormal_inWorld = cross(v_normal_inWorld, tangent_inWorld) * a_tangent.w;\\n    v_tangent_inWorld = cross(v_binormal_inWorld, v_normal_inWorld);\\n  }\\n  v_baryCentricCoord = a_baryCentricCoord.xyz;\\n\\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\\r\\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\\r\\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\\r\\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\\r\\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\\r\\nfloat maxPointSize = get_pointSize(materialSID, 0);\\r\\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\\r\\n\\n\\n}\",\"shaderStage\":\"vertex\"});\n\n//# sourceURL=webpack:///./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.vert?");

/***/ }),

/***/ "./src/webgl/shaderity_shaders/classicSingleShader/classicSingleShader.frag":
/*!**********************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/classicSingleShader/classicSingleShader.frag ***!
  \**********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"code\":\"#ifdef GLSL_ES3\\r\\n#version 300 es\\r\\n#endif\\r\\n\\nprecision highp float;\\r\\nprecision highp int;\\r\\n\\n\\n/* shaderity: ${definitions} */\\n\\nuniform float u_materialSID;\\r\\nuniform sampler2D u_dataTexture;\\r\\n\\r\\n  /*\\r\\n  * This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\\r\\n  * arg = vec2(1. / size.x, 1. / size.x / size.y);\\r\\n  */\\r\\n  // highp vec4 fetchElement(highp sampler2D tex, highp float index, highp vec2 arg)\\r\\n  // {\\r\\n  //   return ${this.glsl_texture}( tex, arg * (index + 0.5) );\\r\\n  // }\\r\\n\\r\\nhighp vec4 fetchElement(highp sampler2D tex, highp float index, highp vec2 invSize){\\r\\n  highp float t = (index + 0.5) * invSize.x;\\r\\n  highp float x = fract(t);\\r\\n  highp float y = (floor(t) + 0.5) * invSize.y;\\r\\n  return texture2D( tex, vec2(x, y) );\\r\\n}\\r\\n\\r\\n\\r\\nfloat rand(const vec2 co){\\r\\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\\r\\n}\\r\\n\\r\\nvec3 descramble(vec3 v) {\\r\\n  float seed = 0.0;\\r\\n  v.x -= sin(fract(v.y*20.0));\\r\\n  v.z -= cos(fract(-v.y*10.0));\\r\\n  return v;\\r\\n}\\r\\n\\r\\n\\n\\nin vec3 v_color;\\nin vec3 v_normal_inWorld;\\nin vec4 v_position_inWorld;\\nin vec2 v_texcoord;\\nin vec3 v_baryCentricCoord;\\n\\n#ifdef GLSL_ES3\\r\\n  layout(location = 0) out vec4 rt0;\\r\\n#else\\r\\n  vec4 rt0;\\r\\n#endif\\r\\n\\n\\n/* shaderity: ${getters} */\\n\\nvoid main ()\\n{\\n\\n#ifdef RN_IS_FASTEST_MODE\\r\\n  float materialSID = u_currentComponentSIDs[0];\\r\\n\\r\\n  int lightNumber = 0;\\r\\n  #ifdef RN_IS_LIGHTING\\r\\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: ${WellKnownComponentTIDs.LightComponentTID} */]);\\r\\n  #endif\\r\\n\\r\\n  float skeletalComponentSID = -1.0;\\r\\n  #ifdef RN_IS_SKINNING\\r\\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: ${WellKnownComponentTIDs.SkeletalComponentTID} */];\\r\\n  #endif\\r\\n\\r\\n#else\\r\\n\\r\\n  float materialSID = u_materialSID;\\r\\n\\r\\n  int lightNumber = 0;\\r\\n  #ifdef RN_IS_LIGHTING\\r\\n    lightNumber = get_lightNumber(0.0, 0);\\r\\n  #endif\\r\\n\\r\\n  float skeletalComponentSID = -1.0;\\r\\n  #ifdef RN_IS_SKINNING\\r\\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\\r\\n  #endif\\r\\n\\r\\n#endif\\r\\n\\n\\n  // Normal\\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\\n\\n  vec4 diffuseColorFactor = get_diffuseColorFactor(materialSID, 0);\\n\\n\\n  // diffuseColor\\n  vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\\n  float alpha = 1.0;\\n  if (v_color != diffuseColor && diffuseColorFactor.rgb != diffuseColor) {\\n    diffuseColor = v_color * diffuseColorFactor.rgb;\\n    alpha = diffuseColorFactor.a;\\n  } else if (v_color == diffuseColor) {\\n    diffuseColor = diffuseColorFactor.rgb;\\n    alpha = diffuseColorFactor.a;\\n  } else if (diffuseColorFactor.rgb == diffuseColor) {\\n    diffuseColor = v_color;\\n  } else {\\n    diffuseColor = vec3(1.0, 1.0, 1.0);\\n  }\\n\\n  // diffuseColorTexture\\n  vec4 textureColor = texture2D(u_diffuseColorTexture, v_texcoord);\\n  if (textureColor.r > 0.05) {\\n    diffuseColor *= textureColor.rgb;\\n  }\\n\\n  // Lighting\\n  vec3 shadingColor = vec3(0.0, 0.0, 0.0);\\n#ifdef RN_IS_LIGHTING\\n  int shadingModel = get_shadingModel(materialSID, 0);\\n  if (shadingModel > 0) {\\n\\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\\n    vec3 specular = vec3(0.0, 0.0, 0.0);\\n    for (int i = 0; i < /* shaderity: ${Config.maxLightNumberInShader} */ ; i++) {\\n      if (i >= lightNumber) {\\n        break;\\n      }\\n\\n      vec4 gotLightDirection = get_lightDirection(0.0, i);\\n      vec4 gotLightPosition = get_lightPosition(0.0, i);\\n      vec4 gotLightIntensity = get_lightIntensity(0.0, i);\\n      vec3 lightDirection = gotLightDirection.xyz;\\n      vec3 lightIntensity = gotLightIntensity.xyz;\\n      vec3 lightPosition = gotLightPosition.xyz;\\n      float lightType = gotLightPosition.w;\\n      float spotCosCutoff = gotLightDirection.w;\\n      float spotExponent = gotLightIntensity.w;\\n\\n      if (0.75 < lightType) { // is pointlight or spotlight\\n        lightDirection = normalize(lightPosition - v_position_inWorld.xyz);\\n      }\\n      float spotEffect = 1.0;\\n      if (lightType > 1.75) { // is spotlight\\n        spotEffect = dot(gotLightDirection.xyz, lightDirection);\\n        if (spotEffect > spotCosCutoff) {\\n          spotEffect = pow(spotEffect, spotExponent);\\n        } else {\\n          spotEffect = 0.0;\\n        }\\n      }\\n\\n      vec3 incidentLight = spotEffect * lightIntensity;\\n\\n\\n\\n      diffuse += diffuseColor * max(0.0, dot(normal_inWorld, lightDirection)) * incidentLight;\\n\\n      float shininess = get_shininess(materialSID, 0);\\n      int shadingModel = get_shadingModel(materialSID, 0);\\n\\n      float cameraSID = u_currentComponentSIDs[/* shaderity: ${WellKnownComponentTIDs.CameraComponentTID} */];\\n      vec3 viewPosition = get_viewPosition(cameraSID, 0);\\n\\n      if (shadingModel == 2) {// BLINN\\n        // ViewDirection\\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\\n        vec3 halfVector = normalize(lightDirection + viewDirection);\\n        specular += pow(max(0.0, dot(halfVector, normal_inWorld)), shininess);\\n      } else if (shadingModel == 3) { // PHONG\\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\\n        vec3 R = reflect(lightDirection, normal_inWorld);\\n        specular += pow(max(0.0, dot(R, viewDirection)), shininess);\\n      }\\n\\n    }\\n\\n    shadingColor = diffuse + specular;\\n  } else {\\n    shadingColor = diffuseColor;\\n  }\\n#else\\n  shadingColor = diffuseColor;\\n#endif\\n\\n  rt0 = vec4(shadingColor * alpha, alpha);\\n  // rt0 = vec4(u_lightNumber, 0.0, 0.0, 1.0);\\n  // rt0 = vec4(1.0, 0.0, 0.0, 1.0);\\n  // rt0 = vec4(normal_inWorld*0.5+0.5, 1.0);\\n\\n#ifdef GLSL_ES3\\r\\n\\r\\n#else\\r\\n  gl_FragColor = rt0;\\r\\n#endif\\r\\n\\n\\n}\\n\",\"shaderStage\":\"fragment\"});\n\n//# sourceURL=webpack:///./src/webgl/shaderity_shaders/classicSingleShader/classicSingleShader.frag?");

/***/ }),

/***/ "./src/webgl/shaderity_shaders/classicSingleShader/classicSingleShader.vert":
/*!**********************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/classicSingleShader/classicSingleShader.vert ***!
  \**********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"code\":\"#ifdef GLSL_ES3\\r\\n#version 300 es\\r\\n#endif\\r\\n\\nprecision highp float;\\r\\nprecision highp int;\\r\\n\\n\\n/* shaderity: ${definitions} */\\n\\nin vec3 a_position;\\nin vec3 a_color;\\nin vec3 a_normal;\\nin float a_instanceID;\\nin vec2 a_texcoord;\\nin vec4 a_joint;\\nin vec4 a_weight;\\nin vec4 a_baryCentricCoord;\\nout vec3 v_color;\\nout vec3 v_normal_inWorld;\\nout vec4 v_position_inWorld;\\nout vec2 v_texcoord;\\nout vec3 v_baryCentricCoord;\\n\\nuniform float u_materialSID;\\r\\nuniform sampler2D u_dataTexture;\\r\\n\\r\\n  /*\\r\\n  * This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\\r\\n  * arg = vec2(1. / size.x, 1. / size.x / size.y);\\r\\n  */\\r\\n  // highp vec4 fetchElement(highp sampler2D tex, highp float index, highp vec2 arg)\\r\\n  // {\\r\\n  //   return ${this.glsl_texture}( tex, arg * (index + 0.5) );\\r\\n  // }\\r\\n\\r\\nhighp vec4 fetchElement(highp sampler2D tex, highp float index, highp vec2 invSize){\\r\\n  highp float t = (index + 0.5) * invSize.x;\\r\\n  highp float x = fract(t);\\r\\n  highp float y = (floor(t) + 0.5) * invSize.y;\\r\\n  return texture2D( tex, vec2(x, y) );\\r\\n}\\r\\n\\r\\n\\r\\nfloat rand(const vec2 co){\\r\\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\\r\\n}\\r\\n\\r\\nvec3 descramble(vec3 v) {\\r\\n  float seed = 0.0;\\r\\n  v.x -= sin(fract(v.y*20.0));\\r\\n  v.z -= cos(fract(-v.y*10.0));\\r\\n  return v;\\r\\n}\\r\\n\\r\\n\\n\\n/* shaderity: ${matricesGetters} */\\n\\n/* shaderity: ${getters} */\\n\\nmat3 toNormalMatrix(mat4 m) {\\r\\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\\r\\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\\r\\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\\r\\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\\r\\n\\r\\n  float b00 = a00 * a11 - a01 * a10,\\r\\n  b01 = a00 * a12 - a02 * a10,\\r\\n  b02 = a00 * a13 - a03 * a10,\\r\\n  b03 = a01 * a12 - a02 * a11,\\r\\n  b04 = a01 * a13 - a03 * a11,\\r\\n  b05 = a02 * a13 - a03 * a12,\\r\\n  b06 = a20 * a31 - a21 * a30,\\r\\n  b07 = a20 * a32 - a22 * a30,\\r\\n  b08 = a20 * a33 - a23 * a30,\\r\\n  b09 = a21 * a32 - a22 * a31,\\r\\n  b10 = a21 * a33 - a23 * a31,\\r\\n  b11 = a22 * a33 - a23 * a32;\\r\\n\\r\\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\\r\\n\\r\\n  return mat3(\\r\\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\\r\\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\\r\\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\\r\\n}\\r\\n\\n\\n\\r\\n#ifdef RN_IS_SKINNING\\r\\n\\r\\nhighp mat4 createMatrixFromQuaternionTransformUniformScale( highp vec4 quaternion, highp vec4 translationScale ) {\\r\\n  highp vec4 q = quaternion;\\r\\n  highp vec3 t = translationScale.xyz;\\r\\n  highp float scale = translationScale.w;\\r\\n\\r\\n  highp float sx = q.x * q.x;\\r\\n  highp float sy = q.y * q.y;\\r\\n  highp float sz = q.z * q.z;\\r\\n  highp float cx = q.y * q.z;\\r\\n  highp float cy = q.x * q.z;\\r\\n  highp float cz = q.x * q.y;\\r\\n  highp float wx = q.w * q.x;\\r\\n  highp float wy = q.w * q.y;\\r\\n  highp float wz = q.w * q.z;\\r\\n\\r\\n  highp mat4 mat = mat4(\\r\\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\\r\\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\\r\\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\\r\\n    t.x, t.y, t.z, 1.0\\r\\n  );\\r\\n\\r\\n  highp mat4 uniformScaleMat = mat4(\\r\\n    scale, 0.0, 0.0, 0.0,\\r\\n    0.0, scale, 0.0, 0.0,\\r\\n    0.0, 0.0, scale, 0.0,\\r\\n    0.0, 0.0, 0.0, 1.0\\r\\n  );\\r\\n\\r\\n  return mat*uniformScaleMat;\\r\\n}\\r\\n\\r\\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\\r\\n\\r\\n  highp float r;\\r\\n  highp float g;\\r\\n  highp float b;\\r\\n  highp float a;\\r\\n\\r\\n  highp float ix = floor(vec_xy.x * criteria);\\r\\n  highp float v1x = ix / criteria;\\r\\n  highp float v1y = ix - floor(v1x) * criteria;\\r\\n\\r\\n  r = ( v1x + 1.0 ) / (criteria-1.0);\\r\\n  g = ( v1y + 1.0 ) / (criteria-1.0);\\r\\n\\r\\n  highp float iy = floor( vec_xy.y * criteria);\\r\\n  highp float v2x = iy / criteria;\\r\\n  highp float v2y = iy - floor(v2x) * criteria;\\r\\n\\r\\n  b = ( v2x + 1.0 ) / (criteria-1.0);\\r\\n  a = ( v2y + 1.0 ) / (criteria-1.0);\\r\\n\\r\\n  r -= 1.0/criteria;\\r\\n  g -= 1.0/criteria;\\r\\n  b -= 1.0/criteria;\\r\\n  a -= 1.0/criteria;\\r\\n\\r\\n  r = r*2.0-1.0;\\r\\n  g = g*2.0-1.0;\\r\\n  b = b*2.0-1.0;\\r\\n  a = a*2.0-1.0;\\r\\n\\r\\n  return vec4(r, g, b, a);\\r\\n}\\r\\n\\r\\nmat4 getSkinMatrix(float skeletalComponentSID) {\\r\\n  highp vec2 criteria = vec2(4096.0, 4096.0);\\r\\n  highp mat4 skinMat = a_weight.x * createMatrixFromQuaternionTransformUniformScale(\\r\\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)),\\r\\n    get_boneTranslateScale(skeletalComponentSID, int(a_joint.x)));\\r\\n  skinMat += a_weight.y * createMatrixFromQuaternionTransformUniformScale(\\r\\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)),\\r\\n    get_boneTranslateScale(skeletalComponentSID, int(a_joint.y)));\\r\\n  skinMat += a_weight.z * createMatrixFromQuaternionTransformUniformScale(\\r\\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)),\\r\\n    get_boneTranslateScale(skeletalComponentSID, int(a_joint.z)));\\r\\n  skinMat += a_weight.w * createMatrixFromQuaternionTransformUniformScale(\\r\\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)),\\r\\n    get_boneTranslateScale(skeletalComponentSID, int(a_joint.w)));\\r\\n\\r\\n  // mat4 skinMat = a_weight.x * u_boneMatrices[int(a_joint.x)];\\r\\n  // skinMat += a_weight.y * u_boneMatrices[int(a_joint.y)];\\r\\n  // skinMat += a_weight.z * u_boneMatrices[int(a_joint.z)];\\r\\n  // skinMat += a_weight.w * u_boneMatrices[int(a_joint.w)];\\r\\n\\r\\n  return skinMat;\\r\\n}\\r\\n#endif\\n\\n\\r\\n#ifdef RN_IS_SKINNING\\r\\nbool skinning(\\r\\n  float skeletalComponentSID,\\r\\n  in mat3 inNormalMatrix,\\r\\n  out mat3 outNormalMatrix,\\r\\n  in vec3 inPosition_inLocal,\\r\\n  out vec4 outPosition_inWorld,\\r\\n  in vec3 inNormal_inLocal,\\r\\n  out vec3 outNormal_inWorld\\r\\n  )\\r\\n{\\r\\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\\r\\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\\r\\n  outNormalMatrix = toNormalMatrix(skinMat);\\r\\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\\r\\n\\r\\n  return true;\\r\\n}\\r\\n#endif\\r\\n\\r\\nbool processGeometryWithMorphingAndSkinning(\\r\\n  float skeletalComponentSID,\\r\\n  in mat4 worldMatrix,\\r\\n  in mat3 inNormalMatrix,\\r\\n  out mat3 outNormalMatrix,\\r\\n  in vec3 inPosition_inLocal,\\r\\n  out vec4 outPosition_inWorld,\\r\\n  in vec3 inNormal_inLocal,\\r\\n  out vec3 outNormal_inWorld\\r\\n) {\\r\\n  bool isSkinning = false;\\r\\n\\r\\n  vec3 position_inLocal;\\r\\n#ifdef RN_IS_MORPHING\\r\\n  if (u_morphTargetNumber == 0) {\\r\\n#endif\\r\\n    position_inLocal = inPosition_inLocal;\\r\\n#ifdef RN_IS_MORPHING\\r\\n  } else {\\r\\n    float vertexIdx = a_baryCentricCoord.w;\\r\\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\\r\\n  }\\r\\n#endif\\r\\n\\r\\n\\r\\n#ifdef RN_IS_SKINNING\\r\\n  if (skeletalComponentSID >= 0.0) {\\r\\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\\r\\n  } else {\\r\\n#endif\\r\\n    outNormalMatrix = inNormalMatrix;\\r\\n    outPosition_inWorld = worldMatrix * vec4(position_inLocal, 1.0);\\r\\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\\r\\n#ifdef RN_IS_SKINNING\\r\\n  }\\r\\n#endif\\r\\n\\r\\n  return isSkinning;\\r\\n}\\r\\n\\n\\nvoid main()\\n{\\n\\n#ifdef RN_IS_FASTEST_MODE\\r\\n  float materialSID = u_currentComponentSIDs[0];\\r\\n\\r\\n  int lightNumber = 0;\\r\\n  #ifdef RN_IS_LIGHTING\\r\\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: ${WellKnownComponentTIDs.LightComponentTID} */]);\\r\\n  #endif\\r\\n\\r\\n  float skeletalComponentSID = -1.0;\\r\\n  #ifdef RN_IS_SKINNING\\r\\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: ${WellKnownComponentTIDs.SkeletalComponentTID} */];\\r\\n  #endif\\r\\n\\r\\n#else\\r\\n\\r\\n  float materialSID = u_materialSID;\\r\\n\\r\\n  int lightNumber = 0;\\r\\n  #ifdef RN_IS_LIGHTING\\r\\n    lightNumber = get_lightNumber(0.0, 0);\\r\\n  #endif\\r\\n\\r\\n  float skeletalComponentSID = -1.0;\\r\\n  #ifdef RN_IS_SKINNING\\r\\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\\r\\n  #endif\\r\\n\\r\\n#endif\\r\\n\\n\\n  float cameraSID = u_currentComponentSIDs[/* shaderity: ${WellKnownComponentTIDs.CameraComponentTID} */];\\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\\n\\n  // Skeletal\\n  processGeometryWithMorphingAndSkinning(\\n    skeletalComponentSID,\\n    worldMatrix,\\n    normalMatrix,\\n    normalMatrix,\\n    a_position,\\n    v_position_inWorld,\\n    a_normal,\\n    v_normal_inWorld\\n  );\\n\\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\\n\\n\\n  v_color = a_color;\\n  v_normal_inWorld = normalMatrix * a_normal;\\n  v_texcoord = a_texcoord;\\n  v_baryCentricCoord = a_baryCentricCoord.xyz;\\n\\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\\r\\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\\r\\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\\r\\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\\r\\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\\r\\nfloat maxPointSize = get_pointSize(materialSID, 0);\\r\\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\\r\\n\\n\\n}\\n\",\"shaderStage\":\"vertex\"});\n\n//# sourceURL=webpack:///./src/webgl/shaderity_shaders/classicSingleShader/classicSingleShader.vert?");

/***/ }),

/***/ "./src/webgl/shaders/DepthEncodeShader.ts":
/*!************************************************!*\
  !*** ./src/webgl/shaders/DepthEncodeShader.ts ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return DepthEncodeShader; });\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GLSLShader */ \"./src/webgl/shaders/GLSLShader.ts\");\n/* harmony import */ var _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/definitions/ShaderNode */ \"./src/foundation/definitions/ShaderNode.ts\");\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../foundation/core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../foundation/components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../foundation/components/WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n\n\n\n\n\n\n\nclass DepthEncodeShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor() {\n        super();\n        this.attributeNames = [\n            'a_instanceID',\n            'a_position', 'a_normal',\n            'a_joint', 'a_weight',\n        ];\n        this.attributeSemantics = [\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Instance,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Position, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Normal,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Joints0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Weights0,\n        ];\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new DepthEncodeShader();\n        }\n        return this.__instance;\n    }\n    getVertexShaderBody(args) {\n        const _version = this.glsl_versionText;\n        const _in = this.glsl_vertex_in;\n        const _out = this.glsl_vertex_out;\n        return `${_version}\n${this.glslPrecision}\n\n${(typeof args.definitions !== 'undefined') ? args.definitions : ''}\n\n${_in} vec3 a_position;\n${_in} vec3 a_normal;\n${_in} float a_instanceID;\n${_in} vec4 a_joint;\n${_in} vec4 a_weight;\n\n${_out} vec3 v_normal_inWorld;\n${_out} vec4 v_position_inLocal;\n${_out} vec4 v_position_inWorld;\n\n${this.prerequisites}\n\n${(typeof args.matricesGetters !== 'undefined') ? args.matricesGetters : ''}\n\n${(typeof args.getters !== 'undefined') ? args.getters : ''}\n\n${this.toNormalMatrix}\n\n${this.getSkinMatrix}\n\n${this.processGeometryWithSkinningOptionally}\n\n  void main(){\n\n    ${this.mainPrerequisites}\n    float cameraSID = u_currentComponentSIDs[${_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_6__[\"WellKnownComponentTIDs\"].CameraComponentTID}];\n    mat4 worldMatrix = get_worldMatrix(a_instanceID);\n    mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n    mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n    mat3 normalMatrix = get_normalMatrix(a_instanceID);\n\n    // Skeletal\n    processGeometryWithMorphingAndSkinning(\n      skeletalComponentSID,\n      worldMatrix,\n      normalMatrix,\n      normalMatrix,\n      a_position,\n      v_position_inWorld,\n      a_normal,\n      v_normal_inWorld\n    );\n\n    gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n    v_position_inLocal = gl_Position;\n\n    ${this.pointSprite}\n\n  }\n    `;\n    }\n    getPixelShaderBody(args) {\n        const _version = this.glsl_versionText;\n        const _in = this.glsl_fragment_in;\n        const _def_rt0 = this.glsl_rt0;\n        const _def_fragColor = this.glsl_fragColor;\n        const mainCameraComponent = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance().getComponent(_foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_5__[\"default\"], _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].main);\n        const zNear = mainCameraComponent.zNearInner;\n        const zFar = mainCameraComponent.zFarInner;\n        let ZNearToFar = zFar - zNear;\n        if (Number.isInteger(ZNearToFar)) {\n            ZNearToFar = ZNearToFar + '.0';\n        }\n        return `${_version}\n${this.glslPrecision}\n\n${(typeof args.definitions !== 'undefined') ? args.definitions : ''}\n\n${this.prerequisites}\n\n${_in} vec4 v_position_inLocal;\n${_def_rt0}\n\n${(typeof args.getters !== 'undefined') ? args.getters : ''}\n\nvec4 encodeDepthToRGBA(float depth){\n  float r = depth;\n  float g = fract(r * 255.0);\n  float b = fract(g * 255.0);\n  float a = fract(b * 255.0);\n  float coef = 1.0 / 255.0;\n  r -= g * coef;\n  g -= b * coef;\n  b -= a * coef;\n  return vec4(r, g, b, a);\n}\n\nvoid main ()\n{\n  float normalizationCoefficient = 1.0 / ${ZNearToFar};\n  float linerDepth = normalizationCoefficient * length(v_position_inLocal);\n  vec4 encodedLinearDepth = encodeDepthToRGBA(linerDepth);\n\n  rt0 = encodedLinearDepth;\n\n  ${_def_fragColor}\n}\n`;\n    }\n    get attributeCompositions() {\n        return [\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Scalar,\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3,\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec4, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec4,\n        ];\n    }\n}\nDepthEncodeShader.materialElement = _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_2__[\"ShaderNode\"].ClassicShading;\n\n\n//# sourceURL=webpack:///./src/webgl/shaders/DepthEncodeShader.ts?");

/***/ }),

/***/ "./src/webgl/shaders/EntityUIDOutputSingleShader.ts":
/*!**********************************************************!*\
  !*** ./src/webgl/shaders/EntityUIDOutputSingleShader.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EntityUIDOutputShader; });\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GLSLShader */ \"./src/webgl/shaders/GLSLShader.ts\");\n/* harmony import */ var _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/definitions/ShaderNode */ \"./src/foundation/definitions/ShaderNode.ts\");\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../foundation/components/WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n\n\n\n\n\nclass EntityUIDOutputShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor() {\n        super();\n        this.attributeNames = ['a_position', 'a_color', 'a_normal', 'a_texcoord', 'a_joint', 'a_weight', 'a_instanceID'];\n        this.attributeSemantics = [_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Position, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Color0,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Normal, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Texcoord0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Joints0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Weights0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Instance];\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new EntityUIDOutputShader();\n        }\n        return this.__instance;\n    }\n    getVertexShaderBody(args) {\n        const _version = this.glsl_versionText;\n        const _in = this.glsl_vertex_in;\n        const _out = this.glsl_vertex_out;\n        return `${_version}\n${this.glslPrecision}\n\n${(typeof args.definitions !== 'undefined') ? args.definitions : ''}\n\n${_in} vec3 a_position;\n${_in} vec3 a_color;\n${_in} vec3 a_normal;\n${_in} float a_instanceID;\n${_in} vec2 a_texcoord;\n${_in} vec4 a_joint;\n${_in} vec4 a_weight;\n${_out} vec3 v_color;\n${_out} vec3 v_normal_inWorld;\n${_out} vec4 v_position_inWorld;\n${_out} vec2 v_texcoord;\n${_out} float v_instanceID;\n\n${this.prerequisites}\n\n${(typeof args.matricesGetters !== 'undefined') ? args.matricesGetters : ''}\n\n${(typeof args.getters !== 'undefined') ? args.getters : ''}\n\n${this.toNormalMatrix}\n\n${this.getSkinMatrix}\n\n${this.processGeometryWithSkinningOptionally}\n\nvoid main()\n{\n  ${this.mainPrerequisites}\n\n  float cameraSID = u_currentComponentSIDs[${_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_4__[\"WellKnownComponentTIDs\"].CameraComponentTID}];\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\n\n  // Skeletal\n  processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n  ${this.pointSprite}\n\n  v_instanceID = a_instanceID;\n}`;\n    }\n    getPixelShaderBody(args) {\n        const _version = this.glsl_versionText;\n        const _in = this.glsl_fragment_in;\n        const _def_rt0 = this.glsl_rt0;\n        const _def_fragColor = this.glsl_fragColor;\n        const _texture = this.glsl_texture;\n        return `${_version}\n${this.glslPrecision}\n\n${(typeof args.definitions !== 'undefined') ? args.definitions : ''}\n\n\n${this.prerequisites}\n\n${_in} vec3 v_normal_inWorld;\n${_in} vec4 v_position_inWorld;\n${_in} float v_instanceID;\n${_def_rt0}\n\n${(typeof args.getters !== 'undefined') ? args.getters : ''}\n\n${this.packing}\n\nvoid main ()\n{\n  ${this.mainPrerequisites}\n  rt0 = encodeFloatRGBA(v_instanceID);\n\n  ${_def_fragColor}\n}\n`;\n    }\n    get attributeCompositions() {\n        return [_foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec2, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec4, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec4, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Scalar];\n    }\n}\nEntityUIDOutputShader.materialElement = _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_2__[\"ShaderNode\"].ClassicShading;\n\n\n//# sourceURL=webpack:///./src/webgl/shaders/EntityUIDOutputSingleShader.ts?");

/***/ }),

/***/ "./src/webgl/shaders/EnvCostantShader.ts":
/*!***********************************************!*\
  !*** ./src/webgl/shaders/EnvCostantShader.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EnvConstantShader; });\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GLSLShader */ \"./src/webgl/shaders/GLSLShader.ts\");\n/* harmony import */ var _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/definitions/ShaderNode */ \"./src/foundation/definitions/ShaderNode.ts\");\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n\n\n\n\nclass EnvConstantShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor() {\n        super();\n        this.attributeNames = [\n            'a_position', 'a_color', 'a_normal',\n            'a_texcoord',\n            'a_instanceID'\n        ];\n        this.attributeSemantics = [\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Position, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Color0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Normal,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Texcoord0,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Instance\n        ];\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new EnvConstantShader();\n        }\n        return this.__instance;\n    }\n    getVertexShaderBody(args) {\n        const _version = this.glsl_versionText;\n        const _in = this.glsl_vertex_in;\n        const _out = this.glsl_vertex_out;\n        return `${_version}\n${this.glslPrecision}\n\n${(typeof args.definitions !== 'undefined') ? args.definitions : ''}\n\n${_in} float a_instanceID;\n${_in} vec2 a_texcoord;\n${_in} vec3 a_position;\n${_in} vec3 a_color;\n${_in} vec3 a_normal;\n\n${_out} vec2 v_texcoord;\n${_out} vec3 v_color;\n${_out} vec3 v_normal_inWorld;\n${_out} vec3 v_position_inWorld;\n\n${this.prerequisites}\n\n${(typeof args.getters !== 'undefined') ? args.getters : ''}\n\n${(typeof args.matricesGetters !== 'undefined') ? args.matricesGetters : ''}\n\nvoid main(){\n  ${this.mainPrerequisites}\n\n${this.simpleMVPPosition}\n\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\n  v_normal_inWorld = normalMatrix * a_normal;\n\n  v_color = a_color;\n  v_position_inWorld = (worldMatrix * vec4(a_position, 1.0)).xyz;\n  v_texcoord = a_texcoord;\n}`;\n    }\n    getPixelShaderBody(args) {\n        const _version = this.glsl_versionText;\n        const _in = this.glsl_fragment_in;\n        const _def_rt0 = this.glsl_rt0;\n        const _def_fragColor = this.glsl_fragColor;\n        const _texture = this.glsl_texture;\n        const _textureCube = this.glsl_textureCube;\n        return `${_version}\n${this.glslPrecision}\n\n\n${this.prerequisites}\n\n${(typeof args.getters !== 'undefined') ? args.getters : ''}\n\nvec3 linearToSrgb(vec3 linearColor) {\n  return pow(linearColor, vec3(1.0/2.2));\n}\n\nvec3 srgbToLinear(vec3 srgbColor) {\n  return pow(srgbColor, vec3(2.2));\n}\n\n${_in} vec2 v_texcoord;\n${_in} vec3 v_color;\n${_in} vec3 v_normal_inWorld;\n${_in} vec3 v_position_inWorld;\n${_def_rt0}\nvoid main(){\n  ${this.mainPrerequisites}\n\n  // diffuseColor\n  vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n  vec4 diffuseColorFactor = get_diffuseColorFactor(materialSID, 0);\n  if (v_color != diffuseColor && diffuseColorFactor.rgb != diffuseColor) {\n    diffuseColor = v_color * diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (v_color == diffuseColor) {\n    diffuseColor = diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (diffuseColorFactor.rgb == diffuseColor) {\n    diffuseColor = v_color;\n  } else {\n    diffuseColor = vec3(1.0, 1.0, 1.0);\n  }\n\n  // diffuseColorTexture\n\n  // adapt OpenGL (RenderMan) Cubemap convension\n  float envRotation = get_envRotation(materialSID, 0);\n  float rot = envRotation + 3.1415;\n  mat3 rotEnvMatrix = mat3(cos(rot), 0.0, -sin(rot), 0.0, 1.0, 0.0, sin(rot), 0.0, cos(rot));\n  vec3 envNormal = normalize(rotEnvMatrix * v_position_inWorld);\n  envNormal.x *= -1.0;\n\n  vec4 textureColor = ${_textureCube}(u_colorEnvTexture, envNormal);\n  diffuseColor *= textureColor.rgb;\n\n  rt0 = vec4(diffuseColor, alpha);\n\n  ${_def_fragColor}\n}`;\n    }\n    get attributeCompositions() {\n        return [\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec3,\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Vec2,\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__[\"CompositionType\"].Scalar\n        ];\n    }\n}\nEnvConstantShader.materialElement = _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_2__[\"ShaderNode\"].ClassicShading;\n\n\n//# sourceURL=webpack:///./src/webgl/shaders/EnvCostantShader.ts?");

/***/ }),

/***/ "./src/webgl/shaders/FXAA3Quality.ts":
/*!*******************************************!*\
  !*** ./src/webgl/shaders/FXAA3Quality.ts ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return FXAA3QualityShader; });\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GLSLShader */ \"./src/webgl/shaders/GLSLShader.ts\");\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n\n\n\n/**\n * This class contains source code provided by NVIDIA Corporation.\n * FXAA antialiasing is developed by NVIDIA.\n * The codes of this class is modified from original code to work on WebGL1 and this library.\n * The modification for GLSL 100 is referred from Three.js, https://github.com/mrdoob/three.js/blob/5ba4c25bcb74577e1b1e14906f345135610a94f3/examples/js/shaders/FXAAShader.js\n * The original FXAA code is https://github.com/NVIDIAGameWorks/GraphicsSamples/blob/80e8ba8f5e8935821513207033490735dd3279d8/samples/es3-kepler/FXAA/FXAA3_11.h\n */\nclass FXAA3QualityShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor() {\n        super();\n        this.attributeNames = [\n            'a_instanceID',\n            'a_texcoord',\n            'a_position'\n        ];\n        this.attributeSemantics = [\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Instance,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Texcoord0,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__[\"VertexAttribute\"].Position\n        ];\n    }\n    static getInstance() {\n        if (!this.instance) {\n            this.instance = new FXAA3QualityShader();\n        }\n        return this.instance;\n    }\n    getVertexShaderBody(args) {\n        const _version = this.glsl_versionText;\n        const _in = this.glsl_vertex_in;\n        const _out = this.glsl_vertex_out;\n        return `${_version}\n${this.glslPrecision}\n\n${_in} float a_instanceID;\n${_in} vec2 a_texcoord;\n${_in} vec3 a_position;\n\n${_out} vec2 v_texcoord;\n\n${this.prerequisites}\n\n${(typeof args.getters !== 'undefined') ? args.getters : ''}\n\n${(typeof args.matricesGetters !== 'undefined') ? args.matricesGetters : ''}\n\nvoid main(){\n  ${this.mainPrerequisites}\n\n${this.simpleMVPPosition}\n\n  v_texcoord = a_texcoord;\n}`;\n    }\n    getFragmentShader(args) {\n        const _version = this.glsl_versionText;\n        const _in = this.glsl_fragment_in;\n        const _def_rt0 = this.glsl_rt0;\n        const _def_fragColor = this.glsl_fragColor;\n        const _texture = this.glsl_texture;\n        //----------------------------------------------------------------------------------\n        // File:        es3-kepler\\FXAA/FXAA3_11.h\n        // SDK Version: v3.00\n        // Email:       gameworks@nvidia.com\n        // Site:        http://developer.nvidia.com/\n        //\n        // Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n        //\n        // Redistribution and use in source and binary forms, with or without\n        // modification, are permitted provided that the following conditions\n        // are met:\n        //  * Redistributions of source code must retain the above copyright\n        //    notice, this list of conditions and the following disclaimer.\n        //  * Redistributions in binary form must reproduce the above copyright\n        //    notice, this list of conditions and the following disclaimer in the\n        //    documentation and/or other materials provided with the distribution.\n        //  * Neither the name of NVIDIA CORPORATION nor the names of its\n        //    contributors may be used to endorse or promote products derived\n        //    from this software without specific prior written permission.\n        //\n        // THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY\n        // EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n        // IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n        // PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n        // CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n        // EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n        // PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n        // PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n        // OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n        // (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n        // OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n        //\n        //----------------------------------------------------------------------------------\n        /*============================================================================\n                            NVIDIA FXAA 3.11 by TIMOTHY LOTTES\n        ============================================================================*/\n        return `${_version}\n${this.glslPrecision}\n\n${this.prerequisites}\n\n${(typeof args.getters !== 'undefined') ? args.getters : ''}\n\n  #define FXAA_PC 1\n  #define FXAA_QUALITY_PRESET 12\n  #define FXAA_GREEN_AS_LUMA 1\n  #define FXAA_GLSL_100 1\n\n  /*============================================================================\n                                INTEGRATION KNOBS\n  ============================================================================*/\n  //\n  // FXAA_PS3 and FXAA_360 choose the console algorithm (FXAA3 CONSOLE).\n  // FXAA_360_OPT is a prototype for the new optimized 360 version.\n  //\n  // 1 = Use API.\n  // 0 = Don't use API.\n  //\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_PS3\n  #define FXAA_PS3 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_360\n  #define FXAA_360 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_360_OPT\n  #define FXAA_360_OPT 0\n  #endif\n  /*==========================================================================*/\n  #ifndef FXAA_PC\n  //\n  // FXAA Quality\n  // The high quality PC algorithm.\n  //\n  #define FXAA_PC 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_PC_CONSOLE\n  //\n  // The console algorithm for PC is included\n  // for developers targeting really low spec machines.\n  // Likely better to just run FXAA_PC, and use a really low preset.\n  //\n  #define FXAA_PC_CONSOLE 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_GLSL_120\n  #define FXAA_GLSL_120 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_GLSL_130\n  #define FXAA_GLSL_130 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_HLSL_3\n  #define FXAA_HLSL_3 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_HLSL_4\n  #define FXAA_HLSL_4 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_HLSL_5\n  #define FXAA_HLSL_5 0\n  #endif\n  /*==========================================================================*/\n  #ifndef FXAA_GREEN_AS_LUMA\n  //\n  // For those using non-linear color,\n  // and either not able to get luma in alpha, or not wanting to,\n  // this enables FXAA to run using green as a proxy for luma.\n  // So with this enabled, no need to pack luma in alpha.\n  //\n  // This will turn off AA on anything which lacks some amount of green.\n  // Pure red and blue or combination of only R and B, will get no AA.\n  //\n  // Might want to lower the settings for both,\n  //    fxaaConsoleEdgeThresholdMin\n  //    fxaaQualityEdgeThresholdMin\n  // In order to insure AA does not get turned off on colors \n  // which contain a minor amount of green.\n  //\n  // 1 = On.\n  // 0 = Off.\n  //\n  #define FXAA_GREEN_AS_LUMA 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_EARLY_EXIT\n  //\n  // Controls algorithm's early exit path.\n  // On PS3 turning this ON adds 2 cycles to the shader.\n  // On 360 turning this OFF adds 10ths of a millisecond to the shader.\n  // Turning this off on console will result in a more blurry image.\n  // So this defaults to on.\n  //\n  // 1 = On.\n  // 0 = Off.\n  //\n  #define FXAA_EARLY_EXIT 1\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_DISCARD\n  //\n  // Only valid for PC OpenGL currently.\n  // Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n  //\n  // 1 = Use discard on pixels which don't need AA.\n  //     For APIs which enable concurrent TEX+ROP from same surface.\n  // 0 = Return unchanged color on pixels which don't need AA.\n  //\n  #define FXAA_DISCARD 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_FAST_PIXEL_OFFSET\n  //\n  // Used for GLSL 120 only.\n  //\n  // 1 = GL API supports fast pixel offsets\n  // 0 = do not use fast pixel offsets\n  //\n  #ifdef GLEXT_gpu_shader4\n  #define FXAA_FAST_PIXEL_OFFSET 1\n  #endif\n  #ifdef GLNV_gpu_shader5\n  #define FXAA_FAST_PIXEL_OFFSET 1\n  #endif\n  #ifdef GLARB_gpu_shader5\n  #define FXAA_FAST_PIXEL_OFFSET 1\n  #endif\n  #ifndef FXAA_FAST_PIXEL_OFFSET\n  #define FXAA_FAST_PIXEL_OFFSET 0\n  #endif\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_GATHER4_ALPHA\n  //\n  // 1 = API supports gather4 on alpha channel.\n  // 0 = API does not support gather4 on alpha channel.\n  //\n  #if (FXAA_HLSL_5 == 1)\n  #define FXAA_GATHER4_ALPHA 1\n  #endif\n  #ifdef GLARB_gpu_shader5\n  #define FXAA_GATHER4_ALPHA 1\n  #endif\n  #ifdef GLNV_gpu_shader5\n  #define FXAA_GATHER4_ALPHA 1\n  #endif\n  #ifndef FXAA_GATHER4_ALPHA\n  #define FXAA_GATHER4_ALPHA 0\n  #endif\n  #endif\n\n  /*============================================================================\n                        FXAA CONSOLE PS3 - TUNING KNOBS\n  ============================================================================*/\n  #ifndef FXAA_CONSOLEPS3_EDGE_SHARPNESS\n  //\n  // Consoles the sharpness of edges on PS3 only.\n  // Non-PS3 tuning is done with shader input.\n  //\n  // Due to the PS3 being ALU bound,\n  // there are only two safe values here: 4 and 8.\n  // These options use the shaders ability to a free *|/ by 2|4|8.\n  //\n  // 8.0 is sharper\n  // 4.0 is softer\n  // 2.0 is really soft (good for vector graphics inputs)\n  //\n  #if 1\n  #define FXAA_CONSOLEPS3_EDGE_SHARPNESS 8.0\n  #endif\n  #if 0\n  #define FXAA_CONSOLEPS3_EDGE_SHARPNESS 4.0\n  #endif\n  #if 0\n  #define FXAA_CONSOLEPS3_EDGE_SHARPNESS 2.0\n  #endif\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_CONSOLEPS3_EDGE_THRESHOLD\n  //\n  // Only effects PS3.\n  // Non-PS3 tuning is done with shader input.\n  //\n  // The minimum amount of local contrast required to apply algorithm.\n  // The console setting has a different mapping than the quality setting.\n  //\n  // This only applies when FXAA_EARLY_EXIT is 1.\n  //\n  // Due to the PS3 being ALU bound,\n  // there are only two safe values here: 0.25 and 0.125.\n  // These options use the shaders ability to a free *|/ by 2|4|8.\n  //\n  // 0.125 leaves less aliasing, but is softer\n  // 0.25 leaves more aliasing, and is sharper\n  //\n  #if 1\n  #define FXAA_CONSOLEPS3_EDGE_THRESHOLD 0.125\n  #else\n  #define FXAA_CONSOLEPS3_EDGE_THRESHOLD 0.25\n  #endif\n  #endif\n\n  /*============================================================================\n                          FXAA QUALITY - TUNING KNOBS\n  ------------------------------------------------------------------------------\n  NOTE the other tuning knobs are now in the shader function inputs!\n  ============================================================================*/\n  #ifndef FXAA_QUALITYPRESET\n  //\n  // Choose the quality preset.\n  // This needs to be compiled into the shader as it effects code.\n  // Best option to include multiple presets is to \n  // in each shader define the preset, then include this file.\n  // \n  // OPTIONS\n  // -----------------------------------------------------------------------\n  // 10 to 15 - default medium dither (10=fastest, 15=highest quality)\n  // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\n  // 39       - no dither, very expensive \n  //\n  // NOTES\n  // -----------------------------------------------------------------------\n  // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\n  // 13 = about same speed as FXAA 3.9 and better than 12\n  // 23 = closest to FXAA 3.9 visually and performance wise\n  //  _ = the lowest digit is directly related to performance\n  // _  = the highest digit is directly related to style\n  // \n  #define FXAA_QUALITYPRESET 12\n  #endif\n\n\n  /*============================================================================\n                             FXAA QUALITY - PRESETS\n  ============================================================================*/\n\n  /*============================================================================\n                       FXAA QUALITY - MEDIUM DITHER PRESETS\n  ============================================================================*/\n  #if(FXAA_QUALITYPRESET == 10)\n#define FXAA_QUALITYPS 3\n#define FXAA_QUALITYP0 1.5\n#define FXAA_QUALITYP1 3.0\n#define FXAA_QUALITYP2 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 11)\n#define FXAA_QUALITYPS 4\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 3.0\n#define FXAA_QUALITYP3 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 12)\n#define FXAA_QUALITYPS 5\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 4.0\n#define FXAA_QUALITYP4 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 13)\n#define FXAA_QUALITYPS 6\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 4.0\n#define FXAA_QUALITYP5 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 14)\n#define FXAA_QUALITYPS 7\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 4.0\n#define FXAA_QUALITYP6 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 15)\n#define FXAA_QUALITYPS 8\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 4.0\n#define FXAA_QUALITYP7 12.0\n#endif\n\n/*============================================================================\n                     FXAA QUALITY - LOW DITHER PRESETS\n============================================================================*/\n#if (FXAA_QUALITYPRESET == 20)\n#define FXAA_QUALITYPS 3\n#define FXAA_QUALITYP0 1.5\n#define FXAA_QUALITYP1 2.0\n#define FXAA_QUALITYP2 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 21)\n#define FXAA_QUALITYPS 4\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 22)\n#define FXAA_QUALITYPS 5\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 23)\n#define FXAA_QUALITYPS 6\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 24)\n#define FXAA_QUALITYPS 7\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 3.0\n#define FXAA_QUALITYP6 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 25)\n#define FXAA_QUALITYPS 8\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 4.0\n#define FXAA_QUALITYP7 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 26)\n#define FXAA_QUALITYPS 9\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 4.0\n#define FXAA_QUALITYP8 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 27)\n#define FXAA_QUALITYPS 10\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 2.0\n#define FXAA_QUALITYP8 4.0\n#define FXAA_QUALITYP9 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 28)\n#define FXAA_QUALITYPS 11\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 2.0\n#define FXAA_QUALITYP8 2.0\n#define FXAA_QUALITYP9 4.0\n#define FXAA_QUALITYP10 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 29)\n#define FXAA_QUALITYPS 12\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 2.0\n#define FXAA_QUALITYP8 2.0\n#define FXAA_QUALITYP9 2.0\n#define FXAA_QUALITYP10 4.0\n#define FXAA_QUALITYP11 8.0\n#endif\n\n/*============================================================================\n                     FXAA QUALITY - EXTREME QUALITY\n============================================================================*/\n#if (FXAA_QUALITYPRESET == 39)\n#define FXAA_QUALITYPS 12\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.0\n#define FXAA_QUALITYP2 1.0\n#define FXAA_QUALITYP3 1.0\n#define FXAA_QUALITYP4 1.0\n#define FXAA_QUALITYP5 1.5\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 2.0\n#define FXAA_QUALITYP8 2.0\n#define FXAA_QUALITYP9 2.0\n#define FXAA_QUALITYP10 4.0\n#define FXAA_QUALITYP11 8.0\n#endif\n\n\n\n/*============================================================================\n                                API PORTING\n============================================================================*/\n#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)\n#define FxaaBool bool\n#define FxaaDiscard discard\n#define FxaaFloat float\n#define FxaaFloat2 vec2\n#define FxaaFloat3 vec3\n#define FxaaFloat4 vec4\n#define FxaaHalf float\n#define FxaaHalf2 vec2\n#define FxaaHalf3 vec3\n#define FxaaHalf4 vec4\n#define FxaaInt2 ivec2\n#define FxaaSat(x) clamp(x, 0.0, 1.0)\n#define FxaaTex sampler2D\n#else\n#define FxaaBool bool\n#define FxaaDiscard clip(-1)\n#define FxaaFloat float\n#define FxaaFloat2 float2\n#define FxaaFloat3 float3\n#define FxaaFloat4 float4\n#define FxaaHalf half\n#define FxaaHalf2 half2\n#define FxaaHalf3 half3\n#define FxaaHalf4 half4\n#define FxaaSat(x) saturate(x)\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_100 == 1)\n#define FxaaTexTop(t, p) ${_texture} (t, p, 0.0)\n#define FxaaTexOff(t, p, o, r) ${_texture} (t, p + (o * r), 0.0)\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_120 == 1)\n// Requires,\n//  #version 120\n// And at least,\n//  #extension GLEXT_gpu_shader4 : enable\n//  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)\n#define FxaaTexTop(t, p) ${_texture} Lod(t, p, 0.0)\n#if (FXAA_FAST_PIXEL_OFFSET == 1)\n#define FxaaTexOff(t, p, o, r) ${_texture} LodOffset(t, p, 0.0, o)\n#else\n#define FxaaTexOff(t, p, o, r) ${_texture} Lod(t, p + (o * r), 0.0)\n#endif\n#if (FXAA_GATHER4_ALPHA == 1)\n// use #extension GLARB_gpu_shader5 : enable\n#define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n#define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n#define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n#define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n#endif\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_130 == 1)\n// Requires \"#version 130\" or better\n#define FxaaTexTop(t, p) textureLod(t, p, 0.0)\n#define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)\n#if (FXAA_GATHER4_ALPHA == 1)\n// use #extension GLARB_gpu_shader5 : enable\n#define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n#define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n#define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n#define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n#endif\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_HLSL_3 == 1) || (FXAA_360 == 1) || (FXAA_PS3 == 1)\n#define FxaaInt2 float2\n#define FxaaTex sampler2D\n#define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))\n#define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_HLSL_4 == 1)\n#define FxaaInt2 int2\nstruct FxaaTex { SamplerState smpl; ${_texture} tex; };\n#define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\n#define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_HLSL_5 == 1)\n#define FxaaInt2 int2\nstruct FxaaTex { SamplerState smpl; ${_texture} tex; };\n#define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\n#define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\n#define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)\n#define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)\n#define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)\n#define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)\n#endif\n\n\n/*============================================================================\n                   GREEN AS LUMA OPTION SUPPORT FUNCTION\n============================================================================*/\n#if (FXAA_GREEN_AS_LUMA == 0)\n  FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }\n#else\nFxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n#endif\n\n\n\n\n/*============================================================================\n                             FXAA3 QUALITY - PC\n============================================================================*/\n#if (FXAA_PC == 1)\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat4 FxaaPixelShader(\n    //\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy} = center of pixel\n    FxaaFloat2 pos,\n    //\n    // Used only for FXAA Console, and not used on the 360 version.\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy} = upper left of pixel\n    // {zw} = lower right of pixel\n    FxaaFloat4 fxaaConsolePosPos,\n    //\n    // Input color texture.\n    // {rgb_} = color in linear or perceptual color space\n    // if (FXAA_GREEN_AS_LUMA == 0)\n    //     {_a} = luma in perceptual color space (not linear)\n    FxaaTex tex,\n    //\n    // Only used on the optimized 360 version of FXAA Console.\n    // For everything but 360, just use the same input here as for \"tex\".\n    // For 360, same texture, just alias with a 2nd sampler.\n    // This sampler needs to have an exponent bias of -1.\n    FxaaTex fxaaConsole360TexExpBiasNegOne,\n    //\n    // Only used on the optimized 360 version of FXAA Console.\n    // For everything but 360, just use the same input here as for \"tex\".\n    // For 360, same texture, just alias with a 3nd sampler.\n    // This sampler needs to have an exponent bias of -2.\n    FxaaTex fxaaConsole360TexExpBiasNegTwo,\n    //\n    // Only used on FXAA Quality.\n    // This must be from a constant/uniform.\n    // {x_} = 1.0/screenWidthInPixels\n    // {_y} = 1.0/screenHeightInPixels\n    FxaaFloat2 fxaaQualityRcpFrame,\n    //\n    // Only used on FXAA Console.\n    // This must be from a constant/uniform.\n    // This effects sub-pixel AA quality and inversely sharpness.\n    //   Where N ranges between,\n    //     N = 0.50 (default)\n    //     N = 0.33 (sharper)\n    // {x_} = -N/screenWidthInPixels  \n    // {_y} = -N/screenHeightInPixels\n    // {z_} =  N/screenWidthInPixels  \n    // {_w} =  N/screenHeightInPixels \n    FxaaFloat4 fxaaConsoleRcpFrameOpt,\n    //\n    // Only used on FXAA Console.\n    // Not used on 360, but used on PS3 and PC.\n    // This must be from a constant/uniform.\n    // {x_} = -2.0/screenWidthInPixels  \n    // {_y} = -2.0/screenHeightInPixels\n    // {z_} =  2.0/screenWidthInPixels  \n    // {_w} =  2.0/screenHeightInPixels \n    FxaaFloat4 fxaaConsoleRcpFrameOpt2,\n    //\n    // Only used on FXAA Console.\n    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.\n    // This must be from a constant/uniform.\n    // {x_} =  8.0/screenWidthInPixels  \n    // {_y} =  8.0/screenHeightInPixels\n    // {z_} = -4.0/screenWidthInPixels  \n    // {_w} = -4.0/screenHeightInPixels \n    FxaaFloat4 fxaaConsole360RcpFrameOpt2,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITYSUBPIX define.\n    // It is here now to allow easier tuning.\n    // Choose the amount of sub-pixel aliasing removal.\n    // This can effect sharpness.\n    //   1.00 - upper limit (softer)\n    //   0.75 - default amount of filtering\n    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)\n    //   0.25 - almost off\n    //   0.00 - completely off\n    FxaaFloat fxaaQualitySubpix,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITYEDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // The minimum amount of local contrast required to apply algorithm.\n    //   0.333 - too little (faster)\n    //   0.250 - low quality\n    //   0.166 - default\n    //   0.125 - high quality \n    //   0.063 - overkill (slower)\n    FxaaFloat fxaaQualityEdgeThreshold,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITYEDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    //   0.0833 - upper limit (default, the start of visible unfiltered edges)\n    //   0.0625 - high quality (faster)\n    //   0.0312 - visible limit (slower)\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //   Likely want to set this to zero.\n    //   As colors that are mostly not-green\n    //   will appear very dark in the green channel!\n    //   Tune by looking at mostly non-green content,\n    //   then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaQualityEdgeThresholdMin,\n    // \n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLEEDGE_SHARPNESS define.\n    // It is here now to allow easier tuning.\n    // This does not effect PS3, as this needs to be compiled in.\n    //   Use FXAA_CONSOLEPS3_EDGE_SHARPNESS for PS3.\n    //   Due to the PS3 being ALU bound,\n    //   there are only three safe values here: 2 and 4 and 8.\n    //   These options use the shaders ability to a free *|/ by 2|4|8.\n    // For all other platforms can be a non-power of two.\n    //   8.0 is sharper (default!!!)\n    //   4.0 is softer\n    //   2.0 is really soft (good only for vector graphics inputs)\n    FxaaFloat fxaaConsoleEdgeSharpness,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLEEDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // This does not effect PS3, as this needs to be compiled in.\n    //   Use FXAA_CONSOLEPS3_EDGE_THRESHOLD for PS3.\n    //   Due to the PS3 being ALU bound,\n    //   there are only two safe values here: 1/4 and 1/8.\n    //   These options use the shaders ability to a free *|/ by 2|4|8.\n    // The console setting has a different mapping than the quality setting.\n    // Other platforms can use other values.\n    //   0.125 leaves less aliasing, but is softer (default!!!)\n    //   0.25 leaves more aliasing, and is sharper\n    FxaaFloat fxaaConsoleEdgeThreshold,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLEEDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    // The console setting has a different mapping than the quality setting.\n    // This only applies when FXAA_EARLY_EXIT is 1.\n    // This does not apply to PS3, \n    // PS3 was simplified to avoid more shader instructions.\n    //   0.06 - faster but more aliasing in darks\n    //   0.05 - default\n    //   0.04 - slower and less aliasing in darks\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //   Likely want to set this to zero.\n    //   As colors that are mostly not-green\n    //   will appear very dark in the green channel!\n    //   Tune by looking at mostly non-green content,\n    //   then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaConsoleEdgeThresholdMin,\n    //    \n    // Extra constants for 360 FXAA Console only.\n    // Use zeros or anything else for other platforms.\n    // These must be in physical constant registers and NOT immedates.\n    // Immedates will result in compiler un-optimizing.\n    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)\n    FxaaFloat4 fxaaConsole360ConstDir\n  ) {\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat2 posM;\n  posM.x = pos.x;\n  posM.y = pos.y;\n  #if (FXAA_GATHER4_ALPHA == 1)\n  #if (FXAA_DISCARD == 0)\n    FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n  #if (FXAA_GREEN_AS_LUMA == 0)\n  #define lumaM rgbyM.w\n  #else\n  #define lumaM rgbyM.y\n  #endif\n  #endif\n  #if (FXAA_GREEN_AS_LUMA == 0)\n    FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);\n  FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));\n  #else\n  FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);\n  FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));\n  #endif\n  #if (FXAA_DISCARD == 1)\n  #define lumaM luma4A.w\n  #endif\n  #define lumaE luma4A.z\n  #define lumaS luma4A.x\n  #define lumaSE luma4A.y\n  #define lumaNW luma4B.w\n  #define lumaN luma4B.z\n  #define lumaW luma4B.x\n  #else\n  FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n  #if (FXAA_GREEN_AS_LUMA == 0)\n  #define lumaM rgbyM.w\n  #else\n  #define lumaM rgbyM.y\n  #endif\n  #if (FXAA_GLSL_100 == 1)\n    FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(0.0, 1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(1.0, 0.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(0.0, -1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));\n  #else\n  FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(0, 1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, 0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(0, -1), fxaaQualityRcpFrame.xy));\n  #endif\n  #endif\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat maxSM = max(lumaS, lumaM);\n  FxaaFloat minSM = min(lumaS, lumaM);\n  FxaaFloat maxESM = max(lumaE, maxSM);\n  FxaaFloat minESM = min(lumaE, minSM);\n  FxaaFloat maxWN = max(lumaN, lumaW);\n  FxaaFloat minWN = min(lumaN, lumaW);\n  FxaaFloat rangeMax = max(maxWN, maxESM);\n  FxaaFloat rangeMin = min(minWN, minESM);\n  FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n  FxaaFloat range = rangeMax - rangeMin;\n  FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n  FxaaBool earlyExit = range < rangeMaxClamped;\n  /*--------------------------------------------------------------------------*/\n  if (earlyExit)\n  #if (FXAA_DISCARD == 1)\n    FxaaDiscard;\n  #else\n  return rgbyM;\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #if (FXAA_GATHER4_ALPHA == 0)\n  #if (FXAA_GLSL_100 == 1)\n    FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, -1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(1.0, 1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(1.0, -1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));\n  #else\n  FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, -1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, 1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n  #endif\n  #else\n  FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n  #endif\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat lumaNS = lumaN + lumaS;\n  FxaaFloat lumaWE = lumaW + lumaE;\n  FxaaFloat subpixRcpRange = 1.0 / range;\n  FxaaFloat subpixNSWE = lumaNS + lumaWE;\n  FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n  FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat lumaNESE = lumaNE + lumaSE;\n  FxaaFloat lumaNWNE = lumaNW + lumaNE;\n  FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n  FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat lumaNWSW = lumaNW + lumaSW;\n  FxaaFloat lumaSWSE = lumaSW + lumaSE;\n  FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n  FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n  FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n  FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n  FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n  FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n  FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n  FxaaBool horzSpan = edgeHorz >= edgeVert;\n  FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n  /*--------------------------------------------------------------------------*/\n  if (!horzSpan) lumaN = lumaW;\n  if (!horzSpan) lumaS = lumaE;\n  if (horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n  FxaaFloat subpixB = (subpixA * (1.0 / 12.0)) - lumaM;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat gradientN = lumaN - lumaM;\n  FxaaFloat gradientS = lumaS - lumaM;\n  FxaaFloat lumaNN = lumaN + lumaM;\n  FxaaFloat lumaSS = lumaS + lumaM;\n  FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n  FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n  if (pairN) lengthSign = -lengthSign;\n  FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat2 posB;\n  posB.x = posM.x;\n  posB.y = posM.y;\n  FxaaFloat2 offNP;\n  offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n  offNP.y = (horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n  if (!horzSpan) posB.x += lengthSign * 0.5;\n  if (horzSpan) posB.y += lengthSign * 0.5;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat2 posN;\n  posN.x = posB.x - offNP.x * FXAA_QUALITYP0;\n  posN.y = posB.y - offNP.y * FXAA_QUALITYP0;\n  FxaaFloat2 posP;\n  posP.x = posB.x + offNP.x * FXAA_QUALITYP0;\n  posP.y = posB.y + offNP.y * FXAA_QUALITYP0;\n  FxaaFloat subpixD = ((-2.0) * subpixC) + 3.0;\n  FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n  FxaaFloat subpixE = subpixC * subpixC;\n  FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n  /*--------------------------------------------------------------------------*/\n  if (!pairN) lumaNN = lumaSS;\n  FxaaFloat gradientScaled = gradient * 1.0 / 4.0;\n  FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n  FxaaFloat subpixF = subpixD * subpixE;\n  FxaaBool lumaMLTZero = lumaMM < 0.0;\n  /*--------------------------------------------------------------------------*/\n  lumaEndN -= lumaNN * 0.5;\n  lumaEndP -= lumaNN * 0.5;\n  FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n  FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n  if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP1;\n  if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP1;\n  FxaaBool doneNP = (!doneN) || (!doneP);\n  if (!doneP) posP.x += offNP.x * FXAA_QUALITYP1;\n  if (!doneP) posP.y += offNP.y * FXAA_QUALITYP1;\n  /*--------------------------------------------------------------------------*/\n  if (doneNP) {\n    if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n    if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n    if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n    if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n    doneN = abs(lumaEndN) >= gradientScaled;\n    doneP = abs(lumaEndP) >= gradientScaled;\n    if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP2;\n    if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP2;\n    doneNP = (!doneN) || (!doneP);\n    if (!doneP) posP.x += offNP.x * FXAA_QUALITYP2;\n    if (!doneP) posP.y += offNP.y * FXAA_QUALITYP2;\n    /*--------------------------------------------------------------------------*/\n    #if (FXAA_QUALITYPS > 3)\n      if (doneNP) {\n        if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP3;\n        if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP3;\n        doneNP = (!doneN) || (!doneP);\n        if (!doneP) posP.x += offNP.x * FXAA_QUALITYP3;\n        if (!doneP) posP.y += offNP.y * FXAA_QUALITYP3;\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITYPS > 4)\n          if (doneNP) {\n            if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP4;\n            if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP4;\n            doneNP = (!doneN) || (!doneP);\n            if (!doneP) posP.x += offNP.x * FXAA_QUALITYP4;\n            if (!doneP) posP.y += offNP.y * FXAA_QUALITYP4;\n            /*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITYPS > 5)\n              if (doneNP) {\n                if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP5;\n                if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP5;\n                doneNP = (!doneN) || (!doneP);\n                if (!doneP) posP.x += offNP.x * FXAA_QUALITYP5;\n                if (!doneP) posP.y += offNP.y * FXAA_QUALITYP5;\n                /*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITYPS > 6)\n                  if (doneNP) {\n                    if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP6;\n                    if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP6;\n                    doneNP = (!doneN) || (!doneP);\n                    if (!doneP) posP.x += offNP.x * FXAA_QUALITYP6;\n                    if (!doneP) posP.y += offNP.y * FXAA_QUALITYP6;\n                    /*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITYPS > 7)\n                      if (doneNP) {\n                        if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP7;\n                        if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP7;\n                        doneNP = (!doneN) || (!doneP);\n                        if (!doneP) posP.x += offNP.x * FXAA_QUALITYP7;\n                        if (!doneP) posP.y += offNP.y * FXAA_QUALITYP7;\n                        /*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITYPS > 8)\n                          if (doneNP) {\n                            if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP8;\n                            if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP8;\n                            doneNP = (!doneN) || (!doneP);\n                            if (!doneP) posP.x += offNP.x * FXAA_QUALITYP8;\n                            if (!doneP) posP.y += offNP.y * FXAA_QUALITYP8;\n                            /*--------------------------------------------------------------------------*/\n                            #if (FXAA_QUALITYPS > 9)\n                              if (doneNP) {\n                                if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                doneN = abs(lumaEndN) >= gradientScaled;\n                                doneP = abs(lumaEndP) >= gradientScaled;\n                                if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP9;\n                                if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP9;\n                                doneNP = (!doneN) || (!doneP);\n                                if (!doneP) posP.x += offNP.x * FXAA_QUALITYP9;\n                                if (!doneP) posP.y += offNP.y * FXAA_QUALITYP9;\n                                /*--------------------------------------------------------------------------*/\n                                #if (FXAA_QUALITYPS > 10)\n                                  if (doneNP) {\n                                    if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                    if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                    if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                    if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                    doneN = abs(lumaEndN) >= gradientScaled;\n                                    doneP = abs(lumaEndP) >= gradientScaled;\n                                    if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP10;\n                                    if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP10;\n                                    doneNP = (!doneN) || (!doneP);\n                                    if (!doneP) posP.x += offNP.x * FXAA_QUALITYP10;\n                                    if (!doneP) posP.y += offNP.y * FXAA_QUALITYP10;\n                                    /*--------------------------------------------------------------------------*/\n                                    #if (FXAA_QUALITYPS > 11)\n                                      if (doneNP) {\n                                        if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                        if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                        if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                        if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                        doneN = abs(lumaEndN) >= gradientScaled;\n                                        doneP = abs(lumaEndP) >= gradientScaled;\n                                        if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP11;\n                                        if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP11;\n                                        doneNP = (!doneN) || (!doneP);\n                                        if (!doneP) posP.x += offNP.x * FXAA_QUALITYP11;\n                                        if (!doneP) posP.y += offNP.y * FXAA_QUALITYP11;\n                                        /*--------------------------------------------------------------------------*/\n                                        #if (FXAA_QUALITYPS > 12)\n                                          if (doneNP) {\n                                            if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                            if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                            if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                            if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                            doneN = abs(lumaEndN) >= gradientScaled;\n                                            doneP = abs(lumaEndP) >= gradientScaled;\n                                            if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP12;\n                                            if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP12;\n                                            doneNP = (!doneN) || (!doneP);\n                                            if (!doneP) posP.x += offNP.x * FXAA_QUALITYP12;\n                                            if (!doneP) posP.y += offNP.y * FXAA_QUALITYP12;\n                                            /*--------------------------------------------------------------------------*/\n                                          }\n                                        #endif\n                                        /*--------------------------------------------------------------------------*/\n                                      }\n                                    #endif\n                                    /*--------------------------------------------------------------------------*/\n                                  }\n                                #endif\n                                /*--------------------------------------------------------------------------*/\n                              }\n                            #endif\n                            /*--------------------------------------------------------------------------*/\n                          }\n                        #endif\n                        /*--------------------------------------------------------------------------*/\n                      }\n                    #endif\n                    /*--------------------------------------------------------------------------*/\n                  }\n                #endif\n                /*--------------------------------------------------------------------------*/\n              }\n            #endif\n            /*--------------------------------------------------------------------------*/\n          }\n        #endif\n        /*--------------------------------------------------------------------------*/\n      }\n    #endif\n    /*--------------------------------------------------------------------------*/\n  }\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat dstN = posM.x - posN.x;\n  FxaaFloat dstP = posP.x - posM.x;\n  if (!horzSpan) dstN = posM.y - posN.y;\n  if (!horzSpan) dstP = posP.y - posM.y;\n  /*--------------------------------------------------------------------------*/\n  FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n  FxaaFloat spanLength = (dstP + dstN);\n  FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n  FxaaFloat spanLengthRcp = 1.0 / spanLength;\n  /*--------------------------------------------------------------------------*/\n  FxaaBool directionN = dstN < dstP;\n  FxaaFloat dst = min(dstN, dstP);\n  FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n  FxaaFloat subpixG = subpixF * subpixF;\n  FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n  FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n  FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n  if (!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n  if (horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n  #if (FXAA_DISCARD == 1)\n    return FxaaTexTop(tex, posM);\n  #else\n  return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n  #endif\n}\n/*==========================================================================*/\n#endif\n\n\n${_in} vec2 v_texcoord;\n${_def_rt0}\nvoid main(){\n  ${this.mainPrerequisites}\n\n  vec2 screenInfo = get_screenInfo(materialSID, 0);\n  rt0 = FxaaPixelShader(\n      v_texcoord,\n      vec4(0.0),\n      u_baseColorTexture,\n      u_baseColorTexture,\n      u_baseColorTexture,\n      1.0 / screenInfo,\n      vec4(0.0),\n      vec4(0.0),\n      vec4(0.0),\n      0.75,\n      0.166,\n      0.0833,\n      0.0,\n      0.0,\n      0.0,\n      vec4(0.0)\n  );\n  rt0.a = 1.0;\n  ${_def_fragColor}\n}\n`;\n    }\n    getPixelShaderBody(args) {\n        return this.getFragmentShader(args);\n    }\n    get attributeCompositions() {\n        return [\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__[\"CompositionType\"].Scalar,\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__[\"CompositionType\"].Vec2,\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__[\"CompositionType\"].Vec3,\n        ];\n    }\n}\n\n\n//# sourceURL=webpack:///./src/webgl/shaders/FXAA3Quality.ts?");

/***/ }),

/***/ "./src/webgl/shaders/GLSLShader.ts":
/*!*****************************************!*\
  !*** ./src/webgl/shaders/GLSLShader.ts ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GLSLShader; });\n/* harmony import */ var _foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/definitions/ProcessApproach */ \"./src/foundation/definitions/ProcessApproach.ts\");\n/* harmony import */ var _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../foundation/definitions/ShaderSemantics */ \"./src/foundation/definitions/ShaderSemantics.ts\");\n/* harmony import */ var _foundation_system_System__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/system/System */ \"./src/foundation/system/System.ts\");\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../WebGLResourceRepository */ \"./src/webgl/WebGLResourceRepository.ts\");\n/* harmony import */ var _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../foundation/components/WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n\n\n\n\n\n\nclass GLSLShader {\n    constructor() {\n        this.__webglResourceRepository = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance();\n    }\n    get glsl_rt0() {\n        const repo = this.__webglResourceRepository;\n        if (repo.currentWebGLContextWrapper.isWebGL2) {\n            return 'layout(location = 0) out vec4 rt0;\\n';\n        }\n        else {\n            return 'vec4 rt0;\\n';\n        }\n    }\n    get glsl_fragColor() {\n        const repo = this.__webglResourceRepository;\n        if (repo.currentWebGLContextWrapper != null && repo.currentWebGLContextWrapper.isWebGL2) {\n            return '';\n        }\n        else {\n            return 'gl_FragColor = rt0;\\n';\n        }\n    }\n    get glsl_vertex_in() {\n        const repo = this.__webglResourceRepository;\n        if (repo.currentWebGLContextWrapper.isWebGL2) {\n            return 'in';\n        }\n        else {\n            return 'attribute';\n        }\n    }\n    get glsl_fragment_in() {\n        const repo = this.__webglResourceRepository;\n        if (repo.currentWebGLContextWrapper.isWebGL2) {\n            return 'in';\n        }\n        else {\n            return 'varying';\n        }\n    }\n    get glsl_vertex_out() {\n        const repo = this.__webglResourceRepository;\n        if (repo.currentWebGLContextWrapper.isWebGL2) {\n            return 'out';\n        }\n        else {\n            return 'varying';\n        }\n    }\n    get glsl_vertex_centroid_out() {\n        const repo = this.__webglResourceRepository;\n        if (repo.currentWebGLContextWrapper.isWebGL2) {\n            return 'centroid out';\n        }\n        else {\n            return 'varying';\n        }\n    }\n    get glsl_texture() {\n        const repo = this.__webglResourceRepository;\n        if (repo.currentWebGLContextWrapper.isWebGL2) {\n            return 'texture';\n        }\n        else {\n            return 'texture2D';\n        }\n    }\n    get glsl_textureCube() {\n        const repo = this.__webglResourceRepository;\n        if (repo.currentWebGLContextWrapper.isWebGL2) {\n            return 'texture';\n        }\n        else {\n            return 'textureCube';\n        }\n    }\n    get glsl_textureProj() {\n        const repo = this.__webglResourceRepository;\n        if (repo.currentWebGLContextWrapper.isWebGL2) {\n            return 'textureProj';\n        }\n        else {\n            return 'texture2DProj';\n        }\n    }\n    get glsl_versionText() {\n        const repo = this.__webglResourceRepository;\n        if (repo.currentWebGLContextWrapper != null && repo.currentWebGLContextWrapper.isWebGL2) {\n            return '#version 300 es\\n';\n        }\n        else {\n            return '';\n        }\n    }\n    get glslPrecision() {\n        return `precision highp float;\nprecision highp int;\n    `;\n    }\n    get glslMainBegin() {\n        return `\n    void main() {\n    `;\n    }\n    get glslMainEnd() {\n        return `\n    }\n    `;\n    }\n    getGlslVertexShaderProperies(str = '') {\n        return str;\n    }\n    get glsl1ShaderTextureLodExt() {\n        const ext = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance().currentWebGLContextWrapper.webgl1ExtSTL;\n        return (ext != null) ? '#extension GL_EXT_shader_texture_lod : require' : '';\n    }\n    get glsl1ShaderDerivativeExt() {\n        const ext = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInstance().currentWebGLContextWrapper.webgl1ExtDRV;\n        return (ext != null) ? '#extension GL_OES_standard_derivatives : require' : '';\n    }\n    get toNormalMatrix() {\n        return `\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}`;\n    }\n    get getSkinMatrix() {\n        return `\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTransformUniformScale( highp vec4 quaternion, highp vec4 translationScale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translationScale.xyz;\n  highp float scale = translationScale.w;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale, 0.0, 0.0, 0.0,\n    0.0, scale, 0.0, 0.0,\n    0.0, 0.0, scale, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n  highp vec2 criteria = vec2(4096.0, 4096.0);\n  highp mat4 skinMat = a_weight.x * createMatrixFromQuaternionTransformUniformScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)),\n    get_boneTranslateScale(skeletalComponentSID, int(a_joint.x)));\n  skinMat += a_weight.y * createMatrixFromQuaternionTransformUniformScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)),\n    get_boneTranslateScale(skeletalComponentSID, int(a_joint.y)));\n  skinMat += a_weight.z * createMatrixFromQuaternionTransformUniformScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)),\n    get_boneTranslateScale(skeletalComponentSID, int(a_joint.z)));\n  skinMat += a_weight.w * createMatrixFromQuaternionTransformUniformScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)),\n    get_boneTranslateScale(skeletalComponentSID, int(a_joint.w)));\n\n  // mat4 skinMat = a_weight.x * u_boneMatrices[int(a_joint.x)];\n  // skinMat += a_weight.y * u_boneMatrices[int(a_joint.y)];\n  // skinMat += a_weight.z * u_boneMatrices[int(a_joint.z)];\n  // skinMat += a_weight.w * u_boneMatrices[int(a_joint.w)];\n\n  return skinMat;\n}\n#endif\n`;\n    }\n    get packing() {\n        return `\nconst vec4 bitEnc = vec4(1.,255.,65025.,16581375.);\nconst vec4 bitDec = 1./bitEnc;\n\nvec4 encodeFloatRGBA(float v) {\n  float val = v;\n  float r = mod(val, 255.0);\n  val -= r;\n  float g = mod(val, 65025.0);\n  val -= g;\n  float b = mod(val, 16581375.0);\n  return vec4(r/255.0, g/65025.0, b/16581375.0, 1.0);\n}`;\n    }\n    get processGeometryWithSkinningOptionally() {\n        return `\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrix * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}`;\n    }\n    get prerequisites() {\n        return `uniform float u_materialSID;\nuniform sampler2D u_dataTexture;\n\n  /*\n  * This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  * arg = vec2(1. / size.x, 1. / size.x / size.y);\n  */\n  // highp vec4 fetchElement(highp sampler2D tex, highp float index, highp vec2 arg)\n  // {\n  //   return ${this.glsl_texture}( tex, arg * (index + 0.5) );\n  // }\n\nhighp vec4 fetchElement(highp sampler2D tex, highp float index, highp vec2 invSize){\n  highp float t = (index + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  return ${this.glsl_texture}( tex, vec2(x, y) );\n}\n\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\n`;\n    }\n    get mainPrerequisites() {\n        const processApproach = _foundation_system_System__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getInstance().processApproach;\n        if (processApproach === _foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_0__[\"ProcessApproach\"].FastestWebGL1) {\n            return `\n  float materialSID = u_currentComponentSIDs[0];\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[${_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__[\"WellKnownComponentTIDs\"].LightComponentTID}]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[${_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__[\"WellKnownComponentTIDs\"].SkeletalComponentTID}];\n  #endif\n`;\n        }\n        else {\n            return `\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n      `;\n        }\n    }\n    get pointSprite() {\n        return `  vec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\n  vec3 viewPosition = get_viewPosition(cameraSID, 0);\n  float distanceFromCamera = length(position_inWorld.xyz - viewPosition);\n  vec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\n  float distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\n  float maxPointSize = get_pointSize(materialSID, 0);\n  gl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);`;\n    }\n    get pbrUniformDefinition() {\n        let shaderText = '';\n        shaderText += 'uniform vec2 uMetallicRoughnessFactors;\\n';\n        shaderText += 'uniform vec3 uBaseColorFactor;\\n';\n        shaderText += 'uniform vec2 uOcclusionFactors;';\n        shaderText += 'uniform vec3 uEmissiveFactor;';\n        shaderText += 'uniform sampler2D uMetallicRoughnessTexture;\\n';\n        const occlusionTexture = true; //material.getTextureFromPurpose(GLBoost.TEXTURE_PURPOSE_OCCLUSION);\n        if (occlusionTexture) {\n            shaderText += 'uniform sampler2D uOcclusionTexture;\\n';\n        }\n        const emissiveTexture = true; //material.getTextureFromPurpose(GLBoost.TEXTURE_PURPOSE_EMISSIVE);\n        if (emissiveTexture) {\n            shaderText += 'uniform sampler2D uEmissiveTexture;\\n';\n        }\n        const diffuseEnvCubeTexture = true; //material.getTextureFromPurpose(GLBoost.TEXTURE_PURPOSE_IBL_DIFFUSE_ENV_CUBE);\n        if (diffuseEnvCubeTexture) {\n            shaderText += 'uniform sampler2D u_brdfLutTexture;\\n';\n            shaderText += 'uniform samplerCube uDiffuseEnvTexture;\\n';\n            shaderText += 'uniform samplerCube uSpecularEnvTexture;\\n';\n            shaderText += 'uniform vec4 uIBLParameters;\\n'; // Ka * amount of ambient lights\n        }\n        shaderText += 'uniform vec4 ambient;\\n'; // Ka * amount of ambient lights\n        return shaderText;\n    }\n    get mipmapLevel() {\n        return `\n    // https://stackoverflow.com/questions/24388346/how-to-access-automatic-mipmap-level-in-glsl-fragment-shader-texture\n    float mipmapLevel(vec3 uv_as_texel)\n    {\n      vec3  dx_vtc        = dFdx(uv_as_texel);\n      vec3  dy_vtc        = dFdy(uv_as_texel);\n      float delta_max_sqr = max(dot(dx_vtc, dx_vtc), dot(dy_vtc, dy_vtc));\n      float mml = 0.5 * log2(delta_max_sqr);\n      return max( 0.0, mml );\n    }`;\n    }\n    get pbrMethodDefinition() {\n        return `\n    const float M_PI = 3.141592653589793;\n    const float c_MinRoughness = 0.04;\n\n    float angular_n_h(float NH) {\n      return acos(NH);\n    }\n\n    float sqr(float x) {\n      return x*x;\n    }\n\n    float d_phong(float NH, float c1) {\n      return pow(\n        cos(acos(NH))\n        , c1\n      );\n    }\n\n    // this is from https://www.unrealengine.com/blog/physically-based-shading-on-mobile\n    vec3 envBRDFApprox( vec3 F0, float Roughness, float NoV ) {\n      const vec4 c0 = vec4(-1, -0.0275, -0.572, 0.022 );\n      const vec4 c1 = vec4(1, 0.0425, 1.04, -0.04 );\n      vec4 r = Roughness * c0 + c1;\n      float a004 = min( r.x * r.x, exp2( -9.28 * NoV ) ) * r.x + r.y;\n      vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n      return F0 * AB.x + AB.y;\n    }\n\n    // GGX NDF\n    float d_ggx(float NH, float alphaRoughness) {\n      float roughnessSqr = alphaRoughness * alphaRoughness;\n      float f = (roughnessSqr - 1.0) * NH * NH + 1.0;\n      return roughnessSqr / (M_PI * f * f);\n    }\n\n    float d_torrance_reiz(float NH, float c3) {\n      float CosSquared = NH*NH;\n      float TanSquared = (1.0 - CosSquared)/CosSquared;\n      //return (1.0/M_PI) * sqr(c3/(CosSquared * (c3*c3 + TanSquared)));  // gamma = 2, aka GGX\n      return (1.0/sqrt(M_PI)) * (sqr(c3)/(CosSquared * (c3*c3 + TanSquared))); // gamma = 1, D_Berry\n    }\n\n    float d_beckmann(float NH, float m) {\n      float co = 1.0 / (4.0 * m * m * NH * NH * NH * NH);\n      float expx = exp((NH * NH - 1.0) / (m * m * NH * NH));\n      return co * expx;\n    }\n\n    // the same as glTF WebGL sample\n    // https://github.com/KhronosGroup/glTF-WebGL-PBR/blob/88eda8c5358efe03128b72b6c5f5f6e5b6d023e1/shaders/pbr-frag.glsl#L188\n    // That is, Unreal Engine based approach, but modified to use alphaRoughness (squared artist's roughness parameter),\n    // and based on 'Separable Masking and Shadowing' approximation (propesed by Christophe Schlick)\n    // https://www.cs.virginia.edu/~jdl/bib/appearance/analytic%20models/schlick94b.pdf\n    float g_shielding(float NL, float NV, float alphaRoughness) {\n      float r = alphaRoughness;\n\n      // Local Shadowing using \"Schlick-Smith\" Masking Function\n      float localShadowing = 2.0 * NL / (NL + sqrt(r * r + (1.0 - r * r) * (NL * NL)));\n\n      // Local Masking using \"Schlick-Smith\" Masking Function\n      float localMasking = 2.0 * NV / (NV + sqrt(r * r + (1.0 - r * r) * (NV * NV)));\n\n      return localShadowing * localMasking;\n    }\n\n    // The code from https://google.github.io/filament/Filament.html#listing_approximatedspecularv\n    // The idea is from [Heitz14] Eric Heitz. 2014. Understanding the Masking-Shadowing Function in Microfacet-Based BRDFs.\n    float v_SmithGGXCorrelated(float NL, float NV, float alphaRoughness) {\n      float a2 = alphaRoughness * alphaRoughness;\n      float GGXV = NL * sqrt(NV * NV * (1.0 - a2) + a2);\n      float GGXL = NV * sqrt(NL * NL * (1.0 - a2) + a2);\n      return 0.5 / (GGXV + GGXL);\n    }\n\n    float v_SmithGGXCorrelatedFast(float NL, float NV, float alphaRoughness) {\n      float a = alphaRoughness;\n      float GGXV = NL * (NV * (1.0 - a) + a);\n      float GGXL = NV * (NL * (1.0 - a) + a);\n      return 0.5 / (GGXV + GGXL);\n    }\n\n    // The Schlick Approximation to Fresnel\n    vec3 fresnel(vec3 f0, float VH) {\n      return vec3(f0) + (vec3(1.0) - f0) * pow(1.0 - VH, 5.0);\n    }\n\n    vec3 cook_torrance_specular_brdf(float NH, float NL, float NV, vec3 F, float alphaRoughness) {\n      float D = d_ggx(NH, alphaRoughness);\n      float V = v_SmithGGXCorrelated(NL, NV, alphaRoughness);\n      return vec3(D)*vec3(V)*F;\n//      float G = g_shielding(NL, NV, alphaRoughness);\n//      return vec3(D)*vec3(G)*F/vec3(4.0*NL*NV);\n\n    }\n\n    vec3 diffuse_brdf(vec3 albedo)\n    {\n      return albedo / M_PI;\n    }\n\n    vec3 srgbToLinear(vec3 srgbColor) {\n      return pow(srgbColor, vec3(2.2));\n    }\n\n    float srgbToLinear(float value) {\n      return pow(value, 2.2);\n    }\n\n    vec3 linearToSrgb(vec3 linearColor) {\n      return pow(linearColor, vec3(1.0/2.2));\n    }\n\n    float linearToSrgb(float value) {\n      return pow(value, 1.0/2.2);\n    }\n\n    vec3 fresnelSchlickRoughness(vec3 F0, float cosTheta, float roughness)\n    {\n      return F0 + (max(vec3(1.0 - roughness), F0) - F0) * pow(1.0 - cosTheta, 5.0);\n    }\n\n    vec3 normalBlendingUDN(sampler2D baseMap, sampler2D detailMap, vec2 baseUv, vec2 detailUv) {\n      vec3 t = ${this.glsl_texture}(baseMap,   baseUv).xyz * 2.0 - 1.0;\n      vec3 u = ${this.glsl_texture}(detailMap, detailUv).xyz * 2.0 - 1.0;\n      vec3 r = normalize(vec3(t.xy + u.xy, t.z));\n      return r;\n    }\n\n    vec2 uvTransform(vec2 scale, vec2 offset, float rotation, vec2 uv) {\n      mat3 translationMat = mat3(1,0,0, 0,1,0, offset.x, offset.y, 1);\n      mat3 rotationMat = mat3(\n          cos(rotation), sin(rotation), 0,\n         -sin(rotation), cos(rotation), 0,\n                      0,             0, 1\n      );\n      mat3 scaleMat = mat3(scale.x,0,0, 0,scale.y,0, 0,0,1);\n\n      mat3 matrix = translationMat * rotationMat * scaleMat;\n      vec2 uvTransformed = ( matrix * vec3(uv.xy, 1) ).xy;\n\n      return uvTransformed;\n    }\n\n    `;\n    }\n    get simpleMVPPosition() {\n        return `\n  float cameraSID = u_currentComponentSIDs[${_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__[\"WellKnownComponentTIDs\"].CameraComponentTID}];\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n    `;\n    }\n    static getStringFromShaderAnyDataType(data) {\n        if (data instanceof _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__[\"ShaderSemanticsClass\"]) {\n            return 'u_' + data.str;\n        }\n        else if (data instanceof _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_3__[\"VertexAttributeClass\"]) {\n            return data.shaderStr;\n        }\n        else {\n            return data;\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/webgl/shaders/GLSLShader.ts?");

/***/ }),

/***/ "./src/webgl/shaders/GammaCorrectionShader.ts":
/*!****************************************************!*\
  !*** ./src/webgl/shaders/GammaCorrectionShader.ts ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GammaCorrectionShader; });\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GLSLShader */ \"./src/webgl/shaders/GLSLShader.ts\");\n/* harmony import */ var _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/definitions/ShaderNode */ \"./src/foundation/definitions/ShaderNode.ts\");\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n\n\n\n\nclass GammaCorrectionShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor() {\n        super();\n        this.attributeNames = ['a_position', 'a_texcoord', 'a_instanceID'];\n        this.attributeSemantics = [_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_3__[\"VertexAttribute\"].Position, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_3__[\"VertexAttribute\"].Texcoord0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_3__[\"VertexAttribute\"].Instance];\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new GammaCorrectionShader();\n        }\n        return this.__instance;\n    }\n    getVertexShaderBody(args) {\n        const _version = this.glsl_versionText;\n        const _in = this.glsl_vertex_in;\n        const _out = this.glsl_vertex_out;\n        return `${_version}\n${this.glslPrecision}\n\n${_in} float a_instanceID;\n${_in} vec2 a_texcoord;\n${_in} vec3 a_position;\n\n${_out} vec2 v_texcoord;\n\n${this.prerequisites}\n\n${(typeof args.getters !== 'undefined') ? args.getters : ''}\n\n${(typeof args.matricesGetters !== 'undefined') ? args.matricesGetters : ''}\n\nvoid main(){\n${this.mainPrerequisites}\n\n${this.simpleMVPPosition}\n\n  v_texcoord = a_texcoord;\n}`;\n    }\n    getPixelShaderBody(args) {\n        const _version = this.glsl_versionText;\n        const _in = this.glsl_fragment_in;\n        const _def_rt0 = this.glsl_rt0;\n        const _def_fragColor = this.glsl_fragColor;\n        const _texture = this.glsl_texture;\n        return `${_version}\n${this.glslPrecision}\n\n${_in} vec2 v_texcoord;\n\n${_def_rt0}\n\n${this.prerequisites}\n\n${(typeof args.getters !== 'undefined') ? args.getters : ''}\n\nvec3 linearToSrgb(vec3 linearColor) {\n  return pow(linearColor, vec3(1.0/2.2));\n}\n\nvec3 srgbToLinear(vec3 srgbColor) {\n  return pow(srgbColor, vec3(2.2));\n}\n\nvoid main(){\n${this.mainPrerequisites}\n\n  vec4 baseColor = ${_texture}(u_baseColorTexture, v_texcoord);\n  baseColor.rgb = linearToSrgb(baseColor.rgb);\n\n  rt0 = vec4(baseColor.rgb, 1.0);\n\n  ${_def_fragColor}\n}`;\n    }\n    get attributeCompositions() {\n        return [\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__[\"CompositionType\"].Vec3,\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__[\"CompositionType\"].Vec2,\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__[\"CompositionType\"].Scalar,\n        ];\n    }\n}\nGammaCorrectionShader.materialElement = _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_2__[\"ShaderNode\"].ClassicShading;\n\n\n//# sourceURL=webpack:///./src/webgl/shaders/GammaCorrectionShader.ts?");

/***/ }),

/***/ "./src/webgl/shaders/MToonShader.ts":
/*!******************************************!*\
  !*** ./src/webgl/shaders/MToonShader.ts ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MToonShader; });\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GLSLShader */ \"./src/webgl/shaders/GLSLShader.ts\");\n/* harmony import */ var _foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../foundation/definitions/ShaderNode */ \"./src/foundation/definitions/ShaderNode.ts\");\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../foundation/components/WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n\n\n\n\n\n\nclass MToonShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor() {\n        super();\n        this.attributeNames = [\n            'a_instanceID',\n            'a_texcoord',\n            'a_position', 'a_normal', 'a_faceNormal', 'a_tangent',\n            'a_baryCentricCoord', 'a_joint', 'a_weight',\n        ];\n        this.attributeSemantics = [\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Instance,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Texcoord0,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Position, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Normal, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].FaceNormal, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Tangent,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].BaryCentricCoord, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Joints0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Weights0,\n        ];\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new MToonShader();\n        }\n        return this.__instance;\n    }\n    getVertexShaderBody(args) {\n        const _version = this.glsl_versionText;\n        const _texture = this.glsl_texture;\n        const _in = this.glsl_vertex_in;\n        const _out = this.glsl_vertex_out;\n        return `${_version}\r\n${this.glslPrecision}\r\n\r\n// This shader is based on https://github.com/Santarh/MToon\r\n\r\n${(typeof args.definitions !== 'undefined') ? args.definitions : ''}\r\n\r\n${_in} float a_instanceID;\r\n${_in} vec2 a_texcoord;\r\n${_in} vec3 a_position;\r\n${_in} vec3 a_normal;\r\n${_in} vec3 a_faceNormal;\r\n${_in} vec3 a_tangent;\r\n${_in} vec4 a_baryCentricCoord;\r\n${_in} vec4 a_joint;\r\n${_in} vec4 a_weight;\r\n\r\n${_out} vec2 v_texcoord;\r\n${_out} vec3 v_baryCentricCoord;\r\n${_out} vec3 v_binormal_inWorld; // bitangent_inWorld\r\n${_out} vec3 v_faceNormal_inWorld;\r\n${_out} vec3 v_normal_inView;\r\n${_out} vec3 v_normal_inWorld;\r\n${_out} vec3 v_tangent_inWorld;\r\n${_out} vec4 v_position_inWorld;\r\n\r\n${this.prerequisites}\r\n\r\n${(typeof args.getters !== 'undefined') ? args.getters : ''}\r\n\r\n${(typeof args.matricesGetters !== 'undefined') ? args.matricesGetters : ''}\r\n\r\n${this.toNormalMatrix}\r\n\r\n${this.getSkinMatrix}\r\n\r\n${this.processGeometryWithSkinningOptionally}\r\n\r\nvoid main(){\r\n  #ifdef RN_MTOON_IS_OUTLINE\r\n    #ifdef RN_MTOON_OUTLINE_NONE\r\n      return;\r\n    #endif\r\n  #endif\r\n  ${this.mainPrerequisites}\r\n\r\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\r\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\r\n  bool isSkinning = false;\r\n  isSkinning = processGeometryWithMorphingAndSkinning(\r\n    skeletalComponentSID,\r\n    worldMatrix,\r\n    normalMatrix,\r\n    normalMatrix,\r\n    a_position,\r\n    v_position_inWorld,\r\n    a_normal,\r\n    v_normal_inWorld\r\n  );\r\n\r\n  float cameraSID = u_currentComponentSIDs[${_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__[\"WellKnownComponentTIDs\"].CameraComponentTID}];\r\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\r\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\r\n\r\n  v_normal_inView = vec3(viewMatrix * vec4(v_normal_inWorld, 0.0));\r\n\r\n  #ifndef RN_MTOON_IS_OUTLINE //ndef\r\n    gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\r\n  #else\r\n    float outlineTex = ${_texture}(u_outlineWidthTexture, a_texcoord).r;\r\n    #if defined(RN_MTOON_OUTLINE_WIDTH_WORLD)\r\n      float outlineWidth = get_outlineWidth(materialSID, 0);\r\n      vec3 outlineOffset = 0.01 * outlineWidth * outlineTex * a_normal;\r\n      vec4 worldOutlineOffset = worldMatrix * vec4(outlineOffset, 0.0);\r\n      gl_Position = projectionMatrix * viewMatrix * (v_position_inWorld + worldOutlineOffset);\r\n\r\n    #elif defined(RN_MTOON_OUTLINE_WIDTH_SCREEN)\r\n      vec4 vertex = projectionMatrix * viewMatrix * v_position_inWorld;\r\n\r\n      vec3 clipNormal = (projectionMatrix * vec4(v_normal_inView, 1.0)).xyz;\r\n      vec2 projectedNormal = normalize(clipNormal.xy);\r\n      float outlineScaledMaxDistance = get_outlineScaledMaxDistance(materialSID, 0);\r\n      projectedNormal *= min(vertex.w, outlineScaledMaxDistance);\r\n      float aspect = abs(get_aspect(0.0, 0)); //solo datum\r\n      projectedNormal.x *= aspect;\r\n\r\n      float outlineWidth = get_outlineWidth(materialSID, 0);\r\n      vertex.xy += 0.01 * outlineWidth * outlineTex * projectedNormal * clamp(1.0 - abs(v_normal_inView.z), 0.0, 1.0); // ignore offset when normal toward camera\r\n\r\n      gl_Position = vertex;\r\n    #else\r\n      gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\r\n    #endif\r\n  #endif\r\n\r\n  if (abs(length(a_normal)) > 0.01) {\r\n    // if normal exist\r\n    vec3 tangent_inWorld;\r\n    if (!isSkinning) {\r\n      tangent_inWorld = normalMatrix * a_tangent;\r\n      v_position_inWorld = worldMatrix * vec4(a_position, 1.0);\r\n    }\r\n\r\n    v_binormal_inWorld = cross(v_normal_inWorld, tangent_inWorld);\r\n    v_tangent_inWorld = cross(v_binormal_inWorld, v_normal_inWorld);\r\n  }\r\n\r\n  v_texcoord = a_texcoord;\r\n\r\n  v_baryCentricCoord = a_baryCentricCoord.xyz;\r\n  v_faceNormal_inWorld = normalMatrix * a_faceNormal;\r\n}`;\n    }\n    getFragmentShader(args) {\n        const _version = this.glsl_versionText;\n        const _in = this.glsl_fragment_in;\n        const _def_rt0 = this.glsl_rt0;\n        const _def_fragColor = this.glsl_fragColor;\n        const _texture = this.glsl_texture;\n        const _textureCube = this.glsl_textureCube;\n        let accessSpecularIBLTexture;\n        const repo = this.__webglResourceRepository;\n        if (repo.currentWebGLContextWrapper.webgl1ExtSTL) {\n            accessSpecularIBLTexture = `vec4 specularTexel = ${_textureCube}LodEXT(u_specularEnvTexture, vec3(-reflection.x, reflection.y, reflection.z), lod);`;\n        }\n        else {\n            accessSpecularIBLTexture = `vec4 specularTexel = ${_textureCube}(u_specularEnvTexture, vec3(-reflection.x, reflection.y, reflection.z));`;\n        }\n        return `${_version}\r\n${this.glsl1ShaderTextureLodExt}\r\n${this.glsl1ShaderDerivativeExt}\r\n${this.glslPrecision}\r\n\r\n\r\n${(typeof args.definitions !== 'undefined') ? args.definitions : ''}\r\n\r\n${this.prerequisites}\r\n\r\nconst float EPS_COL = 0.00001;\r\n\r\n${_in} vec2 v_texcoord;\r\n${_in} vec3 v_baryCentricCoord;\r\n${_in} vec3 v_binormal_inWorld; // bitangent_inWorld\r\n${_in} vec3 v_faceNormal_inWorld;\r\n${_in} vec3 v_normal_inView;\r\n${_in} vec3 v_normal_inWorld;\r\n${_in} vec3 v_tangent_inWorld;\r\n${_in} vec4 v_position_inWorld;\r\n${_def_rt0}\r\n\r\n${(typeof args.getters !== 'undefined') ? args.getters : ''}\r\n\r\nfloat edge_ratio(vec3 bary3, float wireframeWidthInner, float wireframeWidthRelativeScale) {\r\n  vec3 d = fwidth(bary3);\r\n  vec3 x = bary3+vec3(1.0 - wireframeWidthInner)*d;\r\n  vec3 a3 = smoothstep(vec3(0.0), d, x);\r\n  float factor = min(min(a3.x, a3.y), a3.z);\r\n\r\n  return clamp((1.0 - factor), 0.0, 1.0);\r\n}\r\n\r\nvec3 srgbToLinear(vec3 srgbColor) {\r\n  return pow(srgbColor, vec3(2.2));\r\n}\r\n\r\nvoid main (){\r\n  #ifdef RN_MTOON_IS_OUTLINE\r\n    #ifdef RN_MTOON_OUTLINE_NONE\r\n      discard;\r\n    #endif\r\n  #endif\r\n  ${this.mainPrerequisites}\r\n\r\n\r\n  // TODO\r\n  // uv transform\r\n\r\n  // TODO\r\n  // uv animation\r\n\r\n  // main color\r\n  vec4 litTextureColor = ${_texture}(u_litColorTexture, v_texcoord);\r\n  vec4 litColorFactor = get_litColor(materialSID, 0);\r\n\r\n  // alpha\r\n  float alpha = 1.0;\r\n\r\n  #ifdef RN_ALPHATEST_ON\r\n    alpha = litTextureColor.a * litColorFactor.a;\r\n    float cutoff = get_cutoff(materialSID, 0);\r\n    if(alpha < cutoff) discard;\r\n  #elif defined(RN_ALPHABLEND_ON)\r\n    alpha = litTextureColor.a * litColorFactor.a;\r\n  #endif\r\n\r\n  if (alpha < 0.01) {\r\n    discard;\r\n  }else{\r\n    rt0.w = alpha;\r\n  }\r\n\r\n\r\n  #ifdef RN_MTOON_IS_OUTLINE\r\n    #ifdef RN_MTOON_OUTLINE_COLOR_FIXED\r\n      vec3 outlineColor = get_outlineColor(materialSID, 0);\r\n      rt0.xyz = outlineColor;\r\n\r\n      rt0.xyz = srgbToLinear(rt0.xyz);\r\n      ${_def_fragColor}\r\n      return;\r\n    #endif\r\n  #endif\r\n\r\n\r\n  // Normal\r\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\r\n\r\n  #ifdef RN_MTOON_HAS_NORMALMAP\r\n    if (abs(length(v_tangent_inWorld)) > 0.01) {\r\n      vec3 tangent_inWorld = normalize(v_tangent_inWorld);\r\n      vec3 binormal_inWorld = normalize(v_binormal_inWorld);\r\n\r\n      mat3 tbnMat_tangent_to_world = mat3(\r\n        tangent_inWorld.x, tangent_inWorld.y, tangent_inWorld.z,\r\n        binormal_inWorld.x, binormal_inWorld.y, binormal_inWorld.z,\r\n        normal_inWorld.x, normal_inWorld.y, normal_inWorld.z\r\n      );\r\n\r\n      vec3 normal = ${_texture}(u_normalTexture, v_texcoord).xyz * 2.0 - 1.0;\r\n      float normalScale = get_normalScale(materialSID, 0);\r\n      normal.xy *= normalScale;\r\n      normal_inWorld = normalize(tbnMat_tangent_to_world * normal);\r\n    }\r\n  #endif\r\n\r\n  #ifdef RN_MTOON_IS_OUTLINE\r\n    normal_inWorld *= -1.0;\r\n  #endif\r\n\r\n\r\n  // Lighting, Direct Light\r\n\r\n  float shadowAttenuation = 1.0;\r\n  // TODO: shadowmap computation\r\n\r\n  float receiveShadowRate = get_receiveShadowRate(materialSID, 0);\r\n  float lightAttenuation = shadowAttenuation * mix(1.0, shadowAttenuation, receiveShadowRate * ${_texture}(u_receiveShadowTexture, v_texcoord).r);\r\n\r\n  float shadingGradeRate = get_shadingGradeRate(materialSID, 0);\r\n  float shadingGrade = 1.0 - shadingGradeRate * (1.0 - ${_texture}(u_shadingGradeTexture, v_texcoord).r);\r\n  float lightColorAttenuation = get_lightColorAttenuation(materialSID, 0);\r\n\r\n  vec3 shadeColorFactor = get_shadeColor(materialSID, 0);\r\n  vec3 shadeColor = shadeColorFactor * ${_texture}(u_shadeColorTexture, v_texcoord).xyz;\r\n  shadeColor.xyz = srgbToLinear(shadeColor.xyz);\r\n\r\n  vec3 litColor = litColorFactor.xyz * litTextureColor.xyz;\r\n  litColor.xyz = srgbToLinear(litColor.xyz);\r\n\r\n\r\n  float shadeShift = get_shadeShift(materialSID, 0);\r\n  float shadeToony = get_shadeToony(materialSID, 0);\r\n\r\n  vec3 lightings[${_foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].maxLightNumberInShader}];\r\n  #ifdef RN_MTOON_DEBUG_LITSHADERATE\r\n    float lightIntensities[${_foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].maxLightNumberInShader}];\r\n  #endif\r\n  for (int i = 0; i < ${_foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].maxLightNumberInShader}; i++) {\r\n    if (i >= lightNumber) {\r\n      break;\r\n    }\r\n\r\n    // Rn_Light\r\n    vec4 gotLightDirection = get_lightDirection(0.0, i);\r\n    vec4 gotLightIntensity = get_lightIntensity(0.0, i); //light color\r\n    vec4 gotLightPosition = get_lightPosition(0.0, i);\r\n    vec3 lightDirection = gotLightDirection.xyz;\r\n    vec3 lightColor = gotLightIntensity.xyz;\r\n    vec3 lightPosition = gotLightPosition.xyz;\r\n    float lightType = gotLightPosition.w;\r\n    float spotCosCutoff = gotLightDirection.w;\r\n    float spotExponent = gotLightIntensity.w;\r\n\r\n    float distanceAttenuation = 1.0;\r\n    if (lightType > 0.75) { // is pointlight or spotlight\r\n      lightDirection = normalize(lightPosition.xyz - v_position_inWorld.xyz);\r\n\r\n      float distance = dot(lightPosition - v_position_inWorld.xyz, lightPosition - v_position_inWorld.xyz);\r\n      distanceAttenuation = 1.0 / pow(distance, 2.0);\r\n    }\r\n\r\n    float spotEffect = 1.0;\r\n    if (lightType > 1.75) { // is spotlight\r\n      spotEffect *= dot(gotLightDirection.xyz, lightDirection);\r\n      if (spotEffect > spotCosCutoff) {\r\n        spotEffect *= pow(clamp(spotEffect, 0.0, 1.0), spotExponent);\r\n      } else {\r\n        spotEffect = 0.0;\r\n      }\r\n    }\r\n\r\n    // lightAttenuation *= distanceAttenuation * spotEffect;\r\n    float dotNL = dot(lightDirection, normal_inWorld);\r\n    float lightIntensity = dotNL * 0.5 + 0.5; // from [-1, +1] to [0, 1]\r\n    lightIntensity = lightIntensity * lightAttenuation; // TODO: receive shadow\r\n    lightIntensity = lightIntensity * shadingGrade; // darker\r\n    lightIntensity = lightIntensity * 2.0 - 1.0; // from [0, 1] to [-1, +1]\r\n\r\n    // tooned. mapping from [minIntensityThreshold, maxIntensityThreshold] to [0, 1]\r\n    float maxIntensityThreshold = mix(1.0, shadeShift, shadeToony);\r\n    float minIntensityThreshold = shadeShift;\r\n    lightIntensity = clamp((lightIntensity - minIntensityThreshold) / max(EPS_COL, (maxIntensityThreshold - minIntensityThreshold)), 0.0, 1.0);\r\n    #ifdef RN_MTOON_DEBUG_LITSHADERATE\r\n      lightIntensities[i] = lightIntensity;\r\n    #endif\r\n\r\n    // Albedo color\r\n    vec3 col = mix(shadeColor, litColor, lightIntensity);\r\n\r\n    // Direct Light\r\n    vec3 lighting = lightColor;\r\n    lighting = mix(lighting, vec3(max(EPS_COL, max(lighting.x, max(lighting.y, lighting.z)))), lightColorAttenuation); // color atten\r\n\r\n\r\n    if(i > 0){\r\n      lighting *= 0.5; // darken if additional light.\r\n      lighting *= min(0.0, dotNL) + 1.0; // darken dotNL < 0 area by using half lambert\r\n      // lighting *= shadowAttenuation; // darken if receiving shadow\r\n      #ifdef _ALPHABLEND_ON\r\n        lighting *= step(0, dotNL); // darken if transparent. Because Unity's transparent material can't receive shadowAttenuation.\r\n      #endif\r\n    }\r\n\r\n    col *= lighting;\r\n    lightings[i] = lighting;\r\n\r\n    rt0.xyz += col;\r\n\r\n    lightAttenuation = 1.0;\r\n  }\r\n\r\n\r\n  // Indirect Light\r\n  vec3 indirectLighting = get_ambientColor(materialSID, 0);\r\n  indirectLighting = srgbToLinear(indirectLighting);\r\n  indirectLighting = mix(indirectLighting, vec3(max(EPS_COL, max(indirectLighting.x, max(indirectLighting.y, indirectLighting.z)))), lightColorAttenuation); // color atten\r\n  // TODO: use ShadeIrad in www.ppsloan.org/publications/StupidSH36.pdf\r\n\r\n  rt0.xyz += indirectLighting * litColor;\r\n  rt0.xyz = min(rt0.xyz, litColor); // comment out if you want to PBR absolutely.\r\n\r\n\r\n  #ifdef RN_MTOON_IS_OUTLINE\r\n    #ifdef RN_MTOON_OUTLINE_COLOR_MIXED\r\n      vec3 outlineColor = get_outlineColor(materialSID, 0);\r\n      outlineColor = srgbToLinear(outlineColor);\r\n      float outlineLightingMix = get_outlineLightingMix(materialSID, 0);\r\n      rt0.xyz = outlineColor * mix(vec3(1.0), rt0.xyz, outlineLightingMix);\r\n    #endif\r\n  #else\r\n    float cameraSID = u_currentComponentSIDs[${_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__[\"WellKnownComponentTIDs\"].CameraComponentTID}];\r\n    vec3 viewPosition = get_viewPosition(cameraSID, 0);\r\n    vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\r\n\r\n    float rimFresnelPower = get_rimFresnelPower(materialSID, 0);\r\n    float rimLift = get_rimLift(materialSID, 0);\r\n    vec3 rimColorFactor = get_rimColor(materialSID, 0);\r\n    vec3 rimTextureColor = ${_texture}(u_rimTexture, v_texcoord).xyz;\r\n    vec3 rimColor = srgbToLinear(rimColorFactor * rimTextureColor);\r\n    vec3 rim = pow(clamp(1.0 - dot(normal_inWorld, viewDirection) + rimLift, 0.0, 1.0), rimFresnelPower) * rimColor;\r\n\r\n    float staticRimLighting = 1.0;\r\n    float rimLightingMix = get_rimLightingMix(materialSID, 0);\r\n    for (int i = 0; i < ${_foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].maxLightNumberInShader}; i++) {\r\n      if (i >= lightNumber) break;\r\n\r\n      if(i > 0) staticRimLighting = 0.0;\r\n\r\n      vec3 rimLighting = mix(vec3(staticRimLighting), lightings[i], vec3(rimLightingMix));\r\n      rt0.xyz += rim * rimLighting;\r\n    }\r\n\r\n    // additive matcap\r\n    vec3 cameraUp = get_cameraUp(0.0, 0); //solo datum\r\n    vec3 worldViewUp = normalize(cameraUp - viewDirection * dot(viewDirection, cameraUp));\r\n    vec3 worldViewRight = normalize(cross(viewDirection, worldViewUp));\r\n    vec2 matcapUv = vec2(dot(worldViewRight, normal_inWorld), dot(worldViewUp, normal_inWorld)) * 0.5 + 0.5;\r\n    vec3 matCapColor = srgbToLinear(${_texture}(u_matCapTexture, matcapUv).xyz);\r\n    rt0.xyz += matCapColor;\r\n\r\n\r\n    // Emission\r\n    vec3 emissionColor = get_emissionColor(materialSID, 0);\r\n    vec3 emission = srgbToLinear(${_texture}(u_emissionTexture, v_texcoord).xyz) * emissionColor;\r\n    rt0.xyz += emission;\r\n  #endif\r\n\r\n\r\n  // debug\r\n  #ifdef RN_MTOON_DEBUG_NORMAL\r\n    rt0 = vec4(normal_inWorld * 0.5 + 0.5, alpha);\r\n\r\n    rt0.xyz = srgbToLinear(rt0.xyz);\r\n    ${_def_fragColor}\r\n    return;\r\n  #elif defined(RN_MTOON_DEBUG_LITSHADERATE)\r\n    rt0 = vec4(0.0);\r\n    for (int i = 0; i < ${_foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].maxLightNumberInShader}; i++) {\r\n      if (i >= lightNumber) break;\r\n      rt0 += vec4(lightIntensities[i] * lightings[i], alpha);\r\n    }\r\n\r\n    rt0.xyz = srgbToLinear(rt0.xyz);\r\n    ${_def_fragColor}\r\n    return;\r\n  #endif\r\n\r\n\r\n  // Wireframe\r\n  float threshold = 0.001;\r\n  vec3 wireframe = get_wireframe(materialSID, 0);\r\n  float wireframeWidthInner = wireframe.z;\r\n  float wireframeWidthRelativeScale = 1.0;\r\n  if (wireframe.x > 0.5 && wireframe.y < 0.5) {\r\n    rt0.a = 0.0;\r\n  }\r\n  vec4 wireframeResult = rt0;\r\n  vec4 wireframeColor = vec4(0.2, 0.75, 0.0, 1.0);\r\n  float edgeRatio = edge_ratio(v_baryCentricCoord, wireframeWidthInner, wireframeWidthRelativeScale);\r\n  float edgeRatioModified = mix(step(threshold, edgeRatio), clamp(edgeRatio*4.0, 0.0, 1.0), wireframeWidthInner / wireframeWidthRelativeScale/4.0);\r\n  // if r0.a is 0.0, it is wireframe not on shaded\r\n  wireframeResult.rgb = wireframeColor.rgb * edgeRatioModified + rt0.rgb * (1.0 - edgeRatioModified);\r\n  wireframeResult.a = max(rt0.a, wireframeColor.a * mix(edgeRatioModified, pow(edgeRatioModified, 100.0), wireframeWidthInner / wireframeWidthRelativeScale/1.0));\r\n\r\n  if (wireframe.x > 0.5) {\r\n    rt0 = wireframeResult;\r\n    if (wireframe.y < 0.5 && rt0.a == 0.0) {\r\n      discard;\r\n    }\r\n  }\r\n\r\n  ${_def_fragColor}\r\n}\r\n`;\n    }\n    get pixelShaderDefinitions() {\n        return '';\n    }\n    getPixelShaderBody(args) {\n        return this.getFragmentShader(args);\n    }\n    get attributeCompositions() {\n        return [\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar,\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec2,\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3,\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec4, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec4, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec4,\n        ];\n    }\n}\nMToonShader.materialElement = _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_3__[\"ShaderNode\"].PBRShading;\n\n\n//# sourceURL=webpack:///./src/webgl/shaders/MToonShader.ts?");

/***/ }),

/***/ "./src/webgl/shaders/ShadowMapDecodeClassicShader.ts":
/*!***********************************************************!*\
  !*** ./src/webgl/shaders/ShadowMapDecodeClassicShader.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ShadowMapDecodeClassicShader; });\n/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/definitions/VertexAttribute */ \"./src/foundation/definitions/VertexAttribute.ts\");\n/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GLSLShader */ \"./src/webgl/shaders/GLSLShader.ts\");\n/* harmony import */ var _foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/core/Config */ \"./src/foundation/core/Config.ts\");\n/* harmony import */ var _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../foundation/definitions/ShaderNode */ \"./src/foundation/definitions/ShaderNode.ts\");\n/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../foundation/definitions/CompositionType */ \"./src/foundation/definitions/CompositionType.ts\");\n/* harmony import */ var _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../foundation/core/ComponentRepository */ \"./src/foundation/core/ComponentRepository.ts\");\n/* harmony import */ var _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../foundation/components/CameraComponent */ \"./src/foundation/components/CameraComponent.ts\");\n/* harmony import */ var _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../foundation/components/WellKnownComponentTIDs */ \"./src/foundation/components/WellKnownComponentTIDs.ts\");\n\n\n\n\n\n\n\n\nclass ShadowMapDecodeClassicShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n    constructor() {\n        super();\n        this.attributeNames = [\n            'a_instanceID',\n            'a_texcoord_0', 'a_texcoord_1',\n            'a_position', 'a_color', 'a_normal',\n            'a_joint', 'a_weight',\n        ];\n        this.attributeSemantics = [\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Instance,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Texcoord0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Texcoord1,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Position, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Color0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Normal,\n            _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Joints0, _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__[\"VertexAttribute\"].Weights0,\n        ];\n    }\n    static getInstance() {\n        if (!this.__instance) {\n            this.__instance = new ShadowMapDecodeClassicShader();\n        }\n        return this.__instance;\n    }\n    getVertexShaderBody(args) {\n        const _version = this.glsl_versionText;\n        const _in = this.glsl_vertex_in;\n        const _out = this.glsl_vertex_out;\n        return `${_version}\n${this.glslPrecision}\n\n${(typeof args.definitions !== 'undefined') ? args.definitions : ''}\n\n${_in} vec3 a_position;\n${_in} vec3 a_color;\n${_in} vec3 a_normal;\n${_in} float a_instanceID;\n${_in} vec2 a_texcoord_0;\n${_in} vec2 a_texcoord_1;\n${_in} vec4 a_joint;\n${_in} vec4 a_weight;\n${_out} vec3 v_color;\n${_out} vec3 v_normal_inWorld;\n${_out} vec4 v_position_inWorld;\n${_out} vec2 v_texcoord_0;\n${_out} vec4 v_texcoord_1;\n${_out} vec4 v_projPosition_from_light;\n\n${this.prerequisites}\n\n${(typeof args.matricesGetters !== 'undefined') ? args.matricesGetters : ''}\n\n${(typeof args.getters !== 'undefined') ? args.getters : ''}\n\n${this.toNormalMatrix}\n\n${this.getSkinMatrix}\n\n${this.processGeometryWithSkinningOptionally}\n\nvoid main(){\n\n  ${this.mainPrerequisites}\n  float cameraSID = u_currentComponentSIDs[${_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__[\"WellKnownComponentTIDs\"].CameraComponentTID}];\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\n\n  // Skeletal\n  processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n  ${this.pointSprite}\n\n  // Shadow mapping\n  mat4 lightViewProjectionMatrix = get_lightViewProjectionMatrix(materialSID, 0);\n  v_projPosition_from_light = lightViewProjectionMatrix * v_position_inWorld;\n\n  // Following tMatrix is based on https://wgld.org/d/webgl/w051.html\n  mat4 tMatrix = mat4(\n    0.5, 0.0, 0.0, 0.0,\n    0.0, 0.5, 0.0, 0.0,\n    0.0, 0.0, 1.0, 0.0,\n    0.5, 0.5, 0.0, 1.0\n  );\n  v_texcoord_1 = tMatrix * v_projPosition_from_light;\n\n  v_color = a_color;\n  v_normal_inWorld = normalMatrix * a_normal;\n  v_texcoord_0 = a_texcoord_0;\n\n}\n`;\n    }\n    getFragmentShader(args) {\n        const _version = this.glsl_versionText;\n        const _in = this.glsl_fragment_in;\n        const _def_rt0 = this.glsl_rt0;\n        const _def_fragColor = this.glsl_fragColor;\n        const _texture = this.glsl_texture;\n        const _textureProj = this.glsl_textureProj;\n        const mainCameraComponent = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getInstance().getComponent(_foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"], _foundation_components_CameraComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].main);\n        let zNear = mainCameraComponent.zNearInner;\n        let zFar = mainCameraComponent.zFarInner;\n        let ZNearToFar = zFar - zNear;\n        if (Number.isInteger(ZNearToFar)) {\n            ZNearToFar = ZNearToFar + '.0';\n        }\n        return `${_version}\n${this.glslPrecision}\n\n${(typeof args.definitions !== 'undefined') ? args.definitions : ''}\n\n${this.prerequisites}\n\n${_in} vec3 v_color;\n${_in} vec3 v_normal_inWorld;\n${_in} vec4 v_position_inWorld;\n${_in} vec2 v_texcoord_0;\n${_in} vec4 v_texcoord_1;\n${_in} vec4 v_projPosition_from_light;\n${_def_rt0}\n\n${(typeof args.getters !== 'undefined') ? args.getters : ''}\n\nfloat decodeRGBAToDepth(vec4 RGBA){\n  const float rMask = 1.0;\n  const float gMask = 1.0 / 255.0;\n  const float bMask = 1.0 / (255.0 * 255.0);\n  const float aMask = 1.0 / (255.0 * 255.0 * 255.0);\n  float depth = dot(RGBA, vec4(rMask, gMask, bMask, aMask));\n  return depth;\n}\n\nvoid main (){\n  ${this.mainPrerequisites}\n\n  // Normal\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\n\n  // diffuseColor\n  vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n\n  vec4 diffuseColorFactor = get_diffuseColorFactor(materialSID, 0);\n  if (v_color != diffuseColor && diffuseColorFactor.rgb != diffuseColor) {\n    diffuseColor = v_color * diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (v_color == diffuseColor) {\n    diffuseColor = diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (diffuseColorFactor.rgb == diffuseColor) {\n    diffuseColor = v_color;\n  } else {\n    diffuseColor = vec3(1.0, 1.0, 1.0);\n  }\n\n  // diffuseColorTexture\n  vec4 textureColor = ${_texture}(u_diffuseColorTexture, v_texcoord_0);\n  if (textureColor.r > 0.05) {\n    diffuseColor *= textureColor.rgb;\n    alpha *= textureColor.a;\n  }\n\n  // shadow mapping\n  float nonShadowAlpha = get_nonShadowAlpha(materialSID, 0);\n  if(v_projPosition_from_light.w > 0.0){\n    float normalizationCoefficient = 1.0 / ${ZNearToFar};\n    float measureDepth = normalizationCoefficient * length(v_projPosition_from_light);\n    float textureDepth = decodeRGBAToDepth(${_textureProj}(u_depthTexture, v_texcoord_1));\n    float allowableDepthError = get_allowableDepthError(materialSID, 0);\n    if(measureDepth > textureDepth + allowableDepthError){\n      vec3 shadowColor = get_shadowColor(materialSID, 0);\n      diffuseColor *= shadowColor;\n\n      float shadowAlpha = get_shadowAlpha(materialSID, 0);\n      alpha *= shadowAlpha;\n    }else{\n      alpha *= nonShadowAlpha;\n    }\n  }else{\n    alpha *= nonShadowAlpha;\n  }\n\n  // Lighting\n  vec3 shadingColor = vec3(0.0, 0.0, 0.0);\n  int shadingModel = get_shadingModel(materialSID, 0);\n  if (shadingModel > 0) {\n\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\n    vec3 specular = vec3(0.0, 0.0, 0.0);\n    int lightNumber = get_lightNumber(materialSID, 0);\n    for (int i = 0; i < ${_foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].maxLightNumberInShader}; i++) {\n      if (i >= lightNumber) {\n        break;\n      }\n\n      vec4 gotLightDirection = get_lightDirection(0.0, i);\n      vec4 gotLightIntensity = get_lightIntensity(0.0, i);\n      vec4 gotLightPosition = get_lightPosition(0.0, i);\n\n      vec3 lightDirection = gotLightDirection.xyz;\n      vec3 lightIntensity = gotLightIntensity.xyz;\n      vec3 lightPosition = gotLightPosition.xyz;\n      float spotCosCutoff = gotLightDirection.w;\n      float spotExponent = gotLightIntensity.w;\n      float lightType = gotLightPosition.w;\n\n      if (0.75 < lightType) { // is pointlight or spotlight\n        lightDirection = normalize(lightPosition - v_position_inWorld.xyz);\n      }\n      float spotEffect = 1.0;\n      if (lightType > 1.75) { // is spotlight\n        spotEffect = dot(gotLightDirection.xyz, lightDirection);\n        if (spotEffect > spotCosCutoff) {\n          spotEffect = pow(spotEffect, spotExponent);\n        } else {\n          spotEffect = 0.0;\n        }\n      }\n\n      vec3 incidentLight = spotEffect * lightIntensity.xyz;\n//      incidentLight *= M_PI;\n\n      diffuse += diffuseColor * max(0.0, dot(normal_inWorld, lightDirection)) * incidentLight;\n\n      float cameraSID = u_currentComponentSIDs[${_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__[\"WellKnownComponentTIDs\"].CameraComponentTID}];\n      vec3 viewPosition = get_viewPosition(cameraSID, 0);\n      float shininess = get_shininess(materialSID, 0);\n      if (shadingModel == 2) {// BLINN\n        // ViewDirection\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n        vec3 halfVector = normalize(lightDirection + viewDirection);\n        specular += pow(max(0.0, dot(halfVector, normal_inWorld)), shininess);\n      } else if (shadingModel == 3) { // PHONG\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n        vec3 R = reflect(lightDirection, normal_inWorld);\n        specular += pow(max(0.0, dot(R, viewDirection)), shininess);\n      }\n\n    }\n\n    shadingColor = diffuse + specular;\n  } else {\n    shadingColor = diffuseColor;\n  }\n\n  rt0 = vec4(shadingColor, alpha);\n  //rt0 = vec4(u_lightNumber, 0.0, 0.0, 1.0);\n\n\n  ${_def_fragColor}\n}\n`;\n    }\n    getPixelShaderBody(args) {\n        return this.getFragmentShader(args);\n    }\n    get attributeCompositions() {\n        return [\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Scalar,\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec2, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec2,\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec3,\n            _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec4, _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__[\"CompositionType\"].Vec4,\n        ];\n    }\n}\nShadowMapDecodeClassicShader.materialElement = _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_3__[\"ShaderNode\"].ClassicShading;\n\n\n//# sourceURL=webpack:///./src/webgl/shaders/ShadowMapDecodeClassicShader.ts?");

/***/ })

/******/ });
(0,eval)('this').Rn.VERSION='version: 0.1.1-1554-g2e5a5-mod branch: master';

(window.webpackJsonp=window.webpackJsonp||[]).push([["effekseer"],{58:function(e,t,n){"use strict";n.r(t);var s=n(8),i=n(10),a=n(2),r=n(6),o=n(20),_=n(24),h=n(7),p=n(27),l=n(12);class c extends s.a{constructor(e,t,n){super(e,t,n),this.__speed=1,this.playJustAfterLoaded=!1,this.isLoop=!1}$create(){this.__sceneGraphComponent=this.__entityRepository.getComponentOfEntity(this.__entityUid,i.a),this.__transformComponent=this.__entityRepository.getComponentOfEntity(this.__entityUid,o.a),this.moveStageTo(a.a.Load)}static get componentTID(){return l.a.EffekseerComponentTID}static common_$load(){if(c.__isInitialized)return;const e=p.a.getInstance().getModule("webgl").WebGLResourceRepository.getInstance().currentWebGLContextWrapper;e&&(effekseer.init(e.getRawContext()),c.__isInitialized=!0)}$load(){null==this.__effect&&(this.__effect=effekseer.loadEffect(this.uri,()=>{this.playJustAfterLoaded&&(this.isLoop?this.__timer=setInterval(()=>{this.play()},500):this.play())})),this.moveStageTo(a.a.PreRender)}cancelLoop(){clearInterval(this.__timer)}play(){const e=()=>{this.__handle=effekseer.play(this.__effect)};this.isLoop?this.__timer=setInterval(e,200):e()}static common_$logic(){effekseer.update()}$prerender(){if(null!=this.__handle){const e=new r.a(this.__sceneGraphComponent.worldMatrixInner);this.__handle.setMatrix(e.v),this.__handle.setSpeed(this.__speed)}}static common_$render(){const e=h.a.getInstance().getComponent(_.a,_.a.main);let t=c.__tmp_indentityMatrix,n=c.__tmp_indentityMatrix;e&&(t=e.viewMatrix,n=e.projectionMatrix),effekseer.setProjectionMatrix(n.v),effekseer.setCameraMatrix(t.v),effekseer.draw()}set playSpeed(e){this.__handle&&this.__handle.setSpeed(e),this.__speed=e}get playSpeed(){return this.__speed}set translate(e){this.__handle&&this.__handle.setLocation(e.x,e.y,e.z),this.__transformComponent.translate=e}get translate(){return this.__transformComponent.translate}set rotate(e){this.__handle&&this.__handle.setRotation(e.x,e.y,e.z),this.__transformComponent.rotate=e}get rotate(){return this.__transformComponent.rotate}set scale(e){this.__handle&&this.__handle.setScale(e.x,e.y,e.z),this.__transformComponent.scale=e}get scale(){return this.__transformComponent.scale}}c.__isInitialized=!1,c.__tmp_indentityMatrix=r.a.identity(),h.a.registerComponentClass(c);var d=n(33);const f=Object.freeze({EffekseerComponent:c,createEffekseerEntity:function(){return d.a.getInstance().createEntity([o.a,i.a,c])}});t.default=f}}]);